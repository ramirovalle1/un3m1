{% load sga_extras %}
<!DOCTYPE html>
<!--suppress JSUnresolvedVariable -->
<html lang="es" data-location="UNEMI">
<head>
    {#NOTIFICACIONES WEB#}
    {% if request.user.is_authenticated and permiteWebPush %}
        <meta name="vapid-key" content="{{ vapid_key }}">
        <meta name="islogged" content="{{ request.user.username }}">
        <meta name="uslog" content="{% if request.session.user_anterior %}{{ request.session.user_anterior }}{% else %}false{% endif %}">
        {% load pwa %}
        {% progressive_web_app_meta_i %}
    {% endif %}
    {#NOTIFICACIONES WEB#}
    <meta charset="utf-8">
    <title>{% block pagetitle %}{{ title }}{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="UNEMI">
    <meta name="theme-color" content="#1C3247 ">
    <link href="/static/sweet2/sweetalert2.css?1.0.5" rel="stylesheet"/>
    <script src="/static/sweet2/sweetalert2.js?1.0.1"></script>
    <script type='text/javascript' src="/static/js/jquery.min.js?4.0.0"></script>
    <script type='text/javascript' src="/static/js/jquery.blockUI.js?4.0.0"></script>
    <script type='text/javascript' src="/static/js/jquery.maskedinput.min.js?4.0.0"></script>
    <script type='text/javascript' src="/static/js/sysend.js?4.0.0"></script>
    <script type='text/javascript' src="/static/js/smoke.js?4.0.0"></script>
    <script type='text/javascript' src="/static/js/bs/bootstrap.min.js?5.0.1"></script>
    <script type='text/javascript' src="/static/js/bootstrap-datepicker.js?4.0.0"></script>
    <script type='text/javascript' src="/static/js/bootstrap-timepicker.js?4.0.0"></script>
    <script type='text/javascript' src="/static/js/bootstrap-modal.js?4.0.0"></script>
    <script type='text/javascript' src="/static/js/bootstrap-modalmanager.js?4.0.0"></script>
    <script type='text/javascript' src="/static/js/big.min.js?4.0.0"></script>
    <script type='text/javascript' src='/static/js/jquery.flexbox.js?4.0.0'></script>
    <script type='text/javascript' src='/static/js/dragdivscroll.js?4.0.0'></script>
    <script type='text/javascript' src='/static/js/jquery.dataTables.min.js?4.0.0'></script>
    <link href="/static/css/smoke.css?4.0.0" rel="stylesheet" type="text/css" media="screen"/>
    <link href="/static/css/bootstrap.min.css?19.0.20" rel="stylesheet"/>
    <link href="/static/css/bootstrap-responsive.css?5.0.0" rel="stylesheet"/>
    <link href='/static/css/font-awesome.css?4.0.0' rel='stylesheet'/>
    <link href='/static/css/font-awesome.min.css?4.0.0' rel='stylesheet'/>
    <link href="/static/css/stylesbs.css?5.2.0" rel='stylesheet'/>
    <link href="/static/css/datepicker.css?4.0.0" rel='stylesheet'/>
    <link href="/static/css/bootstrap-timepicker.css?4.0.0" rel='stylesheet'/>
    <link href="/static/css/bootstrap-modal.css?4.0.2" rel='stylesheet'/>
    <link href="/static/css/jquery.flexbox.css?4.0.0" type="text/css" rel="stylesheet"/>
    <link href="/static/css/jquery.dataTables.css?4.0.2" type="text/css" rel="stylesheet"/>
    <script type="text/javascript" src="/static/js/select2.js?v=4.0.0"></script>
    <link type="text/css" rel="stylesheet" href="/static/css/select2.css?v=4.0.2">
    <script type="text/javascript" src="/static/js/snow.js?4.0.0"></script>
    <script src="/static/js/offline/v0.7.13/offline.min.js"></script>
    <link rel="stylesheet" href="/static/js/offline/v0.7.13/offline-theme-default.css"/>
    <link rel="stylesheet" href="/static/js/offline/v0.7.13/offline-language-spanish.css"/>
    <style>
        .bg-footer {
            bottom: 0;
            position: fixed;
            right: 0;
            left: 0;
            z-index: 1030;
            margin-bottom: 0;
            overflow: visible;
            /*position: fixed;*/
            --bs-bg-opacity: 1;
            color: rgb(28, 50, 71);
            height: 31px;
            right: 0;
            left: 0;
            margin-bottom: 0;
            font-size: 13px;
            font-weight: 500;
            vertical-align: middle;
            padding-top: 7px;
            background-color: rgb(228, 237, 245) !important;
            clear: both;
        }

        @keyframes spinner-border {
            to {
                transform: rotate(360deg);
            }
        }

        .spinner-border {
            display: inline-block;
            width: 15rem;
            height: 15rem;
            vertical-align: text-bottom;
            border: 50% solid currentColor;
            border-right-color: transparent;
            border-radius: 50%;
            animation: spinner-border .75s linear infinite;
        }

        .spinner-border-sm {
            width: 15rem;
            height: 15rem;
            border-width: 50%;
        }


        @keyframes spinner-grow {
            0% {
                transform: scale(0);
            }
            50% {
                opacity: 1;
                transform: none;
            }
        }

        .spinner-grow {
            display: inline-block;
            width: 15rem;
            height: 15rem;
            vertical-align: text-bottom;
            border-radius: 50%;
            opacity: 66%;
            animation: spinner-grow .75s linear infinite;
        }

        .spinner-grow-sm {
            width: 15rem;
            height: 15rem;
        }

        .modal-body {
            max-height: calc(100vh - 190px);
            overflow-y: auto;
        }

        div.online-indicator {
            display: inline-block;
            width: 15px;
            height: 15px;
            margin-right: 10px;
            background-color: #0fcc45;
            border-radius: 50%;
            position: relative;
        }

        span.blink-online {
            display: block;
            width: 15px;
            height: 15px;
            background-color: #0fcc45;
            opacity: 0.7;
            border-radius: 50%;

            animation: blink 1s linear infinite;
        }

        div.offline-indicator {
            display: inline-block;
            width: 15px;
            height: 15px;
            margin-right: 10px;
            background-color: #ba2121;
            border-radius: 50%;
            position: relative;
        }

        span.blink-offline {
            display: block;
            width: 15px;
            height: 15px;
            background-color: #ba2121;
            opacity: 0.7;
            border-radius: 50%;
            animation: blink 1s linear infinite;
        }

        /*Animations*/

        @keyframes blink {
            100% {
                transform: scale(2, 2);
                opacity: 0;
            }
        }

        .status-circle-offline {
            background-color: red;
        }

        .status-circle-line {
            background-color: #0fcc45;
        }
    </style>
    <script>
        localStorage.setItem("request_path", '{{ request.path }}');
        function formModalReport(id, text, action, tiporeporte, idreporte, footer = true) {
            bloqueointerface()
            $('.panelbody-firma').empty()
            $('#footermodal-firma').show();
            $.ajax({
                type: "GET",
                url: `{{ request.path }}`,
                data: {
                    'action': action,
                    'id': id,
                    'reporte': idreporte,
                    'tipos': tiporeporte,
                },
                success: function (data) {
                    $.unblockUI();
                    if (data.result === true) {
                        if (footer === true) {
                            $('#footermodal-firma').hide();
                        }
                        $('.panelbody-firma').html(data.data);
                        $('#modalfirmaelectronida .paneltitle-firma').html(text.toUpperCase());
                        $("#modalfirmaelectronida").modal({backdrop: 'static',width: '1200',height: '900'}).modal('show');
                    } else {
                        mensajeDanger(data.message);
                    }
                },
                error: function () {
                    $.unblockUI();
                    mensajeDanger("Error de conexión.");
                },
                dataType: "json"
            });
        }
        function soloNumeros(e) {
            var key = window.Event ? e.which : e.keyCode
            return (key >= 48 && key <= 57)
        }

        function soloNumerosValor(e) {
            key = e.keyCode || e.which;
            teclado = String.fromCharCode(key);
            letras = "1234567890.";
            if (letras.indexOf(teclado) === -1) {
                return false;
            }
        }
    </script>
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4ZBWFH9X5W"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'G-4ZBWFH9X5W');
    </script>
    {#    <link rel="shortcut icon" href="/static/images/aok/favicon32X32.ico?1.6.0">#}
    <link rel="shortcut icon" type="image/x-icon" href="/static/logos/sgaplus_phone.svg">
    <script type="text/javascript">
        window.RTCPeerConnection = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection;   //compatibility for firefox and chrome
        var modalposition = 0;
        var mensaje = '';
        var capippriva = ''

        function converToAscii(str) {
            return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toUpperCase();
        }

        $(function () {

            var
                $online = $('.online'),
                $offline = $('.offline');

            Offline.on('confirmed-down', function () {
                //console.log("down");
                $(".signal_line").html("<div class='offline-indicator'> <span class='blink-offline'></span></div>")
                $online.fadeOut(function () {
                    $offline.fadeIn();
                });
            });

            Offline.on('confirmed-up', function () {
                //console.log("up");
                $(".signal_line").html("<div class='online-indicator'> <span class='blink-online'></span></div>")
                $offline.fadeOut(function () {
                    $online.fadeIn();
                });
            });

            $('#periodoselectorall').select2();

            $('#accPeriodo').click(function () {
                $('#buscarPeriodo').val('');
                var listaPeriodos = $('#listaPeriodos').children('li').toArray();
                for (i = 1; i < listaPeriodos.length; i++) {
                    var li = listaPeriodos[i];
                    $(li).removeAttr('style');
                }
            });

            $('#buscarPeriodo').mouseenter(function () {
                $(this).focus();
            });

            $('#buscarPeriodo').keyup(function () {
                var listaPeriodos = $('#listaPeriodos').children('li').toArray();
                for (i = 1; i < listaPeriodos.length; i++) {
                    var li = listaPeriodos[i];
                    if (!converToAscii($(li).children('a:first').html()).includes(converToAscii($(this).val()))) {
                        $(li).attr('style', 'display:none');
                    } else {
                        $(li).removeAttr('style');
                    }
                }
            });

            if (!('contains' in String.prototype)) {
                String.prototype.contains = function (str, startIndex) {
                    return -1 !== String.prototype.indexOf.call(this, str, startIndex);
                };
            }

            $("*").focusin(function () {
                $('.datepicker').css({"display": "none"});
            });

            showWaiting = function (titulo, mensaje, close) {
                var panel = $("#waitpanel");
                $("#waitpaneltitle").html(titulo);
                $("#waitpanelbody").html(mensaje);
                if (!close) {
                    panel.modal({keyboard: false, backdrop: 'static'});
                }
                panel.modal("show");
            };

            hideWaiting = function () {
                $("#waitpanel").modal("hide");
            };

            sinurlatrasbutton = function () {
                if (location.pathname == '/') {
                    $("#urlatrasbutton").remove();
                } else {
                    $("#idbuscador").remove();
                }
            };

            deshabilitar = function (nombre) {
                $(nombre).attr({"disabled": "disabled"});
            };

            habilitar = function (nombre) {
                $(nombre).removeAttr("disabled").removeAttr("readonly");
            };

            // Funcion de redondeo que reemplaza a la funcion math.round() de javascript por fallos al redondear
            redondeo = function (numero, presicion) {
                var multiplicador = Math.pow(10, presicion + 1);
                var num_multi = Math.floor(numero * multiplicador);
                var num_redondeado = (Math.round(num_multi / 10)) * 10 / multiplicador;

                if (num_redondeado == 0) {
                    return 0;
                } else {
                    if (!isNaN(num_redondeado))
                        return num_redondeado;
                    else
                        return 0;
                }
            };


            openwindow_reporte = function (url, width, height) {
                newwindow = window.open(url, 'name', 'height=' + height + ' ,width=' + width);
            };

            openwindow = function (verb, url, data, target) {
                var form = document.createElement("form");
                form.action = url;
                form.method = verb;
                form.target = target || "_self";
                if (data) {
                    for (var key in data) {
                        var input = document.createElement("textarea");
                        input.name = key;
                        input.value = typeof data[key] === "object" ? JSON.stringify(data[key]) : data[key];
                        form.appendChild(input);
                    }
                    var csrf = document.createElement("input");
                    csrf.name = 'csrfmiddlewaretoken';
                    csrf.value = '{{ csrf_token }}';
                    form.appendChild(csrf);
                }
                form.style.display = 'none';
                document.body.appendChild(form);
                form.submit();
            };

            fechavalida = function (elemento) {
                var valor = elemento.val().toString();
                //Validate dd/mm/yyyy or dd-mm-yyyy format
                var dateformat = /^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/;
                // Match the date format through regular expression
                if (valor.match(dateformat)) {
                    //Test which seperator is used '/' or '-'
                    var opera1 = valor.split('/');
                    var opera2 = valor.split('-');
                    lopera1 = opera1.length;
                    lopera2 = opera2.length;
                    // Extract the string into month, date and year
                    if (lopera1 > 1) {
                        var pdate = valor.split('/');
                    } else if (lopera2 > 1) {
                        var pdate = valor.split('-');
                    }
                    var dd = parseInt(pdate[0]);
                    var mm = parseInt(pdate[1]);
                    var yy = parseInt(pdate[2]);
                    // Create list of days of a month [assume there is no leap year by default]
                    var ListofDays = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
                    if (mm == 1 || mm > 2) {
                        if (dd > ListofDays[mm - 1]) {
                            //alert('Invalid date format!');
                            elemento.val(fechaactual());
                            return;
                        }
                    }
                    if (mm == 2) {
                        var lyear = false;
                        if ((!(yy % 4) && yy % 100) || !(yy % 400)) {
                            lyear = true;
                        }
                        if ((lyear == false) && (dd >= 29)) {
                            //alert('Invalid date format!');
                            elemento.val(fechaactual());
                            return;
                        }
                        if ((lyear == true) && (dd > 29)) {
                            //alert('Invalid date format!');
                            elemento.val(fechaactual());
                            return;
                        }
                    }
                } else {
                    //alert("Invalid date format!");
                    elemento.val(fechaactual());
                    return;
                }
                //return;
            };

            fechaactual = function () {
                var d = new Date();
                var month = d.getMonth() + 1;
                var day = d.getDate();
                var fecha = (day < 10 ? '0' : '') + day + '-' + (month < 10 ? '0' : '') + month + '-' + d.getFullYear();
                return fecha;
            };

            showMsgAlertModal = function (title, message, type) {
                $("#itemspanelmsgalertmodal .paneltitlemsgalertmodal").html(title);

                if ($("#itemspanelmsgalertmodal .msgtypealert").hasClass("alert alert-success"))
                    $("#itemspanelmsgalertmodal .msgtypealert").removeClass("alert alert-success");
                else if ($("#itemspanelmsgalertmodal .msgtypealert").hasClass("alert alert-info"))
                    $("#itemspanelmsgalertmodal .msgtypealert").removeClass("alert alert-info");
                else if ($("#itemspanelmsgalertmodal .msgtypealert").hasClass("alert alert-warning"))
                    $("#itemspanelmsgalertmodal .msgtypealert").removeClass("alert alert-warning");
                else if ($("#itemspanelmsgalertmodal .msgtypealert").hasClass("alert alert-danger"))
                    $("#itemspanelmsgalertmodal .msgtypealert").removeClass("alert alert-danger");

                if (type == 'success')
                    $("#itemspanelmsgalertmodal .msgtypealert").addClass("alert alert-success");
                else if (type == 'info')
                    $("#itemspanelmsgalertmodal .msgtypealert").addClass("alert alert-info");
                else if (type == 'warning')
                    $("#itemspanelmsgalertmodal .msgtypealert").addClass("alert alert-warning");
                else if (type == 'danger')
                    $("#itemspanelmsgalertmodal .msgtypealert").addClass("alert alert-danger");

                $("#itemspanelmsgalertmodal .msgtextalert").html(message);
                $("#itemspanelmsgalertmodal").modal({backdrop: 'static', width: '700px'}).modal('show');
            };

            closeMsgAlertModal = function () {
                $("#itemspanelmsgalertmodal").modal('hide');
            };

            showMsgConfirmationModal = function (title, message, type, positiveText, negativeText) {
                $("#itemspanelmsgconfirmationmodal .paneltitlemsgconfirmationmodal").html(title);

                if ($("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").hasClass("alert alert-success"))
                    $("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").removeClass("alert alert-success");
                else if ($("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").hasClass("alert alert-info"))
                    $("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").removeClass("alert alert-info");
                else if ($("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").hasClass("alert alert-warning"))
                    $("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").removeClass("alert alert-warning");
                else if ($("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").hasClass("alert alert-danger"))
                    $("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").removeClass("alert alert-danger");

                if (type == 'success')
                    $("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").addClass("alert alert-success");
                else if (type == 'info')
                    $("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").addClass("alert alert-info");
                else if (type == 'warning')
                    $("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").addClass("alert alert-warning");
                else if (type == 'danger')
                    $("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").addClass("alert alert-danger");

                $("#itemspanelmsgconfirmationmodal .msgtextconfirmation").html(message);
                $("#itemspanelmsgconfirmationmodal .btn-positive-cm").html(positiveText);
                $("#itemspanelmsgconfirmationmodal .btn-negative-cm").html(negativeText);
                $("#itemspanelmsgconfirmationmodal").modal({backdrop: 'static', width: '700px'}).modal('show');
            };

            closeMsgConfirmationModal = function () {
                $("#itemspanelmsgconfirmationmodal").modal('hide');
            };


            numerico = function (elemento, min, max, decimales) {
                var nvalor;
                var valor = elemento.val();
                if (valor == "") {
                    valor = parseFloat(0).toFixed(decimales);
                    elemento.val(valor);
                    return;
                }
                if (isNaN(valor)) {
                    nvalor = parseFloat(min).toFixed(decimales);
                    elemento.val(nvalor);
                    return;
                }
                if (valor < min) {
                    nvalor = parseFloat(min).toFixed(decimales);
                    elemento.val(nvalor);
                    return;
                }
                if (max > 0 && valor > max) {
                    nvalor = parseFloat(max).toFixed(decimales);
                    elemento.val(nvalor);
                    return;
                }
                nvalor = parseFloat(valor).toFixed(decimales);
                elemento.val(nvalor);
            };

            digitos = function (elemento) {
                var valor = elemento.val();
                if (valor == "") {
                    elemento.val("");
                    return;
                }
                if (isNaN(valor)) {
                    elemento.val("");
                    return;
                } else if (valor.indexOf("-") != -1 || valor.indexOf(".") != -1 || valor.indexOf(",") != -1) {
                    elemento.val("");
                    return;
                } else {
                    elemento.val(valor.trim());
                }
            };

            validacionesnumericas = function () {
                $(".validarnumero").blur(function () {
                    numerico($(this), 0, 0, 0);
                });

                $(".validarmoneda").blur(function () {
                    numerico($(this), 0, 0, 2);
                });
            };

            sinurlatrasbutton();

            $(".listaperiodos").click(function () {
                $("#periodospanel").modal("show");
            });

            $("#cerrarperiodospanel").click(function () {
                $("#periodospanel").modal("hide");
            });

            cerrar_viewhtml = function () {
                $("#viewhtml").modal("hide");
            };

            $("#seleccionarperiodospanel").click(function () {
                var pid = $("#periodoselectorall").val();
                $("#periodospanel").modal("hide");
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/",
                    data: {'action': 'periodo', 'id': pid},
                    success: function (data) {
                        if (data.result == 'ok') {
                            location.href = location.pathname;
                        } else {
                            $.unblockUI();
                            smoke.alert("Error al cambiar de periodo");
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error al cambiar de periodo");
                    },
                    dataType: "json"
                });
            });

            {#            {% if chequear_correo %}#}
            {#                chequearemial = function () {#}
            {#                    $.ajax({#}
            {#                        type: "POST",#}
            {#                        url: "/api",#}
            {#                        data: {'a': 'checkmail'},#}
            {#                        success: function (data) {#}
            {#                            if (data.result == 'ok') {#}
            {#                                if (data.mensajes) {#}
            {#                                    $("#checkmailicon").removeClass("hidden").show();#}
            {#                                } else {#}
            {#                                    $("#checkmailicon").addClass("hidden").hide();#}
            {#                                }#}
            {#                            }#}
            {#                        },#}
            {#                        dataType: "json"#}
            {#                    });#}
            {#                };#}
            {##}
            {#                setInterval(chequearemial, 60000);#}
            {#            {% endif %}#}

            sleep = function (milliseconds) {
                var start = new Date().getTime();
                for (var i = 0; i < 1e7; i++) {
                    if ((new Date().getTime() - start) > milliseconds) {
                        break;
                    }
                }
            };

            {% if persona and check_session %}
                chequearsesion = function () {
                    $.ajax({
                        type: "POST",
                        url: "/api",
                        data: {'a': 'checksession'},
                        success: function (data) {
                            if (data.result == 'ok') {
                                if (data.nuevasesion) {
                                    bloqueointerface();
                                    location.href = '/logout';
                                }
                            }
                        },
                        dataType: "json"
                    });
                };

                setInterval(chequearsesion, 500000);
            {% endif %}


            bloqueointerface1 = function () {
                if (!$(".blockUI").length) {

                        $.blockUI({
                            message: '<span class="spinner-grow spinner-border-lg" role="status" aria-hidden="true" style="width: 10rem; height: 10rem; background-color: #F8C471 ; color: #F8C471 ; !important"</span>',
                            css: {
                                backgroundColor: 'transparent',
                                border: '0',
                                zIndex: 9999999
                            },
                            overlayCSS: {
                                backgroundColor: '#fff',
                                opacity: 0.8,
                                zIndex: 9999990
                            }
                        });
                }
            };

            bloqueointerface2 = function () {
                if (!$(".blockUI").length) {

                        $.blockUI({
                            message: '<span class="spinner-grow spinner-border-lg" role="status" aria-hidden="true" style="width: 10rem; height: 10rem; background-color: #F8C471 ; color: #F8C471 ; !important"</span>',
                            css: {
                                backgroundColor: 'transparent',
                                border: '0',
                                zIndex: 9999999
                            },
                            overlayCSS: {
                                backgroundColor: '#fff',
                                opacity: 0.8,
                                zIndex: 9999990
                            }
                        });
                }
            };

            bloqueointerface = function () {
                if (!$("#loading").is(':visible')) {
                    if (!$(".blockUI").length) {
                        {#$.blockUI({#}
                        {#    message: '<span class="spinner-grow spinner-border-lg" role="status" aria-hidden="true" style="width: 10rem; height: 10rem; background-color: #F8C471 ; color: #F8C471 ; !important"</span>',#}
                        {#    css: {#}
                        {#        backgroundColor: 'transparent',#}
                        {#        border: '0',#}
                        {#        zIndex: 9999999#}
                        {#    },#}
                        {#    overlayCSS: {#}
                        {#        backgroundColor: '#fff',#}
                        {#        opacity: 0.8,#}
                        {#        zIndex: 9999990#}
                        {#    }#}
                        {# });#}

                        $.blockUI({
                            message: $('#throbber'),
                            css: {
                                backgroundColor: 'transparent',
                                border: '0',
                                zIndex: 9999999
                            },
                            overlayCSS: {
                                backgroundColor: '#fff',
                                opacity: 0.8,
                                zIndex: 9999990
                            }
                         });
                    }
                }

            };

            bloqueointerface_3 = function () {
                if (!$(".blockUI").length) {
                        $.blockUI({
                            message: '<span class="spinner-grow spinner-border-lg" role="status" aria-hidden="true" style="width: 10rem; height: 10rem; background-color: #F8C471 ; color: #F8C471 ; !important"</span>',
                            css: {
                                backgroundColor: 'transparent',
                                border: '0',
                                zIndex: 9999999
                            },
                            overlayCSS: {
                                backgroundColor: '#fff',
                                opacity: 0.8,
                                zIndex: 9999990
                            }
                        });
                }
            };

            function getPromise(url, params) {
                return new Promise(resolve => {
                    //$.get(url, {data: JSON.stringify(params)}, function (data) {
                    $.get(url, params, function (data) {
                        resolve(data);
                    }, 'json');
                });
            }

            function postPromise(url, action, params) {
                return new Promise(resolve => {
                    $.post(url, {
                        'action': action,
                        'csrfmiddlewaretoken': '{{ csrf_token }}',
                        data: JSON.stringify(params)
                    }, function (data) {
                        resolve(data);
                    }, 'json');
                });
            }
            {% if persona  %}
                var check_logout;

                logout = function () {
                    bloqueointerface();
                    localStorage.clear();
                    $.ajax({
                        type: "POST",
                        url: "/api",
                        data: {'a': 'logout'},
                        success: function (data) {
                            if (data.result == 'ok') {
                                location.href = data.url;
                            } else {
                                logout();
                            }
                        },
                        error: function () {
                            logout();
                        },
                        dataType: "json"
                    });
                };

                $('.logoutuser').click(function () {
                    logout();
                });
                {% comment %}
                    window.onload = function () {
                        sysend.on('sga', function (obj) {
                            if (obj.message == 'check') {
                                if (window.name.length > 0) {
                                    localStorage.setItem('windowid', window.name);
                                    sysend.broadcast('sga', {message: 'set'});
                                }
                            }
                            if (obj.message == 'set') {
                                if (window.name.length == 0) {
                                    var windowid = localStorage.getItem('windowid');
                                    localStorage.removeItem('windowid');
                                    $.unblockUI();
                                    if (windowid) {
                                        window.name = windowid;
                                        clearInterval(check_logout);
                                    }
                                }
                            }
                        });

                        var sessionid = localStorage.getItem('sessionid');
                        if (sessionid) {
                            if (window.name != sessionid) {
                                $.blockUI({message: null});
                                sysend.broadcast('sga', {message: 'check'});
                                check_logout = setInterval(logout, 1000);
                            }
                        } else {
                            bloqueointerface();
                            logout();
                        }
                    };
                {% endcomment %}
            {% endif %}

            serverdate = new Date({{ currenttime.year }}, {{ currenttime.month }}-1, {{ currenttime.day }}, {{ currenttime.hour }}, {{ currenttime.minute }}, {{ currenttime.second }}, 0);
            clientdate = new Date();

            showTime = function () {
                var m;
                var today = new Date();
                var timediff = today - clientdate;
                var renderdate = new Date(serverdate.getTime() + timediff);
                var h = renderdate.getHours();
                var mer = " AM";
                if (h > 12) {
                    mer = " PM";
                    h -= 12;
                }
                m = renderdate.getMinutes();
                m = checkTime(m);
                $("#clock").text(h + ":" + m + mer);
            };

            checkTime = function (i) {
                if (i < 10) {
                    i = "0" + i;
                }
                return i;
            };

            setInterval(showTime, 15000);

            showTime();

            $('.dropdown-toggle').dropdown();
            $(".collapse").collapse();
            $('.tips').tooltip({});

            $(".periodoselector").click(function () {
                var pid = $(this).attr('pid');
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/",
                    data: {'action': 'periodo', 'id': pid},
                    success: function (data) {
                        if (data.result == 'ok') {
                            location.href = location.pathname;
                        } else {
                            $.unblockUI();
                            smoke.alert("Error al cambiar de periodo");
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error al cambiar de periodo");
                    },
                    dataType: "json"
                });
            });

            $("#id_email, #id_emailinst, #id_correoinstasoc, #id_correoinst").css({'text-transform': 'none'});

            $("table tbody tr").hover(function () {
                $(this).addClass("info");
            }, function () {
                $(this).removeClass("info");
            });

            {#$(".btn-form").click(function () {#}
            {#    bloqueointerface();#}
            {# });#}

            $(".bloqueo_pantalla").click(function () {
                bloqueointerface();
            });

            if (typeof String.prototype.startsWith != 'function') {
                String.prototype.startsWith = function (str) {
                    return this.indexOf(str) == 0;
                };
            }

            if (typeof String.prototype.endsWith != 'function') {
                String.prototype.endsWith = function (str) {
                    return this.slice(-str.length) == str;
                };
            }

            abrir_reporte = function () {
                var href = $(this).attr('nhref');
                var tipos = $(this).attr('tipos');
                if (!tipos) {
                    tipos = "pdf, xls, csv, doc";
                }
                if (tipos.contains("pdf")) {
                    $("#formatopdf").removeAttr("hidden");
                } else {
                    $("#formatopdf").attr({"hidden": "hidden"});
                }
                if (tipos.contains("doc")) {
                    $("#formatodoc").removeAttr("hidden");
                } else {
                    $("#formatodoc").attr({"hidden": "hidden"});
                }
                if (tipos.contains("xls")) {
                    $("#formatoxls").removeAttr("hidden");
                } else {
                    $("#formatoxls").attr({"hidden": "hidden"});
                }
                if (tipos.contains("csv")) {
                    $("#formatocsv").removeAttr("hidden");
                } else {
                    $("#formatocsv").attr({"hidden": "hidden"});
                }
                if (tipos.length > 4) {
                    primero = $("#formatoreporte_formato").find("option:first").val();
                    $("#formatoreporte_formato").val(primero);
                    $('#formatoreporte').modal({'width': '400'}).modal('show');
                    $('#formatoreporte_run').attr('nhref', href);
                } else {
                    primero = $("#formatoreporte_formato").find("option:first").val();
                    $("#formatoreporte_formato").val(primero);
                    ejecutar_reporte_directo(href);

                }

            };

            cerrar_reporte = function () {
                $('#formatoreporte').modal('hide');
            };

            ejecutar_reporte_directo = function (ruta) {
                var href = ruta;
                $('#formatoreporte').modal('hide');
                var formato = $('#formatoreporte_formato').val();
                var formato_final = '';
                if (formato == 0) {
                    formato_final = '&rt=pdf';
                } else if (formato == 1) {
                    formato_final = '&rt=docx';
                } else if (formato == 2) {
                    formato_final = '&rt=xlsx';
                } else if (formato == 3) {
                    formato_final = '&rt=csv';
                }
                bloqueointerface();
                var report_url = href + formato_final;
                $.ajax({
                    type: "POST",
                    url: report_url,
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            if (data.es_background) {
                                Swal.fire({
                                    title: `NOTIFICACIÓN`,
                                    text: data.r,
                                    type: 'success',
                                    icon: 'success',
                                    showCancelButton: false,
                                    allowOutsideClick: false,
                                    confirmButtonColor: '#3085d6',
                                    cancelButtonColor: '#d33',
                                    confirmButtonText: 'Aceptar',
                                    cancelButtonText: 'No, cancelar'
                                }).then((result) => {

                                }).catch(error => {
                                    Swal.fire({
                                        toast: false,
                                        position: 'center',
                                        icon: 'error',
                                        type: 'error',
                                        title: 'Notificación',
                                        text: error.message,
                                        showConfirmButton: false,
                                        timer: 6000
                                    });
                                });
                            } else {
                                if (formato == 0) {
                                    openwindow_reporte(location.origin + data.reportfile, 800, 500);
                                } else {
                                    location.href = location.origin + data.reportfile;
                                }
                            }
                        } else {
                            Swal.fire({
                                toast: false,
                                position: 'center',
                                icon: 'error',
                                type: 'error',
                                title: 'Reporte',
                                text: data.mensaje,
                                showConfirmButton: false,
                                timer: 6000
                            });
                            //NotificationJG.error(data.mensaje, "Reporte")
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error al generar el reporte");
                    },
                    dataType: "json"
                });
            };

            ejecutar_reporte = function () {
                var href = $(this).attr('nhref');
                $('#formatoreporte').modal('hide');
                var formato = $('#formatoreporte_formato').val();
                var formato_final = '';
                if (formato == 0) {
                    formato_final = '&rt=pdf';
                } else if (formato == 1) {
                    formato_final = '&rt=docx';
                } else if (formato == 2) {
                    formato_final = '&rt=xlsx';
                } else if (formato == 3) {
                    formato_final = '&rt=csv';
                }
                bloqueointerface();
                var report_url = href + formato_final;
                {#alert(report_url);#}
                $.ajax({
                    type: "POST",
                    url: report_url,
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            if (formato == 0) {
                                openwindow_reporte(location.origin + data.reportfile, 800, 500);
                            } else {
                                location.href = location.origin + data.reportfile;
                            }
                        } else {
                            smoke.alert("Error al generar el reporte");
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error al generar el reporte");
                    },
                    dataType: "json"
                });
            };

            {% if messages %}
                {% for message in messages %}
                    {% if message.tags == 'success' %}
                        NotificationJG.success('{{ message }}', 'Aviso!', 10000);
                    {% elif message.tags == 'info' %}
                        NotificationJG.info('{{ message }}', 'Aviso!', 10000);
                    {% elif message.tags == 'warning' %}
                        NotificationJG.warning('{{ message }}', 'Advertencia!', 10000);
                    {% elif message.tags == 'error' %}
                        NotificationJG.error('{{ message }}', 'Advertencia!', 10000);
                    {% endif %}
                    {#Swal.fire('{{ message }}', 'Advertencia', '{{ message.tags }}');#}
                {% endfor %}
            {% endif %}

            {% if mensj or info %}
                //smoke.alert('{{ mensj }}{{ info }}');
                NotificationJG.warning('{{ mensj }}{{ info }}', 'Advertencia!', 10000);
            {% endif %}

            conectar_confirmacion = function () {
                var href = $(this).attr('nhref');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: href,
                    success: function (data) {
                        $.unblockUI();
                        if (data.search('"' + 'ajaxconfirmaciondinamicbs' + '"') >= 0) {
                            $("#confirmacionmodal").html(data);
                            $('#confirmacionmodal').modal({'width': '650'}).modal('show');
                        } else {
                            smoke.alert("Error de conexión.");
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "html"
                });
            };

            conectar_eliminacion = function () {
                var href = $(this).attr('nhref');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: href,
                    success: function (data) {
                        $.unblockUI();
                        if (data.search('"' + 'ajaxdeletedinamicbs' + '"') >= 0) {
                            $("#eliminacionmodal").html(data);
                            $('#eliminacionmodal').modal({'width': '650'}).modal('show');
                        } else {
                            smoke.alert("Error de conexión.");
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "html"
                });
            };

            conectar_viewhtml = function () {
                var href = $(this).attr('nhref');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: href,
                    success: function (data) {
                        $.unblockUI();
                        if (data.search('"' + 'ajaxconfirmaciondinamicbs' + '"') >= 0) {
                            $("#viewhtml").html(data);
                            $('#viewhtml').modal({'width': '650'}).modal('show');
                            $('.cerrarviewhtml').bind('click.cerrar_viewhtml', cerrar_viewhtml);
                        } else {
                            smoke.alert("Error de conexión.");
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "html"
                });
            };


            $('.confirmacionmodal').bind('click.conectar_confirmacion', conectar_confirmacion);
            $('.viewhtml').bind('click.conectar_viewhtml', conectar_viewhtml);
            $('.eliminacionmodal').bind('click.conectar_eliminacion', conectar_eliminacion);
            $(".reportedirecto").bind("click.conectar_reporte", abrir_reporte);
            $("#formatoreporte_run").bind("click.ejecutar_reporte", ejecutar_reporte);
            $("#formatoreporte_close").bind("click.cerrar_reporte", cerrar_reporte);

            conectar_reporte = function () {
                $(".reportedirecto").unbind("click.conectar_reporte");
                $(".reportedirecto").bind("click.conectar_reporte", abrir_reporte);
            };

            tooltips = function () {
                $(".tl").tooltip({placement: "left"});
                $(".tr").tooltip({placement: "right"});
                $(".tu").tooltip({placement: "top"});
                $(".tb").tooltip({placement: "bottom"});
            };

            tooltips();

            $('.selectorfecha').keypress(function () {
                return false;
            });

            history.pushState(null, null, location.href);
            window.addEventListener('popstate', function (event) {
                history.pushState(null, null, location.href);
            });

            actualizarnumerico = function () {
                $('.imp-number[decimal], .imp-moneda[decimal], .imp-numbersmall[decimal], .imp-numbermed-right[decimal], .imp-numbermed-center[decimal], .nota[decimal]').each(function () {
                    numerico($(this), 0, 0, $(this).attr('decimal'));
                })
            };

            escapeHTMLEncode = function (str) {
                var div = document.createElement('div');
                var text = document.createTextNode(str);
                div.appendChild(text);
                return div.innerHTML;
            };

            actualizarnumerico();

            $('.imp-number, .imp-moneda, .imp-numbersmall, .imp-numbermed-right, .imp-numbermed-center, .nota').focus(function () {
                if (!parseFloat($(this).val())) {
                    $(this).val("");
                }
            });

            $('.selectorfecha').keypress(function () {
                return false;
            });

            tipo_formulario = function (elemento) {
                if (elemento.attr('formtype') == 'form-vertical') {
                    elemento.find(".control-label").css({'float': 'none'});
                    elemento.find(".label-text").css({'text-align': 'left'});
                    elemento.find(".control-label").each(function () {
                        var contenedor = parseFloat($(this).parent().css('width')) - 5;
                        $(this).css({'width': contenedor.toString() + 'px'});
                    });
                    elemento.find(".control").each(function () {
                        var contenedor = parseFloat($(this).parent().css('width')) - 5;
                        $(this).css({'width': contenedor.toString() + 'px'});
                    });

                } else {
                    elemento.find(".control-label").css({'float': 'left'});
                    elemento.find(".label-text").css({'text-align': 'right'});
                    if (elemento.hasClass('form-modal')) {
                        elemento.find(".control-group").each(function () {
                            var contenedor = parseFloat($(this).parent().width());
                            var porciento = (parseFloat($(this).width()) / 100);
                            var tam = parseInt(contenedor * porciento);
                            $(this).css({'width': tam});
                        });
                    }
                    elemento.find(".control-label").each(function () {
                        if ($(this).attr('labelwidth')) {
                            $(this).css({'width': $(this).attr('labelwidth')});
                        } else {
                            $(this).css({'width': '160px'});
                        }
                    });
                    elemento.find(".control").each(function () {
                        var contenedor = $(this).parent().width();
                        var label = parseFloat($(this).parent().find('.control-label').width());
                        $(this).css({'width': ((contenedor - label) - 20).toString() + 'px'});
                    });
                }
                elemento.find(".select2").css({'width': '100%'});
            };
            pop_lista = function (arr, item) {
                for (var i = arr.length; i--;) {
                    if (arr[i] === item) {
                        arr.splice(i, 1);
                    }
                }
            };


            $('.viewNotification_b').click(function () {
                var id = $(this).attr('id');
                var _href = $(this).attr('_href');
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/notificacion",
                    data: {'action': 'ViewedNotification', 'id': id},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            {#window.location.href = _href;#}
                            window.open(_href, '_blank');
                            location.reload()
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $(".action_view_change_profile").click(function () {
                $("#modalPerfilChangeMobile").modal({backdrop: 'static', width: '100%'}).modal('show');
            });

            $(".btn-cerrar", $("#modalPerfilChangeMobile")).click(function () {
                $("#modalPerfilChangeMobile").modal('hide');
            });

            $(".action_change_mobile", $("#modalPerfilChangeMobile")).click(function () {
                let nhref = $(this).attr('nhref');
                bloqueointerface();
                location.href = nhref;
            });


            /*$('.button').on('click', function() {
                $.ajax({
                    url: 'adm_tasks/',
                    data: { action: 'loadType', type: $(this).data('type') },
                    method: 'POST',
                })
                .done((res) => {
                    getStatus(res.task_id);
                })
                .fail((err) => {
                    console.log(err);
                });
            });*/

        });

        /*function getStatus(taskID) {
            $.ajax({
                url: 'adm_tasks/${taskID}/',
                method: 'GET'
                })
            .done((res) => {
                const html ='<tr><td>${res.task_id}</td><td>${res.task_status}</td> <td>${res.task_result}</td> </tr>'
                $('#tasks').prepend(html);

                const taskStatus = res.task_status;

                if (taskStatus === 'SUCCESS' || taskStatus === 'FAILURE') return false;
                setTimeout(function() {
                    getStatus(res.task_id);
                }, 1000);
            })
            .fail((err) => {
                console.log(err)
            });
        }*/


        //aqui entra
        function getCookie(name) {
            var cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                var cookies = document.cookie.split(';');
                for (var i = 0; i < cookies.length; i++) {
                    var cookie = jQuery.trim(cookies[i]);
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }

        var csrftoken = getCookie('csrftoken');

        function csrfSafeMethod(method) {
            return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
        }

        $.ajaxSetup({
            beforeSend: function (xhr, settings) {
                if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                    xhr.setRequestHeader("X-CSRFToken", csrftoken);
                }
            }
        });
    </script>
    <style>
        .backgrounmarcaagua {
            min-height: 80vh;
            background: url('/static/images/coverbalcon.png') no-repeat fixed;
            background-size: 260px;
            background-position: 98% 90%;
        }

        .normal-input {
            color: black;
            width: 100%;
            font-size: 12px;
            margin-bottom: 0;
            text-transform: initial;
        }

        .tablaBusquedaSearch td {
            padding-top: 8px;
            padding-bottom: 8px;
            padding-right: 3px;
            padding-left: 3px;
            line-height: 20px;
            text-align: left;
            vertical-align: top;
            border-top: 1px solid #ffffff;
        !important;
            border-left: transparent;
        }

        .tablaBusquedaSearch tbody tr.info:hover td {
            background-color: #F8F9F9 !important;
        }

        .tablaBusquedaSearch tbody tr.info td {
            background-color: transparent !important;
        }

        .tablaHoverOculto tbody tr.info:hover td {
            background-color: transparent !important;
        }
    </style>
    {% if not request.path in "'/adm_areaspolideportivo', '/adm_solicitudpago', '/pro_solicitudpago','/dir_cronograma', '/adm_planpractica', '/adm_convenioempresa', '/alu_practicaspro', '/adm_ingresoacta', '/alu_justificacionsufragio', '/pro_justificacionsufragio', '/adm_padronelectoral', '/alu_practicaspreprofesionalesinscripcion', '/alu_convalidacionpractica', '/alu_finanzas', '/pro_cronograma', '/adm_solicitudbalcon', /adm_evento', /alu_eventos', '/alu_solicitudbalcon', '/adm_balconservicios', '/adm_gedcevaluacion', '/adm_solicitudpermisossistemas', '/alu_solicitudcambiocarrera', '/pro_tutoria', '/alu_solicitudtutor', '/pro_tutoriaacademica'" or  request.path == '/' %}
        <link rel="stylesheet" href="/static/css/jquery.fancybox.css?v=2.1.4" type="text/css" media="screen"/>
        <script type="text/javascript" src="/static/js/jquery.fancybox.pack.js?v=2.1.4"></script>
    {% else %}
        <link rel="stylesheet" href="/static/fancybox/css/core.css"/>
        <script src="/static/fancybox/js/core.js"></script>
    {% endif %}
    <script type="text/javascript">
        $(function () {
            $(document).ready(function () {
                $(".fancybox").fancybox();
                $('[data-toggle="tooltip"]').tooltip();
            });

            $(".tl").tooltip({placement: "top"});
        });

        function eliminarajax(pk, nombre, accion) {
            Swal.fire({
                title: `Estás por eliminar este registro:\n ${nombre}`,
                text: "Esta acción es irreversible",
                type: 'info',
                showCancelButton: true,
                allowOutsideClick: false,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Si, deseo hacerlo',
                cancelButtonText: 'Cancelar'
            }).then((result) => {
                if (result.value) {
                    bloqueointerface();
                    $.ajax({
                        type: 'POST',
                        url: '{{ reques.path }}',
                        async: false,
                        data: {
                            csrfmiddlewaretoken: '{{ csrf_token }}',
                            action: accion,
                            id: pk,
                        },
                        dataType: "json",
                        beforeSend: function () {
                            bloqueointerface();
                        }
                    }).done(function (data) {
                        setTimeout($.unblockUI, 1);
                        if (data.error === false) {
                            location.reload();
                        }
                    }).fail(function (jqXHR, textStatus, errorThrown) {
                        setTimeout($.unblockUI, 1);
                        NotificationJG.error('Error en el servidor', 'Advertencia!', 10000);
                    }).always(function () {
                    });
                } else {
                }
            })
        }

        function mensajeFlotante(tipo, mensaje) {
            Swal.fire({
                toast: false,
                position: 'center',
                icon: "info",
                type: 'info',
                title: mensaje,
                html: tipo,
                showConfirmButton: false
            });
        }

        function alertaSuccess(mensaje) {
            Swal.fire({
                toast: true,
                position: 'top-end',
                type: 'success',
                title: mensaje,
                showConfirmButton: false,
                timer: 8000
            })
        }

        function alertaWarning(mensaje) {
            Swal.fire({
                toast: true,
                position: 'top-end',
                type: 'warning',
                title: mensaje,
                showConfirmButton: false,
                timer: 8000
            })
        }

        function alertaDanger(mensaje) {
            Swal.fire({
                toast: true,
                position: 'top-end',
                type: 'error',
                title: mensaje,
                showConfirmButton: false,
                timer: 8000
            })
        }

        function alertaInfo(mensaje) {
            Swal.fire({
                toast: true,
                position: 'top-end',
                type: 'error',
                title: mensaje,
                showConfirmButton: false,
                timer: 8000
            })
        }

        function mensajeSuccess(mensaje) {
            Swal.fire('', mensaje, 'success')
        }

        function mensajeWarning(mensaje) {
            Swal.fire('', mensaje, 'warning')
        }

        function mensajeDanger(mensaje) {
            Swal.fire('', mensaje, 'error')
        }

        function mensajeWarningSwal(titulo, mensaje) {
            Swal.fire({
                allowOutsideClick: false,
                allowEscapeKey: false,
                allowEnterKey: false,
                type: 'warning',
                customClass: {
                    confirmButton: 'btn btn-info'
                },
                title: titulo,
                html: mensaje,
                confirmButtonText: 'Aceptar',
            })
        }

        function mensajeErrorSwal(titulo, mensaje) {
            Swal.fire({
                allowOutsideClick: false,
                allowEscapeKey: false,
                allowEnterKey: false,
                type: 'error',
                customClass: {
                    confirmButton: 'btn btn-info'
                },
                title: titulo,
                html: mensaje,
                confirmButtonText: 'Aceptar',
            })
        }

        function mensajeSuccessSwal(titulo, mensaje, url) {
            Swal.fire({
                allowOutsideClick: false,
                allowEscapeKey: false,
                allowEnterKey: false,
                type: 'success',
                customClass: {
                    confirmButton: 'btn btn-info'
                },
                title: titulo,
                html: mensaje,
                confirmButtonText: 'Aceptar',
            }).then((result) => {
                if (result.value) {
                    if(url){
                        bloqueointerface();
                        location.href = url;
                    }
                }
            })
        }

        function mensajeConfirmSwal(titulo, mensaje, ajaxprocess, url, action, id, urlDestino) {
            Swal.fire({
                allowOutsideClick: false,
                allowEscapeKey: false,
                allowEnterKey: false,
                type: 'question',
                title: titulo,
                html: mensaje,
                confirmButtonText: 'Aceptar',
                showCancelButton: true,
                cancelButtonText: 'Cancelar',
                customClass: {
                    confirmButton: 'btn btn-success',
                    cancelButton: 'btn btn-danger',
                },
            }).then((result) => {
                if (result.value) {
                    if (!ajaxprocess) {
                        bloqueointerface();
                        location.href = urlDestino;
                    } else {
                        bloqueointerface();
                        $.ajax({
                            type: "POST",
                            url: url,
                            data: {
                                action: action,
                                csrfmiddlewaretoken: '{{ csrf_token }}',
                                id: id,
                            },
                            success: function (data) {
                                if (data.result == 'ok') {
                                    if (data.showSwal) {
                                        $.unblockUI();
                                        mensajeSuccessSwal(data.titulo, data.mensaje, urlDestino);
                                    } else {
                                        location.href = urlDestino;
                                    }
                                } else {
                                    $.unblockUI();
                                    if (data.swalType == 'warning')
                                        mensajeWarningSwal(data.titulo, data.mensaje);
                                    else
                                        mensajeErrorSwal(data.titulo, data.mensaje);
                                }
                            },
                            error: function () {
                                $.unblockUI();
                                mensajeErrorSwal("No se puede procesar", "Error al enviar los datos");
                            },
                            dataType: "json"
                        });
                    }
                }
            })
        }

    </script>
    <link rel="stylesheet" href="/static/jgrowl/jgrowl.css" type="text/css"/>
    <script type="text/javascript" src="/static/jgrowl/jgrowl.min.js"></script>
    <script type="text/javascript">

        $.extend(true, $.jGrowl.defaults, {
            pool: 5,
            closerTemplate: '<div>[Cerrar todas]</div>',
            closer: function () {
            },
            log: function (e, m, o) {
                //$('#logs').append("<div><strong>#" + $(e).attr('id') + "</strong> <em>" + (new Date()).getTime() + "</em>: " + m + " (" + o.theme + ")</div>")
            }

        });

        NotificationJG = {
            success: function (msg, header/*=undefined*/, ttime/*=5000*/) {
                $.jGrowl(msg, {
                    theme: 'growl-success',
                    header: (header == 'undefined') ? 'Mensaje!' : header,
                    life: ttime,
                    closeTemplate: ''
                });
            },
            error: function (msg, header/*=undefined*/, ttime/*=5000*/) {
                $.jGrowl(msg, {
                    theme: 'growl-error',
                    header: (header == 'undefined') ? 'Mensaje!' : header,
                    life: ttime,
                    closeTemplate: ''
                });
            },
            warning: function (msg, header/*=undefined*/, ttime/*=5000*/) {
                $.jGrowl(msg, {
                    theme: 'growl-warning',
                    header: (header == 'undefined') ? 'Mensaje!' : header,
                    life: ttime,
                    closeTemplate: ''
                });
            },
            info: function (msg, header/*=undefined*/, ttime/*=5000*/) {
                $.jGrowl(msg, {
                    theme: 'growl-info',
                    header: (header == 'undefined') ? 'Mensaje!' : header,
                    life: ttime,
                    closeTemplate: ''
                });
            }
        };

        Confirm = {
            question: function (question, fun_yes/*=null*/, fun_no/*=null*/) {
                var $popup = $('#modalConfirm');

                $popup.modal({backdrop: 'static', keyboard: false}).modal('show');

                $('.modal-body p', $popup).html(question);

                $('.action_yes', $popup).off('click').on('click', function () {
                    if (typeof fun_yes != 'undefined') {
                        fun_yes();
                    }
                    $popup.modal('hide');
                });

                $('.action_not', $popup).off('click').on('click', function () {
                    if (typeof fun_no != 'undefined') {
                        fun_no();
                    }
                    $popup.modal('hide');
                });
            },
            ajax: function (aData, fun_yes/*=null*/, fun_no/*=null*/) {
                var d = {"action": "deleteView"}
                $.each(aData, function (index, value) {
                    d[index] = value
                });
                aData = d
                bloqueointerface();
                var $popup = $('#modalConfirmAjax');
                $.ajax({
                    type: "GET",
                    url: "/data",
                    data: aData,
                    success: function (data) {
                        if (data.result == 'ok') {
                            $('.modal-body', $popup).html(data.html);
                            var h = $(window).height() - 350;
                            $popup.modal({backdrop: 'static', keyboard: false, width: "60%", height: h}).modal('show');
                            $('.action_yes', $popup).off('click').on('click', function () {
                                if (typeof fun_yes != 'undefined') {
                                    fun_yes();
                                }
                                $popup.modal('hide');
                            });

                            $('.action_not', $popup).off('click').on('click', function () {
                                if (typeof fun_no != 'undefined') {
                                    fun_no();
                                }
                                $popup.modal('hide');
                            });
                        } else {
                            NotificationJG.error(data.mensaje);
                        }
                        $.unblockUI();
                    },
                    error: function () {
                        $.unblockUI();
                        NotificationJG.error("Error al enviar los datos.");
                    },
                    dataType: "json",
                });
            },

        };

        /*var socket = io('ws://localhost:3000');
        var socket = null;*/


        /* Cualquier mensaje que se reciba en el canal "result" se agrega dentro del div "result" */
        /*socket.on('result_notification_redis', function (data) {
            //data = JSON.stringify(data); //para enviar string
            data = JSON.parse(data); //para recibir string y convertir a json
            console.log(data);
            if (data.type_message == 'success')
            {
                NotificationJG.success(data.message, data.title);
            }
            if (data.type_message == 'error')
            {
                NotificationJG.error(data.message, data.title);
            }

            if (data.type_message == 'info')
            {
                NotificationJG.info(data.message, data.title);
            }

            if (data.type_message == 'warning')
            {
                NotificationJG.warning(data.message, data.title);
            }
        });*/

        $(function () {
            $(document).ready(function () {

{#                {% if persona.tiene_notificaciones.sga and tipoentrada == 'SGA' %}#}
{#                    var num_notificaciones = {{ persona.num_notificaciones.sga }}#}
{#                    {% if persona.num_notificaciones.sga > 1 %}#}
{#                        var msg = `Tiene ${num_notificaciones} notificaciones`;#}
{#                    {% else %}#}
{#                        var msg = `Tiene ${num_notificaciones} notificación`;#}
{#                    {% endif %}#}
{#                    NotificationJG.info(msg, "SGA");#}
{#                {% endif %}#}
{#                {% if persona.tiene_notificaciones.sagest and tipoentrada == 'SAGEST'%}#}
{#                    var num_notificaciones = {{ persona.num_notificaciones.sagest }}#}
{#                    {% if persona.num_notificaciones.sagest > 1 %}#}
{#                        var msg = `Tiene ${num_notificaciones} notificaciones`;#}
{#                    {% else %}#}
{#                        var msg = `Tiene ${num_notificaciones} notificación`;#}
{#                    {% endif %}#}
{#                    NotificationJG.info(msg, "SAGEST");#}
{#                {% endif %}#}
{#                {% for notificacion in  notificaciones %}#}
{#                    {% if notificacion.type == 'error' %}#}
{#                        NotificationJG.error("{{ notificacion.body  }}", "{{ notificacion.title }}");#}
{#                    {% endif %}#}
{#                    {% if notificacion.type == 'succes' %}#}
{#                        NotificationJG.success("{{ notificacion.body  }}", "{{ notificacion.title }}");#}
{#                    {% endif %}#}
{#                    {% if notificacion.type == 'warning' %}#}
{#                        NotificationJG.warning("{{ notificacion.body  }}", "{{ notificacion.title }}");#}
{#                    {% endif %}#}
{#                    {% if notificacion.type == 'info' %}#}
{#                        NotificationJG.info("{{ notificacion.body  }}", "{{ notificacion.title }}");#}
{#                    {% endif %}#}
{#                {% endfor %}#}
                //99
                {% if periodo.id == 99 and persona.tiene_encuesta_pendiente_google and perfilprincipal.es_estudiante %}
                    //console.log(Date.now() >= Date.parse("2021/03/11") && Date.now() <= Date.parse("2021/03/23"));
                    if (Date.now() >= Date.parse("2021/03/11") && Date.now() <= Date.parse("2021/03/23")) {
                        var banderaForm = 0;
                        $('#encuestaGoogleModal')
                            .off('shown.bs.modal')
                            .on('shown.bs.modal', function () {
                                $('#formsGoogleDocs').on('load', function () {
                                    if (banderaForm == 1) {
                                        bloqueointerface();
                                        id_persona = {{ persona.id }}
                                            $.ajax({
                                                type: "POST",
                                                url: "/",
                                                data: {'action': 'RegisterPoll', 'id': id_persona},
                                                success: function (data) {
                                                    $.unblockUI();
                                                    if (data.result == 'ok') {
                                                        $('#encuestaGoogleModal').modal('hide');
                                                        banderaForm = 0;
                                                        NotificationJG.success("Realizo la encuesta, correctamente", "SGA");
                                                    } else {
                                                        smoke.alert(data.mensaje);
                                                    }
                                                },
                                                error: function () {
                                                    $.unblockUI();
                                                    smoke.alert("Error de conexión.");
                                                },
                                                dataType: "json"
                                            });

                                    } else {
                                        banderaForm = 1;
                                    }
                                });

                            })
                            .modal('show');
                    }
                {% endif %}

                $(".viewProfile").click(function () {
                    var panelProfile = $(".panelProfile");
                    if (panelProfile.css('display') == 'none') {
                        // Acción si el elemento no es visible
                        panelProfile.css('display', 'block');

                        //$( ".panelProfile >[img]" ).css('border', '5px #cb8a4f !important;')
                        //panelProfile.addClass('has_active');

                    } else {
                        // Acción si el elemento es visible
                        panelProfile.css('display', 'none');
                        //panelProfile.removeClass('has_active')
                    }
                });

                $(".viewPeriodosAcademicos").click(function () {
                    var panelPeriodosAcademicos = $(".panelPeriodosAcademicos");
                    if (panelPeriodosAcademicos.css('display') == 'none') {
                        // Acción si el elemento no es visible
                        panelPeriodosAcademicos.css('display', 'block');
                        //panelProfile.addClass('has_active');

                    } else {
                        // Acción si el elemento es visible
                        panelPeriodosAcademicos.css('display', 'none');
                    }
                });

                $(document).on("click", function (e) {
                    var panelProfile = $(".panelProfile");
                    var viewProfile = $(".viewProfile");
                    var viewPeriodosAcademicos = $(".viewPeriodosAcademicos");
                    var panelPeriodosAcademicos = $(".panelPeriodosAcademicos");
                    if (!panelProfile.is(e.target) && panelProfile.has(e.target).length === 0 && !viewProfile.is(e.target) && viewProfile.has(e.target).length === 0) {
                        //console.log("entro a super");
                        if (panelProfile.css('display') == 'block') {
                            //Acción si el elemento no es visible
                            panelProfile.css('display', 'none');
                            //panelProfile.removeClass('has_active');
                        }
                    }

                    if (!panelPeriodosAcademicos.is(e.target) && panelPeriodosAcademicos.has(e.target).length === 0 && !viewPeriodosAcademicos.is(e.target) && viewPeriodosAcademicos.has(e.target).length === 0) {
                        //console.log("entro a super");
                        if (panelPeriodosAcademicos.css('display') == 'block') {
                            //Acción si el elemento no es visible
                            panelPeriodosAcademicos.css('display', 'none');
                        }
                    }

                    /*$("#app").click(function(){
                        document.getElementById("sideNavigation").style.width = "0";
                        document.getElementById("app").style.marginLeft = "0";
                        //document.getElementById("contenedorLogo").style.display = 'block';
                        document.getElementById("contenedorLogo").style.paddingLeft = '0px';
                        var x = document.getElementById("contenedorLogo").firstElementChild;
                        x.style.display = 'block';
                        //$("#contenedorLogo").style("padding-left", '0px');
                    });*/

                });
                /*$('[data-toggle="popover"]').popover({
                    placement: 'left',
                    trigger: 'hover'
                });*/

                $('.action_info_menu_admin').popover({
                    placement: 'left',
                    html: true,
                    trigger: 'hover',
                    delay: {
                        show: "1",
                        hide: "100"
                    }
                }).on('shown.bs.popover', function () {
                    setTimeout(function () {
                        $('.action_info_menu_admin').popover('hide');
                    }, 1000);
                });


            });
        });
    </script>
    <script>
        function openNav() {
            document.getElementById("sideNavigation").style.width = "250px";
            document.getElementById("app").style.marginLeft = "250px";
            //document.getElementById("contenedorLogo").style.display = 'none';
            document.getElementById("contenedorLogo").style.paddingLeft = '240px';
            //$("#contenedorLogo").style("padding-left", '240px');
            var x = document.getElementById("contenedorLogo").firstElementChild;
            x.style.display = 'none';
        }

        function closeNav() {
            document.getElementById("sideNavigation").style.width = "0";
            document.getElementById("app").style.marginLeft = "0";
            //document.getElementById("contenedorLogo").style.display = 'block';
            document.getElementById("contenedorLogo").style.paddingLeft = '0px';
            var x = document.getElementById("contenedorLogo").firstElementChild;
            x.style.display = 'block';
            //$("#contenedorLogo").style("padding-left", '0px');
        }

        function irArriba() {
            //console.log("arrr")
            $('.ir-arriba').click(function () {
                $('body,html').animate({scrollTop: '0px'}, 1000);
            });
            $(window).scroll(function () {
                if ($(this).scrollTop() > 0) {
                    $('.ir-arriba').slideDown(600);
                } else {
                    $('.ir-arriba').slideUp(600);
                }
            });
            $('.ir-abajo').click(function () {
                $('body,html').animate({scrollTop: '1000px'}, 1000);
            });
        }

        $(document).ready(function () {
            irArriba();
        });
    </script>
    <script type="text/javascript" src='/static/js/fontawesomev3.js?v=1.0.0'></script>
    {% block heading %}
    {% endblock %}
    <style>
        .bg-sga-2 {
            --bs-bg-opacity: 1;
            position: fixed;
            margin-top: 5%;
            background-color: #FE9900 !important
        }

        @media (max-width: 979px) {

        }
    </style>
</head>
<body data-spy="scroll" data-target=".subnav" data-offset="50" style="" {% if not persona %}class='{% block contentextraclass %}{% endblock %} {% else %} class='{% block marcaaguabackground %}{% endblock %}'{% endif %}
'>
{% if not request.path in "'/loginsga', '/loginsagest', '/loginposgrado', '/loginpostulacion', '/alu_addremove_matricula/pregrado', '/alu_matricula/pregrado', '/alu_horarios', '/pro_horarios', '/alu_solicitudmatricula/especial'" or  request.path == '/' %}
    {#    <div id="page-loader"><span class="preloader-interior"><img src="/static/images/tigrillo_loader.gif"/></span></div>#}
{#    <div id="loading">#}
{#        <div id="loading-center" style="opacity: 2 !important;">#}
{#            <span class="spinner-grow spinner-border-lg" role="status" aria-hidden="true" style="width: 10rem; height: 10rem; background-color: #F8C471 ; color: #F8C471 ; !important"></span>#}
{#        </div>#}
{#    </div>#}
{% endif %}

<div id="app">

    {% if not useModal %}
        <div id="nav-header" class="navbar navbar-inverse navbar-fixed-top" style="border-bottom: 11px solid #fe9900;">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <ul class='nav' id="contenedorLogo">
                        {% if not request.user.is_anonymous and eTemplateBaseSetting and eTemplateBaseSetting.use_menu_favorite_module and modulos_favoritos and not perfilprincipal.es_estudiante %}
                            {#                            <li>#}
                            {#                                <a href="javascript:void(0)" onclick="openNav()"><i class="fa fa-list fa-2x"></i></a>#}
                            {#                                <a href="#" onclick="openNav()" class="hidden-phone hidden-tablet visible-desktop" style="margin-top: 12px;">#}
                            {#                                    <svg width="20" height="20" id="icoOpen">#}
                            {#                                        <path d="M0,4 30,4" stroke="#fff" stroke-width="5"/>#}
                            {#                                        <path d="M0,11 30,11" stroke="#fff" stroke-width="5"/>#}
                            {#                                        <path d="M0,18 30,18" stroke="#fff" stroke-width="5"/>#}
                            {#                                    </svg>#}
                            {#                                </a>#}
                            {#                            </li>#}
                        {% endif %}
                        <li>
                            <a style="font-size: 16px;" href="/" class="hidden-phone hidden-tablet visible-desktop">
                                {% if tipoentrada == 'SGA' %}
                                    <img src='/static/logos/sgaplus_white.svg' style="height: 40px;"/>
                                {% endif %}
                                {% if tipoentrada == 'SAGEST' and not request.path == '/loginsagest' %}
                                    <img src='/static/logos/sagestplus_white.svg' style="height: 40px;"/>
                                {% endif %}
                                {% if tipoentrada == 'POSGRADO' %}
                                    <span style="vertical-align: middle;"><span style="font-weight: bold; font-size: 20px;">{{ tipoentrada }}</span> | Sistema de Admisión Posgrado</span>
                                {% endif %}
                                {% if tipoentrada == 'POSTULACIONPOSGRADO' %}
                                    <span style="vertical-align: middle;"><span style="font-weight: bold; font-size: 20px;">POSGRADO</span> | Sistema de Selección Docentes Posgrado</span>
                                {% endif %}
                            </a>
                            <a href="/" class="visible-phone visible-tablet hidden-desktop">
                                {% if tipoentrada == 'SGA' %}
                                    <img src='/static/logos/sgaplus_white.svg' style="height: 40px; margin-left: -16px;"/>
                                {% endif %}
                                {% if tipoentrada == 'SAGEST' and not request.path == '/loginsagest' %}
                                    <img src='/static/logos/sagestplus_white.svg' style="height: 40px;"/>
                                {% endif %}
                                {% if tipoentrada == 'POSGRADO' %}
                                    <span style="vertical-align: middle; font-size: 20px;"><span style="font-weight: bold;">{{ tipoentrada }}</span></span>
                                {% endif %}
                                {% if tipoentrada == 'POSTULACIONPOSGRADO' %}
                                    <span style="vertical-align: middle; font-size: 20px;"><span style="font-weight: bold;">POSGRADO</span></span>
                                {% endif %}

                                {#                        {% if tipoentrada == 'SGA' %}#}
                                {#                        <span style="font-size: 22px; font-weight: bold;">SGA </span>#}
                                {#                        {% endif %}#}
                                {#                        {% if tipoentrada == 'SAGEST' %}#}
                                {#                        <span style="font-size: 22px; font-weight: bold;">SAGEST </span>#}
                                {#                        {% endif %}#}
                            </a>
                        </li>
                    </ul>
                    {% if not request.user.is_anonymous %}
                        <div class="pull-right hidden-phone hidden-tablet visible-desktop">
                            <ul style="margin-top: 9px;" class='nav'>
                                {#                            {% if persona.tiene_multiples_perfiles %}#}
                                {#                                <ul class="nav" style="margin: 0 !important;">#}
                                {#                                <li class="dropdown">#}
                                {#                                    <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown">{{ persona.nombre_completo }}<b class="caret"></b></a>#}
                                {#                                    <ul class="dropdown-menu pull-right">#}
                                {#                                        {% for perfil in perfiles_usuario %}#}
                                {#                                            {% if perfil.activo %}#}
                                {#                                                <li>#}
                                {#                                                    <a {% if perfilprincipal.id == perfil.id %}#}
                                {#                                                    href='javascript:;' {% else %}#}
                                {#                                                    href='/cudu?id={{ perfil.id|encrypt }}'#}
                                {#                                                    class="btn-form" {% endif %}>#}
                                {#                                                    {% if perfilprincipal.id == perfil.id %}#}
                                {#                                                        <i class="fa fa-check"></i>{% endif %} {{ perfil.tipo }}</a>#}
                                {#                                                </li>#}
                                {#                                            {% endif %}#}
                                {#                                        {% endfor %}#}
                                {#                                    </ul>#}
                                {#                                </li>#}
                                {#                            </ul>#}
                                {#                            {% else %}#}
                                {#                                <li><a href="javascript:;">{{ persona.nombre_completo }}</a></li>#}
                                {#                            {% endif %}#}
                                {% if tiposistema == 'sga' %}
                                    <ul style="margin-right: -7px;" class="nav">
                                        <li class="dropdown has_hover" style="">
                                            <a style="height: 50px; vertical-align: middle; padding-top: 12px"
                                               href="javascript:;" id="accPeriodo" class="dropdown-toggle tb"
                                               data-toggle="dropdown"
                                               title="Periodos Académicos">{{ periodo.tipo }} {{ periodo.nombre }}</a>
                                            <ul id="listaPeriodos" style="padding: 10px 10px;"
                                                class="dropdown-menu pull-right {% if periodos.count > 10 %}card divScroll square scrollbar-dusty-grass square thin{% endif %}">
                                                <li style="width: 100%;display: block;padding-left: 3%; padding-right: 3px;">
                                                    <input type="search" id="buscarPeriodo" autocomplete="off"
                                                           placeholder="Buscar..."
                                                           style="width: 100%;display: block; padding: 3px 15px; float: right; -webkit-border-radius: 20px; border-radius: 20px; margin-top: -4px;"/>
                                                </li>
                                                {% for periodo2 in periodos %}
                                                    <li><a href='javascript:;' class='periodoselector'
                                                           pid='{{ periodo2.id|encrypt }}'>{% if periodo2.id == periodo.id %}
                                                        <i class="fa fa-check"></i>{% endif %} {{ periodo2 }}</a></li>
                                                {% endfor %}
                                            </ul>
                                        </li>
                                    </ul>
                                {% endif %}
                                {#NOTIFICACIONES WEB#}
                                {% if request.user.is_authenticated and permiteWebPush %}
                                    <ul style="margin-right: -15px; margin-top: -5px;" class="nav" id="btnNotificacionTareas">
                                        <li class="dropdown has_hover">
                                            <a style="height: 50px;" href="javascript:;" class="dropdown-toggle" data-toggle="dropdown">
                                                {% if totnotification > 0 %}
                                                    <label class="label label-warning" style="padding: 4px; font-size: 8px;line-height: 8px;">{{ totnotification }}</label>
                                                {% endif %}
                                                <i class="fa fa-bell fa-2x" id="btnNotiIcono" style="font-size: 29px;{% if totnotification > 0 %}color:#f89406{% endif %}"></i>
                                                {#                                                <b class="caret"></b>#}
                                            </a>
                                            <ul class="dropdown-menu pull-right" style="overflow-x: auto !important; width: 500px;!important;font-weight: 900;">
                                                {% for notificacion in listnotification %}
                                                    <li style="border-bottom: 1px solid #D6EAF8;">
                                                        <a _href="{{ notificacion.url }}" href="javascript:void(0)" id="{{ notificacion.id }}" class="btn-form viewNotification_b">
                                                            <div style="display: flex !important;" class="d-flex">
                                                                {% if notificacion.tipo == 1 %}
                                                                    <img src="/static/logos/noti_mensaje.svg" style="width: 30px">
                                                                {% elif notificacion.tipo == 2 %}
                                                                    {% if notificacion.en_proceso %}
                                                                        <img src="/static/logos/noti_proceso.svg" style="width: 30px">
                                                                    {% elif notificacion.error %}
                                                                        <img src="/static/logos/noti_error.svg" style="width: 30px">
                                                                    {% else %}
                                                                        <img src="/static/logos/noti_fin.svg" style="width: 30px">
                                                                    {% endif %}
                                                                {% elif notificacion.tipo == 3 %}
                                                                    <img src="/static/logos/noti_info.svg" style="width: 30px">
                                                                {% endif %}
                                                                <div class="ms-3" style="margin-left: 12px;">
                                                                    <span class="text-body">{{ notificacion.titulo }}</span><br>
                                                                    <span class="text-muted">
                                                                        <i class="fa fa-calendar me-1"></i> hace {{ notificacion.diasingresado }} dias
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </a>
                                                    </li>
                                                {% empty %}<br>
                                                    <a class="text-body" href="#">
                                                        <div class="ms-3" style="text-align: center">
                                                            <img src="/static/logos/notificacion.svg" style="width: 150px">
                                                            <p class="mb-3" style='color: #7C7C7C'>Actualmente no tiene nuevas notificaciones</p>
                                                        </div>
                                                    </a>
                                                {% endfor %}
                                                <li style="margin-top: 41px;text-align: center;padding-top: 5px !important;
                                                          padding-bottom: 0 !important;padding-left: 1rem !important; padding-right: 1rem !important;">
                                                    <a href="/notificacion" class="btn-form" style="color: #5c5776;font-size: 13px;font-weight: 600 !important;">
                                                        <i class="fa fa-bell"></i> Ver mis notificaciones
                                                    </a>
                                                </li>
                                            </ul>
                                        </li>
                                    </ul>
                                {% endif %}
                                {#NOTIFICACIONES WEB#}
                                {#                                <li id="checkmailicon" class="{% if not persona.tiene_mensajes %}hidden has_hover{% endif %}">#}
                                {#                                    <a style="height: 50px;" href="/mailbox"> <i class="fa fa-envelope fa-2x"></i> </a>#}
                                {#                                </li>#}
                                <!--<li class="divider-vertical"></li>-->
                                {#                            {% if tiposistema == 'sga' %}#}
                                {#                            <ul class="nav">#}
                                {#                                <li class="dropdown">#}
                                {#                                    <a href="javascript:;" id="accPeriodo" class="dropdown-toggle"#}
                                {#                                       data-toggle="dropdown">{{ periodo.tipo }} {{ periodo.nombre }} <b class="caret"></b></a>#}
                                {#                                    <ul id="listaPeriodos"#}
                                {#                                        class="dropdown-menu pull-right {% if periodos.count > 10 %}#}
                                {#                            card divScroll square scrollbar-dusty-grass square thin{% endif %}">#}
                                {#                                        <li style="width: 95%;display: block;padding-left: 3%;"><input type="search" id="buscarPeriodo" autocomplete="off" style="width: 95%;display: block;"/>#}
                                {#                                        </li>#}
                                {#                                        {% for periodo2 in periodos %}#}
                                {#                                            <li><a href='javascript:;' class='periodoselector'#}
                                {#                                                   pid='{{ periodo2.id|encrypt }}'>{% if periodo2.id == periodo.id %}#}
                                {#                                                <i class="fa fa-check"></i>{% endif %} {{ periodo2 }}</a></li>#}
                                {#                                        {% endfor %}#}
                                {#                                    </ul>#}
                                {#                                </li>#}
                                {#                            </ul>#}
                                {#                        {% endif %}#}
                                {#                            <li>#}
                                {#                            {% if persona.foto %}#}
                                {#                                <a class="fancybox" rel="group"#}
                                {#                                   href="https://sga.unemi.edu.ec{{ persona.foto.foto.url }}" title="{{ persona }}">#}
                                {#                                    <img src="https://sga.unemi.edu.ec{{ persona.foto.foto.url }}" width="25"#}
                                {#                                         height="25" class="gb_Da img-circle">#}
                                {#                                </a>#}
                                {#                            {% else %}#}
                                {#                                <a>#}
                                {#                                    {% if persona.sexo_id == 1 %}#}
                                {#                                        <img src="https://sga.unemi.edu.ec/static/images/iconos/hombre.png" width="25"#}
                                {#                                             height="25">#}
                                {#                                    {% else %}#}
                                {#                                        <img src="https://sga.unemi.edu.ec/static/images/iconos/mujer.png" width="25"#}
                                {#                                             height="25">#}
                                {#                                    {% endif %}#}
                                {#                                </a>#}
                                {#                            {% endif %}#}
                                {#                        </li>#}
                                <!--<li><a href="/pass" title="Cambiar contraseña" class="tb"><i class="fa fa-lock fa-2x"></i></a>-->
                                {#                                </li>#}
                                <!--<li><a href="javascript:;" class="logoutuser tb" title="Salir de la aplicación"><i
                                        class="fa fa-power-off fa-2x"></i></a></li>-->
                                <!---
                                PRUEBA DEMO
                                -->
                                {% if tiposistema == 'sga' %}
                                    {#                                <li>#}
                                    {#                                    <a href="javascript:;" class="viewPeriodosAcademicos tb" title="Periodos Academicos">#}
                                    {#                                        {{ periodo.tipo }} {{ periodo.nombre }}#}
                                    {#                                    </a>#}
                                    {#                                </li>#}
                                {% endif %}
                                <li class="has_hover" style="margin-top: -9px;">
                                    <a style="height: 50px; position: relative;" href="javascript:;" class="viewProfile tb" title="Mi Perfil">
                                        {% if persona.foto %}
                                            <img src="{{ persona.foto.foto.url }}" onerror="this.onerror=null;this.src='/static/images/image.png'" width="25" height="25" class="gb_Da img-circle viewProfileIMG">
                                        {% else %}
                                            <img style="background-color: #FFFFFF" src="/static/images/iconos/{% if persona.sexo.id == 2 %}hombre.png{% else %}mujer.png{% endif %}" onerror="this.onerror=null;this.src='/static/images/image.png'" width="25" height="25" class="gb_Da img-circle viewProfileIMG">
                                        {% endif %}
                                    </a>
                                </li>

                                <!---
                                FINALIZA PRUEBA DEMO
                                -->

                            </ul>
                        </div>
                        <div class="pull-right visible-phone visible-tablet hidden-desktop">
                            <ul style="margin-top: 9px;" class='nav'>
                                {% if persona.tiene_multiples_perfiles %}
                                    <ul class="nav">
                                        <li class="dropdown">
                                            <a href="javascript:;" class="dropdown-toggle action_view_change_profile" data-toggle="dropdown"><span
                                                    style="text-transform: uppercase;">{{ persona.usuario.username }}</span><b
                                                    class="caret"></b></a>
                                            {#                                <ul class="dropdown-menu pull-right">#}
                                            {#                                    {% for perfil in perfiles_usuario %}#}
                                            {#                                    {% if perfil.activo %}#}
                                            {#                                    <li>#}
                                            {#                                        <a {% if perfilprincipal.id == perfil.id %}#}
                                            {#                                                href='javascript:;'#}
                                            {#                                                {% else %}#}
                                            {#                                                href='/cudu?id={{ perfil.id|encrypt }}'#}
                                            {#                                                class="btn-form"#}
                                            {#                                                {% endif %}>#}
                                            {#                                            {% if perfilprincipal.id == perfil.id %}#}
                                            {#                                                <i class="fa fa-check"></i>#}
                                            {#                                            {% endif %} {{ perfil.tipo }}</a>#}
                                            {#                                    </li>#}
                                            {#                                    {% endif %}#}
                                            {#                                    {% endfor %}#}
                                            {#                                </ul>#}
                                        </li>
                                    </ul>
                                {% else %}
                                    <li><a href="javascript:;">{{ persona.nombre_iniciales }}</a></li>
                                {% endif %}
                                <li><a href="javascript:;" style="border-radius: 50%;background-color: #f5f4f8;border-color: #f5f4f8;color:#a8a3b9;" class="rounded-circle listaperiodos"><i class="fa fa-filter"></i></a></li>
                                <li><a href="javascript:;" class="logoutuser"><i class="fa fa-off"></i> Salir</a></li>
                            </ul>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
        <a class="ir-arriba tl" href="javascript:void(0)" title="Volver arriba">
            <span class="fa-stack"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-arrow-up fa-stack-1x fa-inverse"></i></span>
        </a>
        {% if not request.user.is_anonymous and eTemplateBaseSetting and eTemplateBaseSetting.use_menu_favorite_module and modulos_favoritos and not perfilprincipal.es_estudiante %}
            <div id="sideNavigation" class="sidenav">
                <a href="javascript:void(0)" class="closebtn" onclick="closeNav()"><i class="fa fa-times"></i></a>
                <a href="/" class="bloqueo_pantalla" onclick="closeNav()"><i class="fa fa-minus"></i> Inicio</a>
                {% for module_favorite in modulos_favoritos %}
                    <a href="/{{ module_favorite.url }}" class="bloqueo_pantalla" onclick="closeNav()"><i class="fa fa-minus"></i> {{ module_favorite.nombre }}</a>
                {% endfor %}
            </div>
        {% endif %}
        {% if persona.usuario.is_superuser %}
            {% if persona.usuario.id == 10724 or persona.usuario.id == 20533 %}
                <div class="switcher-wrapper hidden-phone">
                    <div class="demo_changer" style="right: 0px;">
                        <div class="demo-icon">
                            <a class="btn btn-primary action_info_menu_admin" href="/unemi_2021_admin_desarrollo_/" target="_blank" data-placement="left" rel="popover" data-content="Acceso al control de la administración total del admin de Django" data-original-title="Admnistración Django"><i class="fa fa-gears fa-2x"></i></a>
                            <a class="btn btn-success action_info_menu_admin bloqueo_pantalla" href="/adm_sistemas" data-placement="left" rel="popover" data-content="Acceso al módulo de administración del sistema" data-original-title="Admnistración APP"><i class="fa fa-cog fa-2x"></i></a>
                            <a class="btn btn-inverse action_info_menu_admin bloqueo_pantalla" data-placement="left" rel="popover" href="/gestion" data-content="Acceso al módulo de Gestión de Base de datos" data-original-title="Gestión BD"><i class="fa fa-code fa-2x"></i></a>
                            <a class="btn btn-info action_info_menu_admin bloqueo_pantalla" data-placement="left" rel="popover" href="/databasebackup" data-content="Acceso al módulo de Respaldos de Base de Datos" data-original-title="Backups BD"><i class="fa fa-bug fa-2x"></i></a>
                        </div>
                    </div>
                </div>
            {% endif %}
        {% endif %}
    {% endif %}

    <div id="content" {% if useModal %}style="margin-top: -50px;" {% endif %}>
        <div class='container{% block containertype %}-fluid{% endblock %} table-responsive'>
            {% if ruta and not useModal %}
                <div class="row-fluid">
                    <div class="span12">
                        <ul class="breadcrumb">
                            {% for r in ruta %}
                                <li>
                                <span {% if not forloop.first %}class="hidden-phone hidden-tablet visible-desktop"{% endif %}>
                                <a href="{{ r.0 }}" class="bloqueo_pantalla">{{ r.1 }}</a> <span
                                        class="divider">/</span>
                                </span>
                                </li>
                            {% endfor %}
                            <input type="text"
                                   style=""
                                   id="idbuscador" placeholder="Buscar...">
                            <a style="float: right;" href="{% if ret %}{{ ret }}{% else %}{% block atras %}/{% endblock %}{% endif %}" class='btn btn-mini urlatrasbutton bloqueo_pantalla' id="urlatrasbutton"><span class="fa fa-arrow-left"></span> Atr&aacute;s</a>
                        </ul>
                    </div>
                </div>
            {% endif %}

            {% block canvas %}
            {% endblock %}
        </div>
    </div>

    {% if not request.user.is_anonymous and not useModal %}
        <br>
        <div id="footer" class="bg-footer" style="text-align: center">
            <span class="mt-8"><b>{{ institucion }}</b> Todos los derechos reservados </span>
            <span id="ipcapturada"></span> - {% if remotenameaddr %}{{ remotenameaddr }}{% endif %} - S{{ server_response }}
            <div style="text-align: right; float: right">
                <a href="javascript:;" class="text-black" style="font-size: 18px;line-height: 18px;color:#222;!important; font-weight: bold" id="clock"></a> &nbsp;&nbsp;
            </div>
        </div>
        {#        <div id="nav-footer" class='navbar navbar-fixed-bottom'>#}
        {#                <div id="nav-footer" class='navbar'>#}
        {% block footerextra %}
        {% endblock %}
        {#            <div class="container-fluid">#}
        {#                <div class='row-fluid'>#}
        {#                    <div class="span12">#}
        {#                        <div class="smaller">#}
        {#                            <div style="{% if pie_pagina_creative_common_licence %}text-align: left; float: left;{% else %}text-align: center;{% endif %}">#}
        {#                                <div style="margin-bottom: -5px">{{ nombresistema }}, {{ institucion }}</div>#}
        {#                            <div>Todos los derechos reservados(c) 2012{% if remoteaddr %}, Acceso al sistema desde - {{ remoteaddr }}{% endif %} - S{{ server_response }}</div>#}
        {#                                <div>Todos los derechos reservados(c) 2012<span id="ipcapturada"></span> -#}
        {#                                    {% if remotenameaddr %}{{ remotenameaddr }}{% endif %} - S{{ server_response }}</div>#}
        {#                            </div>#}
        {#                            <div style="text-align: right; float: right" class="hidden-phone hidden-tablet visible-desktop">#}
        {#                                <p></p>#}
        {#                                <span class="signal_line">#}
        {#                                    <div class="online-indicator">#}
        {#                                        <span class="blink-online"></span>#}
        {#                                    </div>#}
        {#                                </span>#}
        {#                                <font>#}
        {#                                    <a href="javascript:;" style="font-size: 28px; color: #fffeec; font-weight: bold" id="clock"></a>#}
        {#                                </font>#}
        {#                            </div>#}
        {#                        {% if pie_pagina_creative_common_licence %}#}
        {#                            <div style="text-align: right; float: right" class="hidden-phone hidden-tablet visible-desktop">#}
        {#                                                                <div style="margin-bottom: -5px"><a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"><img width="70px" alt="Licencia Creative Commons" style="border-width:0" src="/static/images/creativelogo.png" /></a></div>#}
        {#                                                                <div>Esta obra está bajo una <a style="color: #f1f1f1;" rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">Licencia Creative Commons Atribución-NoComercial 4.0 Internacional</a></div>#}
        {#                            </div>#}
        {#                        {% endif %}#}
        {##}
        {#                        </div>#}
        {#                    </div>#}
        {#                </div>#}
        {#            </div>#}
        {#        </div>#}
    {% endif %}

    <div class="modal fade static" id="waitpanel" style="display: none;">
        <div class="modal-header">
            <h4 id="waitpaneltitle"></h4>
        </div>
        <div class="modal-body">
            <p id="waitpanelbody"></p>
        </div>
    </div>

    {% if not request.user.is_anonymous and not useModal %}
        <div class="modal fade static" id="periodospanel" style="display: none;">
            <div class="modal-header">
                <h4 id="paneltitle">Periodos</h4>
            </div>
            <div class="modal-body">
                <select class="select2" style="width: 100%;" id="periodoselectorall">
                    {% for periodo2 in periodos %}
                        <option value="{{ periodo2.id|encrypt }}"
                                {% if periodo2.id == periodo.id %}selected{% endif %}>{{ periodo2.nombre }}</option>
                        {#                <li><a href='javascript:;' class='periodoselector' pid='{{ periodo2.id|encrypt }}'>{% if periodo2.id == periodo.id  %}<i class="fa fa-check"></i>{% endif %} {{ periodo2 }}</a></li>#}
                    {% endfor %}
                    {#            {% for periodo in periodos_todos %}#}
                    {#                <option value="{{ periodo.id|encrypt }}">{{ periodo }}</option>#}
                    {#            {% endfor %}#}
                </select>
            </div>
            <div class="modal-footer">
                <a href="javascript:;" id="seleccionarperiodospanel" class="btn">Seleccionar</a>
                <a href="javascript:;" id="cerrarperiodospanel" class="btn">Cerrar</a>
            </div>
        </div>
    {% endif %}

{#    <div id="throbber" style="display:none; margin: 0 auto; width: 100px; height: 100px; background-color: #ffffff">#}
{#        <img src="/static/images/tigrillo_loader.gif"/>#}
{#    </div>#}
    <div id="throbber" style="display: none">
        <center>
            <img src="/static/images/TIGRILLO_LOAD_3.gif" style=" margin: -110px;opacity: 0.5;"/>
        </center>
    </div>

    <div class="modal fade static" id="formatoreporte" style="display: none;">
        <div class="modal-header">
            <h4 id="paneltitle">Formato de reporte</h4>
        </div>
        <div class="modal-body">
            <select style="width: 100%;" id="formatoreporte_formato">
                <option id="formatopdf" value="0">PORTABLE DOCUMENT FORMAT (PDF)</option>
                <option id="formatodoc" value="1">MICROSOFT WORD (DOCX)</option>
                <option id="formatoxls" value="2">MICROSOFT EXCEL (XLXS)</option>
                <option id="formatocsv" value="3">COMMA-SEPARATED VALUES (CSV)</option>
            </select>
        </div>
        <div class="modal-footer">
            <a href="javascript:;" id="formatoreporte_run" class="btn btn-success">Ejecutar</a>
            <a href="javascript:;" id="formatoreporte_close" class="btn">Cerrar</a>
        </div>
    </div>
    <div class="modal fade static" id="ficheromodal" style="display: none;">
        <div class="modal-header">
            <h4>Descargar fichero</h4>
        </div>
        <div class="modal-body">
            <a id='enlacefichero' href="javascript:;" target="_blank" class="btn btn-success btn-block"><i
                    class="fa fa-arrow-down"></i> Descargar</a>
        </div>
        <div class="modal-footer">
            <a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a>
        </div>
    </div>
    <div class="modal fade static" id="confirmacionmodal" style="display: none;"></div>
    <div class="modal fade static" id="eliminacionmodal" style="display: none;"></div>
    <div class="modal fade static" id="viewhtml" style="display: none;"></div>

    <div class="modal fade opacity" id="modalConfirm" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Confirmación</h4>
                </div>
                <div class="modal-body with-padding">
                    <p style="font-weight: bold"></p>
                </div>
                <div class="modal-footer">
                    <a href="javascript:;" class="btn btn-danger action_yes">Si</a>
                    <a href="javascript:;" class="btn btn-info action_not">No</a>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade opacity" id="modalConfirmAjax" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Confirmación</h4>
                </div>
                <div class="modal-body with-padding">
                </div>
                <div class="modal-footer">
                    <a href="javascript:;" class="btn btn-danger action_yes">Si, segur{% if persona and persona.sexo_id == 1 %}a{% elif persona and persona.sexo_id == 2 %}o{% else %}o/a{% endif %}</a>
                    <a href="javascript:;" class="btn btn-info action_not">No, llévame de vuelta</a>
                </div>
            </div>
        </div>
    </div>

    {% if not request.user.is_anonymous and not useModal %}
        {% if periodo.id == 99 and persona.tiene_encuesta_pendiente_google and perfilprincipal.es_estudiante %}
            <div class="modal fade static" id="encuestaGoogleModal" data-width="1200" data-keyboard="false" style="display: block;"
                 data-backdrop="static" aria-hidden="false">
                <div class="modal-header">
                    <h4>ENCUESTA EVALUACIÓN DEL CURSO DE NIVELACIÓN DE CARRERAS</h4>
                </div>
                <div class="modal-body" style="height: 500px">
                    <iframe id="formsGoogleDocs" width="100%" height="100%" style="border:none;"
                            src="https://docs.google.com/forms/d/e/1FAIpQLSeh7uV_9Jg3RWFma084T7U9qZku5vcOQ0anlIFeGcFoxffwyA/viewform"
                            title="ENCUESTA EVALUACIÓN DEL CURSO DE NIVELACIÓN DE CARRERAS 2s-2020"></iframe>
                    <!--<iframe id="formsGoogleDocs" width="100%" height="100%" style="border:none;" src="https://docs.google.com/forms/d/e/1FAIpQLSfcSG7B07Xz1N1hvHKjrgFvWOBKXIZGv6EDIZAb0fLV_oSzPg/viewform" title="ENCUESTA EVALUACIÓN DEL CURSO DE NIVELACIÓN DE CARRERAS 2s-2020"></iframe>-->
                </div>
                <div class="modal-footer">
                    <!--<a href="javascript:;" class="btn btn-cerrar btn-info" data-dismiss="modal">Cerrar</a>-->
                </div>
            </div>
        {% endif %}
    {% endif %}

    {% if not request.user.is_anonymous and not useModal %}
        <div class="panelProfile">
            <div class="panelProfile_pesonal_info">
                <div style="display: flex !important;" class="d-flex">
                    <div class="panelProfile_pesonal_info_image">
                        <a class="fancybox" rel="group" {% if persona.foto %}href="{{ persona.foto.foto.url }}" title="{{ persona }}"{% endif %} style="margin-top: 7px;">
                            {% if persona.foto %}
                                <img src="{{ persona.foto.foto.url }}" onerror="this.onerror=null;this.src='/static/images/image.png'" class="img-circle profile_info_image">
                            {% else %}
                                <img src="/static/images/iconos/{% if persona.sexo.id == 2 %}hombre.png{% else %}mujer.png{% endif %}" onerror="this.onerror=null;this.src='/static/images/image.png'" class="img-circle profile_info_image">
                            {% endif %}
                        </a>
                    </div>
                    <div class="panelProfile_pesonal_manage_info">
                        <div><span class="label label-success">{{ perfilprincipal.tipo }}</span></div>
                        <strong>{{ persona.nombre_completo }}</strong><br>
                        <span class="text-muted">{{ persona.emailinst }}</span>
                    </div>
                </div>
            </div>

            <div class="menu-profiles">

                <ul class="list-unstyled" style="font-size: 12px;">
                    <li class="dropdown-item"><a href="/th_hojavida" class="dropdown-item bloqueo_pantalla" style="padding: 2px 27px 2px 28px;!important;"><img src="/static/logos/icon_editar_perfil.svg" style="width:28px">&nbsp;Gestionar mi perfil</a></li>
{#                    {% if perfilprincipal.es_administrativo and request.user.is_superuser %}#}
{#                        <li class="dropdown-item"><a href="/my_faceid" class="dropdown-item bloqueo_pantalla" style="padding: 2px 27px 2px 28px;!important;"><img src="/static/logos/icon_editar_perfil.svg" style="width:28px">&nbsp;Gestionar mi FaceID</a></li>#}
{#                    {% endif %}#}
                    <li class="dropdown-item"><a href="/pass" class="dropdown-item bloqueo_pantalla" style="padding: 2px 27px 2px 28px;!important;"><img src="/static/logos/icon_cambiar_password.svg" style="width:28px">&nbsp;Cambiar contraseña</a></li>
                    <!--<li class="dropdown-item"><a href="/my_devices" class="dropdown-item bloqueo_pantalla" style="padding: 2px 27px 2px 28px;!important;"><img src="/static/logos/icon_mis_dispositos.svg" style="width:28px">&nbsp;Mis dispositivos</a></li>-->
                    <li class="dropdown-item"><a href="/my_profile/security" class="dropdown-item bloqueo_pantalla" style="padding: 2px 27px 2px 28px;!important;"><img src="/static/logos/shield-check.svg" style="width:24px">&nbsp;Gestionar seguridad</a></li>
                    {% if request.user.is_superuser %}
                        <li class="dropdown-item"><a href="/unemi_2021_admin_desarrollo_" target="_blank" class="dropdown-item" style="padding: 2px 27px 2px 28px;!important;"><img src="/static/logos/icon_administrador.svg" style="width:28px">&nbsp;Administrar Django</a></li>
                    {% endif %}
                </ul>
            </div>
            <div class="dropdown-divider"></div>
            <div class="panelProfile_profiles">
                <div class="menu-profiles">
                    <ul class="list-unstyled" style="font-size: 12px;padding-top: 10px;!important;">
                        {% for perfil in perfiles_usuario %}
                            {% if perfil.activo %}
                                <li class="dropdown-item {% if perfilprincipal.id == perfil.id %}active{% endif %}" style="border-bottom: 0; !important;">
                                    <a style="padding: 6px 28px 6px 27px;!important;{% if not perfilprincipal.id == perfil.id %}margin-left: 10px;{% endif %}" {% if perfilprincipal.id == perfil.id %} href='javascript:;' {% else %} href='/cudu?id={{ perfil.id|encrypt }}' class="dropdown-item bloqueo_pantalla" {% endif %}>
                                        {% if perfilprincipal.id == perfil.id %}<img src="/static/logos/icon_radiobutton.svg" style="width: 25px">{% endif %} {{ perfil.tipo }}
                                    </a>
                                </li>
                            {% endif %}
                        {% endfor %}
                    </ul>
                </div>
            </div>
            <div class="panelProfile_logout">
                <a class="dropdown-item logoutuser" href="javascript:;" style="margin-left: 12px;">
                    <img src="/static/logos/icon_cerrar_sesion.svg" style="width: 28px"> Cerrar sesión
                </a>
            </div>
        </div>

        <div class="panelPeriodosAcademicos">
            <p>ENTRA PERIODOS</p>
        </div>
    {% endif %}

    <div class="modal fade static" id="itemspanelmsgalertmodal" style="display: none;" data-keyboard="false">
        <div class="modal-header">
            <h4 class="paneltitlemsgalertmodal"><span class="fa fa-info-circle"></span> Titulo</h4>
        </div>
        <div class="modal-body panelbodymsgalertmodal" style="text-align: justify; padding-bottom: inherit">
            <div class="alert alert-warning msgtypealert">
                <i style="display: table-cell" class="fa fa-info-circle fa-3x"></i>
                <span style="font-weight: bold; padding-left: 10px; vertical-align: middle; display: table-cell" class="msgtextalert">Texto del mensaje</span>
            </div>
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-accept-am btn-info" send="no" usend="none"> Aceptar</a></td>
                </tr>
            </table>
        </div>
    </div>

    <div class="modal fade static" id="itemspanelmsgconfirmationmodal" style="display: none;" data-keyboard="false">
        <div class="modal-header">
            <h4 class="paneltitlemsgconfirmationmodal"><span class="fa fa-question-circle"></span> Titulo</h4>
        </div>
        <div class="modal-body panelbodymsgconfirmationmodal" style="text-align: justify; padding-bottom: inherit">
            <div class="alert alert-warning msgtypeconfirmation">
                <i style="display: table-cell" class="fa fa-question-circle fa-3x"></i>
                <span style="font-weight: bold; padding-left: 10px; vertical-align: middle; display: table-cell" class="msgtextconfirmation">Texto del mensaje </span>
            </div>
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-positive-cm btn-success"> Aceptar</a></td>
                    <td><a href="javascript:;" class="btn btn-negative-cm btn-danger"> Cancelar</a></td>
                </tr>
            </table>
        </div>
    </div>


    <div class="modal fade static" id="modalPerfilChangeMobile" style="display: none;" data-keyboard="false">
        <div class="modal-header">
            <h4 class="">Cambio de perfil</h4>
        </div>
        <div class="modal-body" style="text-align: justify; padding-bottom: inherit">
            <table class="table table-hover table-bordered">
                {% for perfil in perfiles_usuario %}
                    <tr>
                        {% if perfil.activo %}
                            <td {% if perfilprincipal.id != perfil.id %} style="cursor: pointer;" class="action_change_mobile" nhref='/cudu?id={{ perfil.id|encrypt }}'{% endif %}>
                                <a {% if perfilprincipal.id == perfil.id %} href='javascript:;' {% else %} href='/cudu?id={{ perfil.id|encrypt }}' class="btn-link bloqueo_pantalla"{% endif %}>
                                    {% if perfilprincipal.id == perfil.id %}
                                        <i class="fa fa-check"></i>
                                    {% endif %}
                                    {{ perfil.tipo }}
                                </a>
                            </td>
                        {% endif %}
                    </tr>
                {% endfor %}
            </table>

        </div>
        <div class="modal-footer">
            <a href="javascript:;" class="btn btn-negative-cm btn-danger btn-cerrar"> Cerrar</a>
        </div>
    </div>

    <div class="modal inmodalmedio in modal-overflow" id="modalfirmaelectronida" style="display: none;">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
                <h4><i class="fa fa-list"></i> <b class="paneltitle-firma">FORMULARIO MODAL</b></h4>
            </div>
            <div class="modal-body">
                <form autocomplete="off" method="post"
                      enctype="multipart/form-data" action="{{ request.path }}">
                    {% csrf_token %}
                    <div class="row-fluid panelbody-firma">
                    </div>
                </form>
            </div>
            <div class="modal-footer" id="footermodal-firma">
                <a href="javascript:;" class="btn btn-default" data-bs-dismiss="modal"><i
                        class="fa fa-window-close"></i>
                    Cerrar</a>
            </div>
    </div>
    <div id="csrf_tokendiv" style="display: none;">{{ csrf_token }}</div>
    {% block moreblock %}
    {% endblock %}
</div>
<script>
    $(window).load(function () {
        setTimeout(function () {
            jQuery('#loading').fadeOut(100);

        }, 100);
    });

    console.log('%cUNIVERSIDAD ESTATAL DE MILAGRO', 'color:red; font-size: 2em;')
    console.log('%cTodos los derechos reservados © 2012', 'color:red; font-size: 2em;')

</script>

{#NOTIFICACIONES WEB#}
{% if request.user.is_authenticated and permiteWebPush %}
    <script src="/static/webpush/registerSw.js?0.21"></script>
    <script>

        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.ready.then(registration => {
                registration.active.postMessage({type: 'PORT_INITIALIZATION'});
                if ('SyncManager' in window) {
                    registration.sync.register('sync-data');
                }
                navigator.serviceWorker.addEventListener('message', (event) => {
                    var data = event.data;
                    if (data.error) {
                        mensajeDanger(data.mensaje)
                    } else if (data.mensaje) {
                        mensajeSuccess(data.mensaje)
                    }
                    if (data.noti_mensaje) {
                        alertaSuccess(data.noti_mensaje)
                    }
                    if (data.btn_notificaciones) {
                        $('#btnNotificacionTareas').html(data.btn_notificaciones);
                    }
                });
            });
        }
    </script>
{% endif %}
{#NOTIFICACIONES WEB#}

{% block extraJs %}{% endblock %}
</body>

</html>
