{% extends "base.html" %}
{% load sga_extras %}
{% load tz %}
{% block heading %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <script type="text/javascript">

        const limpiaractive = (object) => {
            $('.step').removeClass('active');
            $('.bs-stepper-pane').removeClass('active');
            $(`[data-target="#${object}"]`).addClass('active');
            $(`#${object}`).addClass('active');
            $('.step-trigger').attr('disabled', false)
        }

        $(function () {
            $("#id_detalle").blur(function (){
                var detalle = $(this).val();
                Swal.fire({
                title: '¿Estas seguro de agregar el siguiente detalle al acta?, si confirma se actualizará el acta con esta información.',
                text: detalle,
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Si!'
                }).then((result) => {
                if (result.value) {
                    $.post("/adm_postulacion", {
                    'action': 'actualizar_detalle_acta',
                     'id': {{acta.pk}},
                     'detalle':detalle
                    },
                      function (data) {
                        if (data.result == 'ok') {
                            location.reload();
                        }else{
                            $.unblockUI();
                            NotificationJG.error(data.mensaje)
                        }
                    }, 'json');
                    }
                })

            })

            $("#id_detalle_resolucion").blur(function (){
                var detalle = $(this).val();
                Swal.fire({
                title: '¿Estas seguro de agregar el siguiente detalle de resolución al acta?, si confirma se actualizará el acta con esta información.',
                text: detalle,
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Si!'
                }).then((result) => {
                if (result.value) {
                    $.post("/adm_postulacion", {
                    'action': 'actualizar_detalle_resolucion_acta',
                     'id': {{acta.pk}},
                     'detalle':detalle
                    },
                      function (data) {
                        if (data.result == 'ok') {
                            location.reload();
                        }else{
                            $.unblockUI();
                            NotificationJG.error(data.mensaje)
                        }
                    }, 'json');
                    }
                })

            })

            $('#courseFormtrigger1').click(function () {
                limpiaractive('test-l-1');
            });

            $('#courseFormtrigger2').click(function () {
                limpiaractive('test-l-2');
            });

            $('#courseFormtrigger3').click(function () {
                limpiaractive('test-l-3');
            });

            $('#courseFormtrigger4').click(function () {
                limpiaractive('test-l-4');
            });

            $('#test-l-1').hasClass('dstepper-none') && $('#test-l-1').removeClass('dstepper-none');

            var stepper = new Stepper($('.bs-stepper')[0])
            stepper.to({% if progress <= 25 %}1{% else %}{% if progress > 25 and progress < 75 %}2{% else %}{% if progress >= 75 and progress < 100%}3{% else %}{% if progress == 100 %}4{% endif %}{% endif %}{% endif %}{% endif %})

            $('.step-trigger').attr('disabled', false);

        });

        function formModal(id, text, action, footer = false) {
            bloqueointerface();
            footer && $('#footermodal').show();
            $.ajax({
                type: "GET",
                url: `{{ request.path }}`,
                data: {
                    'action': action,
                    'id': id,
                },
                success: function (data) {
                    $.unblockUI();
                    if (data.result === true) {
                        $('#itemspanel .panelbody').html(data.data);
                        $('#itemspanel .paneltitle').html(text.toUpperCase());
                        $("#itemspanel").modal({
                            backdrop: 'static',
                            width: '90%'
                        }).modal('show').on('hidden.bs.modal', function (e) {
                            $(".panelbody").empty();
                            for (instance in CKEDITOR.instances) {
                                CKEDITOR.instances[instance].destroy();
                            }
                        });
                    } else {
                        mensajeDanger(data.message);
                    }
                },
                error: function () {
                    $.unblockUI();
                    mensajeDanger("Error de conexión.");
                },
                dataType: "json"
            });
        }

        const generaracta = (pk) => {
            $.get('/adm_postulacion', {'action':'generaractaseleccion', 'id':pk}, function(data) {
                $.unblockUI();
                if (data.result){
                    location.reload();
                }else{
                    $("#helptext_error_acta").html(`Problemas al generar el acta. ${data.mensaje}`).removeClass('d-none');
                }
            })
        }

        const editintegrantes = (pk) => {
            window.open('?action=integrante-comite-academico&pk=' + pk, '_blank');
        }
        const autollenado_plan_de_accion = (pk) => {
            $.post('/adm_postulacion', {'action': 'autollenado_plan_de_accion', 'id': pk}, function (data) {
                $.unblockUI();
                if (data.result) {
                    mensajeSuccess('Se registro el plan de acción exitosamente.');
                    setTimeout(() => {
                        location.reload();
                    }, 1000);
                } else {
                    const Toast = Swal.mixin({
                        toast: true,
                        position: 'top-end',
                        showConfirmButton: false,
                        timer: 3000,
                        timerProgressBar: true,
                        didOpen: (toast) => {
                            toast.addEventListener('mouseenter', Swal.stopTimer)
                            toast.addEventListener('mouseleave', Swal.resumeTimer)
                        }
                    })

                    Toast.fire({
                        icon: 'error',
                        title: `Problemas al generar el acta. ${data.mensaje}`
                    })
                }
            })
        }

    </script>
    <style>
        .nav {
            display: initial;
        !important;
        }

        table.table thead th {
            width: 200px;
            vertical-align: center !important;
            font-weight: 700;
            color: #1F1F1F;
            padding: 0;
            margin-left: 5px;
        }

        table.table thead td {
            vertical-align: center;
            color: #1F1F1F;
            padding: 4px;
        }

        li.nav-item.active {
            border-radius: 5px !important;
        }

        li.nav-item.active:hover {
            border-radius: 5px !important;
        }


        .sidenav.navbar .navbar-nav .active > .nav-link {
            color: #1F1F1F !important;
            border-radius: 0;
        }

        table.table-datos-reunion thead th{
            text-transform: uppercase;
            font-size:12px;
            vertical-align: middle;
            padding: 4px 4px;
            width: 250px;
        }

        table.tabla-eval-perfil thead td {
            text-align: center;
            vertical-align: middle;
            width: 300px;
            background-color: #0b2f44;
            color: white;
        }

        .bg-blue {
            background-color: #0b2f44 !important;
            color: white !important;
        }

        .bg-blue:hover {
            background-color: #0b2f44 !important;
            color: white !important;
        }

        .shine-button {
          color: white; /* color del texto del botón */
          padding: 10px 20px; /* tamaño del botón */
          font-size: 16px; /* tamaño del texto */
          border: none; /* eliminamos el borde del botón */
          border-radius: 4px; /* hacemos esquinas redondeadas */
          transform: scale(1); /* establecemos la escala inicial del botón */
          animation: pulse 2s infinite; /* agregamos la animación de pulso */
        }

        {#@keyframes pulse {#}
        {# #}
        {#  0% {#}
        {#    transform: scale(1); /* el botón se mantiene en su tamaño original */#}
        {#  }#}
        {#  50% {#}
        {#    transform: scale(1.2); /* el botón se escala un 20% */#}
        {#  }#}
        {#  100% {#}
        {#    transform: scale(1); /* el botón vuelve a su tamaño original */#}
        {#  }#}
        {#}#}
        {##}

    </style>
{% endblock %}
{% block atras %}/adm_postulacion?action=listadoactas&pk={{ id }}{% endblock %}
{% block canvas %}
     <!-- Modal -->
    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
         aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-fullscreen">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="paneltitle">Modal title</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal form-modal" autocomplete="off" method="post"
                          enctype="multipart/form-data" action="{{ request.path }}">
                        {% csrf_token %}
                        <div class="row panelbody">
                        </div>
                    </form>
                </div>
                <div class="modal-footer" id="footermodal">
                    <button type="button" class="btn btn-default" data-bs-dismiss="modal"><i class="fa fa-times"></i>
                        Cerrar
                    </button>
                </div>
            </div>
        </div>
    </div>
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
        <symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16">
            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
        </symbol>
        <symbol id="info-fill" fill="currentColor" viewBox="0 0 16 16">
            <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"/>
        </symbol>
        <symbol id="exclamation-triangle-fill" fill="currentColor" viewBox="0 0 16 16">
            <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
        </symbol>
    </svg>
    <div class='row'>
        <div class='col-lg-12'>
            <div class="headtitle ms-0">
                <h3 class="texto-blue">{{ title }}</h3>
                <h6>Seguimiento de actividades</h6>
            </div>
        </div>
    </div>

    <div class="row">
    <div id="courseForm" class="bs-stepper">
        <div class="row">
            <div class="col-sm-12">
                <div class="row">
                    <div class='col-lg-12'>
                        <div class="alert alert-{% if progress <= 25 %}danger{% else %}{% if progress > 25 and progress < 75 %}warning{% else %}success{% endif %}{% endif %} alert-dismissible fade show px-4 py-3" role="alert">
                            <svg class="bi flex-shrink-0 pb-1" width="20" height="20" role="img"
                                 aria-label="Danger:">
                                <use xlink:href="#{% if progress <= 75 %}exclamation-triangle-fill{% else %}{% if progress > 75 %}check-circle-fill{% endif %}{% endif %}"/>
                            </svg>
                            <span class="pt-1">El acta de comité académico se encuentra configurado en un {{ progress|floatformat:0 }} %.</span>

                        </div>
                    </div>
                </div>
                <div class="bs-stepper-header shadow-sm" role="tablist">
                    <div class="step {% if progress <= 25 %}active{% endif %}" data-target="#test-l-1">
                        <button type="button" class="step-trigger" role="tab" id="courseFormtrigger1" aria-controls="test-l-1">
                            <span class="bs-stepper-circle">1</span>
                            <span class="bs-stepper-label">Datos de la Reunión</span>
                        </button>
                    </div>
                    <div class="bs-stepper-line"></div>
                    <div class="step {% if progress > 25 and progress < 75 %}active{% endif %}" data-target="#test-l-2">
                        <button type="button" class="step-trigger" role="tab" id="courseFormtrigger2" aria-controls="test-l-2">
                            <span class="bs-stepper-circle">2</span>
                            <span class="bs-stepper-label">Evaluación del Perfil</span>
                        </button>
                    </div>
                    <div class="bs-stepper-line"></div>
                    <div class="step {% if progress >= 75 and progress < 100 %}active{% endif %}" data-target="#test-l-3">
                        <button type="button" class="step-trigger" role="tab" id="courseFormtrigger3" aria-controls="test-l-3">
                            <span class="bs-stepper-circle">3</span>
                            <span class="bs-stepper-label">Resolución</span>
                        </button>
                    </div>
                    <div class="bs-stepper-line"></div>
                    <div class="step {% if progress == 100 %}active{% endif %}" data-target="#test-l-4">
                        <button type="button" class="step-trigger" role="tab" id="courseFormtrigger4" aria-controls="test-l-4">
                            <span class="bs-stepper-circle">4</span>
                            <span class="bs-stepper-label">Generar</span>
                        </button>
                    </div>
                </div>
                <!-- Stepper content -->
                <div class="bs-stepper-content mt-5">
                    <!-- Content one -->
                    <div id="test-l-1" role="tabpanel" class="fw-lighter bs-stepper-pane {% if progress <= 25 %}fade active dstepper-block{% else %}dstepper-none{% endif %}" aria-labelledby="courseFormtrigger1">
                        <div data-panel="Datos de la Reunión">
                            <div class="card">
                                <div class="card-body">
                                    <div class="container">
                                        <div class="row">
                                            <div class="col-12">
                                                    <table class="table table-bordered table-datos-reunion fw-lighter">
                                                        <thead>
                                                        {% if persona.usuario.is_superuser %}
                                                            <tr>
                                                            <th style="vertical-align: middle;padding-left: 5px;">Pk acta:</th>
                                                            <td>{{ acta.pk }}</td>
                                                        </tr>
                                                        {% endif %}
                                                        <tr>
                                                            <th style="vertical-align: middle;padding-left: 5px;">Acta:</th>
                                                            <td>N° {{ acta.numero }}</td>
                                                        </tr>
                                                        <tr>
                                                            <th style="vertical-align: middle;padding-left: 5px;">Fecha creación:</th>
                                                            <td>{{ acta.fecha_generacion|date:"d/m/Y"|default:"---" }}</td>
                                                        </tr>
                                                        <tr>
                                                            <th style="vertical-align: middle;padding-left: 5px;">Comité Académico de Posgrado: <span class="text-danger fw-bold">*</span></th>
                                                            <td>{{ acta.comite.nombre }}</td>
                                                        </tr>
                                                        <tr>
                                                            <th style="vertical-align: middle;padding-left: 5px;">Convocado por:</th>
                                                            <td>
                                                                    <div class="row">
                                                                           <div class="col-9 fs-6">
                                                                                {% if acta.convocadopor %}
                                                                                    {{ acta.convocadopor }}<br>
                                                                                    <b>{{ acta.convocadopor.persona.cargo_persona.denominacionpuesto.descripcion }}</b>
                                                                                {% else %}
                                                                                    {{ acta.get_configuracion_general_acta_seleccion_docente.convocado_por.persona.titulacion_principal_senescyt_registro.titulo.abreviatura |lower|title|default_if_none:'' }} {{ acta.get_configuracion_general_acta_seleccion_docente.convocado_por |lower|title }}<br>
                                                                                    <b>{{ acta.get_configuracion_general_acta_seleccion_docente.cargo_convocado_por}} {% if acta.get_configuracion_general_acta_seleccion_docente.tipo_cargo_convocado_por != 0 %}({{ acta.get_configuracion_general_acta_seleccion_docente.get_tipo_cargo_convocado_por_display }}){% endif %}</b>
                                                                                {% endif %}

                                                                        </div>
                                                                        <div class="col-3 fs-6">
                                                                            <div class="row">
                                                                                <div class="col d-flex justify-content-end"><a  onclick="formModal('{{ acta.id }}', 'AGREGAR CONVOCADO POR', 'addconvocadopor')"   href="Javascript:void(0);" class="btn btn-default btn-sm"><i class="fa fa-edit"></i></a></div>
                                                                            </div>
                                                                    </div>

                                                                    </div>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <th style="vertical-align: middle;padding-left: 5px;">Integrantes del Comité: <span class="text-danger fw-bold">*</span></th>
                                                            <td>
                                                                <div class="row">
                                                                    <div class="col-9 fs-6">
                                                                        {% for integrante in acta.comite.get_integrantes %}
                                                                            {% if integrante.persona.es_mujer %}👩🏻‍💻{% else %}👨🏻‍💻{% endif %}{{ integrante.persona }}/{{ integrante.cargo }} {% if integrante.tipo_cargo != 0 %}({{ integrante.get_tipo_cargo_display }}){% endif %} <br>
                                                                            {% empty %}
                                                                            <del class="text-danger">Debe registrar los integrantes del comité académico</del>
                                                                        {% endfor %}
                                                                    </div>
                                                                    <div class="col-3 fs-6">
                                                                        <div class="row">
                                                                            <div class="col d-flex justify-content-end"><a href="?action=integrante-comite-academico&pk={{ acta.comite.pk }}&idacta={{ acta.pk }}" class="btn btn-default btn-sm"><i class="fa fa-edit"></i></a></div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <th style="vertical-align: middle;padding-left: 5px;">Organizado por:</th>
                                                            <td>

                                                                 <div class="row">
                                                                    <div class="col-9 fs-6">
                                                                        {% if acta.get_configuracion_general_acta_seleccion_docente%}
                                                                            {% if acta.organizadopor %}
                                                                                 {{ acta.organizadopor }}<br>
                                                                                 <b>{{ acta.organizadopor.persona.cargo_persona.denominacionpuesto.descripcion }}</b>
                                                                             {% else %}
                                                                                     {{ acta.get_configuracion_general_acta_seleccion_docente.organizado_por.persona.titulacion_principal_senescyt_registro.titulo.abreviatura |lower|title|default_if_none:''}} {{ acta.get_configuracion_general_acta_seleccion_docente.organizado_por|lower|title }}<br>
                                                                                        <b>{{ acta.get_configuracion_general_acta_seleccion_docente.cargo_organizado_por}} {% if acta.get_configuracion_general_acta_seleccion_docente.tipo_cargo_organizado_por != 0 %}({{ acta.get_configuracion_general_acta_seleccion_docente.get_tipo_cargo_organizado_por_display }}){% endif %} </b>
                                                                                {% endif %}
                                                                        {% else %}
                                                                            PhD. Eduardo Espinoza Solís<br>
                                                                            <b>Decano de Posgrado</b>
                                                                        {% endif %}
                                                                    </div>
                                                                    <div class="col-3 fs-6">
                                                                         <div class="row">
                                                                            <div class="col d-flex justify-content-end"><a onclick="formModal('{{ acta.id }}', 'AGREGAR ORGANIZADO POR', 'addorganizadopor')" href="Javascript:void(0);" class="btn btn-default btn-sm"><i class="fa fa-edit"></i></a></div>
                                                                        </div>
                                                                    </div>
                                                                 </div>



                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <th style="vertical-align: middle;padding-left: 5px;">Lugar: <span class="text-danger fw-bold">*</span></th>
                                                            <td>{{ acta.lugar }}</td>
                                                        </tr>
                                                        {% for convocatoria in acta.get_encabezado_convocatorias_sin_repetir %}
                                                        <tr>
                                                            <td colspan="2">
                                                                <table class="table">
                                                                    <tbody>
                                                                        <tr class="bg-blue">
                                                                            <td class="bg-blue" colspan="2" >MÓDULO:  {{ convocatoria.get_horas_modulo }}</td>
                                                                        </tr>
                                                                        {% if persona.usuario.is_superuser %}
                                                                            <tr>
                                                                                <th style="vertical-align: middle;padding-left: 5px;">Pk Convoctoria:</th>
                                                                                <td>{{ acta.pk }}</td>
                                                                            </tr>
                                                                        {% endif %}
                                                                        <tr>
                                                                            <th style="vertical-align: middle;padding-left: 5px;">Número de Horas del Módulo:</th>
                                                                            <td>{{ convocatoria.get_horas_modulo.horas }}</td>
                                                                        </tr>
                                                                         <tr>
                                                                            <th style="vertical-align: middle;padding-left: 5px;">Número de Horas de aprendizaje en contacto con el docente:</th>
                                                                            <td width="500">{{ convocatoria.get_horas_componente_docente }}</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <th style="vertical-align: middle;padding-left: 5px;">Programa:</th>
                                                                            <td>{{ convocatoria.carrera }}</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <th style="vertical-align: middle;padding-left: 5px;">Cohorte:</th>
                                                                            <td>{{ convocatoria.periodo.numero_cohorte_romano }} - {{ convocatoria.periodo.anio }}</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <th style="vertical-align: middle;padding-left: 5px;">Número de Profesionales a Contratar:</th>
                                                                            <td>{{ convocatoria.vacantes }}</td>
                                                                        </tr>

                                                                        <tr>
                                                                            <th style="vertical-align: middle;padding-left: 5px;">Total de Postulantes:</th>
                                                                            <td>{{ convocatoria.get_postulantes|length }}</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <th style="vertical-align: middle;padding-left: 5px;">Número de Postulantes que no Cumplieron el Perfíl:</th>
                                                                            <td>{{ convocatoria.get_postulantes_reprobados|length }}</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <th style="vertical-align: middle;padding-left: 5px;">Postulantes Banco de Elegibles:</th>
                                                                            <td>{% for x in convocatoria.get_postulantes_banco_elegible %}{{ forloop.counter }}.- {{ x.postulante }}<br>{% empty %}0{% endfor %}</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <th style="vertical-align: middle;padding-left: 5px;">Postulantes que Cumplieron el Perfíl:
                                                                            </th>
                                                                            <td>
                                                                                {% for x in convocatoria.get_postulantes_aprobados %}{{ forloop.counter }}.- {{ x.postulante }}<br>{% empty %}0{% endfor %}
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </td>
                                                        </tr>
                                                        {% endfor %}
                                                        </thead>
                                                    </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <!-- Content two -->
                    <div id="test-l-2" role="tabpanel" class="fw-lighter bs-stepper-pane {% if progress > 25 and progress < 75 %}fade active dstepper-block{% else %}dstepper-none{% endif %}" aria-labelledby="courseFormtrigger2">
                        <!-- Card -->
                        <div data-panel="Evaluación del Perfil">
                            <div class="card">
                                <div class="card-body">
                                    <div class="container">
                                        <div class="row">
                                            <div class="col-12">
                                                <p style="text-align: justify">
                                                    En virtud a la convocatoria "SISTEMA DE SELECCIÓN DOCENTES POSGRADOS" se
                                                    procede a realizar esta reunión, con la finalidad de
                                                    analizar y revisar
                                                    los perfiles de los profesionales, que se postularon
                                                    mediante el módulo
                                                    "SISTEMA DE SELECCIÓN DOCENTES POSGRADOS”, para contratar
                                                    a <b>{{ acta.get_total_vacantes }}</b>
                                                    {% if cv.convocatoria.vacantes > 1 %}profesionales{% else %}profesional{% endif %} con la
                                                    denominación del cargo <b>{{ acta.get_convocatorias.first.convocatoria.tipodocente }}</b>,
                                                    para el programa de <b>{{ acta.get_convocatorias.first.convocatoria.carrera }}</b>, cohorte
                                                    <b>{{ acta.get_convocatorias.first.convocatoria.periodo.numero_cohorte_romano }}</b>
                                                    <br>
                                                    <br>
                                                    Se postularon en el link de <a href="https://seleccionposgrado.unemi.edu.ec/" target="_blank">https://seleccionposgrado.unemi.edu.ec/</a>
                                                    para los módulos de
                                                    <b>{% for convocatoria in acta.get_convocatorias_asignaturas %}{{ convocatoria.convocatoria.asignaturamalla.asignatura }}{% if not forloop.last %}, {% endif %}{% endfor %}</b>,
                                                    que están dentro de la Planificación de la Malla Académica.
                                                    <br>
                                                    <br>
                                                    Una vez que se postularon en el proceso de convocatoria, se procedió a realizar la selección de los profesionales, siguiendo el Baremo establecido. Puntuación que se ve reflejada en la siguiente tabla.
                                                    <br>
                                                    <textarea name="detalle" id="id_detalle" cols="15" rows="5">{{ acta.detalle| default_if_none:''}}</textarea>
                                                    <br>
                                                     Ejecutado el proceso de SELECCIÓN DOCENTES POSGRADOS quedan definidos a contratar el/los siguientes profesionales:
                                                    <br>
                                                    <br>
                                                </p>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-12 d-flex justify-content-end">
                                                <div class="btn-group">
                                                        <a href="?action=paralelos&id={{ acta.pk }}&pk_cv={{ pk_cv }}"
                                                       class="btn btn-cian-secondary btn-md rounded-1 px-3 py-2 ms-1  {% if acta.enviada_a_revision_or_lista_para_legalizar%}disabled{% endif %} tu">
                                                       <i class="bi bi-sliders"></i> Configuraciones</a>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-12 table-responsive">
                                                <table class="table table-bordered tabla_responsive tabla-eval-perfil">
                                                    <thead>
                                                    <tr>
                                                       <td>VOTOS</td>
                                                        <td>MAESTRÍA</td>
                                                        <td>PARALELO</td>
                                                        <td>COHORTE</td>
                                                        <td>MÓDULO</td>
                                                        <td>NRO. HORAS</td>
                                                        <td>FECHAS</td>
                                                        <td>HORARIO</td>
                                                        <td>PRINCIPAL/TIPO</td>
                                                        <td>ALTERNO/TIPO</td>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    {% for cv in acta.get_convocatorias %}
                                                            <tr>
                                                                <td>
                                                                    <table>
                                                                        <tbody>
                                                                        <tr>
                                                                            <th>{{ cv.get_miembro_comite_coordinador.cargo }} </th>
                                                                            <th>{% if cv.get_voto_almenos_1_coordinador %}Si{% else %} No{% endif %} </th>
                                                                        </tr>
                                                                        <tr>
                                                                            <th>{{ cv.get_miembro_comite_profesor_a_fin.cargo }} </th>
                                                                            <th>{% if cv.get_voto_almenos_1_profesor_a_fin %}Si{% else %} No{% endif %}</th>
                                                                        </tr>
                                                                        <tr>
                                                                           <th>{{ cv.get_miembro_comite_director_escuela.cargo }} </th>
                                                                           <th>{% if cv.get_voto_almenos_1_director_escuela %}Si{% else %} No{% endif %}</th>
                                                                        </tr>
                                                                        <tr>
                                                                              <th>{{ cv.get_miembro_comite_director_posgrado.cargo }}</th>
                                                                              <th>{% if cv.get_voto_almenos_1_director_posgrado %}Si{% else %} No{% endif %}</th>
                                                                        </tr>
                                                                        </tbody>
                                                                    </table>
                                                                </td>
                                                                <td>{{ cv.convocatoria.carrera }}</td>
                                                                <td class="text-center">{{ cv.paralelo }}</td>
                                                                <td>{{ cv.convocatoria.periodo.numero_cohorte_romano }} - {{ cv.convocatoria.periodo.anio }}</td>
                                                                <td>{{ cv.convocatoria.asignaturamalla.asignatura }} - {{ cv.paralelo }}</td>
                                                                <td>{{ cv.convocatoria.get_horas_modulo.horas }} <br>
                                                                <small><b>{{ cv.get_total_horas_horario_docente }}.0</b> / {{ cv.convocatoria.get_horas_componente_docente }}</small>
                                                                </td>
                                                                <td>
                                                                    {% if cv.inicio and cv.fin %}
                                                                        <b>F. INICIO:</b><br>
                                                                        {{ cv.inicio|date:"d/m/Y" }}
                                                                        <hr style="margin: 0">
                                                                        <b>F. MEDIA:</b><br>
                                                                        {% for media in cv.get_dias_intermedios %}{{ media|date:"d/m/Y" }}{% if not forloop.last %}, {% endif %}{% endfor %}
                                                                        <hr style="margin: 0">
                                                                        <b>F. FÍN:</b><br>
                                                                        {{ cv.fin|date:"d/m/Y" }}
                                                                    {% endif %}
                                                                </td>
                                                                <td>
                                                                    {% for horario in cv.get_horario %}
                                                                        <b>{{ horario.get_dia_display }}</b><br>
                                                                        <label class="label label-info">{{ horario.get_turno_dia }}</label>
                                                                        {% empty %}
                                                                        <del>Debe configurar su horario</del>
                                                                    {% endfor %}
                                                                </td>
                                                                <td>
                                                                    {% for principal in cv.get_personal_principal %}
                                                                        <i class="bi bi-person-check"></i>
                                                                        {{ principal }}
                                                                        <br>
                                                                        <br>
                                                                        <b class="fw-tbody">
                                                                        Calificación Baremo: <br>
                                                                    </b>
                                                                    <span class="fw-tbody">
                                                                        {{ principal.actaparalelo.get_puntaje_total_baremo_principal }} Pts.
                                                                    </span>
                                                                    <br>
                                                                    <br>
                                                                        {% if not forloop.last %}<br>{% endif %}
                                                                    {% endfor %}
                                                                </td>
                                                                <td>
                                                                {% for alterno in cv.get_personal_alterno %}

                                                                    <i class="bi bi-person-check"></i>
                                                                        <b class="fw-tbody">{% if alterno.tipo_id == 2 %} alterno 1 {% else %} alterno 2{% endif %}</b>
                                                                        {{ alterno }}
                                                                     <br>
                                                                    <br>
                                                                    <b class="fw-tbody">
                                                                        Calificación Baremo: <br>
                                                                    </b>
                                                                    <span class="fw-tbody">
                                                                        {% if alterno.tipo_id == 2 %}
                                                                           {{ alterno.actaparalelo.get_puntaje_total_baremo_alterno_1 }} Pts.
                                                                        {% else %}
                                                                            {{ alterno.actaparalelo.get_puntaje_total_baremo_alterno_2 }} Pts.
                                                                        {% endif %}
                                                                    </span>
                                                                    <br>

                                                                    {% if not forloop.last %}<br>{% endif %}
                                                                    {{ alterno.observacion }}
                                                                    <br>
                                                                    <br>


                                                                {% endfor %}
                                                                </td>
                                                            </tr>
                                                    {% endfor %}
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <!-- Content three -->
                    <div id="test-l-3" role="tabpanel" class="fw-lighter bs-stepper-pane {% if progress >= 75 and progress < 100 %}fade active dstepper-block{% else %}dstepper-none{% endif %}" aria-labelledby="courseFormtrigger3">
                        <!-- Card -->
                        <div data-panel="Resolución">
                            <div class="card">
                                <div class="card-body">
                                    <div class="container">
                                        <div class="row">
                                            <div class="col-12">
                                                <p style="text-align: justify">
                                                    Luego de la revisión del perfil y selección de los
                                                    profesores, que se
                                                    postularon en el proceso del SISTEMA DE SELECCION
                                                    DOCENTES POSGRADO, el
                                                    Comité Académico de <b>{{ acta.comite.nombre }}</b> aprueba la
                                                    contratación de
                                                    los <b>{{ convocatoria.vacantes }}</b> profesionales
                                                    principales establecidos
                                                    en el literal B) de la presente acta, para el Programa de
                                                    <b>{{ convocatoria.carrera }}</b>,
                                                    cohorte <b>{{ convocatoria.periodo.cohorte }} {{ convocatoria.periodo.anio }}</b>,
                                                    para el módulo de
                                                    <b>{{ convocatoria.asignaturamalla.asignatura }}</b>,
                                                    que iniciará el
                                                    {% for x in acta.get_paralelo_ganador %}
                                                        <b>{{ x.inicio.day }}
                                                            de {{ x.inicio|nombremes }}</b> hasta el
                                                        <b>{{ x.fin.day }} de {{ x.fin|nombremes }}</b>
                                                        del <b>{{ x.inicio.year }}</b> - paralelo
                                                        {{ x.paralelo }}.
                                                    {% endfor %}
                                                    <br>
                                                    <textarea name="detalle" id="id_detalle_resolucion" cols="15" rows="5">{{ acta.detalle_resolucion| default_if_none:''}}</textarea>
                                                    <br>
                                                    En el caso que el profesional principal no entregue los
                                                    documentos habilitantes para la elaboración del contrato o no acepte la invitación, se
                                                    gestionará la  contratación del docente alterno o del banco de elegibles; caso contrario se realizará una nueva convocatoria.
                                                </p>
                                                <div class="row">
                                                    <div class="col-12 d-flex justify-content-end">
                                                        <div class="btn-group">
                                                        {% if not acta.existe_plan_de_accion_director_o_cordionador_de_programa %}
                                                                  <a  onclick="autollenado_plan_de_accion({{  acta.id  }});" href="Javascript:void(0);" class="btn btn-secondary">
                                                                <i class="fa fa-reply " style="font-size:10px!important"></i>  Auto llenado
                                                            </a>
                                                        {% endif %}

                                                            <a onclick="formModal('{{ acta.id }}', 'AGREGAR PLAN DE ACCIÓN', 'addplanaccion')" href="javascript:;" class="btn btn-success">
                                                                <i class="fa fa-plus" style="font-size:10px!important"></i> Adicionar
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <table class="table">
                                                    <thead>
                                                    <tr>
                                                        <th style="width: 500px;text-align: center;vertical-align: middle;color: #0b2f44">PLAN DE ACCIÓN</th>
                                                        <th style="width: 500px;text-align: center;vertical-align: middle;color: #0b2f44">RESPONSABLE</th>
                                                        <th style="width: 100px"></th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    {% for pa in acta.get_planaccion %}
                                                        <tr>
                                                            <td>{{ pa.resolucion|safe }}</td>
                                                            <td style="font-size: 12px;padding-left:5px;vertical-align: middle">
                                                                {{ pa.integrantecomiteacademico.persona }}
                                                                <br>
                                                                <b>{{ pa.integrantecomiteacademico.cargo }}</b>
                                                            </td>
                                                            <td style="text-align: center;vertical-align: middle;">
                                                                <div class="dropdown dropdown d-inline">
                                                                    <a href="javascript:void(0);"
                                                                       class="btn-icon btn btn-ghost btn-sm rounded-circle"
                                                                       data-bs-toggle="dropdown"
                                                                       data-offset="-140"
                                                                       aria-haspopup="true"
                                                                       aria-expanded="false">
                                                                        <i class="fa fa-ellipsis-v fs-6"></i>
                                                                    </a>
                                                                    <ul class="dropdown-menu fs-6">
                                                                        <li class="dropdown-item">
                                                                            <a href='javascript:;'
                                                                               class="bloqueo_pantalla"
                                                                               onclick="formModal('{{ pa.pk }}', '{{ pa.integrantecomiteacademico.persona }}' ,'editplanaccion')"><i
                                                                                    class="fa fa-edit"></i>
                                                                                Editar</a>
                                                                        </li>
                                                                        <li class="dropdown-item">
                                                                            <a href='javascript:;'
                                                                               onclick="eliminarajax('{{ pa.pk|encrypt }}', '{{ pa.integrantecomiteacademico.persona }}', 'delplanaccion')"><i
                                                                                    class="fa fa-minus"></i>
                                                                                Eliminar</a>
                                                                        </li>
                                                                    </ul>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    {% empty %}
                                                        <tr>
                                                            <td colspan="3" class="text-center">NO TIENE
                                                                PLAN DE ACCIÓN
                                                            </td>
                                                        </tr>
                                                    {% endfor %}
                                                    </tbody>
                                                </table>
                                                <table align="center" border="0" width="100%">
                                                    <thead>
                                                    <tr>
                                                        <td colspan="2"><b class="fs-6 mb-3">APROBADO POR:<br>&nbsp;</b></td>
                                                    </tr>
                                                    {% for ica in acta.get_firmas %}
                                                        <tr class="fs-6">
                                                            <td style="width: 600px;vertical-align: middle">
                                                                {{ ica.persona }}<br>
                                                                <h6>{{ ica.cargo }} {% if ica.tipo_cargo != 0 %}({{ ica.get_tipo_cargo_display }}){% endif %}</h6>
                                                            </td>
                                                            <td style="width: 500px;vertical-align: middle;text-align: center">
                                                                ____________________________
                                                            </td>
                                                        </tr>
                                                    {% endfor %}
                                                    </thead>
                                                </table>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Content four -->
                    <div id="test-l-4" role="tabpanel" class="fw-lighter bs-stepper-pane {% if progress == 100 %}fade active dstepper-block{% else %}dstepper-none{% endif %}" aria-labelledby="courseFormtrigger4">
                        <!-- Card -->
                        <div class="card border-0 pb-0">
                            <div class="card-header border-bottom px-4 py-3">
                                <div class="d-flex justify-content-between">
                                    <h5 class="mb-0">Acta de Comité Académico de las Escuelas de Posgrado</h5>
                                    {% if not acta.archivo %}<a href="javascript:;" class="btn btn-success bloqueo_pantalla shine-button" onclick="generaracta('{{ acta.pk }}')"><i class="bi bi-printer"></i> Generar acta</a>{% endif %}
{#                                    <a href="javascript:;" class="btn btn-success bloqueo_pantalla {% if not acta.archivo %}shine-button{% endif %}" onclick="generaracta('{{ acta.pk }}')"><span class=""><i class="bi bi-printer"></i> Generar acta</span></a>#}
                                </div>
                            </div>
                            <!-- Card body -->
                            <div class="card-body text-center mt-5 mb-5"  >
                                <span class="text-danger d-none text-left" id="helptext_error_acta"></span>
                                <iframe id="id_archivoacta" src="{% if acta.archivo %}{{ acta.archivo.url }}{% endif %}" width="1000"  height="1000" ></iframe>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    <div class="modal fade static" id="itemspanel" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4><i class="fa fa-list"></i> <b class="paneltitle">FORMULARIO MODAL</b></h4>
                    <button type="button" class="close btn-close" data-bs-dismiss="modal" aria-label="Close">

                    </button>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal form-modal" autocomplete="off" method="post"
                          enctype="multipart/form-data" action="{{ request.path }}">
                        {% csrf_token %}
                        <div class="row-fluid panelbody"></div>
                    </form>
                </div>
                <div class="modal-footer" id="footermodal" style="display:none;">
                    <div style="float: right">
                        <button type="button" class="btn btn-default" data-dismiss="modal"><i
                                class="fa fa-window-close"></i> Cerrar
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block extraJs %}
    <script src="https://cdn.jsdelivr.net/npm/bs-stepper/dist/js/bs-stepper.min.js"></script>
{% endblock %}
