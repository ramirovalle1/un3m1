{% extends "basebs.html" %}
{% load sga_extras %}
{% block heading %}
    <script src="https://kit.fontawesome.com/a96c5b6f8d.js" crossorigin="anonymous"></script>
    <script type="text/javascript" src="/static/js/bootstrap-filestyle.min.js?v=1.0.1"></script>
    <script src="/static/adicionalesjs/formquestion.js?0.24"></script>

    <style>
        .nav-pills > .active > a, .nav-pills > .active > a:hover {
            color: #fff;
            background-color: #1C3247 ;
        !important;
        }

        {#.pasolisto {#}
        {#    color: #fff;#}
        {#!important;#}
        {#    background-color: #27ae60;#}
        {#!important;#}
        {# }#}

        .nav-tabs > li > a, .nav-pills > li > a {
            padding-right: 57px;
        !important;
        }

        .bordestabla {
            border: .07em solid rgba(0, 0, 0, .1);
            color: #000000;
            box-shadow: 1px 1px 3px #999;
        !important;
        }
    </style>
    <link rel="stylesheet" href="/static/eventostyle.css">
    <style>

        .result-list {
            list-style-type: none;
            margin: 0;
            padding: 0;
            width: 100%
        }

        .result-list:after, .result-list:before {
            content: '';
            display: table;
            clear: both
        }

        .result-list > li {
            border: 1px solid #ddd;
            background: #fff;
            overflow: hidden;
            position: relative;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            -webkit-flex-wrap: wrap;
            -ms-flex-wrap: wrap;
            flex-wrap: wrap;
        }

        .result-list > li:after, .result-list > li:before {
            content: '';
            display: table;
            clear: both
        }

        .result-list > li + li {
            margin-top: 10px
        }

        .result-list > li .result-image {
            width: 240px;
            padding: 0;
            overflow: hidden;
            background: #2d353c;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat
        }


        .result-list > li .result-image a {
            display: block
        }

        .result-list > li .result-image img {
            width: 100%
        }

        .result-list > li .result-image:focus, .result-list > li .result-image:hover {
            opacity: .8
        }

        .result-list > li .result-evento {
            padding: 20px;
            position: relative;
            -webkit-box-flex: 1;
            -ms-flex: 1;
            flex: 1
        }

        .result-list > li .result-evento .title {
            margin: 0 0 5px;
            font-size: 18px;
            line-height: 22px
        }


        .result-list > li .result-evento .title a {
            color: #2d353c
        }

        .result-list > li .result-evento .location {
            color: #6f8293;
        }

        .result-list > li .result-evento .decs {
            margin-bottom: 20px;
            max-height: 32px;
            overflow: hidden;
            text-overflow: ellipsis;
            line-height: 16px
        }

        .result-list > li .result-evento .btn-row {
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            -webkit-flex-wrap: wrap;
            -ms-flex-wrap: wrap;
            flex-wrap: wrap
        }

        .result-list > li .result-evento .btn-row:after, .result-list > li .result-evento .btn-row:before {
            content: '';
            display: table;
            clear: both
        }

        .result-list > li .result-evento .btn-row a {
            color: #2d353c;
            background: #f2f3f4;
            font-size: 14px;
            line-height: 18px;
            padding: 8px 10px;
            -webkit-border-radius: 4px;
            border-radius: 4px
        }

        .result-list > li .result-evento .btn-row a + a {
            margin-left: 5px
        }

        .result-list > li .result-evento .btn-row a:focus, .result-list > li .result-evento .btn-row a:hover {
            background: #d5dbe0
        }

        .result-list > li .result-price {
            width: 240px;
            font-size: 28px;
            text-align: center;
            background: #f2f3f4;
            color: #2d353c;
            padding: 20px;
            position: relative;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            -webkit-box-orient: vertical;
            -webkit-box-direction: normal;
            -ms-flex-direction: column;
            flex-direction: column;
            -webkit-box-pack: center;
            -ms-flex-pack: center;
            justify-content: center;
            -ms-flex-align: center;
            align-items: center
        }


        .result-list > li .result-price small {
            display: block;
            font-size: 11px;
            font-weight: 600;
            color: #6f8293
        }

        .result-list > li .result-price .btn {
            margin-top: 30px
        }

        .row > [class^=col-].ui-sortable {
            min-height: 50px
        }

        @-webkit-keyframes rotation {
            from {
                -webkit-transform: rotate(0);
                -moz-transform: rotate(0);
                -ms-transform: rotate(0);
                -o-transform: rotate(0);
                transform: rotate(0)
            }
            to {
                -webkit-transform: rotate(359deg);
                -moz-transform: rotate(359deg);
                -ms-transform: rotate(359deg);
                -o-transform: rotate(359deg);
                transform: rotate(359deg)
            }
        }

        @-moz-keyframes rotation {
            from {
                -webkit-transform: rotate(0);
                -moz-transform: rotate(0);
                -ms-transform: rotate(0);
                -o-transform: rotate(0);
                transform: rotate(0)
            }
            to {
                -webkit-transform: rotate(359deg);
                -moz-transform: rotate(359deg);
                -ms-transform: rotate(359deg);
                -o-transform: rotate(359deg);
                transform: rotate(359deg)
            }
        }

        @-o-keyframes rotation {
            from {
                -webkit-transform: rotate(0);
                -moz-transform: rotate(0);
                -ms-transform: rotate(0);
                -o-transform: rotate(0);
                transform: rotate(0)
            }
            to {
                -webkit-transform: rotate(359deg);
                -moz-transform: rotate(359deg);
                -ms-transform: rotate(359deg);
                -o-transform: rotate(359deg);
                transform: rotate(359deg)
            }
        }

        @keyframes rotation {
            from {
                -webkit-transform: rotate(0);
                -moz-transform: rotate(0);
                -ms-transform: rotate(0);
                -o-transform: rotate(0);
                transform: rotate(0)
            }
            to {
                -webkit-transform: rotate(359deg);
                -moz-transform: rotate(359deg);
                -ms-transform: rotate(359deg);
                -o-transform: rotate(359deg);
                transform: rotate(359deg)
            }
        }

        .single_faq {
            margin-bottom: 15px;
            padding: 15px;
        }

        .faq_question::before {
            font-size: 20px;
            line-height: 35px;
        }

        .faq_question {
            padding: 8px 10px 8px 26px;
        }

        .faq_answer {
            margin-top: 0;
        }
    </style>
    <script>
    $(function (){
        $('#removerprematricula').click(function (){
            Swal.fire({
                title: `Está a punto de eliminar su planificación`,
                text: "¿Está seguro de realizar esta acción?",
                type: 'warning',
                showCancelButton: true,
                allowOutsideClick: false,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Si, deseo hacerlo',
                cancelButtonText: 'Cancelar'
            }).then((result) => {
                if (result.value) {
                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: `{{ request.path }}`,
                        data: {
                            'action': 'delprematricula',
                            'id': '{{ miprematricula.pk|encrypt_alu }}',
                        },
                        success: function (data) {
                            $.unblockUI();
                            if (data.result === 'ok') {
                               window.location.href = '/alu_prematricula?action=prematricula'
                            } else {
                                NotificationJG.error(data.mensaje, 'Atencion!');
                            }
                        },
                        error: function () {
                            $.unblockUI();
                            smoke.alert("Error de conexión.");
                        },
                        dataType: "json"
                    });
                }
            })
        })
    })
    </script>

{% endblock %}
{% block atras %}/{% endblock %}
{% block canvas %}
    <div class='row-fluid'>
        {#        <div class='span12'>#}
        {#            <h4><i class="fa fa-check-circle"></i> {{ title }}</h4><br>#}
        {#            <h5><i class="fa fa-calendar-o"></i> Periodo: {{ miprematricula.periodo }}</h5>#}
        {#            <h5 id='inscripcion' valor={{ inscripcion.id }}><i class="fa fa-user"></i> Estudiante: {{ inscripcion.persona }}</h5>#}
        {#            <h5><i class="fa fa-mortar-board"></i> Carrera: {{ inscripcion.carrera }}</h5>#}
        {#            <h5><i class="fa fa-project-diagram"></i> Malla: {{ malla }}</h5>#}
        {#            <h5><i class="fa fa-dollar-sign"></i> Valor de matricula a pagar será: <span class="label label-info" style="font-size: 20px">${{ miprematricula.valorpagoaprox|floatformat:2 }}</span></h5>#}
        {#        </div>#}
        <div class="page-content-inner"
             style="background-image: url('/static/images/aok/banner-tarjeta3.png?0.1');
                         background-size: cover; border-radius: 20px; border-color: #002E45 !important; padding: 0 !important;">
            <div class="page-content-inner uk-light pb-0">

                <div class="profile-layout">
                    <div class="profile-layout-avature">
                        <br><br><br><br>
                        <div class="user-profile-photo">
                            {% if persona.foto %}
                                <img src="https://sga.unemi.edu.ec{{ persona.foto.foto.url }}" onerror="this.onerror=null;this.src='/static/images/image.png'" class="img-circle profile_info_image">
                            {% else %}
                                <img src="/static/images/iconos/{% if persona.sexo.id == 2 %}hombre.png{% else %}mujer.png{% endif %}" onerror="this.onerror=null;this.src='/static/images/image.png'" class="img-circle profile_info_image">
                            {% endif %}
                        </div>


                    </div>
                    <div class="profile-layout-content" style="color: #ffffff">
                        <h1 style="text-align: center"><i class="fa fa-check-circle"></i> {{ title }}</h1><hr>
                        <h2 id='inscripcion' valor={{ inscripcion.id }} >{{ persona }}</h2>
                        <p><i class="fa fa-envelope"></i> Email Inst.: {{ persona.emailinst }} &nbsp;&nbsp; <i class="fa fa-envelope"></i> Email: {{ persona.email }}</p>
                        <p><i class="fa fa-phone"></i> Telf.: {{ persona.telefono }}</p>
                        <p><i class="fa fa-map-marker"></i> Ciudad.: {{ persona.canton.nombre }} &nbsp;&nbsp; <i class="fa fa-map-marker"></i> Dirección.: {{ persona.direccion_corta }}</p>
                        <p><i class="fa fa-calendar-o"></i> Periodo: {{ periodo }}&nbsp;&nbsp; <i class="fa fa-mortar-board"></i> Carrera: {{ inscripcion.carrera }}</p>
                        <p><i class="fa fa-project-diagram"></i> Malla: {{ malla }}</p>
                        {% if tienedeuda %}
                            <p style="font-size: 20px"><i class="fa fa-dollar-sign"></i> Valor de matricula pendiente de pago: <span class="label label-success" style="font-size: 20px; border-radius: 20px; padding: 7px;">$ {{ tienedeuda|floatformat:2 }}</span></p>
                        {% endif %}
{#                        {% if miprematricula.valorpagoaprox > 0 %}#}
                            <p style="font-size: 20px"><i class="fa fa-dollar-sign"></i> Valor de matricula por esta planificación: <span class="label label-success" style="font-size: 20px; border-radius: 20px; padding: 7px;">$ {{ miprematricula.valorpagoaprox|floatformat:2 }}</span></p>
{#                        {% endif %}#}
                        {% if tienedeuda %}
                            <p style="font-size: 20px"><i class="fa fa-dollar-sign"></i> Valor de matrícula Total: <span class="label label-success" style="font-size: 20px; border-radius: 20px; padding: 7px;">$ {{ total|floatformat:2 }}</span></p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
{#    <table>#}
{#    <tr>#}
{#        <td><span class="label label-warning" style="font-size: 20px"><i class="fa fa-warning"></i>  </span></td>#}
{#    </tr>#}
{#    </table>#}
    <div class="alert alert-warning">
        <p style="font-size: 20px"><i class="fa fa-warning"></i> <b>NOTA: Los rubros mostrados por concepto de matrícula es un valor referencial que tendrá que cancelar posterior a realizar la matriculación ordinaria a partir del 9 de mayo del 2022</b></p>
    </div>
    <br><br>
    <div class='row-fluid'>
        <div class='span12'>
            <div class="row-fluid">
                <div style="text-align: left; float: left; width: 100%">
                    <a href="javascript:;" id="removerprematricula" class="btn btn-danger btn-large" type="button" idplan = "{{ prematricula.pk|encrypt_alu }}"> <i class="fa fa-trash"></i> Eliminar Planificación</a>
{#                    <a href="javascript:;" class="btn btn-danger btn-large" id="borrar_prematricula"><i class="fa fa-trash"></i> ELIMINAR PLANIFICACIÓN</a>#}
                </div>
            </div>
            <div class='row-fluid'>
                <div class='span12'>
                    {#                    <table class='table table-bordered table-striped bordestabla uk-width-1-1 tabla_asignaturas'>#}
                    <table class='table'>
                        <tr>
                            <th><i class="fa fa-list"></i> Asignatura</th>
                            <th style="text-align: center"><i class="fa fa-code-fork"></i> Modalidad de Impartición</th>
                            <th style="text-align: center"><i class="fa fa-sort-numeric-asc"></i> Nivel</th>
                            <th style="width: 300px; text-align: center"><i class="fa fa-tag"></i> Eje Formativo</th>
                            <th style="text-align: center; width: 150px"><i class="fa fa-coins"></i> Cr&eacute;ditos</th>
                            <th style="width: 100px; text-align: center;"><i class="fa fa-clock"></i> Horas</th>
                        </tr>
                        {% for prematricula in miprematricula.prematriculaasignatura.all %}
                            <tr>
                                <td>
                                    {{ prematricula.asignatura }}<br>
                                    {#                                    <b><span class="badge badge-info">{{ prematricula.nivel.sesion.nombre }}</span></b>#}
                                </td>
                                <td style="vertical-align: middle; text-align: center">
                                    {% if prematricula.modalidad == 1 %}
                                        <b><span class="badge badge-success"> ESTA ASIGNATURA <br> SE IMPARTIRÁ DE FORMA <br>PRESENCIAL</span></b>
                                    {% else %}
                                        <b><span class="badge badge-info"> ESTA ASIGNATURA <br> SE IMPARTIRÁ DE FORMA <br>VIRTUAL</span></b>
                                    {% endif %}
                                </td>
                                {% with asignaturamlla=prematricula.asignatura|args:malla|call:"asignatura_malla_vigente_carrera" %}
                                    <td style="text-align: center;">
                                        {{ asignaturamlla.nivelmalla }}
                                    </td>
                                    <td style="text-align: center;">
                                        {{ asignaturamlla.ejeformativo }}
                                    </td>
                                    <td style="text-align: center;">
                                        {{ asignaturamlla.creditos }}
                                    </td>
                                    <td style="text-align: center;">
                                        {{ asignaturamlla.horas }}
                                    </td>
                                {% endwith %}

                            </tr>
                        {% endfor %}
                    </table>
                </div>
                <div class="row-fluid">
                    <div style="text-align: right; float: left; width: 100%">
                        {% if materiasmalla %}
                            <a href="javascript:;" class="btn btn-info btn-large" id="btnmatricular">PREMATRICULARSE</a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
{% endblock %}