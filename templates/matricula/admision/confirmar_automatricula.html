{% extends "basebs.html" %}
{% load sga_extras %}
{% block heading %}
    <script type="text/javascript" src='/static/js/jquery.validationEngine.js?v=1.0.0'></script>
    <script type="text/javascript" src='/static/js/jquery.validationEngine-es.js?v=1.0.0' ></script>
    <link type='text/css' rel='stylesheet' href="/static/css/validationEngine.jquery.css?v=1.0.0"/>
    <script type="text/javascript" src="/static/js/bootstrap-filestyle.min.js?v=1.0.1"> </script>
    <script type="text/javascript" src='/static/js/select2.js?v=1.0.0' ></script>
    <link type='text/css' rel='stylesheet' href="/static/css/select2.css?v=1.0.0"/>
    <link rel="stylesheet" href="/static/dropify/css/dropify.min.css">
    <script type="text/javascript" src='/static/dropify/js/dropify.min.js?v=1.0.0'></script>
    <link rel="stylesheet" href="/static/eventostyle.css">
    <!--<link rel="stylesheet" href="/static/eventoframework.css">-->
    <link href="/static/css/table-responsive.css?1.0.0" type="text/css" rel="stylesheet" />
    <style>
        .radio label,
        .checkbox label {
            display: inline-block;
            cursor: pointer;
            color: #0074D9;
            position: relative;
            padding: 5px 15px 5px 51px;
            font-size: 1em;
            border-radius: 5px;
            -webkit-transition: all 0.3s ease;
            -o-transition: all 0.3s ease;
            transition: all 0.3s ease; }
        .radio label:hover,
        .checkbox label:hover {
            background: rgba(255, 65, 54, 0.1); }
        .radio label:before,
        .checkbox label:before {
            content: "";
            display: inline-block;
            width: 17px;
            height: 17px;
            position: absolute;
            left: 15px;
            border-radius: 50%;
            background: none;
            border: 3px solid #0074D9; }
        input[type="radio"] {
            display: none; }
        input[type="radio"]:checked + label:before {
            display: none; }
        input[type="radio"]:checked + label {
            padding: 5px 15px;
            background: #0074D9;
            border-radius: 2px;
            color: #fff; }
        .checkbox label:before {
            border-radius: 3px; }
        .checkbox input[type="checkbox"] {
            display: none; }
        .checkbox input[type="checkbox"]:checked + label:before {
            display: none; }
        .checkbox input[type="checkbox"]:checked + label {
            background: #0074D9;
            color: #fff;
            padding: 5px 15px; }

        .row > [class^=col-].ui-sortable {
            min-height: 50px
        }
        @-webkit-keyframes rotation {
            from {
                -webkit-transform: rotate(0);
                -moz-transform: rotate(0);
                -ms-transform: rotate(0);
                -o-transform: rotate(0);
                transform: rotate(0)
            }
            to {
                -webkit-transform: rotate(359deg);
                -moz-transform: rotate(359deg);
                -ms-transform: rotate(359deg);
                -o-transform: rotate(359deg);
                transform: rotate(359deg)
            }
        }

        @-moz-keyframes rotation {
            from {
                -webkit-transform: rotate(0);
                -moz-transform: rotate(0);
                -ms-transform: rotate(0);
                -o-transform: rotate(0);
                transform: rotate(0)
            }
            to {
                -webkit-transform: rotate(359deg);
                -moz-transform: rotate(359deg);
                -ms-transform: rotate(359deg);
                -o-transform: rotate(359deg);
                transform: rotate(359deg)
            }
        }

        @-o-keyframes rotation {
            from {
                -webkit-transform: rotate(0);
                -moz-transform: rotate(0);
                -ms-transform: rotate(0);
                -o-transform: rotate(0);
                transform: rotate(0)
            }
            to {
                -webkit-transform: rotate(359deg);
                -moz-transform: rotate(359deg);
                -ms-transform: rotate(359deg);
                -o-transform: rotate(359deg);
                transform: rotate(359deg)
            }
        }

        @keyframes rotation {
            from {
                -webkit-transform: rotate(0);
                -moz-transform: rotate(0);
                -ms-transform: rotate(0);
                -o-transform: rotate(0);
                transform: rotate(0)
            }
            to {
                -webkit-transform: rotate(359deg);
                -moz-transform: rotate(359deg);
                -ms-transform: rotate(359deg);
                -o-transform: rotate(359deg);
                transform: rotate(359deg)
            }
        }

        .single_faq {
            margin-bottom: 15px;
            padding: 15px;
        }

        .faq_question::before {
            font-size: 20px;
            line-height: 35px;
        }

        .faq_question {
            padding: 8px 10px 8px 26px;
        }

        .faq_answer {
            margin-top: 0;
        }
        .terminos ul {
            list-style: none;
        }
        .terminos ul li::before {
            /*content: "✅";*/

            display: inline-block;
            margin-right: 0.2rem;
        }
        .terminos ul li {
            padding-bottom: 2ex;
            list-style-type: disc;
        }

        .terminos ol {
            list-style: none;
        }

        .terminos ol li::before {
            /*content: "✅";*/

            display: inline-block;
            margin-right: 0.2rem;
        }
        .terminos ol li {
            padding-bottom: 2ex;
            list-style-type: decimal;
        }
    </style>
    <script type="text/javascript">


        var eliminar_alertas = function(){
            setInterval(function() {
                $('.help-text', $("#{{ frmName }}")).html("");
            }, 8000);
        };


        var Controller = {
            init: function(){
                var self = this;
                $("#frmconfirmarautomatriculaadmision").validationEngine({autoHidePrompt:true, autoHideDelay:1000 });
                $("#id_fechaingresoppl").datepicker({format:"dd-mm-yyyy"}).on('changeDate', function(ev){ $(this).datepicker('hide'); });
                $("select").select2({minimumResultsForSearch: 20, width: '100%'});
                eliminar_alertas();
                $('#admision_documento').dropify({
                    messages: {
                        default: 'Arrastre y suelte el archivo de la cédula/pasaporte o haga clic aquí.',
                        replace: 'Arrastre y suelte el archivo de la cédula/pasaporte o haga clic aquí.',
                        remove: 'Eliminar',
                        error: 'Ocurrió un error!'
                    },
                    error: {
                        fileSize: "El tamaño del archivo debe ser máximo (4MB).",
                        fileExtension: "Sólo puede subir los archivos con las extensiones .pdf"
                    },
                });

                $('#admision_bachiller').dropify({
                    messages: {
                        default: 'Arrastre y suelte el archivo de la acta de grado o haga clic aquí.',
                        replace: 'Arrastre y suelte el archivo de la acta de grado o haga clic aquí.',
                        remove: 'Eliminar',
                        error: 'Ocurrió un error!'
                    },
                    error: {
                        fileSize: "El tamaño del archivo debe ser máximo (10MB).",
                        fileExtension: "Sólo puede subir los archivos con las extensiones .pdf"
                    },
                });

                $('#id_archivoppl').dropify({
                    messages: {
                        default: 'Arrastre y suelte el archivo o haga clic aquí.',
                        replace: 'Arrastre y suelte el archivo o haga clic aquí.',
                        remove: 'Eliminar',
                        error: 'Ocurrió un error!'
                    },
                    error: {
                        fileSize: "El tamaño del archivo debe ser máximo (10MB).",
                        fileExtension: "Sólo puede subir los archivos con las extensiones .pdf"
                    },
                });

                $('#id_documento_discapacidad').dropify({
                    messages: {
                        default: 'Arrastre y suelte el archivo o haga clic aquí.',
                        replace: 'Arrastre y suelte el archivo o haga clic aquí.',
                        remove: 'Eliminar',
                        error: 'Ocurrió un error!'
                    },
                    error: {
                        fileSize: "El tamaño del archivo debe ser máximo (4MB).",
                        fileExtension: "Sólo puede subir los archivos con las extensiones .pdf"
                    },
                });

                $("[name='admision_ppl']").change(function (){
                    let valor =  $(this).val();
                    $("#id_fechaingresoppl, #id_centrorehabilitacion, #id_lidereducativo, #id_correolidereducativo, #id_telefonolidereducativo").removeClass("validate[required]");
                    $("#id_correolidereducativo").removeClass("validate[custom[email],correoprivado[@{{ dominio }}]]");
                    $(".contenedor_ppl").hide();
                    if (valor == 1){
                        $("#id_fechaingresoppl, #id_centrorehabilitacion, #id_lidereducativo, #id_correolidereducativo, #id_telefonolidereducativo").addClass("validate[required]");
                        $("#id_correolidereducativo").addClass("validate[custom[email],correoprivado[@{{ dominio }}]]");
                        $(".contenedor_ppl").show();
                    }
                });
                $("#id_centrorehabilitacion, #id_lidereducativo, #id_correolidereducativo, #id_telefonolidereducativo, #id_observacionppl").css({'text-transform': 'none'});

                $("[name='admision_discapacidad']").change(function (){
                    let valor =  $(this).val();
                    $("#id_tipodiscapacidad, #id_porcientodiscapacidad, #id_carnetdiscapacidad, #id_institucionvalida, #id_archivo").removeClass("validate[required]");
                    $("#id_porcientodiscapacidad").removeClass("validate[required, custom[integer], min[1], max[100]");
                    $(".contenedor_discapacidad").hide();
                    if (valor == 1){
                        $("#id_tipodiscapacidad, #id_porcientodiscapacidad, #id_carnetdiscapacidad, #id_institucionvalida, #id_archivo").addClass("validate[required]");
                        $("#id_porcientodiscapacidad").addClass("validate[required, custom[integer], min[1], max[100]");
                        $(".contenedor_discapacidad").show();
                    }

                });
                $("#acta_bachiller").prop("checked", true);
                $("#acta_bachiller").trigger("change");
                $("#ppl_si").prop("checked", true);
                $("#ppl_si").trigger("change");
                $("#discapacidad_si").prop("checked", true);
                $("#discapacidad_si").trigger('change');


                //$(":file").filestyle({"input": false});

                $("#detallematriculaadmision").click(function() {
                    uiModalViewDetalle.open();
                });

                $(".action_aceptar").click(function (){
                    bloqueointerface();
                    $("#frmconfirmarautomatriculaadmision").validationEngine('attach',{ scroll: false });
                    var valid = $("#frmconfirmarautomatriculaadmision").validationEngine('validate', { scroll: false });
                    console.log(valid);
                    if (!valid){
                        setTimeout(function() {
                            $('.help-text', self.$modalForm).each(function () {
                                var field = $(this);
                                if (field.attr('alert')) {
                                    field.html(field.attr('alert'));
                                } else {
                                    field.html('');
                                }
                            });
                        }, 8000);
                        $.unblockUI();
                        Swal.fire({
                            toast: true,
                            position: 'top-end',
                            type: 'error',
                            title: 'Favor complete los campos obligatorios',
                            showConfirmButton: false,
                            timer: 6000
                        })
                        return false;
                    }
                    $('.datepicker', self.$modalForm).css({"display": "none"});
                    $('.bootstrap-timepicker-widget', self.$modalForm).css({"display": "none"});

                    $('.controls input', self.$modalForm).each(function(){
                        if ($(this).attr('type')=='text'){
                            $(this).val($(this).val().trim());
                        }
                        if ($(this).attr('type')!='file'){
                            if ($(this).css('text-transform')=='uppercase'){
                                if ($(this).attr('type')!='password'){
                                    $(this).val($(this).val().toUpperCase());
                                }
                            }
                        }
                    });
                    $.unblockUI();
                    uiModalConfirmar.open();
                });



                /*$("#frmconfirmarautomatriculaadmision").on("submit", function(e){
                    e.preventDefault();
                    return;
                });
                $(".action-aceptar", $("#confirmarautomatriculaadmision")).click(function (){
                    var acepto_terminos = $('[name="acepta-terminos"]', $("#confirmarautomatriculaadmision")).is(':checked');
                    console.log(acepto_terminos);
                    if (acepto_terminos) {
                        smoke.confirm("¿Está seguro de aceptar la matricula ?", function (e) {
                            if (e) {
                                bloqueointerface();
                                //$("#confirmarautomatriculaadmision").modal("hide");
                                frmData = new FormData($("#frmconfirmarautomatriculaadmision", $("#confirmarautomatriculaadmision"))[0]);
                                frmData.append('action', 'aceptarAutomatriculaadmision');
                                frmData.append('termino', acepto_terminos ? 1 : 0);
                                frmData.append('id', parseInt({{ inscripcion.id}}));
                                console.log(frmData);
                                $.ajax({
                                    type: "POST",
                                    url: "/",
                                    data: frmData,
                                    cache: false,
                                    contentType: false,
                                    processData: false,
                                    dataType: "json",
                                    success: function (data) {
                                        if (data.result == 'ok') {
                                            //$("#contenedorConfigCareers").html(data.contenido);
                                            NotificationJG.success(data.mensaje, "Exitoso");
                                            $("#confirmarautomatriculaadmision").modal("hide");
                                            $.unblockUI();
                                            //smoke.alert("Para ver el detalle de sus asignaturas puede acceder al modulo de MIS MATERIAS")
                                        } else {
                                            NotificationJG.error(data.mensaje, "Error")
                                            $.unblockUI();
                                        }
                                    },
                                    error: function(jqXHR, textStatus, errorThrown) {
                                        $.unblockUI();
                                        {#smoke.alert("Error de conexión.");#}
                                        var msg = '';
                                        if (jqXHR.status === 0) {
                                            msg='Not connect: Verify Network.';
                                        } else if (jqXHR.status == 404) {
                                            msg='Requested page not found [404]';
                                        } else if (jqXHR.status == 500) {
                                            msg='Internal Server Error [500].';
                                        } else if (textStatus === 'parsererror') {
                                            msg='Requested JSON parse failed.';
                                        } else if (textStatus === 'timeout') {
                                            msg='Time out error.';
                                        } else if (textStatus === 'abort') {
                                            msg='Ajax request aborted.';
                                        } else {
                                            msg='Uncaught Error: ' + jqXHR.responseText;
                                        }
                                        //smoke.alert("Error al enviar los datos: " + msg);
                                        NotificationJG.error("Error al enviar los datos: " + msg);
                                    },
                                });
                            }
                        }, {
                            ok: "SI,SEGURO",
                            cancel: "NO,CANCELAR",
                            classname: "custom-class",
                            reverseButtons: true
                        });
                    }else{
                        NotificationJG.warning("Favor acepte los terminos de la matrícula", "Advertencia");
                    }

                });

                $(".action-rechazar", $("#confirmarautomatriculaadmision")).click(function (){
                    smoke.confirm("Estimado aspirante, al rechazar su matrícula se liberará un cupo que ya fue asignado, por lo tanto es responsabilidad del aspirante la acción a realizar. <br> ¿Está seguro de recharzar la matrícula?", function (e) {
                        if (e) {
                            //bloqueointerface();
                            $("#confirmarautomatriculaadmision").modal("hide");
                            $.ajax({
                                type: "POST",
                                url: "/",
                                data: {
                                    'action': 'rechazoAutomatriculaadmision',
                                    'id': parseInt({{ inscripcion.id }})
                                },
                                dataType: "json",
                                success: function (data) {
                                    if (data.result == 'ok') {
                                        //$("#contenedorConfigCareers").html(data.contenido);
                                        NotificationJG.success(data.mensaje, "Exitoso");
                                        $("#confirmarautomatriculaadmision").modal("hide");
                                        $.unblockUI();
                                        //smoke.alert("Para ver el detalle de sus asignaturas puede acceder al modulo de MIS MATERIAS")
                                    } else {
                                        NotificationJG.error(data.mensaje, "Error")
                                        $.unblockUI();
                                    }
                                },
                                error: function(jqXHR, textStatus, errorThrown) {
                                    $.unblockUI();
                                    {#smoke.alert("Error de conexión.");#}
                                    var msg = '';
                                    if (jqXHR.status === 0) {
                                        msg='Not connect: Verify Network.';
                                    } else if (jqXHR.status == 404) {
                                        msg='Requested page not found [404]';
                                    } else if (jqXHR.status == 500) {
                                        msg='Internal Server Error [500].';
                                    } else if (textStatus === 'parsererror') {
                                        msg='Requested JSON parse failed.';
                                    } else if (textStatus === 'timeout') {
                                        msg='Time out error.';
                                    } else if (textStatus === 'abort') {
                                        msg='Ajax request aborted.';
                                    } else {
                                        msg='Uncaught Error: ' + jqXHR.responseText;
                                    }
                                    //smoke.alert("Error al enviar los datos: " + msg);
                                    NotificationJG.error("Error al enviar los datos: " + msg);
                                },
                            });
                        }
                    }, {
                        ok: "SI,SEGURO",
                        cancel: "NO,CANCELAR",
                        classname: "custom-class",
                        reverseButtons: true
                    });

                })*/
            }
        };
        var uiModalConfirmar = {
            init: function (){
                var self = this;
                self.$confirmarAutomatricula = $("#confirmarAutomatricula");

                $('.action-close', self.$confirmarAutomatricula).click(function(){
                    self.close();
                });
                $('.action-save', self.$confirmarAutomatricula).click(function(){
                    self.actionAceptar();
                });

                $(".action_desistir").click(function (){
                    Swal.fire({
                        title: `NOTIFICACIÓN`,
                        text: `{% if persona.sexo.id == 1 %}Estimada{% else %}Estimado{% endif %} {{ persona }}, con esta acción usted estará liberando un cupo. ¿Está {% if persona.sexo.id == 1 %}segura{% else %}seguro{% endif %} {{ persona }} de rechazar la matrícula?`,
                        type: 'warning',
                        icon: 'warning',
                        showCancelButton: true,
                        allowOutsideClick: false,
                        confirmButtonColor: '#3085d6',
                        cancelButtonColor: '#d33',
                        confirmButtonText: 'Si, seguro',
                        cancelButtonText: 'No, cancelar'
                    }).then((result) => {
                        if (result.value) {
                            bloqueointerface();
                            $.ajax({
                                type: "POST",
                                url: "/alu_matricula/admision",
                                data: {
                                    'action': 'rechazoAutomatricula',
                                    'id': parseInt({{ inscripcion.id}}),
                                },
                                success: function (data) {
                                    if (data.result == 'ok') {
                                        self.close();
                                        $.unblockUI();
                                        Swal.fire({
                                            title: `NOTIFICACIÓN`,
                                            text: `{% if persona.sexo.id == 1 %}Estimada{% else %}Estimado{% endif %} {{ persona }}, le informamos que el proceso de aceptación de matrícula ha finalizado.`,
                                            type: 'success',
                                            icon: 'success',
                                            showCancelButton: false,
                                            allowOutsideClick: false,
                                            confirmButtonColor: '#3085d6',
                                            cancelButtonColor: '#d33',
                                            confirmButtonText: 'Aceptar',
                                            cancelButtonText: 'Cancelar'
                                        }).then((result) => {
                                            if (result.value) {
                                                bloqueointerface();
                                                location.href = "/"
                                            }
                                        }).catch(error => {

                                            NotificationJG.error(error);
                                        });

                                    } else {
                                        NotificationJG.error(data.mensaje, "Error")
                                        $.unblockUI();
                                    }
                                },
                                dataType: "json"
                            });
                        }
                    }).catch(error => {
                        NotificationJG.error(error);
                    });
                })
            },
            actionAceptar: function (){
                var self = this;
                var acepto_terminos = $('[name="acepta-terminos"]', self.$confirmarAutomatricula).is(':checked');
                if (!acepto_terminos){
                    Swal.fire({
                        toast: true,
                        position: 'top-end',
                        type: "error",
                        title: "Para continuar, favor acepte los términos y condiciones",
                        showConfirmButton: false,
                        timer: 3500
                    });
                    return false;
                }
                Swal.fire({
                    title: `NOTIFICACIÓN`,
                    text: `{% if persona.sexo.id == 1 %}Estimada{% else %}Estimado{% endif %} {{ persona }}, ¿Está seguro de aceptar la matrícula?`,
                    type: 'warning',
                    icon: 'warning',
                    showCancelButton: true,
                    allowOutsideClick: false,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'Si, seguro',
                    cancelButtonText: 'No, cancelar'
                }).then((result) => {
                    if (result.value) {
                        bloqueointerface();
                        var frmData = new FormData($("#frmconfirmarautomatriculaadmision")[0]);
                        frmData.append('action', 'aceptarAutomatricula');
                        frmData.append('termino', acepto_terminos ? 1 : 0);
                        $.ajax({
                            type: "POST",
                            url: "/alu_matricula/admision",
                            data: frmData,
                            cache: false,
                            contentType: false,
                            processData: false,
                            dataType: "json",
                            success: function (data) {
                                self.close();
                                $.unblockUI();
                                if (data.result == 'ok') {
                                    Swal.fire({
                                        title: `NOTIFICACIÓN`,
                                        text: `{% if persona.sexo.id == 1 %}Estimada{% else %}Estimado{% endif %} {{ persona }}, le informamos que el proceso de aceptación de matrícula ha finalizado.`,
                                        type: 'success',
                                        icon: 'success',
                                        showCancelButton: false,
                                        allowOutsideClick: false,
                                        confirmButtonColor: '#3085d6',
                                        cancelButtonColor: '#d33',
                                        confirmButtonText: 'Aceptar',
                                        cancelButtonText: 'Cancelar'
                                    }).then((result) => {
                                        if (result.value) {
                                            bloqueointerface();
                                            location.href = "/"
                                        }
                                    }).catch(error => {
                                        NotificationJG.error(error);
                                    });

                                } else {

                                    Swal.fire({
                                        title: `NOTIFICACIÓN`,
                                        text: data.mensaje,
                                        type: 'error',
                                        icon: 'error',
                                        showCancelButton: false,
                                        allowOutsideClick: false,
                                        confirmButtonColor: '#3085d6',
                                        cancelButtonColor: '#d33',
                                        confirmButtonText: 'Aceptar',
                                        cancelButtonText: 'Cancelar'
                                    }).then((result) => {

                                    }).catch(error => {
                                        NotificationJG.error(error);
                                    });
                                }
                            },
                        });
                    }
                }).catch(error => {
                    NotificationJG.error(error);
                });
            },
            close: function (){
                var self = this;
                self.$confirmarAutomatricula.modal('hide');
            },
            open: function(){
                var self = this;
                //bloqueointerface();
                {% if periodomatricula.valida_terminos %}
                    self.$confirmarAutomatricula.modal({backdrop:'static', width: '60%'}).modal('show');
                {% else %}
                    self.$confirmarAutomatricula.modal({backdrop:'static', width: '40%'}).modal('show');
                {% endif %}
                $("#acepta-terminos", self.$confirmarAutomatricula).prop("checked", false);
                $("#acepta-terminos", self.$confirmarAutomatricula).trigger("change");
                console.log($("#acepta-terminos", self.$confirmarAutomatricula).is(":checked"));
            },
        }

        var uiModalViewDetalle = {
            init: function (){
                var self = this;
                self.$viewDetalleValores = $("#modaldetalle_valores");
                $('.action-close', self.$viewDetalleValores).click(function () {
                    self.close();
                });

            },
            close: function (){
                var self = this;
                self.$viewDetalleValores.modal('hide');
            },
            open: function(){
                var self = this;
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/alu_matricula/admision",
                    data: {'action':'detalle_valores', 'id': parseInt('{{ matricula.id}}')},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result=='ok'){
                            $(".modal-body", self.$viewDetalleValores).html(data.html);
                            self.$viewDetalleValores.modal({"backdrop":"static", "width": "80%"}).modal("show");
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            },
        }
        $(function (){
            Controller.init();
            uiModalConfirmar.init();
            uiModalViewDetalle.init();
        });
    </script>
{% endblock %}
{% block atras %}/{% endblock %}
{% block canvas %}
    <div class='row-fluid'>
        <div class='span12'>
            <h3>{{ title }}</h3>
        </div>
    </div>
    <div class="row-fluid">
        <div class="span12">
            <div class='span8'>
                <div class="media">
                    <a class="pull-left hidden-phone" href="javascript:;">
                        {% if persona.foto %}
                            <img src="{{ persona.foto.foto.url }}" onerror="this.onerror=null;this.src='/static/images/image.png'" class="media-object img-circle" width="140" height="140">
                        {% else %}
                            <img src="/static/images/iconos/{% if persona.sexo.id == 2 %}hombre.png{% else %}mujer.png{% endif %}" onerror="this.onerror=null;this.src='/static/images/image.png'" class="media-object img-circle" width="140" height="140">
                        {% endif %}
                    </a>
                    <div class="media-body" style="color: #1C3247  !important; padding-left: 20px">
                        <h3 class="media-heading">{{ persona }} ({{ inscripcion.id }})</h3>
                        <p><b><i class="fa fa-envelope"></i> Email Inst.:</b> {{ persona.emailinst }} &nbsp;&nbsp; <b><i class="fa fa-envelope"></i> Email:</b> {{ persona.email }} &nbsp;&nbsp; <b><i class="fa fa-phone"></i> Telf.:</b> {{ persona.telefono }}</p>
                        <p><b><i class="fa fa-map-marker"></i> Ciudad:</b> {{ persona.canton.nombre }} &nbsp;&nbsp; <b><i class="fa fa-map-marker"></i> Dirección:</b> {{ persona.direccion_corta }}</p>
                        <p><b><i class="fa fa-graduation-cap"></i> Carrera:</b> {{ inscripcion.carrera }} &nbsp;&nbsp; <b><i class="fa fa-cubes"></i> Malla:</b> {{ inscripcionmalla.malla }}</p>
                        <p><b><i class="fa fa-calendar-o"></i> Periodo:</b> {{ periodomatricula.periodo }} &nbsp; <b><i class="fa fa-check-circle"></i> Nivel malla:</b> {{ minivel.nombre }} (Actual)</p>
                        <p><b><i class="fa fa-group"></i> Grupo Socioeconómico:</b> <span class="label label-info smaller">{{ fichasocioeconomicainec }}</span> &nbsp; {% if inscripcion.itinerario %}<b><i class="fa fa-gear"></i> Itinerario:</b> <label class="label label-info smaller">ITINERARIO {{ inscripcion.itinerario }}</label>{% endif %}</p>
                    </div>
                </div>
            </div>
            <div class='span4' style="text-align: right">
                <a class="btn btn-success btn-large action_aceptar"><i class="fa fa-plus-circle"></i> ACEPTAR MATRÍCULA </a>
                <a class="btn btn-danger btn-large action_desistir"><i class="fa fa-close"></i> RECHAZAR MATRÍCULA </a>
                {% if valor_pagados > 0 or valor_pendiente > 0 %}
                    <div class="alert alert-error" style="text-align: center !important;">
                        <h4>En matricula se ha generado rubros: $ {{ valor_pendiente|floatformat:2 }}</h4>
                    </div>
                    <a href="javascript:;" id="detallematriculaadmision" class='btn btn-warning btn-large detallematriculaadmision'><span class="fa fa-table" ></span> Detalle de los valores generados en la matriculación</a>
                {% endif %}

            </div>
        </div>
    </div>
    <div class="row-fluid">
        <div class="span12">
            <h5>Detalle de matrícula</h5>
            <table class='table table-bordered table-striped' >
                <thead>
                <tr>
                    <th style="text-align: center; vertical-align: middle; width: 5%"><strong>#</strong></th>
                    <th style="text-align: center; vertical-align: middle; width: 15%"><strong>Carrera</strong></th>
                    <th style="text-align: center; vertical-align: middle; width: 15%"><strong>Asignatura</strong></th>
                    <th style="text-align: center; vertical-align: middle; width: 8%"><strong>Nivel</strong></th>
{#                    <th style="text-align: center; vertical-align: middle; width: 8%"><strong>Paralelo</strong></th>#}
                    <th style="text-align: center; vertical-align: middle; width: 10%"><strong>Sección</strong></th>
                </tr>
                </thead>
                <tbody>
                {% for materiasignada in materiassignadas %}
                    <tr>
                        <td style="text-align: center; vertical-align: middle">{{ forloop.counter }}</td>
                        <td style="text-align: left; vertical-align: middle">{{ materiasignada.matricula.inscripcion.carrera.nombre }}</td>
                        <td style="text-align: left; vertical-align: middle">{{ materiasignada.materia.asignaturamalla.asignatura.nombre }}</td>
                        <td style="text-align: center; vertical-align: middle">{{ materiasignada.materia.asignaturamalla.nivelmalla.nombre }} </td>
{#                        <td style="text-align: center; vertical-align: middle">{{ materiasignada.materia.paralelomateria.nombre }}</td>#}
                        <td style="text-align: center; vertical-align: middle">{{ materiasignada.matricula.inscripcion.sesion.nombre }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <div class="row-fluid">
        <div class="span12">
            <form id="frmconfirmarautomatriculaadmision" onsubmit="javascript:;">
                <hr>
                <h5>Documentos requeridos</h5>
                <br>
                <div class='row-fluid'>
                    <div class='span6'>
                        <label><b>Documento de identidad</b></label>
                        <div class="radio">
                            <input type="radio" name="admision_tipo_documento" checked="checked" id="cedula" value="6">
                            <label for="cedula">CÉDULA DE CIUDADANÍA</label>
                        </div>
                        <br>
                        <input type="file" name="admision_documento" id="admision_documento" data-allowed-file-extensions="pdf" data-max-file-size="4MB" data-height="100">
                        <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px">Tamaño máximo permitido 4Mb, en formato pdf</p>

                    </div>
                    <div class='span6'>
                        <label><b>Documento de grado de bachiller</b></label>
                        <div class="radio">
                            <input type="radio" name="admision_tipo_bachiller" id="acta_bachiller" value="16">
                            <label for="acta_bachiller">ACTA DE GRADO DE BACHILLER</label>
                            <input type="radio" name="admision_tipo_bachiller" id="titulo_bachiller" value="17">
                            <label for="titulo_bachiller">TITULO DE BACHILLER</label>
                        </div>
                        <br>
                        <input type="file" name="admision_bachiller" id="admision_bachiller" style="margin-top: 20px" data-allowed-file-extensions="pdf" data-max-file-size="10MB" data-height="100">
                        <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px">Tamaño máximo permitido 10Mb, en formato pdf</p>
                    </div>
                </div>
                <br>
                <hr>
                <div class='row-fluid'>
                    <div class='span6'>

                        <label><b>¿Es persona privada de libertad?</b></label>
                        <div class="radio">
                            <div class="radio">
                                <input type="radio" name="admision_ppl" id="ppl_si" checked="checked" value="1">
                                <label for="ppl_si">SI</label>
                                <input type="radio" name="admision_ppl" id="ppl_no" value="0">
                                <label for="ppl_no">NO</label>
                            </div>
                        </div>
                        <br>
                        <div class="row-fluid contenedor_ppl">
                            <fieldset id="fieldset_fechaingresoppl" class="control-group nomargins" style="min-height:45px; float: left; width: 50%">
                                <div class="control-label label-text" style="display: table; height: 30px; float: left; text-align: right; width: 160px;">
                                    <div style="display: table-cell; vertical-align: middle; line-height: 11px">
                                        <label for="id_fechaingresoppl" style="padding-right: 20px">Fecha de Ingreso</label>
                                    </div>
                                </div>
                                <div class="control" style="float: left; width: 125px;">
                                    <input class="selectorfecha" formwidth="50%" id="id_fechaingresoppl" name="fechaingresoppl" type="text" required="">
                                    <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px"> </p>
                                </div>
                            </fieldset>
                            <fieldset id="fieldset_centrorehabilitacion" class="control-group nomargins" style="min-height:45px; float: left; width: 100%">
                                <div class="control-label label-text" style="display: table; height: 30px; float: left; text-align: right; width: 160px;">
                                    <div style="display: table-cell; vertical-align: middle; line-height: 11px">
                                        <label for="id_centrorehabilitacion" style="padding-right: 20px">Centro de Rehabilitación Social</label>
                                    </div>
                                </div>
                                <div class="control" style="float: left; width: 430px;">
                                    <input class="imp-100" id="id_centrorehabilitacion" maxlength="500" name="centrorehabilitacion" type="text">
                                    <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px"> </p>
                                </div>
                            </fieldset>
                            <fieldset id="fieldset_lidereducativo" class="control-group nomargins" style="min-height:45px; float: left; width: 100%">
                                <div class="control-label label-text" style="display: table; height: 30px; float: left; text-align: right; width: 160px;">
                                    <div style="display: table-cell; vertical-align: middle; line-height: 11px">
                                        <label for="id_lidereducativo" style="padding-right: 20px">Lider educativo</label>
                                    </div>
                                </div>
                                <div class="control" style="float: left; width: 430px;">
                                    <input class="imp-100" id="id_lidereducativo" maxlength="500" name="lidereducativo" type="text">
                                    <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px"> </p>
                                </div>
                            </fieldset>
                            <fieldset id="fieldset_correolidereducativo" class="control-group nomargins" style="min-height:45px; float: left; width: 100%">
                                <div class="control-label label-text" style="display: table; height: 30px; float: left; text-align: right; width: 160px;">
                                    <div style="display: table-cell; vertical-align: middle; line-height: 11px">
                                        <label for="id_correolidereducativo" style="padding-right: 20px">Correo electrónico del lider educativo</label>
                                    </div>
                                </div>
                                <div class="control" style="float: left; width: 430px;">
                                    <input class="imp-100" id="id_correolidereducativo" maxlength="250" name="correolidereducativo" type="text">
                                    <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px"> </p>
                                </div>
                            </fieldset>
                            <fieldset id="fieldset_telefonolidereducativo" class="control-group nomargins" style="min-height:45px; float: left; width: 100%">
                                <div class="control-label label-text" style="display: table; height: 30px; float: left; text-align: right; width: 160px;">
                                    <div style="display: table-cell; vertical-align: middle; line-height: 11px">
                                        <label for="id_telefonolidereducativo" style="padding-right: 20px">Teléfono del lider educativo</label>
                                    </div>
                                </div>
                                <div class="control" style="float: left; width: 430px;">
                                    <input class="imp-25" id="id_telefonolidereducativo" maxlength="100" name="telefonolidereducativo" type="text">
                                    <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px"> </p>
                                </div>
                            </fieldset>
                            <fieldset id="fieldset_observacionppl" class="control-group nomargins" style="min-height:45px; float: left; width: 100%">
                                <div class="control-label label-text" style="display: table; height: 30px; float: left; text-align: right; width: 160px;">
                                    <div style="display: table-cell; vertical-align: middle; line-height: 11px">
                                        <label for="id_observacionppl" style="padding-right: 20px">Observación Persona Privada Libertad</label>
                                    </div>
                                </div>
                                <div class="control" style="float: left; width: 430px;">
                                    <input class="imp-100" id="id_observacionppl" maxlength="500" name="observacionppl" type="text">
                                    <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px"> </p>
                                </div>
                            </fieldset>
                            <fieldset id="fieldset_archivoppl" class="control-group nomargins" style="min-height:45px; float: left; width: 100%">
                                <div class="control-label label-text" style="display: table; height: 30px; float: left; text-align: right; width: 160px;">
                                    <div style="display: table-cell; vertical-align: middle; line-height: 11px">
                                        <label for="id_archivoppl" style="padding-right: 20px">Archivo PPL</label>
                                    </div>
                                </div>
                                <div class="control" style="float: left; width: 430px;">
                                    <input type="file" name="archivoppl" id="id_archivoppl" data-allowed-file-extensions="pdf" data-max-file-size="4MB" data-height="100">
                                    <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px">Tamaño máximo permitido 4Mb, en formato pdf</p>
                                </div>
                            </fieldset>
                        </div>
                    </div>
                    <div class='span6'>
                        <label><b>¿Tiene discapacidad?</b></label>
                        <div class="radio">
                            <div class="radio">
                                <input type="radio" name="admision_discapacidad" checked="checked" id="discapacidad_si" value="1">
                                <label for="discapacidad_si">SI</label>
                                <input type="radio" name="admision_discapacidad" id="discapacidad_no" value="0">
                                <label for="discapacidad_no">NO</label>
                            </div>
                        </div>
                        <br>
                        <div class="row-fluid contenedor_discapacidad">
                            <fieldset id="fieldset_tipodiscapacidad" class="control-group nomargins" style="min-height:45px; float: left; width: 100%">
                                <div class="control-label label-text" style="display: table; height: 30px; float: left; text-align: right; width: 160px;">
                                    <div style="display: table-cell; vertical-align: middle; line-height: 11px">
                                        <label for="id_tipodiscapacidad" style="padding-right: 20px">Tipo de Discapacidad</label>
                                    </div>
                                </div>
                                <div class="control" style="float: left; width: 430px;">
                                    <select id="id_tipodiscapacidad" name="tipodiscapacidad">
                                        <option value="0" selected="selected">---------</option>
                                        {% for discapaciad in discapacidades %}
                                            <option value="{{ discapaciad.id }}">{{ discapaciad }}</option>
                                        {% endfor %}
                                    </select>
                                    <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px"> </p>
                                </div>
                            </fieldset>
                            <fieldset id="fieldset_porcientodiscapacidad" class="control-group nomargins" style="min-height:45px; float: left; width: 100%">
                                <div class="control-label label-text" style="display: table; height: 30px; float: left; text-align: right; width: 160px;">
                                    <div style="display: table-cell; vertical-align: middle; line-height: 11px">
                                        <label for="id_porcientodiscapacidad" style="padding-right: 20px">% de Discapacidad</label>
                                    </div>
                                </div>
                                <div class="control" style="float: left; width: 430px;">
                                    <input class="imp-numbersmall" id="id_porcientodiscapacidad" name="porcientodiscapacidad" type="text" value="0.0">
                                    <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px"> </p>
                                </div>
                            </fieldset>
                            <fieldset id="fieldset_carnetdiscapacidad" class="control-group nomargins" style="min-height:45px; float: left; width: 100%">
                                <div class="control-label label-text" style="display: table; height: 30px; float: left; text-align: right; width: 160px;">
                                    <div style="display: table-cell; vertical-align: middle; line-height: 11px">
                                        <label for="id_carnetdiscapacidad" style="padding-right: 20px">N° Carnet Discapacitado</label>
                                    </div>
                                </div>
                                <div class="control" style="float: left; width: 430px;">
                                    <input id="id_carnetdiscapacidad" maxlength="50" name="carnetdiscapacidad" type="text" class="">
                                    <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px"> </p>
                                </div>
                            </fieldset>
                            <fieldset id="fieldset_institucionvalida" class="control-group nomargins" style="min-height:45px; float: left; width: 100%">
                                <div class="control-label label-text" style="display: table; height: 30px; float: left; text-align: right; width: 160px;">
                                    <div style="display: table-cell; vertical-align: middle; line-height: 11px">
                                        <label for="id_institucionvalida" style="padding-right: 20px">Institución Valida</label>
                                    </div>
                                </div>
                                <div class="control" style="float: left; width: 430px;">
                                    <select id="id_institucionvalida" name="institucionvalida">
                                        <option value="0" selected="selected">---------</option>
                                        {% for institucion in institucionesvalida %}
                                            <option value="{{ institucion.id }}">{{ institucion }}</option>
                                        {% endfor %}
                                    </select>
                                    <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px"> </p>
                                </div>
                            </fieldset>
                            <fieldset id="fieldset_archivo" class="control-group nomargins" style="min-height:45px; float: left; width: 100%">
                                <div class="control-label label-text" style="display: table; height: 30px; float: left; text-align: right; width: 160px;">
                                    <div style="display: table-cell; vertical-align: middle; line-height: 11px">
                                        <label for="id_documento_discapacidad" style="padding-right: 20px">Carnet de Discapacidad</label>
                                    </div>
                                </div>
                                <div class="control" style="float: left; width: 430px;">
                                    <input type="file" name="documento_discapacidad" id="id_documento_discapacidad" data-allowed-file-extensions="pdf" data-max-file-size="4MB" data-height="100">
                                    <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px">Tamaño máximo permitido 4Mb, en formato pdf</p>
                                </div>
                            </fieldset>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <div class="modal fade static" id="confirmarAutomatricula" style="display: none;">
        <div class="modal-header">
            <h4 class="paneltitle"><span></span> Confirmar matrícula</h4>
        </div>
        <div class="modal-body panelbody">
            {#            <div v-show="perdida_gratuidad">#}
            {#                <span v-html="mensaje_gratuidad"></span>#}
            {#                <span><p style="font-weight: bold;">Una vez confirmada la matriculación, podrá consultar los rubros a pagar a través del módulo "Mis Finanzas".</p></span>#}
            {#            </div>#}
            {% if periodomatricula.valida_terminos %}
                {#                <embed src="/static/documentos/admision/prohibiciones_sanciones_aspirantes_nivelacion.pdf" width="100%" height="450px" type="application/pdf" all></embed>#}
                <br>



                <div class="terminos" style="border: 1px solid #1a252f; padding: 10px; padding-top: 40px; padding-bottom: 40px;">
                    {{ periodomatricula.terminos|safe }}
                </div>

            {% endif %}
            <br>
            <br>

            <p>{% if persona.sexo.id == 1 %}Estimada{% else %}Estimado{% endif %} {{ persona }}, al confirmar usted estaría aceptando (<b>{{ materiassignadas|length }}</b>) {% if materiassignadas.count > 1 %}materias{% else %}materia{% endif %}.</p>
            <p>
                <span class="checkbox">
                    <input type="checkbox" class="" name="acepta-terminos" id="acepta-terminos">
                    <label for="acepta-terminos"><i class="fa fa-handshake-o"></i></label>
                    <!--<label for="acepta-terminos">&nbsp;</label>-->
                </span>
                <b style="font-size: 16px;">¿Está {% if persona.sexo.id == 1 %}segura{% else %}seguro{% endif %} de aceptar la matrícula?</b>
            </p>

        </div>
        <div class="modal-footer">
            <a href="javascript:;" class="btn btn-success action-save">Confirmar</a>
            <a href="javascript:;" class="btn btn-info action-close"> Cancelar</a>
        </div>
    </div>

    <div class="modal fade static" id="modaldetalle_valores" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Detalle de los valores generados en la matriculación</h3>
        </div>
        <div class="modal-body">
        </div>
        <div class="modal-footer">
            <a href="javascript:;" class="btn action-close btn-info">Cerrar</a>
        </div>
    </div>
{% endblock %}
