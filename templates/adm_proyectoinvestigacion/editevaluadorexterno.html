{% extends "ajaxformbs.html" %}
{% load sga_extras %}
{% block extraheading %}
    <link href="/static/switchery/switchery.min.css" rel="stylesheet"/>
    <script src="/static/switchery/switchery.min.js"></script>
    <script type="text/javascript">
        var switchery = {};
        $.fn.initSwitchery = function () {
            //Init CheckBox Style
            var searchBy = ".js-switch";
            $(this).find(searchBy).each(function (i, html) {
                debugger;
                if (!$(html).next().hasClass("switchery")) {
                    //switchery[html.getAttribute('id')] = new Switchery(html, $(html).data());
                    switchery[html.getAttribute('id')] = new Switchery(html, {size: 'small', color: '#5DADE2'});
                }
            });
        };

        $(function(){
            $("body").initSwitchery();

            lista_items8 = [];
            lista_items9 = [];
            lista_items10 = [];
            lista_items11 = [];
            lista_items12 = [];
            lista_items13 = [];
            lista_items14 = [];

            $("select").select2({minimumResultsForSearch: 20 });

            total_formacion = total_experiencia = total_articulo = total_ponencia = total_libro = total_capitulolibro = total_proyecto = 0;
            nf_formac = nf_expe = nf_arti = nf_ponen = nf_libro = nf_capi = nf_proy =  0;
            idfilatitulo = idfilauniversidad = "";
            idnuevauni = nombrenuevauni = "";

            lista_items1 = [];
            lista_items2 = [];
            lista_items3 = [];
            lista_items4 = [];
            lista_items5 = [];
            lista_items6 = [];
            lista_items7 = [];

            $("#id_nacimiento").datepicker({format:"yyyy-mm-dd"}).on('changeDate', function(ev){ $(this).datepicker('hide'); });
            $("#id_nombres, #id_apellido1, #id_nacimiento, #id_sexo").addClass("validate[required]");
            $("#id_institucionlabora, #id_cargodesempena").addClass("validate[required]");
            $("#id_email").addClass("validate[custom[email]");

            $('#id_cedula, #id_pasaporte, #id_nombres, #id_apellido1, #id_apellido2').attr('readOnly', true);

            $('#id_cedula, #id_telefono').blur(function(){
                digitos($(this));
            });

            $(".agregaitem_formacion").click(function() {
                if(datos_formacion_completo()) {
                    nf_formac += 1;

                    valoresSelectTitulo = '<option value="0" selected="selected">--Selecc--</option>';
                    {% for titulo in titulos %}
                        opcion = '<option value="{{ titulo.id }}">{{ titulo.nombre }}</option>';
                        valoresSelectTitulo = valoresSelectTitulo + opcion;
                    {% endfor %}

                    valoresSelectUniversidad = '<option value="0" selected="selected">--Selecc--</option>';
                    {% for universidad in universidades %}
                        opcion = '<option value="{{ universidad.id }}">{{ universidad.nombre }}</option>';
                        valoresSelectUniversidad = valoresSelectUniversidad + opcion;
                    {% endfor %}

                    if(idnuevauni != ''){
                        opcion = '<option value="'+idnuevauni+'">'+nombrenuevauni+'</option>';
                        valoresSelectUniversidad = valoresSelectUniversidad + opcion;
                    }


                    valoresSelectPaisUni = '<option value="0" selected="selected">--Selecc--</option>';
                    {% for pais in paises %}
                        opcion = '<option value="{{ pais.id }}">{{ pais.nombre }}</option>';
                        valoresSelectPaisUni = valoresSelectPaisUni + opcion;
                    {% endfor %}

                    nueva = '<tr id="fila_FA_' + nf_formac.toString() + '">' +
                        '<td> <input type="hidden" id="idregistro_FA[]" name="idregistro_FA[]" value="0"> <input type="hidden" id="nfila_FA[]" name="nfila_FA[]" value="'+nf_formac.toString()+'">  <a href="javascript:;" class="btn btn-tini btn-success agregartitulo_FA tu" abrev="FA"  idf="' + nf_formac.toString() + '" title="Agregar Título"><i class="fa fa-plus"></i></a>  <select style="width: 350px;" class="tituloacademico" id="tituloacademico_FA[]" name="tituloacademico_FA[]" indice="'+nf_formac.toString()+'" >'+valoresSelectTitulo+' </select>  </td>' +
                        '<td> <a href="javascript:;" class="btn btn-tini btn-success agregarinstitucion_FA tu" abrev="FA"  idf="' + nf_formac.toString() + '" title="Agregar Institución"><i class="fa fa-plus"></i></a>  <select style="width: 350px;" class="universidad" id="universidad_FA[]" name="universidad_FA[]" indice="'+nf_formac.toString()+'" >'+valoresSelectUniversidad+' </select>  </td>' +
                        '<td style="text-align: center"><input type="text" class="selectorfecha" id="fechaobtencion_FA[]" name="fechaobtencion_FA[]" value="" readonly style="cursor:text; background-color: #FFFFFF;"/></td>' +
                        '<td> <select style="width: 200px;" class="paistitulo" id="pais_FA[]" name="pais_FA[]" >'+valoresSelectPaisUni+' </select>  </td>' +
                        '<td>&nbsp;</td>' +
                        '<td><label class="btn btn-default"><i class="fa fa-cloud-upload" aria-hidden="true"></i> Selecc <span id="bgaFA_'+nf_formac.toString()+'" class="badge">0</span><input type="file" style="color: transparent" class="archivosFA" idf="'+nf_formac.toString()+'" id="archivo_FA[]" name="archivo_FA[]" hidden> </label></td>' +
                        '<td><a href="javascript:;" class="btn btn-tini btn-danger eliminaritem_FA tu" idf="' + nf_formac.toString() + '" idreg="0" title="Eliminar formación académica"><i class="fa fa-remove"></i></a></td>';

                    $("#detalle_formacion_academica").append(nueva);
                    $("#detalle_formacion_academica").find(".tituloacademico").select2();
                    $("#detalle_formacion_academica").find(".universidad").select2();
                    $("#detalle_formacion_academica").find(".paistitulo").select2();
                    $("#detalle_formacion_academica").find(".selectorfecha").datepicker({format:"yyyy-mm-dd"}).on('changeDate', function(ev){ $(this).datepicker('hide'); });
                    $(".agregartitulo_FA").unbind("click.agregartitulo_FA");
                    $(".agregartitulo_FA").bind("click.agregartitulo_FA", agregarTitulo_FA);
                    $(".agregarinstitucion_FA").unbind("click.agregarinstitucion_FA");
                    $(".agregarinstitucion_FA").bind("click.agregarinstitucion_FA", agregarInstitucion_FA);
                    $(".eliminaritem_FA").unbind("click.eliminarItem_FA");
                    $(".eliminaritem_FA").bind("click.eliminarItem_FA", eliminarItem_FA);

                    conectar_change_fileinput_FA();
                    contarFilas_FA();
                }
            });

            conectar_change_fileinput_FA=function() {
                $(".archivosFA").unbind();
                $(".archivosFA").change(function () {
                    var id = $(this).get(0).files.length;
                    var idf = $(this).attr('idf');
                    $("#bgaFA_"+idf).html("1");
                    actualizar_lista_tituloarchivo_FA();
                });
            };

            actualizar_lista_tituloarchivo_FA = function (){
                lista_items1 = [];
                cf = 1;
                $('input[name="archivo_FA[]"]').each(function() {
                    if($(this).get(0).files.length > 0){
                        var item = {
                            nfila: $(this).attr('idf'),
                            cfila: cf
                        };
                        lista_items1.push(item);
                    }
                    cf ++;
                });
            };

            eliminarItem_FA = function() {
                var id = $(this).attr("idf");
                var idregistro = $(this).attr("idreg");

                if(idregistro != '0'){
                    var item = {idregistro: idregistro};
                    lista_items8.push(item)
                }

                $("#fila_FA_"+id).remove();
                contarFilas_FA();
                actualizar_lista_tituloarchivo_FA();
            };

            contarFilas_FA = function (){
                var rowCount = $("#detalle_formacion_academica tr").length;
                $("#bdg_total_formacion").html(rowCount);
            }

            datos_formacion_completo = function (){
                var c1e = true, c2e = true, c3e = true, c4e = true, c5e = true, c6e = true, c7e = true;

                $('select[name="tituloacademico_FA[]"]').each(function() {
                    valor = parseInt($(this).val());
                    if(valor == 0){
                        c1e = false;
                        return false;
                    }
                });

                $('select[name="universidad_FA[]"]').each(function() {
                    valor = parseInt($(this).val());
                    if(valor == 0){
                        c2e = false;
                        return false;
                    }
                });

                $('input[name="fechaobtencion_FA[]"]').each(function() {
                    if($(this).val().trim()==''){
                        c3e = false;
                        return false;
                    }
                });

                $('select[name="pais_FA[]"]').each(function() {
                    valor = parseInt($(this).val());
                    if(valor == 0){
                        c4e = false;
                        return false;
                    }
                });

                return (c1e && c2e && c3e && c4e && c5e && c6e && c7e);
            };


            $(".agregaitem_experiencia").click(function() {
                if(datos_experiencia_completo()) {
                    nf_expe += 1;

                    nueva = '<tr id="fila_EXP_' + nf_expe.toString() + '">' +
                        '<td> <input type="hidden" id="idregistro_EXP[]" name="idregistro_EXP[]" value="0"> <input type="hidden" id="nfila_EXP[]" name="nfila_EXP[]" value="'+nf_expe.toString()+'">  <input autocomplete="off" style="text-align: left; width: 100%; text-transform: uppercase" maxlength="250" id="cargo_EXP[]" name="cargo_EXP[]" type="text" value="" ></td>' +
                        '<td><input autocomplete="off" style="text-align: left; width: 100%; text-transform: uppercase" maxlength="250" id="institucion_EXP[]" name="institucion_EXP[]" type="text" value="" ></td>' +
                        '<td style="text-align: center"><input type="text" class="selectorfecha" id="fechainicio_EXP[]" name="fechainicio_EXP[]" value="" readonly style="cursor:text; background-color: #FFFFFF;"/></td>' +
                        '<td style="text-align: center"><input type="text" class="selectorfecha" id="fechafin_EXP[]" name="fechafin_EXP[]" value="" readonly style="cursor:text; background-color: #FFFFFF;"/></td>' +
                        '<td>&nbsp;</td>' +
                        '<td><label class="btn btn-default"><i class="fa fa-cloud-upload" aria-hidden="true"></i> Selecc <span id="bgaEXP_'+nf_expe.toString()+'" class="badge">0</span><input type="file" style="color: transparent" class="archivosEXP" idf="'+nf_expe.toString()+'" id="archivo_EXP[]" name="archivo_EXP[]" hidden> </label></td>' +
                        '<td><a href="javascript:;" class="btn btn-tini btn-danger eliminaritem_EXP tu" idf="' + nf_expe.toString() + '" idreg="0" title="Eliminar experiencia"><i class="fa fa-remove"></i></a></td>';

                    $("#detalle_experiencia").append(nueva);
                    $("#detalle_experiencia").find(".selectorfecha").datepicker({format:"yyyy-mm-dd"}).on('changeDate', function(ev){ $(this).datepicker('hide'); });


                    $(".eliminaritem_EXP").unbind("click.eliminarItem_EXP");
                    $(".eliminaritem_EXP").bind("click.eliminarItem_EXP", eliminarItem_EXP);

                    conectar_change_fileinput_EXP();
                    contarFilas_EXP();
                }
            });

            conectar_change_fileinput_EXP=function() {
                $(".archivosEXP").unbind();
                $(".archivosEXP").change(function () {
                    var id = $(this).get(0).files.length;
                    var idf = $(this).attr('idf');
                    $("#bgaEXP_"+idf).html("1");
                    actualizar_lista_tituloarchivo_EXP();
                });
            };

            actualizar_lista_tituloarchivo_EXP = function (){
                lista_items2 = [];
                cf = 1;
                $('input[name="archivo_EXP[]"]').each(function() {
                    if($(this).get(0).files.length > 0){
                        var item = {
                            nfila: $(this).attr('idf'),
                            cfila: cf
                        };
                        lista_items2.push(item);
                    }
                    cf ++;
                });
            };

            eliminarItem_EXP = function() {
                var id = $(this).attr("idf");
                var idregistro = $(this).attr("idreg");

                if(idregistro != '0'){
                    var item = {idregistro: idregistro};
                    lista_items9.push(item)
                }

                $("#fila_EXP_"+id).remove();
                contarFilas_EXP();
                actualizar_lista_tituloarchivo_EXP();
            };

            contarFilas_EXP = function (){
                var rowCount = $("#detalle_experiencia tr").length;
                $("#bdg_total_experiencia").html(rowCount);
            }

            datos_experiencia_completo = function (){
                var c1e = true, c2e = true, c3e = true, c4e = true, c5e = true, c6e = true, c7e = true;

                $('input[name="cargo_EXP[]"]').each(function() {
                    if($(this).val().trim()==''){
                        c1e = false;
                        return false;
                    }
                });

                $('input[name="institucion_EXP[]"]').each(function() {
                    if($(this).val().trim()==''){
                        c2e = false;
                        return false;
                    }
                });

                $('input[name="fechainicio_EXP[]"]').each(function() {
                    if($(this).val().trim()==''){
                        c3e = false;
                        return false;
                    }
                });

                $('input[name="fechafin_EXP[]"]').each(function() {
                    if($(this).val().trim()==''){
                        c4e = false;
                        return false;
                    }
                });

                return (c1e && c2e && c3e && c4e && c5e && c6e && c7e);
            };


            $(".agregaitem_articulo").click(function() {
                if(datos_articulo_completo()) {
                    nf_arti += 1;

                    valoresSelectTipoAutor = '<option value="0" selected="selected">--Selecc--</option>';
                    {% for tipoautor in tiposautor %}
                        opcion = '<option value="{{ tipoautor.id }}">{{ tipoautor.descripcion }}</option>';
                        valoresSelectTipoAutor = valoresSelectTipoAutor + opcion;
                    {% endfor %}


                    nueva = '<tr id="fila_ART_' + nf_arti.toString() + '">' +
                        '<td> <input type="hidden" id="idregistro_ART[]" name="idregistro_ART[]" value="0"> <input type="hidden" id="nfila_ART[]" name="nfila_ART[]" value="'+nf_arti.toString()+'"> <input autocomplete="off" style="text-align: left; width: 100%; text-transform: uppercase" maxlength="250" id="titulo_ART[]" name="titulo_ART[]" type="text" value="" ></td>' +
                        '<td><input autocomplete="off" style="text-align: left; width: 100%; text-transform:  uppercase" maxlength="250" id="revista_ART[]" name="revista_ART[]" type="text" value="" ></td>' +
                        '<td><input autocomplete="off" style="text-align: left; width: 100%; text-transform:  uppercase" maxlength="250" id="baseindexada_ART[]" name="baseindexada_ART[]" type="text" value="" ></td>' +
                        '<td style="text-align: center"><input type="text" class="selectorfecha" id="fechapublica_ART[]" name="fechapublica_ART[]" value="" readonly style="cursor:text; background-color: #FFFFFF;"/></td>' +
                        '<td> <select style="width: 100px;" class="tipoautorarticulo" id="tipoautor_ART[]" name="tipoautor_ART[]" >'+valoresSelectTipoAutor+' </select>  </td>' +
                        '<td>&nbsp;</td>' +
                        '<td><label class="btn btn-default"><i class="fa fa-cloud-upload" aria-hidden="true"></i> Selecc <span id="bgaART_'+nf_arti.toString()+'" class="badge">0</span><input type="file" style="color: transparent" class="archivosART" idf="'+nf_arti.toString()+'" id="archivo_ART[]" name="archivo_ART[]" hidden> </label></td>' +
                        '<td><a href="javascript:;" class="btn btn-tini btn-danger eliminaritem_ART tu" idf="' + nf_arti.toString() + '" idreg="0" title="Eliminar artículo"><i class="fa fa-remove"></i></a></td>';

                    $("#detalle_articulo").append(nueva);
                    $("#detalle_articulo").find(".selectorfecha").datepicker({format:"yyyy-mm-dd"}).on('changeDate', function(ev){ $(this).datepicker('hide'); });
                    $("#detalle_articulo").find(".tipoautorarticulo").select2();
                    $(".eliminaritem_ART").unbind("click.eliminaritem_ART");
                    $(".eliminaritem_ART").bind("click.eliminaritem_ART", eliminarItem_ART);
                    conectar_change_fileinput_ART();
                    contarFilas_ART();

                }
            });

            conectar_change_fileinput_ART=function() {
                $(".archivosART").unbind();
                $(".archivosART").change(function () {
                    var id = $(this).get(0).files.length;
                    var idf = $(this).attr('idf');
                    $("#bgaART_"+idf).html("1");
                    actualizar_lista_tituloarchivo_ART();
                });
            };

            actualizar_lista_tituloarchivo_ART = function (){
                lista_items3 = [];
                cf = 1;
                $('input[name="archivo_ART[]"]').each(function() {
                    if($(this).get(0).files.length > 0){
                        var item = {
                            nfila: $(this).attr('idf'),
                            cfila: cf
                        };
                        lista_items3.push(item);
                    }
                    cf ++;
                });
            };

            eliminarItem_ART = function() {
                var id = $(this).attr("idf");
                var idregistro = $(this).attr("idreg");

                if(idregistro != '0'){
                    var item = {idregistro: idregistro};
                    lista_items10.push(item)
                }

                $("#fila_ART_"+id).remove();
                contarFilas_ART();
                actualizar_lista_tituloarchivo_ART();
            };

            contarFilas_ART = function (){
                var rowCount = $("#detalle_articulo tr").length;
                $("#bdg_total_articulo").html(rowCount);
            }

            datos_articulo_completo = function (){
                var c1e = true, c2e = true, c3e = true, c4e = true, c5e = true, c6e = true, c7e = true;

                $('input[name="titulo_ART[]"]').each(function() {
                    if($(this).val().trim()==''){
                        c1e = false;
                        return false;
                    }
                });

                $('input[name="revista_ART[]"]').each(function() {
                    if($(this).val().trim()==''){
                        c2e = false;
                        return false;
                    }
                });

                $('input[name="baseindexada_ART[]"]').each(function() {
                    if($(this).val().trim()==''){
                        c3e = false;
                        return false;
                    }
                });

                $('input[name="fechapublica_ART[]"]').each(function() {
                    if($(this).val().trim()==''){
                        c4e = false;
                        return false;
                    }
                });

                $('select[name="tipoautor_ART[]"]').each(function() {
                    valor = parseInt($(this).val());
                    if(valor == 0){
                        c5e = false;
                        return false;
                    }
                });

                return (c1e && c2e && c3e && c4e && c5e && c6e && c7e);
            };

            $(".agregaitem_ponencia").click(function() {
                if(datos_ponencia_completo()) {
                    nf_ponen += 1;

                    valoresSelectPaisPonen = '<option value="0" selected="selected">--Selecc--</option>';
                    {% for pais in paises %}
                        opcion = '<option value="{{ pais.id }}">{{ pais.nombre }}</option>';
                        valoresSelectPaisPonen = valoresSelectPaisPonen + opcion;
                    {% endfor %}

                    valoresSelectTipoAutor = '<option value="0" selected="selected">--Selecc--</option>';
                    {% for tipoautor in tiposautor %}
                        opcion = '<option value="{{ tipoautor.id }}">{{ tipoautor.descripcion }}</option>';
                        valoresSelectTipoAutor = valoresSelectTipoAutor + opcion;
                    {% endfor %}


                    nueva = '<tr id="fila_PON_' + nf_ponen.toString() + '">' +
                        '<td> <input type="hidden" id="idregistro_PON[]" name="idregistro_PON[]" value="0"> <input type="hidden" id="nfila_PON[]" name="nfila_PON[]" value="'+nf_ponen.toString()+'">  <input autocomplete="off" style="text-align: left; width: 100%; text-transform: uppercase" maxlength="250" id="titulo_PON[]" name="titulo_PON[]" type="text" value="" ></td>' +
                        '<td><input autocomplete="off" style="text-align: left; width: 100%; text-transform:  uppercase" maxlength="250" id="congreso_PON[]" name="congreso_PON[]" type="text" value="" ></td>' +
                        '<td style="text-align: center"><input type="text" class="selectorfecha" id="fechainiciocongreso_PON[]" name="fechainiciocongreso_PON[]" value="" readonly style="cursor:text; background-color: #FFFFFF;"/></td>' +
                        '<td style="text-align: center"><input type="text" class="selectorfecha" id="fechafincongreso_PON[]" name="fechafincongreso_PON[]" value="" readonly style="cursor:text; background-color: #FFFFFF;"/></td>' +
                        '<td> <select style="width: 200px;" class="paisponencia" id="pais_PON[]" name="pais_PON[]" >'+valoresSelectPaisPonen+' </select>  </td>' +
                        '<td><input autocomplete="off" style="text-align: left; width: 100%; text-transform: uppercase" maxlength="100" id="ciudad_PON[]" name="ciudad_PON[]" type="text" value="" ></td>' +
                        '<td> <select style="width: 100px;" class="tipoautorponencia" id="tipoautor_PON[]" name="tipoautor_PON[]" >'+valoresSelectTipoAutor+' </select>  </td>' +
                        '<td>&nbsp;</td>' +
                        '<td><label class="btn btn-default"><i class="fa fa-cloud-upload" aria-hidden="true"></i> Selecc <span id="bgaPON_'+nf_ponen.toString()+'" class="badge">0</span><input type="file" style="color: transparent" class="archivosPON" idf="'+nf_ponen.toString()+'" id="archivo_PON[]" name="archivo_PON[]" hidden> </label></td>' +
                        '<td><a href="javascript:;" class="btn btn-tini btn-danger eliminaritem_PON tu" idf="' + nf_ponen.toString() + '" idreg="0" title="Eliminar ponencia"><i class="fa fa-remove"></i></a></td>';


                    $("#detalle_ponencia").append(nueva);
                    $("#detalle_ponencia").find(".selectorfecha").datepicker({format:"yyyy-mm-dd"}).on('changeDate', function(ev){ $(this).datepicker('hide'); });
                    $("#detalle_ponencia").find(".paisponencia").select2();
                    $("#detalle_ponencia").find(".tipoautorponencia").select2();

                    $(".eliminaritem_PON").unbind("click.eliminaritem_PON");
                    $(".eliminaritem_PON").bind("click.eliminaritem_PON", eliminarItem_PON);

                    conectar_change_fileinput_PON();
                    contarFilas_PON();
                }
            });

            conectar_change_fileinput_PON=function() {
                $(".archivosPON").unbind();
                $(".archivosPON").change(function () {
                    var id = $(this).get(0).files.length;
                    var idf = $(this).attr('idf');
                    $("#bgaPON_"+idf).html("1");
                    actualizar_lista_tituloarchivo_PON();
                });
            };

            actualizar_lista_tituloarchivo_PON = function (){
                lista_items4 = [];
                cf = 1;
                $('input[name="archivo_PON[]"]').each(function() {
                    if($(this).get(0).files.length > 0){
                        var item = {
                            nfila: $(this).attr('idf'),
                            cfila: cf
                        };
                        lista_items4.push(item);
                    }
                    cf ++;
                });
            };

            eliminarItem_PON = function() {
                var id = $(this).attr("idf");
                var idregistro = $(this).attr("idreg");

                if(idregistro != '0'){
                    var item = {idregistro: idregistro};
                    lista_items11.push(item)
                }

                $("#fila_PON_"+id).remove();
                contarFilas_PON();
                actualizar_lista_tituloarchivo_PON();
            };

            contarFilas_PON = function (){
                var rowCount = $("#detalle_ponencia tr").length;
                $("#bdg_total_ponencia").html(rowCount);
            }

            datos_ponencia_completo = function (){
                var c1e = true, c2e = true, c3e = true, c4e = true, c5e = true, c6e = true, c7e = true;

                $('input[name="titulo_PON[]"]').each(function() {
                    if($(this).val().trim()==''){
                        c1e = false;
                        return false;
                    }
                });

                $('input[name="congreso_PON[]"]').each(function() {
                    if($(this).val().trim()==''){
                        c2e = false;
                        return false;
                    }
                });

                $('input[name="fechainiciocongreso_PON[]"]').each(function() {
                    if($(this).val().trim()==''){
                        c3e = false;
                        return false;
                    }
                });

                $('input[name="fechafincongreso_PON[]"]').each(function() {
                    if($(this).val().trim()==''){
                        c4e = false;
                        return false;
                    }
                });

                $('select[name="pais_PON[]"]').each(function() {
                    valor = parseInt($(this).val());
                    if(valor == 0){
                        c5e = false;
                        return false;
                    }
                });

                $('input[name="ciudad_PON[]"]').each(function() {
                    if($(this).val().trim()==''){
                        c6e = false;
                        return false;
                    }
                });

                $('select[name="tipoautor_PON[]"]').each(function() {
                    valor = parseInt($(this).val());
                    if(valor == 0){
                        c7e = false;
                        return false;
                    }
                });

                return (c1e && c2e && c3e && c4e && c5e && c6e && c7e);
            };

            $(".agregaitem_libro").click(function() {
                if(datos_libro_completo()) {
                    nf_libro += 1;

                    valoresSelectTipoAutor = '<option value="0" selected="selected">--Selecc--</option>';
                    {% for tipoautor in tiposautor %}
                        opcion = '<option value="{{ tipoautor.id }}">{{ tipoautor.descripcion }}</option>';
                        valoresSelectTipoAutor = valoresSelectTipoAutor + opcion;
                    {% endfor %}


                    nueva = '<tr id="fila_LIB_' + nf_libro.toString() + '">' +
                        '<td> <input type="hidden" id="idregistro_LIB[]" name="idregistro_LIB[]" value="0"> <input type="hidden" id="nfila_LIB[]" name="nfila_LIB[]" value="'+nf_libro.toString()+'"> <input autocomplete="off" style="text-align: left; width: 100%; text-transform: uppercase" maxlength="250" id="titulo_LIB[]" name="titulo_LIB[]" type="text" value="" ></td>' +
                        '<td><input autocomplete="off" style="text-align: left; width: 100%; text-transform:  uppercase" maxlength="100" id="codigoisbn_LIB[]" name="codigoisbn_LIB[]" type="text" value="" ></td>' +
                        '<td><input autocomplete="off" style="text-align: left; width: 100%; text-transform: uppercase" maxlength="250" id="editorial_LIB[]" name="editorial_LIB[]" type="text" value="" ></td>' +
                        '<td style="text-align: center"><input type="text" class="selectorfecha" id="fechapublicacion_LIB[]" name="fechapublicacion_LIB[]" value="" readonly style="cursor:text; background-color: #FFFFFF;"/></td>' +
                        '<td> <select style="width: 200px;" class="tipoautorlibro" id="tipoautor_LIB[]" name="tipoautor_LIB[]" >'+valoresSelectTipoAutor+' </select>  </td>' +
                        '<td>&nbsp;</td>' +
                        '<td><label class="btn btn-default"><i class="fa fa-cloud-upload" aria-hidden="true"></i> Selecc <span id="bgaLIB_'+nf_libro.toString()+'" class="badge">0</span><input type="file" style="color: transparent" class="archivosLIB" idf="'+nf_libro.toString()+'" id="archivo_LIB[]" name="archivo_LIB[]" hidden> </label></td>' +
                        '<td><a href="javascript:;" class="btn btn-tini btn-danger eliminaritem_LIB tu" idf="' + nf_libro.toString() + '" idreg="0" title="Eliminar libro"><i class="fa fa-remove"></i></a></td>';

                    $("#detalle_libro").append(nueva);
                    $("#detalle_libro").find(".selectorfecha").datepicker({format:"yyyy-mm-dd"}).on('changeDate', function(ev){ $(this).datepicker('hide'); });
                    $("#detalle_libro").find(".tipoautorlibro").select2();

                    $(".eliminaritem_LIB").unbind("click.eliminaritem_LIB");
                    $(".eliminaritem_LIB").bind("click.eliminaritem_LIB", eliminarItem_LIB);
                    conectar_change_fileinput_LIB();
                    contarFilas_LIB();
                }
            });

            conectar_change_fileinput_LIB=function() {
                $(".archivosLIB").unbind();
                $(".archivosLIB").change(function () {
                    var id = $(this).get(0).files.length;
                    var idf = $(this).attr('idf');
                    $("#bgaLIB_"+idf).html("1");
                    actualizar_lista_tituloarchivo_LIB();
                });
            };

            actualizar_lista_tituloarchivo_LIB = function (){
                lista_items5 = [];
                cf = 1;
                $('input[name="archivo_LIB[]"]').each(function() {
                    if($(this).get(0).files.length > 0){
                        var item = {
                            nfila: $(this).attr('idf'),
                            cfila: cf
                        };
                        lista_items5.push(item);
                    }
                    cf ++;
                });
            };

            eliminarItem_LIB = function() {
                var id = $(this).attr("idf");
                var idregistro = $(this).attr("idreg");

                if(idregistro != '0'){
                    var item = {idregistro: idregistro};
                    lista_items12.push(item)
                }

                $("#fila_LIB_"+id).remove();
                contarFilas_LIB();
                actualizar_lista_tituloarchivo_LIB();
            };

            contarFilas_LIB = function (){
                var rowCount = $("#detalle_libro tr").length;
                $("#bdg_total_libro").html(rowCount);
            }

            datos_libro_completo = function (){
                var c1e = true, c2e = true, c3e = true, c4e = true, c5e = true, c6e = true, c7e = true;

                $('input[name="titulo_LIB[]"]').each(function() {
                    if($(this).val().trim()==''){
                        c1e = false;
                        return false;
                    }
                });

                $('input[name="codigoisbn_LIB[]"]').each(function() {
                    if($(this).val().trim()==''){
                        c2e = false;
                        return false;
                    }
                });

                $('input[name="editorial_LIB[]"]').each(function() {
                    if($(this).val().trim()==''){
                        c3e = false;
                        return false;
                    }
                });

                $('input[name="fechapublicacion_LIB[]"]').each(function() {
                    if($(this).val().trim()==''){
                        c4e = false;
                        return false;
                    }
                });

                $('select[name="tipoautor_LIB[]"]').each(function() {
                    valor = parseInt($(this).val());
                    if(valor == 0){
                        c5e = false;
                        return false;
                    }
                });

                return (c1e && c2e && c3e && c4e && c5e && c6e && c7e);
            };

            $(".agregaitem_capitulolibro").click(function() {
                if(datos_capitulolibro_completo()) {
                    nf_capi += 1;

                    valoresSelectTipoAutor = '<option value="0" selected="selected">--Selecc--</option>';
                    {% for tipoautor in tiposautor %}
                        opcion = '<option value="{{ tipoautor.id }}">{{ tipoautor.descripcion }}</option>';
                        valoresSelectTipoAutor = valoresSelectTipoAutor + opcion;
                    {% endfor %}


                    nueva = '<tr id="fila_CAP_' + nf_capi.toString() + '">' +
                        '<td> <input type="hidden" id="idregistro_CAP[]" name="idregistro_CAP[]" value="0"> <input type="hidden" id="nfila_CAP[]" name="nfila_CAP[]" value="'+nf_capi.toString()+'"> <input autocomplete="off" style="text-align: left; width: 100%; text-transform: uppercase" maxlength="250" id="titulocapitulo_CAP[]" name="titulocapitulo_CAP[]" type="text" value="" ></td>' +
                        '<td><input autocomplete="off" style="text-align: left; width: 100%; text-transform: uppercase" maxlength="250" id="titulolibro_CAP[]" name="titulolibro_CAP[]" type="text" value="" ></td>' +
                        '<td><input autocomplete="off" style="text-align: left; width: 100%; text-transform:  uppercase" maxlength="100" id="codigoisbn_CAP[]" name="codigoisbn_CAP[]" type="text" value="" ></td>' +
                        '<td><input autocomplete="off" style="text-align: left; width: 100%; text-transform: uppercase" maxlength="250" id="editorial_CAP[]" name="editorial_CAP[]" type="text" value="" ></td>' +
                        '<td style="text-align: center"><input type="text" class="selectorfecha" id="fechapublicacion_CAP[]" name="fechapublicacion_CAP[]" value="" readonly style="cursor:text; background-color: #FFFFFF;"/></td>' +
                        '<td> <select style="width: 200px;" class="tipoautorcapitulolibro" id="tipoautor_CAP[]" name="tipoautor_CAP[]" >'+valoresSelectTipoAutor+' </select>  </td>' +
                        '<td>&nbsp;</td>' +
                        '<td><label class="btn btn-default"><i class="fa fa-cloud-upload" aria-hidden="true"></i> Selecc <span id="bgaCAP_'+nf_capi.toString()+'" class="badge">0</span><input type="file" style="color: transparent" class="archivosCAP" idf="'+nf_capi.toString()+'" id="archivo_CAP[]" name="archivo_CAP[]" hidden> </label></td>' +
                        '<td><a href="javascript:;" class="btn btn-tini btn-danger eliminaritem_CAP tu" idf="' + nf_capi.toString() + '" idreg="0" title="Eliminar capitulo de libro"><i class="fa fa-remove"></i></a></td>';

                    $("#detalle_capitulolibro").append(nueva);
                    $("#detalle_capitulolibro").find(".selectorfecha").datepicker({format:"yyyy-mm-dd"}).on('changeDate', function(ev){ $(this).datepicker('hide'); });
                    $("#detalle_capitulolibro").find(".tipoautorcapitulolibro").select2();

                    $(".eliminaritem_CAP").unbind("click.eliminaritem_CAP");
                    $(".eliminaritem_CAP").bind("click.eliminaritem_CAP", eliminarItem_CAP);
                    conectar_change_fileinput_CAP();
                    contarFilas_CAP();
                }
            });

            conectar_change_fileinput_CAP=function() {
                $(".archivosCAP").unbind();
                $(".archivosCAP").change(function () {
                    var id = $(this).get(0).files.length;
                    var idf = $(this).attr('idf');
                    $("#bgaCAP_"+idf).html("1");
                    actualizar_lista_tituloarchivo_CAP();
                });
            };

            actualizar_lista_tituloarchivo_CAP = function (){
                lista_items6 = [];
                cf = 1;
                $('input[name="archivo_CAP[]"]').each(function() {
                    if($(this).get(0).files.length > 0){
                        var item = {
                            nfila: $(this).attr('idf'),
                            cfila: cf
                        };
                        lista_items6.push(item);
                    }
                    cf ++;
                });
            };

            eliminarItem_CAP = function() {
                var id = $(this).attr("idf");
                var idregistro = $(this).attr("idreg");

                if(idregistro != '0'){
                    var item = {idregistro: idregistro};
                    lista_items13.push(item)
                }

                $("#fila_CAP_"+id).remove();
                contarFilas_CAP();
                actualizar_lista_tituloarchivo_CAP();
            };

            contarFilas_CAP = function (){
                var rowCount = $("#detalle_capitulolibro tr").length;
                $("#bdg_total_capitulolibro").html(rowCount);
            }

            datos_capitulolibro_completo = function (){
                var c1e = true, c2e = true, c3e = true, c4e = true, c5e = true, c6e = true, c7e = true;

                $('input[name="titulocapitulo_CAP[]"]').each(function() {
                    if($(this).val().trim()==''){
                        c1e = false;
                        return false;
                    }
                });

                $('input[name="titulolibro_CAP[]"]').each(function() {
                    if($(this).val().trim()==''){
                        c2e = false;
                        return false;
                    }
                });

                $('input[name="codigoisbn_CAP[]"]').each(function() {
                    if($(this).val().trim()==''){
                        c3e = false;
                        return false;
                    }
                });

                $('input[name="editorial_CAP[]"]').each(function() {
                    if($(this).val().trim()==''){
                        c4e = false;
                        return false;
                    }
                });

                $('input[name="fechapublicacion_CAP[]"]').each(function() {
                    if($(this).val().trim()==''){
                        c5e = false;
                        return false;
                    }
                });

                $('select[name="tipoautor_CAP[]"]').each(function() {
                    valor = parseInt($(this).val());
                    if(valor == 0){
                        c6e = false;
                        return false;
                    }
                });

                return (c1e && c2e && c3e && c4e && c5e && c6e && c7e);
            };

            $(".agregaitem_proyecto").click(function() {
                if(datos_proyecto_completo()) {
                    nf_proy += 1;

                    valoresSelectFuncionProyecto = '<option value="0" selected="selected">--Selecc--</option>';
                    {% for funcion in funciones %}
                        opcion = '<option value="{{ funcion.id }}">{{ funcion.descripcion }}</option>';
                        valoresSelectFuncionProyecto = valoresSelectFuncionProyecto + opcion;
                    {% endfor %}


                    nueva = '<tr id="fila_PROY_' + nf_proy.toString() + '">' +
                        '<td> <input type="hidden" id="idregistro_PROY[]" name="idregistro_PROY[]" value="0"> <input type="hidden" id="nfila_PROY[]" name="nfila_PROY[]" value="'+nf_proy.toString()+'"> <input autocomplete="off" style="text-align: left; width: 100%; text-transform: uppercase" maxlength="250" id="titulo_PROY[]" name="titulo_PROY[]" type="text" value="" ></td>' +
                        '<td><input autocomplete="off" style="text-align: left; width: 100%; text-transform: uppercase" maxlength="250" id="institucion_PROY[]" name="institucion_PROY[]" type="text" value="" ></td>' +
                        '<td> <select style="width: 200px;" class="funcioninvestigador" id="funcion_PROY[]" name="funcion_PROY[]" >'+valoresSelectFuncionProyecto+' </select>  </td>' +
                        '<td style="text-align: center"><input type="text" class="selectorfecha" id="fechainicio_PROY[]" name="fechainicio_PROY[]" value="" readonly style="cursor:text; background-color: #FFFFFF;"/></td>' +
                        '<td style="text-align: center"><input type="text" class="selectorfecha" id="fechafin_PROY[]" name="fechafin_PROY[]" value="" readonly style="cursor:text; background-color: #FFFFFF;"/></td>' +
                        '<td>&nbsp;</td>' +
                        '<td><label class="btn btn-default"><i class="fa fa-cloud-upload" aria-hidden="true"></i> Selecc <span id="bgaPROY_'+nf_proy.toString()+'" class="badge">0</span><input type="file" style="color: transparent" class="archivosPROY" idf="'+nf_proy.toString()+'" id="archivo_PROY[]" name="archivo_PROY[]" hidden> </label></td>' +
                        '<td><a href="javascript:;" class="btn btn-tini btn-danger eliminaritem_PROY tu" idf="' + nf_proy.toString() + '" idreg="0" title="Eliminar proyecto de investigación"><i class="fa fa-remove"></i></a></td>';


                    $("#detalle_proyecto").append(nueva);
                    $("#detalle_proyecto").find(".selectorfecha").datepicker({format:"yyyy-mm-dd"}).on('changeDate', function(ev){ $(this).datepicker('hide'); });
                    $("#detalle_proyecto").find(".funcioninvestigador").select2();

                    $(".eliminaritem_PROY").unbind("click.eliminaritem_PROY");
                    $(".eliminaritem_PROY").bind("click.eliminaritem_PROY", eliminarItem_PROY);

                    conectar_change_fileinput_PROY();
                    contarFilas_PROY();
                }
            });

            conectar_change_fileinput_PROY=function() {
                $(".archivosPROY").unbind();
                $(".archivosPROY").change(function () {
                    var id = $(this).get(0).files.length;
                    var idf = $(this).attr('idf');
                    $("#bgaPROY_"+idf).html("1");
                    actualizar_lista_tituloarchivo_PROY();
                });
            };

            actualizar_lista_tituloarchivo_PROY = function (){
                lista_items7 = [];
                cf = 1;
                $('input[name="archivo_PROY[]"]').each(function() {
                    if($(this).get(0).files.length > 0){
                        var item = {
                            nfila: $(this).attr('idf'),
                            cfila: cf
                        };
                        lista_items7.push(item);
                    }
                    cf ++;
                });
            };

            eliminarItem_PROY = function() {
                var id = $(this).attr("idf");
                var idregistro = $(this).attr("idreg");

                if(idregistro != '0'){
                    var item = {idregistro: idregistro};
                    lista_items14.push(item)
                }

                $("#fila_PROY_"+id).remove();
                contarFilas_PROY();
                actualizar_lista_tituloarchivo_PROY();
            };

            contarFilas_PROY = function (){
                var rowCount = $("#detalle_proyecto tr").length;
                $("#bdg_total_proyecto").html(rowCount);
            }

            datos_proyecto_completo = function (){
                var c1e = true, c2e = true, c3e = true, c4e = true, c5e = true, c6e = true, c7e = true;

                $('input[name="titulo_PROY[]"]').each(function() {
                    if($(this).val().trim()==''){
                        c1e = false;
                        return false;
                    }
                });

                $('input[name="institucion_PROY[]"]').each(function() {
                    if($(this).val().trim()==''){
                        c2e = false;
                        return false;
                    }
                });

                $('select[name="funcion_PROY[]"]').each(function() {
                    valor = parseInt($(this).val());
                    if(valor == 0){
                        c3e = false;
                        return false;
                    }
                });

                $('input[name="fechainicio_PROY[]"]').each(function() {
                    if($(this).val().trim()==''){
                        c4e = false;
                        return false;
                    }
                });

                $('input[name="fechafin_PROY[]"]').each(function() {
                    if($(this).val().trim()==''){
                        c5e = false;
                        return false;
                    }
                });

                return (c1e && c2e && c3e && c4e && c5e && c6e && c7e);
            };

            agregarTitulo_FA = function() {
                idfilatitulo = $(this).attr("idf");

                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_proyectoinvestigacion",
                    data: {'action': 'addtitulo'},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodytitulo").html(data.data);
                            $(".paneltitletitulo").html(data.title);
                            $("#itemspaneltitulo").modal({backdrop:'static', width: '700px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            };

            $("#itemspaneltitulo .guardar").click(function () {
                envioformularioreg("/adm_proyectoinvestigacion","addtitulo", false);
                return false;
            });

            $("#itemspaneltitulo .cerrar").click(function () {
                $('#itemspaneltitulo').modal('hide');
            });

            $("#itemspaneltitulo .cerrar2").click(function () {
                $('#itemspaneltitulo').modal('hide');
            });

            envioformularioreg = function(url, action, destino){
                if(action == 'addtitulo')
                    var valido = validarformulariotitulo();
                else if(action == 'adduniversidad' )
                    var valido = validarformularinstitucion();

                if (valido){
                    bloqueointerface();
                    if(action == 'addtitulo')
                        var formdata = new FormData($("#formulario2")[0]);

                    else if(action == 'adduniversidad')
                        var formdata = new FormData($("#formulario3")[0]);

                    $.ajax({
                        type: "POST",
                        action : action,
                        url: url,
                        data:  formdata,
                        success: function(data) {
                            if (data.result == 'ok') {
                                $.unblockUI();
                                if(action == 'addtitulo'){
                                    actualizarSelectTitulo(data.id, data.nombre);
                                    $('#itemspaneltitulo').modal('hide');
                                }
                                else if(action == 'adduniversidad'){
                                    idnuevauni = data.id;
                                    nombrenuevauni = data.nombre;
                                    actualizarSelectUniversidad(data.id, data.nombre);
                                    $('#itemspaneluniversidad').modal('hide');
                                }
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        },
                        error: function() {
                            $.unblockUI();
                            smoke.alert("Error al enviar los datos.");
                        },
                        dataType: "json",
                        cache: false,
                        contentType: false,
                        processData: false
                    });
                }
            };

            validarformulariotitulo = function (){
                var validacion = true;

                if($("#nombre").val()==''){
                    smoke.alert("Ingrese el nombre");
                    return false;
                }

                if($("#abreviatura").val()==''){
                    smoke.alert("Ingrese la abreviatura");
                    return false;
                }

                if($("#tiponivel").val()==''){
                    smoke.alert("Seleccione el tipo de nivel");
                    return false;
                }

                if($("#areaconocimiento").val()==''){
                    smoke.alert("Seleccione el área de conocimiento");
                    return false;
                }

                if($("#subareaconocimiento").val()==''){
                    smoke.alert("Seleccione la sub-área de conocimiento");
                    return false;
                }

                if($("#subareaconocimientoespecifica").val()==''){
                    smoke.alert("Seleccione la sub-área específica de conocimiento");
                    return false;
                }

                return validacion;
            };

            actualizarSelectTitulo = function (id, nombre){
                $('select[name="tituloacademico_FA[]"]').each(function() {
                    valor = $(this).attr('indice');
                    if(parseInt(valor) == parseInt(idfilatitulo)){
                        var data = {
                            id: id,
                            text: nombre
                        };
                        var newOption = new Option(data.text, data.id, true, true);
                        $(this).append(newOption).trigger('change');
                    }
                });
            }

            agregarInstitucion_FA = function() {
                idfilauniversidad = $(this).attr("idf");

                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_proyectoinvestigacion",
                    data: {'action': 'adduniversidad'},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyuniversidad").html(data.data);
                            $(".paneltitleuniversidad").html(data.title);
                            $("#itemspaneluniversidad").modal({backdrop:'static', width: '700px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            };

            $("#itemspaneluniversidad .guardar").click(function () {
                envioformularioreg("/adm_proyectoinvestigacion","adduniversidad", false);
                return false;
            });

            $("#itemspaneluniversidad .cerrar").click(function () {
                $('#itemspaneluniversidad').modal('hide');
            });

            $("#itemspaneluniversidad .cerrar2").click(function () {
                $('#itemspaneluniversidad').modal('hide');
            });

            validarformularinstitucion = function (){
                var validacion = true;

                if($("#nombreuniversidad").val()==''){
                    smoke.alert("Ingrese el nombre");
                    return false;
                }

                if($("#paisuniversidad").val()==''){
                    smoke.alert("Seleccione el país");
                    return false;
                }

                return validacion;
            };

            actualizarSelectUniversidad = function (id, nombre){
                $('select[name="universidad_FA[]"]').each(function() {
                    valor = $(this).attr('indice');
                    if(parseInt(valor) == parseInt(idfilauniversidad)){
                        var data = {
                            id: id,
                            text: nombre
                        };
                        var newOption = new Option(data.text, data.id, true, true);
                        $(this).append(newOption).trigger('change');
                    }
                });
            }

            {% for formacion in formacionacademica %}
                nf_formac += 1;

                valoresSelectTitulo = '<option value="0" selected="selected">--Selecc--</option>';
                {% for titulo in titulos %}
                    opcion = '<option value="{{ titulo.id }}" {% if titulo.id == formacion.titulo.id %}selected{% endif %}>{{ titulo.nombre }}</option>';
                    valoresSelectTitulo = valoresSelectTitulo + opcion;
                {% endfor %}

                valoresSelectUniversidad = '<option value="0" selected="selected">--Selecc--</option>';
                {% for universidad in universidades %}
                    opcion = '<option value="{{ universidad.id }}" {% if universidad.id == formacion.institucion.id %}selected{% endif %}>{{ universidad.nombre }}</option>';
                    valoresSelectUniversidad = valoresSelectUniversidad + opcion;
                {% endfor %}

                valoresSelectPaisUni = '<option value="0" selected="selected">--Selecc--</option>';
                {% for pais in paises %}
                    opcion = '<option value="{{ pais.id }}" {% if pais.id == formacion.pais.id %}selected{% endif %}>{{ pais.nombre }}</option>';
                    valoresSelectPaisUni = valoresSelectPaisUni + opcion;
                {% endfor %}

                nueva = '<tr id="fila_FA_' + nf_formac.toString() + '">' +
                        '<td> <input type="hidden" id="idregistro_FA[]" name="idregistro_FA[]" value="{{ formacion.id }}"> <input type="hidden" id="nfila_FA[]" name="nfila_FA[]" value="'+nf_formac.toString()+'">  <a href="javascript:;" class="btn btn-tini btn-success agregartitulo_FA tu" abrev="FA"  idf="' + nf_formac.toString() + '" title="Agregar Título"><i class="fa fa-plus"></i></a>  <select style="width: 350px;" class="tituloacademico" id="tituloacademico_FA[]" name="tituloacademico_FA[]" indice="'+nf_formac.toString()+'" >'+valoresSelectTitulo+' </select>  </td>' +
                        '<td> <a href="javascript:;" class="btn btn-tini btn-success agregarinstitucion_FA tu" abrev="FA"  idf="' + nf_formac.toString() + '" title="Agregar Institución"><i class="fa fa-plus"></i></a>  <select style="width: 350px;" class="universidad" id="universidad_FA[]" name="universidad_FA[]" indice="'+nf_formac.toString()+'" >'+valoresSelectUniversidad+' </select>  </td>' +
                        '<td style="text-align: center"><input type="text" class="selectorfecha" id="fechaobtencion_FA[]" name="fechaobtencion_FA[]" value="{{ formacion.fechaobtencion|date:'Y-m-d' }}" readonly style="cursor:text; background-color: #FFFFFF;"/></td>' +
                        '<td> <select style="width: 200px;" class="paistitulo" id="pais_FA[]" name="pais_FA[]" >'+valoresSelectPaisUni+' </select>  </td>' +
                        '<td> {% if formacion.archivo %} <a target="_blank" href="{{ formacion.archivo.url }}" class="btn btn-mini btn-success tu" data-toggle="tooltip" data-placement="top" data-original-title="Descargar"><i class="fa fa-download"></i> </a>  {% endif %}</td>' +
                        '<td><label class="btn btn-default"><i class="fa fa-cloud-upload" aria-hidden="true"></i> Selecc <span id="bgaFA_'+nf_formac.toString()+'" class="badge">0</span><input type="file" style="color: transparent" class="archivosFA" idf="'+nf_formac.toString()+'" id="archivo_FA[]" name="archivo_FA[]" hidden> </label></td>' +
                        '<td><a href="javascript:;" class="btn btn-tini btn-danger eliminaritem_FA tu" idf="' + nf_formac.toString() + '" idreg="{{ formacion.id }}" title="Eliminar formación académica"><i class="fa fa-remove"></i></a></td>';

                    $("#detalle_formacion_academica").append(nueva);
                    $("#detalle_formacion_academica").find(".tituloacademico").select2();
                    $("#detalle_formacion_academica").find(".universidad").select2();
                    $("#detalle_formacion_academica").find(".paistitulo").select2();
                    $("#detalle_formacion_academica").find(".selectorfecha").datepicker({format:"yyyy-mm-dd"}).on('changeDate', function(ev){ $(this).datepicker('hide'); });
                    $(".agregartitulo_FA").unbind("click.agregartitulo_FA");
                    $(".agregartitulo_FA").bind("click.agregartitulo_FA", agregarTitulo_FA);
                    $(".agregarinstitucion_FA").unbind("click.agregarinstitucion_FA");
                    $(".agregarinstitucion_FA").bind("click.agregarinstitucion_FA", agregarInstitucion_FA);
                    $(".eliminaritem_FA").unbind("click.eliminarItem_FA");
                    $(".eliminaritem_FA").bind("click.eliminarItem_FA", eliminarItem_FA);

                    conectar_change_fileinput_FA();
                    contarFilas_FA();
            {% endfor %}

            {% for experiencia in experiencias %}
                nf_expe += 1;

                nueva = '<tr id="fila_EXP_' + nf_expe.toString() + '">' +
                    '<td> <input type="hidden" id="idregistro_EXP[]" name="idregistro_EXP[]" value="{{ experiencia.id }}"> <input type="hidden" id="nfila_EXP[]" name="nfila_EXP[]" value="'+nf_expe.toString()+'">  <input autocomplete="off" style="text-align: left; width: 100%; text-transform: uppercase" maxlength="250" id="cargo_EXP[]" name="cargo_EXP[]" type="text" value="{{ experiencia.cargo }}" ></td>' +
                    '<td><input autocomplete="off" style="text-align: left; width: 100%; text-transform: uppercase" maxlength="250" id="institucion_EXP[]" name="institucion_EXP[]" type="text" value="{{ experiencia.institucion }}" ></td>' +
                    '<td style="text-align: center"><input type="text" class="selectorfecha" id="fechainicio_EXP[]" name="fechainicio_EXP[]" value="{{ experiencia.fechainicio|date:'Y-m-d' }}" readonly style="cursor:text; background-color: #FFFFFF;"/></td>' +
                    '<td style="text-align: center"><input type="text" class="selectorfecha" id="fechafin_EXP[]" name="fechafin_EXP[]" value="{{ experiencia.fechafin|date:'Y-m-d' }}" readonly style="cursor:text; background-color: #FFFFFF;"/></td>' +
                    '<td> {% if experiencia.archivo %} <a target="_blank" href="{{ experiencia.archivo.url }}" class="btn btn-mini btn-success tu" data-toggle="tooltip" data-placement="top" data-original-title="Descargar"><i class="fa fa-download"></i> </a>  {% endif %}</td>' +
                    '<td><label class="btn btn-default"><i class="fa fa-cloud-upload" aria-hidden="true"></i> Selecc <span id="bgaEXP_'+nf_expe.toString()+'" class="badge">0</span><input type="file" style="color: transparent" class="archivosEXP" idf="'+nf_expe.toString()+'" id="archivo_EXP[]" name="archivo_EXP[]" hidden> </label></td>' +
                    '<td><a href="javascript:;" class="btn btn-tini btn-danger eliminaritem_EXP tu" idf="' + nf_expe.toString() + '" idreg="{{ experiencia.id }}" title="Eliminar experiencia"><i class="fa fa-remove"></i></a></td>';

                $("#detalle_experiencia").append(nueva);
                $("#detalle_experiencia").find(".selectorfecha").datepicker({format:"yyyy-mm-dd"}).on('changeDate', function(ev){ $(this).datepicker('hide'); });


                $(".eliminaritem_EXP").unbind("click.eliminarItem_EXP");
                $(".eliminaritem_EXP").bind("click.eliminarItem_EXP", eliminarItem_EXP);

                conectar_change_fileinput_EXP();
                contarFilas_EXP();
            {% endfor %}

            {% for articulo in articulos %}
                nf_arti += 1;

                valoresSelectTipoAutor = '<option value="0" selected="selected">--Selecc--</option>';
                {% for tipoautor in tiposautor %}
                    opcion = '<option value="{{ tipoautor.id }}" {% if tipoautor.id == articulo.tipoautor %}selected{% endif %}>{{ tipoautor.descripcion }}</option>';
                    valoresSelectTipoAutor = valoresSelectTipoAutor + opcion;
                {% endfor %}


                nueva = '<tr id="fila_ART_' + nf_arti.toString() + '">' +
                    '<td> <input type="hidden" id="idregistro_ART[]" name="idregistro_ART[]" value="{{ articulo.id }}" > <input type="hidden" id="nfila_ART[]" name="nfila_ART[]" value="'+nf_arti.toString()+'"> <input autocomplete="off" style="text-align: left; width: 100%; text-transform: uppercase" maxlength="250" id="titulo_ART[]" name="titulo_ART[]" type="text" value="{{ articulo.titulo }}" ></td>' +
                    '<td><input autocomplete="off" style="text-align: left; width: 100%; text-transform:  uppercase" maxlength="250" id="revista_ART[]" name="revista_ART[]" type="text" value="{{ articulo.revista }}" ></td>' +
                    '<td><input autocomplete="off" style="text-align: left; width: 100%; text-transform:  uppercase" maxlength="250" id="baseindexada_ART[]" name="baseindexada_ART[]" type="text" value="{{ articulo.baseindexada }}" ></td>' +
                    '<td style="text-align: center"><input type="text" class="selectorfecha" id="fechapublica_ART[]" name="fechapublica_ART[]" value="{{ articulo.fechapublicacion|date:'Y-m-d' }}" readonly style="cursor:text; background-color: #FFFFFF;"/></td>' +
                    '<td> <select style="width: 100px;" class="tipoautorarticulo" id="tipoautor_ART[]" name="tipoautor_ART[]" >'+valoresSelectTipoAutor+' </select>  </td>' +
                    '<td> {% if articulo.archivo %} <a target="_blank" href="{{ articulo.archivo.url }}" class="btn btn-mini btn-success tu" data-toggle="tooltip" data-placement="top" data-original-title="Descargar"><i class="fa fa-download"></i> </a>  {% endif %}</td>' +
                    '<td><label class="btn btn-default"><i class="fa fa-cloud-upload" aria-hidden="true"></i> Selecc <span id="bgaART_'+nf_arti.toString()+'" class="badge">0</span><input type="file" style="color: transparent" class="archivosART" idf="'+nf_arti.toString()+'" id="archivo_ART[]" name="archivo_ART[]" hidden> </label></td>' +
                    '<td><a href="javascript:;" class="btn btn-tini btn-danger eliminaritem_ART tu" idf="' + nf_arti.toString() + '" idreg="{{ articulo.id }}" title="Eliminar artículo"><i class="fa fa-remove"></i></a></td>';

                $("#detalle_articulo").append(nueva);
                $("#detalle_articulo").find(".selectorfecha").datepicker({format:"yyyy-mm-dd"}).on('changeDate', function(ev){ $(this).datepicker('hide'); });
                $("#detalle_articulo").find(".tipoautorarticulo").select2();
                $(".eliminaritem_ART").unbind("click.eliminaritem_ART");
                $(".eliminaritem_ART").bind("click.eliminaritem_ART", eliminarItem_ART);
                conectar_change_fileinput_ART();
                contarFilas_ART();
            {% endfor %}

            {% for ponencia in ponencias %}
                nf_ponen += 1;

                valoresSelectPaisPonen = '<option value="0" selected="selected">--Selecc--</option>';
                {% for pais in paises %}
                    opcion = '<option value="{{ pais.id }}" {% if pais.id == ponencia.pais.id %}selected{% endif %}>{{ pais.nombre }}</option>';
                    valoresSelectPaisPonen = valoresSelectPaisPonen + opcion;
                {% endfor %}

                valoresSelectTipoAutor = '<option value="0" selected="selected">--Selecc--</option>';
                {% for tipoautor in tiposautor %}
                    opcion = '<option value="{{ tipoautor.id }}" {% if tipoautor.id == ponencia.tipoautor %}selected{% endif %}>{{ tipoautor.descripcion }}</option>';
                    valoresSelectTipoAutor = valoresSelectTipoAutor + opcion;
                {% endfor %}


                nueva = '<tr id="fila_PON_' + nf_ponen.toString() + '">' +
                    '<td> <input type="hidden" id="idregistro_PON[]" name="idregistro_PON[]" value="{{ ponencia.id }}" > <input type="hidden" id="nfila_PON[]" name="nfila_PON[]" value="'+nf_ponen.toString()+'">  <input autocomplete="off" style="text-align: left; width: 100%; text-transform: uppercase" maxlength="250" id="titulo_PON[]" name="titulo_PON[]" type="text" value="{{ ponencia.titulo }}" ></td>' +
                    '<td><input autocomplete="off" style="text-align: left; width: 100%; text-transform:  uppercase" maxlength="250" id="congreso_PON[]" name="congreso_PON[]" type="text" value="{{ ponencia.congreso }}" ></td>' +
                    '<td style="text-align: center"><input type="text" class="selectorfecha" id="fechainiciocongreso_PON[]" name="fechainiciocongreso_PON[]" value="{{ ponencia.fechainicio|date:'Y-m-d' }}" readonly style="cursor:text; background-color: #FFFFFF;"/></td>' +
                    '<td style="text-align: center"><input type="text" class="selectorfecha" id="fechafincongreso_PON[]" name="fechafincongreso_PON[]" value="{{ ponencia.fechafin|date:'Y-m-d' }}" readonly style="cursor:text; background-color: #FFFFFF;"/></td>' +
                    '<td> <select style="width: 200px;" class="paisponencia" id="pais_PON[]" name="pais_PON[]" >'+valoresSelectPaisPonen+' </select>  </td>' +
                    '<td><input autocomplete="off" style="text-align: left; width: 100%; text-transform: uppercase" maxlength="100" id="ciudad_PON[]" name="ciudad_PON[]" type="text" value="{{ ponencia.ciudad }}" ></td>' +
                    '<td> <select style="width: 100px;" class="tipoautorponencia" id="tipoautor_PON[]" name="tipoautor_PON[]" >'+valoresSelectTipoAutor+' </select>  </td>' +
                    '<td> {% if ponencia.archivo %} <a target="_blank" href="{{ ponencia.archivo.url }}" class="btn btn-mini btn-success tu" data-toggle="tooltip" data-placement="top" data-original-title="Descargar"><i class="fa fa-download"></i> </a>  {% endif %}</td>' +
                    '<td><label class="btn btn-default"><i class="fa fa-cloud-upload" aria-hidden="true"></i> Selecc <span id="bgaPON_'+nf_ponen.toString()+'" class="badge">0</span><input type="file" style="color: transparent" class="archivosPON" idf="'+nf_ponen.toString()+'" id="archivo_PON[]" name="archivo_PON[]" hidden> </label></td>' +
                    '<td><a href="javascript:;" class="btn btn-tini btn-danger eliminaritem_PON tu" idf="' + nf_ponen.toString() + '" idreg="{{ ponencia.id }}" title="Eliminar ponencia"><i class="fa fa-remove"></i></a></td>';


                $("#detalle_ponencia").append(nueva);
                $("#detalle_ponencia").find(".selectorfecha").datepicker({format:"yyyy-mm-dd"}).on('changeDate', function(ev){ $(this).datepicker('hide'); });
                $("#detalle_ponencia").find(".paisponencia").select2();
                $("#detalle_ponencia").find(".tipoautorponencia").select2();

                $(".eliminaritem_PON").unbind("click.eliminaritem_PON");
                $(".eliminaritem_PON").bind("click.eliminaritem_PON", eliminarItem_PON);

                conectar_change_fileinput_PON();
                contarFilas_PON();
            {% endfor %}

            {% for libro in libros %}
                nf_libro += 1;

                valoresSelectTipoAutor = '<option value="0" selected="selected">--Selecc--</option>';
                {% for tipoautor in tiposautor %}
                    opcion = '<option value="{{ tipoautor.id }}" {% if tipoautor.id == libro.tipoautor %}selected{% endif %}>{{ tipoautor.descripcion }}</option>';
                    valoresSelectTipoAutor = valoresSelectTipoAutor + opcion;
                {% endfor %}


                nueva = '<tr id="fila_LIB_' + nf_libro.toString() + '">' +
                    '<td> <input type="hidden" id="idregistro_LIB[]" name="idregistro_LIB[]" value="{{ libro.id }}"> <input type="hidden" id="nfila_LIB[]" name="nfila_LIB[]" value="'+nf_libro.toString()+'"> <input autocomplete="off" style="text-align: left; width: 100%; text-transform: uppercase" maxlength="250" id="titulo_LIB[]" name="titulo_LIB[]" type="text" value="{{ libro.titulolibro }}" ></td>' +
                    '<td><input autocomplete="off" style="text-align: left; width: 100%; text-transform:  uppercase" maxlength="100" id="codigoisbn_LIB[]" name="codigoisbn_LIB[]" type="text" value="{{ libro.codigoisbn }}" ></td>' +
                    '<td><input autocomplete="off" style="text-align: left; width: 100%; text-transform: uppercase" maxlength="250" id="editorial_LIB[]" name="editorial_LIB[]" type="text" value="{{ libro.editorial }}" ></td>' +
                    '<td style="text-align: center"><input type="text" class="selectorfecha" id="fechapublicacion_LIB[]" name="fechapublicacion_LIB[]" value="{{ libro.fechapublicacion|date:'Y-m-d' }}" readonly style="cursor:text; background-color: #FFFFFF;"/></td>' +
                    '<td> <select style="width: 200px;" class="tipoautorlibro" id="tipoautor_LIB[]" name="tipoautor_LIB[]" >'+valoresSelectTipoAutor+' </select>  </td>' +
                    '<td> {% if libro.archivo %} <a target="_blank" href="{{ libro.archivo.url }}" class="btn btn-mini btn-success tu" data-toggle="tooltip" data-placement="top" data-original-title="Descargar"><i class="fa fa-download"></i> </a>  {% endif %}</td>' +
                    '<td><label class="btn btn-default"><i class="fa fa-cloud-upload" aria-hidden="true"></i> Selecc <span id="bgaLIB_'+nf_libro.toString()+'" class="badge">0</span><input type="file" style="color: transparent" class="archivosLIB" idf="'+nf_libro.toString()+'" id="archivo_LIB[]" name="archivo_LIB[]" hidden> </label></td>' +
                    '<td><a href="javascript:;" class="btn btn-tini btn-danger eliminaritem_LIB tu" idf="' + nf_libro.toString() + '" idreg="{{ libro.id }}" title="Eliminar libro"><i class="fa fa-remove"></i></a></td>';

                $("#detalle_libro").append(nueva);
                $("#detalle_libro").find(".selectorfecha").datepicker({format:"yyyy-mm-dd"}).on('changeDate', function(ev){ $(this).datepicker('hide'); });
                $("#detalle_libro").find(".tipoautorlibro").select2();

                $(".eliminaritem_LIB").unbind("click.eliminaritem_LIB");
                $(".eliminaritem_LIB").bind("click.eliminaritem_LIB", eliminarItem_LIB);
                conectar_change_fileinput_LIB();
                contarFilas_LIB();
            {% endfor %}

            {% for capitulo in capitulos %}
                nf_capi += 1;

                valoresSelectTipoAutor = '<option value="0" selected="selected">--Selecc--</option>';
                {% for tipoautor in tiposautor %}
                    opcion = '<option value="{{ tipoautor.id }}" {% if tipoautor.id == capitulo.tipoautor %}selected{% endif %}>{{ tipoautor.descripcion }}</option>';
                    valoresSelectTipoAutor = valoresSelectTipoAutor + opcion;
                {% endfor %}


                nueva = '<tr id="fila_CAP_' + nf_capi.toString() + '">' +
                    '<td> <input type="hidden" id="idregistro_CAP[]" name="idregistro_CAP[]" value="{{ capitulo.id }}"> <input type="hidden" id="nfila_CAP[]" name="nfila_CAP[]" value="'+nf_capi.toString()+'"> <input autocomplete="off" style="text-align: left; width: 100%; text-transform: uppercase" maxlength="250" id="titulocapitulo_CAP[]" name="titulocapitulo_CAP[]" type="text" value="{{ capitulo.titulocapitulo }}" ></td>' +
                    '<td><input autocomplete="off" style="text-align: left; width: 100%; text-transform: uppercase" maxlength="250" id="titulolibro_CAP[]" name="titulolibro_CAP[]" type="text" value="{{ capitulo.titulolibro }}" ></td>' +
                    '<td><input autocomplete="off" style="text-align: left; width: 100%; text-transform:  uppercase" maxlength="100" id="codigoisbn_CAP[]" name="codigoisbn_CAP[]" type="text" value="{{ capitulo.codigoisbn }}" ></td>' +
                    '<td><input autocomplete="off" style="text-align: left; width: 100%; text-transform: uppercase" maxlength="250" id="editorial_CAP[]" name="editorial_CAP[]" type="text" value="{{ capitulo.editorial }}" ></td>' +
                    '<td style="text-align: center"><input type="text" class="selectorfecha" id="fechapublicacion_CAP[]" name="fechapublicacion_CAP[]" value="{{ capitulo.fechapublicacion|date:'Y-m-d' }}" readonly style="cursor:text; background-color: #FFFFFF;"/></td>' +
                    '<td> <select style="width: 200px;" class="tipoautorcapitulolibro" id="tipoautor_CAP[]" name="tipoautor_CAP[]" >'+valoresSelectTipoAutor+' </select>  </td>' +
                    '<td> {% if capitulo.archivo %} <a target="_blank" href="{{ capitulo.archivo.url }}" class="btn btn-mini btn-success tu" data-toggle="tooltip" data-placement="top" data-original-title="Descargar"><i class="fa fa-download"></i> </a>  {% endif %}</td>' +
                    '<td><label class="btn btn-default"><i class="fa fa-cloud-upload" aria-hidden="true"></i> Selecc <span id="bgaCAP_'+nf_capi.toString()+'" class="badge">0</span><input type="file" style="color: transparent" class="archivosCAP" idf="'+nf_capi.toString()+'" id="archivo_CAP[]" name="archivo_CAP[]" hidden> </label></td>' +
                    '<td><a href="javascript:;" class="btn btn-tini btn-danger eliminaritem_CAP tu" idf="' + nf_capi.toString() + '" idreg="{{ capitulo.id }}" title="Eliminar capitulo de libro"><i class="fa fa-remove"></i></a></td>';

                $("#detalle_capitulolibro").append(nueva);
                $("#detalle_capitulolibro").find(".selectorfecha").datepicker({format:"yyyy-mm-dd"}).on('changeDate', function(ev){ $(this).datepicker('hide'); });
                $("#detalle_capitulolibro").find(".tipoautorcapitulolibro").select2();

                $(".eliminaritem_CAP").unbind("click.eliminaritem_CAP");
                $(".eliminaritem_CAP").bind("click.eliminaritem_CAP", eliminarItem_CAP);
                conectar_change_fileinput_CAP();
                contarFilas_CAP();
            {% endfor %}

            {% for proyecto in proyectos %}
                nf_proy += 1;

                valoresSelectFuncionProyecto = '<option value="0" selected="selected">--Selecc--</option>';
                {% for funcion in funciones %}
                    opcion = '<option value="{{ funcion.id }}" {% if funcion.id == proyecto.funcion %}selected{% endif %}>{{ funcion.descripcion }}</option>';
                    valoresSelectFuncionProyecto = valoresSelectFuncionProyecto + opcion;
                {% endfor %}


                nueva = '<tr id="fila_PROY_' + nf_proy.toString() + '">' +
                    '<td> <input type="hidden" id="idregistro_PROY[]" name="idregistro_PROY[]" value="{{ proyecto.id }}"> <input type="hidden" id="nfila_PROY[]" name="nfila_PROY[]" value="'+nf_proy.toString()+'"> <input autocomplete="off" style="text-align: left; width: 100%; text-transform: uppercase" maxlength="250" id="titulo_PROY[]" name="titulo_PROY[]" type="text" value="{{ proyecto.titulo }}" ></td>' +
                    '<td><input autocomplete="off" style="text-align: left; width: 100%; text-transform: uppercase" maxlength="250" id="institucion_PROY[]" name="institucion_PROY[]" type="text" value="{{ proyecto.patrocinador }}" ></td>' +
                    '<td> <select style="width: 200px;" class="funcioninvestigador" id="funcion_PROY[]" name="funcion_PROY[]" >'+valoresSelectFuncionProyecto+' </select>  </td>' +
                    '<td style="text-align: center"><input type="text" class="selectorfecha" id="fechainicio_PROY[]" name="fechainicio_PROY[]" value="{{ proyecto.fechainicio|date:'Y-m-d' }}" readonly style="cursor:text; background-color: #FFFFFF;"/></td>' +
                    '<td style="text-align: center"><input type="text" class="selectorfecha" id="fechafin_PROY[]" name="fechafin_PROY[]" value="{{ proyecto.fechafin|date:'Y-m-d' }}" readonly style="cursor:text; background-color: #FFFFFF;"/></td>' +
                    '<td> {% if proyecto.archivo %} <a target="_blank" href="{{ proyecto.archivo.url }}" class="btn btn-mini btn-success tu" data-toggle="tooltip" data-placement="top" data-original-title="Descargar"><i class="fa fa-download"></i> </a>  {% endif %}</td>' +
                    '<td><label class="btn btn-default"><i class="fa fa-cloud-upload" aria-hidden="true"></i> Selecc <span id="bgaPROY_'+nf_proy.toString()+'" class="badge">0</span><input type="file" style="color: transparent" class="archivosPROY" idf="'+nf_proy.toString()+'" id="archivo_PROY[]" name="archivo_PROY[]" hidden> </label></td>' +
                    '<td><a href="javascript:;" class="btn btn-tini btn-danger eliminaritem_PROY tu" idf="' + nf_proy.toString() + '" idreg="{{ proyecto.id }}" title="Eliminar proyecto de investigación"><i class="fa fa-remove"></i></a></td>';


                $("#detalle_proyecto").append(nueva);
                $("#detalle_proyecto").find(".selectorfecha").datepicker({format:"yyyy-mm-dd"}).on('changeDate', function(ev){ $(this).datepicker('hide'); });
                $("#detalle_proyecto").find(".funcioninvestigador").select2();

                $(".eliminaritem_PROY").unbind("click.eliminaritem_PROY");
                $(".eliminaritem_PROY").bind("click.eliminaritem_PROY", eliminarItem_PROY);

                conectar_change_fileinput_PROY();
                contarFilas_PROY();
            {% endfor %}

            $("#id_funcionproyecto option[value='1']").remove();
            $("#id_email").css('text-transform', 'lowercase');
            $("#id_identificadororcid").css('text-transform', 'none');
        });
    </script>
{% endblock %}
{% block atras %}/adm_proyectoinvestigacion?action=evaluadores{% endblock %}
{% block titulo %}{{ title }}{% endblock %}
{% block formaction %}/adm_proyectoinvestigacion?action=evaluadores{% endblock %}
{% block formwidth %}form-l{%  endblock %}
{% block formdestination %}/adm_proyectoinvestigacion?action=evaluadores{% endblock %}
{% block formextra %}
    <input type='hidden' name='action' value='editevaluadorexterno'/>
    <input type='hidden' name='idper' value='{{ personaexterna.id|encrypt }}'/>
    <input type='hidden' name='id' value='{{ evaluador.id|encrypt }}'/>
{% endblock %}
{% block formback %}/adm_proyectoinvestigacion?action=evaluadores{% endblock %}
{% block buttonname %}Guardar{% endblock %}
{#{% block formsuffix %}#}
{#    <div class="row-fluid" id="detallecronograma">#}
{#        <div style="width: 100%; height: max-content; display: inline-block">#}
{#            <h6 style="width:100%; text-align:left; border-bottom: 1px solid #98a3ab; line-height:0.1em; margin:10px 0 20px;"><span style="padding:0 10px; background: #f5f5f5;">Formación Académica, Experiencia, Producción Científica y Proyectos</span></h6>#}
{#        </div>#}
{#        <div class="accordion" id="accordion2">#}
{##}
{#            <div class="accordion-group">#}
{#                <div class="accordion-heading" style="background-color: whitesmoke">#}
{#                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapse_1">#}
{#                        Formación Académica <span class="badge badge-info tu" title="Total Registros" id="bdg_total_formacion">0</span>#}
{#                    </a>#}
{#                </div>#}
{#                <div id="collapse_1" class="accordion-body collapse in">#}
{#                    <div class="accordion-inner" style="padding: 5px">#}
{#                        <table class="table table-bordered" id="tb_formacion_academica">#}
{#                            <thead>#}
{#                                <tr>#}
{#                                    <th width="34%" style="text-align: center">Título Obtenido</th>#}
{#                                    <th width="34%" style="text-align: center">Institución</th>#}
{#                                    <th width="10%" style="text-align: center">Fecha Obtención</th>#}
{#                                    <th width="20%" style="text-align: center">País</th>#}
{#                                    <th width="2%" style="text-align: center">...</th>#}
{#                                    <th width="5%" style="text-align: center">Archivo</th>#}
{#                                    <th width="2%"><a href="javascript:;" class="btn btn-success btn-mini agregaitem_formacion" title="Agregar Formación"><i class="fa fa-plus"></i> </a></th>#}
{#                                </tr>#}
{#                            </thead>#}
{#                            <tbody id="detalle_formacion_academica">#}
{##}
{#                            </tbody>#}
{#                        </table>#}
{#                    </div>#}
{#                </div>#}
{#            </div>#}
{##}
{#            <div class="accordion-group">#}
{#                <div class="accordion-heading" style="background-color: whitesmoke">#}
{#                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapse_2">#}
{#                        Experiencia Académica e Investigativa <span class="badge badge-info tu" title="Total Registros" id="bdg_total_experiencia">0</span>#}
{#                    </a>#}
{#                </div>#}
{#                <div id="collapse_2" class="accordion-body collapse in">#}
{#                    <div class="accordion-inner" style="padding: 5px">#}
{#                        <table class="table table-bordered" id="tb_experiencia">#}
{#                            <thead>#}
{#                                <tr>#}
{#                                    <th width="35%" style="text-align: center">Cargo</th>#}
{#                                    <th width="30%" style="text-align: center">Institución</th>#}
{#                                    <th width="10%" style="text-align: center">Fecha Inicio</th>#}
{#                                    <th width="10%" style="text-align: center">Fecha Fin</th>#}
{#                                    <th width="2%" style="text-align: center">...</th>#}
{#                                    <th width="5%" style="text-align: center">Archivo</th>#}
{#                                    <th width="2%"><a href="javascript:;" class="btn btn-success btn-mini agregaitem_experiencia" title="Agregar Experiencia"><i class="fa fa-plus"></i> </a></th>#}
{#                                </tr>#}
{#                            </thead>#}
{#                            <tbody id="detalle_experiencia">#}
{##}
{#                            </tbody>#}
{#                        </table>#}
{#                    </div>#}
{#                </div>#}
{#            </div>#}
{##}
{#            <div class="accordion-group">#}
{#                <div class="accordion-heading" style="background-color: whitesmoke">#}
{#                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapse_3">#}
{#                        Producción Científica ( Artículos ) <span class="badge badge-info tu" title="Total Registros" id="bdg_total_articulo">0</span>#}
{#                    </a>#}
{#                </div>#}
{#                <div id="collapse_3" class="accordion-body collapse in">#}
{#                    <div class="accordion-inner" style="padding: 5px">#}
{#                        <table class="table table-bordered" id="tb_articulo">#}
{#                            <thead>#}
{#                                <tr>#}
{#                                    <th width="30%" style="text-align: center">Título Artículo</th>#}
{#                                    <th width="25%" style="text-align: center">Revista</th>#}
{#                                    <th width="18%" style="text-align: center">Bases Indexadas</th>#}
{#                                    <th width="10%" style="text-align: center">Fecha Publicación</th>#}
{#                                    <th width="10%" style="text-align: center">Tipo Autor</th>#}
{#                                    <th width="2%" style="text-align: center">...</th>#}
{#                                    <th width="5%" style="text-align: center">Archivo</th>#}
{#                                    <th width="2%"><a href="javascript:;" class="btn btn-success btn-mini agregaitem_articulo" title="Agregar Artículo"><i class="fa fa-plus"></i> </a></th>#}
{#                                </tr>#}
{#                            </thead>#}
{#                            <tbody id="detalle_articulo">#}
{##}
{#                            </tbody>#}
{#                        </table>#}
{#                    </div>#}
{#                </div>#}
{#            </div>#}
{##}
{#            <div class="accordion-group">#}
{#                <div class="accordion-heading" style="background-color: whitesmoke">#}
{#                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapse_4">#}
{#                        Producción Científica ( Ponencias ) <span class="badge badge-info tu" title="Total Registros" id="bdg_total_ponencia">0</span>#}
{#                    </a>#}
{#                </div>#}
{#                <div id="collapse_4" class="accordion-body collapse in">#}
{#                    <div class="accordion-inner" style="padding: 5px">#}
{#                        <table class="table table-bordered" id="tb_ponencia">#}
{#                            <thead>#}
{#                                <tr>#}
{#                                    <th width="30%" style="text-align: center">Título Ponencia</th>#}
{#                                    <th width="20%" style="text-align: center">Nombre del Congreso</th>#}
{#                                    <th width="5%" style="text-align: center">Fecha Inicio Congreso</th>#}
{#                                    <th width="5%" style="text-align: center">Fecha Fin Congreso</th>#}
{#                                    <th width="15%" style="text-align: center">País</th>#}
{#                                    <th width="10%" style="text-align: center">Ciudad</th>#}
{#                                    <th width="10%" style="text-align: center">Tipo Autor</th>#}
{#                                    <th width="2%" style="text-align: center">...</th>#}
{#                                    <th width="5%" style="text-align: center">Archivo</th>#}
{#                                    <th width="2%"><a href="javascript:;" class="btn btn-success btn-mini agregaitem_ponencia" title="Agregar Ponencia"><i class="fa fa-plus"></i> </a></th>#}
{#                                </tr>#}
{#                            </thead>#}
{#                            <tbody id="detalle_ponencia">#}
{##}
{#                            </tbody>#}
{#                        </table>#}
{#                    </div>#}
{#                </div>#}
{#            </div>#}
{##}
{#            <div class="accordion-group">#}
{#                <div class="accordion-heading" style="background-color: whitesmoke">#}
{#                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapse_5">#}
{#                        Producción Científica ( Libros ) <span class="badge badge-info tu" title="Total Registros" id="bdg_total_libro">0</span>#}
{#                    </a>#}
{#                </div>#}
{#                <div id="collapse_5" class="accordion-body collapse in">#}
{#                    <div class="accordion-inner" style="padding: 5px">#}
{#                        <table class="table table-bordered" id="tb_libro">#}
{#                            <thead>#}
{#                                <tr>#}
{#                                    <th width="30%" style="text-align: center">Título Libro</th>#}
{#                                    <th width="10%" style="text-align: center">Código ISBN</th>#}
{#                                    <th width="20%" style="text-align: center">Editorial</th>#}
{#                                    <th width="10%" style="text-align: center">Fecha Publicación</th>#}
{#                                    <th width="10%" style="text-align: center">Tipo Autor</th>#}
{#                                    <th width="2%" style="text-align: center">...</th>#}
{#                                    <th width="5%" style="text-align: center">Archivo</th>#}
{#                                    <th width="2%"><a href="javascript:;" class="btn btn-success btn-mini agregaitem_libro" title="Agregar Libro"><i class="fa fa-plus"></i> </a></th>#}
{#                                </tr>#}
{#                            </thead>#}
{#                            <tbody id="detalle_libro">#}
{##}
{#                            </tbody>#}
{#                        </table>#}
{#                    </div>#}
{#                </div>#}
{#            </div>#}
{##}
{#            <div class="accordion-group">#}
{#                <div class="accordion-heading" style="background-color: whitesmoke">#}
{#                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapse_6">#}
{#                        Producción Científica ( Capítulos de Libros ) <span class="badge badge-info tu" title="Total Registros" id="bdg_total_capitulolibro">0</span>#}
{#                    </a>#}
{#                </div>#}
{#                <div id="collapse_6" class="accordion-body collapse in">#}
{#                    <div class="accordion-inner" style="padding: 5px">#}
{#                        <table class="table table-bordered" id="tb_capitulolibro">#}
{#                            <thead>#}
{#                                <tr>#}
{#                                    <th width="20%" style="text-align: center">Capítulo Libro</th>#}
{#                                    <th width="19%" style="text-align: center">Título Libro</th>#}
{#                                    <th width="16%" style="text-align: center">Código ISBN</th>#}
{#                                    <th width="18%" style="text-align: center">Editorial</th>#}
{#                                    <th width="10%" style="text-align: center">Fecha Publicación</th>#}
{#                                    <th width="10%" style="text-align: center">Tipo Autor</th>#}
{#                                    <th width="2%" style="text-align: center">...</th>#}
{#                                    <th width="5%" style="text-align: center">Archivo</th>#}
{#                                    <th width="2%"><a href="javascript:;" class="btn btn-success btn-mini agregaitem_capitulolibro" title="Agregar Capítulo Libro"><i class="fa fa-plus"></i> </a></th>#}
{#                                </tr>#}
{#                            </thead>#}
{#                            <tbody id="detalle_capitulolibro">#}
{##}
{#                            </tbody>#}
{#                        </table>#}
{#                    </div>#}
{#                </div>#}
{#            </div>#}
{##}
{#            <div class="accordion-group">#}
{#                <div class="accordion-heading" style="background-color: whitesmoke">#}
{#                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapse_7">#}
{#                        Proyectos de Investigación <span class="badge badge-info tu" title="Total Registros" id="bdg_total_proyecto">0</span>#}
{#                    </a>#}
{#                </div>#}
{#                <div id="collapse_7" class="accordion-body collapse in">#}
{#                    <div class="accordion-inner" style="padding: 5px">#}
{#                        <table class="table table-bordered" id="tb_proyecto">#}
{#                            <thead>#}
{#                                <tr>#}
{#                                    <th width="34%" style="text-align: center">Título del Proyecto</th>#}
{#                                    <th width="31%" style="text-align: center">Institución Patrocinadora</th>#}
{#                                    <th width="10%" style="text-align: center">Función</th>#}
{#                                    <th width="10%" style="text-align: center">Fecha Inicio</th>#}
{#                                    <th width="10%" style="text-align: center">Fecha Fin</th>#}
{#                                    <th width="2%" style="text-align: center">...</th>#}
{#                                    <th width="5%" style="text-align: center">Archivo</th>#}
{#                                    <th width="2%"><a href="javascript:;" class="btn btn-success btn-mini agregaitem_proyecto" title="Agregar Proyecto"><i class="fa fa-plus"></i> </a></th>#}
{#                                </tr>#}
{#                            </thead>#}
{#                            <tbody id="detalle_proyecto">#}
{##}
{#                            </tbody>#}
{#                        </table>#}
{#                    </div>#}
{#                </div>#}
{#            </div>#}
{##}
{#        </div>#}
{#    </div>#}
{##}
{#    <div class="modal fade static"  data-keyboard="false" id="itemspaneltitulo" style="display: none;">#}
{#        <div class="modal-header">#}
{#            <table border="0" width="100%" style="background-color: transparent">#}
{#                <tr>#}
{#                    <td style="width: 80%"><h4 class="paneltitletitulo">Revisar y Validar Contrato de Beca</h4></td>#}
{#                    <td><a href="javascript:;" title="Cerrar" class="btn btn-danger btn-mini pull-right cerrar2"><i class="fa fa-remove"></i></a></td>#}
{#                </tr>#}
{#            </table>#}
{#        </div>#}
{#        <div class="modal-body panelbodytitulo">#}
{#        </div>#}
{#        <div class="modal-footer" style="text-align: right">#}
{#            <a href="javascript:;" class="btn btn-success guardar"> Guardar</a>#}
{#            <a href="javascript:;" class="btn btn-danger cerrar"> Cancelar</a>#}
{#        </div>#}
{#    </div>#}
{##}
{#    <div class="modal fade static"  data-keyboard="false" id="itemspaneluniversidad" style="display: none;">#}
{#        <div class="modal-header">#}
{#            <table border="0" width="100%" style="background-color: transparent">#}
{#                <tr>#}
{#                    <td style="width: 80%"><h4 class="paneltitleuniversidad">Revisar y Validar Contrato de Beca</h4></td>#}
{#                    <td><a href="javascript:;" title="Cerrar" class="btn btn-danger btn-mini pull-right cerrar2"><i class="fa fa-remove"></i></a></td>#}
{#                </tr>#}
{#            </table>#}
{#        </div>#}
{#        <div class="modal-body panelbodyuniversidad">#}
{#        </div>#}
{#        <div class="modal-footer" style="text-align: right">#}
{#            <a href="javascript:;" class="btn btn-success guardar"> Guardar</a>#}
{#            <a href="javascript:;" class="btn btn-danger cerrar"> Cancelar</a>#}
{#        </div>#}
{#    </div>#}
{##}
{#{% endblock %}#}