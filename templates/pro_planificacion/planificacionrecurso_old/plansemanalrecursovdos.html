{#{% extends "ajaxformbs.html" %}#}
{% extends "basebs.html" %}
{% load sga_extras %}
{% block heading %}
    <link href="/static/widget_ppp.css" rel="stylesheet"/>
    <link href="/static/css/table-responsive.css?1.0.0" type="text/css" rel="stylesheet" />
    <script type="text/javascript">
        var itemsblib =1;
        var lista_items1 = [];
        var obj=0;
        var enf=0;
        var rec=0;
        var eva=0;

        $(function() {
            {#            {% for unidadeslis in listadounidades %}#}
            {#alert(".listadotareas_"+ {{ unidadeslis.0 }})#}
            {#                if($(".listadotareas_"+ {{ unidadeslis.0 }}).length == 0) {#}
            {#                    alert('no tiene')#}
            {#                }else{#}
            {#                    alert('si tiene')#}
            {#                }#}
            {##}
            {#            {% endfor %}#}
            $(".actualizarsmoodle").click(function() {
                $("#divactualizarsmoodle").modal({backdrop:'static', width: '500px'}).modal('show');
            });
            $(".cancelaactualizacion").click(function() {
                $("#divactualizarsmoodle").modal("hide");
            });

            $(".saveactualizar").click(function() {
                bloqueointerface();
                var idmat=parseInt('{{ silabocab.materia.id }}');
                $.post("/pro_planificacion", {'action':'actualizarsilabomoodle', 'materia': idmat }, function(data) {
                    if (data.result == 'ok') {
                        $("#divactualizarsmoodle").modal("hide");
                        NotificationJG.success("Se ha guardado con éxito, esta acción tarda de 15 a 20 minutos en reflejarse en el aula virtual.");
                        $.unblockUI();
                    }
                }, 'json');
            });

            $(".notificarmasivo").click(function() {
                $("#divnotificarmasivo").modal({backdrop:'static', width: '500px'}).modal('show');
            });
            $(".cancelaaprobacion").click(function() {
                $("#divnotificarmasivo").modal("hide");
            });

            $(".savenotificar").click(function() {
                bloqueointerface();
                $.post("/pro_planificacion", {'action':'notificacionmasiva', 'materia': {{ silabocab.materia.id }} }, function(data) {
                    if (data.result == 'ok') {
                        location.reload();
                    }
                }, 'json');
            });

            /*$(".migrarmoodlemasivo").click(function() {
                $("#divmigrarmasivo").modal({backdrop:'static', width: '500px'}).modal('show');
            });
            $(".cancelarmigrar").click(function() {
                $("#divmigrarmasivo").modal("hide");
            });*/

            $(".action-aceptar", $("#modalErrores")).click(function() {
                bloqueointerface();
                location.reload();
            });

            $(".action-cancelar", $("#modalErrores")).click(function() {
                bloqueointerface();
                location.reload();
            });

            $(".migrarmoodlemasivo").click(function() {
                var listatarea = [];
                var listavideo = [];
                var listaforo = [];
                var listatest = [];
                var listaguiaestudiante = [];
                var listadiapositiva = [];
                var listacompendio = [];
                var listamaterial = [];
                var listatareapractica = [];
                $(".recorreitemstarea").each(function () {
                    if($(this).prop('checked')){
                        listatarea.push($(this).attr('iditem'));
                    }
                });
                $(".recorreitemstareapractica").each(function () {
                    if($(this).prop('checked')){
                        listatareapractica.push($(this).attr('iditem'));
                    }
                });
                $(".recorreitemsforo").each(function () {
                    if($(this).prop('checked')){
                        listaforo.push($(this).attr('iditem'));
                    }
                });
                $(".recorreitemstest").each(function () {
                    if($(this).prop('checked')){
                        listatest.push($(this).attr('iditem'));
                    }
                });
                $(".recorreitemsguiaestudiante").each(function () {
                    if($(this).prop('checked')){
                        listaguiaestudiante.push($(this).attr('iditem'));
                    }
                });
                $(".recorreitemsdiapositiva").each(function () {
                    if($(this).prop('checked')){
                        listadiapositiva.push($(this).attr('iditem'));
                    }
                });
                $(".recorreitemscompendio").each(function () {
                    if($(this).prop('checked')){
                        listacompendio.push($(this).attr('iditem'));
                    }
                });
                $(".recorreitemsvidmagistral").each(function () {
                    if($(this).prop('checked')){
                        listavideo.push($(this).attr('iditem'));
                    }
                });
                $(".recorreitemsmaterial").each(function () {
                    if($(this).prop('checked')){
                        listamaterial.push($(this).attr('iditem'));
                    }
                });
                var aData = {'action':'migrarmasivomoodle',
                    'listatarea': JSON.stringify(listatarea),
                    'listavideo': JSON.stringify(listavideo),
                    'listaforo': JSON.stringify(listaforo),
                    'listatest': JSON.stringify(listatest),
                    'listaguiaestudiante': JSON.stringify(listaguiaestudiante),
                    'listadiapositiva': JSON.stringify(listadiapositiva),
                    'listacompendio': JSON.stringify(listacompendio),
                    'listamaterial': JSON.stringify(listamaterial),
                    'listatareapractica': JSON.stringify(listatareapractica)
                }
                Swal.fire({
                    title: `NOTIFICACIÓN`,
                    text: `Esta seguro/a de migrar masivamente los recursos a moodle`,
                    type: 'info',
                    icon: 'info',
                    showCancelButton: true,
                    allowOutsideClick: false,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'Aceptar',
                    cancelButtonText: 'Cancelar'
                }).then((result) => {
                    if (result.value) {
                        bloqueointerface();
                        $.ajax({
                            type: "POST",
                            url: "/pro_planificacion",
                            data: aData,
                            success: function(data) {
                                if (data.result == 'ok') {
                                    $.unblockUI();
                                    if (data.errores.length > 0) {
                                        /*abrir modal*/
                                        let html_ = "<div><h4>Actividades que no se migraron a moodle</h4></div><br>";
                                        html_ += `<table class='table table-bordered table-striped'><thead>
                                                    <tr>
                                                        <th style="text-align: center; vertical-align: middle;">Actividad</th>
                                                        <th style="text-align: center; vertical-align: middle;">Nombre</th>
                                                        <th style="text-align: center; vertical-align: middle;">Descripción</th>
                                                        <th style="text-align: center; vertical-align: middle;">Error</th>
                                                    </tr>
                                                    </thead><tbody>`;
                                        $.each(data.errores, function (i, item) {
                                            //console.log(item);
                                            html_ += `<tr>`;
                                            html_ += `<td style="text-align: center; vertical-align: middle;">${item['actividad']}</td>`;
                                            html_ += `<td>${item['descripcion']}</td>`;
                                            html_ += `<td>${item['nombre']}</td>`;
                                            html_ += `<td>${item['error']}</td>`;
                                            html_ += `</tr>`;
                                        });
                                        html_ += "</tbody></table>";
                                        $(".paneltitle span", $("#modalErrores")).html(" al migrar a moodle");
                                        $(".modal-body", $("#modalErrores")).html(html_);
                                        $("#modalErrores").modal({"backdrop":"static", "width": "90%"}).modal("show");
                                    }
                                    else
                                    {
                                        bloqueointerface();
                                        location.reload();
                                    }
                                }
                                else{
                                    $.unblockUI();
                                    NotificationJG.error(data.mensaje);
                                }
                            },
                            error: function() {
                                $.unblockUI();
                                NotificationJG.error("Error al enviar los datos.");
                            },
                            dataType: "json",
                        });
                    }else{
                        NotificationJG.error("Se cancelo la migración masiva");
                    }
                }).catch(error => {
                    NotificationJG.error("Ocurrio un error, se cancelo la migración masiva");
                });


                /*$.post("/pro_planificacion", {'action':'migrarmasivomoodle', 'listatarea': JSON.stringify(listatarea), 'listavideo': JSON.stringify(listavideo),
                    'listaforo': JSON.stringify(listaforo),'listatest': JSON.stringify(listatest),
                    'listaguiaestudiante': JSON.stringify(listaguiaestudiante),
                    'listadiapositiva': JSON.stringify(listadiapositiva),'listacompendio': JSON.stringify(listacompendio),
                    'listamaterial': JSON.stringify(listamaterial),'listatareapractica': JSON.stringify(listatareapractica)}, function(data) {
                    if (data.result == 'ok') {
                        location.reload();
                    }
                    else{
                        $.unblockUI();
                        smoke.alert(data.mensaje);
                    }
                }, 'json');*/
            });

            $("#id_objetivo").css({'text-transform': 'none'});
            $("#id_enfoque").css({'text-transform': 'none'});
            $("#id_recurso").css({'text-transform': 'none'});
            $("#id_evaluacion").css({'text-transform': 'none'});
            $("#id_subtema").css({'text-transform': 'none'});
            $("#id_subtema").addClass("validate[required]");
            $("#id_tema").addClass("validate[required]");
            $("#desplegar_obj").each(function () {
                $(this).trigger('click');
            });

            $(".editar_objetivo").click(function() {
                var id = $(this).attr('ids');
                $.get("/pro_planificacion", {'action':'editarobjetivoaprendizaje', 'ids': id}, function(data) {
                    var dato;
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $("#itemspanelo").modal({backdrop:'static', width: '610px'}).modal('show');
                        $("#id_objetivo").val(data.objetivo);
                        $("#idso").val(data.ids);
                    }
                }, 'json');

            });
            $("#itemspanelo .btn-cerrar").click(function() {
                $("#itemspanelo").modal("hide");
            });
            $("#itemsrecurso_individual .btn-cerrar").click(function() {
                $("#itemsrecurso_individual").modal("hide");
            });
            $(".delactividad").click(function() {
                var idacti = $(this).attr('idacti');
                var nomacti = ''
                nomacti = $(this).attr('nomacti');
                var opciondel = $(this).attr('opciondel');
                var numerosemana = $(this).attr('numerosemana');
                $("#nomtitulo").html('')
                if(opciondel==1){
                    var nombretitulo = $(this).attr('data-original-title');
                    $("#nomtitulo").html(nombretitulo)
                }
                if(opciondel==2){
                    $("#nomtitulo").html('Eliminar Foro')
                }
                if(opciondel==3){
                    $("#nomtitulo").html('Eliminar Test')
                }
                if(opciondel==4){
                    $("#nomtitulo").html('Eliminar guia estudiante')
                }
                if(opciondel==5){
                    $("#nomtitulo").html('Eliminar gruia docente')
                }
                if(opciondel==6){
                    $("#nomtitulo").html('Eliminar Presentación')
                }
                if(opciondel==7){
                    $("#nomtitulo").html('Eliminar Compendio')
                }
                if(opciondel==8){
                    $("#nomtitulo").html('Eliminar Material Adicional')
                }
                if(opciondel==9){
                    $("#nomtitulo").html('Eliminar Video Magistral')
                }
                if(opciondel==10){
                    $("#nomtitulo").html('Eliminar Tarea Práctica')
                }
                var nombreactividad = 'Semana #' + numerosemana + ' | ' + nomacti;
                $("#id_codigoactividad").val(idacti)
                $("#id_codigoopcion").val(opciondel)
                $("#id_nomactividaddel").html(nombreactividad)
                $("#itemsdelactividad").modal("show");
            });
            $(".delactividadadmision").click(function() {
                var idacti = $(this).attr('idacti');
                var nomacti = $(this).attr('nomacti');
                var opciondel = $(this).attr('opciondel');
                var numerosemana = $(this).attr('numerosemana');
                $("#nomtituloadmision").html('')
                $("#nomtituloadmision").html('Eliminar Test')
                nomacti = 'Semana #' + numerosemana + ' | ' + nomacti;
                $("#id_codigoactividadadmision").val(idacti)
                $("#id_codigoopcionadmision").val(opciondel)
                $("#id_nomactividadadmision").html(nomacti)
                $("#itemsdelactividadadmision").modal("show");
            });
            $(".eliminaractividad").click(function() {
                var iddelactividad= $("#id_codigoactividad").val()
                var idcodigoopcion= $("#id_codigoopcion").val()
                $.ajax({
                    type: "POST",
                    url: "/pro_planificacion",
                    data: {"action": "eliminarrecurso", "iddelactividad": iddelactividad, "idcodigoopcion": idcodigoopcion },
                    success: function(data) {
                        if (data.result=='ok'){
                            location.reload();
                            bloqueointerface();
                        }else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        intentos += 1;
                    },
                    dataType: "json"
                });
            });
            $(".eliminaractividadadmision").click(function() {
                var iddelactividad= $("#id_codigoactividadadmision").val()
                var idcodigoopcion= $("#id_codigoopcionadmision").val()
                $.ajax({
                    type: "POST",
                    url: "/pro_planificacion",
                    data: {"action": "eliminarrecursoadmision", "iddelactividad": iddelactividad, "idcodigoopcion": idcodigoopcion },
                    success: function(data) {
                        if (data.result=='ok'){
                            location.reload();
                            bloqueointerface();
                        }
                    },
                    error: function() {
                        intentos += 1;
                    },
                    dataType: "json"
                });
            });
            $(".delacticerrar").click(function() {
                $("#itemsdelactividad").modal("hide");
            });
            $(".delacticerraradmision").click(function() {
                $("#itemsdelactividadadmision").modal("hide");
            });
            $("#itemspanelo #adicionarobj").click(function(){
                var cont = $("#id_objetivo").val();
                if (cont.length >0) {
                    var ids = $("#idso").val();
                    var formdata = new FormData($("#formobj")[0]);
                    try {
                        formdata.append("objetivo", JSON.stringify(cont));
                    } catch (err){
                        console.log(err.message);
                    }
                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: "/pro_planificacion",
                        data: formdata,
                        success: function(data) {
                            if (data.result == 'ok') {
                                bloqueointerface();
                                $("#itemspanelo").modal("hide");
                                location.reload();
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        },
                        error: function() {
                            $.unblockUI();
                            smoke.alert("Error al enviar los datos.");
                        },
                        dataType: "json",
                        cache: false,
                        contentType: false,
                        processData: false
                    });
                }else{
                    smoke.alert("Es obligatirio llenar la información Objetivo Apendizaje");
                }
            });
            $(".editar_enfoque").click(function() {
                var id = $(this).attr('ids');
                $.get("/pro_planificacion", {'action':'editenfoquemetodologico', 'ids': id}, function(data) {
                    var dato;
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $("#itemspanelenf").modal({backdrop:'static', width: '610px'}).modal('show');
                        $("#id_enfoque").val(data.enfoque);
                        $("#idse").val(data.ids);
                    }
                }, 'json');

            });
            $("#itemspanelenf .btn-cerrar").click(function() {
                $("#itemspanelenf").modal("hide");
            });
            $("#itemspanelenf #adicionarenf").click(function(){
                var cont = $("#id_enfoque").val();
                if (cont.length >0) {
                    var ids = $("#idse").val();
                    var formdata = new FormData($("#formenf")[0]);
                    try {
                        formdata.append("enfoque", JSON.stringify(cont));
                    } catch (err) {
                        console.log(err.message);
                    }
                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: "/pro_planificacion",
                        data: formdata,
                        success: function (data) {
                            if (data.result == 'ok') {
                                bloqueointerface();
                                $("#itemspanelenf").modal("hide");
                                location.reload();
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        },
                        error: function () {
                            $.unblockUI();
                            smoke.alert("Error al enviar los datos.");
                        },
                        dataType: "json",
                        cache: false,
                        contentType: false,
                        processData: false
                    });
                }else{
                    smoke.alert("Es obligatirio llenar la información Enfoque Metodológico");
                }
            });
            $(".editar_recurso").click(function() {
                var id = $(this).attr('ids');
                $.get("/pro_planificacion", {'action':'editrecursodidactico', 'ids': id}, function(data) {
                    var dato;
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $("#itemspanelrec").modal({backdrop:'static', width: '610px'}).modal('show');
                        $("#id_recurso").val(data.recurso);
                        $("#idsr").val(data.ids);
                    }
                }, 'json');
            });
            $("#itemspanelrec .btn-cerrar").click(function() {
                $("#itemspanelrec").modal("hide");
            });
            $("#itemspanelrec #adicionarrec").click(function(){
                var cont = $("#id_recurso").val();
                if (cont.length >0) {
                    var ids = $("#idsr").val();
                    var formdata = new FormData($("#formrec")[0]);
                    try {
                        formdata.append("recurso", JSON.stringify(cont));
                    } catch (err){
                        console.log(err.message);
                    }
                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: "/pro_planificacion",
                        data: formdata,
                        success: function(data) {
                            if (data.result == 'ok') {
                                bloqueointerface();
                                $("#itemspanelrec").modal("hide");
                                location.href="/pro_planificacion?action=planclasevirtual&silaboid="+data.ids;
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        },
                        error: function() {
                            $.unblockUI();
                            smoke.alert("Error al enviar los datos.");
                        },
                        dataType: "json",
                        cache: false,
                        contentType: false,
                        processData: false
                    });
                }else{
                    smoke.alert("Es obligatorio llenar la información Recursos Didácticos");
                }
            });

            $(".editar_evaluacion").click(function() {
                var id = $(this).attr('ids');
                $.get("/pro_planificacion", {'action':'editevaluacion', 'ids': id}, function(data) {
                    var dato;
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $("#itemspaneleva").modal({backdrop:'static', width: '610px'}).modal('show');
                        $("#id_evaluacion").val(data.evaluacion);
                        $("#idsv").val(data.ids);
                    }
                }, 'json');

            });
            $("#itemspaneleva .btn-cerrar").click(function() {
                $("#itemspaneleva").modal("hide");
            });
            $("#itemspaneleva #adicionareva").click(function(){
                var cont = $("#id_evaluacion").val();
                if (cont.length >0) {
                    var ids = $("#idsv").val();
                    var formdata = new FormData($("#formeva")[0]);
                    try {
                        formdata.append("evaluacion", JSON.stringify(cont));
                    } catch (err){
                        console.log(err.message);
                    }
                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: "/pro_planificacion",
                        data: formdata,
                        success: function(data) {
                            if (data.result == 'ok') {
                                bloqueointerface();
                                $("#itemspaneleva").modal("hide");
                                location.href="/pro_planificacion?action=planclasevirtual&silaboid="+data.ids;
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        },
                        error: function() {
                            $.unblockUI();
                            smoke.alert("Error al enviar los datos.");
                        },
                        dataType: "json",
                        cache: false,
                        contentType: false,
                        processData: false
                    });
                }else{
                    smoke.alert("Es obligatirio llenar la información Evaluación");
                }
            });
            $("#itemspanelduplicar_silabo .btn-cerrar").click(function() {
                $("#itemspanelduplicar_silabo").modal("hide");
            });
            $(".duplicar_silabo").click(function() {
                var id = $(this).attr('ids');
                $.get("/pro_planificacion", {'action':'duplicar_silabo', 'ids': id}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $(".panelbody").html(data.data);
                        $("#itemspanelduplicar_silabo").modal({backdrop:'static', width: '610px'}).modal('show');
                    }
                }, 'json');

            });
            $(".duplicar_silabo_otro_docente").click(function() {
                var id = $(this).attr('ids');
                $.get("/pro_planificacion", {'action':'duplicar_silabo_otro_docente', 'ids': id}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $(".panelbody").html(data.data);
                        $("#itemspanelduplicar_silabo").modal({backdrop:'static', width: '700px'}).modal('show');
                    }
                }, 'json');

            });
            $("#itemspaneldetalle_temas_subtemas .btn-cerrar").click(function() {
                $("#itemspaneldetalle_temas_subtemas").modal("hide");
            });
            $(".detalle_tst_registrar").click(function() {
                var id = $(this).attr('ids');
                $.get("/pro_planificacion", {'action':'detalle_temasxplanificar', 'ids': id}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $(".panelbody").html(data.data);
                        $("#itemspaneldetalle_temas_subtemas").modal({backdrop:'static', width: '1000px'}).modal('show');
                    }
                }, 'json');
            });
            $("#itemspanelplanificacionsalida .btn-cerrar").click(function() {
                $("#itemspanelplanificacionsalida").modal("hide");
            });
            $(".addplanificacionsalida").click(function () {
                var id = $(this).attr('ids');
                $.unblockUI();
                $("#itemspanelplanificacionsalida").modal({backdrop:'static', width: '610px'}).modal('show');
                $("#ids").val(id);
            });
            $("#adicionarplanificacionsalida").click(function () {
                var cont = $("#contenido").val();
                if (cont.length >0) {
                    var ids = $("#ids").val();
                    $.ajax({
                        type: "POST",
                        url: "/pro_planificacion",
                        data: {'action': 'addplanificacion_salida', 'ids': ids, 'cont':cont},
                        success: function (data) {
                            if (data.result == 'ok') {
                                $.unblockUI();
                                bloqueointerface();
                                $("#itemspanelplanificacionsalida").modal("hide");
                                location.href="/pro_planificacion?action=planclasevirtual&silaboid="+data.ids;
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        },error: function () {
                            $.unblockUI();
                            control.val(0).trigger("change");
                            smoke.alert("Error de conexion.");
                        },
                        dataType: "json"
                    });
                }else{
                    smoke.alert("Es obligatirio llenar la información de descricripcion de la salida");
                }
            });
            $("#itemspaneleditplanificacionsalida .btn-cerrar").click(function() {
                $("#itemspaneleditplanificacionsalida").modal("hide");
            });
            $(".editplanificacionsemanalsalida").click(function () {
                var id = $(this).attr('ids');
                $.unblockUI();
                $.get("/pro_planificacion", {'action':'editplanificacion_salida', 'ids': id}, function(data) {
                    if (data.result == 'ok') {
                        $("#itemspaneleditplanificacionsalida").modal({backdrop:'static', width: '610px'}).modal('show');
                        $("#id_contenido").val(data.descripcion);
                        $("#ids").val(id);
                    }
                }, 'json');
            });
            $("#editplanificacionsalida").click(function () {
                var cont = $("#id_contenido").val();
                if (cont.length >0) {
                    var id = $("#ids").val();
                    $.ajax({
                        type: "POST",
                        url: "/pro_planificacion",
                        data: {'action': 'editplanificacion_salida', 'ids': id, 'cont':cont},
                        success: function (data) {
                            if (data.result == 'ok') {
                                $.unblockUI();
                                bloqueointerface();
                                $("#itemspanelplanificacionsalida").modal("hide");
                                location.href="/pro_planificacion?action=planclasevirtual&silaboid="+data.ids;
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        },error: function () {
                            $.unblockUI();
                            control.val(0).trigger("change");
                            smoke.alert("Error de conexion.");
                        },
                        dataType: "json"
                    });
                }else{
                    smoke.alert("Es obligatirio llenar la información de descricripcion de la salida");
                }
            });
            $("#id_tema").change(function () {
                var id = $(this).val();
                if (id.length > 0){
                    $("#id_subtema").prop( "disabled", false );
                }else{
                    $("#id_subtema").prop( "disabled", true );
                }
                {#                alert(id);#}
            });
            $("#itemspaneladicionarsubtemas .btn-cerrar").click(function() {
                $("#itemspaneladicionarsubtemas").modal("hide");
            });
            $(".adicionarsubtemas").click(function () {
                var id = $(this).attr('ids');
                $.unblockUI();
                $.get("/pro_planificacion", {'action':'adicionar_subtemas', 'ids': id}, function(data) {
                    if (data.results) {
                        $('#id_tema').empty().append('<option value="">---------</option>').val(0).trigger("change");
                        for (elemento in data.listatema) {
                            $('#id_tema').append('<option value="' + data.listatema[elemento][0] + '">' + data.listatema[elemento][1] + '</option>');
                        }
                        $("#itemspaneladicionarsubtemas").modal({backdrop:'static', width: '610px'}).modal('show');
                        $("#ids").val(id);
                        $(".elementosubtema").remove();
                        for (elemento in data.lista){
                            $("#contenidosubtemas").append('<tr class="elementosubtema"  id="fila_' + itemsblib + '">' +
                                '<td style="text-align: center ; display:none" class="idtema">' + data.lista[elemento][0] + '</td>' +
                                '<td width="45%" style="text-align: left;" class="tema">' + data.lista[elemento][1] + '</td>' +
                                '<td width="45%" style="text-align: left;" class="subtema">' + data.lista[elemento][2] + '</td>' +
                                '<td style="text-align:center;" width="5%"><a class="btn btn-mini btn-danger tu eliminarsubtema" title="Eliminar"><i class="fa fa-trash"></i> Eminiar</a></td>' +
                                '</tr>');
                            itemsblib += 1;
                            actualizar_lista_subtemas();
                            eliminar__subtemas();
                        }
                    }
                }, 'json');
            });
            $(".addsubtema").click(function () {
                var idt = $("#id_tema").val();
                var tema = $("#id_tema option:selected").text();
                var subtema = $("#id_subtema").val();
                if (subtema.length>0) {
                    if (leer_lista_subtemas(subtema) == 0) {
                        $("#contenidosubtemas").append('<tr class="elementosubtema"  id="fila_' + itemsblib + '">' +
                            '<td style="text-align: center ; display:none" class="idtema">' + idt + '</td>' +
                            '<td width="45%" style="text-align: left;" class="tema">' + tema + '</td>' +
                            '<td width="45%" style="text-align: left;" class="subtema">' + subtema + '</td>' +
                            '<td style="text-align:center;" width="5%"><a class="btn btn-mini btn-danger tu eliminarsubtema" title="Eliminar"><i class="fa fa-trash"></i> Eminiar</a></td>' +
                            '</tr>');
                        itemsblib += 1;
                        actualizar_lista_subtemas();
                        eliminar__subtemas();
                        $("#adicionarsubtema").prop( "disabled", false );
                    }
                    else {
                        smoke.alert("El subtema ya se encuentra registrado");
                    }
                    document.getElementById('id_subtema').value = '';
                }
            });
            actualizar_lista_subtemas = function () {
                lista_items1 = [];
                $(".elementosubtema").each(function () {
                    var item = {
                        idtema: $(this).find(".idtema").html(),
                        tema: $(this).find(".tema").html(),
                        subtema: $(this).find(".subtema").html()
                    };
                    lista_items1.push(item);
                });
            };
            eliminar__subtemas = function () {
                $(".eliminarsubtema").unbind();
                $(".eliminarsubtema").click(function () {
                    var padre = $(this).parent().parent();
                    padre.remove();
                    actualizar_lista_subtemas();
                });
            };
            $(".btn-adicionarsubtema").click(function () {
                var id = $("#ids").val();
                if (lista_items1.length>0) {
                    $.ajax({
                        type: "POST",
                        url: "/pro_planificacion",
                        data: {'action': 'addsubtemasadicional', 'ids': id, 'lista': JSON.stringify(lista_items1)},
                        success: function (data) {
                            if (data.result == 'ok') {
                                $.unblockUI();
                                bloqueointerface();
                                $("#itemspaneladicionarsubtemas").modal("hide");
                                location.href = "/pro_planificacion?action=planclasevirtual&silaboid=" + data.ids;
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        }, error: function () {
                            $.unblockUI();
                            control.val(0).trigger("change");
                            smoke.alert("Error de conexion.");
                        },
                        dataType: "json"
                    });
                }else{
                    $("#itemspaneladicionarsubtemas").modal("hide");
                }
            });
            $("#itemspanelimportar_recurso_periodo .btn-cerrar").click(function() {
                $("#itemspanelimportar_recurso_periodo").modal("hide");
            });
            $(".duplicar_recurso_periodo").click(function() {
                var idsemanal = $(this).attr('idsemanal');
                var ids = $(this).attr('ids');
                var semana = $(this).attr('semana');
                var numsemana = $(this).attr('numsemana');
                var fini = $(this).attr('fini');
                var ffin = $(this).attr('ffin');
                $.post("/pro_planificacion", {'action':'duplicar_recursossilabo_otro_periodo', 'ids': ids, 'semana':semana, 'numsemana':numsemana, 'fini':fini, 'ffin':ffin, 'idsemanal':idsemanal}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $(".panelbody").html(data.data);
                        $("#itemspanelimportar_recurso_periodo").modal({backdrop:'static', width: '750px'}).modal('show');
                    }
                }, 'json');
            });

            $(".duplicar_recurso_individual").click(function() {
                var nombretipoactividad = $(this).attr('nombretipoactividad');
                var numsemana = $(this).attr('numsemana');
                $("#id_nombreactividad").html('')
                $("#id_nombreactividad").html('ACTIVIDAD: '+nombretipoactividad+' - SEMANA: '+numsemana)
                var tipoactividad = $(this).attr('tipoactividad');
                var codsemanal = $(this).attr('codsemanal');
                $.post("/pro_planificacion", {'action':'listar_periodos'}, function(data) {
                    if (data.result == 'ok') {
                        $("#id_tipoactividad").val(tipoactividad)
                        $("#id_codsemanal").val(codsemanal)
                        $("#periodosilabo").html('<option value="">--SELECCIONE PERIODO--</option>').val(0).trigger('change');
                        for (elemento in data.lista) {
                            $("#periodosilabo").append('<option value="'+data.lista[elemento][0]+'">'+data.lista[elemento][1]+'</option>');
                        }
                        $.unblockUI();
                        $("#itemsrecurso_individual").modal({backdrop:'static', width: '860px', height: '500px'}).modal('show');
                    }
                }, 'json');
            });

            $('#periodosilabo').change(function(){
                $('#listadosilabos').empty().append('<option value="">--SELECCIONE SÍLABO--</option>').val(0).trigger("change");
                var idperiodosilabo = $("#periodosilabo").val();
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/pro_planificacion",
                    data: {'action': 'listarsilabos_periodos', 'idperiodosilabo': idperiodosilabo,'idsilabo': {{ silabocab.id }}},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            for (elemento in data.lista){
                                $('#listadosilabos').append('<option value="'+data.lista[elemento][0]+'">'+data.lista[elemento][1]+' '+data.lista[elemento][2]+ ' '+data.lista[elemento][5]+'</option>');
                            }
                        } else {
                            control.val(0).trigger("change");
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        control.val(0).trigger("change");
                        smoke.alert("Error de conexion.");
                    },
                    dataType: "json"
                });
            });

            copiaactividad = function (id,califica) {
                var id = parseInt(id);
                var idsilabosemanal = $("#id_codsemanal").val()
                var idtipoactividad = $("#id_tipoactividad").val()
                codmodelo = ''
                if(califica == 'True'){
                    codmodelo = $("#idmodelo"+id).val()
                    if (codmodelo == 0){
                        smoke.alert('Seleccione modelo a calificar');
                        return false;
                    }
                }
                smoke.confirm("¿Está seguro de copiar actividad.?", function(e){
                    if (e){
                        bloqueointerface();
                        $.post("/pro_planificacion", {"action":'copiaractividad', "id": id, "idsilabosemanal": idsilabosemanal, "idtipoactividad": idtipoactividad, "codmodelo": codmodelo, "califica": califica}, function(data) {
                            if (data.result=='ok') {
                                location.reload();
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        }, "json");
                    }
                }, {
                    ok: "SI, COPIAR ACTIVIDAD",
                    cancel: "NO,CANCELAR",
                    classname: "custom-class",
                    reverseButtons: true
                });
            };

            $('#listadosilabos').change(function(){
                var id_tipoactividad = $("#id_tipoactividad").val()
                var idsilaboperiodo = $("#listadosilabos").val();
                var id_codsemanal = $("#id_codsemanal").val();
                $('#itemsbodyactividades').empty()
                if(idsilaboperiodo>0){
                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: "/pro_planificacion",
                        data: {'action': 'listar_actividadsilabo', 'idsilaboperiodo': idsilaboperiodo, 'idtipoactividad': id_tipoactividad, 'id_codsemanal': id_codsemanal},
                        success: function(data) {
                            $.unblockUI();
                            if (data.result == 'ok') {
                                $("#itemsbodyactividades").html(data.data)

                                {#for (elemento in data.lista){#}

                                {#if (id_tipoactividad == 4){#}
                                {#    $("#itemsbodyactividades").append("<tr>" +#}
                                {#        "<td width='5%' style='text-align: center' >"+data.lista[elemento][1]+"</td>" +#}
                                {#        "<td width='95%' style='text-align: justify' ><a href='javascript:;' onclick='copiaactividad("+data.lista[elemento][0]+");' class='btn btn-success btn-mini'><i class='fa fa-plus'></i></a>"+data.lista[elemento][2]+"</td>" +#}
                                {#        "</tr>");#}
                                {# }else{#}
                                {#    $("#itemsbodyactividades").append("<tr>" +#}
                                {#        "<td width='5%' style='text-align: center' >"+data.lista[elemento][1]+"</td>" +#}
                                {#        "<td width='95%' style='text-align: justify' ><a href='javascript:;' onclick='copiaactividad("+data.lista[elemento][0]+");' class='btn btn-success btn-mini'><i class='fa fa-plus'></i></a> <a href='javascript:;' data-placement='right' class='btn btn-warning btn-mini tu detalletarea' codtipo='"+data.lista[elemento][4]+"' nomtipo='"+data.lista[elemento][6]+"' idesta='"+data.lista[elemento][5]+"' idsem='"+data.lista[elemento][1]+"' idtar='"+data.lista[elemento][0]+"' title='Ver más'><span class='fa fa-eye'></span></a> "+data.lista[elemento][2]+' '+ (data.lista[elemento][7] ? 'uuu' : 'iiii' )+"</td>" +#}
                                {#        "</tr>");#}
                                {# }#}
                                {# }#}
                            } else {
                                smoke.alert(data.mensaje);
                            }
                            actualizar_detalle();
                        },
                        error: function() {
                            $.unblockUI();
                            control.val(0).trigger("change");
                            smoke.alert("Error de conexion.");
                        },
                        dataType: "json"
                    });
                }
            });

            $(".duplicar_recurso_periodo_todo").click(function() {
                var ids = $(this).attr('ids');
                var tipo = $(this).attr('tipo');
                var nombretitulo = $(this).attr('nombretitulopanel');
                $.post("/pro_planificacion", {'action':'duplicar_recursossilabovdos_otro_periodo_todo', 'ids': ids, 'tipo': tipo}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $("#idtitulo").html(nombretitulo);
                        $(".panelbody").html(data.data);
                        $("#itemspanelimportar_recurso_periodo").modal({backdrop:'static', width: '750px'}).modal('show');
                    }
                }, 'json');
            });
            $(".duplicar_solorecurso_periodo_todo").click(function() {
                var ids = $(this).attr('ids');
                $.post("/pro_planificacion", {'action':'duplicar_recursossilabovdos_otro_periodo_todo', 'ids': ids}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $(".panelbody").html(data.data);
                        $("#itemspanelimportar_recurso_periodo").modal({backdrop:'static', width: '750px'}).modal('show');
                    }
                }, 'json');
            });

            if($(".recorrepresentacion").length == 0) {
                $("#muestramasivopresentacion").css("display", "none");
            }else{
                var existepresentacion = 0
                $(".recorrepresentacion").each(function(){
                    estadorubricapres = $(this).attr("codestado")
                    if(estadorubricapres == 2){
                        existepresentacion = 1
                    }
                });
                if (existepresentacion == 0){
                    $("#muestramasivopresentacion").css("display", "none");
                }
            }

            if($(".recorrecompendio").length == 0) {
                $("#muestramasivocompendio").css("display", "none");
            }else{
                var existecompendio = 0
                $(".recorrecompendio").each(function(){
                    estadorubrica = $(this).attr("codestado")
                    if(estadorubrica == 2){
                        existecompendio = 1
                    }
                });
                if (existecompendio == 0){
                    $("#muestramasivocompendio").css("display", "none");
                }
            }

            if($(".recorrematerial").length == 0) {
                $("#muestramasivomaterial").css("display", "none");
            }else{
                var existematerial = 0
                $(".recorrematerial").each(function(){
                    estadorubricamat = $(this).attr("codestado")
                    if(estadorubricamat == 2){
                        existematerial = 1
                    }
                });
                if (existematerial == 0){
                    $("#muestramasivomaterial").css("display", "none");
                }
            }

            if($(".recorreguias").length == 0) {
                $("#muestramasivoguias").css("display", "none");
            }else{
                var existeguias = 0
                $(".recorreguias").each(function(){
                    estadorubrica = $(this).attr("codestado")
                    if(estadorubrica == 2){
                        existeguias = 1
                    }
                });
                if (existeguias == 0){
                    $("#muestramasivoguias").css("display", "none");
                }
            }

            $(".migrar_todocompendio").click(function() {
                var estadorubrica = 0

                $(".panelbody_migrarcompendio").html('hh');
                $("#itemspanelmigrar_compendio").modal({backdrop:'static', width: '750px'}).modal('show');
            });

            $(".btn-cerrarcompendios").click(function() {
                $("#itemspanelmigrar_compendio").modal("hide");
            });


            $("#desplegar_obj").each(function () {
                obj = desplegar(1,obj, 'desplegar_obj');
            });
            $("#desplegar_enf").each(function () {
                enf = desplegar(2,enf, 'desplegar_enf');
            });
            $("#desplegar_rec").each(function () {
                rec = desplegar(3,rec, 'desplegar_rec');
            });
            $("#desplegar_eva").each(function () {
                eva = desplegar(4,eva, 'desplegar_eva');
            });

            $("#desplegar_obj").click(function () {
                obj = desplegar(1,obj, 'desplegar_obj');
            });
            $("#desplegar_enf").click(function () {
                enf = desplegar(2,enf, 'desplegar_enf');
            });
            $("#desplegar_rec").click(function () {
                rec = desplegar(3,rec, 'desplegar_rec');
            });
            $("#desplegar_eva").click(function () {
                eva = desplegar(4,eva, 'desplegar_eva');
            });
            $(".editobjetivo").change(function () {
                var obj = $(this).val();
                var id = $(this).attr('ids');
                bloqueointerface();
                $.post("/pro_planificacion", {'action':'editobjetivoact', 'id': id, 'obj':obj}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                    }
                    else{
                        smoke.alert(data.mensaje);
                    }
                }, 'json');
            });
            $(".editenfoque").change(function () {
                var enf = $(this).val();
                var id = $(this).attr('ids');
                bloqueointerface();
                $.post("/pro_planificacion", {'action':'editenfoqueact', 'id': id, 'enf':enf}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                    }
                    else{
                        smoke.alert(data.mensaje);
                    }
                }, 'json');
            });
            $(".editrecurso").change(function () {
                var rec = $(this).val();
                var id = $(this).attr('ids');
                bloqueointerface();
                $.post("/pro_planificacion", {'action':'editrecursoact', 'id': id, 'rec':rec}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                    }
                    else{
                        smoke.alert(data.mensaje);
                    }
                }, 'json');
            });
            $(".editevaluacion").change(function () {
                var eval = $(this).val();
                var id = $(this).attr('ids');
                bloqueointerface();
                $.post("/pro_planificacion", {'action':'editevaluacionact', 'id': id, 'eval':eval}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                    }
                    else{
                        smoke.alert(data.mensaje);
                    }
                }, 'json');
            });
            $("#itemspanellink .btn-cerrar").click(function() {
                $("#itemspanellink").modal("hide");
            });
            $(".editrecursolink").click(function() {
                var id = $(this).attr('ids');
                $.post("/pro_planificacion", {'action':'listarecursolink', 'id': id}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $(".panelbodylink").html(data.data);
                        $(".itemspanellink").modal({backdrop:'static', width: '700px'}).modal('show');
                    }
                }, 'json');
            });
            $(".actualizar_horas").click(function () {
                bloqueointerface();
                $.post("/pro_planificacion", {'action':'actualizar_horas', 'id': {{silabocab.id }}}, function(data) {
                    if (data.result == 'ok') {
                        bloqueointerface();
                        location.href='/pro_planificacion?action=planclasevirtual&silaboid={{ silabocab.id|encrypt }}';
                        $.unblockUI();
                    }else{
                        smoke.alert("Error al actualizar las horas")
                    }
                }, 'json');
            });


            $(".verobservaciones").click(function() {
                var obstec = $(this).attr('obstec');
                var obsacad = $(this).attr('obsacad');
                var estadocumplimiento = $(this).attr('estc');
                $("#observaciontecnica").val("");
                $("#observacionacademida").val("");
                $("#estadocumplimiento").val("");
                $("#observaciontecnica").val(obstec);
                $("#observacionacademida").val(obsacad);
                $("#estadocumplimiento").val(estadocumplimiento);
                $("#modalobservacion").modal({backdrop:'static', width: '610px'}).modal('show');
            });
            $("#modalobservacion .cerrar_modalobservacion").click(function() {
                $("#observaciontecnica").val("");
                $("#observacionacademida").val("");
                $("#estadocumplimiento").val("");
                $("#modalobservacion").modal("hide");
            });

            $(".verrecursostutor").click(function(){
                var ids=$(this).attr('ids');
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/pro_planificacion",
                    data: {'action': 'verdetalletutor', 'id': ids},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $("#selectauditoria-body").html(data.data);
                            $('#auditoriacriterio').modal({'width': 1000}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error al generar los datos.");
                    },
                    dataType: "json"
                });
            });

            $(".auditoriacriterio_cerrar").click(function () {
                $("#auditoriacriterio").modal('hide');
            });
            actualizar_detalle = function(){
                $(".detalletarea").click(function() {
                    var nomtipo = $(this).attr('nomtipo');
                    var codtipo = $(this).attr('codtipo');
                    var idesta = $(this).attr('idesta');
                    var idtar = $(this).attr('idtar');
                    var action = '';
                    var numerosemana = $(this).attr('idsem');
                    $("#nomtitulodetalle").html('')
                    nomacti = 'Semana #' + numerosemana;
                    $("#nomtitulodetalle").html('Detalle de ' + nomtipo)
                    $("#id_codigotarea").val(idtar)
                    $("#id_codtipo").val(codtipo)
                    bloqueointerface();
                    $.post("/pro_planificacion", {'action':'detalletarea_pregrado', 'idtar': idtar, 'codtipo': codtipo}, function(data) {
                        if (data.result == 'ok') {
                            $.unblockUI();
                            $(".panelbodytarea").html(data.data);
                            $("#divmostrartarea").modal({backdrop:'static', width: '1000px'}).modal('show');
                        }
                    }, 'json');
                });
            };
            $(".cerrartarea").click(function() {
                $("#divmostrartarea").modal("hide");
            });

            $(".informacion").click(function() {
                var opcioninfo = $(this).attr('opcioninfo');
                $("#descripcioninfo").html('')
                if(opcioninfo==1){
                    {#var nombretitulo = $(this).attr('data-original-title');#}
                    $("#descripcioninfo").html("<li><b>NOTIFICAR</b></li> <br>" +
                        "<li>Esta opción permite notificar al Coordinador de carrera que el docente ha ingresado los Recursos de Aprendizaje.</li> <br>"  +
                        "<li> Notificará únicamente los ítems seleccionados.</li><br>" +
                        "<li>Posteriormente, el coordinador de carrera realiza la revisión de los recursos y emite observaciones en caso de ser necesarias.</li><br>")
                }
                if(opcioninfo==2){
                    $("#descripcioninfo").html('<li><b>ACTUALIZAR SÍLABO MOODLE</b></li> <br>' +
                        '<li>Esta opción permite actualizar todo el sílabo a moodle. </li><br>' +
                        '<li>La acción tarda de 15 a 20 minutos en reflejarse en el aula virtual.</li>')
                }
                if(opcioninfo==3){
                    $("#descripcioninfo").html('<li><b>TRAZABILIDAD </b></li><br> ' +
                        '<li>Esta opción permite observar la trazabilidad de todos los recursos y actividades ingresadas con su respectivas semanas y descripción.</li>')
                }
                if(opcioninfo==4){
                    $("#descripcioninfo").html('<li><b>COPIAR DE OTRO CURSO </b></li><br>' +
                        '<li>Esta opción permite copiar los recursos y las actividades de otros cursos del mismo período. </li> <br>' +
                        '<li> Es importante que verifique cuidadosamente la asignatura que escoja, pues en ésta ventana también aparecen asignaturas relacionadas al nombre de la asignatura con la que está trabajando.</li>  <br> ' +
                        '<li>Únicamente se importarán las actividades y los recursos en estado “Aprobado” o “En Moodle”.</li>  <br>' +
                        '<li> Las actividades y los recursos se mostrarán en estado “Aprobado”, una vez copiado debe dar clic en “Migrar Moodle”.</li>')
                }
                if(opcioninfo==5){
                    $("#descripcioninfo").html('<li><b>IMPORTAR RECURSOS</b></li> <br>' +
                        '<li>Esta opción no reemplaza los recursos que ya están ingresados, importan los recursos únicamente en los registros vacíos.</li> <br>' +
                        '<li>Se recomienda que seleccione el período inmediato inferior en el cual el docente tenga planificación completa realizada.</li> <br>' +
                        '<li> Es importante que verifique cuidadosamente la asignatura que escoja, pues en esta ventana también aparecen asignaturas relacionadas al nombre de la asignatura con la que está trabajando.</li> <br>' +
                        '<li>Una vez que haya importado, le aparecerá el recurso en estado “Aprobado” para que le permita migrar a moodle. </li><br>' +
                        '<li> Al importar recursos, únicamente se importan recursos, no actividades. Sólo se importan los recursos en estado “Aprobado” y “En Moodle”. </li> <br>' +
                        '<li>Si selecciona un período diferente al actual, los recursos se mostrarán en estado “Ingresado” para que pueda realizar las actualización de fecha de inicio y de fin. <br>' +
                        '<li>Si selecciona el mismo período, los recursos se mostrarán en estado “Aprobado” para que le permita migrar a moodle.</li>')
                }
                if(opcioninfo==6){
                    $("#descripcioninfo").html('<li><b>IMPORTAR ACTIVIDADES.</b></li> <br>' +
                        '<li> Se recomienda que seleccione el periodo inmediato inferior en el cual el docente tenga planificación completa realizada.</li> <br>' +
                        '<li> Es importante que verifique cuidadosamente la asignatura que escoja, pues en esta ventana también aparecen asignaturas relacionadas al nombre de la asignatura con la que está trabajando.</li> <br>' +
                        '<li> Únicamente se importarán las actividades en estado “Aprobado” o “En Moodle”.</li> <br>' +
                        '<li>Si selecciona un período diferente al actual, las actividades se mostrarán en estado “Ingresado” para que pueda realizar las actualización de fecha de inicio y de fin. <br>' +
                        '<li>Si selecciona el mismo período, las actividades se mostrarán en estado “Aprobado” para que le permita migrar a moodle.</li>')
                }
                if(opcioninfo==7){
                    $("#descripcioninfo").html('<li><b>IMPORTAR VIDEOS MAGISTRALES</b></li> <br>' +
                        '<li>El botón de “Seleccionar” aparecerá siempre y cuando la asignatura tenga videos magistrales planificados, caso contrario aparecerá un mensaje “No existe video magistral en el periodo seleccionado.”</li><br>' +
                        '<li>Es importante que verifique cuidadosamente la asignatura que escoja, pues en esta ventana también aparecen asignaturas relacionadas al nombre de la asignatura con la que está trabajando.</li> <br>' +
                        '<li>Únicamente se importarán los videos en estado “Aprobado” o “En Moodle”.</li>')
                }
                if(opcioninfo==8){
                    $("#descripcioninfo").html('<li><b>DESCARGA MASIVA ACTIVIDADES EN ZIP.</b></li><br>' +
                        '<li>Esta opción permite descargar todas las actividades (Tareas, talleres, tests, exposiciones, foro, análisis de casos, trabajo de investigación, prácticas y trabajos prácticos) de manera masiva en formato ZIP.</li>')
                }
                if(opcioninfo==9){
                    $("#descripcioninfo").html('<li><b>URL SILABO MOODLE.</b></li> <br>' +
                        '<li>Esta opción lo direcciona de manera inmediata al aula de moodle de la asignatura. </li>')
                }
                if(opcioninfo==10){
                    $("#descripcioninfo").html('<li><b>MIGRAR MOODLE MASIVO.</b></li> <br>' +
                        '<li>Al dar click en "Migrar moodle masivo", este permite crear los recursos o actividades en moodle, estos previamente seleccionados mediante el check disponible cuando esta en estado aprobado.</li>')
                }
                if(opcioninfo==11){
                    $("#descripcioninfo").html($("#tema1").html())
                }
                $("#infoaccion").modal("show");
            });
            $(".descripcioninfocerrar").click(function() {
                $("#infoaccion").modal("hide");
            });


            $(".informacionactividades").click(function() {
                var opcioninfoact = $(this).attr('opcioninfoact');
                $("#descripcioninfoact").html('')
                if(opcioninfoact==1){
                    {#var nombretitulo = $(this).attr('data-original-title');#}
                    $("#descripcioninfoact").html("<li><b>IMPORTAR TEST</b></li> <br>" +
                        "<li>Al dar clic en “Importar Test”, podrá seleccionar el período, esta lista contiene periodos distintos al actual.</li> <br>"  +
                        "<li>Seguidamente aparecerá una lista con las asignaturas o sílabos planificados en el periodo seleccionado.</li><br>" +
                        "<li>Una vez seleccionado el período y el sílabo, debe seleccionar la actividad que desea importar, para esto es obligatorio escoger la categoría de calificación  y dar clic en “+”. </li><br>" +
                        "<li>Únicamente se importarán las actividades en estado “Aprobado” o “En Moodle”. </li><br>" +
                        "<li>Las actividades se mostrarán en estado “Ingresado” para que pueda realizar las actualización de fecha de inicio y de fin. </li><br>" +
                        "<li>Se importará únicamente la actividad que haya seleccionado. </li><br>"
                    )
                }
                if(opcioninfoact==2){
                    $("#descripcioninfoact").html("<li><b>IMPORTAR TALLER</b></li> <br>" +
                        "<li>Al dar clic en “Importar Taller”, podrá seleccionar el período, esta lista contiene periodos distintos al actual.</li> <br>"  +
                        "<li>Seguidamente aparecerá una lista con las asignaturas o sílabos planificados en el periodo seleccionado.</li><br>" +
                        "<li>Una vez seleccionado el período y el sílabo, debe seleccionar la actividad que desea importar, para esto es obligatorio escoger la categoría de calificación  y dar clic en “+”. </li><br>" +
                        "<li>Únicamente se importarán las actividades en estado “Aprobado” o “En Moodle”. </li><br>" +
                        "<li>Las actividades se mostrarán en estado “Ingresado” para que pueda realizar las actualización de fecha de inicio y de fin. </li><br>" +
                        "<li>Se importará únicamente la actividad que haya seleccionado. </li><br>"
                    )
                }
                if(opcioninfoact==3){
                    $("#descripcioninfoact").html("<li><b>IMPORTAR EXPOSICIÓN</b></li> <br>" +
                        "<li>Al dar clic en “Importar Exposición”, podrá seleccionar el período, esta lista contiene periodos distintos al actual.</li> <br>"  +
                        "<li>Seguidamente aparecerá una lista con las asignaturas o sílabos planificados en el periodo seleccionado.</li><br>" +
                        "<li>Una vez seleccionado el período y el sílabo, debe seleccionar la actividad que desea importar, para esto es obligatorio escoger la categoría de calificación  y dar clic en “+”. </li><br>" +
                        "<li>Únicamente se importarán las actividades en estado “Aprobado” o “En Moodle”. </li><br>" +
                        "<li>Las actividades se mostrarán en estado “Ingresado” para que pueda realizar las actualización de fecha de inicio y de fin. </li><br>" +
                        "<li>Se importará únicamente la actividad que haya seleccionado. </li><br>"
                    )
                }
                if(opcioninfoact==4){
                    $("#descripcioninfoact").html("<li><b>IMPORTAR FORO</b></li> <br>" +
                        "<li>Al dar clic en “Importar Foro”, podrá seleccionar el período, esta lista contiene periodos distintos al actual.</li> <br>"  +
                        "<li>Seguidamente aparecerá una lista con las asignaturas o sílabos planificados en el periodo seleccionado.</li><br>" +
                        "<li>Una vez seleccionado el período y el sílabo, debe seleccionar la actividad que desea importar, para esto es obligatorio escoger la categoría de calificación  y dar clic en “+”. </li><br>" +
                        "<li>Únicamente se importarán las actividades en estado “Aprobado” o “En Moodle”. </li><br>" +
                        "<li>Las actividades se mostrarán en estado “Ingresado” para que pueda realizar las actualización de fecha de inicio y de fin. </li><br>" +
                        "<li>Se importará únicamente la actividad que haya seleccionado. </li><br>"
                    )
                }
                if(opcioninfoact==5){
                    $("#descripcioninfoact").html("<li><b>IMPORTAR TAREA</b></li> <br>" +
                        "<li>Al dar clic en “Importar Tarea”, podrá seleccionar el período, esta lista contiene periodos distintos al actual.</li> <br>"  +
                        "<li>Seguidamente aparecerá una lista con las asignaturas o sílabos planificados en el periodo seleccionado.</li><br>" +
                        "<li>Una vez seleccionado el período y el sílabo, debe seleccionar la actividad que desea importar, para esto es obligatorio escoger la categoría de calificación  y dar clic en “+”. </li><br>" +
                        "<li>Únicamente se importarán las actividades en estado “Aprobado” o “En Moodle”. </li><br>" +
                        "<li>Las actividades se mostrarán en estado “Ingresado” para que pueda realizar las actualización de fecha de inicio y de fin. </li><br>" +
                        "<li>Se importará únicamente la actividad que haya seleccionado. </li><br>"
                    )
                }
                if(opcioninfoact==6){
                    $("#descripcioninfoact").html("<li><b>ANÁLISIS DE CASO</b></li> <br>" +
                        "<li>Al dar clic en “Importar Análisis de Caso”, podrá seleccionar el período, esta lista contiene periodos distintos al actual.</li> <br>"  +
                        "<li>Seguidamente aparecerá una lista con las asignaturas o sílabos planificados en el periodo seleccionado.</li><br>" +
                        "<li>Una vez seleccionado el período y el sílabo, debe seleccionar la actividad que desea importar, para esto es obligatorio escoger la categoría de calificación  y dar clic en “+”. </li><br>" +
                        "<li>Únicamente se importarán las actividades en estado “Aprobado” o “En Moodle”. </li><br>" +
                        "<li>Las actividades se mostrarán en estado “Ingresado” para que pueda realizar las actualización de fecha de inicio y de fin. </li><br>" +
                        "<li>Se importará únicamente la actividad que haya seleccionado. </li><br>"
                    )
                }
                if(opcioninfoact==7){
                    $("#descripcioninfoact").html("<li><b>TRABAJO DE INVESTIGACIÓN</b></li> <br>" +
                        "<li>Al dar clic en “Importar Trabajo de Investigación”, podrá seleccionar el período, esta lista contiene periodos distintos al actual.</li> <br>"  +
                        "<li>Seguidamente aparecerá una lista con las asignaturas o sílabos planificados en el periodo seleccionado.</li><br>" +
                        "<li>Una vez seleccionado el período y el sílabo, debe seleccionar la actividad que desea importar, para esto es obligatorio escoger la categoría de calificación  y dar clic en “+”. </li><br>" +
                        "<li>Únicamente se importarán las actividades en estado “Aprobado” o “En Moodle”. </li><br>" +
                        "<li>Las actividades se mostrarán en estado “Ingresado” para que pueda realizar las actualización de fecha de inicio y de fin. </li><br>" +
                        "<li>Se importará únicamente la actividad que haya seleccionado. </li><br>"
                    )
                }
                if(opcioninfoact==8){
                    $("#descripcioninfoact").html("<li><b>IMPORTAR TRABAJO PRÁCTICO</b></li> <br>" +
                        "<li>Al dar clic en “Importar Trabajo Práctico”, podrá seleccionar el período, esta lista contiene periodos distintos al actual.</li> <br>"  +
                        "<li>Seguidamente aparecerá una lista con las asignaturas o sílabos planificados en el periodo seleccionado.</li><br>" +
                        "<li>Una vez seleccionado el período y el sílabo, debe seleccionar la actividad que desea importar, para esto es obligatorio escoger la categoría de calificación  y dar clic en “+”. </li><br>" +
                        "<li>Únicamente se importarán las actividades en estado “Aprobado” o “En Moodle”. </li><br>" +
                        "<li>Las actividades se mostrarán en estado “Ingresado” para que pueda realizar las actualización de fecha de inicio y de fin. </li><br>" +
                        "<li>Se importará únicamente la actividad que haya seleccionado. </li><br>"
                    )
                }

                if(opcioninfoact==9){
                    $("#descripcioninfoact").html("<li><b>CREAR  PRESENTACIONES EN MOODLE</b></li> <br>" +
                        "<li>Al dar clic en “Crear todo moodle”, sin  necesidad de seleccionar, se crearán todas las presentaciones semanales aprobadas del sílabo en el que se está trabajando.</li> <br>" +
                        "<li>En caso de existir algún error en la creación de un recurso, solo dicho recurso no será migrado a moodle.</li> <br>"
                    )
                }

                if(opcioninfoact==10){
                    $("#descripcioninfoact").html("<li><b>CREAR  COMPENDIOS EN MOODLE</b></li> <br>" +
                        "<li>Al dar clic en “Crear todo moodle”, sin  necesidad de seleccionar, se crearán todos los compendios semanales aprobados del sílabo en el que se está trabajando.</li> <br>" +
                        "<li>En caso de existir algún error en la creación de un recurso, solo dicho recurso no será migrado a moodle.</li> <br>"
                    )
                }

                if(opcioninfoact==11){
                    $("#descripcioninfoact").html("<li><b>CREAR  GUÍA DE ESTUDIANTE EN MOODLE</b></li> <br>" +
                        "<li>Al dar clic en “Crear todo moodle”, sin  necesidad de seleccionar, se crearán todas las guías de estudiante semanales aprobadas del sílabo en el que se está trabajando.</li> <br>" +
                        "<li>En caso de existir algún error en la creación de un recurso, solo dicho recurso no será migrado a moodle.</li> <br>"
                    )
                }

                if(opcioninfoact==12){
                    $("#descripcioninfoact").html("<li><b>CREAR  MATERIALES COMPLEMENTARIOS EN MOODLE</b></li> <br>" +
                        "<li>Al dar clic en “Crear todo moodle”, sin  necesidad de seleccionar, se crearán todos los materiales complementarios semanales aprobados del sílabo en el que se está trabajando.</li> <br>" +
                        "<li>En caso de existir algún error en la creación de un recurso, solo dicho recurso no será migrado a moodle.</li> <br>"
                    )
                }

                $("#infoaccionact").modal("show");
            });
            $(".descripcioninfoactcerrar").click(function() {
                $("#infoaccionact").modal("hide");
            });


            $(".detalletareaadmision").click(function() {
                var nomtipo = $(this).attr('nomtipo');
                var codtipo = $(this).attr('codtipo');
                var idesta = $(this).attr('idesta');
                var idtar = $(this).attr('idtar');
                var action = '';
                var numerosemana = $(this).attr('idsem');
                $("#nomtitulodetalle").html('')
                nomacti = 'Semana #' + numerosemana;
                $("#nomtitulodetalle").html('Detalle de ' + nomtipo)
                $("#id_codigotarea").val(idtar)
                $("#id_codtipo").val(codtipo)
                bloqueointerface();
                $.post("/pro_planificacion", {'action':'detalletareaadmision', 'idtar': idtar, 'codtipo': codtipo}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $(".panelbodytarea").html(data.data);
                        $("#divmostrartarea").modal({backdrop:'static', width: '1000px'}).modal('show');
                    }
                }, 'json');
            });
            $(".cerrartarea").click(function() {
                $("#divmostrartarea").modal("hide");
            });
            $('.header').click(function(){
                $(this).toggleClass('expand').nextUntil('tr.header').slideToggle(100);
            });
            actualizar_detalle();

            descargazip = function(id) {
                bloqueointerface();
                $.post("/pro_planificacion", {'action': 'generarmasivo', 'id': id}, function(data) {
                    $.unblockUI();
                    if (data.result=='ok') {
                        {#openwindow_reporte(location.origin + data.url, 800, 500);#}
                        window.open(data.url, '_blank');
                    }else{
                        smoke.alert(data.mensaje)
                    }
                });
            };

        });
        function desplegar(id, aux, nombre) {
            if (aux == 0){
                $(".collapse"+id).collapse('hide');
                $("#"+nombre).parent().find(".fa").removeClass("fa-chevron-up").addClass("fa-chevron-down");
                aux=1;
            }else{
                $(".collapse"+id).collapse('show');
                $("#"+nombre).parent().find(".fa").removeClass("fa-chevron-down").addClass("fa-chevron-up");
                aux=0;
            }
            return aux;
        }
        function leer_lista_subtemas(subtema) {
            var ban=0;
            for (i=0;i<lista_items1.length;i++){
                if (subtema == lista_items1[i]['subtema']){
                    ban = 1;
                    return;
                }else {
                    ban = 0;
                }
            }
            return ban;
        }
        function vistaprevia(idproprag){
            openwindow('POST' ,'/pro_planificacion', {action:'silabopdf',id:idproprag}, '_blank');
        }
        function formModal(id, text, action, nombrediv, dimension) {
            bloqueointerface();
            $.ajax({
                type: "GET",
                url: `{{ request.path }}`,
                data: {
                    'action': action,
                    'id': id,
                    'nombrediv': nombrediv,
                },
                success: function (data) {
                    $.unblockUI();
                    if (data.result === true) {
                        $('.panelbodymatricula').html(data.data);
                        $('#itemspanelmatricula .paneltitlematricula').html(text);
                        $("#itemspanelmatricula").modal({backdrop: 'static', width: dimension}).modal('show');
                    } else {
                        smoke.alert(data.mensaje);
                    }
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error de conexión.");
                },
                dataType: "json"
            });
        }

    </script>
    <style>

        .header .sign:after{
            content:"+";
            display:inline-block;
        }
        .header.expand .sign:after{
            content:"-";
        }



        .fa fa-folder-open{background-position:-408px -120px;width:16px;}
        .well{min-height:20px;padding:19px;margin-bottom:20px;background-color:#f5f5f5;border:1px solid #e3e3e3;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-box-shadow:inset 0 1px 1px rgba(0, 0, 0, 0.05);-moz-box-shadow:inset 0 1px 1px rgba(0, 0, 0, 0.05);box-shadow:inset 0 1px 1px rgba(0, 0, 0, 0.05);}.well blockquote{border-color:#ddd;border-color:rgba(0, 0, 0, 0.15);}
        .well-large{padding:24px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;}
        .well-small{padding:9px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;}
        .close{float:right;font-size:20px;font-weight:bold;line-height:20px;color:#000000;text-shadow:0 1px 0 #ffffff;opacity:0.2;filter:alpha(opacity=20);}.close:hover,.close:focus{color:#000000;text-decoration:none;cursor:pointer;opacity:0.4;filter:alpha(opacity=40);}
        button.close{padding:0;cursor:pointer;background:transparent;border:0;-webkit-appearance:none;}
        .tree {
            min-height:20px;
            padding:19px;
            margin-bottom:20px;
            background-color:#fbfbfb;
            border:1px solid #999;
            -webkit-border-radius:4px;
            -moz-border-radius:4px;
            border-radius:4px;
            -webkit-box-shadow:inset 0 1px 1px rgba(0, 0, 0, 0.05);
            -moz-box-shadow:inset 0 1px 1px rgba(0, 0, 0, 0.05);
            box-shadow:inset 0 1px 1px rgba(0, 0, 0, 0.05)
        }
        .tree li {
            list-style-type:none;
            margin: 0;
            padding:10px 5px 0 5px;
            position:relative
        }
        .tree li::before, .tree li::after {
            content:'';
            left:-20px;
            position:absolute;
            right:auto
        }
        .tree li::before {
            border-left:1px solid #999;
            bottom:50px;
            height:100%;
            top:0;
            width:1px
        }
        .tree li::after {
            border-top:1px solid #999;
            height:20px;
            top:25px;
            width:25px
        }
        .tree li span {
            -moz-border-radius:5px;
            -webkit-border-radius:5px;
            border:1px solid #999;
            border-radius:5px;
            display:inline-block;
            padding:3px 8px;
            text-decoration:none
        }
        .tree li.parent_li>span {
            cursor:pointer
        }
        .tree>ul>li::before, .tree>ul>li::after {
            border:0
        }
        .tree li:last-child::before {
            height:30px
        }
        .tree li.parent_li>span:hover, .tree li.parent_li>span:hover+ul li span {
            background:#eee;
            border:1px solid #94a0b4;
            color:#000
        }
    </style>
    <script src="/static/adicionalesjs/formquestiontemplate.js?0.26"></script>
{% endblock %}
{% block atras %}/pro_planificacion?action=silabo&materia={{ silabocab.materia.id|encrypt }}{% endblock %}
{% block canvas %}
    <div class='row-fluid'>
        <div class='span9'>
            <h5>{{ title }} </h5>
            <h5>Profesor: {{ profesor }}</h5>
            <h5>Asignatura: {{ silabocab.materia.asignaturamalla }} - {{ silabocab.materia.paralelo }}
                idmat ({{ silabocab.materia.id }}) -
                id moodle ({{ silabocab.materia.idcursomoodle }})
            </h5>
        </div>
        <div class='span3'>
            <table width="100%" border="0" cellspacing="0" cellpadding="0" class="table table-bordered" >
                <tr>
                    <td style="text-align: center">
                        <a style="color: #3a87ad; font-size: 18px" href="#"><i class="fa fa-circle"></i></a>
                    </td>
                    <td style="text-align: justify">INGRESADO</td>
                    <td style="text-align: center">
                        <a style="color: #b94a48; font-size: 18px" href="#"><i class="fa fa-circle"></i></a>
                    </td>
                    <td style="text-align: justify">RECHAZADO</td>
                </tr>
                <tr>
                    <td style="text-align: center">
                        <a style="color: #faa732; font-size: 18px" href="#"><i class="fa fa-circle"></i></a>
                    </td>
                    <td style="text-align: justify">APROBADO</td>
                    <td style="text-align: center">
                        <a style="color: #5bb75b; font-size: 18px" href="#"><i class="fa fa-circle"></i></a>
                    </td>
                    <td style="text-align: justify">EN MOODLE</td>
                </tr>
                <tr>
                    <td style="text-align: center" colspan="1">
                        <a style="color: #77477E; font-size: 18px" href="#"><i class="fa fa-circle"></i></a>
                    </td>
                    <td style="text-align: justify" colspan="3">REVISIÓN CRAI</td>
                </tr>
            </table>
        </div>
    </div>

    <div class='row-fluid'>
        <div class='span6'>
            <div class="btn-group">
                <a class="btn dropdown-toggle" data-toggle="dropdown" href="javascript:;"><b>ACCIONES</b> <span class="caret"></span></a>
                <ul class="dropdown-menu pull-left">
                    <li><a href="javascript:;" class="notificarmasivo" title="Solo se notificarán los ítems seleccionados"><span class="fa fa-check"></span> Notificar</a>
{#                        <ul class="dropdown-menu pull-right">#}
{#                            <li><a href="javascript:;" class="informacion tu" title="Información Notificar" opcioninfo="1"><span class="fa fa-info"></span> Información Notificar</a></li>#}
{#                        </ul>#}
                    </li>
                    {#                        <a style="color: red" href="javascript:;" class='delactividad tu' idacti="{{ semana.diapositiva_semanales.id|encrypt }}" numerosemana="{{ semana.numsemana }}" nomacti="{{ semana.diapositiva_semanales.nombre }}" opciondel="6" title='Eliminar presentación'><i class="fa fa-trash"></i></a>#}

                    {#                    <li><a href="javascript:;" class="notificarmasivo" title="Solo se notificarán los ítems seleccionados"><span class="fa fa-check"></span> Notificar</a></li>#}


                    <li>
                        <a href="javascript:;" class="migrarmoodlemasivo" title="Solo se migrarán los ítems seleccionados"><span class="fa fa-check"></span> Migrar Moodle Masivo</a>
{#                        <ul class="dropdown-menu pull-right">#}
{#                            <li><a href="javascript:;" class="informacion tu" title="Información Migrar moodle masivo" opcioninfo="10"><span class="fa fa-info"></span> Información migrar moodle masivo</a></li>#}
{#                        </ul>#}
                    </li>

                    <li>
                        <a href="javascript:;" class="actualizarsmoodle"><span class="fa fa-refresh"></span> Actualizar Sílabo Moodle</a>
{#                        <ul class="dropdown-menu pull-right">#}
{#                            <li><a href="javascript:;" class="informacion tu" title="Información Actualizar Sílabo Moodle" opcioninfo="2"><span class="fa fa-info"></span> Información Actualizar Sílabo Moodle</a></li>#}
{#                        </ul>#}
                    </li>
                    <li><a class="bloqueo_pantalla" href="/pro_planificacion?action=trazabilidad&id={{ silabocab.id|encrypt }}&rutapage=planrecursoclasevirtual"><i class="fa fa-list"></i> Trazabilidad</a>
{#                        <ul class="dropdown-menu pull-right">#}
{#                            <li><a href="javascript:;" class="informacion tu" title="Información Trazabilidad" opcioninfo="3"><span class="fa fa-info"></span> Información Trazabilidad</a></li>#}
{#                        </ul>#}
                    </li>
                    <li><a tipo="1" ids="{{ silabocab.id|encrypt }}" href="javascript:;" class="duplicar_recurso_periodo_todo"  nombretitulopanel="Copiar de otro curso"><i class="fa fa-clone"></i> Copiar de otro curso</a>
{#                        <ul class="dropdown-menu pull-right">#}
{#                            <li><a href="javascript:;" class="informacion tu" title="Información Copiar de otro curso" opcioninfo="4"><span class="fa fa-info"></span> Información Copiar de otro curso</a></li>#}
{#                        </ul>#}
                    </li>
                    <li><a tipo="2" ids="{{ silabocab.id|encrypt }}" href="javascript:;" class="duplicar_recurso_periodo_todo" nombretitulopanel="Importar recurso"><i class="fa fa-clone"></i> Importar Recursos</a>
{#                        <ul class="dropdown-menu pull-right">#}
{#                            <li><a href="javascript:;" class="informacion tu" title="Información Importar recurso" opcioninfo="5"><span class="fa fa-info"></span> Información Importar Recursos</a></li>#}
{#                        </ul>#}
                    </li>
                    <li><a tipo="3" ids="{{ silabocab.id|encrypt }}" href="javascript:;" class="duplicar_recurso_periodo_todo" ><i class="fa fa-clone"></i> Importar Actividades</a>
{#                        <ul class="dropdown-menu pull-right">#}
{#                            <li><a href="javascript:;" class="informacion tu" title="Información Importar actividades" opcioninfo="6"><span class="fa fa-info"></span> Información Importar Actividades</a></li>#}
{#                        </ul>#}
                    </li>
                    {% if puede_videomagistral or idcoordinacion == 9 %}
                        <li><a tipo="4" ids="{{ silabocab.id|encrypt }}" href="javascript:;" class="duplicar_recurso_periodo_todo" nombretitulopanel="Importar videos magistrales"><i class="fa fa-clone"></i> Importar videos magistrales</a>
{#                            <ul class="dropdown-menu pull-right">#}
{#                                <li><a href="javascript:;" class="informacion tu" title="Información Importar videos magistrales" opcioninfo="7"><span class="fa fa-info"></span> Información Importar Videos Magistrales</a></li>#}
{#                            </ul>#}
                        </li>
                    {% endif %}
                    <li><a onclick="descargazip('{{ silabocab.id|encrypt }}')" href="javascript:;"><i class="fa fa-arrow-down"></i>  Descarga masiva actividades en zip</a>
{#                        <ul class="dropdown-menu pull-right">#}
{#                            <li><a href="javascript:;" class="informacion tu" title="Información Descarga masiva actividades en zip" opcioninfo="8"><span class="fa fa-info"></span> Información Descarga masiva actividades en zip</a></li>#}
{#                        </ul>#}
                    </li>
                    <li><a  href="/media/htmlmoodlestatic/{{ silabocab.materia.namehtml }}"><i class="fa fa-arrow-down"></i>  Url sílabo moodle</a>
{#                        <ul class="dropdown-menu pull-right">#}
{#                            <li><a href="javascript:;" class="informacion tu" title="Información Url silabo moodle" opcioninfo="9"><span class="fa fa-info"></span> Información Url sílabo moodle</a></li>#}
{#                        </ul>#}
                    </li>
                </ul>
            </div>
        </div>

        {#        <div class='span6' style="text-align: right">#}
        {#            <a href="javascript:;" class="btn btn-info btn-mini tu actualizarsmoodle" title="Actualizar sílabo moodle"><span class="fa fa-refresh"></span> Actualizar Sílabo Moodle</a>#}
        {#            <a class="btn btn-warning bloqueo_pantalla" href="/pro_planificacion?action=trazabilidad&id={{ silabocab.id|encrypt }}&rutapage=planrecursoclasevirtual"><i class="fa fa-list"></i> Trazabilidad</a>#}
        {#            <a tipo="1" ids="{{ silabocab.id|encrypt }}" href="javascript:;" class="btn btn-mini btn-form btn-danger tu duplicar_recurso_periodo_todo" data-placement="left" data-original-title="Copiar de otro curso" nombretitulopanel="Copiar de otro curso"><i class="fa fa-clone"></i> Copiar de otro curso</a>#}
        {#            <a tipo="2" ids="{{ silabocab.id|encrypt }}" href="javascript:;" class="btn btn-mini btn-form btn-primary tu duplicar_recurso_periodo_todo" data-placement="left" data-original-title="Importar Recursos" nombretitulopanel="Importar recurso"><i class="fa fa-clone"></i> Importar Recursos</a>#}
        {#            <a tipo="3" ids="{{ silabocab.id|encrypt }}" href="javascript:;" class="btn btn-mini btn-form btn-info tu duplicar_recurso_periodo_todo" data-placement="left" data-original-title="Importar Actividades"><i class="fa fa-clone"></i> Importar Actividades</a>#}
        {#            {% if puede_videomagistral or idcoordinacion == 9 %}#}
        {#                <a tipo="4" ids="{{ silabocab.id|encrypt }}" href="javascript:;" class="btn btn-mini btn-form btn-success tu duplicar_recurso_periodo_todo" data-placement="left" data-original-title="Importar videos magistrales" nombretitulopanel="Importar videos magistrales"><i class="fa fa-clone"></i> Importar videos magistrales</a>#}
        {#            {% endif %}#}
        {#            <a class="btn btn-inverse bloqueo_pantalla" href="/pro_planificacion?action=descargamasiva&id={{ silabocab.id|encrypt }}" target="_blank"><i class="fa fa-download"></i>  Descarga masiva actividades en zip</a>#}
        {#            <a class="btn btn-inverse " onclick="descargazip('{{ silabocab.id|encrypt }}')" href="javascript:;"><i class="fa fa-arrow-down"></i>  Descarga masiva actividades en zip</a>#}
        {#        </div>#}




    </div>
    {% if silabocab.materia.idcursomoodle == 0 %}
        <div class='row-fluid'>
            <div class='span12'>
                <div class="alert alert-info">
                    NOTA: Puede crear los recursos pero no podrá migrar a mooodle mientras la asignatura no exista en el Aula Virtual.
                </div>
            </div>
        </div>
    {% endif %}

    {% if titulacion %}
        <div class='row-fluid'>
            <div class='span12'>
                <div class="alert alert-info">
                    NOTA: Las actividades de esta materia no son calificables.
                </div>
            </div>
        </div>
    {% endif %}
    <head>
        <meta charset="utf-8">
        <title>Overflow y Visibility</title>
        <style type="text/css">

            *{font-family: arial;}
            /*Para los DIV*/
            .sco{width: 200px; height: 200px; background-color: #ffffff;
                scrollbar-color: #09C transparent;
                border-radius: 5px;
                border: 1px solid #f1f1f1; overflow: scroll;border-left: 5px
            {#solid #1C3247 #}
            }
            /*Texto*/
            .hori{font-size: 12px; width: 800px;}

        </style>
    </head>
    <div id="no-more-tables">
        <div class='row-fluid'>
            <div class='span12'>
                <table width="100%" border="0" cellspacing="0" cellpadding="0" class="table table-bordered"  >
                    <thead>
                    <tr>
                        <th style="vertical-align:middle;text-align: center;font-size: 10px;" rowspan="3">TEMAS / SUBTEMAS </th>
                        <th style="vertical-align:middle;text-align: center;font-size: 10px;" rowspan="2" {% if puede_videomagistral %}colspan="5"{% else %}colspan="2"{% endif %}>RECURSOS</th>
                        <th style="vertical-align:middle;text-align: center;font-size: 10px;" colspan="3">APRENDIZAJE CONTACTO CON EL DOCENTE</th>
                        <th style="vertical-align:middle;text-align: center;font-size: 10px;" colspan="3">APRENDIZAJE AUTÓNOMO</th>
                        <th style="vertical-align:middle;text-align: center;font-size: 10px;" colspan="3">APRENDIZAJE PRÁCTICO EXPERIMENTAL</th>
                    </tr>
                    <tr>
                        {#                    <th rowspan="2">TEMAS / SUBTEMAS </th>#}
                        {#                    <th {% if puede_videomagistral %}colspan="5"{% else %}colspan="4"{% endif %}>RECURSOS</th>#}
                        <th style="vertical-align:middle;text-align: center;font-size: 10px;width: 300px" rowspan="2">ACTIVIDADES</th>
                        <th style="vertical-align:middle;text-align: center;font-size: 10px;" colspan="2">EVALUACIÓN DE HORAS DEL COMPONENTE</th>
                        <th style="vertical-align:middle;text-align: center;font-size: 10px;width: 300px" rowspan="2">ACTIVIDADES</th>
                        <th style="vertical-align:middle;text-align: center;font-size: 10px;" colspan="2">EVALUACIÓN DE HORAS DEL COMPONENTE</th>
                        <th style="vertical-align:middle;text-align: center;font-size: 10px;width: 300px" rowspan="2">ACTIVIDADES</th>
                        <th style="vertical-align:middle;text-align: center;font-size: 10px;" colspan="2">EVALUACIÓN DE HORAS DEL COMPONENTE</th>
                    </tr>
                    <tr>
                        <th style="vertical-align:middle;text-align: center;font-size: 10px;width: 150px">
                            Presentación
                            {% if silabocab.materia.idcursomoodle > 0 %}
                                <div id="muestramasivopresentacion">
                                    <a href="javascript:;" nhref="/pro_planificacion?action=crearmoodlepresentacionmasivo&ids={{ silabocab.id|encrypt }}" data-placement="left" title="Crear Presentaciones en moodle" class="btn confirmacionmodal btn-tini btn-primary tu"><i class="fa fa-check"></i> Crear todo moodle </a>
                                    <a href="javascript:;" class="informacionactividades tu btn btn-mini" title="Información crear presentación moodle" opcioninfoact="9"><span class="fa fa-info"></span></a>
                                </div>
                            {% endif %}
                        </th>
                        {% if silabocab.materia.nivel.modalidad_id == 3 %}
                            <th style="vertical-align:middle;text-align: center;font-size: 10px;;width: 150px">
                                Compendio
                                {% if silabocab.materia.idcursomoodle > 0 %}
                                    <div id="muestramasivocompendio">
                                        <a href="javascript:;" nhref="/pro_planificacion?action=crearmoodlecompendiomasivo&ids={{ silabocab.id|encrypt }}" data-placement="right" title="Crear Compendios en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear todo moodle</a>
                                        <a href="javascript:;" class="informacionactividades tu  btn btn-mini" title="Información crear compendio moodle" opcioninfoact="10"><span class="fa fa-info"></span></a>
                                    </div>
                                {% endif %}
                            </th>
                        {% endif %}

                        {% if puede_videomagistral  %}
                            <th style="vertical-align:middle;text-align: center;font-size: 10px;;width: 150px">Video Magistral</th>
                        {% endif %}
                        {% if silabocab.materia.nivel.modalidad_id == 3 %}
                            <th style="vertical-align:middle;text-align: center;font-size: 10px;;width: 150px">
                                Guía del estudiante
                                {% if silabocab.materia.idcursomoodle > 0 %}
                                    <div id="muestramasivoguias">
                                        <a href="javascript:;" nhref="/pro_planificacion?action=crearmoodleguiasmasivo&ids={{ silabocab.id|encrypt }}" data-placement="right" title="Crear Guías en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear todo moodle</a>
                                        <a href="javascript:;" class="informacionactividades tu btn btn-mini" title="Información crear guía de estudiante moodle" opcioninfoact="11"><span class="fa fa-info"></span></a>
                                    </div>
                                {% endif %}
                            </th>
                        {% endif %}

                        <th style="vertical-align:middle;text-align: center;font-size: 10px;;width: 150px">
                            Materiales complementarios
                            {% if silabocab.materia.idcursomoodle > 0 %}
                                <div id="muestramasivomaterial">
                                    <a href="javascript:;" nhref="/pro_planificacion?action=crearmoodlematerialmasivo&ids={{ silabocab.id|encrypt }}" data-placement="left" title="Crear Materiales Complementarios en moodle" class="btn confirmacionmodal btn-tini btn-primary tu"><i class="fa fa-check"></i> Crear todo moodle</a>
                                    <a href="javascript:;" class="informacionactividades tu btn btn-mini" title="Información crear material complementario moodle" opcioninfoact="12"><span class="fa fa-info"></span></a>
                                </div>
                            {% endif %}
                        </th>
                        <th style="vertical-align:middle;text-align: center;font-size: 10px;;width: 150px">Horas</th>
                        <th style="vertical-align:middle;text-align: center;font-size: 10px;;width: 150px">%</th>
                        <th style="vertical-align:middle;text-align: center;font-size: 10px;;width: 150px">Horas</th>
                        <th style="vertical-align:middle;text-align: center;font-size: 10px;;width: 150px">%</th>
                        <th style="vertical-align:middle;text-align: center;font-size: 10px;;width: 150px">Horas</th>
                        <th style="vertical-align:middle;text-align: center;font-size: 10px;;width: 150px">%</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for semana in silabosemanal %}
                        {#                    <tr class="header expand">#}
                        {% if not semana.examen %}
                            <tr>
                                {#                        <td bgcolor="#d9edf7" {% if silabocab.videomagistral %}colspan="10"{% else %}colspan="9"{% endif %} height="30" style="text-align: left; font-size: 16px;" valign="middle">#}
                                <td {% if semana.numsemana > 7 %}bgcolor="#eaf5e2"{% else %}bgcolor="#d9edf7"{% endif %} {% if puede_videomagistral  %}colspan="16"{% else %}colspan="15"{% endif %} height="30" style="vertical-align:middle;text-align: left;font-size: 16px;" >
                                    {#                            <div class='span9'>#}
                                    <strong>
                                        SEMANA {{ semana.numsemana }} |
                                        DESDE: {{ semana.fechainiciosemana|date:"Y-m-d" }}
                                        HASTA: {{ semana.fechafinciosemana|date:"Y-m-d" }}
                                        ({{ semana.id }})
                                    </strong>
                                    {#                            </div>#}
                                    {#                            <div class='span3' style="text-align: right">#}
                                    {#                                {% if not semana.tareas_semanales and not semana.foros_semanales and not semana.test_semanales and not semana.guiaestudiante_semanales and not semana.guiadocente_semanales and not semana.diapositiva_semanales  and not semana.compendio_semanales and not semana.material_semanales %}#}
                                    {#                                    <a ids="{{ silabocab.id|encrypt }}" semana="{{ semana.semana }}" numsemana="{{ forloop.counter  }}" idsemanal="{{ semana.id }}" fini="{{ semana.fechainiciosemana|date:"Y-m-d"  }}" ffin="{{ semana.fechafinciosemana|date:"Y-m-d"  }}" href="javascript:;" class="btn btn-mini btn-form btn-info tu duplicar_recurso_periodo" data-placement="left" data-original-title="Importar"><i class="fa fa-clone"></i> Importar</a>#}
                                    {#                                {% endif %}#}
                                    {#                            </div>#}
                                    {#                            <span class="sign"></span>#}
                                </td>
                            </tr>
                            <tr>
                                <td data-title='TEMAS'>
                                    {% with temasselec=semana|call:'temas_seleccionados_planclase' %}
                                        <div  class="tree well" style="padding: 0px; border-left:5px solid #e9ecef;border-left-color: #1C3247;border-radius: 0.25rem" >
                                            <div class="sco">
                                                {% with unidades=semana|call:'unidades_silabosemanal' %}
                                                    {% for uni in unidades %}
                                                        <dt class="hori">UNIDAD {{ uni.temaunidadresultadoprogramaanalitico.unidadresultadoprogramaanalitico.orden }}: {{ uni.temaunidadresultadoprogramaanalitico.unidadresultadoprogramaanalitico.descripcion }}</dt>
                                                        {% with temasselec=semana|args:uni.temaunidadresultadoprogramaanalitico.unidadresultadoprogramaanalitico.id|call:'temas_silabosemanal' %}
                                                            {% for temassel in temasselec %}
                                                                <dt style="font-weight: normal;">
                                                                    <ul>
                                                                <dt style="font-weight: normal;" class="hori">
                                                                    <b >TEMA: {{ temassel.temaunidadresultadoprogramaanalitico.orden }}.-</b> {{ temassel.temaunidadresultadoprogramaanalitico.descripcion }}
                                                                </dt>
                                                                <ul>
                                                                    {% with subtemasselec=semana|args:temassel.temaunidadresultadoprogramaanalitico|call:'subtemas_silabosemanal' %}
                                                                        {% if subtemasselec %}
                                                                            {% for subtemassel in subtemasselec %}
                                                                                <dt style="font-weight: normal;" class="hori"><b>SUBTEMA: {{ subtemassel.subtemaunidadresultadoprogramaanalitico.orden }}.-</b> {{ subtemassel.subtemaunidadresultadoprogramaanalitico.descripcion }}</dt>
                                                                            {% endfor %}
                                                                        {% endif %}
                                                                    {% endwith %}
                                                                </ul>
                                                                </ul>
                                                                </dt>
                                                            {% endfor %}
                                                        {% endwith %}
                                                    {% endfor %}
                                                {% endwith %}
                                            </div>
                                        </div>
                                    {% endwith %}
                                </td>
                                <td data-title='PRESENTACIÓN' valign="top">
                                    <div style="text-align: left" id="diapositiva{{ semana.id }}_{{ forloop.counter }}">
                                        <div style="text-align: left">
                                            {% if not silabocab.materia.cerrado %}
{#                                                {% if not semana.diapositiva_semanales.estado_id == 2 %}#}
                                                    {% if not semana.diapositiva_semanales %}
                                                        <a style="color: green" href="/pro_planificacion?action=adddiapositivavirtual&codigosemana={{ semana.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar presentación'><i class="fa fa-plus"></i></a>
                                                    {% else %}
                                                        {% if semana.diapositiva_semanales.estado.editan %}
                                                            {#                                                        <a style="color: green" href="/pro_planificacion?action=editdiapositivavirtual&codigosemana={{ semana.id|encrypt }}&codigodiapositivavirtual={{ semana.diapositiva_semanales.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Editar presentación'><i class="fa fa-edit"></i></a>#}
                                                            <a style="color: green" onclick="formModal('{{ semana.diapositiva_semanales.id|encrypt }}','EDITAR PRESENTACIÓN SEMANA {{ semana.numsemana }} ','editdiapositivavirtual', 'diapositiva{{ semana.id }}_{{ forloop.counter }}','900')"
                                                               href="javascript:void(0);"><i class="fa fa-edit"></i>
                                                            </a>
                                                        {% endif %}
{#                                                        {% if semana.diapositiva_semanales.estado_id != 4 %}#}
                                                            <a style="color: red" href="javascript:;" class='delactividad tu' idacti="{{ semana.diapositiva_semanales.id|encrypt }}" numerosemana="{{ semana.numsemana }}" nomacti="{{ semana.diapositiva_semanales.nombre }}" opciondel="6" title='Eliminar presentación'><i class="fa fa-trash"></i></a>
{#                                                        {% endif %}#}
{#                                                    {% endif %}#}
                                                {% endif %}


                                            {% endif %}
                                        </div>
                                        {% if semana.diapositiva_semanales %}
                                            {% if semana.diapositiva_semanales.estado.migramoodle %}
                                                <input type="checkbox" class="recorreitemsdiapositiva" iditem="{{ semana.diapositiva_semanales.id }}">
                                            {% endif %}
                                            <div class="accordion" id="accordiondiapositiva{{ semana.id|encrypt }}">
                                                <div class="accordion-group">
                                                    <div class="accordion-heading">
                                                        <a data-toggle="collapse" data-parent="#accordiondiapositiva{{ semana.id|encrypt }}" href="#collapseOnediapositiva{{ semana.id|encrypt }}">

                                                            <span class="fa fa-list"></span> Presentación
                                                        </a>
                                                    </div>
                                                    <div id="collapseOnediapositiva{{ semana.id|encrypt }}" class="accordion-body collapse in">
                                                        <a class="recorrepresentacion" codestado="{{ semana.diapositiva_semanales.estado_id }}" style="color: #{{ semana.diapositiva_semanales.estado.colorestado }}; font-size: 18px" href="#"><i class="fa fa-circle"></i></a><br>
                                                        {{ semana.diapositiva_semanales.nombre }}<br>
                                                        {% if semana.diapositiva_semanales.archivodiapositiva %}
                                                            <a href='{{ semana.diapositiva_semanales.archivodiapositiva.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Archivo </a>
                                                        {% endif %}
                                                        <br>
                                                        <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletarea" codtipo="6" nomtipo="Presentación" idesta="{{ semana.diapositiva_semanales.estado_id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.diapositiva_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>

                                                        {% if semana.diapositiva_semanales.estado.migramoodle  %}
                                                            {% if silabocab.materia.idcursomoodle > 0 %}
                                                                <a class="btn btn-tini btn-primary" onclick="formModal('{{ semana.diapositiva_semanales.id|encrypt }}','Crear Diapositiva en Moodle ','crearmoodlerecurso', 'diapositiva{{ semana.id }}_{{ forloop.counter }}','300')"
                                                                   href="javascript:void(0);"><i class="fa fa-check"></i> Crear Moodle
                                                                </a>


                                                                {#                                                                <a href="javascript:;" data-placement="right" nhref="/pro_planificacion?action=crearmoodlerecurso&idf={{ semana.diapositiva_semanales.id|encrypt }}&ids={{ silabocab.id|encrypt }}" title="Crear Diapositiva en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear Moodle</a>#}
                                                                {#                                                                <a onclick="eliminarajax('{{ semana.diapositiva_semanales.id|encrypt }}', ' estás seguro?', 'crearmoodlerecurso', 'Estas por Crear Diapositiva en Moodle' )" class="btn btn-tini btn-primary btn-xs" href="javascript:void(0);"><i class="fa fa-check"></i></a>#}
                                                            {% endif %}
                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </div>
                                        {% endif %}
                                    </div>
                                </td>
                                {% if silabocab.materia.nivel.modalidad_id == 3 %}

                                    <td data-title='COMPENDIO' valign="top">
                                        <div style="text-align: left">
                                            {#                                {% if not semana.compendio_semanales.estado_id == 2 %}#}
                                            {% if not silabocab.materia.cerrado %}
                                                {% if not semana.compendio_semanales %}
                                                    <a style="color: green" href="/pro_planificacion?action=addcompendiovirtual&codigosemana={{ semana.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar compendio'><i class="fa fa-plus"></i></a>
                                                {% else %}
                                                    {% if semana.compendio_semanales.estado_id == 1 or semana.compendio_semanales.estado_id == 2 or semana.compendio_semanales.estado_id == 3 %}
                                                        <a style="color: red" href="javascript:;" class='delactividad tu' idacti="{{ semana.compendio_semanales.id|encrypt }}" numerosemana="{{ semana.numsemana }}" nomacti="{{ semana.compendio_semanales.nombre }}" opciondel="7" title='Eliminar compendio'><i class="fa fa-trash"></i></a>
                                                    {% endif %}
                                                    <a style="color: green" href="/pro_planificacion?action=editcompendiovirtual&codigosemana={{ semana.id|encrypt }}&codigocompendiovirtual={{ semana.compendio_semanales.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Editar compendio'><i class="fa fa-edit"></i></a>
                                                {% endif %}
                                            {% endif %}
                                            {#                                {% endif %}#}
                                        </div>

                                        {% if semana.compendio_semanales %}
                                            {% if semana.compendio_semanales.estado.migramoodle %}
                                                <input type="checkbox" class="recorreitemscompendio" iditem="{{ semana.compendio_semanales.id }}">
                                            {% endif %}
                                            <div class="accordion" id="accordioncompendio{{ semana.id|encrypt }}">
                                                <div class="accordion-group">
                                                    <div class="accordion-heading">
                                                        <a data-toggle="collapse" data-parent="#accordioncompendio{{ semana.id|encrypt }}" href="#collapseOnecompendio{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Compendio</a>
                                                    </div>
                                                    <div id="collapseOnecompendio{{ semana.id|encrypt }}" class="accordion-body collapse in">
                                                        <a class="recorrecompendio" codestado="{{ semana.compendio_semanales.estado_id }}" style="color: #{{ semana.compendio_semanales.estado.colorestado }}; font-size: 18px" href="#"><i class="fa fa-circle"></i></a><br>
                                                        {{ semana.compendio_semanales.descripcion }}<br>
                                                        {#                                                {% if semana.compendio_semanales.archivocompendio %}#}
                                                        {#                                                    <a href='{{ semana.compendio_semanales.archivocompendio.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Archivo compendio</a>#}
                                                        {#                                                {% endif %}#}
                                                        {#                                                {% if semana.compendio_semanales.archivoplagio %}#}
                                                        {#                                                    <a href='{{ semana.compendio_semanales.archivoplagio.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Archivo plagio</a>#}
                                                        {#                                                {% endif %}#}
                                                        {#                                                <br>#}
                                                        <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletarea" codtipo="7" nomtipo="Compendio" idesta="{{ semana.compendio_semanales.estado_id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.compendio_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
{#                                                        {% if semana.compendio_semanales.estado_id == 2  %}#}
                                                            {% with compendiopdf=semana.compendio_semanales|args:periodoseleccionado|call:'mis_formatos2' %}
                                                                {% if compendiopdf and semana.compendio_semanales.estado_id == 1 %}
                                                                    {% if silabocab.materia.idcursomoodle > 0 %}
                                                                        <a href="javascript:;" data-placement="right" nhref="/pro_planificacion?action=crearmoodlecompendio&idf={{ semana.compendio_semanales.id|encrypt }}&ids={{ silabocab.id|encrypt }}" title="Crear Compendio en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear Moodle</a>
                                                                    {% endif %}
                                                                {% endif %}

                                                            {% endwith %}
                                                            {% if semana.compendio_semanales.estado_id == 2 %}
                                                                {% if silabocab.materia.idcursomoodle > 0 %}
                                                                        <a href="javascript:;" data-placement="right" nhref="/pro_planificacion?action=crearmoodlecompendio&idf={{ semana.compendio_semanales.id|encrypt }}&ids={{ silabocab.id|encrypt }}" title="Crear Compendio en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear Moodle</a>
                                                                {% endif %}
                                                            {% endif %} 
{#                                                            {% if silabocab.materia.idcursomoodle > 0 %}#}
{#                                                                <a href="javascript:;" data-placement="right" nhref="/pro_planificacion?action=crearmoodlecompendio&idf={{ semana.compendio_semanales.id|encrypt }}&ids={{ silabocab.id|encrypt }}" title="Crear Compendio en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear Moodle</a>#}
{#                                                            {% endif %}#}
{#                                                        {% endif %}#}
                                                    </div>
                                                </div>
                                            </div>
                                        {% endif %}
                                    </td>
                                {% endif %}

                                {% if puede_videomagistral   %}
                                    <td data-title='VIDEO MAGISTRAL' valign="top">
                                        <div style="text-align: left">
                                            {#                                    {% if semana.diapositiva_semanales and semana.compendio_semanales %}#}
                                            {#                                        {% if semana.diapositiva_semanales.estado_id == 4 and semana.compendio_semanales.estado_id == 4 %}#}
                                            {% if not silabocab.materia.cerrado %}
                                                {% if not semana.vidmagistral_semanales.estado_id == 2 %}
                                                    {% if not semana.vidmagistral_semanales %}
                                                        <a style="color: green" href="/pro_planificacion?action=addvidmagistralvirtual&codigosemana={{ semana.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar video magistral'><i class="fa fa-plus"></i></a>
                                                    {% else %}
                                                        {% if semana.vidmagistral_semanales.estado_id == 1 or semana.vidmagistral_semanales.estado_id == 3 %}
                                                            <a style="color: green" href="/pro_planificacion?action=editvidmagistralvirtual&codigosemana={{ semana.id|encrypt }}&codigovidmagistralvirtual={{ semana.vidmagistral_semanales.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Editar video magistral'><i class="fa fa-edit"></i></a>
                                                            <a style="color: #ff0000" href="javascript:;" class='delactividad tu' idacti="{{ semana.vidmagistral_semanales.id|encrypt }}" numerosemana="{{ semana.numsemana }}" nomacti="{{ semana.vidmagistral_semanales.nombre }}" opciondel="9" title='Eliminar video magistral'><i class="fa fa-trash"></i></a>
                                                        {% endif %}
                                                    {% endif %}
                                                {% endif %}
                                            {% endif %}
                                        </div>
                                        {% if semana.vidmagistral_semanales %}
                                            {% if semana.vidmagistral_semanales.estado.id == 2 %}
                                                <input type="checkbox" class="recorreitemsvidmagistral" iditem="{{ semana.vidmagistral_semanales.id }}">
                                            {% endif %}
                                            <div class="accordion" id="accordionvidmagistral{{ semana.id|encrypt }}">
                                                <div class="accordion-group">
                                                    <div class="accordion-heading">
                                                        <a data-toggle="collapse" data-parent="#accordionvidmagistral{{ semana.id|encrypt }}" href="#collapseOnevidmagistral{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Video magistral</a>
                                                    </div>
                                                    <div id="collapseOnevidmagistral{{ semana.id|encrypt }}" class="accordion-body collapse in">
                                                        <a style="color: #{{ semana.vidmagistral_semanales.estado.colorestado }}; font-size: 18px" href="#"><i class="fa fa-circle"></i></a><br>
                                                        {{ semana.vidmagistral_semanales.get_tipograbacion_display }}<br>
                                                        {{ semana.vidmagistral_semanales.nombre }}<br>
                                                        {% if semana.vidmagistral_semanales.archivovideomagistral %}
                                                            <a href='{{ semana.vidmagistral_semanales.archivovideomagistral.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Archivo </a>
                                                        {% endif %}
                                                        <br>
                                                        <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletarea" codtipo="9" nomtipo="Video Magistral" idesta="{{ semana.vidmagistral_semanales.estado_id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.vidmagistral_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>

                                                        {% if MIGRAR_VIDEO_INGRESADO %}
                                                            {% if semana.vidmagistral_semanales.estado.id == 2 or semana.vidmagistral_semanales.estado.id == 1 %}
                                                                {% if silabocab.materia.idcursomoodle > 0 %}
                                                                    <a href="javascript:;" data-placement="right" nhref="/pro_planificacion?action=crearmoodlevidmagistral&idvid={{ semana.vidmagistral_semanales.id|encrypt }}&ids={{ silabocab.id|encrypt }}" title="Crear Video Magistral en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear Moodle</a>
                                                                {% endif %}
                                                            {% endif %}
                                                        {% else %}
                                                            {% if semana.vidmagistral_semanales.estado.id == 2  %}
                                                                {% if silabocab.materia.idcursomoodle > 0 %}
                                                                    <a href="javascript:;" data-placement="right" nhref="/pro_planificacion?action=crearmoodlevidmagistral&idvid={{ semana.vidmagistral_semanales.id|encrypt }}&ids={{ silabocab.id|encrypt }}" title="Crear Video Magistral en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear Moodle</a>
                                                                {% endif %}
                                                            {% endif %}
                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </div>
                                        {% endif %}
                                        {#                                        {% endif %}#}
                                        {#                                    {% endif %}#}
                                    </td>
                                {% endif %}
                                {% if silabocab.materia.nivel.modalidad_id == 3 %}
                                    <td data-title='GUÍA DEL ESTUDIANTE' valign="top">
                                        <div style="text-align: left">
                                            {#                                {% if not semana.guiaestudiante_semanales.estado_id == 2 %}#}
                                            {% if not silabocab.materia.cerrado %}
                                                {% if not semana.guiaestudiante_semanales %}
                                                    <a style="color: green" href="/pro_planificacion?action=addguiaestudiantevirtual&codigosemana={{ semana.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar guía estudiante'><i class="fa fa-plus"></i></a>
                                                {% else %}
{#                                                    {% if semana.guiaestudiante_semanales.estado_id == 1 or semana.guiaestudiante_semanales.estado_id == 3 %}#}
                                                        <a style="color: red" href="javascript:;" class='delactividad tu' idacti="{{ semana.guiaestudiante_semanales.id|encrypt }}" numerosemana="{{ semana.numsemana }}" nomacti="{{ semana.guiaestudiante_semanales.observacion }}" opciondel="4" title='Eliminar guía estudiante'><i class="fa fa-trash"></i></a>
{#                                                    {% endif %}#}
                                                    <a style="color: green" href="/pro_planificacion?action=editguiaestudiantevirtual&codigosemana={{ semana.id|encrypt }}&codigoguiaestudiantevirtual={{ semana.guiaestudiante_semanales.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Editar guía estudiante'><i class="fa fa-edit"></i></a>
                                                {% endif %}
                                            {% endif %}
                                            {#                                {% endif %}#}
                                        </div>
                                        {% if semana.guiaestudiante_semanales %}
                                            {% if semana.guiaestudiante_semanales.estado.migramoodle %}
                                                <input type="checkbox" class="recorreitemsguiaestudiante" iditem="{{ semana.guiaestudiante_semanales.id }}">
                                            {% endif %}
                                            <div class="accordion" id="accordionguiaestudiante{{ semana.id|encrypt }}">
                                                <div class="accordion-group">
                                                    <div class="accordion-heading">
                                                        <a data-toggle="collapse" data-parent="#accordionguiaestudiante{{ semana.id|encrypt }}" href="#collapseOneguiaestudiante{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Guía estudiante</a>
                                                    </div>
                                                    <div id="collapseOneguiaestudiante{{ semana.id|encrypt }}" class="accordion-body collapse in">
                                                        <a class="recorreguias" codestado="{{ semana.guiaestudiante_semanales.estado_id }}" style="color: #{{ semana.guiaestudiante_semanales.estado.colorestado }}; font-size: 18px" href="#"><i class="fa fa-circle"></i></a><br>
                                                        {{ semana.guiaestudiante_semanales.observacion }}<br>
                                                        {#                                                {% if semana.guiaestudiante_semanales.archivoguiaestudiante %}#}
                                                        {#                                                    <a href='{{ semana.guiaestudiante_semanales.archivoguiaestudiante.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Archivo guía estudiante</a>#}
                                                        {#                                                {% endif %}#}
                                                        <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletarea" codtipo="4" nomtipo="Guia estudiante" idesta="{{ semana.guiaestudiante_semanales.estado_id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.guiaestudiante_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                                        {% if semana.guiaestudiante_semanales.estado.migramoodle  %}
                                                            {% if silabocab.materia.idcursomoodle > 0 %}
                                                                <a href="javascript:;" data-placement="right" nhref="/pro_planificacion?action=crearmoodleguiaestudiante&idf={{ semana.guiaestudiante_semanales.id|encrypt }}&ids={{ silabocab.id|encrypt }}" title="Crear Guia estudiante en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear Moodle</a>
                                                            {% endif %}
                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </div>
                                        {% endif %}
                                    </td>
                                {% endif %}

                                <td data-title='MAT. COMPLEMENTARIOS' valign="top">
                                    {% if not silabocab.materia.cerrado %}
                                        <div style="text-align: left">
                                            {#                                {% if fechahoy <= semana.fechafinciosemana %}#}
                                            <a style="color: green" href="/pro_planificacion?action=addmaterialadicionalvirtual&codigosemana={{ semana.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar recurso'><i class="fa fa-plus"></i></a>
                                            {#                                {% endif %}#}
                                        </div>
                                    {% endif %}
                                    {% if semana.material_semanales %}
                                        <div class="accordion" id="accordionmaterial{{ semana.id|encrypt }}">
                                            <div class="accordion-group">
                                                <div class="accordion-heading">
                                                    <a data-toggle="collapse" data-parent="#accordionmaterial{{ semana.id|encrypt }}" href="#collapsematerial{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Material complementario</a>
                                                </div>
                                                <div id="collapsematerial{{ semana.id|encrypt }}" class="accordion-body collapse in">
                                                    {% for material in semana.material_semanales %}
                                                        {% if material.estado.migramoodle %}
                                                            <input type="checkbox" class="recorreitemsmaterial" iditem="{{ material.id }}">
                                                        {% endif %}
                                                        <a class="recorrematerial" codestado="{{ material.estado_id }}" style="color:#{{ material.estado.colorestado }}; font-size: 18px" href="#"><i class="fa fa-circle"></i></a><br>
                                                        {% if not silabocab.materia.cerrado %}
                                                            {% if not material.estado_id == 2 %}
                                                                {% if material.estado.editan %}
                                                                    <a style="color: green" href="/pro_planificacion?action=editmaterialadicionalvirtual&codigosemana={{ semana.id|encrypt }}&codigomaterialvirtual={{ material.id|encrypt }}" href="javascript:;" class='bloqueo_pantalla'><i class="fa fa-edit"></i></a>

                                                                {% endif %}
{#                                                                {% if material.estado_id == 1 or material.estado_id == 2 or material.estado_id == 3 %}#}
                                                                    <a style="color: red" href="javascript:;" class='delactividad tu' idacti="{{ material.id|encrypt }}" numerosemana="{{ semana.numsemana }}" nomacti="{{ material.nombre }}" opciondel="8" title='Eliminar material complementario'><i class="fa fa-trash"></i></a>
{#                                                                {% endif %}#}
                                                            {% endif %}
                                                        {% endif %}
                                                        {{ material.nombre }}<br>
                                                        {% if material.tipomaterial == 1 %}
                                                            {% if material.archivomaterial %}
                                                                <a href='{{ material.archivomaterial.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Archivo recurso</a>
                                                            {% endif %}
                                                        {% endif %}
                                                        {% if material.tipomaterial == 2 or material.tipomaterial == 3 %}
                                                            <a href="{{ material.testourl }}" target="_blank"><i class="fa fa-link"></i> ver link</a>
                                                        {% endif %}
                                                        <br>
                                                        <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletarea" codtipo="8" nomtipo="Material complementario" idesta="{{ material.estado_id }}" idsem="{{ semana.numsemana }}" idtar="{{ material.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                                        {% if material.estado.migramoodle  %}
                                                            {% if silabocab.materia.idcursomoodle > 0 %}
                                                                <a href="javascript:;" data-placement="right" nhref="/pro_planificacion?action=crearmoodlematerial&idf={{ material.id|encrypt }}&ids={{ silabocab.id|encrypt }}" title="Crear Materiales en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear Moodle</a>
                                                            {% endif %}
                                                        {% endif %}
                                                        <br><br>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                        </div>
                                    {% endif %}
                                </td>
                                <td data-title='ACD' valign="top">
                                    {% if idcoordinacion != 9 %}
                                        {% if not silabocab.materia.cerrado %}
                                            <div style="text-align: left">
                                                {% with actividadsemanal=semana|args:1|call:'test_plansemanal' %}
                                                    {% if actividadsemanal %}
                                                        <a style="color: green" href="javascript:;"><i class="fa fa-paw"></i></a>
                                                    {% endif %}
                                                {% endwith %}
                                                {% if not semana.test_semanales.estado_id == 2 %}
                                                    {% if not semana.test_semanales %}
                                                        <a style="color: green" href="/pro_planificacion?action=addtestvirtualvdos&codigosemana={{ semana.id|encrypt }}&codigoactividad={{ 1|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar Test'><i class="fa fa-plus"></i></a>
                                                        <a tipoactividad="1" nombretipoactividad="TEST" codsemanal="{{ semana.id|encrypt }}" numsemana="{{ semana.numsemana }}" href="javascript:;" class="duplicar_recurso_individual tu" data-placement="left" data-original-title="Importar test"><i class="fa fa-clone"></i></a>
                                                        <a href="javascript:;" class="informacionactividades tu  btn btn-mini" title="Información Importar Test" opcioninfoact="1"><span class="fa fa-info"></span></a>

                                                    {% else %}
                                                        {% if semana.test_semanales.estado.editan %}
                                                            <a style="color: green" href="/pro_planificacion?action=edittestvirtualvdos&codigosemana={{ semana.id|encrypt }}&codigotestvirtual={{ semana.test_semanales.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Editar Test'><i class="fa fa-edit"></i></a>
                                                        {% endif %}
{#                                                        {% if semana.test_semanales.estado_id == 1 or semana.test_semanales.estado_id == 2 or semana.test_semanales.estado_id == 3 %}#}
                                                            <a style="color: red" href="javascript:;" class='delactividad tu' idacti="{{ semana.test_semanales.id|encrypt }}" numerosemana="{{ semana.numsemana }}" nomacti="{{ semana.test_semanales.nombretest }}" opciondel="3" title='Eliminar Test'><i class="fa fa-trash"></i></a>
{#                                                        {% endif %}#}
                                                    {% endif %}
                                                {% endif %}
                                            </div>
                                        {% endif %}
                                        {% if semana.test_semanales %}
                                            {% if semana.test_semanales.estado.migramoodle %}
                                                <input type="checkbox" class="recorreitemstest" iditem="{{ semana.test_semanales.id }}">
                                            {% endif %}
                                            <div class="listadotests_{{ semana.unidad_planclase.0 }}"></div>
                                            <div style="margin-bottom: 5px;" class="accordion" id="accordiontest{{ semana.id|encrypt }}">
                                                <div class="accordion-group">
                                                    <div class="accordion-heading">
                                                        <a data-toggle="collapse" data-parent="#accordiontest{{ semana.id|encrypt }}" href="#collapsetest{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Test</a>
                                                    </div>
                                                    <div id="collapsetest{{ semana.id|encrypt }}" class="accordion-body collapse in">
                                                        {#                                            <span class="label label-{{ semana.test_semanales.estado.colorestado }}">#}
                                                        {#                                                ESTADO: {{ semana.test_semanales.estado.nombre }}#}
                                                        {#                                            </span><br>#}
                                                        <a style="color: #{{ semana.test_semanales.estado.colorestado }}; font-size: 18px" href="#"><i class="fa fa-circle"></i></a>
                                                        <span class="label label-default">
                                                {{ semana.test_semanales.detallemodelo.nombre }}
                                            </span><br>
                                                        {{ semana.test_semanales.nombretest }}
                                                        <br>
                                                        <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletarea" codtipo="3" nomtipo="Test" idesta="{{ semana.test_semanales.estado_id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.test_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                                        <a href="/pro_planificacion?action=reporte_test&id={{ semana.test_semanales.id|encrypt }}" class="btn btn-warning fa fa-download" target="_blank"> </a>
                                                        {% if semana.test_semanales.estado.migramoodle %}
                                                            {% if silabocab.materia.idcursomoodle > 0 %}
                                                                <a href="javascript:;" data-placement="right" nhref="/pro_planificacion?action=creartestmoodle&idt={{ semana.test_semanales.id|encrypt }}&ids={{ silabocab.id|encrypt }}" title="Crear test en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear Moodle</a>
                                                            {% endif %}
                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </div>
                                        {% endif %}
                                    {% else %}
                                        {% if not silabocab.materia.cerrado %}
                                            <a style="color: green" href="/pro_planificacion?action=addtestvirtualadmision&codigosemana={{ semana.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar Test'><i class="fa fa-plus"></i></a>
                                        {% endif %}
                                        {% if semana.test_semanalesadmision %}
                                            <div class="accordion" id="accordionmaterial{{ semana.id|encrypt }}">
                                                <div class="accordion-group">
                                                    <div class="accordion-heading">
                                                        <a data-toggle="collapse" data-parent="#accordiontest{{ semana.id|encrypt }}" href="#collaptest{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Test</a>
                                                    </div>
                                                    <div id="collaptest{{ semana.id|encrypt }}" class="accordion-body collapse in">
                                                        {% for test in semana.listatest_semanalesadmision %}
                                                            <a style="color:#{{ test.estado.colorestado }}; font-size: 18px" href="#"><i class="fa fa-circle"></i></a><br>
                                                            {% if not test.estado_id == 2 %}
                                                                {% if test.estado.editan %}
                                                                    <a style="color: green" href="/pro_planificacion?action=edittestvirtualadmision&codigosemana={{ semana.id|encrypt }}&codigotestvirtual={{ test.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Editar Test'><i class="fa fa-edit"></i></a>
                                                                {% endif %}
                                                                {% if test.estado_id == 1 or test.estado_id == 3 %}
                                                                    <a style="color: red" href="javascript:;" class='delactividadadmision tu' idacti="{{ semana.test_semanalesadmision.id|encrypt }}" numerosemana="{{ semana.numsemana }}" nomacti="{{ test.titulo }}" opciondel="3" title='Eliminar Test'><i class="fa fa-trash"></i></a>
                                                                {% endif %}
                                                            {% endif %}
                                                            {{ test.titulo }}<br>
                                                            <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletareaadmision" codtipo="3" nomtipo="Test" idesta="{{ test.estado_id }}" idsem="{{ semana.numsemana }}" idtar="{{ test.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                                            {% if test.url1 %}
                                                                <label class="label label-info">
                                                                    Link1
                                                                </label>
                                                            {% endif %}
                                                            {% if test.url2 %}
                                                                <label class="label label-info">
                                                                    Link2
                                                                </label>
                                                            {% endif %}
                                                            <br><br>
                                                        {% endfor %}
                                                    </div>
                                                </div>
                                            </div>
                                        {% endif %}
                                    {% endif %}
                                    <hr color="black" style="border-top: 1px solid #1C3247 ; margin: 1px 0;" />
                                    <div style="text-align: left">
                                        {% with actividadsemanal=semana|args:3|call:'test_plansemanal' %}
                                            {% if actividadsemanal %}
                                                <a style="color: green" href="javascript:;"><i class="fa fa-paw"></i></a>
                                            {% endif %}
                                        {% endwith %}
                                        {% if not silabocab.materia.cerrado %}
                                            {% if not semana.talleres_semanales.estado_id == 2 %}
                                                {% if not semana.talleres_semanales %}
                                                    <a style="color: green" href="/pro_planificacion?action=addtareavirtualvdos&codigosemana={{ semana.id|encrypt }}&codigoactividad={{ 3|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar Taller'><i class="fa fa-plus"></i></a>
                                                    <a tipoactividad="3" nombretipoactividad="TALLER" codsemanal="{{ semana.id|encrypt }}" numsemana="{{ semana.numsemana }}" href="javascript:;" class="tu duplicar_recurso_individual" data-placement="left" data-original-title="Importar taller"><i class="fa fa-clone"></i></a>
                                                    <a href="javascript:;" class="informacionactividades tu  btn btn-mini" title="Información Importar Taller" opcioninfoact="2"><span class="fa fa-info"></span></a>

                                                {% else %}
                                                    {% if semana.talleres_semanales.estado.editan %}
                                                        {#                                                    {% if not semana.talleres_semanales.estado_id == 4 %}#}
                                                        <a style="color: green" href="/pro_planificacion?action=edittareavirtualvdos&codigosemana={{ semana.id|encrypt }}&codigotareavirtual={{ semana.talleres_semanales.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Editar Taller'><i class="fa fa-edit"></i></a>
                                                        {#                                                    {% endif %}#}
                                                    {% endif %}
{#                                                    {% if semana.talleres_semanales.estado_id == 1 or semana.talleres_semanales.estado_id == 2 or semana.talleres_semanales.estado_id == 3 %}#}
                                                        <a style="color: red" href="javascript:;" class='delactividad tu' idacti="{{ semana.talleres_semanales.id|encrypt }}" numerosemana="{{ semana.numsemana }}" nomacti="{{ semana.talleres_semanales.nombre }}" opciondel="1" title='Eliminar Taller'><i class="fa fa-trash"></i></a>
{#                                                    {% endif %}#}
                                                {% endif %}
                                            {% endif %}
                                        {% endif %}
                                    </div>
                                    {% if semana.talleres_semanales %}
                                        {% if semana.talleres_semanales.estado.migramoodle %}
                                            <input type="checkbox" class="recorreitemstarea" iditem="{{ semana.talleres_semanales.id }}">
                                        {% endif %}
                                        <div class="listadotests_{{ semana.unidad_planclase.0 }}"></div>
                                        {#                                    <div class="listadotareas_{{ semana.unidad_planclase.0 }}"></div>#}
                                        <div style="margin-bottom: 5px;" class="accordion" id="accordion{{ semana.id|encrypt }}">
                                            <div class="accordion-group">
                                                <div class="accordion-heading">
                                                    <a data-toggle="collapse" data-parent="#accordion{{ semana.id|encrypt }}" href="#collapseOne{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Taller</a>
                                                </div>
                                                <div id="collapseOne{{ semana.id|encrypt }}" class="accordion-body collapse in">
                                                    <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                                        <tr>
                                                            <td colspan="8">
                                                                <a style="color: #{{ semana.talleres_semanales.estado.colorestado }}; font-size: 18px" href="#" class='tu' data-placement="right" href="javascript:;"  title='{{ semana.talleres_semanales.estado.nombre }}'><i class="fa fa-circle"></i></a>
                                                                <span class="label label-default">
                                                        {{ semana.talleres_semanales.detallemodelo.nombre }}
                                                        </span><br>
                                                                {{ semana.talleres_semanales.nombre }}
                                                            </td>
                                                        </tr>
                                                        {% if semana.talleres_semanales.archivorubrica or semana.talleres_semanales.archivotareasilabo %}
                                                            <tr>
                                                                <td colspan="4">
                                                                    {% if semana.talleres_semanales.archivorubrica %}
                                                                        <a href='{{ semana.talleres_semanales.archivorubrica.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Rúbrica</a>
                                                                    {% endif %}
                                                                </td>
                                                                <td colspan="4">
                                                                    {% if semana.talleres_semanales.archivotareasilabo %}
                                                                        <a href='{{ semana.talleres_semanales.archivotareasilabo.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Tarea</a>
                                                                    {% endif %}
                                                                </td>
                                                            </tr>
                                                        {% endif %}
                                                    </table>
                                                    <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletarea" codtipo="1" nomtipo="Taller" idesta="{{ semana.talleres_semanales.estado_id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.talleres_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                                    <a href="/pro_planificacion?action=reporte_tarea&id={{ semana.talleres_semanales.id|encrypt }}" class="btn btn-warning fa fa-download" target="_blank" > </a>
                                                    {% if semana.talleres_semanales.estado.migramoodle %}
                                                        {% if silabocab.materia.idcursomoodle > 0 %}
                                                            <a href="javascript:;" data-placement="right" nhref="/pro_planificacion?action=crearmoodle&idt={{ semana.talleres_semanales.id|encrypt }}&ids={{ silabocab.id|encrypt }}" title="Crear tarea en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear Moodle</a>
                                                        {% endif %}
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                    {% endif %}
                                    <hr color="black" style="border-top: 1px solid #1C3247 ; margin: 1px 0;" />
                                    <div style="text-align: left">
                                        {% with actividadsemanal=semana|args:2|call:'test_plansemanal' %}
                                            {% if actividadsemanal %}
                                                <a style="color: green" href="javascript:;"><i class="fa fa-paw"></i></a>
                                            {% endif %}
                                        {% endwith %}
                                        {% if not silabocab.materia.cerrado %}
                                            {% if not semana.exposiciones_semanales.estado_id == 2 %}
                                                {% if not semana.exposiciones_semanales %}
                                                    <a style="color: green" href="/pro_planificacion?action=addtareavirtualvdos&codigosemana={{ semana.id|encrypt }}&codigoactividad={{ 2|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar Exposición'><i class="fa fa-plus"></i></a>
                                                    <a tipoactividad="2" nombretipoactividad="EXPOSICIÓN" codsemanal="{{ semana.id|encrypt }}" numsemana="{{ semana.numsemana }}" href="javascript:;" class="tu duplicar_recurso_individual" data-placement="left" data-original-title="Importar exposición"><i class="fa fa-clone"></i></a>
                                                    <a href="javascript:;" class="informacionactividades tu  btn btn-mini" title="Información Importar Exposición" opcioninfoact="3"><span class="fa fa-info"></span></a>

                                                {% else %}
                                                    {% if semana.exposiciones_semanales.estado.editan %}
                                                        {#                                                    {% if not semana.exposiciones_semanales.estado_id == 4 %}#}
                                                        <a style="color: green" href="/pro_planificacion?action=edittareavirtualvdos&codigosemana={{ semana.id|encrypt }}&codigotareavirtual={{ semana.exposiciones_semanales.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Editar Exposición'><i class="fa fa-edit"></i></a>
                                                        {#                                                    {% endif %}#}
                                                    {% endif %}
{#                                                    {% if semana.exposiciones_semanales.estado_id == 1 or semana.exposiciones_semanales.estado_id == 2 or semana.exposiciones_semanales.estado_id == 3 %}#}
                                                        <a style="color: red" href="javascript:;" class='delactividad tu' idacti="{{ semana.exposiciones_semanales.id|encrypt }}" numerosemana="{{ semana.numsemana }}" nomacti="{{ semana.exposiciones_semanales.nombre }}" opciondel="1" title='Eliminar Exposición'><i class="fa fa-trash"></i></a>
{#                                                    {% endif %}#}
                                                {% endif %}
                                            {% endif %}
                                        {% endif %}
                                    </div>
                                    {% if semana.exposiciones_semanales %}
                                        {% if semana.exposiciones_semanales.estado.migramoodle %}
                                            <input type="checkbox" class="recorreitemstarea" iditem="{{ semana.exposiciones_semanales.id }}">
                                        {% endif %}
                                        <div class="listadotests_{{ semana.unidad_planclase.0 }}"></div>
                                        <div class="accordion" id="accordion{{ semana.id|encrypt }}">
                                            <div class="accordion-group">
                                                <div class="accordion-heading">
                                                    <a data-toggle="collapse" data-parent="#accordion{{ semana.id|encrypt }}" href="#collapseExpo{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Exposición</a>
                                                </div>
                                                <div id="collapseExpo{{ semana.id|encrypt }}" class="accordion-body collapse in">
                                                    <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                                        <tr>
                                                            <td colspan="8">
                                                                <a style="color: #{{ semana.exposiciones_semanales.estado.colorestado }}; font-size: 18px" href="#" class='tu' data-placement="right" href="javascript:;"  title='{{ semana.exposiciones_semanales.estado.nombre }}'><i class="fa fa-circle"></i></a>
                                                                <span class="label label-default">
                                                        {{ semana.exposiciones_semanales.detallemodelo.nombre }}
                                                        </span><br>
                                                                {{ semana.exposiciones_semanales.nombre }}
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="4">
                                                                {% if semana.exposiciones_semanales.archivorubrica %}
                                                                    <a href='{{ semana.exposiciones_semanales.archivorubrica.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Rúbrica</a>
                                                                {% endif %}
                                                            </td>
                                                            <td colspan="4">
                                                                {% if semana.exposiciones_semanales.archivotareasilabo %}
                                                                    <a href='{{ semana.exposiciones_semanales.archivotareasilabo.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Exposición</a>
                                                                {% endif %}
                                                            </td>
                                                        </tr>
                                                    </table>
                                                    <br>
                                                    <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletarea" codtipo="1" nomtipo="Exposición" idesta="{{ semana.exposiciones_semanales.estado_id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.exposiciones_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                                    <a href="/pro_planificacion?action=reporte_tarea&id={{ semana.exposiciones_semanales.id|encrypt }}" class="btn btn-warning fa fa-download" target="_blank"> </a>
                                                    {% if semana.exposiciones_semanales.estado.migramoodle %}
                                                        {% if silabocab.materia.idcursomoodle > 0 %}
                                                            <a href="javascript:;" data-placement="right" nhref="/pro_planificacion?action=crearmoodle&idt={{ semana.exposiciones_semanales.id|encrypt }}&ids={{ silabocab.id|encrypt }}" title="Crear exposición en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear Moodle</a>
                                                        {% endif %}
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                    {% endif %}
                                </td>
                                <td style="text-align: center"><div class="horasdoc{{ semana.unidad_planclase.0 }}">0</div></td>
                                <td style="text-align: center"><div class="porcedoc{{ semana.unidad_planclase.0 }}">0%</div></td>
                                <td data-title='AA' valign="top">
                                    {% if not silabocab.materia.cerrado %}
                                        <div style="text-align: left">
                                            {% with actividadsemanal=semana|args:6|call:'test_plansemanal' %}
                                                {% if actividadsemanal %}
                                                    <a style="color: green" href="javascript:;"><i class="fa fa-paw"></i></a>
                                                {% endif %}
                                            {% endwith %}
                                            {% if not semana.foros_semanales.estado_id == 2 %}
                                                {% if not semana.foros_semanales %}
                                                    <a style="color: green" href="/pro_planificacion?action=addforovirtualvdos&codigosemana={{ semana.id|encrypt }}&codigoactividad={{ 6|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar Foro'><i class="fa fa-plus"></i></a>
                                                    <a tipoactividad="6" nombretipoactividad="FORO" codsemanal="{{ semana.id|encrypt }}" numsemana="{{ semana.numsemana }}" href="javascript:;" class="tu duplicar_recurso_individual" data-placement="left" data-original-title="Importar foro"><i class="fa fa-clone"></i></a>
                                                    <a href="javascript:;" class="informacionactividades tu  btn btn-mini" title="Información Importar Foro" opcioninfoact="4"><span class="fa fa-info"></span></a>

                                                {% else %}
                                                    {% if semana.foros_semanales.estado.editan %}
                                                        <a style="color: green" href="/pro_planificacion?action=editforovirtualvdos&codigosemana={{ semana.id|encrypt }}&codigoforovirtual={{ semana.foros_semanales.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Editar Foro'><i class="fa fa-edit"></i></a>

                                                    {% endif %}
{#                                                    {% if semana.foros_semanales.estado_id == 1 or semana.foros_semanales.estado_id == 2 or semana.foros_semanales.estado_id == 3 %}#}
                                                        <a style="color: red" href="javascript:;" class='delactividad tu' idacti="{{ semana.foros_semanales.id|encrypt }}" numerosemana="{{ semana.numsemana }}" nomacti="{{ semana.foros_semanales.nombre }}" opciondel="2" title='Eliminar Foro'><i class="fa fa-trash"></i></a>
{#                                                    {% endif %}#}
                                                {% endif %}
                                            {% endif %}
                                        </div>
                                    {% endif %}
                                    {% if semana.foros_semanales %}
                                        {% if semana.foros_semanales.estado.migramoodle %}
                                            <input type="checkbox" class="recorreitemsforo" iditem="{{ semana.foros_semanales.id }}">
                                        {% endif %}
                                        <div class="listadoforos_{{ semana.unidad_planclase.0 }}"></div>
                                        <div class="accordion" id="accordionforo{{ semana.id|encrypt }}">
                                            <div class="accordion-group">
                                                <div class="accordion-heading">
                                                    <a data-toggle="collapse" data-parent="#accordionforo{{ semana.id|encrypt }}" href="#collapseforo{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Foro</a>
                                                </div>
                                                <div id="collapseforo{{ semana.id|encrypt }}" class="accordion-body collapse in">
                                                    <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                                        <tr>
                                                            <td colspan="8">
                                                                <a style="color: #{{ semana.foros_semanales.estado.colorestado }}; font-size: 18px" href="#"><i class="fa fa-circle"></i></a>
                                                                <span class="label label-default">
                                                        {{ semana.foros_semanales.detallemodelo.nombre }}
                                                        </span><br>
                                                                {{ semana.foros_semanales.nombre }}
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="4">
                                                                {% if semana.foros_semanales.archivorubrica %}
                                                                    <a href='{{ semana.foros_semanales.archivorubrica.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Rúbrica</a>
                                                                {% endif %}
                                                            </td>
                                                            <td colspan="4">
                                                                {% if semana.foros_semanales.archivoforo %}
                                                                    <a href='{{ semana.foros_semanales.archivoforo.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Foro</a>
                                                                {% endif %}
                                                            </td>
                                                        </tr>
                                                    </table>
                                                    <br>
                                                    <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletarea" codtipo="2" nomtipo="Foro" idesta="{{ semana.foros_semanales.estado_id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.foros_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                                    <a href="/pro_planificacion?action=reporte_foro&id={{ semana.foros_semanales.id|encrypt }}" class="btn btn-warning fa fa-download" target="_blank"> </a>
                                                    {% if semana.foros_semanales.estado.migramoodle  %}
                                                        {% if silabocab.materia.idcursomoodle > 0 %}
                                                            <a href="javascript:;" data-placement="right" nhref="/pro_planificacion?action=crearmoodleforo&idf={{ semana.foros_semanales.id|encrypt }}&ids={{ silabocab.id|encrypt }}" title="Crear Foro en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear Moodle</a>
                                                        {% endif %}
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                    {% endif %}
                                    <hr color="black" style="border-top: 1px solid #1C3247 ; margin: 1px 0;" />
                                    <div style="text-align: left">
                                        {% with actividadsemanal=semana|args:5|call:'test_plansemanal' %}
                                            {% if actividadsemanal %}
                                                <a style="color: green" href="javascript:;"><i class="fa fa-paw"></i></a>
                                            {% endif %}
                                        {% endwith %}
                                        {% if not silabocab.materia.cerrado %}
                                            {% if not semana.tareas_semanales.estado_id == 2 %}
                                                {% if not semana.tareas_semanales %}
                                                    <a style="color: green" href="/pro_planificacion?action=addtareavirtualvdos&codigosemana={{ semana.id|encrypt }}&codigoactividad={{ 5|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar Tarea'><i class="fa fa-plus"></i></a>
                                                    <a tipoactividad="5" nombretipoactividad="TAREA" codsemanal="{{ semana.id|encrypt }}" numsemana="{{ semana.numsemana }}" href="javascript:;" class="tu duplicar_recurso_individual" data-placement="left" data-original-title="Importar tarea"><i class="fa fa-clone"></i></a>
                                                    <a href="javascript:;" class="informacionactividades tu  btn btn-mini" title="Información Importar Tarea" opcioninfoact="5"><span class="fa fa-info"></span></a>
                                                {% else %}
                                                    {% if semana.tareas_semanales.estado.editan %}
                                                        <a style="color: green" href="/pro_planificacion?action=edittareavirtualvdos&codigosemana={{ semana.id|encrypt }}&codigotareavirtual={{ semana.tareas_semanales.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Editar Tarea'><i class="fa fa-edit"></i></a>

                                                    {% endif %}
{#                                                    {% if semana.tareas_semanales.estado_id == 1 or semana.tareas_semanales.estado_id == 2 or semana.tareas_semanales.estado_id == 3 %}#}
                                                        <a style="color: red" href="javascript:;" class='delactividad tu' idacti="{{ semana.tareas_semanales.id|encrypt }}" numerosemana="{{ semana.numsemana }}" nomacti="{{ semana.tareas_semanales.nombre }}" opciondel="1" title='Eliminar Tarea'><i class="fa fa-trash"></i></a>
{#                                                    {% endif %}#}
                                                {% endif %}
                                            {% endif %}
                                        {% endif %}
                                    </div>
                                    {% if semana.tareas_semanales %}
                                        {% if semana.tareas_semanales.estado.migramoodle %}
                                            <input type="checkbox" class="recorreitemstarea" iditem="{{ semana.tareas_semanales.id }}">
                                        {% endif %}
                                        <div class="listadoforos_{{ semana.unidad_planclase.0 }}"></div>
                                        <div class="accordion" id="accordion{{ semana.id|encrypt }}">
                                            <div class="accordion-group">
                                                <div class="accordion-heading">
                                                    <a data-toggle="collapse" data-parent="#accordion{{ semana.id|encrypt }}" href="#collapseTarea{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Tarea</a>
                                                </div>
                                                <div id="collapseTarea{{ semana.id|encrypt }}" class="accordion-body collapse in">
                                                    <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                                        <tr>
                                                            <td colspan="8">
                                                                <a style="color: #{{ semana.tareas_semanales.estado.colorestado }}; font-size: 18px" href="#" class='tu' data-placement="right" href="javascript:;"  title='{{ semana.tareas_semanales.estado.nombre }}'><i class="fa fa-circle"></i></a>
                                                                <span class="label label-default">
                                                        {{ semana.tareas_semanales.detallemodelo.nombre }}
                                                        </span><br>
                                                                {{ semana.tareas_semanales.nombre }}
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="4">
                                                                {% if semana.tareas_semanales.archivorubrica %}
                                                                    <a href='{{ semana.tareas_semanales.archivorubrica.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Rúbrica</a>
                                                                {% endif %}
                                                            </td>
                                                            <td colspan="4">
                                                                {% if semana.tareas_semanales.archivotareasilabo %}
                                                                    <a href='{{ semana.tareas_semanales.archivotareasilabo.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Tarea</a>
                                                                {% endif %}
                                                            </td>
                                                        </tr>
                                                    </table>
                                                    <br>
                                                    <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletarea" codtipo="1" nomtipo="Tarea" idesta="{{ semana.tareas_semanales.estado_id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.tareas_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                                    <a href="/pro_planificacion?action=reporte_tarea&id={{ semana.tareas_semanales.id|encrypt }}" class="btn btn-warning fa fa-download" target="_blank"> </a>
                                                    {% if semana.tareas_semanales.estado.migramoodle %}
                                                        {% if silabocab.materia.idcursomoodle > 0 %}
                                                            <a href="javascript:;" data-placement="right" nhref="/pro_planificacion?action=crearmoodle&idt={{ semana.tareas_semanales.id|encrypt }}&ids={{ silabocab.id|encrypt }}" title="Crear tarea en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear Moodle</a>
                                                        {% endif %}
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                    {% endif %}
                                    <hr color="black" style="border-top: 1px solid #1C3247 ; margin: 1px 0;" />
                                    <div style="text-align: left">
                                        {% with actividadsemanal=semana|args:8|call:'test_plansemanal' %}
                                            {% if actividadsemanal %}
                                                <a style="color: green" href="javascript:;"><i class="fa fa-paw"></i></a>
                                            {% endif %}
                                        {% endwith %}
                                        {% if not silabocab.materia.cerrado %}
                                            {% if not semana.analisiscasos_semanales.estado_id == 2 %}
                                                {% if not semana.analisiscasos_semanales %}
                                                    <a style="color: green" href="/pro_planificacion?action=addtareavirtualvdos&codigosemana={{ semana.id|encrypt }}&codigoactividad={{ 8|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar analisis de casos'><i class="fa fa-plus"></i></a>
                                                    <a tipoactividad="8" nombretipoactividad="ANÁLISIS DE CASOS" codsemanal="{{ semana.id|encrypt }}" numsemana="{{ semana.numsemana }}" href="javascript:;" class="tu duplicar_recurso_individual" data-placement="left" data-original-title="Importar análisis de caso"><i class="fa fa-clone"></i></a>
                                                    <a href="javascript:;" class="informacionactividades tu  btn btn-mini" title="Información Análisis de Casos" opcioninfoact="6"><span class="fa fa-info"></span></a>
                                                {% else %}
                                                    {% if semana.analisiscasos_semanales.estado.editan %}
                                                        <a style="color: green" href="/pro_planificacion?action=edittareavirtualvdos&codigosemana={{ semana.id|encrypt }}&codigotareavirtual={{ semana.analisiscasos_semanales.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Editar analisis de casos'><i class="fa fa-edit"></i></a>

                                                    {% endif %}
{#                                                    {% if semana.analisiscasos_semanales.estado_id == 1 or semana.analisiscasos_semanales.estado_id == 2 or semana.analisiscasos_semanales.estado_id == 3 %}#}
                                                        <a style="color: red" href="javascript:;" class='delactividad tu' idacti="{{ semana.analisiscasos_semanales.id|encrypt }}" numerosemana="{{ semana.numsemana }}" nomacti="{{ semana.analisiscasos_semanales.nombre }}" opciondel="1" title='Eliminar Analisis de casos'><i class="fa fa-trash"></i></a>
{#                                                    {% endif %}#}
                                                {% endif %}
                                            {% endif %}
                                        {% endif %}
                                    </div>
                                    {% if semana.analisiscasos_semanales %}
                                        {% if semana.analisiscasos_semanales.estado.migramoodle %}
                                            <input type="checkbox" class="recorreitemstarea" iditem="{{ semana.analisiscasos_semanales.id }}">
                                        {% endif %}
                                        <div class="listadoforos_{{ semana.unidad_planclase.0 }}"></div>
                                        <div class="accordion" id="accordion{{ semana.id|encrypt }}">
                                            <div class="accordion-group">
                                                <div class="accordion-heading">
                                                    <a data-toggle="collapse" data-parent="#accordion{{ semana.id|encrypt }}" href="#collapseAnalisis{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Analisis casos</a>
                                                </div>
                                                <div id="collapseAnalisis{{ semana.id|encrypt }}" class="accordion-body collapse in">
                                                    <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                                        <tr>
                                                            <td colspan="8">
                                                                <a style="color: #{{ semana.analisiscasos_semanales.estado.colorestado }}; font-size: 18px" href="#" class='tu' data-placement="right" href="javascript:;"  title='{{ semana.analisiscasos_semanales.estado.nombre }}'><i class="fa fa-circle"></i></a>
                                                                <span class="label label-default">
                                                        {{ semana.analisiscasos_semanales.detallemodelo.nombre }}
                                                        </span><br>
                                                                {{ semana.analisiscasos_semanales.nombre }}
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="4">
                                                                {% if semana.analisiscasos_semanales.archivorubrica %}
                                                                    <a href='{{ semana.analisiscasos_semanales.archivorubrica.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Rúbrica</a>
                                                                {% endif %}
                                                            </td>
                                                            <td colspan="4">
                                                                {% if semana.analisiscasos_semanales.archivotareasilabo %}
                                                                    <a href='{{ semana.analisiscasos_semanales.archivotareasilabo.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Tarea</a>
                                                                {% endif %}
                                                            </td>
                                                        </tr>
                                                    </table>
                                                    <br>
                                                    <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletarea" codtipo="1" nomtipo="analisis de caso" idesta="{{ semana.analisiscasos_semanales.estado_id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.analisiscasos_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                                    <a href="/pro_planificacion?action=reporte_tarea&id={{ semana.analisiscasos_semanales.id|encrypt }}" class="btn btn-warning fa fa-download" target="_blank"> </a>
                                                    {% if semana.analisiscasos_semanales.estado.migramoodle %}
                                                        {% if silabocab.materia.idcursomoodle > 0 %}
                                                            <a href="javascript:;" data-placement="right" nhref="/pro_planificacion?action=crearmoodle&idt={{ semana.analisiscasos_semanales.id|encrypt }}&ids={{ silabocab.id|encrypt }}" title="Crear tarea en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear Moodle</a>
                                                        {% endif %}
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                    {% endif %}
                                    <hr color="black" style="border-top: 1px solid #1C3247 ; margin: 1px 0;" />
                                    <div style="text-align: left">
                                        {% with actividadsemanal=semana|args:7|call:'test_plansemanal' %}
                                            {% if actividadsemanal %}
                                                <a style="color: green" href="javascript:;"><i class="fa fa-paw"></i></a>
                                            {% endif %}
                                        {% endwith %}
                                        {% if not silabocab.materia.cerrado %}
                                            {% if not semana.trabajoinvestigacion_semanales.estado_id == 2 %}
                                                {% if not semana.trabajoinvestigacion_semanales %}
                                                    <a style="color: green" href="/pro_planificacion?action=addtareavirtualvdos&codigosemana={{ semana.id|encrypt }}&codigoactividad={{ 7|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar trabajo de investigación'><i class="fa fa-plus"></i></a>
                                                    <a tipoactividad="7" nombretipoactividad="TRABAJO DE INVESTIGACIÓN" codsemanal="{{ semana.id|encrypt }}" numsemana="{{ semana.numsemana }}" href="javascript:;" class="tu duplicar_recurso_individual" data-placement="left" data-original-title="Importar trabajo de investigación"><i class="fa fa-clone"></i></a>
                                                    <a href="javascript:;" class="informacionactividades tu  btn btn-mini" title="Información Trabajo de Investigación" opcioninfoact="7"><span class="fa fa-info"></span></a>
                                                {% else %}
                                                    {% if semana.trabajoinvestigacion_semanales.estado.editan %}
                                                        <a style="color: green" href="/pro_planificacion?action=edittareavirtualvdos&codigosemana={{ semana.id|encrypt }}&codigotareavirtual={{ semana.trabajoinvestigacion_semanales.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Editar trabajo de investigación'><i class="fa fa-edit"></i></a>
                                                    {% endif %}
{#                                                    {% if semana.trabajoinvestigacion_semanales.estado_id == 1 or semana.trabajoinvestigacion_semanales.estado_id == 2 or semana.trabajoinvestigacion_semanales.estado_id == 3 %}#}
                                                        <a style="color: red" href="javascript:;" class='delactividad tu' idacti="{{ semana.trabajoinvestigacion_semanales.id|encrypt }}" numerosemana="{{ semana.numsemana }}" nomacti="{{ semana.trabajoinvestigacion_semanales.nombre }}" opciondel="1" title='Eliminar Trabajo de investigación'><i class="fa fa-trash"></i></a>
{#                                                    {% endif %}#}
                                                {% endif %}
                                            {% endif %}
                                        {% endif %}
                                    </div>
                                    {% if semana.trabajoinvestigacion_semanales %}
                                        {% if semana.trabajoinvestigacion_semanales.estado.migramoodle %}
                                            <input type="checkbox" class="recorreitemstarea" iditem="{{ semana.trabajoinvestigacion_semanales.id }}">
                                        {% endif %}
                                        <div class="listadoforos_{{ semana.unidad_planclase.0 }}"></div>
                                        <div class="accordion" id="accordion{{ semana.id|encrypt }}">
                                            <div class="accordion-group">
                                                <div class="accordion-heading">
                                                    <a data-toggle="collapse" data-parent="#accordion{{ semana.id|encrypt }}" href="#collapseInvestigacion{{ semana.id|encrypt }}"><span class="fa fa-list"></span> T. Investigación</a>
                                                </div>
                                                <div id="collapseInvestigacion{{ semana.id|encrypt }}" class="accordion-body collapse in">
                                                    <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                                        <tr>
                                                            <td colspan="8">
                                                                <a style="color: #{{ semana.trabajoinvestigacion_semanales.estado.colorestado }}; font-size: 18px" href="#" class='tu' data-placement="right" href="javascript:;"  title='{{ semana.trabajoinvestigacion_semanales.estado.nombre }}'><i class="fa fa-circle"></i></a>
                                                                <span class="label label-default">
                                                        {{ semana.trabajoinvestigacion_semanales.detallemodelo.nombre }}
                                                        </span><br>
                                                                {{ semana.trabajoinvestigacion_semanales.nombre }}
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="4">
                                                                {% if semana.trabajoinvestigacion_semanales.archivorubrica %}
                                                                    <a href='{{ semana.trabajoinvestigacion_semanales.archivorubrica.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Rúbrica</a>
                                                                {% endif %}
                                                            </td>
                                                            <td colspan="4">
                                                                {% if semana.trabajoinvestigacion_semanales.archivotareasilabo %}
                                                                    <a href='{{ semana.trabajoinvestigacion_semanales.archivotareasilabo.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Trabajo investigación</a>
                                                                {% endif %}
                                                            </td>
                                                        </tr>
                                                    </table>
                                                    <br>
                                                    <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletarea" codtipo="1" nomtipo="trabajo de investigación" idesta="{{ semana.trabajoinvestigacion_semanales.estado_id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.trabajoinvestigacion_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                                    <a href="javascript:;" data-placement="top" class="btn btn-default btn-mini tu detalletarea" codtipo="1" nomtipo="trabajo de investigación" idesta="{{ semana.trabajoinvestigacion_semanales.estado_id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.trabajoinvestigacion_semanales.id }}" title="Vincular temas"><span class="fa fa-list"></span> Temas</a>
                                                    <a href="/pro_planificacion?action=reporte_tarea&id={{ semana.trabajoinvestigacion_semanales.id|encrypt }}" class="btn btn-warning fa fa-download" target="_blank"> </a>
                                                    {% if semana.trabajoinvestigacion_semanales.estado.migramoodle %}
                                                        {% if silabocab.materia.idcursomoodle > 0 %}
                                                            <a href="javascript:;" data-placement="right" nhref="/pro_planificacion?action=crearmoodle&idt={{ semana.trabajoinvestigacion_semanales.id|encrypt }}&ids={{ silabocab.id|encrypt }}" title="Crear tarea en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear Moodle</a>
                                                        {% endif %}
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                    {% endif %}
                                </td>
                                <td style="text-align: center"><div class="horasauto{{ semana.unidad_planclase.0 }}">0</div></td>
                                <td style="text-align: center"><div class="porceauto{{ semana.unidad_planclase.0 }}">0%</div></td>
                                <td data-title='APE' valign="top">
                                    {% with actividadsemanal=semana|args:4|call:'test_plansemanal' %}
                                        {% if actividadsemanal %}
                                            <a style="color: green" href="javascript:;"><i class="fa fa-paw"></i></a>
                                        {% endif %}
                                    {% endwith %}
                                    {% if not silabocab.materia.cerrado %}
                                        <a style="margin-top: 10px" class="btn btn-mini btn-{% if semana.tieneguiapractica_semanales %}info{% else %}warning{% endif %} bloqueo_pantalla tu"  href="/pro_planificacion?action=practicasrecursos&ids={{ semana.id|encrypt }}" title="Prácticas"><span class="fa fa-list-alt"></span></a><br>
                                        {% if not semana.tieneguiapractica_semanales %}
                                            <a tipoactividad="4" numsemana="{{ semana.numsemana }}" nombretipoactividad="TRABAJO PRÁCTICO EXPERIMENTAL"  codsemanal="{{ semana.id|encrypt }}" href="javascript:;" class="btn btn-mini btn-form btn-info tu duplicar_recurso_individual" data-placement="left" data-original-title="Importar trabajo práctico"><i class="fa fa-clone"></i></a>
                                            <a href="javascript:;" class="informacionactividades tu  btn btn-mini" title="Información Trabajo Práctico" opcioninfoact="8"><span class="fa fa-info"></span></a>

                                        {% endif %}
                                        <div style="text-align: left">
                                            {% if not semana.tareaspracticas_semanales.estado_id == 2 %}
                                                {% if not semana.tareaspracticas_semanales %}
                                                    {% if semana.tieneguiapractica_semanales %}
                                                        <a style="color: green" href="/pro_planificacion?action=addtareapracticavirtualvdos&codigosemana={{ semana.id|encrypt }}&codigoactividad={{ 4|encrypt }}" href="javascript:;" class='bloqueo_pantalla' ><i class="fa fa-plus"></i></a>
                                                    {% endif %}
                                                {% else %}
                                                    {% if semana.tareaspracticas_semanales.estado.editan %}
                                                        <a style="color: green" href="/pro_planificacion?action=edittareapracticavirtualvdos&codigosemana={{ semana.id|encrypt }}&codigotareavirtual={{ semana.tareaspracticas_semanales.id|encrypt }}" href="javascript:;" class='bloqueo_pantalla'><i class="fa fa-edit"></i></a>
                                                    {% endif %}
{#                                                    {% if semana.tareaspracticas_semanales.estado_id == 1 or semana.tareaspracticas_semanales.estado_id == 2 or semana.tareaspracticas_semanales.estado_id == 3 %}#}
                                                        <a style="color: red" href="javascript:;" class='delactividad' idacti="{{ semana.tareaspracticas_semanales.id|encrypt }}" numerosemana="{{ semana.numsemana }}" nomacti="{{ semana.tareaspracticas_semanales.nombre }}" opciondel="10"><i class="fa fa-trash"></i></a>
{#                                                    {% endif %}#}
                                                {% endif %}
                                            {% endif %}
                                        </div>
                                    {% endif %}
                                    {% if semana.tareaspracticas_semanales %}
                                        {% if semana.tareaspracticas_semanales.estado.migramoodle %}
                                            <input type="checkbox" class="recorreitemstareapractica" iditem="{{ semana.tareaspracticas_semanales.id }}">
                                        {% endif %}
                                        <div class="listadotareaspra_{{ semana.unidad_planclase.0 }}"></div>
                                        <div class="accordion" id="accordion{{ semana.id|encrypt }}">
                                            <div class="accordion-group">
                                                <div class="accordion-heading">
                                                    <a data-toggle="collapse" data-parent="#accordion{{ semana.id|encrypt }}" href="#collapseOnepra{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Trabajo práctico</a>
                                                </div>
                                                <div id="collapseOnepra{{ semana.id|encrypt }}" class="accordion-body collapse in">
                                                    <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                                        <tr>
                                                            <td colspan="8">
                                                                <a style="color: #{{ semana.tareaspracticas_semanales.estado.colorestado }}; font-size: 18px" href="#" class='tu' data-placement="right" href="javascript:;"  title='{{ semana.tareaspracticas_semanales.estado.nombre }}'><i class="fa fa-circle"></i></a>
                                                                <span class="label label-default">
                                                        {{ semana.tareaspracticas_semanales.detallemodelo.nombre }}
                                                        </span><br>
                                                                {{ semana.tareaspracticas_semanales.nombre }}
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="4">
                                                                {% if semana.tareaspracticas_semanales.archivotareapracticasilabo %}
                                                                    <a href='{{ semana.tareaspracticas_semanales.archivotareapracticasilabo.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Archivo</a>
                                                                {% endif %}
                                                            </td>
                                                        </tr>
                                                    </table>
                                                    <br>
                                                    <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletarea" codtipo="10" nomtipo="guía práctica" idesta="{{ semana.tareaspracticas_semanales.estado_id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.tareaspracticas_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                                    <a href="/pro_planificacion?action=reporte_trabajo_practico&id={{ semana.tareaspracticas_semanales.id|encrypt }}" class="btn btn-warning fa fa-download" target="_blank"> </a>
                                                    {% if semana.tareaspracticas_semanales.estado.migramoodle %}
                                                        {% if silabocab.materia.idcursomoodle > 0 %}
                                                            <a href="javascript:;" data-placement="right" nhref="/pro_planificacion?action=creartareapracticamoodle&idt={{ semana.tareaspracticas_semanales.id|encrypt }}&ids={{ silabocab.id|encrypt }}" title="Crear tarea en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear Moodle</a>
                                                        {% endif %}
                                                        {#                                                    {% else %}#}
                                                        {#                                                        <span class="label label-warning label-mini">La gía de práctica debe ser generada</span>#}
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                    {% endif %}
                                </td>
                                <td style="text-align: center"><div class="horasexp{{ semana.unidad_planclase.0 }}">0</div></td>
                                <td style="text-align: center"><div class="porceexp{{ semana.unidad_planclase.0 }}">0%</div></td>
                            </tr>
                            {% if semana.numsemana|sumauno in semanaexamenes %}
                                {% with tiene_semana=silabocab|args:semana.numsemana|call:'tiene_semana_num_semana' %}
                                    {% if not tiene_semana %}
                                        <tr>
                                            <td bgcolor="#cccccc" style="text-align: center;font-weight: bold;font-size: 14px">
                                                SEMANA {{ semana.numsemana|sumauno }}
                                            </td>
                                            <td {% if puede_videomagistral  %}colspan="14"{% else %}colspan="13"{% endif %} bgcolor="#cccccc" style="text-align: center;font-weight: bold;font-size: 14px">
                                                SEMANA DE EXAMEN
                                                {% if idcoordinacion != 9 %}
                                                    {% if not silabocab.materia.cerrado %}
                                                        <div style="text-align: left">
                                                            <a style="color: green" href="/pro_planificacion?action=addexamen&silabo={{ semana.silabo.id|encrypt }}&codigoactividad={{ 1|encrypt }}&numerosemana={{ semana.numsemana|sumauno }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar Examen'><i class="fa fa-plus"></i></a>
                                                        </div>
                                                    {% endif %}
                                                {% endif %}
                                            </td>
                                        </tr>
                                    {% endif %}
                                {% endwith %}
                            {% endif %}
                        {% else %}
                            <tr>
                                <td bgcolor="#cccccc" style="text-align: center;font-weight: bold;font-size: 14px">
                                    SEMANA {{ semana.numsemana }}<br>
                                </td>
                                <td {% if puede_videomagistral  %}colspan="14"{% else %}colspan="13"{% endif %} bgcolor="#cccccc" style="text-align: center;font-weight: bold;font-size: 14px">
                                    SEMANA DE EXAMEN
                                    {% if idcoordinacion != 9 %}
                                        {% if not silabocab.materia.cerrado %}
                                            <div style="text-align: left">
                                                {% if not semana.test_semanales.estado_id == 2 %}
                                                    {% if not semana.test_semanales %}
                                                        <a style="color: green" href="/pro_planificacion?action=addexamen&silabo={{ semana.silabo.id|encrypt }}&codigoactividad={{ 1|encrypt }}&numerosemana={{ semana.numsemana }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar Examen'><i class="fa fa-plus"></i></a>
                                                    {% else %}
                                                        {% if semana.test_semanales.estado.editan %}
                                                            <a style="color: green" href="/pro_planificacion?action=editexamen&codigosemana={{ semana.id|encrypt }}&codigotestvirtual={{ semana.test_semanales.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Editar Examen'><i class="fa fa-edit"></i></a>
                                                        {% endif %}
{#                                                        {% if semana.test_semanales.estado_id == 1 or semana.test_semanales.estado_id == 2 or semana.test_semanales.estado_id == 3 %}#}
                                                            <a style="color: red" href="javascript:;" class='delactividad tu' idacti="{{ semana.test_semanales.id|encrypt }}" numerosemana="{{ semana.numsemana }}" nomacti="{{ semana.test_semanales.nombretest }}" opciondel="3" title='Eliminar Examen'><i class="fa fa-trash"></i></a>
{#                                                        {% endif %}#}
                                                    {% endif %}
                                                {% endif %}
                                            </div>
                                        {% endif %}
                                        {% if semana.test_semanales %}
                                            <div class="listadotests_{{ semana.unidad_planclase.0 }}"></div>
                                            <div class="accordion" id="accordionexamen{{ semana.id|encrypt }}">
                                                <div class="accordion-group">
                                                    <div class="accordion-heading">
                                                        <a data-toggle="collapse" data-parent="#accordionexamen{{ semana.id|encrypt }}" href="#collapseexamen{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Examen</a>
                                                    </div>
                                                    <div id="collapseexamen{{ semana.id|encrypt }}" class="accordion-body collapse in">
                                                        <a style="color: #{{ semana.test_semanales.estado.colorestado }}; font-size: 18px" href="#"><i class="fa fa-circle"></i></a>
{#                                                        ID:{{ semana.test_semanales.id }}#}
                                                        <span class="label label-default">
                                                                {{ semana.test_semanales.detallemodelo.nombre }}
                                                        </span><br>
                                                        {{ semana.test_semanales.nombretest }}
                                                        <br>
                                                        {% if semana.test_semanales.password %}
                                                            <b>Clave:</b><span class="label label-info">{{ semana.test_semanales.password }}</span><br>
                                                        {% endif %}
                                                        <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletarea" codtipo="3" nomtipo="Examen" idesta="{{ semana.test_semanales.estado_id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.test_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                                        {% if semana.test_semanales.estado_id == 2 %}
                                                            {% if silabocab.materia.idcursomoodle > 0 %}
                                                                <a href="javascript:;" data-placement="right" nhref="/pro_planificacion?action=crearexamenmoodle&idt={{ semana.test_semanales.id|encrypt }}&ids={{ silabocab.id|encrypt }}" title="Crear examen en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear Moodle</a>
                                                            {% endif %}
                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </div>
                                        {% endif %}
                                    {% endif %}
                                </td>
                            </tr>
                        {% endif %}

                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="infoaccionact" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Información</h3>
        </div>
        <div  class="modal-body panelbody">
            <p style="font-size: 16px" class="panel-body" id="descripcioninfoact"></p>
            {#            <input id="nomtituloinfo" name="nomtituloinfo" type="hidden">#}
            {#            <input id="id_codigoopcion" name="id_codigoopcion" type="hidden">#}
            {#            <div id="id_nomactividaddel"></div>#}
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    {#                    <td><a href="javascript:;" class="btn btn-danger eliminaractividad">Eliminar</a></td>#}
                    <td><a href="javascript:;" class="btn btn-default descripcioninfoactcerrar">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>


    <div class="modal fade static" id="itemspanelo" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Editar Objetivo de Apendizaje</h3>
        </div>
        <div class="modal-body" style="display: inline-block;">
            <div class="row-fluid">
                <form id="formobj" name="formobj" class="form-vertical form-modal" style="width: 580px;">
                    <input type='hidden'  name='action' value='editarobjetivoaprendizaje'/>
                    <input type='hidden'  name='idso'  id="idso"/>
                    <label>Objetivo Aprendizaje</label>
                    <textarea maxlength="1000" rows="5" id="id_objetivo" style="text-align: justify"></textarea>
                </form>
            </div>
        </div>
        <div class="modal-footer">
            <a href="javascript:;" id="adicionarobj" class="btn btn-adicionar btn-success"> Guardar</a>
            <a href="javascript:;" class="btn btn-cerrar btn-info"> Cerrar</a>
        </div>
    </div>
    <div class="modal fade static" id="itemspanelenf" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Editar Enfoque Metodológico</h3>
        </div>
        <div class="modal-body" style="display: inline-block;">
            <div class="row-fluid">
                <form id="formenf" name="formenf" class="form-vertical form-modal" style="width: 580px;">
                    <input type='hidden'  name='action' value='editenfoquemetodologico'/>
                    <input type='hidden'  name='idse'  id="idse"/>
                    <label>Objetivo Aprendizaje</label>
                    <textarea maxlength="1000" rows="5" id="id_enfoque" style="text-align: justify"></textarea>
                </form>
            </div>
        </div>
        <div class="modal-footer">
            <a href="javascript:;" id="adicionarenf" class="btn btn-adicionar btn-success"> Guardar</a>
            <a href="javascript:;" class="btn btn-cerrar btn-info"> Cerrar</a>
        </div>
    </div>
    <div class="modal fade static" id="itemspanelrec" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Editar Recursos Didácticos</h3>
        </div>
        <div class="modal-body" style="display: inline-block;">
            <div class="row-fluid">
                <form id="formrec" name="formrec" class="form-vertical form-modal" style="width: 580px;">
                    <input type='hidden'  name='action' value='editrecursodidactico'/>
                    <input type='hidden'  name='idsr'  id="idsr"/>
                    <label>Recursos Didácticos</label>
                    <textarea maxlength="1000" rows="5" id="id_recurso" style="text-align: justify"></textarea>
                </form>
            </div>
        </div>
        <div class="modal-footer">
            <a href="javascript:;" id="adicionarrec" class="btn btn-adicionar btn-success"> Guardar</a>
            <a href="javascript:;" class="btn btn-cerrar btn-info"> Cerrar</a>
        </div>
    </div>
    <div class="modal fade static" id="itemspaneleva" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Editar Evaluación</h3>
        </div>
        <div class="modal-body" style="display: inline-block;">
            <div class="row-fluid">
                <form id="formeva" name="formeva" class="form-vertical form-modal" style="width: 580px;">
                    <input type='hidden'  name='action' value='editevaluacion'/>
                    <input type='hidden'  name='idsv'  id="idsv"/>
                    <label>Evaluación</label>
                    <textarea maxlength="1000" rows="5" id="id_evaluacion" style="text-align: justify"></textarea>
                </form>
            </div>
        </div>
        <div class="modal-footer">
            <a href="javascript:;" id="adicionareva" class="btn btn-adicionar btn-success"> Guardar</a>
            <a href="javascript:;" class="btn btn-cerrar btn-info"> Cerrar</a>
        </div>
    </div>
    <div class="modal fade static itemspanelduplicar_silabo" id="itemspanelduplicar_silabo" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Sílabos que puede importar</h3>
        </div>
        <div class="modal-body panelbody">

        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>
    <div class="modal fade static" id="itemspaneldetalle_temas_subtemas" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Temas y subtemas por reguistrar</h3>
        </div>
        <div class="modal-body panelbody">

        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>
    <div class="modal fade static" id="itemspanelplanificacionsalida" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Adicionar gira de clase</h3>
        </div>
        <div class="modal-body" style="display: inline-block;">
            <div class="row-fluid">
                <form id="formsalida" name="formsalida" class="form-vertical form-modal" style="width: 580px;">
                    <input type='hidden'  name='action' value='addplanificacionsalida'/>
                    <input type='hidden'  name='ids'  id="ids"/>
                    <label>Descripción </label>
                    <textarea rows="4" id="contenido" style="text-align: justify"></textarea>
                </form>
            </div>
        </div>
        <div class="modal-footer">
            <a href="javascript:;" id="adicionarplanificacionsalida" class="btn btn-adicionar btn-success"> Guardar</a>
            <a href="javascript:;" class="btn btn-cerrar btn-info"> Cerrar</a>
        </div>
    </div>
    <div class="modal fade static" id="itemspaneleditplanificacionsalida" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Editar gira de clase</h3>
        </div>
        <div class="modal-body" style="display: inline-block;">
            <div class="row-fluid">
                <form id="formsalida" name="formsalida" class="form-vertical form-modal" style="width: 580px;">
                    <input type='hidden'  name='ids'  id="ids"/>
                    <label>Descripción </label>
                    <textarea rows="4" id="id_contenido"style="text-align: justify"></textarea>
                </form>
            </div>
        </div>
        <div class="modal-footer">
            <a href="javascript:;" id="editplanificacionsalida" class="btn btn-adicionar btn-success"> Guardar</a>
            <a href="javascript:;" class="btn btn-cerrar btn-info"> Cerrar</a>
        </div>
    </div>
    <div class="modal fade static" id="itemspaneladicionarsubtemas" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Adicionar Sub Temas</h3>
        </div>
        <div class="modal-body" style="display: inline-block;">
            <div class="row-fluid">
                <form id="formsalida" name="formsubtemas" class="form-vertical form-modal" style="width: 580px;">
                    <span>Tema: </span>
                    <select id="id_tema" class="selector" name="tema" style="width: 92%">
                    </select><br><br>
                    <input type='hidden' name='ids' id="ids"/>
                    <table class="table table-bordered" border="0" width="100%" style="background-color: transparent">
                        <tr>
                            <td border="0" style="background-color: transparent">
                                <label><b>Sub Tema</b></label>
                            </td>
                        </tr>
                        <tr>
                            <td border="0" style="background-color: transparent">
                                <textarea rows="2" id="id_subtema"style="text-align: justify; width: 100%;" maxlength="150"></textarea><br>
                                <span class="obligatorio" style="color: red"></span>
                            </td>
                            <td style="text-align: right; background-color: transparent" width="8%" border="0">
                                <a href="javascript:;" class="btn btn-success addsubtema"><i class="fa fa-plus"></i></a>
                            </td>
                        </tr>
                    </table>
                </form>
                <div style="margin: 0px;overflow-y:auto;height:150px;">
                    <table class="table table-bordered table-condensed">
                        <thead>
                        <tr>
                            <th style="text-align: left">Tema</th>
                            <th style="text-align: left">Subtema</th>
                            <th style="text-align: left">Acciones</th>
                        </tr>
                        </thead>
                        <tbody id="contenidosubtemas">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <a href="javascript:;" id="adicionarsubtema" class="btn btn-adicionarsubtema btn-success"> Guardar</a>
            <a href="javascript:;" class="btn btn-cerrar btn-info"> Cerrar</a>
        </div>
    </div>
    <div class="modal fade static itemspanelimportar_recurso_periodo" id="itemspanelimportar_recurso_periodo" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle" id="idtitulo">Importar de otro curso</h3>
        </div>
        <div class="modal-body panelbody">a</div>
        <div class="modal-footer" style="margin-top: -15px">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>

    <div class="modal fade static itemspanelmigrar_compendio" id="itemspanelmigrar_compendio" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Compendios a migrar a moodle</h3>
        </div>
        <div class="modal-body panelbody_migrarcompendio"></div>
        <div class="modal-footer" style="margin-top: -15px">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-cerrarcompendios btn-info">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>

    <div class="modal fade static itemspanellink" id="itemspanellink" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Editar recursos didácticos (link de youtube, etc)</h3>
        </div>
        <div class="modal-body panelbodylink">

        </div>
        <div class="modal-footer">
            <a href="javascript:;" id="adicionarlink" class="btn btn-success adicionarlink"> Guardar</a>
            <a href="javascript:;" class="btn btn-cerrar btn-info"> Cerrar</a>
        </div>
    </div>
    <div class="modal fade static" id="itemsdelactividad" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle" id="nomtitulo"></h3>
        </div>
        <div class="modal-body panelbody">
            <input id="id_codigoactividad" name="id_codigoactividad" type="hidden">
            <input id="id_codigoopcion" name="id_codigoopcion" type="hidden">
            <div id="id_nomactividaddel"></div>
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-danger eliminaractividad">Eliminar</a></td>
                    <td><a href="javascript:;" class="btn btn-default delacticerrar">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>
    <div class="modal fade static" id="itemsdelactividadadmision" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle" id="nomtituloadmision"></h3>
        </div>
        <div class="modal-body panelbody">
            <input id="id_codigoactividadadmision" name="id_codigoactividadadmision" type="hidden">
            <input id="id_codigoopcionadmision" name="id_codigoopcionadmision" type="hidden">
            <div id="id_nomactividadadmision"></div>
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-danger eliminaractividadadmision">Eliminar</a></td>
                    <td><a href="javascript:;" class="btn btn-default delacticerraradmision">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>

    <div class="modal fade static" id="modalobservacion" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle" >Observaciones</h3>
        </div>
        <div class="modal-body panelbody">
            <label> Técnica</label>
            <textarea id="observaciontecnica" rows="3" cols="40" name="observación técnica" maxlength="1000" style="width: 100%" disabled></textarea>
            <label> Académica</label>
            <textarea id="observacionacademida" rows="3" cols="40" name="observación cadémica" maxlength="1000" style="width: 100%" disabled></textarea>
            <label> Cumplimiento</label>
            <input type='text' name='action' id="estadocumplimiento" value='' disabled/>
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-default cerrar_modalobservacion">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>
    <div class="modal fade static" id="auditoriacriterio" style="display: none;">
        <div class="modal-header">
            <h4 id="paneltitle">Detalle de recrusos</h4>
        </div>
        <div class="modal-body" id="selectauditoria-body">
        </div>
        <div class="modal-footer">
            <div style="float: right">
                <a class="btn btn-info auditoriacriterio_cerrar">Cerrar</a>
            </div>
        </div>
    </div>
    <div class="modal fade static" id="divmostrartarea" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle" id="nomtitulodetalle"></h3>
        </div>
        <input id="id_codigotarea" name="id_codigotarea" type="hidden">
        <input id="id_codtipo" name="id_codtipo" type="hidden">
        {#            <input id="id_codigoopcion" name="id_codigoopcion" type="hidden">#}
        <div id="id_nomactividad"></div>
        <div class="modal-body panelbodytarea">

        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-default cerrartarea">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>
    <div class="modal fade static" id="divnotificarmasivo" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Notificación</h3>
        </div>
        <div class="modal-body panelbodyaprobar">
            Esta seguro  que desea notificar para que los recursos sean revisados?
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-success savenotificar">Notificar</a></td>
                    <td><a href="javascript:;" class="btn btn-default cancelaaprobacion">Cancelar</a></td>
                </tr>
            </table>
        </div>
    </div>



    <div class="modal fade static" id="infoaccion" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Información</h3>
        </div>
        <div  class="modal-body panelbody">
            <p style="font-size: 16px" class="panel-body" id="descripcioninfo"></p>
            {#            <input id="nomtituloinfo" name="nomtituloinfo" type="hidden">#}
            {#            <input id="id_codigoopcion" name="id_codigoopcion" type="hidden">#}
            {#            <div id="id_nomactividaddel"></div>#}
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    {#                    <td><a href="javascript:;" class="btn btn-danger eliminaractividad">Eliminar</a></td>#}
                    <td><a href="javascript:;" class="btn btn-default descripcioninfocerrar">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>





    <div class="modal fade static" id="divactualizarsmoodle" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Actualización</h3>
        </div>
        <div class="modal-body panelbodyaprobar">
            Esta seguro  que desea actualizar el sílabo a moodle?
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-success saveactualizar">Actualizar</a></td>
                    <td><a href="javascript:;" class="btn btn-default cancelaactualizacion">Cancelar</a></td>
                </tr>
            </table>
        </div>
    </div>

    <div class="modal fade static itemsrecurso_individual" id="itemsrecurso_individual" style="display: none;">
        <div class="modal-header">
            <h3 id="id_nombreactividad"></h3>
            {#            <h3 class="paneltitle">Actividad individual que puede importar.</h3>#}
        </div>
        <div class="modal-body panelbodyindividual">
            <div class="alert alert-info" style="text-align: justify">
                <strong>NOTA:</strong> Se podrá importar las actividades que estén en estado "APROBADO" ó "EN MOODLE", también se le recuerda que se mostrará en estado INGRESADO para que pueda realizar la respectiva actualización. (Recuerde que debe actualizar las fecha de inicio y fin de la actividad).
            </div>
            <select name="periodosilabo" id="periodosilabo" style="width: 100%;">
            </select>
            <select name="listadosilabos" id="listadosilabos" style="width: 100%;">
            </select>

            <table style="font-size: 8px" class='table table-bordered table-striped' >
                <thead>
                <tr>
                    <th width='5%'>SEMANA</th>
                    <th width='60%'>ACTIVIDAD</th>
                    <th width='35%'>---</th>
                </tr>
                </thead>
                <tbody id="itemsbodyactividades">
                </tbody>
            </table>
            <input type="hidden" id="id_tipoactividad" name="id_tipoactividad" value="0">
            <input type="hidden" id="id_codsemanal" name="id_codsemanal" value="0">
        </div>
        <div class="modal-footer" style="margin-top: -15px">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>
    <div class="modal fade static" id="divmigrarmasivo" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Migrar Masivo</h3>
        </div>
        <div class="modal-body panelbodyaprobar">
            Está seguro  que desea migrar masivamente?
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-success savemigrar">Migrar</a></td>
                    <td><a href="javascript:;" class="btn btn-default cancelarmigrar">Cancelar</a></td>
                </tr>
            </table>
        </div>
    </div>

    <div class="modal fade static" id="modalErrores" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Errores <span></span></h3>
        </div>
        <div class="modal-body">
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-info action-aceptar">Aceptar</a></td>
                    <td><a href="javascript:;" class="btn btn-default action-cancelar">Cancelar</a></td>
                </tr>
            </table>
        </div>
    </div>
    <script type="text/javascript">

        $(function() {
            {% for unidadeslis in listadounidades %}
                {#alert(".listadotareas_"+ {{ unidadeslis.0 }})#}
                if ($(".listadotareas_" + {{ unidadeslis.0 }}).length == 0) {
                    d=1
                } else {
                    $(".horasauto{{ unidadeslis.0 }}").each(function () {
                        $(this).html({{ silabocab.materia.asignaturamalla.horasautonomassemanales }});
                    });
                    $(".porceauto{{ unidadeslis.0 }}").each(function () {
                        $(this).html('100%');
                    });
                }
                if ($(".listadoforos_" + {{ unidadeslis.0 }}).length == 0) {
                    d=1
                } else {
                    $(".horasauto{{ unidadeslis.0 }}").each(function () {
                        $(this).html({{ silabocab.materia.asignaturamalla.horasautonomassemanales }});
                    });
                    $(".porceauto{{ unidadeslis.0 }}").each(function () {
                        $(this).html('100%');
                    });
                }


                if ($(".listadotests_" + {{ unidadeslis.0 }}).length == 0) {
                    d=1
                } else {

                    $(".horasdoc{{ unidadeslis.0 }}").each(function () {
                        $(this).html({{ silabocab.materia.asignaturamalla.horasacdsemanal }});
                    });
                    $(".porcedoc{{ unidadeslis.0 }}").each(function () {
                        $(this).html('100%');
                    });
                    {#alert('si tiene')#}
                }

                if ($(".listadotareaspra_" + {{ unidadeslis.0 }}).length == 0) {
                    d=1
                } else {
                    $(".horasexp{{ unidadeslis.0 }}").each(function () {
                        $(this).html({{ silabocab.materia.asignaturamalla.horasapesemanal }});
                    });
                    $(".porceexp{{ unidadeslis.0 }}").each(function () {
                        $(this).html('100%');
                    });
                    {#alert('si tiene')#}
                }
                {% if silabocab.materia.asignaturamalla.horasapesemanal == 0 %}
                    $(".horasexp{{ unidadeslis.0 }}").each(function () {
                        $(this).html('N/A');
                    });
                    $(".porceexp{{ unidadeslis.0 }}").each(function () {
                        $(this).html('N/A');
                    });
                {% endif %}
            {% endfor %}
        })
    </script>
    <div class="modal fade static" id="itemspanelmatricula" style="display: none;">
        <div class="modal-header">
            <h4><i class="fa fa-list"></i> <b class="paneltitlematricula">FORMULARIO MODAL</b></h4>
        </div>
        <div class="modal-body">
            <form class="form-horizontal form-modal" autocomplete="off" method="post"
                  enctype="multipart/form-data" action="{{ request.path }}">
                {% csrf_token %}
                <div class="row-fluid panelbodymatricula">
                </div>
            </form>
        </div>
    </div>
{% endblock %}
