{% extends "basebs.html" %}
{% load sga_extras %}
{% block heading %}
    <script type="text/javascript" src='/static/js/select2.js?v=1.0.0' ></script>
    <link type='text/css' rel='stylesheet' href="/static/css/select2.css?v=1.0.0"/>
    <link href="/static/css/table-responsive.css?1.0.0" type="text/css" rel="stylesheet" />
    <script type="text/javascript">
        $(function() {

            $("select").select2({minimumResultsForSearch: 5 });


            $(".editpreguntaencuesta").click(function() {
                var idp = $(this).attr('idp');
                $.ajax({
                    type: "GET",
                    url: "{{ request.path }}",
                    data: {'action': 'aprobarrechazarsolicitud', 'idencuestapreguntas': idp },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error al obtener los datos.");
                    },
                    success: function (data) {
                        if (data.result == "ok") {
                            $(".panelbody").html(data.data);
                            $(".paneltitle").html(data.title);
                            $("#itemspaneledit").modal({backdrop:'static', width: '450px'}).modal('show');
                            $("#itemspaneledit .incompletoaddpreguntasedit").hide();

                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    }
                });
            });
            {#            $("#edit_adicionar").click(function(){#}
            {#                var codigoitem = $("#codigoitem").val();#}
            {#                var codigoobservacion = $("#nomobserbacion").val();#}
            {#                var estadoid = $("#estadoid").val();#}
            {#                $("#itemspaneledit").modal({backdrop:'static', width: '900px'}).modal('hide');#}
            {#                bloqueointerface();#}
            {#                $.ajax({#}
            {#                    type: "POST",#}
            {#                    url: "{{ request.path }}",#}
            {#                    data: {'action': 'aprobarrechazarsolicitud', 'codigoitem': codigoitem, 'codigoobservacion': codigoobservacion, 'estadoid': estadoid },#}
            {#                    error: function () {#}
            {#                        $.unblockUI();#}
            {#                        smoke.alert("Error al obtener los datos.");#}
            {#                    },#}
            {#                    success: function (data) {#}
            {#                        if (data.result == "ok") {#}
            {#                            window.location.href = '{{ request.path }}';#}
            {#                        } else {#}
            {#                            $.unblockUI();#}
            {#                            smoke.alert(data.mensaje);#}
            {#                        }#}
            {#                    }#}
            {#                });#}
            {#            });#}
            $("#cerrarpanelponerfechalimite").click(function(){
                $('#itemspaneledit').modal('hide');
            });

            $(".aprobacionfinal").click(function() {
                var idpins = $(this).attr('idpins');
                $.ajax({
                    type: "POST",
                    url: "{{ request.path }}",
                    data: {'action': 'aprobarpracticas', 'idencuestapreguntas': idpins },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error al obtener los datos.");
                    },
                    success: function (data) {
                        if (data.result == "ok") {
                            {#                            alert(data.idpracticas)#}
                            $(".textoleyenda").html(data.nombres);
                            $("#codigoaprobar").val(data.idpracticas);
                            $("#itemspanelaprobar").modal({backdrop:'static', width: '450px'}).modal('show');
                            $("#itemspanelaprobar .incompletoaddpreguntasaprobar").hide();

                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    }
                });
            });
            $("#aprobar_adicionar").click(function(){
                var codigoitem = $("#codigoaprobar").val();
                $("#itemspanelaprobar").modal({backdrop:'static', width: '900px'}).modal('hide');
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "{{ request.path }}",
                    data: {'action': 'culminarpracticas', 'codigoitem': codigoitem },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error al obtener los datos.");
                    },
                    success: function (data) {
                        if (data.result == "ok") {
                            window.location.href = '{{ request.path }}?id='+codigoitem;
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    }
                });
            });

            $("#aprobar_cancel").click(function(){
                $('#itemspanelaprobar').modal('hide');
            });

            $(".cargarobservacion").click(function() {
                var idsolicitud = $(this).attr('idsolicitud');
                var ancho = (parseInt($(this).attr('ancho'))==0)? $(window).width()-100: $(this).attr('ancho');
                var alto = (parseInt($(this).attr('alto'))==0)? '530px': $(this).attr('alto');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "{{ request.path }}",
                    data: {'action': 'ver_observacion', 'idsolicitud': idsolicitud },
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyobs").html(data.data);
                            $("#itemspanelobs").modal({backdrop:'static', width: ancho, height: alto}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#cerrarpanelobs").click(function() {
                $("#itemspanelobs").modal("hide");
                return false;
            });

            busqueda = function(){
                var term = $("#searchinput").val().trim().toUpperCase();
                var tipo = $('#tipo_solicitud').val();
                var idc = $('#carrera_list').val();
                var direccion="";
                if ((term.length>0) && (tipo>0)){
                    direccion = "{{ request.path }}?s="+term+"&tipo="+tipo;
                }
                else{
                    if (term.length>0){
                        direccion = "{{ request.path }}?s="+term;
                    }
                    else{
                        direccion = "{{ request.path }}?tipo="+tipo;
                    }
                }
                if (idc>0 && direccion){
                    direccion += "&idc="+idc
                }
                location.href = direccion;
                return false;
            };

            $("#search").click(function() {
                busqueda();
            });

            $('#searchinput').keyup(function(e) {
                if(e.keyCode == 13) {
                    busqueda();
                }
            });
            $(".imprimirins").click(function() {
                var href = $(this).attr('nhref');
                var tipos = $(this).attr('tipos');
                abrir_reporte2(href,tipos);

            });
            abrir_reporte2 = function(href,tipos){
                if (!tipos){
                    tipos = "pd";
                }
                if(tipos.contains("pdf")){
                    $("#formatopdf").removeAttr("hidden");
                }else{
                    $("#formatopdf").attr({"hidden":"hidden"});
                }
                primero = $("#formatoreporte_formato").find("option:first").val();
                $("#formatoreporte_formato").val(primero);
                $('#formatoreporte').modal({'width':'400'}).modal('show');
                $('#formatoreporte_run').attr('nhref', href);
            };

            $("#notificar").click(function(){
                var id = $(this).attr('ids');
                smoke.confirm("¿Está seguro que desea notificar?", function(e){
                    if (e) {
                        bloqueointerface();
                        $.ajax({
                            type: "GET",
                            url: "{{ request.path }}",
                            data: {'action': 'notificarcompletoevidencias', 'id': id},
                            success: function (data) {
                                $.unblockUI();
                                if (data.result == 'ok') {
                                    location.reload(true);
                                } else {
                                    smoke.alert(data.mensaje);
                                }
                            },
                            error: function () {
                                $.unblockUI();
                                smoke.alert("Error de conexión.");
                            },
                            dataType: "json"
                        });
                    }
                }, {
                    ok: "SI",
                    cancel: "CANCELAR",
                    classname: "custom-class",
                    reverseButtons: true
                });
            });
            $(".showmodal").click(function () {
                var id=$(this).attr("id");
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "{{ request.path }}",
                    data: {'action': 'alumalla', 'id': id},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $("#body-modal").html(data.data);
                            $("#showdetalle").modal({backdrop:'static', width: $(window).width()-100, height: $(window).height()-100}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });
            $("#cerrardetallemodal").click(function () {
                $("#showdetalle").modal("hide");
            })

        });
        function autorizarevidencia(id){
            smoke.confirm("¿Está seguro de autorizar para subir evidencia.?", function(e){
                if (e){
                    $.blockUI({message: null});
                    var idprins = id;
                    $.ajax({
                        type: "POST",
                        url: "{{ request.path }}",
                        data: {'action': 'autorizarevidencia', 'idprins': idprins },
                        error: function () {
                            $.unblockUI();
                            smoke.alert("Error al autorizar.");
                        },
                        success: function (data) {
                            if (data.result == "ok") {
                                smoke.alert("Autorizado con Éxito");
                                $.unblockUI();
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        }
                    });
                }
            }, {
                ok: "SI,SEGURO",
                cancel: "NO,CANCELAR",
                classname: "custom-class",
                reverseButtons: true
            });
        }
        function generarexcel(){
            var opc=$("#tipo_solicitud").val();
            openwindow('GET' ,'{{ request.path }}', {action:'excelpracticas',opc:opc}, '_blank');
        }
    </script>
{% endblock %}
{% block atras %}{{ request.path }}?action=ofertaspracticas{% endblock %}
{% block canvas %}
    <div class='row-fluid'>
        <div class='span12'>
            <h4>{{ title }}</h4>
            <h4>Oferta: {{ oferta }}</h4>
        </div>
    </div>

    <div id="no-more-tables"><!-- inicio no more tables-->
        <div class='row-fluid'>
            <div class='span12'>
                <table class="table table-bordered table-striped filterable">
                    <thead>
                    <tr>
                        <th style="width: 50px">Inscripción</th>
                        <th >Estudiante</th>
                        <th style="width: 320px">Detalles</th>
                        <th style="text-align: center;">Tipo</th>
                        <th style="width: 80px;text-align: center;">Fechas</th>
                        <th style="width: 70px; text-align: center;">Hrs/Hom.</th>
                        <th style="width: 250px; text-align: center;">Institución</th>
{#                        <th style="width: 90px;"></th>#}
                    </tr>
                    </thead>
                    <tbody>
                    {% for practicaspreprofesionale in practicaspreprofesionales %}
                        <tr>
                            <td data-title='Inscripción:' style="text-align: center">{{ practicaspreprofesionale.inscripcion.id }}</td>
                            <td data-title='Estudiante:'>
                                {{ practicaspreprofesionale.inscripcion.persona }}<br><b>{{ practicaspreprofesionale.inscripcion.carrera }}</b><br>
                                <strong>Ced.:</strong> {{ practicaspreprofesionale.inscripcion.persona.cedula }}<br>
                                <strong>Telf.:</strong> {{ practicaspreprofesionale.inscripcion.persona.telefono }}<br>
                                <strong>Email.:</strong> {{ practicaspreprofesionale.inscripcion.persona.email }}<br>
                                <strong>Email Inst.:</strong> {{ practicaspreprofesionale.inscripcion.persona.emailinst }}<br>
                                <strong>Dirección.:</strong><span style="font-size: 10px;">
                            {% if practicaspreprofesionale.inscripcion.persona.canton %}
                                {{ practicaspreprofesionale.inscripcion.persona.canton }} -
                            {% endif %}
                                {% if practicaspreprofesionale.inscripcion.persona.direccion %}
                                    {{ practicaspreprofesionale.inscripcion.persona.direccion }}
                                {% endif %}
                                {% if practicaspreprofesionale.inscripcion.persona.direccion2 %}
                                    {{ practicaspreprofesionale.inscripcion.persona.direccion2 }}
                                {% endif %}</span>
                                <br>
                                {% if practicaspreprofesionale.culminada or practicaspreprofesionale.retirado %}
                                    {% if practicaspreprofesionale.tiposolicitud == 3 %}
                                        <span class="label label-success"> PRACTICA HOMOLOGADA</span>
                                    {% else %}
                                        {% if practicaspreprofesionale.retirado %}
                                            <span class="label label-important">RETIRADO POR VOLUNTAD PROPIA</span>
                                        {% else %}
                                            <span class="label label-success"> PRÁCTICA CULMINADA</span>
                                        {% endif %}
                                        {% if not practicaspreprofesionale.inscripcion.coordinacion.id == 1 %}
                                            {% if practicaspreprofesionale.estadosolicitud == 1 %}
                                                <span class="label label-warning tu" data-original-title="Solicitado">{{ practicaspreprofesionale.get_estadosolicitud_display }}</span>
                                            {% endif %}
                                            {% if practicaspreprofesionale.estadosolicitud == 2 %}
                                                <span class="label label-success tu" data-original-title="Aprobado">{{ practicaspreprofesionale.get_estadosolicitud_display }}</span>
                                            {% endif %}
                                            {% if practicaspreprofesionale.estadosolicitud == 3 %}
                                                <span class="label label-important tu" data-original-title="Rechazado">{{ practicaspreprofesionale.get_estadosolicitud_display }}</span>
                                            {% endif %}
                                            {% if practicaspreprofesionale.estadosolicitud == 4 %}
                                                <span class="label label-info tu" data-original-title="Pendiente">{{ practicaspreprofesionale.get_estadosolicitud_display }}</span>
                                            {% endif %}
                                            {% if practicaspreprofesionale.estadosolicitud == 5 %}
                                                <span class="label label-info tu" data-original-title="Retirado">{{ practicaspreprofesionale.get_estadosolicitud_display }}</span>
                                            {% endif %}
                                            {% if practicaspreprofesionale.estadosolicitud == 6 %}
                                                <span class="label label-important tu" data-original-title="Reprobado">{{ practicaspreprofesionale.get_estadosolicitud_display }}</span>
                                            {% endif %}
                                        {% endif %}
                                    {% endif %}
                                {% else %}
                                    <span class="label label-{% if practicaspreprofesionale.tiposolicitud == 3 or practicaspreprofesionale.tiposolicitud == 4 %}success{% else %}warning{% endif %}">{{ practicaspreprofesionale.get_tiposolicitud_display }}</span>
                                    {% if practicaspreprofesionale.estadosolicitud == 1 %}
                                        <span class="label label-warning tu" data-original-title="Solicitado">{{ practicaspreprofesionale.get_estadosolicitud_display }}</span>
                                    {% endif %}
                                    {% if practicaspreprofesionale.estadosolicitud == 2 %}
                                        <span class="label label-success tu" data-original-title="Aprobado">{{ practicaspreprofesionale.get_estadosolicitud_display }}</span>
                                    {% endif %}
                                    {% if practicaspreprofesionale.estadosolicitud == 3 %}
                                        <span class="label label-important tu" data-original-title="Rechazado">{{ practicaspreprofesionale.get_estadosolicitud_display }}</span>
                                    {% endif %}
                                    {% if practicaspreprofesionale.estadosolicitud == 4 %}
                                        <span class="label label-info tu" data-original-title="Pendiente">{{ practicaspreprofesionale.get_estadosolicitud_display }}</span>
                                    {% endif %}
                                    {% if practicaspreprofesionale.estadosolicitud == 5 %}
                                        <span class="label label-important tu" data-original-title="Retirado">{{ practicaspreprofesionale.get_estadosolicitud_display }}</span>
                                    {% endif %}
                                    {% if practicaspreprofesionale.estadosolicitud == 6 %}
                                        <span class="label label-important tu" data-original-title="Reprobado">{{ practicaspreprofesionale.get_estadosolicitud_display }}</span>
                                    {% endif %}
                                    {% if practicaspreprofesionale.estadosolicitud == 5 %}
                                        <strong>Archivo Retiro:</strong> <a target="_blank" class="btn btn-success btn-mini" href="{{ practicaspreprofesionale.archivoretiro.url }}"><i class="fa fa-arrow-down"></i></a>
                                    {% endif %}
                                {% endif %}
                                {% if practicaspreprofesionale.obseaprueba %}
                                    <a class="btn btn-tini cargarobservacion tu" data-original-title="Observación de Aprobación ó Negación" idsolicitud="{{ practicaspreprofesionale.id }}"><i class="fa fa-eye"></i></a>
                                {% endif %}
                                {% if practicaspreprofesionale.archivo %}
                                    <a href="/media/{{ practicaspreprofesionale.archivo }}" target="_blank" class="btn btn-warning btn-mini tu" title="Archivo Solicitud de Prácticas PreProfesionales"><i class="fa fa-file"></i></a>
                                {% endif %}<br>
                                {% with nivelactual=practicaspreprofesionale.inscripcion|args:periodo|call:'nivelperiodo' %}
                                    {% if nivelactual %}
                                        <span class="label label-default tu" data-original-title="Nivel">{{ nivelactual.nivelmalla }}</span>
                                        <span class="label label-default tu" data-original-title="Jornada">{{ nivelactual.nivel.sesion.nombre }}</span>
                                    {% endif %}
                                {% endwith %}
                                {% if not practicaspreprofesionale.culminada or practicaspreprofesionale.archivo %}
                                    {% if practicaspreprofesionale.periodoppp %}
                                        <span class="label label-success tu" data-original-title="Evidencias Aprobadas">{% if practicaspreprofesionale.fechadesde %}{{ practicaspreprofesionale.evidenciasaprobadas }} / {{ practicaspreprofesionale.totalevidencias }}{%  endif %}</span>
                                        <span class="label label-important tu" data-original-title="Evidencias Rechazadas">{{ practicaspreprofesionale.evidenciasreprobadas }}</span>
                                        <span class="label label-warning tu" data-original-title="Evidencias Solicitadas">{{ practicaspreprofesionale.evidenciassolicitadas }}</span>
                                    {% endif %}
                                {% endif %}
                            </td>
                            <td data-title='Detalle:' style="height: auto">
                                <b>F.Creación:</b> {{ practicaspreprofesionale.fecha_creacion|date:"d-m-Y h:i a" }}
                                {% if practicaspreprofesionale.tutorunemi %}
                                    <br><strong>Tutor Acad:</strong> {{ practicaspreprofesionale.tutorunemi|default_if_none:""|upper }}
                                {% endif %}
                                {% if practicaspreprofesionale.supervisor %}
                                    <br><strong>Supervisor:</strong> {{ practicaspreprofesionale.supervisor|default_if_none:""|upper }}
                                {% endif %}
                                {% if practicaspreprofesionale.observacion %}
                                    <br><b>Obs:</b> {{ practicaspreprofesionale.observacion }}
                                {% endif %}
{#                                <b>Autorizado subir evidencias:</b>#}
{#                                {% if practicaspreprofesionale.autorizarevidencia %}#}
{#                                    SI <br> <b> Hasta</b> {{ practicaspreprofesionale.autorizarevidenciasuma24hrs|date:"Y-m-d h:i a" }}#}
{#                                {% else %}NO{% endif %}#}
                                {% if practicaspreprofesionale.validacion %}
                                    <br><b>Validación:</b> {{ practicaspreprofesionale.validacion }}
                                {% endif %}
                                {% if practicaspreprofesionale.fechavalidacion %}
                                    <br><b>F.Validación:</b> {{ practicaspreprofesionale.fechavalidacion|date:"d-m-Y" }}
                                {% endif %}
                                {% if practicaspreprofesionale.periodoppp %}
                                    <br><b>Per. Evidencia:</b> {{ practicaspreprofesionale.periodoppp.nombre }}
                                {% endif %}
                                {% if practicaspreprofesionale.periodoppp %}
                                    {% if practicaspreprofesionale.periodoppp.evaluarpromedio %}
                                        <br/><b>Promedio de práctica:</b> <span class="label label-info">{{ practicaspreprofesionale.total_promedio_nota_evidencia|floatformat:2 }}</span>
                                    {% endif %}
                                {% endif %}
                                {% if practicaspreprofesionale.oferta %}
                                    <br><b>Oferta:</b> <span class="label label-info">SI</span>
                                {% endif %}
                                {% if practicaspreprofesionale.retirado and practicaspreprofesionale.fechahastapenalizacionretiro %}
                                    <br><b>Fecha fin de penalización de retiro: </b> <span class="label label-info">{{ practicaspreprofesionale.fechahastapenalizacionretiro|date:"d-m-Y" }}</span>
                                {% endif %}
                            </td>
                            <td data-title='Tipo:' style="text-align: center">
                                {{ practicaspreprofesionale.get_tipo_display }}
                            </td>
                            <td data-title='Fecha:' style="text-align: justify">
                                <b>F.Desde:</b><br>{{ practicaspreprofesionale.fechadesde|date:"d-m-Y" }}<br>
                                <b>F.Hasta:</b><br>{{ practicaspreprofesionale.fechahasta|date:"d-m-Y" }}<br>
                                {%  if practicaspreprofesionale.fechaasigtutor %}
                                    <b>F.Asig Tutor:</b><br>{{ practicaspreprofesionale.fechaasigtutor|date:"d-m-Y" }}<br>
                                {%  endif %}
                                {% if practicaspreprofesionale.fechaasigsupervisor %}<b>F.Asig Supervisor:</b><br>{{ practicaspreprofesionale.fechaasigsupervisor|date:"d-m-Y" }}{%  endif %}
                            </td>
                            <td data-title='Hors/Hom.:' style="text-align: center">
                                {{ practicaspreprofesionale.numerohora }}
                                {% if practicaspreprofesionale.tiposolicitud == 3 %}<br>
                                    <span class="label label-default tu" data-original-title="Horas Homologadas">
                                {{ practicaspreprofesionale.horahomologacion|default_if_none:"" }}
                                </span>
                                {% endif %}
                            </td>
                            <td data-title='Institución'>
                                {% if practicaspreprofesionale.institucion %}
                                    {{ practicaspreprofesionale.institucion|upper }}
                                {% else %}
                                    {% if not practicaspreprofesionale.empresaempleadora %}
                                        <span class="label label-default" >
                                    {{ practicaspreprofesionale.otraempresaempleadora|upper }}
                                    </span>
                                    {% else %}
                                        {{ practicaspreprofesionale.empresaempleadora.nombre|upper }}
                                    {% endif %}
                                {% endif %}<br>
                                {% if practicaspreprofesionale.departamento %}
                                    <strong>Dep:</strong> {{ practicaspreprofesionale.departamento|default_if_none:""|upper }}<br>
                                {% endif %}
                                <strong>Tutor Emp:</strong> {{ practicaspreprofesionale.tutorempresa|default_if_none:""|upper }}<br>
                                <strong>Sector Ec:</strong> {{ practicaspreprofesionale.sectoreconomico_letra }} <br>
                                <strong>Tipo Ins:</strong> {{ practicaspreprofesionale.get_tipoinstitucion_display }}
                                {% if practicaspreprofesionale.rotacionmalla %}
                                    <br><strong>Rotación:</strong> {{ practicaspreprofesionale.rotacionmalla }}
                                {% endif %}
                                {%  if practicaspreprofesionale.itinerariomalla %}
                                    <br><strong>Itinerario.:</strong> {{ practicaspreprofesionale.itinerariomalla.nombreitinerario }}
                                {%  endif %}
                            </td>
{#                            <td data-title='Acción:' style="text-align: center">#}
{#                                <div class="btn-group" style="text-align: left">#}
{#                                    <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown" href="javascript:;">Acciones<span class="caret"></span></a>#}
{#                                    <ul class="dropdown-menu pull-right">#}
{#                                        {% if perms.sga.puede_modificar_practicas %}#}
{#                                            <li><a href="{{ request.path }}?action=edit&id={{ practicaspreprofesionale.id }}"><i class="fa fa-edit"></i> Editar</a></li>#}
{#                                        {% endif %}#}
{#                                        {% if perms.sga.puede_eliminar_practicas %}#}
{#                                            <li><a class="eliminacionmodal" href="javascript:;" nhref="{{ request.path }}?action=delete&id={{ practicaspreprofesionale.id }}"><i class="fa fa-remove"></i> Eliminar</a></li>#}
{#                                        {% endif %}#}
{#                                        {% if practicaspreprofesionale.tutorunemi and perms.sga.puede_eliminar_practicas %}#}
{#                                            <li><a class="eliminacionmodal" href="javascript:;" nhref="{{ request.path }}?action=deletetutoracademico&id={{ practicaspreprofesionale.id }}"><i class="fa fa-user-times"></i> Eliminar Tutor Académico</a></li>#}
{#                                        {% endif %}#}
{#                                        {% if practicaspreprofesionale.supervisor and perms.sga.puede_eliminar_practicas %}#}
{#                                            <li><a class="eliminacionmodal" href="javascript:;" nhref="{{ request.path }}?action=eliminasupervisor&id={{ practicaspreprofesionale.id }}"><i class="fa fa-user-times"></i> Eliminar Supervisor Académico</a></li>#}
{#                                        {% endif %}#}
{#                                        <li><a href='javascript:;' id="{{ practicaspreprofesionale.inscripcion.id }}" class="showmodal"><i class="fa fa-list"></i> Malla Estudiante</a></li>#}
{#                                        {% if perms.sga.puede_modificar_practicas %}#}
{#                                            <li><a href="javascript:;" nhref="{{ request.path }}?action=duplicarsolicitudpractica&id={{ practicaspreprofesionale.id|encrypt }}" class="confirmacionmodal"><i class="fa fa-copy"></i> Duplicar solicitud práctica</a>#}
{#                                        {% endif %}#}
{#                                        {% if practicaspreprofesionale.estadosolicitud == 2 or practicaspreprofesionale.estadosolicitud == 6 or practicaspreprofesionale.estadosolicitud == 4 and  perms.sga.puede_modificar_practicas  %}#}
{#                                            {% if practicaspreprofesionale.fechadesde and practicaspreprofesionale.periodoppp and practicaspreprofesionale.archivo %}#}
{#                                                <li><a href='{{ request.path }}?action=subirarchivos&id={{ practicaspreprofesionale.id }}'><span class="fa fa-table"></span> Subir Evidencias</a></li>#}
{#                                            {%  endif %}#}
{#                                        {% endif %}#}
{#                                        {% if perms.sga.puede_grupo_practicas %}#}
{#                                            {% if not practicaspreprofesionale.culminada %}#}
{#                                                <li><a class="editpreguntaencuesta" idp="{{ practicaspreprofesionale.id }}" href="javascript:;"><span class="fa fa-edit"></span> Aprobar o Rechazar Solicitud</a></li>#}
{#                                            {% endif %}#}
{#                                            {% if practicaspreprofesionale.fechadesde %}#}
{#                                                {% if practicaspreprofesionale.evidenciasaprobadas == practicaspreprofesionale.totalevidencias %}#}
{#                                                    {% if not practicaspreprofesionale.culminada %}#}
{#                                                        <li><a class="aprobacionfinal" idpins="{{ practicaspreprofesionale.id }}" href="javascript:;"><span class="fa fa-check"></span> Culminación Prácticas Profesionales</a></li>#}
{#                                                    {% endif %}#}
{#                                                {% endif %}#}
{#                                            {%  endif %}#}
{#                                        {% endif %}#}
{#                                        {% if practicaspreprofesionale.culminada %}#}
{#                                            {% if practicaspreprofesionale.inscripcion.carrera.mi_coordinacion2 == 1 %}#}
{#                                                <li><a class="reportedirecto" href="javascript:;" tipos="{{ reporte_2.tiporeporte }}" nhref="/reportes?action=run&n={{ reporte_2.nombre }}&inscripcion={{ practicaspreprofesionale.inscripcion.id }}&practica={{ practicaspreprofesionale.id }}"><span class="fa fa-print"></span> Imprimir certificado</a></li>#}
{#                                            {% elif practicaspreprofesionale.estadosolicitud == 2 %}#}
{#                                                <li><a class="reportedirecto" href="javascript:;" tipos="{{ reporte_0.tiporeporte }}" nhref="/reportes?action=run&n={{ reporte_0.nombre }}&inscripcion={{ practicaspreprofesionale.inscripcion.id }}&practica={{ practicaspreprofesionale.id }}"><span class="fa fa-print"></span> Imprimir certificado</a></li>#}
{#                                            {% endif %}#}
{#                                        {% endif %}#}
{#                                        {% if practicaspreprofesionale.fechadesde and practicaspreprofesionale.evidenciassolicitadas  ==  practicaspreprofesionale.totalevidencias %}#}
{#                                            <li><a id="notificar" ids="{{ practicaspreprofesionale.id }}" href="javascript:;"><span class="fa fa-send"></span> Notificar Completo Evidencias</a></li>#}
{#                                        {%  endif %}#}
{#                                    </ul>#}
{#                                </div>#}
{#                            </td>#}
                        </tr>
                    {% empty %}
                        <tr>
                            <td colspan="14">NO EXISTEN REGISTROS DE PRACTICAS PREPROFESIONALES</td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class='row-fluid'>
        <div class="span12">
            {% if paging.num_pages > 20 %}
                <div class='pagination'>
                    <ul>
                        {% if paging.primera_pagina %}
                            <li><a href="{{ request.path }}?{% if search %}s={{ search }}&{% endif %}{% if search1 %}tipo={{ search1 }}&{% endif %}page=1">1</a></li>
                            <li><a href="{{ request.path }}?{% if search %}s={{ search }}&{% endif %}{% if search1 %}tipo={{ search1 }}&{% endif %}page={{ paging.ellipsis_izquierda }}" class="active">...</a></li>
                        {% endif %}
                        {% for pagenumber in paging.paginas %}
                            <li {%  if pagenumber == page.number %}class='active'{% endif %}><a href="{{ request.path }}?{% if search %}s={{ search }}&{% endif %}{% if search1 %}tipo={{ search1 }}&{% endif %}page={{ pagenumber }}">{{ pagenumber }}</a></li>
                        {% endfor %}
                        {% if paging.ultima_pagina %}
                            <li><a href="{{ request.path }}?{% if search %}s={{ search }}&{% endif %}{% if search1 %}tipo={{ search1 }}&{% endif %}page={{ paging.ellipsis_derecha }}" class="active">...</a></li>
                            <li><a href="{{ request.path }}?{% if search %}s={{ search }}&{% endif %}{% if search1 %}tipo={{ search1 }}&{% endif %}page={{ paging.num_pages }}">{{ paging.num_pages }}</a></li>
                        {% endif %}
                    </ul>
                </div>
            {% else %}
                <div class='pagination'>
                    <ul>
                        {% for pagenumber in paging.page_range %}
                            <li {%  if pagenumber == page.number %}class='active'{% endif %}><a href="{{ request.path }}?{% if search %}s={{ search }}&{% endif %}{% if search1 %}tipo={{ search1 }}&{% endif %}page={{ pagenumber }}">{{ pagenumber }}</a></li>
                        {% endfor %}
                    </ul>
                </div>
            {% endif %}
        </div>
    </div>
    <div class="modal fade static" id="itemspaneledit" style="display: none;">
        <div class="modal-header">
            <td><a href="javascript:;" id="cerrarpanelponerfechalimite" class="btn btn-danger btn-mini pull-right"><i class="fa fa-remove"></i></a></td>
            <h4 id="paneltitle">Aprobar o Rechazar Solicitud</h4>
        </div>
        <div class="modal-body panelbody">
            <div class="alert alert-info incompletoaddpreguntasedit" style="display: none;">
                <i class="fa fa-info-sign"></i> Complete todos los campos para continuar
            </div>
            {#            <label for="id_sagpregunta">Estado:</label>#}
            {#            <select id="estadoid" name="estadoid">#}
            {#                <option value="2">APROBADO</option>#}
            {#                <option value="3">RECHAZADO</option>#}
            {#                <option value="4">PENDIENTE</option>#}
            {#            </select>#}
            {#            <label for="id_observacion">Observación:</label>#}
            {#            <textarea id="nomobserbacion" rows="3" with="100" style="margin: 0px; width: 400px; height: 70px;" cols="40" name="nomobserbacion"></textarea>#}
            {#            <label for="id_validacion">Validación:</label>#}
            {#            <textarea id="id_validacion" rows="3" with="100" style="margin: 0px; width: 400px; height: 70px;" cols="40" name="id_validacion"></textarea>#}
            {#            <label for="id_fecha_validacion">Fecha Validación:</label>#}
            {#            <input type="text" id="id_fecha_validacion" rows="3" with="100" name="id_fecha_validacion"></input>#}
            {#            <input type="hidden" id="codigoitem" name="codigoitem">#}
        </div>
        {#        <div class="modal-footer">#}
        {#            <p style="text-align: right; margin-bottom: 0">#}
        {#                <a href="javascript:;" id="edit_adicionar" class='btn btn-success'> Guardar</a>#}
        {#                <a href="javascript:;" id="edit_cancel" class="btn btn-danger"> Cancelar</a>#}
        {#            </p>#}
        {#        </div>#}
    </div>
    <div class="modal fade static" id="itemspanelaprobar" style="display: none;">
        <div class="modal-header">
            <h4 id="paneltitle">Culminar Prácticas Profesional</h4>
        </div>
        <div class="modal-body" style="min-height: 60px">
            <form id="formulario1" style="margin-bottom: 0; margin-top: 0; background-color: white">
                {#                <input type="hidden" name="action" value="delete">#}
                <input type="hidden" id="codigoaprobar" name="codigoaprobar">
                <p style="margin-top: 10px;">Esta seguro(a) que desea culminar: <b class="textoleyenda"></b></p>
            </form>
        </div>
        <div class="modal-footer">
            <p style="text-align: right; margin-bottom: 0">
                <a href="javascript:;" id="aprobar_adicionar" class='btn btn-success'> Guardar</a>
                <a href="javascript:;" id="aprobar_cancel" class="btn btn-danger"> Cancelar</a>
            </p>
        </div>
    </div>
    <div class="modal fade static" id="itemspanelobs" style="display: none;">
        <div class="modal-header">
            <table border="0" width="100%" style="background-color: transparent">
                <tr>
                    <td style="width: 80%"><h3 class="paneltitleobs">Observación</h3></td>
                    <td><a href="javascript:;" id="cerrarpanelobs" class="btn btn-danger btn-mini pull-right"><i class="fa fa-remove"></i></a></td>
                </tr>
            </table>
        </div>
        <div class="modal-body panelbodyobs" align="justify">
        </div>
    </div>
    <div class="modal fade static" id="showdetalle" style="display: none;">
        <div class="modal-header">
            <h4 id="paneltitle">Malla Estudiante</h4>
        </div>
        <div class="modal-body" id="body-modal">
        </div>
        <div class="modal-footer">
            <a  href="javascript:;" id="cerrardetallemodal" class="btn btn-success">Cerrar</a>
        </div>
    </div>
{% endblock %}
