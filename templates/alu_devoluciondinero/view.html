{% extends "basebs.html" %}
{% load sga_extras %}
{% load humanize %}
{% block heading %}
    <script type="text/javascript" src='/static/js/jquery.validationEngine.js?v=1.0.0'></script>
    <script type="text/javascript" src='/static/js/jquery.validationEngine-es.js?v=1.0.0' ></script>
    <link type='text/css' rel='stylesheet' href="/static/css/validationEngine.jquery.css?v=1.0.0"/>

    <script type="text/javascript">
        $(function() {
            $(".mostrarrecorrido").click(function() {
                var id = $(this).attr('ids');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/alu_devoluciondinero",
                    data: {'action': 'mostrarrecorrido', 'id': id},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyrecorrido").html(data.data);
                            $("#itemspanelrecorrido").modal({backdrop:'static', width: '700px', height: '500px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#itemspanelrecorrido .btn-cerrar").click(function() {
                $("#itemspanelrecorrido").modal("hide");
                return false;
            });

            $(".cargarcedula").click(function () {
                var ids=$(this).attr('ids');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/alu_becas",
                    data: {'action': 'subirdocumentocedula', 'id': ids },
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodycargarcedula").html(data.data);
                            $(".paneltitlecargarcedula").html(data.title);
                            $("#itemspanelcargarcedula").modal({backdrop:'static', width: '400px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#cerrarpanelcargarcedula").click(function () {
                $('#itemspanelcargarcedula').modal('hide');
            });

            $(".cargarcontrato").click(function () {
                var ids=$(this).attr('ids');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/alu_becas",
                    data: {'action': 'subircontratobeca', 'id': ids },
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodycargarcontrato").html(data.data);
                            $(".paneltitlecargarcontrato").html(data.title);
                            $("#itemspanelcargarcontrato").modal({backdrop:'static', width: '400px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#cerrarpanelcargarcontrato").click(function () {
                $('#itemspanelcargarcontrato').modal('hide');
            });

            $(".representantesolidario").click(function () {
                var ids=$(this).attr('ids');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/alu_becas",
                    data: {'action': 'representantesolidario', 'id': ids },
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyrepresentante").html(data.data);
                            $(".paneltitlerepresentante").html(data.title);
                            $("#itemspanelrepresentante").modal({backdrop:'static', width: '400px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#cerrarpanelrepresentante").click(function () {
                $('#itemspanelrepresentante').modal('hide');
            });


            $(".cuentabancaria").click(function () {
                var ids=$(this).attr('ids');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/alu_becas",
                    data: {'action': 'cuentabancaria', 'id': ids },
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodycuentabanco").html(data.data);
                            $(".paneltitlecuentabanco").html(data.title);
                            $("#itemspanelcuentabanco").modal({backdrop:'static', width: '400px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $(".agregacuentabancaria").click(function () {
                var ids=$(this).attr('ids');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/alu_becas",
                    data: {'action': 'addcuentabancaria', 'id': ids },
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodycuentabanco").html(data.data);
                            $(".paneltitlecuentabanco").html(data.title);
                            $("#itemspanelcuentabanco").modal({backdrop:'static', width: '400px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#cerrarpanelcuentabanco").click(function () {
                $('#itemspanelcuentabanco').modal('hide');
            });

            $(".comprobanteventa").click(function () {
                var ids=$(this).attr('ids');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/alu_becas",
                    data: {'action': 'comprobanteventa', 'id': ids },
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodycomprobante").html(data.data);
                            $(".paneltitlecomprobante").html(data.title);
                            $("#itemspanelcomprobante").modal({backdrop:'static', width: '400px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#cerrarpanelcomprobante").click(function () {
                $('#itemspanelcomprobante').modal('hide');
            });

            $(".aceptar_rechazar").click(function () {
                var ids=$(this).attr('ids');
                var tipo=$(this).attr('tipo');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/alu_becas",
                    data: {'action': 'aceptar_rechazar_beca', 'id': ids, 'tipo': tipo },
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyaceptarrechazar").html(data.data);
                            $(".paneltitleaceptarrechazar").html(data.title);
                            $("#itemspanelaceptarrechazar").modal({backdrop:'static', width: '700px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#cerrarpanelaceptarrechazar").click(function () {
                $('#itemspanelaceptarrechazar').modal('hide');
            });

            $(".anular_solicitud").click(function () {
                var ids=$(this).attr('ids');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/alu_becas",
                    data: {'action': 'anular_solicitud', 'id': ids},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyanularsolicitud").html(data.data);
                            $(".paneltitleanularsolicitud").html(data.title);
                            $("#itemspanelanularsolicitud").modal({backdrop:'static', width: '400px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#cerrarpanelanularsolicitud").click(function () {
                $('#itemspanelanularsolicitud').modal('hide');
            });

            $(".mostrardocumentos").click(function() {
                var id = $(this).attr('idt');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/alu_becas",
                    data: {'action': 'mostrardocumentos', 'id': id},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodymostrardocumento").html(data.data);
                            $("#itemspanelmostrardocumento").modal({backdrop:'static', width: '600px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#itemspanelmostrardocumento .btn-cerrar").click(function() {
                $("#itemspanelmostrardocumento").modal("hide");
            });

            $("#itemspaneleditarcomprobante .cerrareditcomprobante").click(function() {
                $("#itemspaneleditarcomprobante").modal("hide");
            });

            $(".actualizarcomprobante").click(function() {
                envioformularioreg("/alu_becas","editcomprobanteventa", false);
                return false;
            });

            $("#itemspanelnuevocomprobante .cerrarnuevocomprobante").click(function() {
                $("#itemspanelnuevocomprobante").modal("hide");
            });

            $(".guardarcomprobante").click(function() {
                envioformularioreg("/alu_becas","agregarcomprobanteventa", false);
                return false;
            });

            envioformularioreg = function(url, action, destino){
                if(action == 'editcomprobanteventa'){
                    $("#formulario1").validationEngine('attach',{ scroll: false });
                    var valid = $("#formulario1").validationEngine('validate', { scroll: false });
                }
                else if(action == 'agregarcomprobanteventa'){
                    $("#formulario2").validationEngine('attach',{ scroll: false });
                    var valid = $("#formulario2").validationEngine('validate', { scroll: false });
                }

                if (valid){
                    $('.bootstrap-timepicker-widget').css({"display": "none"});
                    bloqueointerface();
                    $('.controls input').each(function(){
                        if ($(this).attr('type')=='text'){
                            $(this).val($(this).val().trim());
                        }
                        if ($(this).attr('type')!='file'){
                            if ($(this).css('text-transform')=='uppercase'){
                                if ($(this).attr('type')!='password'){
                                    $(this).val($(this).val().toUpperCase());
                                }
                            }
                        }
                    });

                    if(action == 'editcomprobanteventa')
                        var formdata = new FormData($("#formulario1")[0]);
                    else if(action == 'agregarcomprobanteventa')
                        var formdata = new FormData($("#formulario2")[0]);

                    $.ajax({
                        type: "POST",
                        action : action,
                        url: url,
                        data:  formdata,
                        success: function(data) {
                            if (data.result == 'ok') {
                                if(action == 'editcomprobanteventa'){
                                    $("#itemspaneleditarcomprobante").modal("hide");
                                    var idbeca = $(".actualizarcomprobante").attr('idb');
                                    mostrarcomprobantes(idbeca, 'E');
                                    $.unblockUI();
                                }
                                else if(action == 'agregarcomprobanteventa'){
                                    $("#itemspanelnuevocomprobante").modal("hide");
                                    var idbeca = $(".guardarcomprobante").attr('idb');
                                    mostrarcomprobantes(idbeca, 'E');
                                    $.unblockUI();
                                }
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        },
                        error: function() {
                            $.unblockUI();
                            smoke.alert("Error al enviar los datos.");
                        },
                        dataType: "json",
                        cache: false,
                        contentType: false,
                        processData: false
                    });
                } else {
                    setTimeout(function() {
                        $('.help-text').html("");
                    }, 8000);
                    $.unblockUI();
                }
            };


            $(".imprimircontratobeca").click(function () {
                var ids=$(this).attr('ids');
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/alu_becas",
                    data: {'action':'generanumerocontrato', 'id': ids},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result=='ok'){
                            openwindow('POST' ,'/alu_becas', {action:'contratobecapdf',id: ids}, '_blank');
                            location.reload();
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $(".mostrarcomprobantes").click(function() {
                var idbeca = $(this).attr('ids');
                $(".actualizarcomprobante").attr('idb', idbeca);
                mostrarcomprobantes(idbeca, 'E');
            });

            mostrarcomprobantes = function (idbeca, modo){
                var id = idbeca;
                var modo = modo;
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/alu_becas",
                    data: {'action': 'mostrarcomprobantes', 'id': id, 'modo': modo},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodymostrarcomprobante").html(data.data);
                            $(".panelbodymostrarcomprobante").attr('enovedad', data.enovedad);
                            $("#itemspanelmostrarcomprobante").modal({backdrop:'static', width: '600px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            };

            $("#itemspanelmostrarcomprobante .btn-cerrar").click(function() {
                enovedad = $(".panelbodymostrarcomprobante").attr('enovedad');
                if(enovedad == 'N') $("#imgnovedad").hide();
                $("#itemspanelmostrarcomprobante").modal("hide");
            });


            iniciosolicitud = function () {
                var id = parseInt($('input:radio[name=tipobeca]:checked').val());
                if (id>0){
                    {#                    smoke.confirm("¿Está seguro de iniciar solicitud.?", function(e){#}
                    {#                        if (e){#}
                    bloqueointerface();
                    location.href="/alu_becas?action=iniciosolicitud&idtipo="+id;
                    {#                        }#}
                    {#                    }, {#}
                    {#                        ok: "SI,SEGURO",#}
                    {#                        cancel: "NO,CANCELAR",#}
                    {#                        classname: "custom-class",#}
                    {#                        reverseButtons: true#}
                    {#                    });#}
                }else{
                    smoke.alert("Seleccione tipo beca");
                }
            };
            iniciosolicitudprimernivel = function () {
                var id = parseInt($('input:radio[name=tipobeca]:checked').val());
                if (id>0){
                    {#                    smoke.confirm("¿Está seguro de iniciar solicitud.?", function(e){#}
                    {#                        if (e){#}
                    bloqueointerface();
                    location.href="/alu_becas?action=iniciosolicitud&idtipo="+id;
                    {#                        }#}
                    {#                    }, {#}
                    {#                        ok: "SI,SEGURO",#}
                    {#                        cancel: "NO,CANCELAR",#}
                    {#                        classname: "custom-class",#}
                    {#                        reverseButtons: true#}
                    {#                    });#}
                }else{
                    smoke.alert("Seleccione tipo beca");
                }
            };


            $("#detallerolmodal_cerrar").click(function(){
                $("#detallerolmodal").modal("hide");
            });
            $(".detalletipobeca").click(function(){
                var id = $(this).attr('idt');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/alu_becas",
                    data: {'action':'detalletipobeca', 'id': id},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result=='ok'){
                            $("#detallerolmodal_body").html(data.data);
                            $("#detallerolmodal").modal({"backdrop":"static", "width": "500px"}).modal("show");
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
                return false;
            });
            var num=$("#tipobeca").size()
            if (num > 0){
                $("#iniciosolicitud").show();
            }else{
                $("#iniciosolicitud").hide();
            }
        });
    </script>
{% endblock %}
{% block canvas %}
    <div class='row-fluid'>
        <div class='span12'>
            <h4>{{ title }}<br>{{ persona.nombre_completo_inverso }}</h4>
        </div>
    </div>
    <div class="row-fluid">
        <div class='span12'>
            {% if mostrarboton %}
                <a href="/alu_devoluciondinero?action=addsolicitud" class='btn btn-success tu' title="Agregar Solicitud"><span class="fa fa-plus" ></span> Agregar</a>
            {% endif %}
        </div>
    </div>
    <div class="row-fluid">

        <div class="span12">
            <div class="row-fluid">
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th style="width: 5%; font-weight: bold; text-align: center">N°Solicitud</th>
                            <th style="width: 8%; font-weight: bold; text-align: center">Fecha Solicitud</th>
                            <th style="width: 37%; font-weight: bold; text-align: center">Motivo</th>
                            <th style="width: 10%; font-weight: bold; text-align: center">Monto Depositado</th>
                            <th style="width: 10%; font-weight: bold; text-align: center">Comprobante Depósito</th>
                            <th style="width: 10%; font-weight: bold; text-align: center">Cédula Solicitante</th>
                            <th style="width: 10%; font-weight: bold; text-align: center">Certificado Bancario</th>
                            <th style="width: 10%; font-weight: bold; text-align: center">Monto Devolución</th>
                            <th style="width: 10%; font-weight: bold; text-align: center">Estado</th>
                            <th style="width: 10%; font-weight: bold; text-align: center">Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for solicitud in solicitudes %}
                        <tr>
                            <td style="text-align: center"><span class="label label-success">{{ solicitud.id|stringformat:"05d" }}</span> </td>
                            <td style="text-align: center">{{ solicitud.fecha_creacion|date:'Y-m-d' }}</td>
                            <td style="text-align: justify">
                                {{ solicitud.motivo }}
                            </td>
                            <td style="text-align: center">
                                <span class="label label-warning">$ {{ solicitud.monto|floatformat:2|intcomma }}</span>
                            </td>
                            <td style="text-align: center">
                                <a target="_blank" href="{{ solicitud.archivodeposito.url }}" class="btn btn-success tu" title="Descargar"><i class="fa fa-download"></i> Descargar</a>
                            </td>
                            <td style="text-align: center">
                                <a target="_blank" href="{{ solicitud.archivocedula.url }}" class="btn btn-success tu" title="Descargar"><i class="fa fa-download"></i> Descargar</a>
                            </td>
                            <td style="text-align: center">
                                <a target="_blank" href="{{ solicitud.persona.cuentabancaria.archivo.url }}" class="btn btn-success tu" title="Descargar"><i class="fa fa-download"></i> Descargar</a>
                            </td>
                            <td style="text-align: center">
                                <span class="label label-info">$ {{ solicitud.montodevolver|floatformat:2|intcomma }}</span>
                            </td>
                            <td style="text-align: center">
                                <span class="label label-{% if solicitud.estado == 1 %}info{% elif solicitud.estado == 2 or solicitud.estado == 4 %}success{% elif solicitud.estado == 3 %}important{% else %}warning{% endif %}">{{ solicitud.get_estado_display }}</span><br>
                            </td>
                            <td style="text-align: center">
                                <div class="btn-group" style="text-align: left">
                                    <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown" href="javascript:;">Acciones<span class="caret"></span>
                                    </a>
                                    <ul class="dropdown-menu pull-right">
                                        <li><a class="mostrarrecorrido" ids="{{ solicitud.id|encrypt }}" href="javascript:;"><i class="fa fa-list-ol"></i> Mostrar Recorrido</a></li>
                                        {% if solicitud.estado != 2 %}
                                            <li><a href='/alu_devoluciondinero?action=editsolicitud&id={{ solicitud.id|encrypt }}'><i class='fa fa-edit '></i> Editar</a></li>
                                            <li><a class="eliminacionmodal" href="javascript:;" nhref="/alu_devoluciondinero?action=delsolicitud&id={{ solicitud.id|encrypt }}"><span class="fa fa-remove"></span> Eliminar</a></li>
                                        {% endif %}
{#                                        </li>#}
                                    </ul>
                                </div>
                            </td>
                        </tr>
                        {% empty %}
                        <tr><td style="text-align: center" colspan="10">NO TIENE REGISTROS DE SOLICITUDES DE DEVOLUCIÓN DE DINERO</td></tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

        <div class='span12'>





{#            <div class="row-fluid">#}
{#                <table class='table table-bordered'id="asignacion" cellpadding="0" cellspacing="0">#}
{#                    <thead>#}
{#                    <tr>#}
{#                        <th style="width: 50px; text-align: center">No.</th>#}
{#                        <th style="width: 50px; text-align: center">TIPO BECA</th>#}
{#                        <th style="width: 50px; text-align: center">DETALLES</th>#}
{#                        <th style="width: 50px; text-align: center">AMERITA</th>#}
{#                    </tr>#}
{#                    </thead>#}
{#                    <tbody>#}
{#                    <tr>#}
{#                        <td style="text-align: center" colspan="4"><b>No registra becas en este periodo</b></td>#}
{#                    </tr>#}
{#                    </tbody>#}
{#                </table>#}
{##}
{##}
{#                {% if  esprimernivel %}#}
{#                    {%  if debeactualizar %}#}
{#                        <div id="alert"class="alert alert-info">#}
{#                            <h3>Debe ingresar informacion de titulo de bachiller en su hoja de vida. <a href="th_hojavida?action=addtitulacion"> <i class="fa fa-share"></i> </a>#}
{#                            </h3>#}
{#                        </div>#}
{#                    {% else %}#}
{#                        {% if cumplecalificacion %}#}
{#                            <table class='table table-bordered'id="asignacion" cellpadding="0" cellspacing="0">#}
{#                                <thead>#}
{#                                <tr>#}
{#                                    <th style="width: 50px; text-align: center">No.</th>#}
{#                                    <th style="width: 450px; text-align: center">TIPO BECA</th>#}
{#                                    <th style="width: 50px; text-align: center">DETALLES</th>#}
{#                                    <th style="width: 50px; text-align: center">AMERITA</th>#}
{#                                </tr>#}
{#                                </thead>#}
{#                                <tbody>#}
{#                                {% for tipo in tipobeca %}#}
{#                                    {% if tipo.id == 2 %}#}
{#                                        <tr>#}
{#                                            <td style="text-align: center">{{ tipo.id }}</td>#}
{#                                            <td style="text-align: justify">{{ tipo.nombre }}</td>#}
{#                                            <td style="text-align: center">#}
{#                                                <a class="btn btn-info btn-mini detalletipobeca tu" title="Detalles de Tipo Beca" href='javascript:;' idt="{{ tipo.id }}"> <i class='fa fa-eye'></i> </a>#}
{#                                                <span class='label label-success'>{{ bachiller.calificacion }}</span>#}
{#                                                <br>{{ bachiller.anioinicioperiodograduacion }} - {{ bachiller.aniofinperiodograduacion }}#}
{#                                            </td>#}
{#                                            <td style="text-align: center">#}
{#                                                {% with valida=tipo|args:matricula.inscripcion.id|args:periodo.id|args:anterior|call:'validatipobecaalumno' %}#}
{#                                                    {% if valida %}#}
{#                                                        <i style="color: #085D36" title="Promedio:{{ valida.0.0 }} , Asistencia:{{ valida.0.1 }}" class="fa fa-check tu"> </i>#}
{#                                                        <input type="radio" name="tipobeca" id="tipobeca" value="{{ tipo.id }}">#}
{#                                                    {% else %}#}
{#                                                        <i style="color: #c82829" class="fa fa-close"></i>#}
{#                                                    {% endif %}#}
{#                                                {% endwith %}#}
{#                                            </td>#}
{#                                        </tr>#}
{#                                    {%  endif %}#}
{##}
{#                                {% endfor %}#}
{#                                </tbody>#}
{#                            </table>#}
{#                            <a  title="Iniciar Solicitud"  href="javascript:;" onclick="iniciosolicitudprimernivel()"  id="iniciosolicitud" class="btn tu"><span class="fa fa fa-magic"></span> Solicitar Beca </a>#}
{#                        {% else %}#}
{#                            <i style="color: #c82829" title="No cumple" class="fa fa-close"></i>#}
{#                            {{ bachiller.calificacion }}#}
{#                        {% endif %}#}
{#                    {% endif %}#}
{#                {% endif %}#}
{#                {% if not esprimernivel %}#}
{#                    <table class='table table-bordered'id="asignacion" cellpadding="0" cellspacing="0">#}
{#                        <thead>#}
{#                        <tr>#}
{#                            <th style="width: 50px; text-align: center">No.</th>#}
{#                            <th style="width: 450px; text-align: center">TIPO BECA</th>#}
{#                            <th style="width: 50px; text-align: center">DETALLES</th>#}
{#                            <th style="width: 50px; text-align: center">AMERITA</th>#}
{#                        </tr>#}
{#                        </thead>#}
{#                        <tbody>#}
{#                        {% for tipo in tipobeca %}#}
{#                            <tr>#}
{#                                <td style="text-align: center">{{ tipo.id }}</td>#}
{#                                <td style="text-align: justify">{{ tipo.nombre }}</td>#}
{#                                <td style="text-align: center">#}
{#                                    <a class="btn btn-info btn-mini detalletipobeca tu" title="Detalles de Tipo Beca" href='javascript:;' idt="{{ tipo.id }}"> <i class='fa fa-eye'></i> </a>#}
{#                                </td>#}
{#                                <td style="text-align: center">#}
{#                                    {% with valida=tipo|args:matricula.inscripcion.id|args:periodo.id|args:anterior.id|call:'validatipobecaalumno' %}#}
{#                                        {% if valida %}#}
{#                                            <i style="color: #085D36" title="Promedio:{{ valida.0.0 }} , Asistencia:{{ valida.0.1 }}" class="fa fa-check tu"> </i>#}
{#                                            <input type="radio" name="tipobeca" id="tipobeca" value="{{ tipo.id }}">#}
{#                                        {% else %}#}
{#                                            <i style="color: #c82829" class="fa fa-close"></i>#}
{#                                        {% endif %}#}
{#                                    {% endwith %}#}
{#                                </td>#}
{#                            </tr>#}
{#                        {% endfor %}#}
{#                        </tbody>#}
{#                    </table>#}
{#                    <a  title="Iniciar Solicitud"  href="javascript:;" onclick="iniciosolicitud()"  id="iniciosolicitud" class="btn tu"><span class="fa fa fa-magic"></span> Solicitar Beca </a>#}
{#                {% endif %}#}
{#            </div>#}
        </div>
    </div>
    <div class="modal fade static" id="detallerolmodal" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Detalle Tipo Beca</h3>
        </div>
        <div class="modal-body" id="detallerolmodal_body"></div>
        <div class="modal-footer">
            <div style="float: right">
                <a href="javascript:;" id="detallerolmodal_cerrar" class="btn btn-info"> Cerrar</a>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="itemspanelrecorrido" style="display: none;">
        <div class="modal-header">
            <h4 class="paneltitlerecorrido">Mostrar Recorrido de la Solicitud</h4>
        </div>
        <div class="modal-body panelbodyrecorrido">
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>

    <div class="modal fade static" id="itemspanelcargarcedula" style="display: none;">
        <div class="modal-header">
            <table border="0" width="100%" style="background-color: transparent">
                <tr>
                    <td style="width: 80%"><h4 class="paneltitlecargarcedula">Asignar Beca</h4></td>
                    <td><a href="javascript:;" id="cerrarpanelcargarcedula" title="Cerrar" class="btn btn-danger btn-mini pull-right"><i class="fa fa-remove"></i></a></td>
                </tr>
            </table>
        </div>
        <div class="modal-body panelbodycargarcedula">
        </div>
    </div>

    <div class="modal fade static" id="itemspanelcargarcontrato" style="display: none;">
        <div class="modal-header">
            <table border="0" width="100%" style="background-color: transparent">
                <tr>
                    <td style="width: 80%"><h4 class="paneltitlecargarcontrato">Asignar Beca</h4></td>
                    <td><a href="javascript:;" id="cerrarpanelcargarcontrato" title="Cerrar" class="btn btn-danger btn-mini pull-right"><i class="fa fa-remove"></i></a></td>
                </tr>
            </table>
        </div>
        <div class="modal-body panelbodycargarcontrato">
        </div>
    </div>

    <div class="modal fade static" id="itemspanelrepresentante" style="display: none;">
        <div class="modal-header">
            <table border="0" width="100%" style="background-color: transparent">
                <tr>
                    <td style="width: 80%"><h4 class="paneltitlerepresentante">Actualizar Representante Solidario</h4></td>
                    <td><a href="javascript:;" id="cerrarpanelrepresentante" title="Cerrar" class="btn btn-danger btn-mini pull-right"><i class="fa fa-remove"></i></a></td>
                </tr>
            </table>
        </div>
        <div class="modal-body panelbodyrepresentante">
        </div>
    </div>

    <div class="modal fade static" id="itemspanelcuentabanco" style="display: none;">
        <div class="modal-header">
            <table border="0" width="100%" style="background-color: transparent">
                <tr>
                    <td style="width: 80%"><h4 class="paneltitlecuentabanco">Actualizar Cuenta Bancaria</h4></td>
                    <td><a href="javascript:;" id="cerrarpanelcuentabanco" title="Cerrar" class="btn btn-danger btn-mini pull-right"><i class="fa fa-remove"></i></a></td>
                </tr>
            </table>
        </div>
        <div class="modal-body panelbodycuentabanco">
        </div>
    </div>

    <div class="modal fade static" id="itemspanelcomprobante" style="display: none;">
        <div class="modal-header">
            <table border="0" width="100%" style="background-color: transparent">
                <tr>
                    <td style="width: 80%"><h4 class="paneltitlecomprobante">Subir Comprobante de Venta</h4></td>
                    <td><a href="javascript:;" id="cerrarpanelcomprobante" title="Cerrar" class="btn btn-danger btn-mini pull-right"><i class="fa fa-remove"></i></a></td>
                </tr>
            </table>
        </div>
        <div class="modal-body panelbodycomprobante">
        </div>
    </div>

    <div class="modal fade static" id="itemspanelaceptarrechazar" style="display: none;">
        <div class="modal-header">
            <table border="0" width="100%" style="background-color: transparent">
                <tr>
                    <td style="width: 80%"><h4 class="paneltitleaceptarrechazar">Aceptar/Rechazar Beca</h4></td>
                    <td><a href="javascript:;" id="cerrarpanelaceptarrechazar" title="Cerrar" class="btn btn-danger btn-mini pull-right"><i class="fa fa-remove"></i></a></td>
                </tr>
            </table>
        </div>
        <div class="modal-body panelbodyaceptarrechazar">
        </div>
    </div>

    <div class="modal fade static" id="itemspanelanularsolicitud" style="display: none;">
        <div class="modal-header">
            <table border="0" width="100%" style="background-color: transparent">
                <tr>
                    <td style="width: 80%"><h4 class="paneltitleanularsolicitud">Aceptar/Rechazar Beca</h4></td>
                    <td><a href="javascript:;" id="cerrarpanelanularsolicitud" title="Cerrar" class="btn btn-danger btn-mini pull-right"><i class="fa fa-remove"></i></a></td>
                </tr>
            </table>
        </div>
        <div class="modal-body panelbodyanularsolicitud">
        </div>
    </div>

    <div class="modal fade static" data-keyboard="false" id="itemspanelmostrardocumento" style="display: none;">
        <div class="modal-header">
            <h4 class="paneltitle">Mostrar documentos cargados</h4>
        </div>
        <div class="modal-body panelbodymostrardocumento">
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>

    <div class="modal fade static" data-keyboard="false" id="itemspanelmostrarcomprobante" style="display: none;">
        <div class="modal-header">
            <h4 class="paneltitle">Mostrar Comprobantes cargados</h4>
        </div>
        <div class="modal-body panelbodymostrarcomprobante" enovedad="">
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>

    <div class="modal fade static" id="itemspaneleditarcomprobante" style="display: none;">
        <div class="modal-header">
            <table border="0" width="100%" style="background-color: transparent;">
                <tr>
                    <td style="width: 80%"><h4 class="paneltitleeditcomprobante">Editar Revista</h4></td>
                </tr>
            </table>
        </div>
        <form id="formulario1" style="width: 100%; margin-bottom: 0px;padding-left: 15px;padding-top: 10px; padding-right: 15px; padding-bottom: 0px">
            <input type='hidden' name='action' value='editcomprobanteventa'/>
            <input type='hidden' id="idcomprobante" name='idcomprobante' value=''/>
            <div class="row-fluid panelbodyeditarcomprobante">
            </div>
        </form>
        <div class="modal-footer">
            <td id="aprobarcerrar2"><a href="javascript:;" idb="" class="btn btn-success actualizarcomprobante"> Actualizar</a></td>
            <a href="javascript:;" class="btn btn-danger cerrareditcomprobante">Cerrar</a>
        </div>
    </div>

    <div class="modal fade static" id="itemspanelnuevocomprobante" style="display: none;">
        <div class="modal-header">
            <table border="0" width="100%" style="background-color: transparent;">
                <tr>
                    <td style="width: 80%"><h4 class="paneltitlenuevocomprobante">Editar Revista</h4></td>
                </tr>
            </table>
        </div>
        <form id="formulario2" style="width: 100%; margin-bottom: 0px;padding-left: 15px;padding-top: 10px; padding-right: 15px; padding-bottom: 0px">
            <input type='hidden' name='action' value='agregarcomprobanteventa'/>
            <input type='hidden' name='idbeca' id="idbeca" value=''/>

            <div class="row-fluid panelbodynuevocomprobante">
            </div>
        </form>
        <div class="modal-footer">
            <td id="aprobarcerrar2"><a href="javascript:;" idb="" class="btn btn-success guardarcomprobante"> Guardar</a></td>
            <a href="javascript:;" class="btn btn-danger cerrarnuevocomprobante">Cerrar</a>
        </div>
    </div>


{% endblock %}