{% load sga_extras %}
<!DOCTYPE html>
<html lang="es" data-location="UNEMI">
<head>
    {#NOTIFICACIONES WEB#}
    {% if request.user.is_authenticated and persona.es_administrativo and permiteWebPush and persona.es_profesor %}
        <meta name="vapid-key" content="{{ vapid_key }}">
        <meta name="islogged" content="{{ request.user.username }}">
        <meta name="uslog" content="{% if request.session.user_anterior %}{{ request.session.user_anterior }}{% else %}false{% endif %}">
        {% load pwa %}
        {% progressive_web_app_meta_i %}
    {% endif %}
    {#NOTIFICACIONES WEB#}
    <meta charset="utf-8">
    <title>{% block pagetitle %}{{ title }}{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="UNEMI">
    <meta name="theme-color" content="#1C3247 ">
    <script src="/static/js/offline/v0.7.13/offline.min.js"></script>
    <link rel="stylesheet" href="/static/js/offline/v0.7.13/offline-theme-default.css"/>
    <link rel="stylesheet" href="/static/js/offline/v0.7.13/offline-language-spanish.css"/>
    <script type="text/javascript" src='/static/js/fontawesomev3.js?v=1.0.0'></script>
    {#    <link rel="stylesheet" href="/static/alerts.css?0.1">#}
    <link href="/static/picons-thin/style.css" rel="stylesheet">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4ZBWFH9X5W"></script>
    {#    <link rel="shortcut icon" href="/static/images/aok/favicon32X32.ico?1.6.0">#}
    <link rel="shortcut icon" type="image/x-icon" href="/static/logos/sgaplus_phone.svg">
    <style>
        /*MENU PRINCIPAL PANEL*/
        .pd {
            padding: 5px 15px 15px 15px;
        }

        .containerMenu {
            display: grid;
            grid-template-columns: repeat(12, [col-start] 1fr);
            grid-gap: 20px;
        }

        .containerMenu > * {
            grid-column: col-start / span 12;
        }

        .menuPanel {
            list-style: none;
            margin: 0em !important;
            padding: 0px !important;
            padding-left: 10px !important;
            padding-right: 10px !important;
            display: grid;
            grid-gap: 15px;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
        }

        .menuPanel > li {
            /*border: 1px solid #ffe066;*/
            border-radius: 5px;
            display: flex;
            flex-direction: column;
            background: #fff;
            border: 1px solid #e3e3e3;
            border: 0 1px 3px rgb(3 0 71 / 9%);
            border-radius: 15px 15px;
            vertical-align: middle;
            text-align: center;
        }

        .menuPanel > li:hover {
            /*background: #999;*/
            background: #9cb539;
            background: #13c2c2;
            background: #00cfdd;
            background: rgba(90, 141, 238, 0.15);
            color: white;
            color: #5a8dee;
            cursor: pointer;

            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            /*border: 2.5px solid #859a2f;*/
            /*background-image: linear-gradient(to bottom, #038fde , #20C997);*/
        }

        .menuPanel .iconimage {
            width: 100%;
            text-align: center;
            padding-top: 10px;
        }

        .menuPanel .iconimage img {
            height: 80px;
        }

        .menuPanel .iconname {
            font-weight: bold;
            width: 100%;
            /*position: absolute;*/
            bottom: 0;
            text-align: center;
            font-size: 14px;
            line-height: 10px;
        }

        .menuPanel .tituloicon {
            font-size: 15px;
            margin: 0;
            font-family: inherit;
            font-weight: bold !important;
            line-height: 20px;
            color: inherit;
            text-rendering: optimizelegibility;
        }

        .menuPanel .icondesc {
            font-weight: normal;
            font-size: 10px;
            line-height: 5px;
        }

        .containerFile {
            display: grid;
            grid-template-columns: repeat(12, [col-start] 1fr);
            grid-gap: 20px;
        }

        .containerFile > * {
            grid-column: col-start / span 12;
        }

        .menuFile {
            list-style: none;
            margin: 0em !important;
            padding: 0px !important;
            padding-left: 10px !important;
            padding-right: 10px !important;
            display: grid;
            grid-gap: 15px;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
        }

        .menuFile > li {
            /*border: 1px solid #ffe066;*/
            border-radius: 5px;
            display: flex;
            flex-direction: column;
            background: #fff;
            border: 1px solid #e3e3e3;
            border: 0 1px 3px rgb(3 0 71 / 9%);
            border-radius: 15px 15px;
            vertical-align: middle;
            text-align: center;
        }

        .menuFile > li:hover {
            /*background: #999;*/
            background: #9cb539;
            background: #13c2c2;
            background: #00cfdd;
            background: rgba(90, 141, 238, 0.15);
            color: white;
            color: #5a8dee;
            cursor: pointer;

            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            /*border: 2.5px solid #859a2f;*/
            /*background-image: linear-gradient(to bottom, #038fde , #20C997);*/
        }

        .menuFile .iconimage {
            width: 100%;
            text-align: center;
            padding-top: 10px;
        }

        .menuFile .iconimage img {
            height: 80px;
        }

        .menuFile .iconname {
            font-weight: bold;
            width: 100%;
            /*position: absolute;*/
            bottom: 0;
            text-align: center;
            font-size: 14px;
            line-height: 10px;
        }

        .menuFile .icondesc {
            font-weight: normal;
            font-size: 10px;
            line-height: 5px;
        }

        .subtitulo {
            font-size: 14px;
            line-height: 20px;
            color: rgb(0, 0, 24);
            margin: 0px 3px 0px 0px;
        {#text-overflow: ellipsis;#}{#overflow: hidden;#}{#white-space: nowrap;#}{#max-width: 56%;#}
        }

        @keyframes spinner-border {
            to {
                transform: rotate(360deg);
            }
        }

        .spinner-border {
            display: inline-block;
            width: 15rem;
            height: 15rem;
            vertical-align: text-bottom;
            border: 50px solid currentColor;
            border-right-color: transparent;
            border-radius: 50%;
            animation: spinner-border .75s linear infinite;
        }

        .spinner-border-sm {
            width: 15rem;
            height: 15rem;
            border-width: 50px;
        }

        @keyframes spinner-grow {
            0% {
                transform: scale(0);
            }
            50% {
                opacity: 1;
                transform: none;
            }
        }

        .spinner-grow {
            display: inline-block;
            width: 15rem;
            height: 15rem;
            vertical-align: text-bottom;
            border-radius: 50%;
            opacity: 66%;
            animation: spinner-grow .75s linear infinite;
        }

        .spinner-grow-sm {
            width: 15rem;
            height: 15rem;
        }

        .modal-body {
        {#max-height: calc(100vh - 190px);#} overflow-y: auto;
        }

        div.online-indicator {
            display: inline-block;
            width: 15px;
            height: 15px;
            margin-right: 10px;
            background-color: #0fcc45;
            border-radius: 50%;
            position: relative;
        }

        span.blink-online {
            display: block;
            width: 15px;
            height: 15px;
            background-color: #0fcc45;
            opacity: 0.7;
            border-radius: 50%;

            animation: blink 1s linear infinite;
        }

        div.offline-indicator {
            display: inline-block;
            width: 15px;
            height: 15px;
            margin-right: 10px;
            background-color: #ba2121;
            border-radius: 50%;
            position: relative;
        }

        span.blink-offline {
            display: block;
            width: 15px;
            height: 15px;
            background-color: #ba2121;
            opacity: 0.7;
            border-radius: 50%;
            animation: blink 1s linear infinite;
        }

        /*Animations*/

        @keyframes blink {
            100% {
                transform: scale(2, 2);
                opacity: 0;
            }
        }

        #page-loader .preloader-interior {
            display: block;
            position: relative;
            left: 50%;
            top: 50%;
            width: 150px;
            height: 150px;
            margin: -75px 0 0 -75px;
            border-radius: 50%;
            border: 3px solid transparent;
            border-top-color: #1C3247;

            -webkit-animation: spin 2s linear infinite; /* Chrome, Opera 15+, Safari 5+ */
            animation: spin 2s linear infinite; /* Chrome, Firefox 16+, IE 10+, Opera */
        }

        #page-loader .preloader-interior:before {
            content: "";
            position: absolute;
            top: 5px;
            left: 5px;
            right: 5px;
            bottom: 5px;
            border-radius: 50%;
            border: 3px solid transparent;
            border-top-color: #00501f;
            -webkit-animation: spin 3s linear infinite; /* Chrome, Opera 15+, Safari 5+ */
            animation: spin 3s linear infinite; /* Chrome, Firefox 16+, IE 10+, Opera */
        }

        #page-loader .preloader-interior:after {
            content: "";
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            bottom: 15px;
            border-radius: 50%;
            border: 3px solid transparent;
            border-top-color: #F8B334;

            -webkit-animation: spin 1.5s linear infinite; /* Chrome, Opera 15+, Safari 5+ */
            animation: spin 1.5s linear infinite; /* Chrome, Firefox 16+, IE 10+, Opera */
        }

        .avatar-offline {
            -webkit-filter: grayscale(100%);
            filter: grayscale(100%);
        }

        .backgrounmarcaagua {
            min-height: 80vh;
            background: url('/static/images/coverbalcon.png') no-repeat fixed;
            background-size: 260px;
            background-position: 98% 90%;
        }

        .normal-input {
            color: black;
            width: 100%;
            font-size: 12px;
            margin-bottom: 0;
            text-transform: initial;
        }

        .tablaBusquedaSearch td {
            padding-top: 8px;
            padding-bottom: 8px;
            padding-right: 3px;
            padding-left: 3px;
            line-height: 20px;
            text-align: left;
            vertical-align: top;
            border-top: 1px solid #ffffff;
        !important;
            border-left: transparent;
        }

        .tablaBusquedaSearch tbody tr.info:hover td {
            background-color: #F8F9F9 !important;
        }

        .tablaBusquedaSearch tbody tr.info td {
            background-color: transparent !important;
        }

        .tablaHoverOculto tbody tr.info:hover td {
            background-color: transparent !important;
        }
    </style>
    <link href="/static/sweet2/sweetalert2.css?1.0.3" rel="stylesheet"/>
    <script src="/static/sweet2/sweetalert2.js?1.0.1"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <link rel="stylesheet" href="/static/bootstrap4/fontawesome-free/css/all.min.css">
    <link rel="stylesheet" href="/static/bootstrap4/plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css">
    <link rel="stylesheet" href="/static/bootstrap4/plugins/icheck-bootstrap/icheck-bootstrap.min.css">
    <link rel="stylesheet" href="/static/bootstrap4/plugins/jqvmap/jqvmap.min.css">
    <link rel="stylesheet" href="/static/bootstrap4/dist/css/adminlte.min.css?0.2">
    <link href="/static/bootstrap4/stylesbs.css?2.1.2" rel='stylesheet'/>
    <link rel="stylesheet" href="/static/bootstrap4/plugins/overlayScrollbars/css/OverlayScrollbars.min.css">
    <link rel="stylesheet" href="/static/bootstrap4/plugins/daterangepicker/daterangepicker.css">
    <link rel="stylesheet" href="/static/bootstrap4/plugins/summernote/summernote-bs4.min.css">
    <link rel="stylesheet" href="/static/bootstrap4/plugins/bs-stepper/css/bs-stepper.min.css">
    <link href="/static/css/smoke.css?1.0.2" rel="stylesheet" type="text/css" media="screen"/>
    <script type='text/javascript' src="/static/js/smoke.js?1.0.2"></script>
    {#    <link rel="stylesheet" href="/static/fancybox/css/core.css"/>#}
    {#    <script src="/static/fancybox/js/core.js"></script>#}
    <script>
                localStorage.setItem("request_path", '{{ request.path }}');
    </script>
    <style>
        .border-left-3 {
            border-left: 3px solid #dee2e6;
        }
        .border-left-4 {
            border-left: 4px solid #dee2e6;
        }
        .nav-pills .nav-link.active,
        .show>.nav-pills .nav-link{
            background: #fe9900b0 !important
}
        .breadcrumb2 {
            padding: 12px 15px;
            margin: 0 0 20px;
            list-style: none;
            background-color: #f5f5f5;
            -webkit-border-radius: 4px;
            -moz-border-radius: 4px;
            border-radius: 4px
        }

        .breadcrumb2 > li {
            display: inline-block;
            *display: inline;
            text-shadow: 0 1px 0 #fff;
            *zoom: 1
        }

        .breadcrumb2 > li > .divider {
            padding: 0 5px;
            color: #ccc
        }

        .breadcrumb2 > .active {
            color: #999
        }

    </style>
</head>

<body class="layout-navbar-fixed layout-fixed control-sidebar-slide-open layout-footer-fixed sidebar-closed sidebar-collapse text-sm">

{% if not request.path in "'/loginsga', '/loginsagest', '/loginposgrado', '/loginpostulacion', '/alu_addremove_matricula/pregrado', '/alu_matricula/pregrado', '/alu_horarios', '/pro_horarios', '/alu_solicitudmatricula/especial', '/loginpostulate'" or  request.path == '/' %}
    {#    <div id="loading">#}
    {#        <div id="loading-center" style="opacity: 2 !important;">#}
    {#            <span class="spinner-grow spinner-border-lg" role="status" aria-hidden="true" style="width: 10rem; height: 10rem; background-color: #F8C471 ; color: #F8C471 ; !important"></span>#}
    {#        </div>#}
    {#    </div>#}
{% endif %}

{#BOOSTRAP4#}
<div class="wrapper">
    {% if not useModal %}
        <nav class="main-header navbar navbar-expand navbar-primary navbar-dark" style="border-bottom: 11px solid #fe9900;">
            {% if tipoentrada == 'SGA' %}
                <a class="navbar-brand" href="/">
                    <img src="/static/logos/sgaplus_white.svg" alt="" style="height: 40px;">
                </a>
            {% endif %}
            <!-- Left navbar links -->
            <ul class="navbar-nav" id="contenedorLogo">
                <li class="nav-item d-none d-sm-inline-block">
                    <a class="nav-link" style="color: #ffffff;" href="/" class="hidden-phone hidden-tablet visible-desktop">
                        {% if tipoentrada == 'SGA' %}
                            {#                            <span style="vertical-align: middle;"><span style=" font-weight: bold;">{{ tipoentrada }}</span> | Gestión Académica</span>#}
                        {% else %}
                            <span style="vertical-align: middle;"><span style=" font-weight: bold;">POSTULATE</span> | Sistema de Selección Postulate</span>
                        {% endif %}

                    </a>
                </li>
            </ul>
            <!-- Right navbar links -->
            <ul class="navbar-nav ml-auto">
                {% if not request.user.is_anonymous %}
                    <div class="pull-right hidden-phone hidden-tablet visible-desktop">
                        <ul class='navbar-nav ml-auto'>
                            {% if persona.tiene_notificaciones.postulate and tipoentrada == 'POSTULATE' %}
                                <!--<li class="divider-vertical"></li>-->
                                <ul class="nav">
                                    <li class="dropdown has_hover">
                                        <a style="height: 50px;" href="javascript:;" class="dropdown-toggle"
                                           data-toggle="dropdown">
                                            <i class="fa fa-bell fa-2x blinkimg" border=0></i>
                                            <sup style="top: -10px; left: -3px;"><label class="label label-warning" style="padding: 4px; font-size: 8px;line-height: 8px;">{{ persona.num_notificaciones.postulate }}</label></sup><b
                                                class="caret"></b>
                                        </a>
                                        <ul class="dropdown-menu pull-right">
                                            {% for notificacion in persona.notificaciones.postulate %}
                                                <li><a _href="{{ notificacion.url }}" id="{{ notificacion.id }}"
                                                       href="javascript:;" class="btn-form dropdown-item"><i
                                                        class="fa fa-exclamation-circle"></i> {{ notificacion.titulo }}</a>
                                                </li>
                                            {% empty %}
                                                <li><i class="fa fa-ticket"></i>No tiene ninguna notificación</li>
                                            {% endfor %}
                                            <li><a href="/notificacion" class="btn-form dropdown-item"><i class="fa fa-list"></i> Ver mis notificaciones</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            {% endif %}
                            {% if persona.usuario.is_superuser %}
                                <li class="nav-link has_hover">
                                    <a style="height: 50px; color: white" href='/unemi_2021_admin_desarrollo_' target="_blank" class="tb"
                                       title="Administrar Django"><i class="fa fa-cogs"></i></a>
                                </li>
                            {% endif %}
                            {% if not request.path == '/alu_solicitudcambioies' %}
                                <li class="nav-link has_hover">
                                <a style="height: 50px;" href="javascript:void(0);" class="viewProfile tb">
                                    {% if persona.foto %}
                                        <img src="{{ persona.foto.foto.url }}" onerror="this.onerror=null;this.src='/static/images/image.png'" width="25" height="25" class="gb_Da img-circle viewProfileIMG">
                                    {% else %}
                                        <img style="background-color: #FFFFFF" src="/static/images/iconos/{% if persona.sexo.id == 2 %}hombre.png{% else %}mujer.png{% endif %}" onerror="this.onerror=null;this.src='/static/images/image.png'" width="25" height="25" class="gb_Da img-circle viewProfileIMG">
                                    {% endif %}
                                </a>
                            </li>
                            {% endif %}
                        </ul>
                    </div>
                {% endif %}
            </ul>
            {#            </nav>#}
        </nav>
    {% endif %}
    <br>
    <div class="content-wrapper">
        <section class="content">
            <div class="container-fluid">
                {% if ruta and not useModal %}
                    <div class="row-fluid">
                        <div class="col-lg-12" style="width: 100%;">
                            <ul class="breadcrumb2" style="color: black">
                                {% for r in ruta %}
                                    <li>
                                        <span {% if not forloop.first %}class="hidden-phone hidden-tablet visible-desktop"{% endif %}>
                                            <a href="{{ r.0 }}" class="bloqueo_pantalla">{{ r.1 }}</a>
                                            <span class="divider">/</span>
                                        </span>
                                    </li>
                                {% endfor %}
                                <li style="float: right;" class="float-sm-right">
                                    <a style="float: right; !important" href="{% if ret %}{{ ret }}{% else %}{% block atras %}/{% endblock %}{% endif %}" class='btn btn-default btn-mini urlatrasbutton bloqueo_pantalla' id="urlatrasbutton"><span class="fa fa-arrow-left"></span> Atr&aacute;s</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                {% endif %}

                {% block canvas %}
                {% endblock %}
            </div>
        </section>
    </div>
    <style>
        .bg-footer {
            bottom: 0;
            position: fixed;
            right: 0;
            left: 0;
            z-index: 1030;
            margin-bottom: 0;
            overflow: visible;
            /*position: fixed;*/
            --bs-bg-opacity: 1;
            color: rgb(28, 50, 71);
            height: 31px;
            right: 0;
            left: 0;
            margin-bottom: 0;
            font-size: 13px;
            font-weight: 500;
            vertical-align: middle;
            padding-top: 7px;
            background-color: rgb(228, 237, 245) !important;
            clear: both;
        }
    </style>
    <div id="footer" class="bg-footer" style="text-align: center">
        <span class="mt-8"><b>{{ institucion }}</b> Todos los derechos reservados </span>
        <span id="ipcapturada"></span> {% if remotenameaddr %} - {{ remotenameaddr }}{% endif %}{% if server_response %} - S{{ server_response }}{% endif %}
        <div style="text-align: right; float: right">
            <a href="javascript:;" class="text-black" style="font-size: 18px;line-height: 18px;color:#222;!important; font-weight: bold" id="clock"></a> &nbsp;&nbsp;
        </div>
    </div>
    {% if not request.user.is_anonymous and not useModal %}
        <div class="panelProfile">
            <div class="panelProfile_pesonal_info">
                <div class="panelProfile_pesonal_info_image">
                    <a data-fancybox="image" rel="group" {% if persona.foto %}href="{{ persona.foto.foto.url }}" title="{{ persona }}"{% endif %}>
                        {% if persona.foto %}
                            <img src="{{ persona.foto.foto.url }}" onerror="this.onerror=null;this.src='/static/images/image.png'" class="img-circle profile_info_image">
                        {% else %}
                            <img src="/static/images/iconos/{% if persona.sexo.id == 2 %}hombre.png{% else %}mujer.png{% endif %}" onerror="this.onerror=null;this.src='/static/images/image.png'" class="img-circle profile_info_image">
                        {% endif %}
                    </a>
                </div>

                <div class="panelProfile_pesonal_manage_info">
                    <div><span class="label label-success">{{ perfilprincipal.tipo }}</span></div>
                    <strong>{{ persona.nombre_completo }}</strong>
                </div>
                <div class="panelProfile_pesonal_manage_email">
                    {{ persona.emailinst }}
                </div>
                {#            <div class="panelProfile_pesonal_manage_my_pass"><a href="/pass" class="btn btn-default btn-large"><i class="fa fa-lock"></i> Cambiar contraseña</a></div>#}
            </div>
            <div class="panelProfile_logout">
                <a href="javascript:void(0);" class="logoutuser tb btn btn-default btn-large"><i class="fa fa-power-off"></i> Cerrar Sesión</a>
            </div>
        </div>

    {% endif %}
</div>


{#    <div id="throbber" style="display:none; margin: 0 auto; width: 100px; height: 100px; background-color: #ffffff">#}
{#        <img src="/static/images/tigrillo_loader.gif"/>#}
{#    </div>#}
<div id="throbber" style="display: none">
    <center>
        <img src="/static/images/TIGRILLO_LOAD_3.gif" style=" margin: -110px;opacity: 0.5;"/>
    </center>
</div>

<div class="modal fade static" id="itemspanelbase" style="display: none;">
    <div class="modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable" role="document" id="wmodalbase">
        <div class="modal-content" style="border-radius: 17px!important;">
            <div class="modal-header">
                <h4><i class="fa fa-outdent" id="titleicon"></i> <b class="paneltitle-base"> FORMULARIO MODAL</b></h4>
                <button type="button" class="btn-close btn-cerrar-modal fs-5 cerrar" data-toggle="modal"
                        data-dismiss="modal" aria-label="Close">X
                </button>
            </div>
            <div class="modal-body p-0">
                <form class="form-horizontal form-modal" autocomplete="off" method="post"
                      enctype="multipart/form-data" action="{{ request.path }}">
                    {% csrf_token %}
                    <div class="panelbody-base m-3">
                    </div>
                </form>
            </div>
            <div class="modal-footer" id="footermodalbase">
                <button type="button" class="btn btn-default cerrar" data-bs-dismiss="modal" id="cerrar"><i
                        class="fa fa-times"></i> Cerrar
                </button>
            </div>
        </div>
    </div>
</div>
{#NOTIFICACIONES WEB#}

<!-- jQuery -->
<script src="/static/bootstrap4/plugins/jquery/jquery.min.js"></script>
<script src="/static/bootstrap4/plugins/jquery-ui/jquery-ui.min.js"></script>
<script>
    $.widget.bridge('uibutton', $.ui.button)
</script>
{#<link href="/static/selectmultiple/select2.min.css" rel="stylesheet">#}
{#<script src="/static/selectmultiple/select2.min.js"></script>#}
<script src="/static/bootstrap4/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/static/bootstrap4/plugins/sparklines/sparkline.js"></script>
<script src="/static/bootstrap4/plugins/jqvmap/jquery.vmap.min.js"></script>
<script src="/static/bootstrap4/plugins/jqvmap/maps/jquery.vmap.usa.js"></script>
<script src="/static/bootstrap4/plugins/jquery-knob/jquery.knob.min.js"></script>
<script src="/static/bootstrap4/plugins/moment/moment.min.js"></script>
<script src="/static/bootstrap4/plugins/daterangepicker/daterangepicker.js"></script>
<script src="/static/bootstrap4/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js"></script>
<script src="/static/bootstrap4/plugins/summernote/summernote-bs4.min.js"></script>
<script src="/static/bootstrap4/plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js"></script>
<script src="/static/bootstrap4/dist/js/adminlte.js"></script>
<script type='text/javascript' src="/static/bootstrap4/js/jquery.blockUI.js?v=2.71.0"></script>
{#<link rel="stylesheet" href="/static/bootstrap4/plugins/datatables-bs4/css/dataTables.bootstrap4.min.css">#}
{#<link rel="stylesheet" href="/static/bootstrap4/plugins/datatables-responsive/css/responsive.bootstrap4.min.css">#}
{#<link rel="stylesheet" href="/static/bootstrap4/plugins/datatables-buttons/css/buttons.bootstrap4.min.css">#}
{#<script src="/static/bootstrap4/plugins/datatables/jquery.dataTables.min.js"></script>#}
{#<script src="/static/bootstrap4/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>#}
{#<script src="/static/bootstrap4/plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>#}
{#<script src="/static/bootstrap4/plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>#}
{#<script src="/static/bootstrap4/plugins/datatables-buttons/js/dataTables.buttons.min.js"></script>#}
{#<script src="/static/bootstrap4/plugins/datatables-buttons/js/buttons.bootstrap4.min.js"></script>#}
{#<script src="/static/bootstrap4/plugins/datatables-buttons/js/buttons.html5.min.js"></script>#}
{#<script src="/static/bootstrap4/plugins/datatables-buttons/js/buttons.print.min.js"></script>#}
{#<script src="/static/bootstrap4/plugins/datatables-buttons/js/buttons.colVis.min.js"></script>#}
{#<script src="/static/django_select2/es.js"></script>#}
<link rel="stylesheet" href="/static/dropify/css/dropify.min.css">
<script src="/static/dropify/js/dropify.min.js"></script>
<script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());

    gtag('config', 'G-4ZBWFH9X5W');
</script>

<script type="text/javascript">

    $(document).ready(function () {
        $.fn.select2.defaults.set('language', 'es');
    });

    $(function () {
        var
            $online = $('.online'),
            $offline = $('.offline');

        Offline.on('confirmed-down', function () {
            //console.log("down");
            $(".signal_line").html("<div class='offline-indicator'> <span class='blink-offline'></span></div>")
            $online.fadeOut(function () {
                $offline.fadeIn();
            });
        });

        Offline.on('confirmed-up', function () {
            //console.log("up");
            $(".signal_line").html("<div class='online-indicator'> <span class='blink-online'></span></div>")
            $offline.fadeOut(function () {
                $online.fadeIn();
            });
        });

        {# });#}
        $(document).ready(function () {
            {#$(".fancybox").fancybox();#}
            $('[data-toggle="tooltip"]').tooltip();

            $('.imp-number, .imp-moneda, .imp-numbersmall, .imp-numbermed-right, .imp-numbermed-center, .nota').focus(function () {
                if (!parseFloat($(this).val())) {
                    $(this).val("");
                }
            });
        });

        $(".tl").tooltip({placement: "top"});
    });

    function eliminarajax(pk, nombre, accion, url = '{{ request.path }}', titulo = 'Estás por eliminar este registro') {
        Swal.fire({
            title: `${titulo}\n ${nombre}`,
            text: "Esta acción es irreversible",
            type: 'info',
            showCancelButton: true,
            allowOutsideClick: false,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Si, deseo hacerlo',
            cancelButtonText: 'Cancelar'
        }).then((result) => {
            if (result.value) {
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: url,
                    data: {action: accion, id: pk,},
                    success: function (data) {
                        $.unblockUI();
                        if (data.error) {
                            mensajeWarning(data.message);
                        } else {
                            location.reload();
                        }
                    },
                    error: function () {
                        setTimeout($.unblockUI, 1);
                        mensajeWarning("Error de conexión.");
                    },
                    dataType: "json"
                });
            } else {
            }
        })
    }

    function mensajeFlotante(tipo, mensaje) {
        Swal.fire({
            toast: false,
            position: 'center',
            icon: "info",
            type: 'info',
            title: mensaje,
            html: tipo,
            showConfirmButton: false
        });
    }

    function alertaSuccess(mensaje) {
        Swal.fire({
            toast: true,
            position: 'top-end',
            type: 'success',
            title: mensaje,
            showConfirmButton: false,
            timer: 1000
        })
    }

    function alertaWarning(mensaje) {
        Swal.fire({
            toast: true,
            position: 'top-end',
            type: 'warning',
            title: mensaje,
            showConfirmButton: false,
            timer: 1000
        })
    }

    function alertaDanger(mensaje) {
        Swal.fire({
            toast: true,
            position: 'top-end',
            type: 'error',
            title: mensaje,
            showConfirmButton: false,
            timer: 1000
        })
    }

    function mensajeSuccess(mensaje, titulo = '') {
        Swal.fire(titulo, mensaje, 'success')
    }

    function mensajeWarning(mensaje, titulo = '') {
        Swal.fire(titulo, mensaje, 'warning')
    }

    function mensajeDanger(mensaje, titulo = '') {
        Swal.fire(titulo, mensaje, 'error')
    }

    function mensajeInfo(mensaje, titulo = '') {
        Swal.fire(titulo, mensaje, 'info')
    }

    function formModalBase(id, text, action, args = '', dimension = 'modal-lg', footer = true, icon = 'fa fa-outdent') {
        bloqueointerface()
        $.ajax({
            type: "GET",
            url: `{{ request.path }}`,
            data: {'action': action, 'id': id, 'args': args},
            success: function (data) {
                $.unblockUI();
                footer ? $('#footermodalbase').hide() : $('#footermodalbase').show();
                $('#titleicon').removeClass().addClass(icon);
                $('#wmodalbase').removeClass('modal-lg modal-sm modal-xl modal-md modal-fullscreen').addClass(dimension);
                if (data.result === true) {
                    $('#itemspanelbase .panelbody-base').html(data.data);
                    $('#itemspanelbase .paneltitle-base').html(text.charAt(0).toUpperCase() + text.slice(1).toLowerCase());
                    $("#itemspanelbase").modal({backdrop: 'static'}).modal('show');
                } else {
                    mensajeDanger(data.mensaje);
                }
            },
            error: function () {
                $.unblockUI();
                mensajeDanger("Error de conexión.");
            },
            dataType: "json"
        });
    }
</script>
<link rel="stylesheet" href="/static/jgrowl/jgrowl.css" type="text/css"/>
<script type="text/javascript" src="/static/jgrowl/jgrowl.min.js"></script>
<script type="text/javascript">
    window.RTCPeerConnection = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection;   //compatibility for firefox and chrome
    var modalposition = 0;
    var mensaje = '';
    var capippriva = ''

    function converToAscii(str) {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toUpperCase();
    }

    $(function () {

        $('#periodoselectorall').select2();

        $('#accPeriodo').click(function () {
            $('#buscarPeriodo').val('');
            var listaPeriodos = $('#listaPeriodos').children('li').toArray();
            for (i = 1; i < listaPeriodos.length; i++) {
                var li = listaPeriodos[i];
                $(li).removeAttr('style');
            }
        });

        $('#buscarPeriodo').mouseenter(function () {
            $(this).focus();
        });

        $('#buscarPeriodo').keyup(function () {
            var listaPeriodos = $('#listaPeriodos').children('li').toArray();
            for (i = 1; i < listaPeriodos.length; i++) {
                var li = listaPeriodos[i];
                if (!converToAscii($(li).children('a:first').html()).includes(converToAscii($(this).val()))) {
                    $(li).attr('style', 'display:none');
                } else {
                    $(li).removeAttr('style');
                }
            }
        });

        if (!('contains' in String.prototype)) {
            String.prototype.contains = function (str, startIndex) {
                return -1 !== String.prototype.indexOf.call(this, str, startIndex);
            };
        }

        {#$("*").focusin(function () {#}
        {#    $('.datepicker').css({"display": "none"});#}
        {# });#}

        showWaiting = function (titulo, mensaje, close) {
            var panel = $("#waitpanel");
            $("#waitpaneltitle").html(titulo);
            $("#waitpanelbody").html(mensaje);
            if (!close) {
                panel.modal({keyboard: false, backdrop: 'static'});
            }
            panel.modal("show");
        };

        hideWaiting = function () {
            $("#waitpanel").modal("hide");
        };

        sinurlatrasbutton = function () {
            if (location.pathname == '/') {
                $("#urlatrasbutton").remove();
            } else {
                $("#idbuscador").remove();
            }
        };

        deshabilitar = function (nombre) {
            $(nombre).attr({"disabled": "disabled"});
        };

        habilitar = function (nombre) {
            $(nombre).removeAttr("disabled").removeAttr("readonly");
        };

        // Funcion de redondeo que reemplaza a la funcion math.round() de javascript por fallos al redondear
        redondeo = function (numero, presicion) {
            var multiplicador = Math.pow(10, presicion + 1);
            var num_multi = Math.floor(numero * multiplicador);
            var num_redondeado = (Math.round(num_multi / 10)) * 10 / multiplicador;

            if (num_redondeado == 0) {
                return 0;
            } else {
                if (!isNaN(num_redondeado))
                    return num_redondeado;
                else
                    return 0;
            }
        };


        openwindow_reporte = function (url, width, height) {
            newwindow = window.open(url, 'name', 'height=' + height + ' ,width=' + width);
        };

        openwindow = function (verb, url, data, target) {
            var form = document.createElement("form");
            form.action = url;
            form.method = verb;
            form.target = target || "_self";
            if (data) {
                for (var key in data) {
                    var input = document.createElement("textarea");
                    input.name = key;
                    input.value = typeof data[key] === "object" ? JSON.stringify(data[key]) : data[key];
                    form.appendChild(input);
                }
                var csrf = document.createElement("input");
                csrf.name = 'csrfmiddlewaretoken';
                csrf.value = '{{ csrf_token }}';
                form.appendChild(csrf);
            }
            form.style.display = 'none';
            document.body.appendChild(form);
            form.submit();
        };

        fechavalida = function (elemento) {
            var valor = elemento.val().toString();
            //Validate dd/mm/yyyy or dd-mm-yyyy format
            var dateformat = /^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/;
            // Match the date format through regular expression
            if (valor.match(dateformat)) {
                //Test which seperator is used '/' or '-'
                var opera1 = valor.split('/');
                var opera2 = valor.split('-');
                lopera1 = opera1.length;
                lopera2 = opera2.length;
                // Extract the string into month, date and year
                if (lopera1 > 1) {
                    var pdate = valor.split('/');
                } else if (lopera2 > 1) {
                    var pdate = valor.split('-');
                }
                var dd = parseInt(pdate[0]);
                var mm = parseInt(pdate[1]);
                var yy = parseInt(pdate[2]);
                // Create list of days of a month [assume there is no leap year by default]
                var ListofDays = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
                if (mm == 1 || mm > 2) {
                    if (dd > ListofDays[mm - 1]) {
                        //alert('Invalid date format!');
                        elemento.val(fechaactual());
                        return;
                    }
                }
                if (mm == 2) {
                    var lyear = false;
                    if ((!(yy % 4) && yy % 100) || !(yy % 400)) {
                        lyear = true;
                    }
                    if ((lyear == false) && (dd >= 29)) {
                        //alert('Invalid date format!');
                        elemento.val(fechaactual());
                        return;
                    }
                    if ((lyear == true) && (dd > 29)) {
                        //alert('Invalid date format!');
                        elemento.val(fechaactual());
                        return;
                    }
                }
            } else {
                //alert("Invalid date format!");
                elemento.val(fechaactual());
                return;
            }
            //return;
        };

        fechaactual = function () {
            var d = new Date();
            var month = d.getMonth() + 1;
            var day = d.getDate();
            var fecha = (day < 10 ? '0' : '') + day + '-' + (month < 10 ? '0' : '') + month + '-' + d.getFullYear();
            return fecha;
        };

        showMsgAlertModal = function (title, message, type) {
            $("#itemspanelmsgalertmodal .paneltitlemsgalertmodal").html(title);

            if ($("#itemspanelmsgalertmodal .msgtypealert").hasClass("alert alert-success"))
                $("#itemspanelmsgalertmodal .msgtypealert").removeClass("alert alert-success");
            else if ($("#itemspanelmsgalertmodal .msgtypealert").hasClass("alert alert-info"))
                $("#itemspanelmsgalertmodal .msgtypealert").removeClass("alert alert-info");
            else if ($("#itemspanelmsgalertmodal .msgtypealert").hasClass("alert alert-warning"))
                $("#itemspanelmsgalertmodal .msgtypealert").removeClass("alert alert-warning");
            else if ($("#itemspanelmsgalertmodal .msgtypealert").hasClass("alert alert-danger"))
                $("#itemspanelmsgalertmodal .msgtypealert").removeClass("alert alert-danger");

            if (type == 'success')
                $("#itemspanelmsgalertmodal .msgtypealert").addClass("alert alert-success");
            else if (type == 'info')
                $("#itemspanelmsgalertmodal .msgtypealert").addClass("alert alert-info");
            else if (type == 'warning')
                $("#itemspanelmsgalertmodal .msgtypealert").addClass("alert alert-warning");
            else if (type == 'danger')
                $("#itemspanelmsgalertmodal .msgtypealert").addClass("alert alert-danger");

            $("#itemspanelmsgalertmodal .msgtextalert").html(message);
            $("#itemspanelmsgalertmodal").modal({backdrop: 'static', width: '700px'}).modal('show');
        };

        closeMsgAlertModal = function () {
            $("#itemspanelmsgalertmodal").modal('hide');
        };

        showMsgConfirmationModal = function (title, message, type, positiveText, negativeText) {
            $("#itemspanelmsgconfirmationmodal .paneltitlemsgconfirmationmodal").html(title);

            if ($("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").hasClass("alert alert-success"))
                $("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").removeClass("alert alert-success");
            else if ($("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").hasClass("alert alert-info"))
                $("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").removeClass("alert alert-info");
            else if ($("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").hasClass("alert alert-warning"))
                $("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").removeClass("alert alert-warning");
            else if ($("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").hasClass("alert alert-danger"))
                $("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").removeClass("alert alert-danger");

            if (type == 'success')
                $("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").addClass("alert alert-success");
            else if (type == 'info')
                $("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").addClass("alert alert-info");
            else if (type == 'warning')
                $("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").addClass("alert alert-warning");
            else if (type == 'danger')
                $("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").addClass("alert alert-danger");

            $("#itemspanelmsgconfirmationmodal .msgtextconfirmation").html(message);
            $("#itemspanelmsgconfirmationmodal .btn-positive-cm").html(positiveText);
            $("#itemspanelmsgconfirmationmodal .btn-negative-cm").html(negativeText);
            $("#itemspanelmsgconfirmationmodal").modal({backdrop: 'static', width: '700px'}).modal('show');
        };

        closeMsgConfirmationModal = function () {
            $("#itemspanelmsgconfirmationmodal").modal('hide');
        };


        numerico = function (elemento, min, max, decimales) {
            var nvalor;
            var valor = elemento.val();
            if (valor == "") {
                valor = parseFloat(0).toFixed(decimales);
                elemento.val(valor);
                return;
            }
            if (isNaN(valor)) {
                nvalor = parseFloat(min).toFixed(decimales);
                elemento.val(nvalor);
                return;
            }
            if (valor < min) {
                nvalor = parseFloat(min).toFixed(decimales);
                elemento.val(nvalor);
                return;
            }
            if (max > 0 && valor > max) {
                nvalor = parseFloat(max).toFixed(decimales);
                elemento.val(nvalor);
                return;
            }
            nvalor = parseFloat(valor).toFixed(decimales);
            elemento.val(nvalor);
        };

        digitos = function (elemento) {
            var valor = elemento.val();
            if (valor == "") {
                elemento.val("");
                return;
            }
            if (isNaN(valor)) {
                elemento.val("");
                return;
            } else if (valor.indexOf("-") != -1 || valor.indexOf(".") != -1 || valor.indexOf(",") != -1) {
                elemento.val("");
                return;
            } else {
                elemento.val(valor.trim());
            }
        };

        validacionesnumericas = function () {
            $(".validarnumero").blur(function () {
                numerico($(this), 0, 0, 0);
            });

            $(".validarmoneda").blur(function () {
                numerico($(this), 0, 0, 2);
            });
        };

        sinurlatrasbutton();

        $(".listaperiodos").click(function () {
            $("#periodospanel").modal("show");
        });

        $("#cerrarperiodospanel").click(function () {
            $("#periodospanel").modal("hide");
        });

        cerrar_viewhtml = function () {
            $("#viewhtml").modal("hide");
        };

        $("#seleccionarperiodospanel").click(function () {
            var pid = $("#periodoselectorall").val();
            $("#periodospanel").modal("hide");
            bloqueointerface();
            $.ajax({
                type: "POST",
                url: "/",
                data: {'action': 'periodo', 'id': pid},
                success: function (data) {
                    if (data.result == 'ok') {
                        location.href = location.pathname;
                    } else {
                        $.unblockUI();
                        smoke.alert("Error al cambiar de periodo");
                    }
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error al cambiar de periodo");
                },
                dataType: "json"
            });
        });


        sleep = function (milliseconds) {
            var start = new Date().getTime();
            for (var i = 0; i < 1e7; i++) {
                if ((new Date().getTime() - start) > milliseconds) {
                    break;
                }
            }
        };

        {% if persona and check_session %}
            chequearsesion = function () {
                $.ajax({
                    type: "POST",
                    url: "/api",
                    data: {'a': 'checksession'},
                    success: function (data) {
                        if (data.result == 'ok') {
                            if (data.nuevasesion) {
                                bloqueointerface();
                                location.href = '/logout';
                            }
                        }
                    },
                    dataType: "json"
                });
            };

            setInterval(chequearsesion, 500000);
        {% endif %}


        bloqueointerface = function () {
            if (!$(".blockUI").length) {
                $.blockUI({
                    message: '<span class="spinner-grow spinner-border-lg" role="status" aria-hidden="true" style="width: 10rem; height: 10rem; background-color: #F8C471 ; color: #F8C471 ; !important"</span>',
                    css: {
                        backgroundColor: 'transparent',
                        border: '0',
                        zIndex: 9999999
                    },
                    overlayCSS: {
                        backgroundColor: '#fff',
                        opacity: 0.8,
                        zIndex: 9999990
                    }
                });
            }
        };

        bloqueointerface2 = function () {
            if (!$(".blockUI").length) {
                $.blockUI({
                    message: $('#throbber'),
                    css: {
                        backgroundColor: 'transparent',
                        border: '0',
                        zIndex: 9999999
                    },
                    overlayCSS: {
                        backgroundColor: '#fff',
                        opacity: 0.8,
                        zIndex: 9999990
                    }
                });
            }
        };

        function getPromise(url, params) {
            return new Promise(resolve => {
                //$.get(url, {data: JSON.stringify(params)}, function (data) {
                $.get(url, params, function (data) {
                    resolve(data);
                }, 'json');
            });
        }

        function postPromise(url, action, params) {
            return new Promise(resolve => {
                $.post(url, {
                    'action': action,
                    'csrfmiddlewaretoken': '{{ csrf_token }}',
                    data: JSON.stringify(params)
                }, function (data) {
                    resolve(data);
                }, 'json');
            });
        }

        {% if persona %}
            var check_logout;

            logout = function () {
                bloqueointerface();
                localStorage.clear();
                $.ajax({
                    type: "POST",
                    url: "/api",
                    data: {'a': 'logout'},
                    success: function (data) {
                        if (data.result == 'ok') {
                            location.href = data.url;
                        } else {
                            logout();
                        }
                    },
                    error: function () {
                        logout();
                    },
                    dataType: "json"
                });
            };

            $('.logoutuser').click(function () {
                logout();
            });
            {% comment %}
                window.onload = function () {
                    sysend.on('sga', function (obj) {
                        if (obj.message == 'check') {
                            if (window.name.length > 0) {
                                localStorage.setItem('windowid', window.name);
                                sysend.broadcast('sga', {message: 'set'});
                            }
                        }
                        if (obj.message == 'set') {
                            if (window.name.length == 0) {
                                var windowid = localStorage.getItem('windowid');
                                localStorage.removeItem('windowid');
                                $.unblockUI();
                                if (windowid) {
                                    window.name = windowid;
                                    clearInterval(check_logout);
                                }
                            }
                        }
                    });

                    var sessionid = localStorage.getItem('sessionid');
                    if (sessionid) {
                        if (window.name != sessionid) {
                            $.blockUI({message: null});
                            sysend.broadcast('sga', {message: 'check'});
                            check_logout = setInterval(logout, 1000);
                        }
                    } else {
                        bloqueointerface();
                        logout();
                    }
                };
            {% endcomment %}
        {% endif %}

        serverdate = new Date({{ currenttime.year }}, {{ currenttime.month }}-1, {{ currenttime.day }}, {{ currenttime.hour }}, {{ currenttime.minute }}, {{ currenttime.second }}, 0);
        clientdate = new Date();

        showTime = function () {
            var m;
            var today = new Date();
            var timediff = today - clientdate;
            var renderdate = new Date(serverdate.getTime() + timediff);
            var h = renderdate.getHours();
            var mer = " AM";
            if (h > 12) {
                mer = " PM";
                h -= 12;
            }
            m = renderdate.getMinutes();
            m = checkTime(m);
            $("#clock").text(h + ":" + m + mer);
        };

        checkTime = function (i) {
            if (i < 10) {
                i = "0" + i;
            }
            return i;
        };

        setInterval(showTime, 15000);

        showTime();

        $('.dropdown-toggle').dropdown();
        $(".collapse").collapse();
        $('.tips').tooltip({});

        $(".periodoselector").click(function () {
            var pid = $(this).attr('pid');
            bloqueointerface();
            $.ajax({
                type: "POST",
                url: "/",
                data: {'action': 'periodo', 'id': pid},
                success: function (data) {
                    if (data.result == 'ok') {
                        location.href = location.pathname;
                    } else {
                        $.unblockUI();
                        smoke.alert("Error al cambiar de periodo");
                    }
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error al cambiar de periodo");
                },
                dataType: "json"
            });
        });

        $("#id_email, #id_emailinst, #id_correoinstasoc, #id_correoinst").css({'text-transform': 'none'});

        $("table tbody tr").hover(function () {
            $(this).addClass("info");
        }, function () {
            $(this).removeClass("info");
        });

        {#$(".btn-form").click(function () {#}
        {#    bloqueointerface();#}
        {# });#}

        $(".bloqueo_pantalla").click(function () {
            bloqueointerface();
        });

        if (typeof String.prototype.startsWith != 'function') {
            String.prototype.startsWith = function (str) {
                return this.indexOf(str) == 0;
            };
        }

        if (typeof String.prototype.endsWith != 'function') {
            String.prototype.endsWith = function (str) {
                return this.slice(-str.length) == str;
            };
        }

        abrir_reporte = function () {
            var href = $(this).attr('nhref');
            var tipos = $(this).attr('tipos');
            if (!tipos) {
                tipos = "pdf, xls, csv, doc";
            }
            if (tipos.contains("pdf")) {
                $("#formatopdf").removeAttr("hidden");
            } else {
                $("#formatopdf").attr({"hidden": "hidden"});
            }
            if (tipos.contains("doc")) {
                $("#formatodoc").removeAttr("hidden");
            } else {
                $("#formatodoc").attr({"hidden": "hidden"});
            }
            if (tipos.contains("xls")) {
                $("#formatoxls").removeAttr("hidden");
            } else {
                $("#formatoxls").attr({"hidden": "hidden"});
            }
            if (tipos.contains("csv")) {
                $("#formatocsv").removeAttr("hidden");
            } else {
                $("#formatocsv").attr({"hidden": "hidden"});
            }
            if (tipos.length > 4) {
                primero = $("#formatoreporte_formato").find("option:first").val();
                $("#formatoreporte_formato").val(primero);
                $('#formatoreporte').modal({'width': '400'}).modal('show');
                $('#formatoreporte_run').attr('nhref', href);
            } else {
                primero = $("#formatoreporte_formato").find("option:first").val();
                $("#formatoreporte_formato").val(primero);
                ejecutar_reporte_directo(href);

            }

        };

        cerrar_reporte = function () {
            $('#formatoreporte').modal('hide');
        };

        ejecutar_reporte_directo = function (ruta) {
            var href = ruta;
            $('#formatoreporte').modal('hide');
            var formato = $('#formatoreporte_formato').val();
            var formato_final = '';
            if (formato == 0) {
                formato_final = '&rt=pdf';
            } else if (formato == 1) {
                formato_final = '&rt=docx';
            } else if (formato == 2) {
                formato_final = '&rt=xlsx';
            } else if (formato == 3) {
                formato_final = '&rt=csv';
            }
            bloqueointerface();
            var report_url = href + formato_final;
            $.ajax({
                type: "POST",
                url: report_url,
                success: function (data) {
                    $.unblockUI();
                    if (data.result == 'ok') {
                        if (data.es_background) {
                            Swal.fire({
                                title: `NOTIFICACIÓN`,
                                text: data.r,
                                type: 'success',
                                icon: 'success',
                                showCancelButton: false,
                                allowOutsideClick: false,
                                confirmButtonColor: '#3085d6',
                                cancelButtonColor: '#d33',
                                confirmButtonText: 'Aceptar',
                                cancelButtonText: 'No, cancelar'
                            }).then((result) => {

                            }).catch(error => {
                                Swal.fire({
                                    toast: false,
                                    position: 'center',
                                    icon: 'error',
                                    type: 'error',
                                    title: 'Notificación',
                                    text: error.message,
                                    showConfirmButton: false,
                                    timer: 6000
                                });
                            });
                        } else {
                            if (formato == 0) {
                                openwindow_reporte(location.origin + data.reportfile, 800, 500);
                            } else {
                                location.href = location.origin + data.reportfile;
                            }
                        }
                    } else {
                        Swal.fire({
                            toast: false,
                            position: 'center',
                            icon: 'error',
                            type: 'error',
                            title: 'Reporte',
                            text: data.mensaje,
                            showConfirmButton: false,
                            timer: 6000
                        });
                        //NotificationJG.error(data.mensaje, "Reporte")
                    }
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error al generar el reporte");
                },
                dataType: "json"
            });
        };

        ejecutar_reporte = function () {
            var href = $(this).attr('nhref');
            $('#formatoreporte').modal('hide');
            var formato = $('#formatoreporte_formato').val();
            var formato_final = '';
            if (formato == 0) {
                formato_final = '&rt=pdf';
            } else if (formato == 1) {
                formato_final = '&rt=docx';
            } else if (formato == 2) {
                formato_final = '&rt=xlsx';
            } else if (formato == 3) {
                formato_final = '&rt=csv';
            }
            bloqueointerface();
            var report_url = href + formato_final;
            {#alert(report_url);#}
            $.ajax({
                type: "POST",
                url: report_url,
                success: function (data) {
                    $.unblockUI();
                    if (data.result == 'ok') {
                        if (formato == 0) {
                            openwindow_reporte(location.origin + data.reportfile, 800, 500);
                        } else {
                            location.href = location.origin + data.reportfile;
                        }
                    } else {
                        smoke.alert("Error al generar el reporte");
                    }
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error al generar el reporte");
                },
                dataType: "json"
            });
        };

        {% if messages %}
            {% for message in messages %}
                {% if message.tags == 'success' %}
                    mensajeSuccess('{{ message }}');
                {% elif message.tags == 'info' %}
                    mensajeWarning('{{ message }}');
                {% elif message.tags == 'warning' %}
                    mensajeWarning('{{ message }}');
                {% elif message.tags == 'error' %}
                    mensajeDanger('{{ message }}');
                {% endif %}
                {#Swal.fire('{{ message }}', 'Advertencia', '{{ message.tags }}');#}
            {% endfor %}
        {% endif %}

        {% if mensj or info %}
            //smoke.alert('{{ mensj }}{{ info }}');
            NotificationJG.warning('{{ mensj }}{{ info }}', 'Advertencia!', 10000);
        {% endif %}

        conectar_confirmacion = function () {
            var href = $(this).attr('nhref');
            bloqueointerface();
            $.ajax({
                type: "GET",
                url: href,
                success: function (data) {
                    $.unblockUI();
                    if (data.search('"' + 'ajaxconfirmaciondinamicbs' + '"') >= 0) {
                        $("#confirmacionmodal").html(data);
                        $('#confirmacionmodal').modal({'width': '650'}).modal('show');
                    } else {
                        smoke.alert("Error de conexión.");
                    }
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error de conexión.");
                },
                dataType: "html"
            });
        };

        conectar_eliminacion = function () {
            var href = $(this).attr('nhref');
            bloqueointerface();
            $.ajax({
                type: "GET",
                url: href,
                success: function (data) {
                    $.unblockUI();
                    if (data.search('"' + 'ajaxdeletedinamicbs' + '"') >= 0) {
                        $("#eliminacionmodal").html(data);
                        $('#eliminacionmodal').modal({'width': '650'}).modal('show');
                    } else {
                        smoke.alert("Error de conexión.");
                    }
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error de conexión.");
                },
                dataType: "html"
            });
        };

        conectar_viewhtml = function () {
            var href = $(this).attr('nhref');
            bloqueointerface();
            $.ajax({
                type: "GET",
                url: href,
                success: function (data) {
                    $.unblockUI();
                    if (data.search('"' + 'ajaxconfirmaciondinamicbs' + '"') >= 0) {
                        $("#viewhtml").html(data);
                        $('#viewhtml').modal({'width': '650'}).modal('show');
                        $('.cerrarviewhtml').bind('click.cerrar_viewhtml', cerrar_viewhtml);
                    } else {
                        smoke.alert("Error de conexión.");
                    }
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error de conexión.");
                },
                dataType: "html"
            });
        };


        $('.confirmacionmodal').bind('click.conectar_confirmacion', conectar_confirmacion);
        $('.viewhtml').bind('click.conectar_viewhtml', conectar_viewhtml);
        $('.eliminacionmodal').bind('click.conectar_eliminacion', conectar_eliminacion);
        $(".reportedirecto").bind("click.conectar_reporte", abrir_reporte);
        $("#formatoreporte_run").bind("click.ejecutar_reporte", ejecutar_reporte);
        $("#formatoreporte_close").bind("click.cerrar_reporte", cerrar_reporte);

        conectar_reporte = function () {
            $(".reportedirecto").unbind("click.conectar_reporte");
            $(".reportedirecto").bind("click.conectar_reporte", abrir_reporte);
        };

        tooltips = function () {
            $(".tl").tooltip({placement: "left"});
            $(".tr").tooltip({placement: "right"});
            $(".tu").tooltip({placement: "top"});
            $(".tb").tooltip({placement: "bottom"});
        };

        tooltips();

        $('.selectorfecha').keypress(function () {
            return false;
        });

        history.pushState(null, null, location.href);
        window.addEventListener('popstate', function (event) {
            history.pushState(null, null, location.href);
        });

        actualizarnumerico = function () {
            $('.imp-number[decimal], .imp-moneda[decimal], .imp-numbersmall[decimal], .imp-numbermed-right[decimal], .imp-numbermed-center[decimal], .nota[decimal]').each(function () {
                numerico($(this), 0, 0, $(this).attr('decimal'));
            })
        };

        escapeHTMLEncode = function (str) {
            var div = document.createElement('div');
            var text = document.createTextNode(str);
            div.appendChild(text);
            return div.innerHTML;
        };

        actualizarnumerico();

        $('.imp-number, .imp-moneda, .imp-numbersmall, .imp-numbermed-right, .imp-numbermed-center, .nota').focus(function () {
            if (!parseFloat($(this).val())) {
                $(this).val("");
            }
        });

        $('.selectorfecha').keypress(function () {
            return false;
        });

        tipo_formulario = function (elemento) {
            if (elemento.attr('formtype') == 'form-vertical') {
                elemento.find(".control-label").css({'float': 'none'});
                elemento.find(".label-text").css({'text-align': 'left'});
                elemento.find(".control-label").each(function () {
                    var contenedor = parseFloat($(this).parent().css('width')) - 5;
                    $(this).css({'width': contenedor.toString() + 'px'});
                });
                elemento.find(".control").each(function () {
                    var contenedor = parseFloat($(this).parent().css('width')) - 5;
                    $(this).css({'width': contenedor.toString() + 'px'});
                });

            } else {
                elemento.find(".control-label").css({'float': 'left'});
                elemento.find(".label-text").css({'text-align': 'right'});
                if (elemento.hasClass('form-modal')) {
                    elemento.find(".control-group").each(function () {
                        var contenedor = parseFloat($(this).parent().width());
                        var porciento = (parseFloat($(this).width()) / 100);
                        var tam = parseInt(contenedor * porciento);
                        $(this).css({'width': tam});
                    });
                }
                elemento.find(".control-label").each(function () {
                    if ($(this).attr('labelwidth')) {
                        $(this).css({'width': $(this).attr('labelwidth')});
                    } else {
                        $(this).css({'width': '160px'});
                    }
                });
                elemento.find(".control").each(function () {
                    var contenedor = $(this).parent().width();
                    var label = parseFloat($(this).parent().find('.control-label').width());
                    $(this).css({'width': ((contenedor - label) - 20).toString() + 'px'});
                });
            }
            elemento.find(".select2").css({'width': '100%'});
        };
        pop_lista = function (arr, item) {
            for (var i = arr.length; i--;) {
                if (arr[i] === item) {
                    arr.splice(i, 1);
                }
            }
        };


        $('.viewNotification_b').click(function () {
            var id = $(this).attr('id');
            var _href = $(this).attr('_href');
            bloqueointerface();
            $.ajax({
                type: "POST",
                url: "/notificacion",
                data: {'action': 'ViewedNotification', 'id': id},
                success: function (data) {
                    $.unblockUI();
                    if (data.result == 'ok') {
                        window.location.href = _href;
                    } else {
                        smoke.alert(data.mensaje);
                    }
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error de conexión.");
                },
                dataType: "json"
            });
        });

        $(".action_view_change_profile").click(function () {
            $("#modalPerfilChangeMobile").modal({backdrop: 'static', width: '100%'}).modal('show');
        });

        $(".btn-cerrar", $("#modalPerfilChangeMobile")).click(function () {
            $("#modalPerfilChangeMobile").modal('hide');
        });

        $(".action_change_mobile", $("#modalPerfilChangeMobile")).click(function () {
            let nhref = $(this).attr('nhref');
            bloqueointerface();
            location.href = nhref;
        });

    });


    //aqui entra
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = jQuery.trim(cookies[i]);
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }

    var csrftoken = getCookie('csrftoken');

    function csrfSafeMethod(method) {
        return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
    }

    $.ajaxSetup({
        beforeSend: function (xhr, settings) {
            if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                xhr.setRequestHeader("X-CSRFToken", csrftoken);
            }
        }
    });
</script>
<script type="text/javascript">

    $.extend(true, $.jGrowl.defaults, {
        pool: 5,
        closerTemplate: '<div>[Cerrar todas]</div>',
        closer: function () {
        },
        log: function (e, m, o) {
            //$('#logs').append("<div><strong>#" + $(e).attr('id') + "</strong> <em>" + (new Date()).getTime() + "</em>: " + m + " (" + o.theme + ")</div>")
        }

    });

    NotificationJG = {
        success: function (msg, header/*=undefined*/, ttime/*=5000*/) {
            $.jGrowl(msg, {
                theme: 'growl-success',
                header: (header == 'undefined') ? 'Mensaje!' : header,
                life: ttime,
                closeTemplate: ''
            });
        },
        error: function (msg, header/*=undefined*/, ttime/*=5000*/) {
            $.jGrowl(msg, {
                theme: 'growl-error',
                header: (header == 'undefined') ? 'Mensaje!' : header,
                life: ttime,
                closeTemplate: ''
            });
        },
        warning: function (msg, header/*=undefined*/, ttime/*=5000*/) {
            $.jGrowl(msg, {
                theme: 'growl-warning',
                header: (header == 'undefined') ? 'Mensaje!' : header,
                life: ttime,
                closeTemplate: ''
            });
        },
        info: function (msg, header/*=undefined*/, ttime/*=5000*/) {
            $.jGrowl(msg, {
                theme: 'growl-info',
                header: (header == 'undefined') ? 'Mensaje!' : header,
                life: ttime,
                closeTemplate: ''
            });
        }
    };

    Confirm = {
        question: function (question, fun_yes/*=null*/, fun_no/*=null*/) {
            var $popup = $('#modalConfirm');

            $popup.modal({backdrop: 'static', keyboard: false}).modal('show');

            $('.modal-body p', $popup).html(question);

            $('.action_yes', $popup).off('click').on('click', function () {
                if (typeof fun_yes != 'undefined') {
                    fun_yes();
                }
                $popup.modal('hide');
            });

            $('.action_not', $popup).off('click').on('click', function () {
                if (typeof fun_no != 'undefined') {
                    fun_no();
                }
                $popup.modal('hide');
            });
        },
        ajax: function (aData, fun_yes/*=null*/, fun_no/*=null*/) {
            var d = {"action": "deleteView"}
            $.each(aData, function (index, value) {
                d[index] = value
            });
            aData = d
            bloqueointerface();
            var $popup = $('#modalConfirmAjax');
            $.ajax({
                type: "GET",
                url: "/data",
                data: aData,
                success: function (data) {
                    if (data.result == 'ok') {
                        $('.modal-body', $popup).html(data.html);
                        var h = $(window).height() - 350;
                        $popup.modal({backdrop: 'static', keyboard: false, width: "60%", height: h}).modal('show');
                        $('.action_yes', $popup).off('click').on('click', function () {
                            if (typeof fun_yes != 'undefined') {
                                fun_yes();
                            }
                            $popup.modal('hide');
                        });

                        $('.action_not', $popup).off('click').on('click', function () {
                            if (typeof fun_no != 'undefined') {
                                fun_no();
                            }
                            $popup.modal('hide');
                        });
                    } else {
                        NotificationJG.error(data.mensaje);
                    }
                    $.unblockUI();
                },
                error: function () {
                    $.unblockUI();
                    NotificationJG.error("Error al enviar los datos.");
                },
                dataType: "json",
            });
        },

    };
    $(function () {
        $(document).ready(function () {

            {% if persona.tiene_notificaciones.sga and tipoentrada == 'SGA' %}
                var num_notificaciones = {{ persona.num_notificaciones.sga }}
                {% if persona.num_notificaciones.sga > 1 %}
                    var msg = `Tiene ${num_notificaciones} notificaciones`;
                {% else %}
                    var msg = `Tiene ${num_notificaciones} notificación`;
                {% endif %}
                NotificationJG.info(msg, "SGA");
            {% endif %}
            {% if persona.tiene_notificaciones.sagest and tipoentrada == 'SAGEST'%}
                var num_notificaciones = {{ persona.num_notificaciones.sagest }}
                {% if persona.num_notificaciones.sagest > 1 %}
                    var msg = `Tiene ${num_notificaciones} notificaciones`;
                {% else %}
                    var msg = `Tiene ${num_notificaciones} notificación`;
                {% endif %}
                NotificationJG.info(msg, "SAGEST");
            {% endif %}

            {% for notificacion in  notificaciones %}
                {% if notificacion.type == 'error' %}
                    NotificationJG.error("{{ notificacion.body  }}", "{{ notificacion.title }}");
                {% endif %}
                {% if notificacion.type == 'succes' %}
                    NotificationJG.success("{{ notificacion.body  }}", "{{ notificacion.title }}");
                {% endif %}
                {% if notificacion.type == 'warning' %}
                    NotificationJG.warning("{{ notificacion.body  }}", "{{ notificacion.title }}");
                {% endif %}
                {% if notificacion.type == 'info' %}
                    NotificationJG.info("{{ notificacion.body  }}", "{{ notificacion.title }}");
                {% endif %}
            {% endfor %}
            //99
            {% if periodo.id == 99 and persona.tiene_encuesta_pendiente_google and perfilprincipal.es_estudiante %}
                //console.log(Date.now() >= Date.parse("2021/03/11") && Date.now() <= Date.parse("2021/03/23"));
                if (Date.now() >= Date.parse("2021/03/11") && Date.now() <= Date.parse("2021/03/23")) {
                    var banderaForm = 0;
                    $('#encuestaGoogleModal')
                        .off('shown.bs.modal')
                        .on('shown.bs.modal', function () {
                            $('#formsGoogleDocs').on('load', function () {
                                if (banderaForm == 1) {
                                    bloqueointerface();
                                    id_persona = {{ persona.id }}
                                        $.ajax({
                                            type: "POST",
                                            url: "/",
                                            data: {'action': 'RegisterPoll', 'id': id_persona},
                                            success: function (data) {
                                                $.unblockUI();
                                                if (data.result == 'ok') {
                                                    $('#encuestaGoogleModal').modal('hide');
                                                    banderaForm = 0;
                                                    NotificationJG.success("Realizo la encuesta, correctamente", "SGA");
                                                } else {
                                                    smoke.alert(data.mensaje);
                                                }
                                            },
                                            error: function () {
                                                $.unblockUI();
                                                smoke.alert("Error de conexión.");
                                            },
                                            dataType: "json"
                                        });

                                } else {
                                    banderaForm = 1;
                                }
                            });

                        })
                        .modal('show');
                }
            {% endif %}

            $(".viewProfile").click(function () {
                var panelProfile = $(".panelProfile");
                if (panelProfile.css('display') == 'none') {
                    // Acción si el elemento no es visible
                    panelProfile.css('display', 'block');

                    //$( ".panelProfile >[img]" ).css('border', '5px #cb8a4f !important;')
                    //panelProfile.addClass('has_active');

                } else {
                    // Acción si el elemento es visible
                    panelProfile.css('display', 'none');
                    //panelProfile.removeClass('has_active')
                }
            });

            $(".viewPeriodosAcademicos").click(function () {
                var panelPeriodosAcademicos = $(".panelPeriodosAcademicos");
                if (panelPeriodosAcademicos.css('display') == 'none') {
                    // Acción si el elemento no es visible
                    panelPeriodosAcademicos.css('display', 'block');
                    //panelProfile.addClass('has_active');

                } else {
                    // Acción si el elemento es visible
                    panelPeriodosAcademicos.css('display', 'none');
                }
            });

            $(document).on("click", function (e) {
                var panelProfile = $(".panelProfile");
                var viewProfile = $(".viewProfile");
                var viewPeriodosAcademicos = $(".viewPeriodosAcademicos");
                var panelPeriodosAcademicos = $(".panelPeriodosAcademicos");
                if (!panelProfile.is(e.target) && panelProfile.has(e.target).length === 0 && !viewProfile.is(e.target) && viewProfile.has(e.target).length === 0) {
                    //console.log("entro a super");
                    if (panelProfile.css('display') == 'block') {
                        //Acción si el elemento no es visible
                        panelProfile.css('display', 'none');
                        //panelProfile.removeClass('has_active');
                    }
                }

                if (!panelPeriodosAcademicos.is(e.target) && panelPeriodosAcademicos.has(e.target).length === 0 && !viewPeriodosAcademicos.is(e.target) && viewPeriodosAcademicos.has(e.target).length === 0) {
                    //console.log("entro a super");
                    if (panelPeriodosAcademicos.css('display') == 'block') {
                        //Acción si el elemento no es visible
                        panelPeriodosAcademicos.css('display', 'none');
                    }
                }

            });
            /*$('[data-toggle="popover"]').popover({
                placement: 'left',
                trigger: 'hover'
            });*/

            $('.action_info_menu_admin').popover({
                placement: 'left',
                html: true,
                trigger: 'hover',
                delay: {
                    show: "1",
                    hide: "100"
                }
            }).on('shown.bs.popover', function () {
                setTimeout(function () {
                    $('.action_info_menu_admin').popover('hide');
                }, 1000);
            });


        });
    });
</script>
<script>
    function openNav() {
        document.getElementById("sideNavigation").style.width = "250px";
        document.getElementById("app").style.marginLeft = "250px";
        //document.getElementById("contenedorLogo").style.display = 'none';
        document.getElementById("contenedorLogo").style.paddingLeft = '240px';
        //$("#contenedorLogo").style("padding-left", '240px');
        var x = document.getElementById("contenedorLogo").firstElementChild;
        x.style.display = 'none';
    }

    function closeNav() {
        document.getElementById("sideNavigation").style.width = "0";
        document.getElementById("app").style.marginLeft = "0";
        //document.getElementById("contenedorLogo").style.display = 'block';
        document.getElementById("contenedorLogo").style.paddingLeft = '0px';
        var x = document.getElementById("contenedorLogo").firstElementChild;
        x.style.display = 'block';
        //$("#contenedorLogo").style("padding-left", '0px');
    }

    function irArriba() {
        //console.log("arrr")
        $('.ir-arriba').click(function () {
            $('body,html').animate({scrollTop: '0px'}, 1000);
        });
        $(window).scroll(function () {
            if ($(this).scrollTop() > 0) {
                $('.ir-arriba').slideDown(600);
            } else {
                $('.ir-arriba').slideUp(600);
            }
        });
        $('.ir-abajo').click(function () {
            $('body,html').animate({scrollTop: '1000px'}, 1000);
        });
    }

    $(document).ready(function () {
        irArriba();
    });
</script>
<script>
    $(window).on("load", (function () {
        setTimeout(function () {
            jQuery('#loading').fadeOut(100);
        }, 100);
    }));

    $(document).ready(function () {
        $.fn.select2.defaults.set('language', 'es');
    });

</script>

<!-- Datatable -->
<link rel="stylesheet" href="/static/datatables/datatables.css">
<script src="/static/datatables/datatables.js?0.1"></script>
<link rel="stylesheet" href="/static/datatables/html2canvas.min.js">
<link rel="stylesheet" href="/static/datatables/responsive.bootstrap.min.css">
<script src="/static/datatables/dataTables.responsive.min.js"></script>
<script src="/static/datatables/responsive.bootstrap.min.js"></script>
<link rel="stylesheet" href="/static/datatables/dataTables.bootstrap.min.css">
<link rel="stylesheet" href="/static/datatables/buttons.bootstrap.min.css">
<link rel="stylesheet" href="/static/datatables/bootstrap-toggle.min.css">
<script src="/static/datatables/dataTables.buttons.min.js"></script>
{#<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/2.5.0/jszip.min.js"></script>#}
{#<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>#}
{#<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>#}
{#<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.6/js/buttons.bootstrap.min.js"></script>#}
{#<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.6/js/buttons.flash.min.js"></script>#}
{#<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.6/js/buttons.html5.min.js"></script>#}
{#<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.6/js/buttons.colVis.min.js"></script>#}

<script type="text/javascript" src="/static/js/select2.js?v=1.0.0"></script>
<link type="text/css" rel="stylesheet" href="/static/css/select2.css?v=1.1.3">
<script src="/static/selectmultiple/i18n/es.js"></script>
<script>

    $(document).ready(function () {

        $('.select2').select2({width: '100%',});

        const tabla = $('.tabla_responsive').DataTable({
            responsive: true,
            ordering: false,
            paging: false,
            searching: false,
            bInfo: false,
            dom: 'Bfrtip',
            language: {
                "url": '/static/js/i18n/Spanish.json'
            },
            buttons: []
        });
        tabla.buttons().container().appendTo('.tabla_responsive .col-md-6:eq(0)');

        $('.tabla_responsive tbody').on('click', 'tr', function () {
            var data = tabla.row(this).data();
        });
    });

    function soloNumeros(e) {
        var key = window.Event ? e.which : e.keyCode
        return (key >= 48 && key <= 57)
    }
</script>
<link rel="stylesheet" href="/static/jgrowl/jgrowl.css" type="text/css"/>
<script type="text/javascript" src="/static/jgrowl/jgrowl.min.js"></script>
<script type="text/javascript" src="/static/bootstrap5/js/utils.js"></script>


{#NOTIFICACIONES WEB#}
{% if request.user.is_authenticated and persona.es_administrativo and permiteWebPush and persona.es_profesor %}
    <script src="/static/webpush/registerSw.js?0.21"></script>
    <script>
        $(function () {
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.ready.then(registration => {
                    registration.active.postMessage({type: 'PORT_INITIALIZATION'});
                    if ('SyncManager' in window) {
                        registration.sync.register('sync-data');
                    }
                    navigator.serviceWorker.addEventListener('message', (event) => {
                        var data = event.data;
                        console.log(data)
                        if (data.btn_notificaciones) {
                            mensajeSuccess('Su reporte ha sido generado con exito.')
                            $('#btnNotificacionTareas').html(data.btn_notificaciones);
                        }
                    });
                });
            }
        });
    </script>
{% endif %}
{% block heading %}
{% endblock %}
{% block extraJs %}{% endblock %}

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-795ZERMHCB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-795ZERMHCB');
</script>
</body>

<link rel="stylesheet" href="/static/fancybox/css/core.css"/>
<script src="/static/fancybox/js/core.js"></script>
</html>