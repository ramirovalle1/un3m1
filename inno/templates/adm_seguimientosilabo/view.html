{% extends "base.html" %}
{% load sga_extras %}
{% block heading %}
    <script type="text/javascript" src="/static/js/jquery.fancybox.pack.js?v=1.0.0"></script>
    <link rel="stylesheet" href="/static/css/jquery.fancybox.css?v=1.0.0" type="text/css" media="screen"/>
    <script type="text/javascript" src='/static/js/select2.js?v=1.0.0'></script>
    <link type='text/css' rel='stylesheet' href="/static/css/select2.css?v=1.0.0"/>
    <script src="/static/adicionalesjs/formquestion.js?0.24"></script>
    <script type="text/javascript">
        var busqueda = function (page/*=undefined*/) {
            var term = $("#searchinput").val().trim().toUpperCase();
            var facu = $("#facultades_list").val();
            var carr = $("#carreras_list").val();
            var asig = $("#asignatura_list").val();
            var niv = $("#nivel_list").val();
            var par = $("#paralelo_list").val();
            page = typeof page == 'undefined' ? 1 : page;
            console.log('page :');
            console.log(page);
            let href = "{{ request.path|safe }}?action={{ action }}&s=" + term;
            if (parseInt(facu)) {
                href += "&facu=" + facu;
            }
            if (parseInt(carr)) {
                href += "&carr=" + carr;
            }
            if (parseInt(asig)) {
                href += "&asig=" + asig;
            }
            if (parseInt(niv)) {
                href += "&niv=" + niv;
            }
            if (par !== '0') {
                href += "&par=" + par;
            }
            if (page) {
                href += "&page=" + page;
            }
            location.href = href;
            bloqueointerface();
            {#location.href = `/adm_seguimientoacademico?action={{ action }}&s=${term}&facu=${facu}&carr=${carr}&asig=${asig}&niv=${niv}&par=${par}&page=${page}`;#}
            return false;
        };

        $(function () {

            $(".fancybox").fancybox();
            $("#facultades_list").select2({minimumResultsForSearch: 5});
            $("#carreras_list").select2({minimumResultsForSearch: 5});
            $("#asignatura_list").select2({minimumResultsForSearch: 5});
            $("#nivel_list").select2({minimumResultsForSearch: 5});
            $("#paralelo_list").select2({minimumResultsForSearch: 5});

            $("#search").click(function () {
                busqueda();
            });

            $("#paralelo_list").change(function () {
                busqueda();
            });

            $("#facultades_list").change(function () {
                $("#carreras_list").val(0);
                $("#asignatura_list").val(0);
                $("#paralelo_list").val('0');
                $("#nivel_list").val(0);
                busqueda();
            });

            $("#carreras_list").change(function () {
                $("#asignatura_list").val(0);
                $("#paralelo_list").val('0');
                $("#nivel_list").val(0);
                busqueda();
            });

            $("#asignatura_list").change(function () {
                $("#nivel_list").val(0);
                $("#paralelo_list").val('0');
                busqueda();
            });

            $("#nivel_list").change(function () {
                $("#paralelo_list").val('0');
                busqueda();
            });

            $('#searchinput').keyup(function (e) {
                if (e.keyCode == 13) {
                    busqueda();
                }
            });

        });

        function generar_reporte(id, text, opc) {
            if (opc === 1){
                Swal.fire({
                title: '¿Estás seguro de generar el reporte en PDF?',
                text: text,
                type: 'info',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Si, generar',
                cancelButtonText: 'Cancelar'
            }).then((result) => {
                    if (result.value) {
                        $.ajax({
                            type: 'GET',
                            url: '{{ request.path  }}',
                            data: {
                                'action': 'verseguimientosilabo',
                                'exportar_seguimiento_pdf': 1,
                                'asig': '{{ asignaturaselected }}',
                                'niv': '{{ nivelselected }}',
                                'par': '{{ paraleloselected }}',
                                's': '{{ s }}'
                            },
                            success: function (data) {
                                if (data.result) {
                                    Swal.fire(
                                        'Generando reporte..',
                                        'El reporte se está generando, una vez finalizado se le alertará en el apartado de NOTIFICACIONES para su descarga',
                                        'success'
                                    ).then(function () {
                                        bloqueointerface();
                                        window.open(`/notificacion`, "_blank");
                                        $.unblockUI();
                                    });
                                }
                            },
                            error: function () {
                                mensajeWarning("Error de conexión.");
                            }
                        });
                    }
                }
            )
            } else if (opc === 2){
                Swal.fire({
                title: '¿Estás seguro de generar el reporte en Excel?',
                text: text,
                type: 'info',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Si, generar',
                cancelButtonText: 'Cancelar'
            }).then((result) => {
                    if (result.value) {
                        $.ajax({
                            type: 'GET',
                            url: '{{ request.path  }}',
                            data: {
                                'action': 'verseguimientosilabo',
                                'exportar_seguimiento_excel': 1,
                                'asig': '{{ asignaturaselected }}',
                                'niv': '{{ nivelselected }}',
                                'par': '{{ paraleloselected }}',
                                's': '{{ s }}'
                            },
                            success: function (data) {
                                if (data.result) {
                                    Swal.fire(
                                        'Generando reporte..',
                                        'El reporte se está generando, una vez finalizado se le alertará en el apartado de NOTIFICACIONES para su descarga',
                                        'success'
                                    ).then(function () {
                                        bloqueointerface();
                                        window.open(`/notificacion`, "_blank");
                                        $.unblockUI();
                                    });
                                }
                            },
                            error: function () {
                                mensajeWarning("Error de conexión.");
                            }
                        });
                    }
                }
            )
            }

        }

        function formModalVerDetalle(id, idmateria, text, action, width, footer = true) {
            bloqueointerface();
            $('.anilladobodylistado').empty();
            $('.panelbodyproceso').empty();
            $('.panelbodyform').empty();
            $('#footermodalobservacionllamadaslistado').show();
            $.ajax({
                type: "GET",
                url: `{{ request.path }}`,
                data: {
                    'action': action,
                    'id': id,
                    'idmateria': idmateria,
                },
                success: function (data) {
                    $.unblockUI();
                    if (data.result === true) {
                        if (footer === true) {
                            $('#footermodalobservacionllamadaslistado').hide();
                        }
                        $('.anilladobodylistado').html(data.data);
                        $('#itemsobservacionllamadas .panelobservacionllamadastitle').html(text);
                        $("#itemsobservacionllamadas").modal({backdrop: 'static', width: width}).modal('show');
                    } else {
                        mensajeWarning(data.mensaje);
                    }
                },
                error: function () {
                    $.unblockUI();
                    mensajeWarning("Error de conexión.");
                },
                dataType: "json"
            });
        }

        function formModalVerTemas(id, idmateria, text, action, width, footer = true) {
            bloqueointerface();
            $('.anilladobodylistado').empty();
            $('.panelbodyproceso').empty();
            $('.panelbodyform').empty();
            $('#footermodalobservacionllamadaslistado').show();
            $.ajax({
                type: "GET",
                url: `{{ request.path }}`,
                data: {
                    'action': action,
                    'id': id,
                    'idmateria': idmateria,
                },
                success: function (data) {
                    $.unblockUI();
                    if (data.result === true) {
                        if (footer === true) {
                            $('#footermodalobservacionllamadaslistado').hide();
                        }
                        $('.anilladobodylistado').html(data.data);
                        $('#itemsobservacionllamadas .panelobservacionllamadastitle').html(text);
                        $("#itemsobservacionllamadas").modal({backdrop: 'static', width: width}).modal('show');
                    } else {
                        mensajeWarning(data.mensaje);
                    }
                },
                error: function () {
                    $.unblockUI();
                    mensajeWarning("Error de conexión.");
                },
                dataType: "json"
            });
        }

        function formModalVerDetEncuestas(id, idmateria, text, action, width, footer = true) {
            bloqueointerface();
            $('.anilladobodylistado').empty();
            $('.panelbodyproceso').empty();
            $('.panelbodyform').empty();
            $('#footermodalobservacionllamadaslistado').show();
            $.ajax({
                type: "GET",
                url: `{{ request.path }}`,
                data: {
                    'action': action,
                    'id': id,
                    'idmateria': idmateria,
                },
                success: function (data) {
                    $.unblockUI();
                    if (data.result === true) {
                        if (footer === true) {
                            $('#footermodalobservacionllamadaslistado').hide();
                        }
                        $('.anilladobodylistado').html(data.data);
                        $('#itemsobservacionllamadas .panelobservacionllamadastitle').html(text);
                        $("#itemsobservacionllamadas").modal({backdrop: 'static', width: width}).modal('show');
                    } else {
                        mensajeWarning(data.mensaje);
                    }
                },
                error: function () {
                    $.unblockUI();
                    mensajeWarning("Error de conexión.");
                },
                dataType: "json"
            });
        }

        function formModalVerEncuestas(text, action, footer = true) {
            bloqueointerface();
            $('#itemspanel .paneltitle').html('');
            $('.panelbody').html('');
            $('#footermodal').show();
            $.ajax({
                type: "GET",
                url: `{{ request.path }}`,
                data: {
                    'action': action,
                },
                success: function (data) {
                    $.unblockUI();
                    if (data.result === true) {
                        if (footer === true) {
                            $('#footermodal').hide();
                        }
                        $('.panelbody').html(data.data);
                        $('#itemspanel .paneltitle').html(text.toUpperCase());
                        $("#itemspanel").modal({backdrop: 'static', width: '900px'}).modal('show');
                    } else {
                        //mensajeDanger(data.message);
                        mensajeErrorSwal("", data.mensaje);
                    }
                },
                error: function () {
                    $.unblockUI();
                    //mensajeDanger("Error de conexión.");
                    mensajeErrorSwal("", "Error de conexión.");
                },
                dataType: "json"
            });
        }

    </script>

{% endblock %}
{% block atras %}{{ request.path }}{% endblock %}
{% block canvas %}
    <div class='row'>
        <div class='col-lg-12'>
            <div class="headtitle">
                <h3 class="texto-blue">{{ title }}</h3>
                <h6>Seguimiento docente</h6>
            </div>
        </div>
    </div>

    <div class="container-fluid">
        <div class="row">
            {% if super_directivos %}
                <div class="col-12 col-lg-3 col-sm-6">
                    {% if facultades %}
                        <b>Facultades:</b><br>
                        <select id="facultades_list" style="width: 100%">
                            <option value="0" {% if facultadeselected == 0 %}selected{% endif %}>TODAS</option>
                            {% for facultad in facultades %}
                                <option {% if facultadeselected == facultad.id %}selected{% endif %}
                                        value="{{ facultad.id }}">{{ facultad.nombre }}</option>
                            {% endfor %}
                        </select>
                    {% endif %}
                </div>
            {% endif %}
            {% if es_decano or super_directivos %}
                <div class="col-12 col-lg-3 col-sm-6">
                    <b>Carreras:</b><br>
                    <select id="carreras_list" style="width: 100%">
                        <option value="0" {% if carrerasselected == 0 %}selected{% endif %}>TODAS</option>
                        {% for carr in carreras %}
                            <option {% if carrerasselected == carr.id %}selected{% endif %}
                                    value="{{ carr.id }}">{{ carr.nombre }}</option>
                        {% endfor %}
                    </select>
                </div>
            {% endif %}

            <div class="col-12 col-lg-3 col-sm-6">
                <b>Asignatura:</b><br>
                <select id="asignatura_list" style="width: 100%">
                    <option value="0" {% if asignaturaselected == 0 %}selected{% endif %}>TODAS</option>
                    {% for asig in asignaturas %}
                        <option {% if asignaturaselected == asig.id %}selected{% endif %}
                                value="{{ asig.id }}">{{ asig.nombre }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="col-12 col-lg-3 col-sm-6">
                <b>Nivel:</b><br>
                <select id="nivel_list" style="width: 100%">
                    <option value="0" {% if nivelselected == 0 %}selected{% endif %}>TODAS</option>
                    {% for niv in nivel %}
                        <option {% if nivelselected == niv.id %}selected{% endif %}
                                value="{{ niv.id }}">{{ niv.nombre }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="col-12 col-lg-3 col-sm-6">
                <b>Paralelo:</b><br>
                <select id="paralelo_list" style="width: 100%">
                    <option value="0" selected="selected">TODOS</option>
                    {% for paralelo in paralelos %}
                        <option value="{{ paralelo.nombre }}" {% if paraleloid == paralelo.nombre %}
                                selected="selected" {% endif %}>{{ paralelo.nombre }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-12 col-lg-3 col-sm-6" style="float: left">
                <b>Búsqueda docentes:</b><br>
                <div class="input-group mb-2">
                    <input class='searchinput form-control' type='text' id='searchinput' value='{{ s }}'
                           autocomplete="off" name="s"
                           placeholder="Buscar por cédula, apellidos, nombres, descripción"/>
                    <div class="input-group-append">
                        <a href="javascript:;" id='search' class='btn btn-primary-old'><span
                                class="fa fa-search "></span> </a>
                        {% if s or url_vars %}
                            <a href="{{ request.path }}?action={{ action }}" id='allresults'
                               onclick="bloqueointerface();"
                               class='btn btn-default'><span
                                    class="fa fa-refresh "></span> </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        {#        <div class="row justify-content-end">#}
        <div class="row">
            <div class="col-sm-5" style="align-content: center">
                <form method="GET">
                    {% if es_director_carr %}
                        {% if DESCARGAR_REPORTE_SILABO %}
                            <button href="#" class="btn btn-default" style="padding-top: 1em!important;padding-bottom: 1em!important;" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Reportes <i class="fa fa-ellipsis-v" style="font-size:9px" aria-hidden="true"></i>
                            </button>
                            <ul class="dropdown-menu" x-placement="right-start" style="">
                                <li class="dropdown-item"><a href="javascript:void(0)"
                               onclick="generar_reporte('0','A continuación se generará el reporte en PDF', 1)"><i class="fa fa-file-pdf-o"></i> Generar reporte en PDF  </a></li>
                               <li class="dropdown-item"><a href="javascript:void(0)"
                               onclick="generar_reporte('0','A continuación se generará el reporte en Excel', 2)"><i class="fa fa-file-excel-o"></i> Generar reporte en Excel  </a></li>
                            </ul>
                        {% endif %}
                    {% endif %}


{#                    <a href="/adm_seguimientoacademico?action=verencuestas"#}
                            {#                       onclick="formModalVerEncuestas('Asignar encuesta','asignarencuestasilabo', false)"#}
{#                       class='btn btn-warning  mb-2'><span class="fa fa-list"></span>#}
{#                        Ver encuestas#}
{#                    </a>#}


                    {#                    <a href="/adm_seguimientoacademico?action=asignarrespuestas"#}
                    {#                                                   onclick="formModalVerEncuestas('Asignar encuesta','asignarencuestasilabo', false)"#}
                    {#                       class='btn btn-danger mb-2'><span class="fa fa-list"></span>#}
                    {#                        Asignar Respuestas#}
                    {#                    </a>#}

                </form>
            </div>
        </div>
    </div>
    
    {% if not MOSTRAR_RESULTADOS_SILABO %}
        <div class="row">
            <div class='col-lg-12 px-4'>
                <div class="alert alert-primary d-flex align-items-center alert-dismissible fade show" role="alert">
                    <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Info:"><use xlink:href="#info-fill"/></svg>
                    <div>
                        <b>Nota: </b> Se le informa que aún no se ha aplicado la ejecución de la encuesta a los estudiantes. Por lo tanto, los resultados presentados son preliminares y el porcentaje correspondiente a la encuesta no será contabilizado.
                    </div>
                </div>
            </div>
        </div>
    {% endif %}
    

    <div class="card mb-4">
        <div class="card-body rounded-3 border-dark-info">
            <table class="tabla_responsive table table_primary">
                <thead>
                <tr>
                    <th class="text-center"><i class="fa fa-sort-numeric-desc"></i></th>
                    <th style="width: 225px; vertical-align: middle;text-align: center">Docentes</th>
                    <th style="width: 225px; vertical-align: middle;text-align: center">Información de materias
                    </th>
                    <th style="width: 20px; vertical-align: middle;text-align: center">% Cumplimiento de
                        recursos
                        planificados
                    </th>
                    <th style="width: 20px; vertical-align: middle;text-align: center">% Confirmación de temas
                    </th>
                    <th style="width: 20px; vertical-align: middle;text-align: center">% Encuesta aplicada</th>
                    <th style="width: 50px; vertical-align: middle;text-align: center">% Total</th>
                </tr>

                </thead>
                <tbody>
                {% for profe in profesoresmaterias %}
                    {% materias_imparte_periodo_seguimiento_silabo profe periodo carreras2 carrerasselected asignaturaselected nivelselected paraleloselected super_directivos as materias %}
                    {% if materias %}
                        <tr>
                            <td class="text-center w-5"
                                rowspan="{{ materias.count|add:'1' }}">{% contador_lista page forloop.counter %}</td>
                            <td class="text-secondary align-middle w-25" rowspan="{{ materias.count|add:'1' }}">
                                <div class="mb-3" style="max-width: 540px;">
                                    <div class="row g-0">
                                        <div class="col-md-3 text-center"
                                             style="display: flex; align-items: center; align-content: center; justify-content: center">
                                            <img src="{{ profe.persona.get_foto }}" alt=""
                                                 class="img-fluid rounded-circle"
                                                 width="60px">
                                        </div>
                                        <div class="col-md-9">
                                            <div class="">
                                                <small class="card-text" title="Nombre completo"
                                                       data-bs-toggle="tooltip"><i
                                                        class="fa fa-user"></i> {{ profe.persona.nombre_completo_inverso }}
                                                </small><br>
                                                <small class="card-text" title="Perfil de usuario"
                                                       data-bs-toggle="tooltip">
                                                    <i class="fa fa-user-cog"></i>
                                                    {{ profe.persona.cargo_persona.denominacionpuesto.descripcion|lower|capfirst }}
                                                </small><br>
                                                <small class="card-text" title="Cédula" data-bs-toggle="tooltip"><i
                                                        class="fa fa-address-card"></i> {{ profe.persona.cedula }}
                                                </small><br>
                                                <small class="card-text">
                                                    {% if profe.persona.telefono %} <i class="fa fa-phone"></i>
                                                        {{ profe.persona.telefono }}
                                                        <a href='https://web.whatsapp.com/send?l=en&phone=+593{{ profe.persona.telefono }}&text=Hola {{ list.persona }}'
                                                           target="_blank" class="btn btn-mini btn-success tu"
                                                           title="Enviar mensaje por whatsapp">
                                                            <i class="fa fa-whatsapp"></i>
                                                        </a>
                                                    {% endif %}
                                                </small><br>
                                                <small class="card-text" title="Correo electronico"
                                                       data-bs-toggle="tooltip">
                                                    <i class="fa fa-envelope"></i>
                                                    {% if profe.persona.emailinst %}
                                                        {{ profe.persona.emailinst }}
                                                    {% else %}
                                                        {{ profe.persona.email }}
                                                    {% endif %}
                                                </small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </td>
                            {% for mat in materias %}
                                <tr class="data-materias" pk="{{ mat.pk }}">
                                    <td>
                                        {% if super_directivos %}
                                            <strong>Facultad: </strong>
                                            <p>{{ mat.asignaturamalla.malla.carrera.mi_coordinacion }}</p>
                                        {% endif %}
                                        {% if super_directivos or es_decano %}
                                            <strong>Carrera: </strong>
                                            <p>{{ mat.asignaturamalla.malla.carrera.nombre }}</p>
                                        {% endif %}
                                        <strong>Asignatura: </strong>
                                        <p>{{ mat.asignatura.nombre }} {% if super_directivos %} - ({{ mat.id }}) {% endif %}</p>
                                        {% with asig=mat|args:profe|call:"nombre_mostrar_por_tipo_profesor" %}
                                            <p>({{ asig|split:"- "|last}})</p>
                                        {% endwith %}
                                        <strong>Nivel - Paralelo: </strong>
                                        <p>{{ mat.asignaturamalla.nivelmalla.nombre }} - {{ mat.paralelo }}</p>
                                    </td>
                                    {% informe_actividades_mensual_docente_v4_extra profe periodo fini ffin 'FACULTAD' as informe %}
                                    {% with horasdocencia=informe.distributivo|args:informe.fini|args:informe.ffin|call:'detalle_horas_docencia' %}
                                        {% if horasdocencia %}
                                            {% for actividad in horasdocencia %}
                                                {% if actividad.criteriodocenciaperiodo.nombrehtmldocente == 'planificarcontenidov2' %}
                                                    {% if super_directivos %}
                                                        {% contenido_profesor_total_V3 actividad.criteriodocenciaperiodo informe.distributivo.profesor mat informe.fini informe.ffin as contenidohor %}
                                                    {% else %}
                                                        {% contenido_profesor_total_V2 actividad.criteriodocenciaperiodo informe.distributivo.profesor mat informe.fini informe.ffin as contenidohor %}
                                                    {% endif %}
                                                    {% for evidencia in contenidohor %}
                                                        {% if forloop.last %}
                                                            <td id="porcientorecursos{{ mat.id }}"
                                                                style="text-align: center;">
                                                                {% if evidencia.0 >= 30 %}
                                                                    <span class="text-success"
                                                                          style="text-align: center;"><b>{{ evidencia.0|floatformat:"2" }}%</b></span>
                                                                {% elif evidencia.0 <= 10 %}
                                                                    <span class="text-danger"
                                                                          style="text-align: center;"><b>{{ evidencia.0|floatformat:"2" }}%</b></span>
                                                                {% else %}
                                                                    <span class="text-warning"
                                                                          style="text-align: center;"><b>{{ evidencia.0|floatformat:"2" }}%</b></span>
                                                                {% endif %}
                                                                {#                                                                <input type="hidden" id="totalrecursos{{ mat.id }}"#}
                                                                {#                                                                       name="totalrecursos{{ mat.id }}"#}
                                                                {#                                                                       value="{{ evidencia.8 }}"/>#}
                                                                <a onclick="formModalVerDetalle('{{ profe.id }}','{{ mat.id }}','Detalle de recursos planificados','verdetallerecursos','70%', false)"
                                                                   class="btn btn-primary tl btn-mini"
                                                                   href="javascript:void(0);">
                                                                    <span class="fa fa-tasks"></span>
                                                                </a>
                                                            </td>
                                                            <td id="porcientotemas{{ mat.id }}"
                                                                style="text-align: center;">
                                                                {% if evidencia.1 >= 20 %}
                                                                    <span class="text-success"
                                                                          style="text-align: center;"><b>{{ evidencia.1|floatformat:"2" }}%</b></span>
                                                                {% elif evidencia.1 <= 10 %}
                                                                    <span class="text-danger"
                                                                          style="text-align: center;"><b>{{ evidencia.1|floatformat:"2" }}%</b></span>
                                                                {% else %}
                                                                    <span class="text-warning"
                                                                          style="text-align: center;"><b>{{ evidencia.1|floatformat:"2" }}%</b></span>
                                                                {% endif %}
                                                                {#                                                                <input type="hidden" id="totaltemas{{ mat.id }}"#}
                                                                {#                                                                       name="totaltemas{{ mat.id }}"#}
                                                                {#                                                                       value="{{ evidencia.10 }}"/>#}
                                                                <a onclick="formModalVerTemas('{{ profe.id }}','{{ mat.id }}','Detalle de temas impartidos','verdetalletemas_v2','70%', false)"
                                                                   class="btn btn-primary tl btn-mini"
                                                                   href="javascript:void(0);">
                                                                    <span class="fa fa-tasks"></span>
                                                                </a>
                                                            </td>
                                                            <td id="porcientoencuesta{{ mat.id }}"
                                                                style="text-align: center;">
                                                                {% if MOSTRAR_RESULTADOS_SILABO %}
                                                                    {% if evidencia.2 >= 20 %}
                                                                        <span class="text-success"
                                                                              style="text-align: center;"><b>{{ evidencia.2|floatformat:"2" }}%</b></span>
                                                                    {% elif evidencia.2 >= 10 %}
                                                                        <span class="text-warning"
                                                                              style="text-align: center;"><b>{{ evidencia.2|floatformat:"2" }}%</b></span>
                                                                    {% else %}
                                                                        <span class="text-danger"
                                                                              style="text-align: center;"><b>{{ evidencia.2|floatformat:"2" }}%</b></span>
                                                                    {% endif %}
                                                                    <a onclick="formModalVerDetEncuestas('{{ profe.id }}','{{ mat.id }}','Detalle de encuestas','verdetalleencuestas','70%', false)"
                                                                       class="btn btn-primary tl btn-mini"
                                                                       href="javascript:void(0);">
                                                                    <span class="fa fa-tasks"></span>
                                                                </a>
                                                                {% else %}
                                                                    <span class="text-warning"
                                                                              style="text-align: center;"><b>N.A</b></span>
                                                                {% endif %}
                                                            </td>
                                                            <td id="total{{ mat.id }}" style="text-align: center;">
                                                                {% if evidencia.3 >= 90 %}
                                                                    <span class="text-dark"
                                                                          style="text-align: center;"><b>{{ evidencia.3|floatformat:"2" }}%</b></span>
                                                                {% elif evidencia.3 >= 70 %}
                                                                    <span class="text-warning"
                                                                          style="text-align: center;"><b>{{ evidencia.3|floatformat:"2" }}%</b></span>
                                                                {% else %}
                                                                    <span class="text-danger"
                                                                          style="text-align: center;"><b>{{ evidencia.3|floatformat:"2" }}%</b></span>
                                                                {% endif %}
                                                            </td>
                                                        {% endif %}
                                                    {% endfor %}
                                                {% endif %}
                                            {% endfor %}
                                        {% endif %}
                                    {% endwith %}
                                </tr>
                            {% endfor %}
                        </tr>
                    {% endif %}
                    {% empty %}
                    <td colspan="15" class="text-center">NO EXISTEN REGISTROS</td>
                {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="card-footer border-top-0">
            {% include 'paginacionb4.html' %}
        </div>
    </div>




    {#    <div class="modal fade static" id="itemspanelverdetalleppl" style="display: none;">#}
    {#        <div class="modal-header">#}
    {#            <h3 class="paneltitle">Detalle de PPL</h3>#}
    {#        </div>#}
    {#        <div class="modal-body panelbodydetalleppl">#}
    {#        </div>#}
    {#        <div class="modal-footer">#}
    {#            <table class="pull-right">#}
    {#                <tr>#}
    {#                    <td><a href="javascript:;" class="btn btn-cerrar btn-info cerrardetalleppl">Cerrar</a></td>#}
    {#                </tr>#}
    {#            </table>#}
    {#        </div>#}
    {#    </div>#}

    <div class="modal fade static" id="itemsobservacionllamadas" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4><i class="fa fa-list"></i> <b class="panelobservacionllamadastitle">FORMULARIO MODAL</b></h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    </button>
                </div>
                <div class="modal-body">
                    <form autocomplete="off" method="post"
                          enctype="multipart/form-data" action="{{ request.path }}">
                        {% csrf_token %}
                        <div class="row-fluid anilladobodylistado">

                        </div>
                    </form>
                </div>
                <div class="modal-footer" id="footermodalobservacionllamadaslistado">
                    <a href="javascript:;" class="btn btn-default" data-bs-dismiss="modal"><i
                            class="fa fa-window-close"></i>
                        Cerrar</a>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="itemspanel" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4><b class="paneltitle">FORMULARIO MODAL</b></h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    </button>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal form-modal" autocomplete="off" method="post"
                          enctype="multipart/form-data" action="{{ request.path }}">
                        {% csrf_token %}
                        <div class="row panelbody">
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

{% endblock %}