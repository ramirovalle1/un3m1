{% extends "basebs.html" %}
{% load sga_extras %}
{% block heading %}
    <link rel="stylesheet" href="/static/css/jquery.fancybox.css?v=1.0.0" type="text/css" media="screen" />
    <script type="text/javascript" src="/static/js/jquery.fancybox.pack.js?v=1.0.0"></script>
    <script>
        $(document).ready(function() {
            $(".fancybox").fancybox();
        });
        $(function() {

            $("#id_fecha_desde, #id_fecha_hasta").datepicker({format:"dd-mm-yyyy"}).on('changeDate', function(ev){ $(this).datepicker('hide'); });

            $("#id_fecha_desde, #id_fecha_hasta").blur(function () {
                fechavalida($(this));
            });

            $("#generar_reporte").click(function () {
                var fechadesde = $("#id_fecha_desde").val();
                var fechahasta = $("#id_fecha_hasta").val();

                var tipobeca = parseInt($("#tipobeca").val());
                if(tipobeca == 0){
                    smoke.alert("Seleccione el tipo de beca");
                    return false;
                }

                bloqueointerface();

                $.ajax({
                    type: "POST",
                    url: "/adm_becas",
                    data: {'desde': fechadesde,
                        'hasta': fechahasta,
                        'tipobeca': tipobeca,
                        'action': 'verificar_solicitudes'},
                    success: function(data) {
                        if (data.result=='ok') {
                            $.unblockUI();
                            location.href = "/adm_becas?action=matrizsolicitudes&desde="+fechadesde+"&hasta="+fechahasta+"&tipobeca="+tipobeca.toString();
                            $('#itemspanelreportesolicitud').modal('hide');
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error al enviar los datos al servidor.");
                    },
                    dataType: "json"
                });
            });

            $("#cerrar_reporte").click(function () {
                $('#itemspanelreportesolicitud').modal('hide');
            });

            $("#cerrarpanelanular").click(function () {
                $('#itemspanelanular').modal('hide');
            });

            $(".anularsolicitud").click(function () {
                var ids=$(this).attr('ids');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becas",
                    data: {'action': 'anularsolicitudbeca', 'id': ids },
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyanular").html(data.data);
                            $(".paneltitleanular").html(data.title);
                            $("#itemspanelanular").modal({backdrop:'static', width: '700px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#cerrarpanelrechazar").click(function () {
                $('#itemspanelrechazar').modal('hide');
            });

            $(".rechazarsolicitudonline").click(function () {
                var ids=$(this).attr('ids');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becas",
                    data: {'action': 'rechazarsolicitudonline', 'id': ids },
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyrechazar").html(data.data);
                            $(".paneltitlerechazar").html(data.title);
                            $("#itemspanelrechazar").modal({backdrop:'static', width: '700px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });


            $(".detallesolicitud").click(function() {
                $("#aprobarcerrar").css('display', 'none');
                var id = $(this).attr('idt');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becas",
                    data: {'action': 'detallesolicitud', 'id': id},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbody").html(data.data);
                            $("#itemspanel").modal({backdrop:'static', width: '900px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#itemspanel .btn-cerrar").click(function() {
                $("#itemspanel").modal("hide");
                return false;
            });

            $(".resumentotales").click(function() {
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becas",
                    data: {'action': 'resumentotales'},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyresumentotal").html(data.data);
                            $("#itemspanelresumentotal").modal({backdrop:'static', width: '800px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#itemspanelresumentotal .btn-cerrar").click(function() {
                $("#itemspanelresumentotal").modal("hide");
            });

            $(".asignarbeca2").click(function () {
                var ids=$(this).attr('ids');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becas",
                    data: {'action': 'asignarbeca2', 'id': ids },
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyasignarbeca2").html(data.data);
                            $(".paneltitleasignarbeca2").html(data.title);
                            $("#itemspanelasignarbeca2").modal({backdrop:'static', width: '700px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#cerrarpanelasignarbeca2").click(function () {
                $('#itemspanelasignarbeca2').modal('hide');
            });

            notificar = function (id) {
                var id = parseInt(id);
                smoke.confirm("¿Está seguro de notificar beca.?", function(e){
                    if (e){
                        $.blockUI({message: null});
                        $.post("/adm_becas", {"action":'notificar', "id": id}, function(data) {
                            if (data.result=='ok') {
                                location.href = '/adm_becas';
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        }, "json");
                    }
                }, {
                    ok: "SI,SEGURO",
                    cancel: "NO,CANCELAR",
                    classname: "custom-class",
                    reverseButtons: true
                });
            };

            $(".aprobarrechazar").click(function() {
                var idp = $(this).attr('idp');

                $.ajax({
                    type: "GET",
                    url: "/adm_becas",
                    data: {'action': 'aprobarrechazar', 'id': idp },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error al obtener los datos.");
                    },
                    success: function (data) {
                        if (data.result == "ok") {
                            $.unblockUI();
                            $("#estadoid").val(data.estado );
                            $("#nomobserbacion").val(data.obseaprueba);
                            $("#codigoitem").val(data.idsolicitud);
                            $("#itemspaneledit").modal({backdrop:'static', width: '450px'}).modal('show');
                            $("#itemspaneledit .incompletoaddpreguntasedit").hide();

                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    }
                });
            });

            $("#edit_adicionar").click(function(){
                var estado = $("#estadoid").val();
                var observacion = $("#nomobserbacion").val();
                var id = $("#codigoitem").val();
                smoke.confirm("¿Está seguro cambiar estado de solicitud.?", function(e){
                    if (e){
                        $.blockUI({message: null});
                        $("#itemspaneledit").modal({backdrop:'static', width: '900px'}).modal('hide');
                        bloqueointerface();
                        $.ajax({
                            type: "POST",
                            url: "/adm_becas",
                            data: {'action': 'aprobarsolicitud', 'id': id, 'observacion': observacion, 'estado': estado },
                            error: function () {
                                $.unblockUI();
                                smoke.alert("Error al obtener los datos.");
                            },
                            success: function (data) {
                                if (data.result == "ok") {
                                    window.location.href = '/adm_becas?action=listasolicitudes';
                                } else {
                                    $.unblockUI();
                                    smoke.alert(data.mensaje);
                                }
                            }
                        });
                    }
                }, {
                    ok: "SI,SEGURO",
                    cancel: "NO,CANCELAR",
                    classname: "custom-class",
                    reverseButtons: true
                });

            });

            $("#edit_cancel").click(function(){
                $('#itemspaneledit').modal('hide');
            });


            $(".tl").tooltip({position:"center up"});

            $("#id_btipos, #id_estado_beca, #id_estado_beca_aceptada, #id_estado_beca_asignada").change(function() {
                $("#search").trigger("click");
            });

            $("#search").click(function() {
                var term = $("#searchinput").val().toUpperCase();
                location.href = "/adm_becas?action=listasolicitudes&s="+term+"&btipobeca="+$("#id_btipos").val()+"&bestadobeca="+$("#id_estado_beca").val()+"&bestadoaceptado="+$("#id_estado_beca_aceptada").val()+"&bestadoaasignado="+$("#id_estado_beca_asignada").val();
            });

            $('#searchinput').keyup(function(e) {
                if(e.keyCode == 13) {
                    $("#search").trigger("click");
                }
            });

            $("#divasignacion").click(function() {
                bloqueointerface();
                location.href = '/adm_becas';
            });
            $("#diveconomica").click(function() {
                bloqueointerface();
                location.href = '/adm_becas?action=listaquintil';
            });
            $("#divpromedio").click(function() {
                bloqueointerface();
                location.href = '/adm_becas?action=listapromedio';
            });
            $("#divdeporte").click(function() {
                bloqueointerface();
                location.href = '/adm_becas?action=listadeporte';
            });
            $("#divdiscapacitados").click(function() {
                bloqueointerface();
                location.href = '/adm_becas?action=listadiscapacitados';
            });
            $("#divsolicitud").click(function() {
                bloqueointerface();
                location.href = '/adm_becas?action=listasolicitudes';
            });
            $("#divprimernivel").click(function() {
                bloqueointerface();
                location.href = '/adm_becas?action=listaprimernivel';
            });
            $("#divetnia").click(function() {
                bloqueointerface();
                location.href = '/adm_becas?action=listaetnia';
            });
            $("#divextranjero").click(function() {
                bloqueointerface();
                location.href = '/adm_becas?action=listaextranjero';
            });
            $("#divmigrante").click(function() {
                bloqueointerface();
                location.href = '/adm_becas?action=listamigrante';
            });
            actualizar_lista = function (id,ids) {
                var id = parseInt(id);
                var ids = parseInt(ids);
                smoke.confirm("¿Está seguro de asignar beca.?", function(e){
                    if (e){
                        bloqueointerface();
                        $.post("/adm_becas", {"action":'asignarbeca', "id": id,"ids":ids}, function(data) {
                            if (data.result=='ok') {
                                location.href = '/adm_becas';
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        }, "json");
                    }
                }, {
                    ok: "SI,SEGURO",
                    cancel: "NO,CANCELAR",
                    classname: "custom-class",
                    reverseButtons: true
                });
            };

            rechazarsolicitud = function (id) {
                var id = id;
                if (id>0){
                    smoke.confirm("¿Está seguro de Rechazar Solicitud.?", function(e){
                        if (e){
                            bloqueointerface();
                            $.post("/adm_becas",{'id': id, 'action': 'rechazarsolicitud'}, function(data) {
                                if (data.result=="ok"){
                                    location.href=location.href;
                                } else {
                                    $.unblockUI();
                                    smoke.alert(data.mensaje);
                                }
                            }, "json");
                        }
                    }, {
                        ok: "SI,SEGURO",
                        cancel: "NO,CANCELAR",
                        classname: "custom-class",
                        reverseButtons: true
                    });
                }
            };

            $(".asignarbeca").click(function() {
                var idsolicitud = $(this).attr('ids');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becas",
                    data: {'action': 'asignarbeca', 'idsolicitud': idsolicitud},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyasignarbeca").html(data.data);
                            $(".paneltitleasignarbeca").html(data.title);
                            $("#asignarbecamodal").modal({backdrop:'static', width: '600px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });
            $("#cerrarpanelasignarbeca").click(function() {
                $("#asignarbecamodal").modal("hide");
                return false;
            });

            notificar = function (id) {
                var id = parseInt(id);
                smoke.confirm("¿Está seguro de notificar solicitud.?", function(e){
                    if (e){
                        $.blockUI({message: null});
                        $.post("/adm_becas", {"action":'notificarsolicitud', "id": id}, function(data) {
                            if (data.result=='ok') {
                                location.href = '/adm_becas?action=listasolicitudes';
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        }, "json");
                    }
                }, {
                    ok: "SI,SEGURO",
                    cancel: "NO,CANCELAR",
                    classname: "custom-class",
                    reverseButtons: true
                });
            };

            $(".reporte_solicitud").click(function () {
                $(".panelbodyreportesolicitud").html();
                $("#titulomodal").html('Matriz de Solicitudes de Beca');
                $("#itemspanelreportesolicitud").modal({backdrop:'static', width: '520px'}).modal('show');
            });

            $(".reporte_solicitud_desistida").click(function () {
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_becas",
                    data: {'action': 'verificar_solicitudes_desistidas'},
                    success: function(data) {
                        if (data.result=='ok') {
                            $.unblockUI();
                            location.href = "/adm_becas?action=matrizsolicitudesdesistidas";
                            //$('#itemspanelreportesolicitud').modal('hide');
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error al enviar los datos al servidor.");
                    },
                    dataType: "json"
                });
            });

            $(".reporte_solicitud_pendiente_aceptar").click(function () {
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_becas",
                    data: {'action': 'verificar_solicitudes_pendientes_aceptar'},
                    success: function(data) {
                        if (data.result=='ok') {
                            $.unblockUI();
                            location.href = "/adm_becas?action=matrizsolicitudespendienteaceptar";
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error al enviar los datos al servidor.");
                    },
                    dataType: "json"
                });
            });

            $(".reporte_solicitud_pendiente_revisar").click(function () {
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_becas",
                    data: {'action': 'verificar_solicitudes_pendiente_revisar'},
                    success: function(data) {
                        if (data.result=='ok') {
                            $.unblockUI();
                            location.href = "/adm_becas?action=matrizsolicitudespendientesrevisar";
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error al enviar los datos al servidor.");
                    },
                    dataType: "json"
                });
            });

            $(".reporte_listado_beneficiarios").click(function () {
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_becas",
                    data: {'action': 'verificar_listado_beneficiarios'},
                    success: function(data) {
                        if (data.result=='ok') {
                            $.unblockUI();
                            location.href = "/adm_becas?action=listadobeneficiarios";
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error al enviar los datos al servidor.");
                    },
                    dataType: "json"
                });
            });

            $(".mostrarrecorrido").click(function() {
                var id = $(this).attr('ids');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becas",
                    data: {'action': 'mostrarrecorrido', 'id': id},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyrecorrido").html(data.data);
                            var h = $(window).height() - 150;
                            $("#itemspanelrecorrido").modal({backdrop:'static', width: '80%', height: h}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#itemspanelrecorrido .btn-cerrar").click(function() {
                $("#itemspanelrecorrido").modal("hide");
                return false;
            });

            $(".subirarchivopendiente").click(function() {
                var id = $(this).attr('ids');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becas",
                    data: {'action': 'subirarchivopendiente', 'id': id},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodysubirpendiente").html(data.data);
                            $("#itemspanelsubirpendiente").modal({backdrop:'static', width: '700px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#itemspanelsubirpendiente .btn-cerrarpendiente").click(function() {
                $("#itemspanelsubirpendiente").modal("hide");
            });

            $(".restaurar_solicitud_rechazada").click(function () {
                var id = $(this).attr('ids');
                var title = $(this).attr('value_txt');
                $("#id_solicitud", $("#itemspanelrestaurarsolicitud")).val(id);
                $(".modal-title span", $("#itemspanelrestaurarsolicitud")).html(title);
                $("#itemspanelrestaurarsolicitud").modal({backdrop:'static', width: '30%'}).modal('show');
            });

            $(".action-close", $("#itemspanelrestaurarsolicitud")).click(function() {
                $("#itemspanelrestaurarsolicitud").modal("hide");
                $("#id_solicitud", $("#itemspanelrestaurarsolicitud")).val(0);
                $("#id_observacion", $("#itemspanelrestaurarsolicitud")).val('');
                $(".modal-title span", $("#itemspanelrestaurarsolicitud")).html('');
            });


            $(".action-save", $("#itemspanelrestaurarsolicitud")).click(function() {
                var id = $("#id_solicitud", $("#itemspanelrestaurarsolicitud")).val();
                var observacion = $("#id_observacion", $("#itemspanelrestaurarsolicitud")).val();
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_becas",
                    data: {'action': 'restaurarsolicitud', 'id': id, 'observacion': observacion},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".action-close", $("#itemspanelrestaurarsolicitud")).trigger('click');
                            bloqueointerface();
                            location.reload();
                        } else {
                            NotificationJG.error(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        NotificationJG.error("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

        });

    </script>
{% endblock %}
{% block canvas %}
<div class='row-fluid'>
    <div class='span12'>
        <h4>{{ title }} </h4>
        <h4>PERIODO ACTUAL: {{ periodo }} </h4>
        {% if periodovalida %} <h4>PERIODO CALIFICA: {{ periodovalida }}</h4>{% endif %}
        {#                {% if becaperiodo %}#}
        {#                    <br>#}
        {#                    Desde: {{ becaperiodo.fechainiciosolicitud|date:'Y-m-d h:i a' }} Hasta: {{ becaperiodo.fechafinsolicitud|date:'Y-m-d h:i a' }}#}
        {#                {% endif %}#}
    </div>
</div>
<div class='row-fluid'>
    <div class='span12'>
        <div class="btn-group">
            <a class="btn btn-success dropdown-toggle" data-toggle="dropdown" href="javascript:;">Reportes <span class="caret"></span></a>
            <ul class="dropdown-menu pull-left">
                <li><a href="javascript:;" class="reporte_solicitud"><i class="fa fa-table"></i> Matriz de Solicitudes de Beca</a></li>
                <li><a href="javascript:;" class="reporte_solicitud_pendiente_aceptar"><i class="fa fa-table"></i> Listado de Becas Pendientes de Aceptar</a></li>
                <li><a href="javascript:;" class="reporte_solicitud_desistida"><i class="fa fa-table"></i> Listado de Solicitudes Desistidas</a></li>
                <li><a href="javascript:;" class="reporte_solicitud_pendiente_revisar"><i class="fa fa-table"></i> Listado de Solicitudes Pendientes de Aprobar/Rechazar</a></li>
                <li><a href="javascript:;" class="reporte_listado_beneficiarios"><i class="fa fa-table"></i> Listado de beneficiarios</a></li>
            </ul>
        </div>
        <div class="btn-group ">
            <a class="btn btn-info dropdown-toggle " data-toggle="dropdown" href="#"> Configuración <span class="caret"></span></a>
            <ul class="dropdown-menu">
                <li><a href="/adm_becas?action=listaperiodos"> <i class="fa fa-cogs"></i> Configuración de Periodo</a></li>
                <li><a href="/adm_becas?action=listatipobeca"> <i class="fa fa-cogs"></i> Configuración de Tipo de Becas</a></li>
                {#                    <li><a href="/adm_becas?action=listautilizacion"> <i class="fa fa-cogs"></i> Justificativos Desembolso</a></li>#}
                {#                    <li><a href="/adm_becas?action=listarequisito"> <i class="fa fa-cogs"></i> Gestión de Requisitos</a></li>#}
            </ul>
        </div>
        <a class="btn btn-success"
            href="javascript:void(0)"
            onclick="mensajeConfirmSwal('Notificar becados',
                                        'Se procedera a enviar un correo electronico a todos los becados del periodo actual',
                                        true,'{{ request.path }}','enviarcorreopreseleccion','','{{ request.path }}?action=listasolicitudes')"><i class="fa fa-envelope"></i> Notificar </a>
        {#            <div class="btn-group ">#}
        {#                <a class="btn dropdown-toggle " data-toggle="dropdown" href="#"> Reportes <span class="caret"></span></a>#}
        {#                <ul class="dropdown-menu">#}
        {#                    <li><a class="infomepago"> <i class="fa fa-file-pdf-o"></i> Informe de Pago de Beca</a></li>#}
        {#                </ul>#}
        {#            </div>#}
    </div>
</div>

<div class="row-fluid">
    <div class='span12'>
        <div class="row-fluid">
            <a class="btn " href="#" id="divasignacion" data-toggle="tab"><i class="fa fa-user-circle-o"></i> BECADOS </a>
            <a class="btn btn-success" href="#" id="divsolicitud" data-toggle="tab"><i class="fa fa-id-card-o"></i> SOLICITUDES </a>
            <a class="btn " href="#" id="diveconomica" data-toggle="tab"><i class="fa fa-money"></i> SOCIO ECONÓMICA </a>
            <a class="btn " href="#" id="divpromedio"  data-toggle="tab"><i class="fa fa-star"></i> ACADÉMICA</a>
            <a class="btn" href="#" id="divdeporte"  data-toggle="tab"><i class="fa fa-futbol-o"></i> DEPORTE</a>
            <a class="btn" href="#" id="divdiscapacitados" data-toggle="tab"><i class="fa fa-wheelchair-alt"></i> DISCAPACIDAD</a>
            <a class="btn" href="#" id="divprimernivel" data-toggle="tab"><i class="fa fa-list-ol"></i> PRIMER NIVEL</a>
            <a class="btn" href="#" id="divetnia" data-toggle="tab"><i class="fa fa-list-ol"></i> Etnia/Nacionalidad</a>
            <a class="btn" href="#" id="divextranjero" data-toggle="tab"><i class="fa fa-list-ol"></i> Ecuatoriano en el Extranjero</a>
            <a class="btn" href="#" id="divmigrante" data-toggle="tab"><i class="fa fa-list-ol"></i> Migrante retornado o deportado</a>
            <hr>
        </div>
        <div class="row-fluid">
            {#                <div class="span3">#}
            {#                     <div class="btn-group">#}
            {#                        <a class="btn btn-success dropdown-toggle" data-toggle="dropdown" href="javascript:;">Reportes <span class="caret"></span></a>#}
            {#                        <ul class="dropdown-menu pull-left">#}
            {#                            <li><a href="javascript:;" class="reporte_solicitud"><i class="fa fa-table"></i> Matriz de Solicitudes de Beca</a></li>#}
            {#                            <li><a href="javascript:;" class="reporte_solicitud_desistida"><i class="fa fa-table"></i> Listado de Solicitudes Desistidas</a></li>#}
            {#                            <li><a href="javascript:;" class="reporte_solicitud_pendiente_revisar"><i class="fa fa-table"></i> Listado de Solicitudes Pendientes de Aprobar/Rechazar</a></li>#}
            {#                        </ul>#}
            {#                    </div>#}
            {#                </div>#}
            <div class="span8">
                <table class="table table-bordered" width="100%" style="padding: 0px; margin: 0px">
                    <tr>
                        <td style="text-align: right; vertical-align: middle"><strong class="tu" title="Tipo de Beca">Tipo Beca:</strong></td>
                        <td>
                            <select id="id_btipos">
                                <option value="0" selected="selected">TODOS</option>
                                {% for tipo in tipobeca %}
                                    <option value="{{ tipo.id }}" {% if btipobeca == tipo.id %}selected="selected"{% endif %}>{{ tipo.nombrecorto|upper }}</option>
                                {% endfor %}
                            </select>
                        </td>
                        <td style="text-align: right; vertical-align: middle"><strong class="tu" title="Estado de beca">Estado Solicitud:</strong></td>
                        <td>
                            <select id="id_estado_beca">
                                <option value="0" selected="selected">TODOS</option>
                                <option value="2" {% if bestadobeca == 2 %}selected="selected"{% endif %}>APROBADO</option>
                                <option value="3" {% if bestadobeca == 3 %}selected="selected"{% endif %}>RECHAZADO</option>
                                <option value="4" {% if bestadobeca == 4 %}selected="selected"{% endif %}>EN REVISIÓN</option>
                                <option value="5" {% if bestadobeca == 5 %}selected="selected"{% endif %}>ANULADO</option>
                                <option value="7" {% if bestadobeca == 7 %}selected="selected"{% endif %}>B.RECHAZADA</option>
                            </select>
                        </td>
                        <td style="text-align: right; vertical-align: middle"><b>Beca Aceptada: </b></td>
                        <td>
                            <select id="id_estado_beca_aceptada">
                                <option value="0" selected="selected">TODOS</option>
                                <option value="1" {% if bestadoaceptado == 1 %}selected="selected"{% endif %}>PENDIENTE</option>
                                <option value="2" {% if bestadoaceptado == 2 %}selected="selected"{% endif %}>ACEPTADA</option>
                                <option value="3" {% if bestadoaceptado == 3 %}selected="selected"{% endif %}>RECHAZADA</option>
                            </select>
                        </td>
                        <td style="text-align: right; vertical-align: middle"><b>Beca Asignada: </b></td>
                        <td>
                            <select id="id_estado_beca_asignada">
                                <option value="0" selected="selected">TODOS</option>
                                <option value="1" {% if bestadoaasignado == 1 %}selected="selected"{% endif %}>PENDIENTE</option>
                                <option value="2" {% if bestadoaasignado == 2 %}selected="selected"{% endif %}>SI</option>
                                <option value="3" {% if bestadoaasignado == 3 %}selected="selected"{% endif %}>NO</option>
                            </select>
                        </td>
                    </tr>
                </table>
            </div>
            <div style="text-align: right" class="span4">

                <form class="form-search">
                    <input class='searchinput' type='text' id='searchinput' value='{{ search }}' autocomplete="off" placeholder="Buscar por apellidos o cédula"/>
                    <a href="javascript:;" id='search' class='btn btn-info'><span class="fa fa-search " ></span> Buscar</a>
                    {% if search or ids %}
                        <a href="/adm_becas?action=listasolicitudes" id='allresults' class='btn btn-info'><span class="fa fa-refresh " ></span> Todos</a>
                    {% endif %}
                </form>
            </div>
        </div>
        <div class="row-fluid">
            <div class="span12">
                <table class="table table-bordered" style="padding: 0px; margin: 0px">
                    <tr>
                        <td style="margin: 2px; padding: 4px;">Total Solicitudes: <span class="badge badge-inverse"><strong>{{ totalsolicitud }}</strong></span></td>
                        <td style="margin: 2px; padding: 4px;">Total Desistidas: <span class="badge"><strong>{{ totaldesistieron }}</strong></span></td>
                        <td style="margin: 2px; padding: 4px;">Total Neto: <span class="badge badge-success"><strong>{{ totalneto }}</strong></span></td>
                        <td style="margin: 2px; padding: 4px;">
                            {% if periodo.id == 110 %}
                                <a href="javascript:;" idt="{{ asig.id }}" class="btn btn-info resumentotales btn-mini tu" data-original-title="Más información"><i class="fa fa-table"></i></a>
                            {% endif %}
                        </td>
                        <td style="margin: 2px; padding: 4px;">Total En Revisión: <span class="badge badge-warning"><strong>{{ totalrevision }}</strong></span></td>
                        <td style="margin: 2px; padding: 4px;">Total Pendientes: <span class="badge badge-info"><strong>{{ totalpendiente }}</strong></span></td>
                        <td style="margin: 2px; padding: 4px;">Total Aprobadas: <span class="badge badge-success"><strong>{{ totalaprobada }}</strong></span></td>
                        <td style="margin: 2px; padding: 4px;">Total Rechazadas: <span class="badge badge-important"><strong>{{ totalrechazada }}</strong></span></td>
                        <td style="margin: 2px; padding: 4px;">Becas Aceptadas: <span class="badge badge-success"><strong>{{ totalbecaaceptada }}</strong></span></td>
                        <td style="margin: 2px; padding: 4px;">Becas Rechazadas: <span class="badge badge-important"><strong>{{ totalbecarechazada }}</strong></span></td>
                        <td style="margin: 2px; padding: 4px;">Becas Pendientes: <span class="badge badge-warning"><strong>{{ totalbecapendiente }}</strong></span></td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="row-fluid">
            <table class='table table-bordered'id="asignacion" cellpadding="0" cellspacing="0">
                <thead>
                <tr>
                    <th style="width: 4%; text-align: center; vertical-align: middle">No.Solicitud</th>
                    <th style="width: 20%; text-align: center; vertical-align: middle">Estudiante</th>
                    <th style="width: 15%; text-align: center; vertical-align: middle">Beca</th>
                    <th style="width: 12%; text-align: center; vertical-align: middle">Nivel / Matrícula</th>
                    <th style="width: 10%; text-align: center; vertical-align: middle">E-mail / Teléfonos</th>
                    <th style="width: 4%; text-align: center; vertical-align: middle">Foto</th>
                    <th style="width: 3%; text-align: center; vertical-align: middle">Info</th>
                    <th style="width: 6%; text-align: center; vertical-align: middle">Beca Aceptada</th>
                    <th style="width: 6%; text-align: center; vertical-align: middle">Estado</th>
                    <th style="width: 6%; text-align: center; vertical-align: middle">Acciones</th>
                </tr>
                </thead>
                <tbody>
                {% for asig in solicitudes %}
                <tr>
                    <td style="text-align: center; vertical-align: middle">
                        <span class="label label-success">{{ asig.id }}</span><br>
                        <span class="label label-info">{{ asig.get_tiposolicitud_display }}</span>
                    </td>
                    <td style="text-align: justify; vertical-align: middle">
                        {{ asig.inscripcion.persona.nombre_completo_inverso }}
                        <br><b>Carr:.</b> {{ asig.inscripcion.carrera }}
                        <br><b>Ced:.</b>{{ asig.inscripcion.persona.cedula }}
                        {#                                <b>Calificacion:.</b> {{ notas.0.0 }} <b>Asistencia:.</b> {{ notas.0.1 }}#} <br>
                        <b>Dirección:</b> {{ asig.inscripcion.persona.direccion_completa }}
                    </td>
                    <td style="text-align: justify; vertical-align: middle"><span class="label label-info tu" title="{{ asig.becatipo.nombre|upper }}">{{ asig.becatipo.nombrecorto|upper }}</span>
                        <br>
                        <b> Fecha Solicitud:.</b> {{ asig.fecha_creacion|date:"Y-m-d h:i a" }}<br>
                        <b>Usuario Solicita:.</b> {{ asig.usuario_creacion }}<br>
                    </td>
                    <td style="text-align: center; vertical-align: middle">
                        {%  if asig.inscripcion.estado_gratuidad == 1 %}
                            <span class="label label-success tu" data-original-title="Estado de Gratuidad" >GRATUIDAD COMPLETA</span>
                        {% endif %}
                        {%  if asig.inscripcion.estado_gratuidad == 2 %}
                            <span class="label label-success tu" data-original-title="Estado de Gratuidad" >GRATUIDAD PARCIAL</span>
                        {% endif %}
                        <span class="label label-info tu" title="Nivel academico">
                                    {{ asig.inscripcion.sesion.nombre }}
                            {% with matriculado=asig.inscripcion|args:periodo|call:"matriculado_periodo" %}
                                {% if matriculado %}
                                    {% with matriculaactual=asig.inscripcion|args:periodo|call:"matricula_periodo_actual" %}
                                        {{ matriculaactual.0.nivelmalla }}
                                    {% endwith %}
                                {% endif %}
                            {% endwith %}

                            {#                                    {% if asig.inscripcion.matricula.nivelmalla %}#}
{#                                        - {{ asig.inscripcion.matricula.nivelmalla }}#}
{#                                    {% endif %}#}

                            {% if asig.inscripcion.matricula.paralelo.nombre %}
                                - {{ asig.inscripcion.matricula.paralelo.nombre }}
                            {% endif %}


                            {#                                            {% with paralelo=asig.inscripcion|args:idper|args:asig.inscripcion.id|call:'sacaparalelo' %}#}
{#                                                {{ paralelo }}#}
{#                                            {% endwith %}#}
                                        </span>

                        {% with matricula=asig.inscripcion|args:periodo|call:"matricula_periodo" %}
                        {% if matricula.tipomatriculalumno %}
                        <br><b>Per actual:</b>
                        <span class="label {% if matricula.tipomatriculalumno == "REGULAR" %}label-success{% else %}label-inverse{% endif %} tu" >
                                            {{ matricula.tipomatriculalumno }}
                                        </span>
                        {% endif %}
                        {% endwith %}<br>
                        {% with matricula=asig.inscripcion|args:periodoanterior|call:"matricula_periodo" %}
                        {% if matricula.tipomatriculalumno %}
                        <b>Per anterior:</b>
                        <span class="label {% if matricula.tipomatriculalumno == "REGULAR" %}label-success{% else %}label-inverse{% endif %} tu" >
                                            {{ matricula.tipomatriculalumno }}
                                        </span>
                        {% endif %}
                        {% endwith %}

                    </td>
                    <td class="hidden-phone hidden-tablet " style="vertical-align: middle">
                        {% if asig.inscripcion.persona.email %}<a href="mailto:{{ asig.inscripcion.persona.email}}">{{ asig.inscripcion.persona.email }}</a><br>{% endif %}
                        {% if asig.inscripcion.persona.emailinst %}<a href="mailto:{{ asig.inscripcion.persona.emailinst}}">{{ asig.inscripcion.persona.emailinst }}</a><br>{% endif %}
                        {%  for telefono in asig.inscripcion.persona.lista_telefonos %}
                            {{ telefono }}{% if not forloop.last %}, {% endif %}
                        {% endfor %}
                        {% if asig.inscripcion.identificador %}
                            <br/><span class="label label-info">{{ asig.inscripcion.identificador }}</span>
                        {% endif %}
                    </td>
                    <td style="text-align: center; vertical-align: middle">
                        {% if asig.inscripcion.persona.tiene_foto %}
                            <a title="{{ asig.inscripcion.persona.nombre_completo }}" href='{{ asig.inscripcion.persona.foto.foto.url }}' class="fancybox" rel="group"><img src="{{ asig.inscripcion.persona.foto.foto.url }}" width="30px"></a>
                        {% endif %}
                    </td>
                    <td style="text-align: center; vertical-align: middle">
                        <a href="javascript:;" idt="{{ asig.id }}" class="btn btn-info detallesolicitud btn-mini tu" data-original-title="Detalles"><i class="fa fa-table"></i></a>
                        {% if asig.estado == 2 and asig.tiene_documentos_aprobados_pendientes_subir %}
                            <span class="label label-warning tu" title="Tiene Archivos pendientes de subir">APS</span>
                        {% endif %}
                    </td>
                    <td style="text-align: center; vertical-align: middle">
                        {% if asig.estado == 2   %}
                            <span class="label {% if asig.becaaceptada == 1 %}label-warning{% elif asig.becaaceptada == 2 %}label-success{% else %}label-important{% endif %} tu" title="Aceptación Beca">{{ asig.get_becaaceptada_display }}</span>
                        {% endif %}
                    </td>
                    <td style="text-align: center; vertical-align: middle">
                        <span class="label label-{% if asig.estado == 1 %}info{% elif asig.estado == 2 %}success{% elif asig.estado == 3 %}important{% elif asig.estado == 8 %}default{% else %}warning{% endif %} tu" data-original-title="Estado">{{ asig.get_estado_display }}</span>
                    </td>
                    <td style="text-align: center; vertical-align: middle">
                        {#                                {% if asig.estado != 3 and asig.estado != 2  %}#}
                        <div class="btn-group" style="text-align: left">
                            <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown" href="javascript:;">Acciones<span class="caret"></span>
                            </a>
                            {##}

                            <ul class="dropdown-menu pull-right">
                                {##}
                                {#                                        {% with estado=asig|call:'validartodosarchivos' %}#}
                                {#                                            {% if estado %}#}
                                {#                                                {% if not asig.estado == 2 or asig.estado == 3 %}#}
                                {#                                                    <li><a title="Aprobar / Rechazar" href="javascript:;" idp="{{ asig.id }}" class="tu aprobarrechazar"><span class="fa fa-edit"></span> Aprobar / Rechazar </a></li>#}
                                {#                                            {% else %}#}
                                {#                                                <li><span class="fa fa-check"></span> Aprobar todos los archivos</li>#}
                                {#                                                {% endif %}#}
                                {#                                            {% endif %}#}
                                {#                                        {% endwith %}#}
                                {#                                        {% if asig.estado == 2 %}#}
                                {#                                            <li><a href="/adm_becas?action=verarchivos&id={{ asig.id }}" id="asignar" idn="{{ asig.inscripcion.id }}" onclick="actualizar_lista({{ asig.inscripcion.id }},{{ asig.id }});" class="tu"><span class="fa fa-check"></span> Asignar Beca </a></li>#}
                                {#                                            {%  if not asig.becado_asignacion %}#}
                                {#                                                <li><a  href="javascript:;" ids="{{  asig.id  }}" class="tu asignarbeca"><span class="fa fa-check"></span> Asignar Beca </a></li>#}
                                {#                                            {% endif %}#}
                                {#                                        {% endif %}#}
                                {##}
                                {##}

                                <li>
                                    <a class="mostrarrecorrido" ids="{{ asig.id }}" href="javascript:;"><i class="fa fa-list-ol"></i> Mostrar Recorrido</a>
                                </li>
                                {% if asig.estado == 1 or asig.estado == 4 %}
                                    {% if asig.estado == 1 %}
                                        <li><a href="/adm_becas?action=verarchivos&id={{ asig.id }}" id="verarchivos" data-original-title="Archivos"><i class="fa fa-check-square-o"></i> Verificar y Aprobar </a></li>
                                    {% else %}
                                        {% if persona.usuario.id == asig.usuario_modificacion_id %}
                                            <li><a href="/adm_becas?action=verarchivos&id={{ asig.id }}" id="verarchivos" data-original-title="Archivos"><i class="fa fa-check-square-o"></i> Verificar y Aprobar </a></li>
                                        {% endif %}
                                    {% endif %}
                                {% endif %}
{#                                {% if asig.estado == 2 and asig.becaaceptada == 3 %}#}
{#                                    <li>#}
{#                                        <a class="restaurar_solicitud_rechazada" ids="{{ asig.id }}" value_txt="{{ asig.inscripcion.persona }}" href="javascript:;"><i class="fa fa-recycle"></i> Restaurar solicitud</a>#}
{#                                    </li>#}
{#                                {% endif %}#}

                                {% if asig.estado == 2 and asig.tiene_documentos_aprobados_pendientes_subir %}

                                    <li>
                                        <a class="subirarchivopendiente" ids="{{ asig.id }}" href="javascript:;"><i class="fa fa-upload"></i> Subir Archivos pendientes</a>
                                    </li>
                                {% endif %}

                                {#                                        {% if asig.becatipo.id == 18 or asig.becatipo.id == 19 %}#}
                                {#                                            {% if asig.estado == 2 and not asig.becado_asignacion %}#}
                                {#                                                <li>#}
                                {#                                                    <a class="asignarbeca2" ids="{{ asig.id }}" href="javascript:;"><i class="fa fa-handshake-o"></i> Asignar Beca</a>#}
                                {#                                                </li>#}
                                {#                                            {% endif %}#}
                                {#                                        {% endif %}#}
                                {% if asig.estado == 1 %}
                                    <li>
                                        <a class="anularsolicitud" ids="{{ asig.id }}" href="javascript:;"><i class="fa fa-remove"></i> Anular Solicitud</a>
                                    </li>
                                {% endif %}


                                {##}
                                {##}
                                {#                                        {% if not asig.estado == 3 %}#}
                                {#                                            {%  if not asig.becado_asignacion %}#}
                                {#                                                <li><a href="javascript:;" id="rechazarsolicitud" onclick="rechazarsolicitud({{ asig.id }})" data-original-title="Rechazar Solicitud"><i class="fa fa-trash-o"></i> Rechazar Solicitud</a></li>#}
                                {#                                            {% endif %}#}
                                {#                                        {% endif %}#}
                                {##}
                                {##}
                                {#                                        {%  if not asig.becado_asignacion %}#}
                                {##}
                                {##}
                                {#                                        {% endif %}#}
                                {#                                        {%  if asig.estado == 2 %}#}
                                {#                                            <li><a  href="javascript:;" onclick="notificar({{ asig.id }});"  class="tu"><span class="fa fa-send"></span> Notificar </a></li>#}
                                {#                                        {% endif %}#}
                            </ul>
                        </div>
                        {#                            {% endif %}#}
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="10" style="text-align: center">NO EXISTEN SOLICITUDES</td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
        <div class='row-fluid'>
            <div class="span12">
                {% if paging.num_pages > 20 %}
                    <div class='pagination'>
                        <ul>
                            {% if paging.primera_pagina %}
                                <li><a href="/adm_becas?action=listasolicitudes&{% if search %}s={{ search }}&{% endif %}{% if btipobeca %}btipobeca={{ btipobeca }}&{% endif %}page=1">1</a></li>
                                <li><a href="/adm_becas?action=listasolicitudes&{% if search %}s={{ search }}&{% endif %}{% if btipobeca %}btipobeca={{ btipobeca }}&{% endif %}page={{ paging.ellipsis_izquierda }}" class="active">...</a></li>
                            {% endif %}
                            {% for pagenumber in paging.paginas %}
                                <li {%  if pagenumber == page.number %}class='active'{% endif %}><a href="/adm_becas?action=listasolicitudes&{% if search %}s={{ search }}&{% endif %}{% if btipobeca %}btipobeca={{ btipobeca }}&{% endif %}page={{ pagenumber }}">{{ pagenumber }}</a></li>
                            {% endfor %}
                            {% if paging.ultima_pagina %}
                                <li><a href="/adm_becas?action=listasolicitudes&{% if search %}s={{ search }}&{% endif %}{% if btipobeca %}btipobeca={{ btipobeca }}&{% endif %}page={{ paging.ellipsis_derecha }}" class="active">...</a></li>
                                <li><a href="/adm_becas?action=listasolicitudes&{% if search %}s={{ search }}&{% endif %}{% if btipobeca %}btipobeca={{ btipobeca }}&{% endif %}page={{ paging.num_pages }}">{{ paging.num_pages }}</a></li>
                            {% endif %}
                        </ul>
                    </div>
                {% else %}
                    <div class='pagination'>
                        <ul>
                            {% for pagenumber in paging.page_range %}
                                <li {%  if pagenumber == page.number %}class='active'{% endif %}><a href="/adm_becas?action=listasolicitudes&{% if search %}s={{ search }}&{% endif %}{% if btipobeca %}btipobeca={{ btipobeca }}&{% endif %}page={{ pagenumber }}">{{ pagenumber }}</a></li>
                            {% endfor %}
                        </ul>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
<div class="modal fade static" id="itemspanel" style="display: none;">
    <div class="modal-header">
        <h4 class="paneltitle">Mostrar detalles de solicitud</h4>
    </div>
    <div class="modal-body panelbody">
    </div>
    <div class="modal-footer">
        <table class="pull-right">
            <tr>
                <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a></td>
            </tr>
        </table>
    </div>
</div>

<div class="modal fade static" id="itemspanelresumentotal" style="display: none;">
    <div class="modal-header">
        <h4 class="paneltitle">Resumen de Total Neto de Solicitudes</h4>
    </div>
    <div class="modal-body panelbodyresumentotal">
    </div>
    <div class="modal-footer">
        <table class="pull-right">
            <tr>
                <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a></td>
            </tr>
        </table>
    </div>
</div>

<div class="modal fade static" id="itemspaneledit" style="display: none;">
    <div class="modal-header">
        <h4 id="paneltitle">Aprobar o Rechazar Solicitud</h4>
    </div>
    <div class="modal-body panelbodyestado">
        <div class="alert alert-info incompletoaddpreguntasedit" style="display: none;">
            <i class="fa fa-info-sign"></i> Complete todos los campos para continuar
        </div>
        <label for="id_sagpregunta">Estado:</label>
        <select id="estadoid" name="estadoid">
            <option value="2">APROBADO</option>
            <option value="3">RECHAZADO</option>
        </select>
        <label for="id_observacion">Observacion:</label>
        <textarea id="nomobserbacion" rows="3" with="100" style="margin: 0px; width: 400px; height: 70px;" cols="40" name="nomobserbacion"></textarea>
        <input type="hidden" id="codigoitem" name="codigoitem">
    </div>
    <div class="modal-footer">
        <p style="text-align: right; margin-bottom: 0">
            <a href="javascript:;" id="edit_adicionar" class='btn btn-success'> Guardar</a>
            <a href="javascript:;" id="edit_cancel" class="btn btn-danger"> Cancelar</a>
        </p>
    </div>
</div>

<div class="modal fade static" id="asignarbecamodal" style="display: none;">
    <div class="modal-header">
        <table border="0" width="100%" style="background-color: transparent">
            <tr>
                <td style="width: 80%"><h3 class="paneltitleasignarbeca">Asignar Beca</h3></td>
                <td><a href="javascript:;" id="cerrarpanelasignarbeca" class="btn btn-danger btn-mini pull-right"><i class="fa fa-remove"></i></a></td>
            </tr>
        </table>
    </div>
    <div class="modal-body panelbodyasignarbeca">
    </div>
</div>

<div class="modal fade static" id="itemspanelreportesolicitud" style="display: none;">
    <div class="modal-header">
        <h4 class="paneltitle"><span class="fa fa-table"></span> <span id="titulomodal"></span></h4>
    </div>
    <div class="modal-body panelbodyreportesolicitud">
        <div class="span1"><span style="text-align: right; display: block; width: 90px">Desde:</span></div>
        <div class='span1'>
            <input type="text" class="selectorfecha" value="{{ fechaactual }}" id="id_fecha_desde" style="width: 100px;">
        </div>
        <div class="span1"><span style="text-align: right; display: block; width: 90px">Hasta:</span></div>
        <div class='span1'>
            <input type="text" class="selectorfecha" value="{{ fechaactual }}" id="id_fecha_hasta" style="width: 100px; ">
        </div><br><br>

        <div class="span1"><span style="text-align: right; display: block; width: 90px">Tipo de Beca:</span></div>
        <div class='span1'>
            <select id="tipobeca" name="tipobeca" style="width: 300px;">
                <option value="0">---------</option>
                {% for t in tipobeca %}
                    <option value="{{ t.id }}">{{ t.nombre|upper }}</option>
                {% endfor %}
            </select>
        </div>

        <br><br>
    </div>
    <div class="modal-footer">
        <table class="pull-right">
            <tr>
                <td><a href="javascript:;" class="btn btn-generar btn-success" id="generar_reporte"><i class="fa fa-print"></i> Generar</a></td>
                <td><a href="javascript:;" class="btn btn-cerrar btn-info" id="cerrar_reporte"><i class="fa fa-close"></i> Cerrar</a></td>
            </tr>
        </table>
    </div>
</div>

<div class="modal fade static" id="itemspanelanular" style="display: none;">
    <div class="modal-header">
        <table border="0" width="100%" style="background-color: transparent">
            <tr>
                <td style="width: 80%"><h4 class="paneltitleanular">Anular Solicitud</h4></td>
                <td><a href="javascript:;" id="cerrarpanelanular" title="Cerrar" class="btn btn-danger btn-mini pull-right"><i class="fa fa-remove"></i></a></td>
            </tr>
        </table>
    </div>
    <div class="modal-body panelbodyanular">
    </div>
</div>

<div class="modal fade static" id="itemspanelrechazar" style="display: none;">
    <div class="modal-header">
        <table border="0" width="100%" style="background-color: transparent">
            <tr>
                <td style="width: 80%"><h4 class="paneltitlerechazar">Rechazar Solicitud Modalidad OnLine</h4></td>
                <td><a href="javascript:;" id="cerrarpanelrechazar" title="Cerrar" class="btn btn-danger btn-mini pull-right"><i class="fa fa-remove"></i></a></td>
            </tr>
        </table>
    </div>
    <div class="modal-body panelbodyrechazar">
    </div>
</div>

<div class="modal fade static" id="itemspanelrecorrido" style="display: none;">
    <div class="modal-header">
        <h4 class="paneltitlerecorrido">Mostrar Recorrido de la Solicitud</h4>
    </div>
    <div class="modal-body panelbodyrecorrido">
    </div>
    <div class="modal-footer">
        <table class="pull-right">
            <tr>
                <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a></td>
            </tr>
        </table>
    </div>
</div>

<div class="modal fade static" id="itemspanelsubirpendiente" style="display: none;">
    <div class="modal-header">
        <h4 class="paneltitlesubirpendiente">Subir Archivos Pendientes</h4>
    </div>
    <div class="modal-body panelbodysubirpendiente">
    </div>
    <div class="modal-footer">
        <table class="pull-right">
            <tr>
                <td><a href="javascript:;" class="btn btn-guardarpendiente btn-success">Guardar</a>
                    <a href="javascript:;" class="btn btn-cerrarpendiente btn-danger">Cerrar</a></td>
            </tr>
        </table>
    </div>
</div>


<div class="modal fade static" id="itemspanelasignarbeca2" style="display: none;">
    <div class="modal-header">
        <table border="0" width="100%" style="background-color: transparent">
            <tr>
                <td style="width: 80%"><h4 class="paneltitleasignarbeca2">Asignar Beca</h4></td>
                <td><a href="javascript:;" id="cerrarpanelasignarbeca2" title="Cerrar" class="btn btn-danger btn-mini pull-right"><i class="fa fa-remove"></i></a></td>
            </tr>
        </table>
    </div>
    <div class="modal-body panelbodyasignarbeca2">
    </div>
</div>


<div class="modal fade static" id="itemspanelrestaurarsolicitud" style="display: none;">
    <div class="modal-header">
        <h4 class="modal-title">Restaurar solicitud <span></span></h4>
    </div>
    <div class="modal-body">
        <form id="formulario" action="javascript:;" style="width: 100%; margin-bottom: 0">
            <input type="hidden" value="0" name="id_solicitud" id="id_solicitud">
            <div class="row-fluid">
                <fieldset id="fieldset_observacion" class="control-group nomargins" style="float: left; width: 100%">
                    <label class="control-label" for="id_observacion">Observación</label>
                    <div class="controls">
                        <textarea id="id_observacion" name="observacion"></textarea>
                        <p class="help-text"></p>
                    </div>
                </fieldset>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <a href="javascript:;" class="btn btn-generar btn-success action-save"><i class="fa fa-save"></i> Guardar</a>
        <a href="javascript:;" class="btn btn-cerrar btn-info action-close"><i class="fa fa-close"></i> Cerrar</a>
    </div>
</div>

{% endblock %}
