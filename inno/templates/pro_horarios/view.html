{% extends "base.html" %}
{% load sga_extras %}
{% block heading %}
	<script type="text/javascript" src="/static/js/jquery.isloading.min.js"></script>
	<style type="text/css">

        .isloading-wrapper.isloading-right {
            margin-left: 10px;
        }

        .isloading-overlay {
            position: relative;
            text-align: center;
        }

        .isloading-overlay .isloading-wrapper {
            background: #FFFFFF;
            -webkit-border-radius: 7px;
            -webkit-background-clip: padding-box;
            -moz-border-radius: 7px;
            -moz-background-clip: padding;
            border-radius: 7px;
            background-clip: padding-box;
            display: inline-block;
            margin: 0 auto;
            padding: 10px 20px;
            top: 10%;
            z-index: 9000;
        }

        .btn-group, .btn-group-vertical {
            width: 100%;
        }

		{#.modal-header {#}
		{#    padding: 9px 15px;#}
		{#    border-bottom: 1px solid #ddd;#}
		{#    background-color: #eaf5e2;#}
		{#    color: #3f572c;#}
		{#    border-radius: 6px 6px 0 0;#}
		{# }#}

        .btn-flotante {
            font-size: 16px; /* Cambiar el tamaño de la tipografia */
            text-transform: uppercase; /* Texto en mayusculas */
            font-weight: bold; /* Fuente en negrita o bold */
            color: #ffffff; /* Color del texto */
            border-radius: 15px; /* Borde del boton */
            letter-spacing: 2px; /* Espacio entre letras */
            background-color: #51a351; /* Color de fondo */
            padding: 18px 30px; /* Relleno del boton */
            position: fixed;
            bottom: 52px;
            right: 10px;
            transition: all 300ms ease 0ms;
            box-shadow: 0px 8px 15px rgba(0, 0, 0, 0.1);
            z-index: 99;
        }

        .btn-flotante:hover {
            /*background-color: #2c2fa5;*/
            box-shadow: 0px 15px 20px rgba(0, 0, 0, 0.3);
            color: #ffffff;
            transform: translateY(-10px);
        }

        @media only screen and (max-width: 600px) {
            .btn-flotante {
                font-size: 14px;
                padding: 12px 20px;
                bottom: 52px;
                right: 10px;
            }
        }

        .terminos ul {
            list-style: none;
        }

        .terminos ul li::before {
            content: "✅";
            display: inline-block;
            margin-right: 0.2rem;
        }

        .terminos ul li {
            padding-bottom: 2ex;
        }

        .thumbnail {
            /*max-height: 350px !important;
            min-height: 150px !important;*/
            height: 100% !important;
            width: 100%;
            text-align: center;
            padding: 15px;
            border-radius: 15px !important;
        }

        .thumbnail:hover {
            box-shadow: 0px 15px 20px rgba(0, 0, 0, 0.3);
            transform: translateY(-10px);
            cursor: pointer;
        }

        .thumbnail > .thumbnail-subject {
            font-size: 13px;
            font-weight: bold;
            height: 4rem;
            text-align: center;
            overflow: hidden;
            display: block;
            text-overflow: ellipsis;
            width: 100%;
        }

        .thumbnail > .thumbnail-level {
            font-size: 12px;
            /*font-family: "Droid Serif", "DejaVu Serif", "STIX", serif;*/
            font-weight: bold;
        }

        .thumbnail > .thumbnail-eje {
            font-size: 11px;
            /*font-family: "Droid Serif", "DejaVu Serif", "STIX", serif;*/
        }

        .thumbnail > table {
            height: 50px;
            margin-top: 20px;
        }

        .thumbnail > .thumbnail-actions {
            height: 50px;
        }

        @media only screen and (max-width: 600px) {
            .thumbnail {
                /*max-height: 300px !important;
                min-height: 150px !important;*/
                height: 100% !important;
                text-align: center;
                padding: 15px;
                border-radius: 15px !important;
            }
        }

        .search {
            max-width: 300px;
            margin: 0 auto;
            position: relative;
            float: right;
            /*padding-top: 10px;*/
        }

        .search input {
            width: 300px;
            padding: 10px;
            border: 1px solid #cecece;
            border-radius: 3px;
        }

        .search i {
            position: absolute;
            cursor: pointer;
            right: 10px;
            top: 15px;
        }
	</style>
	<style>
        .table thead th {
            vertical-align: bottom;
            background: #d7e9ff54;
            color: #5f7ca0;
            font-size: 13px;
        }
	</style>
	<script type="text/javascript">
        $(function () {
            {% if not profesor.urlzoom %}
                Swal.fire({
                    html: `Ud. no tiene url de Meet configurada, por favor contactar con Servicios Informáticos`,
                    text: "",
                    type: 'warning',
                    showCancelButton: true,
                    allowOutsideClick: false,
                    confirmButtonText: 'Contactar',
                    cancelButtonText: 'Cancelar'
                }).then((result) => {
                    if (result.value) {
                        window.location.href = "mailto:servicios.informaticos@unemi.edu.ec";
                    } else {
                    }
                })

            {% endif %}
        });
	</script>
{% endblock %}
{% block atras %}/{% endblock %}
{% block canvas %}

	<div class='row'>
		<div class='col-lg-12'>
			<div class="headtitle">
				<h3 class="texto-blue">{{ title }}</h3>
			</div>
		</div>
	</div>

	{% if periodo.visiblehorario %}
		<div class="row">
			<div class="col-lg-12">
				<a href="javascript:;" v-on:click="pdfhorarios" class='btn btn-orange'><i class="fa fa-print"></i> Imprimir</a>
				<a href="/pro_horarios?action=actividades" class='btn btn-cian-secondary'><i class="fa fa-calendar"></i> Actividades</a>
			</div>
		</div>
	{% endif %}

	<div class="row">
		{% if not profesor.urlzoom %}
			<div class="col-lg-12">
				<div class="alert alert-danger">
					<i class="fa fa-warning"></i> Ud. no tiene url de Google Meet configurada, por favor contactar con <a href="mailto:servicios.informaticos@unemi.edu.ec" target="_blank"><b>Servicios Informáticos</b></a>
				</div>
			</div>
		{% endif %}
	</div>
	<div class="row">
		<div class="col-lg-6">
			<div id="contenedor_mensajes" style="text-align: left">
				<div v-if="!disponible">
					<div class="alert alert-info" v-if="leccionclases.length >0">
						<h4 class="alert-heading">Alerta Importante!</h4>
						Ud. ya tiene <b>CLASES ABIERTAS</b>:
						<ul>
							<li v-for="leccion in leccionclases"><b>${leccion.nombre_mostrar_solo}</b></li>
						</ul>
						<p v-for="(leccion, index) in leccionclases" v-if="index === Object.keys(leccionclases).length - 1"> Para continuar las mismas de click en: <a class="btn btn-warning btn-form bloqueo_pantalla" id="continuar" v-bind:href="`/pro_clases?action=view&id=${claseabierta.id}&ret=/pro_horarios`">Continuar</a> <a class="btn btn-primary btn-form" v-bind:href="`${leccion.url}`"><i class="fa fa-video-camera"></i> ZOOM</a></p>
					</div>
					{#                            <div v-if="leccionclases.length >0">#}
					{#                                <div class="alert alert-info" v-for="leccion in leccionclases">#}
					{#                                    <a  href="javascript:;" class="close" data-dismiss="alert">×</a>#}
					{#                                    <h4 class="alert-heading">Alerta Importante!</h4>#}
					{#                                    Ud. ya tiene una <b>CLASE ABIERTA</b>, en la materia <b>${leccion.nombre_mostrar_solo}</b> para continuar la misma de click en: <a class="btn btn-warning btn-form bloqueo_pantalla" id="continuar" v-bind:href="`/pro_clases?action=view&id=${claseabierta.id}&ret=/pro_horarios`">Continuar</a> <a class="btn btn-primary btn-form" v-bind:href="`${leccion.url}`"><i class="fa fa-video-camera"></i> ZOOM</a>#}
					{#                                </div>#}
					{#                            </div>#}
					<div class="alert alert-info" v-else>
						<i class="fa fa-info-circle"></i> Ud. ya tiene una <b>CLASE ABIERTA</b>, para continuar la misma de click en: <a class="btn btn-warning btn-form" id="continuar" v-bind:href="`/pro_clases?action=view&id=${claseabierta.id}&ret=/pro_horarios`">Continuar</a>
					</div>
				</div>
				<div v-if="sesiones.length == 0" class="alert alert-danger" style="text-align: justify">
					<i class="fa fa-times"></i> No existen horarios disponibles en la fecha actual
				</div>
				<div class="alert alert-warning">
					<i class="fa fa-clock"></i> La clase se apertura 15 minutos antes y 15 minutos después de la hora planificada en su horario.<br>
					<span v-if="inhouse == true">Usted se encuentra dentro del CAMPUS UNIVERSITARIO IP: ${ip_scan}</span>
					<b class="text-danger" v-else>Usted se encuentra fuera del CAMPUS UNIVERSITARIO IP: ${ip_scan}</b>
				</div>
				<div class="alert alert-info">
					<i class="fa fa-video"></i> La opción de subir video se mostrará una vez culminada la última hora de cada asignatura, basándose en la planificación semanal.
				</div>
				{#                        <div class="alert alert-info">#}
				{#                            #}
				{#                            <h4 class="alert-heading">Soporte Informático</h4>#}
				{#                            Si presentas algún inconveniente tecnologico de las plataformas de UNEMI, puedes comunicarte al siguiente número de#}
				{#                            <a href="https://web.whatsapp.com/send?l=es&amp;phone=+593982564776&amp;text=Hola soy {{ persona }}, " target="_blank" class="btn btn-mini btn-success tu" data-original-title="Enviar mensaje por whatsapp">#}
				{#                                <i class="fa fa-whatsapp"></i> WHATSAPP</a> o dale clic a la imagen <a href="/static/images/img/whatsapp_servicios_informaticos.jpeg" class="fancybox"><i class="fa fa-camera fa-2x"></i></a> para escanear el código QR desde la camara del Whatsapp para obtener mi número#}
				{#                        </div>#}
			</div>
			<div v-if="materiasnoprogramadas.length > 0">
				<div class="alert alert-error">
					<h4 class="alert-heading">Informaci&oacute;n!</h4>
					Tiene asignada materias las cuales no tienen horario creado: <label v-for="m in materiasnoprogramadas">${m.materia}, </label>.
				</div>
			</div>
		</div>
		<div class="col-lg-6">
			<div v-if="tipohorarios.length > 0" style="text-align: justify">
				<table class='table table-bordered table-hover personal-task bg-white-darker'>
					<tbody style="font-weight: bold">
					<tr>
						<td style="text-align: left; padding: 12px"><i class="fa fa-lightbulb"></i> Le recordamos que cada modalidad tiene asignado su respectivo color:</td>
					</tr>
					<tr v-for="th in tipohorarios">
						<td style="text-align: left; padding: 12px"><span class="label" v-bind:style="`background-color: ${th[2]}`">&nbsp;&nbsp;</span> ${th[1]}</td>
					</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
	<div class='row' v-if="sesiones.length > 0" v-for="sesion in sesiones" :key="sesion.id">
		<div class='col-lg-12'>
			<div class="table-responsive">
				<table class='table table-bordered' id="horarioClases">
					<thead>
					<tr>
						<th colspan="8" class="text-center">${sesion.verbose}</th>
					</tr>
					<tr>
						<th style="width: 45px; text-align: center; vertical-align: middle"><i class="fa fa-clock"></i> TURNOS</th>
						<th v-for="dia in semana" v-bind:style="`text-transform: uppercase;text-align: center;width: 160px;${diaactual == dia[0] ? 'background-color: #d4e6fb !important;':''}`">${dia[1]}</th>
						{#                    <th v-else v-for="diatuto in semanatutoria" v-bind:style="`text-transform: uppercase;text-align: center;width: 160px;${diaactual == diatuto[0] ? 'background-color: #f39c12 !important;':''}`">${diatuto[1]}</th>#}
					</tr>
					</thead>
					<tbody>
					<tr v-for="turno in sesion.turnos" v-if="sesion.id != 15">
						<td v-bind:style="`text-align: center; vertical-align: middle; ${turno.activo ? 'background-color: rgba(0,0,0,0.05) !important;':''}`">${turno.comienza} a ${turno.termina}</td>
						<td v-for="dia in turno.semana" style="padding: 2px">
							<!--HORARIO DE CLASES -->
							{#                            <div v-if="dia.clasesactuales.length > 0" v-for="clase in dia.clasesactuales" v-bind:style="`${clase.style_card} text-align: center; width: 100%; min-height: 50px; height: 100%;margin-bottom: 2px; margin-top: 2px; padding: 8px;font-weight: 500;font-size: 11px;line-height: 13px;`">#}
							<div v-if="dia.clasesactuales.length > 0" v-for="clase in dia.clasesactuales" v-bind:style="`${clase.style_card} text-align: center; width: 100%; min-height: 50px; height: 100%; margin-bottom: 2px; margin-top: 2px; padding: 8px;font-weight: 500;font-size: 11px;line-height: 13px;`">
								{#                            <b>${clase.id}</b><br>#}
								<b>${clase.asignatura}</b><br>
								<b>${clase.identificacion}-${clase.paralelo}</b><br>
								<span class="smaller"><b>${clase.alias}</b></span><br>
								<span class="smaller"><b>${clase.nivelmalla}</b></span><br>
								<b class="smaller">${clase.inicio} al ${clase.fin}</b><br>
								{#                            <span class="smaller">${clase.nivel_paralelo}</span><br>#}
								<span class="smaller">${clase.aula}</span><br>
								<span class="smaller">${clase.tipoprofesor}</span><br>
								<span class="smaller">${clase.tipohorario_display}</span><br>
								<span v-if="clase.fechacompara"><b>${clase.fechacompara}</b></span><br>
								<div v-if="clase.action_button">
									<a href="javascript:;" v-if="clase.action_button.action" class="btn btn-default" v-on:click="actionEvent(clase)" v-bind:style="clase.action_button.style"><i v-bind:class="clase.action_button.icon"></i> ${clase.action_button.verbose}</a>
								</div>
							</div>
							<!--HORARIO DE PRACTICAS -->
							<div v-if="dia.clasesactualespractica.length > 0" v-for="clase in dia.clasesactualespractica" v-bind:style="`${clase.style_card} text-align: center; width: 100%; min-height: 50px; height: 100%;margin-bottom: 2px; margin-top: 2px; padding: 8px;font-weight: 500;font-size: 11px;line-height: 13px;`">
								{#                            <b>2222</b><br>#}
								{#                            <b>${clase.id}</b><br>#}
								<b>${clase.asignatura}</b><br>
								<b>${clase.identificacion}-${clase.paralelo}</b><br>
								<span class="smaller"><b>${clase.alias}</b></span><br>
								<span class="smaller"><b>${clase.nivelmalla}</b></span><br>
								<span class="smaller">${clase.inicio} al ${clase.fin}</span><br>
								{#                            <span class="smaller">${clase.nivel_paralelo}</span><br>#}
								<span class="smaller">${clase.aula}</span><br>
								<span class="smaller">${clase.tipoprofesor}</span><br>
								<span class="smaller">${clase.tipohorario_display}</span><br>
								<span v-if="clase.fechacompara"><b>${clase.fechacompara}</b></span><br>
								<div v-if="clase.tipoprofesor_id == 2 || clase.tipoprofesor_id == 13">
									<span class="smaller" v-if="clase.grupoprofesor">${clase.grupoprofesor}</span><br>
									<!--${clase}-->
									<div v-if="clase.action_button">
										<a href="javascript:;" v-if="clase.action_button.action" class="btn btn-warning" v-on:click="actionEvent(clase)" v-bind:style="clase.action_button.style"><i v-bind:class="clase.action_button.icon"></i> ${clase.action_button.verbose}</a>
									</div>
								</div>
							</div>
							<!--HORARIO DE AYUDANTIAS ACTUALES -->
							<div v-if="dia.clasesactualesayudante.length > 0" v-for="clase in dia.clasesactualesayudante" v-bind:style="`${clase.style_card} text-align: center; width: 100%; min-height: 50px; height: 100%;margin-bottom: 2px; margin-top: 2px; padding: 8px;font-weight: 500;font-size: 11px;line-height: 13px;`">
								<b>${clase.asignatura}</b><br>
								<b>${clase.identificacion}-${clase.paralelo}</b><br>
								<span class="smaller"><b>${clase.alias}</b></span><br>
								<span class="smaller">${clase.inicio} al ${clase.fin}</span><br>
								{#                            <span class="smaller">${clase.nivel_paralelo}</span><br>#}
								<span class="smaller">${clase.aula}</span><br>
								<span class="smaller">AYUDANTE</span><br>
								<span class="smaller">${clase.tipohorario_display}</span><br>
								<div v-if="clase.tipoprofesor_id == 2">
									<span class="smaller" v-if="clase.grupoprofesor">${clase.grupoprofesor}</span><br v-if="clase.grupoprofesor">
								</div>
							</div>
							<!--HORARIO CLASES FUTURAS-->
							<div v-if="dia.clasesfuturas.length > 0" v-for="clase in dia.clasesfuturas" v-bind:style="`${clase.style_card}  text-align: center; width: 100%; min-height: 50px; height: 100%;margin-bottom: 2px; margin-top: 2px; padding: 8px;font-weight: 500;font-size: 11px;line-height: 13px;`">
								<b>${clase.asignatura}</b><br>
								<b>${clase.identificacion}-${clase.paralelo}</b><br>
								<span class="smaller"><b>${clase.alias}</b></span><br>
								<span class="smaller">${clase.inicio} al ${clase.fin}</span><br>
								{#                            <span class="smaller">${clase.nivel_paralelo}</span><br>#}
								<span class="smaller">${clase.aula}</span><br>
								<span class="smaller">${clase.tipohorario_display}</span><br>
							</div>
							<!--HORARIO DE AYUDANTIAS FUTURAS -->
							<div v-if="dia.clasesfuturasayudante.length > 0" v-for="clase in dia.clasesfuturasayudante" v-bind:style="`${clase.style_card} text-align: center; width: 100%; min-height: 50px; height: 100%;margin-bottom: 2px; margin-top: 2px; padding: 8px;font-weight: 500;font-size: 11px;line-height: 13px;`">
								<b>${clase.asignatura}</b><br>
								<b>${clase.identificacion}-${clase.paralelo}</b><br>
								<span class="smaller"><b>${clase.alias}</b></span><br>
								<span class="smaller">${clase.inicio} al ${clase.fin}</span><br>
								{#                            <span class="smaller">${clase.nivel_paralelo}</span><br>#}
								<span class="smaller">${clase.aula}</span><br>
								<span class="smaller">AYUDANTE</span><br>
								<span class="smaller">${clase.tipohorario_display}</span><br>
								<div v-if="clase.tipoprofesor_id == 2">
									<span class="smaller" v-if="clase.grupoprofesor">${clase.grupoprofesor}</span><br v-if="clase.grupoprofesor">
								</div>
							</div>
							<!--HORARIO DE ACTIVIDADES -->
							<div v-if="dia.actividadesdocentes.length > 0" v-for="actividad in dia.actividadesdocentes" v-bind:style="`${actividad.style_card} text-align: center; width: 100%; min-height: 50px;  height: 100%;margin-bottom: 2px; margin-top: 2px; padding: 8px;font-weight: 500;font-size: 11px;line-height: 13px;`">
								<b>${actividad.actividad}</b><br>
								<span class="smaller">${actividad.inicio} al ${actividad.fin}</span><br>
								<span class="smaller">${actividad.modalidad_display}</span><br>
								{#                                <span class="smaller" v-if="actividad.marcada != 'None'">Actividad marcada</span><br>#}
								<div v-if="actividad.action_button">
									<a href="javascript:;" v-if="actividad.action_button.action" class="btn btn-warning" v-on:click="actionEvent(actividad)" v-bind:style="actividad.action_button.style"><i v-bind:class="actividad.action_button.icon"></i> ${actividad.action_button.verbose}</a>
								</div>
								<div class="mt-1" v-if="actividad.action_button_upload_video">
									<!-- UPLOAD VIDEO -->
									<a href="javascript:;"  v-if="actividad.action_button_upload_video.action" class="btn btn-default" v-on:click="actionEvent(actividad)" v-bind:style="actividad.action_button_upload_video.style">
										<i v-bind:class="actividad.action_button_upload_video.icon"></i> ${actividad.action_button_upload_video.verbose}
									</a>
								</div>
							</div>
						</td>
					</tr>
					<tr v-for="turno in sesion.turnosactivostutoria" v-if="sesion.id == 17">
						<td v-bind:style="`text-align: center; vertical-align: middle; ${turno.activo ? 'background-color: rgba(0,0,0,0.05) !important;':''}`">${turno.comienza} a ${turno.termina}</td>
						<td v-for="dia in turno.semana" style="padding: 2px">
							<div v-if="dia.horariotutoria.length > 0" v-for="tuto in dia.horariotutoria" v-bind:style="`${tuto.style_card} text-align: center; width: 100%; min-height: 50px;  height: 100%;margin-bottom: 2px; margin-top: 2px; padding: 8px;font-weight: 500;font-size: 11px;line-height: 13px;`">
								<span class="smaller">${tuto.verbose}</span>
								<div v-if="tuto.action_button">
									{#                                ${tuto.style_card}#}
									<a href="javascript:;" v-if="tuto.action_button.action" class="btn btn-warning" v-on:click="actionEvent(tuto)" v-bind:style="tuto.action_button.style"><i v-bind:class="tuto.action_button.icon"></i> ${tuto.action_button.verbose}</a>
								</div>
							</div>
						</td>
					</tr>
					</tbody>
					<tbody>
					</tbody>
				</table>
			</div>
		</div>
	</div>

	<div class="modal fade static" id="modalCreateVideo" style="display: none;">
		<div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content">
				<div class="modal-header">
					<h3 class="paneltitle"><i class="fa fa-camera"></i> Crear video</h3>
				</div>
				<div class="modal-body panelbodyforo">
					<h3></h3>
					Enlace a la grabación 1 <span style="color:#FF0000">* Obligatorio</span><br>
					<textarea rows="3" name="link_1" id="link_1" style="width: 100%; resize: none;"></textarea><br>
					Enlace a la grabación 2<br>
					<textarea rows="3" name="link_2" id="link_2" style="width: 100%; resize: none;"></textarea><br>
					Enlace a la grabación 3<br>
					<textarea rows="3" name="link_3" id="link_3" style="width: 100%; resize: none;"></textarea>
				</div>
				<div class="modal-footer">
					<a href="javascript:;" class="btn btn-success actionSaveVideo">Crear</a>
					<a href="javascript:;" class="btn btn-inverse actionCloseVideo">Cancelar</a>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade static" id="modalCreateVideoActividad" style="display: none;">
		<div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content">
				<div class="modal-header">
					<h3 class="paneltitle"><i class="fa fa-camera"></i> Crear video</h3>
				</div>
				<div class="modal-body panelbodyforo">
					<h3></h3>
					Enlace a la grabación 1 <span style="color:#FF0000">* Obligatorio</span><br>
					<textarea rows="3" name="link_1" id="link_1" style="width: 100%; resize: none;"></textarea><br>
					Enlace a la grabación 2<br>
					<textarea rows="3" name="link_2" id="link_2" style="width: 100%; resize: none;"></textarea><br>
					Enlace a la grabación 3<br>
					<textarea rows="3" name="link_3" id="link_3" style="width: 100%; resize: none;"></textarea>
				</div>
				<div class="modal-footer">
					<a href="javascript:;" class="btn btn-success actionSaveVideoActividad">Crear</a>
					<a href="javascript:;" class="btn btn-inverse actionCloseVideoActividad">Cancelar</a>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade static" id="modalCreateForo" style="display: none;">
		<div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content">
				<div class="modal-header">
					<h3 class="paneltitle">Crear clase asincrónica</h3>
				</div>
				<div class="modal-body panelbodyforo">
					<h3></h3>
					Enlace a la grabación 1 <span style="color:#FF0000">* Obligatorio</span><br>
					<textarea rows="3" name="link_1" id="link_1" style="width: 100%; resize: none;"></textarea><br>
					Enlace a la grabación 2<br>
					<textarea rows="3" name="link_2" id="link_2" style="width: 100%; resize: none;"></textarea><br>
					Enlace a la grabación 3<br>
					<textarea rows="3" name="link_3" id="link_3" style="width: 100%; resize: none;"></textarea>
				</div>
				<div class="modal-footer">
					<a href="javascript:;" class="btn btn-success actionSaveForo">Crear</a>
					<a href="javascript:;" class="btn btn-inverse actionCloseForo">Cancelar</a>
				</div>
			</div>
		</div>
	</div>

{% endblock %}

{% block extraJs %}
	<script src="/static/js/vue.js"></script>
	<script type="text/javascript">
        const loadAjax = (data, url) => new Promise((resolve, reject) => {
            $.ajax({
                type: "POST",
                url: url,
                data: data,
                success: function (response) {
                    resolve({
                        error: false,
                        value: response
                    });
                },
                error: function () {
                    reject({
                        error: true,
                        message: "Error al enviar los datos."
                    });
                },
                dataType: "json"
            });

        });
        var app = new Vue({
            delimiters: ['${', '}'],
            el: '#app',
            data: {
                profesor_id: parseInt('{{ profesor.id }}'),
                periodo_id: parseInt('{{ periodo.id }}'),
                puede_recargar: true,
                disponible: false,
                leccionclases: [],
                claseabierta: {},
                materiasnoprogramadas: {},
                clase: {},
                semana: [],
                sesiones: [],
                tipohorarios: [],
                diaactual: null,
                inhouse: false,
                ip_scan: "",
            },
            created() {
                var self = this;
            },
            mounted: function () {
                var self = this;
                self.loading();
                self.loadInitial(true);
                self.$modalCreateVideoActividad = $("#modalCreateVideoActividad");
                $(".actionCloseVideoActividad", self.$modalCreateVideoActividad).click(function () {
                    self.closeModalCreateVideoActividad();
                });
                $(".actionSaveVideoActividad", self.$modalCreateVideoActividad).click(function () {
                    self.createVideoActividad();
                });
                self.$modalCreateVideo = $("#modalCreateVideo");
                $(".actionCloseVideo", self.$modalCreateVideo).click(function () {
                    self.closeModalCreateVideo();
                });
                $(".actionSaveVideo", self.$modalCreateVideo).click(function () {
                    self.createVideo();
                });
                self.$modalCreateForo = $("#modalCreateForo");
                $(".actionCloseForo", self.$modalCreateForo).click(function () {
                    self.closeModalCreateForo();
                });
                $(".actionSaveForo", self.$modalCreateForo).click(function () {
                    self.createForo();
                });
                setInterval(function () {
                    //console.log("pasa");
                    self.loadInterval();
                }, 200000);

            },
            methods: {
                loading: function () {
                    if (!$(".blockUI").length) {
                        $.blockUI({
                            message: '<span class="spinner-grow spinner-border-lg" role="status" aria-hidden="true" style="width: 10rem; height: 10rem; background-color: #F8C471 ; color: #F8C471 ; !important"</span>',
                            css: {
                                backgroundColor: 'transparent',
                                border: '0',
                                zIndex: 9999999
                            },
                            overlayCSS: {
                                backgroundColor: '#fff',
                                opacity: 0.8,
                                zIndex: 9999990
                            }
                        });

                    }
                },
                loadInterval: function () {
                    var self = this;
                    if (self.puede_recargar) {
                        self.loadInitial(false);
                    }
                },
                blockInterface: function ($el/*=null*/) {
                    var self = this;
                    if ($el) {
                        $.blockUI({
                            message: '<span class="spinner-grow spinner-border-lg" role="status" aria-hidden="true" style="width: 10rem; height: 10rem; background-color: #F8C471 ; color: #F8C471 ; !important"</span>',
                            css: {
                                backgroundColor: 'transparent',
                                border: '0',
                                zIndex: 9999999
                            },
                            overlayCSS: {
                                backgroundColor: '#fff',
                                opacity: 0.8,
                                zIndex: 9999990
                            }
                        });
                    } else {
                        $.blockUI({
                            message: '<span class="spinner-grow spinner-border-lg" role="status" aria-hidden="true" style="width: 10rem; height: 10rem; background-color: #F8C471 ; color: #F8C471 ; !important"</span>',
                            css: {
                                backgroundColor: 'transparent',
                                border: '0',
                                zIndex: 9999999
                            },
                            overlayCSS: {
                                backgroundColor: '#fff',
                                opacity: 0.8,
                                zIndex: 9999990
                            }
                        });

                    }
                },
                unBlockInterface: function ($el/*=null*/) {
                    var self = this;
                    if ($el) {
                        $el.isLoading("hide");
                    } else {
                        $.isLoading("hide");
                    }
                },
                loadInitial: function (initial = false) {
                    var self = this;
                    if (initial) {
                        self.loading();
                    } else {
                        self.blockInterface($("#horarioClases"));
                        self.blockInterface($("#contenedor_mensajes"));
                    }
                    self.puede_recargar = false;
                    loadAjax({
                        'action': 'loadInitialDataHorarioDocente',
                    }, '/inno/api')
                        .then(response => {
                            if (response.value.result == 'ok') {
                                $.unblockUI();
                                self.disponible = response.value.disponible;
                                self.leccionclases = response.value.aLeccionClases;
                                self.claseabierta = response.value.aClaseAbierta;
                                self.materiasnoprogramadas = response.value.aMateriasNoProgramadas;
                                self.semana = response.value.semana;
                                //self.semanatutoria = response.value.semanatutoria;
                                self.sesiones = response.value.aSesiones;
                                self.tipohorarios = response.value.aTipoHorarios;
                                self.diaactual = response.value.diaactual;
                                self.inhouse = response.value.inhouse;
                                self.ip_scan = response.value.ip_scan;
                                if (initial) {
                                    $.unblockUI();
                                } else {
                                    $.unblockUI();
                                    self.unBlockInterface($("#horarioClases"));
                                    self.unBlockInterface($("#contenedor_mensajes"));
                                }
                                $.unblockUI();
                                self.puede_recargar = true;

                            } else {
                                $.unblockUI();
                                if (initial) {
                                    $.unblockUI();
                                } else {
                                    self.unBlockInterface($("#horarioClases"));
                                    self.unBlockInterface($("#contenedor_mensajes"));
                                }
                                Swal.fire({
                                    title: `NOTIFICACIÓN`,
                                    text: response.value.mensaje,
                                    type: 'error',
                                    icon: 'error',
                                    showCancelButton: false,
                                    allowOutsideClick: false,
                                    confirmButtonColor: '#3085d6',
                                    cancelButtonColor: '#d33',
                                    confirmButtonText: 'Aceptar',
                                    cancelButtonText: 'Cancelar'
                                }).then((result) => {
                                    if (result.value) {
                                        self.loading();
                                        window.location.href = "/";
                                    }
                                }).catch(error => {
                                    self.loading();
                                    window.location.href = "/";
                                });
                            }
                        })
                        .catch(error => {
                            if (initial) {
                                $.unblockUI();
                            } else {
                                $.unblockUI();
                                self.unBlockInterface($("#horarioClases"));
                                self.unBlockInterface($("#contenedor_mensajes"));
                            }
                            Swal.fire({
                                title: `NOTIFICACIÓN`,
                                text: "Error al enviar los datos.",
                                type: 'error',
                                icon: 'error',
                                showCancelButton: false,
                                allowOutsideClick: false,
                                confirmButtonColor: '#3085d6',
                                cancelButtonColor: '#d33',
                                confirmButtonText: 'Aceptar',
                                cancelButtonText: 'Cancelar'
                            }).then((result) => {
                                $.unblockUI();
                                if (result.value) {
                                    self.loading();
                                    window.location.href = "/";
                                }
                            }).catch(error => {
                                self.loading();
                                window.location.href = "/";
                            });
                        });
                },
                actionEvent: function (event) {
                    var self = this;
                    //console.log(event);
                    self.clase = {};
                    if (event.action_button.action == 'go_class') {
                        self.clase = event;
                        var a = document.createElement("a");
                        a.target = "_blank";
                        a.href = self.clase.action_button.url;
                        a.click();
                    } else if (event.action_button.action == 'open_class') {
                        self.clase = event;
                        self.openClass();
                    } else if (event.action_button.action == 'open_class_asincronica') {
                        self.clase = event;
                        self.openClassAsincronica();
                    } else if (event.action_button.action == 'create_video') {
                        self.clase = event;
                        self.puede_recargar = false;
                        $("[name='link_1']", self.$modalCreateVideo).val('');
                        $("[name='link_2']", self.$modalCreateVideo).val('');
                        $("[name='link_3']", self.$modalCreateVideo).val('');
                        $(".modal-body h3", self.$modalCreateVideo).html(`Materia: ${self.clase.asignatura}`);
                        self.$modalCreateVideo.modal({backdrop: 'static'}).modal('show');
                    } else if (event.action_button.action == 'create_foro') {
                        self.clase = event;
                        self.puede_recargar = false;
                        $("[name='link_1']", self.$modalCreateForo).val('');
                        $("[name='link_2']", self.$modalCreateForo).val('');
                        $("[name='link_3']", self.$modalCreateForo).val('');
                        $(".modal-body h3", self.$modalCreateForo).html(`Materia: ${self.clase.asignatura}`);
                        self.$modalCreateForo.modal({backdrop: 'static'}).modal('show');
                    } else if (event.action_button.action == 'view_video') {
                        var a = document.createElement("a");
                        self.clase = event;
                        a.target = "_blank";
                        a.href = self.clase.action_button.url;
                        a.click();
                    } else if (event.action_button.action == 'add_clase_tutoria') {
                        self.clase = event;
                        self.openTutoria();
                    } else if (event.action_button.action == 'open_class_practica') {
                        self.clase = event;
                        self.openClassPractica();
                    } else if (event.action_button.action == 'marcar_asistencia') {
                        self.asistenciaActividad(event)
                    } else if (event.action_button_upload_video.action == 'upload_video_actividad') {
                        self.clase = event;
                        self.puede_recargar = false;
                        $("[name='link_1']", self.$modalCreateVideoActividad).val('');
                        $("[name='link_2']", self.$modalCreateVideoActividad).hide();
                        $("[name='link_3']", self.$modalCreateVideoActividad).hide();
                        self.$modalCreateVideoActividad.modal({backdrop: 'static'}).modal('show').on('hidden.bs.modal', function (e) {
                            $("[name='link_2']", self.$modalCreateVideoActividad).show();
                            $("[name='link_3']", self.$modalCreateVideoActividad).show();
                        });
                    }
                },
                closeModalCreateVideo: function () {
                    var self = this;
                    self.clase = {};
                    self.puede_recargar = true;
                    self.$modalCreateVideo.modal('hide');
                },
                closeModalCreateVideoActividad: function () {
                    var self = this;
                    self.clase = {};
                    self.puede_recargar = true;
                    self.$modalCreateVideoActividad.modal('hide');
                },
                openClass: function () {
                    var self = this;

                    //clearInterval(self.$chequeo);
                    self.puede_recargar = false;
                    Swal.fire({
                        title: `NOTIFICACIÓN`,
                        html: ` Antes de registrar la asistencia, por favor asegúrate de seleccionar un <b>Tema</b> en la sección <b>Temas y Subtemas</b>`,
                        type: 'warning',
                        icon: 'warning',
                        showCancelButton: false,
                        allowOutsideClick: false,
                        confirmButtonColor: '#3085d6',
                        cancelButtonColor: '#d33',
                        confirmButtonText: 'Aceptar',
                        cancelButtonText: 'Cancelar'
                    }).then((result) => {
                        if (result.value) {
                            self.loading();
                            //self.puede_recargar = true;
                            loadAjax({
                                'action': 'nuevaleccion',
                                'clases': self.clase.action_button.parametro,
                            }, '/pro_clases')
                                .then(response => {
                                    $.unblockUI();
                                    if (response.value.result == 'ok') {
                                        self.loading();
                                        location.href = "/pro_clases?action=view&id=" + response.value.lg;
                                    } else {
                                        Swal.fire({
                                            title: `NOTIFICACIÓN`,
                                            text: response.value.mensaje,
                                            type: 'error',
                                            icon: 'error',
                                            showCancelButton: false,
                                            allowOutsideClick: false,
                                            confirmButtonColor: '#3085d6',
                                            cancelButtonColor: '#d33',
                                            confirmButtonText: 'Aceptar',
                                            cancelButtonText: 'Cancelar'
                                        }).then((result) => {
                                            if (result.value) {
                                                self.puede_recargar = true;
                                            }
                                        }).catch(error => {
                                            self.puede_recargar = true;
                                        });
                                    }
                                })
                                .catch(error => {
                                    $.unblockUI();
                                    Swal.fire({
                                        title: `NOTIFICACIÓN`,
                                        text: "Error al enviar los datos.",
                                        type: 'error',
                                        icon: 'error',
                                        showCancelButton: false,
                                        allowOutsideClick: false,
                                        confirmButtonColor: '#3085d6',
                                        cancelButtonColor: '#d33',
                                        confirmButtonText: 'Aceptar',
                                        cancelButtonText: 'Cancelar'
                                    }).then((result) => {
                                        if (result.value) {
                                            self.puede_recargar = true;
                                        }
                                    }).catch(error => {
                                        self.puede_recargar = true;
                                    });
                                });
                        }
                    }).catch(error => {
                        self.puede_recargar = true;
                    });


                },
                openClassAsincronica: function () {
                    var self = this;
                    self.loading();
                    //clearInterval(self.$chequeo);
                    self.puede_recargar = false;
                    loadAjax({
                        'action': 'nuevaleccion',
                        'clases': self.clase.action_button.parametro,
                        'cerrada': 1
                    }, '/pro_clases')
                        .then(response => {
                            $.unblockUI();
                            if (response.value.result == 'ok') {
                                /*self.loading();
                                location.href = "/pro_clases?action=view&id="+response.value.lg;*/
                                $("[name='link_1']", self.$modalCreateVideo).val('');
                                $("[name='link_2']", self.$modalCreateVideo).val('');
                                $("[name='link_3']", self.$modalCreateVideo).val('');
                                $(".modal-body h3", self.$modalCreateVideo).html(`Materia: ${self.clase.asignatura}`);
                                self.$modalCreateVideo.modal({backdrop: 'static'}).modal('show');
                            } else {
                                Swal.fire({
                                    title: `NOTIFICACIÓN`,
                                    text: response.value.mensaje,
                                    type: 'error',
                                    icon: 'error',
                                    showCancelButton: false,
                                    allowOutsideClick: false,
                                    confirmButtonColor: '#3085d6',
                                    cancelButtonColor: '#d33',
                                    confirmButtonText: 'Aceptar',
                                    cancelButtonText: 'Cancelar'
                                }).then((result) => {
                                    if (result.value) {
                                        self.puede_recargar = true;
                                    }
                                }).catch(error => {
                                    self.puede_recargar = true;
                                });
                            }
                        })
                        .catch(error => {
                            $.unblockUI();
                            Swal.fire({
                                title: `NOTIFICACIÓN`,
                                text: "Error al enviar los datos.",
                                type: 'error',
                                icon: 'error',
                                showCancelButton: false,
                                allowOutsideClick: false,
                                confirmButtonColor: '#3085d6',
                                cancelButtonColor: '#d33',
                                confirmButtonText: 'Aceptar',
                                cancelButtonText: 'Cancelar'
                            }).then((result) => {
                                if (result.value) {
                                    self.puede_recargar = true;
                                }
                            }).catch(error => {
                                self.puede_recargar = true;
                            });
                        });

                },
                openTutoria: function () {
                    var self = this;
                    self.loading();
                    //clearInterval(self.$chequeo);
                    self.puede_recargar = false;
                    loadAjax({
                        'action': 'addClaseTutoria',
                        'id': self.clase.action_button.parametro,
                    }, '/pro_horarios')
                        .then(response => {
                            $.unblockUI();
                            if (response.value.result == 'ok') {
                                self.puede_recargar = true;
                                var a = document.createElement("a");
                                a.target = "_blank";
                                a.href = self.clase.action_button.url;
                                a.click();
                            } else {
                                Swal.fire({
                                    title: `NOTIFICACIÓN`,
                                    text: response.value.mensaje,
                                    type: 'error',
                                    icon: 'error',
                                    showCancelButton: false,
                                    allowOutsideClick: false,
                                    confirmButtonColor: '#3085d6',
                                    cancelButtonColor: '#d33',
                                    confirmButtonText: 'Aceptar',
                                    cancelButtonText: 'Cancelar'
                                }).then((result) => {
                                    if (result.value) {
                                        self.puede_recargar = true;
                                    }
                                }).catch(error => {
                                    self.puede_recargar = true;
                                });
                            }
                        })
                        .catch(error => {
                            $.unblockUI();
                            Swal.fire({
                                title: `NOTIFICACIÓN`,
                                text: "Error al enviar los datos.",
                                type: 'error',
                                icon: 'error',
                                showCancelButton: false,
                                allowOutsideClick: false,
                                confirmButtonColor: '#3085d6',
                                cancelButtonColor: '#d33',
                                confirmButtonText: 'Aceptar',
                                cancelButtonText: 'Cancelar'
                            }).then((result) => {
                                if (result.value) {
                                    self.puede_recargar = true;
                                }
                            }).catch(error => {
                                self.puede_recargar = true;
                            });
                        });

                },
                openClassPractica: function () {
                    var self = this;
                    self.loading();
                    //clearInterval(self.$chequeo);
                    self.puede_recargar = false;
                    loadAjax({
                        'action': 'nuevaleccion',
                        'clases': self.clase.action_button.parametro,
                        'fecha': self.clase.action_button.fecha,
                        'cerrada': 1,
                    }, '/pro_clases')
                        .then(response => {
                            $.unblockUI();
                            if (response.value.result == 'ok') {
                                self.loading();
                                location.href = "/pro_clases?action=registroasistencia&id=" + response.value.idlec;
                            } else {
                                Swal.fire({
                                    title: `NOTIFICACIÓN`,
                                    text: response.value.mensaje,
                                    type: 'error',
                                    icon: 'error',
                                    showCancelButton: false,
                                    allowOutsideClick: false,
                                    confirmButtonColor: '#3085d6',
                                    cancelButtonColor: '#d33',
                                    confirmButtonText: 'Aceptar',
                                    cancelButtonText: 'Cancelar'
                                }).then((result) => {
                                    if (result.value) {
                                        self.puede_recargar = true;
                                    }
                                }).catch(error => {
                                    self.puede_recargar = true;
                                });
                            }
                        })
                        .catch(error => {
                            $.unblockUI();
                            Swal.fire({
                                title: `NOTIFICACIÓN`,
                                text: "Error al enviar los datos.",
                                type: 'error',
                                icon: 'error',
                                showCancelButton: false,
                                allowOutsideClick: false,
                                confirmButtonColor: '#3085d6',
                                cancelButtonColor: '#d33',
                                confirmButtonText: 'Aceptar',
                                cancelButtonText: 'Cancelar'
                            }).then((result) => {
                                if (result.value) {
                                    self.puede_recargar = true;
                                }
                            }).catch(error => {
                                self.puede_recargar = true;
                            });
                        });
                },
                createVideo: function () {
                    var self = this;
                    self.puede_recargar = false;
                    let link_1 = $("#link_1", self.$modalCreateVideo).val();
                    let link_2 = $("#link_2", self.$modalCreateVideo).val();
                    let link_3 = $("#link_3", self.$modalCreateVideo).val();
                    if (link_1 == '') {
                        Swal.fire({
                            toast: true,
                            position: 'top-end',
                            type: 'error',
                            title: 'Favor ingrese enlace de la grabación 1',
                            showConfirmButton: false,
                            timer: 6000
                        });
                        return false;
                    }
                    self.loading();
                    loadAjax({
                        'action': 'addVideoVirtual',
                        'idc': self.clase.id,
                        'link_1': link_1,
                        'link_2': link_2,
                        'link_3': link_3,
                        'dia': self.clase.dia,
                    }, '/pro_horarios')
                        .then(response => {
                            $.unblockUI();
                            if (response.value.result == 'ok') {
                                Swal.fire({
                                    toast: true,
                                    position: 'top-end',
                                    type: 'success',
                                    title: response.value.mensaje,
                                    showConfirmButton: false,
                                    timer: 6000
                                });
                                self.closeModalCreateVideo();
                                self.loadInitial(false);
                            } else {
                                Swal.fire({
                                    title: `NOTIFICACIÓN`,
                                    text: response.value.mensaje,
                                    type: 'error',
                                    icon: 'error',
                                    showCancelButton: false,
                                    allowOutsideClick: false,
                                    confirmButtonColor: '#3085d6',
                                    cancelButtonColor: '#d33',
                                    confirmButtonText: 'Aceptar',
                                    cancelButtonText: 'Cancelar'
                                }).then((result) => {
                                    if (result.value) {

                                    }
                                }).catch(error => {
                                    Swal.fire({
                                        toast: true,
                                        position: 'top-end',
                                        type: 'error',
                                        title: 'Ocurrio un error inesperado',
                                        showConfirmButton: false,
                                        timer: 6000
                                    });
                                    self.closeModalCreateVideo();
                                });
                            }
                        })
                        .catch(error => {
                            $.unblockUI();
                            Swal.fire({
                                title: `NOTIFICACIÓN`,
                                text: "Error al enviar los datos.",
                                type: 'error',
                                icon: 'error',
                                showCancelButton: false,
                                allowOutsideClick: false,
                                confirmButtonColor: '#3085d6',
                                cancelButtonColor: '#d33',
                                confirmButtonText: 'Aceptar',
                                cancelButtonText: 'Cancelar'
                            }).then((result) => {
                                if (result.value) {
                                    self.closeModalCreateVideo();
                                }
                            }).catch(error => {
                                Swal.fire({
                                    toast: true,
                                    position: 'top-end',
                                    type: 'error',
                                    title: 'Ocurrio un error inesperado',
                                    showConfirmButton: false,
                                    timer: 6000
                                });
                                self.closeModalCreateVideo();
                            });
                        });
                },
                createVideoActividad: function () {
                    var self = this;
                    self.puede_recargar = false;
                    let link_1 = $("#link_1", self.$modalCreateVideoActividad).val();
                    let link_2 = $("#link_2", self.$modalCreateVideoActividad).val();
                    let link_3 = $("#link_3", self.$modalCreateVideoActividad).val();
                    if (link_1 == '') {
                        Swal.fire({
                            toast: true,
                            position: 'top-end',
                            type: 'error',
                            title: 'Favor ingrese enlace de la grabación 1',
                            showConfirmButton: false,
                            timer: 6000
                        });
                        return false;
                    }
                    self.loading();
                    loadAjax({
                        'action': 'addVideoVirtualActividad',
                        'id': self.clase.action_button_upload_video.parametro,
                        'idc': self.clase.action_button_upload_video.id_claseactividad,
                        'link_1': link_1,
                        'link_2': link_2,
                        'link_3': link_3,
                        'dia': self.clase.dia,
                    }, '/pro_horarios')
                        .then(response => {
                            $.unblockUI();
                            if (response.value.result == 'ok') {
                                Swal.fire({
                                    toast: true,
                                    position: 'top-end',
                                    type: 'success',
                                    title: response.value.mensaje,
                                    showConfirmButton: false,
                                    timer: 6000
                                });
                                self.closeModalCreateVideoActividad();
                                self.loadInitial(false);
                            } else {
                                Swal.fire({
                                    title: `NOTIFICACIÓN`,
                                    text: response.value.mensaje,
                                    type: 'error',
                                    icon: 'error',
                                    showCancelButton: false,
                                    allowOutsideClick: false,
                                    confirmButtonColor: '#3085d6',
                                    cancelButtonColor: '#d33',
                                    confirmButtonText: 'Aceptar',
                                    cancelButtonText: 'Cancelar'
                                }).then((result) => {
                                    if (result.value) {

                                    }
                                }).catch(error => {
                                    Swal.fire({
                                        toast: true,
                                        position: 'top-end',
                                        type: 'error',
                                        title: 'Ocurrio un error inesperado',
                                        showConfirmButton: false,
                                        timer: 6000
                                    });
                                    self.closeModalCreateVideoActividad();
                                });
                            }
                        })
                        .catch(error => {
                            $.unblockUI();
                            Swal.fire({
                                title: `NOTIFICACIÓN`,
                                text: "Error al enviar los datos.",
                                type: 'error',
                                icon: 'error',
                                showCancelButton: false,
                                allowOutsideClick: false,
                                confirmButtonColor: '#3085d6',
                                cancelButtonColor: '#d33',
                                confirmButtonText: 'Aceptar',
                                cancelButtonText: 'Cancelar'
                            }).then((result) => {
                                if (result.value) {
                                    self.closeModalCreateVideoActividad();
                                }
                            }).catch(error => {
                                Swal.fire({
                                    toast: true,
                                    position: 'top-end',
                                    type: 'error',
                                    title: 'Ocurrio un error inesperado',
                                    showConfirmButton: false,
                                    timer: 6000
                                });
                                self.closeModalCreateVideoActividad();
                            });
                        });
                },
                closeModalCreateForo: function () {
                    var self = this;
                    self.clase = {};
                    self.puede_recargar = true;
                    self.$modalCreateForo.modal('hide');
                },
                createForo: function () {
                    var self = this;
                    self.puede_recargar = false;
                    let link_1 = $("#link_1", self.$modalCreateForo).val();
                    let link_2 = $("#link_2", self.$modalCreateForo).val();
                    let link_3 = $("#link_3", self.$modalCreateForo).val();
                    if (link_1 == '') {
                        Swal.fire({
                            toast: true,
                            position: 'top-end',
                            type: 'error',
                            title: 'Favor ingrese enlace 1',
                            showConfirmButton: false,
                            timer: 6000
                        });
                        return false;
                    }
                    self.loading();
                    loadAjax({
                        'action': 'addForoVirtual',
                        'idc': self.clase.id,
                        'link_1': link_1,
                        'link_2': link_2,
                        'link_3': link_3,
                        'dia': self.clase.dia,
                    }, '/pro_horarios')
                        .then(response => {
                            $.unblockUI();
                            if (response.value.result == 'ok') {
                                Swal.fire({
                                    toast: true,
                                    position: 'top-end',
                                    type: 'success',
                                    title: response.value.mensaje,
                                    showConfirmButton: false,
                                    timer: 6000
                                });
                                self.closeModalCreateForo();
                                self.loadInitial(false);
                            } else {
                                Swal.fire({
                                    title: `NOTIFICACIÓN`,
                                    text: response.value.mensaje,
                                    type: 'error',
                                    icon: 'error',
                                    showCancelButton: false,
                                    allowOutsideClick: false,
                                    confirmButtonColor: '#3085d6',
                                    cancelButtonColor: '#d33',
                                    confirmButtonText: 'Aceptar',
                                    cancelButtonText: 'Cancelar'
                                }).then((result) => {
                                    if (result.value) {

                                    }
                                }).catch(error => {
                                    Swal.fire({
                                        toast: true,
                                        position: 'top-end',
                                        type: 'error',
                                        title: 'Ocurrio un error inesperado',
                                        showConfirmButton: false,
                                        timer: 6000
                                    });
                                    self.closeModalCreateForo();
                                });
                            }
                        })
                        .catch(error => {
                            $.unblockUI();
                            Swal.fire({
                                title: `NOTIFICACIÓN`,
                                text: "Error al enviar los datos.",
                                type: 'error',
                                icon: 'error',
                                showCancelButton: false,
                                allowOutsideClick: false,
                                confirmButtonColor: '#3085d6',
                                cancelButtonColor: '#d33',
                                confirmButtonText: 'Aceptar',
                                cancelButtonText: 'Cancelar'
                            }).then((result) => {
                                if (result.value) {
                                    self.closeModalCreateForo();
                                }
                            }).catch(error => {
                                Swal.fire({
                                    toast: true,
                                    position: 'top-end',
                                    type: 'error',
                                    title: 'Ocurrio un error inesperado',
                                    showConfirmButton: false,
                                    timer: 6000
                                });
                                self.closeModalCreateForo();
                            });
                        });
                },
                pdfhorarios: function () {
                    var self = this;
                    openwindow('POST',
                        '/pro_horarios',
                        {
                            action: 'pdf_horarios',
                            profesor: self.profesor_id,
                            periodo: self.periodo_id
                        }, '_blank');
                },
                asistenciaActividad: function (actividad) {
                    var self = this;
                    self.loading();
                    self.puede_recargar = false;
                    self.actividad = actividad;
                    //console.log(self.actividad.id)
                    loadAjax({
                        'action': 'asistenciaactividad',
                        'actividad': self.actividad.id
                    }, '/pro_horarios')
                        .then(response => {
                            $.unblockUI();
                            if (response.value.result === 'ok') {
                                self.loading();
                                Swal.fire({
                                    title: `NOTIFICACIÓN`,
                                    text: response.value.mensaje,
                                    type: 'info',
                                    icon: 'info',
                                    showCancelButton: false,
                                    allowOutsideClick: false,
                                    confirmButtonColor: '#3085d6',
                                    confirmButtonText: 'Aceptar'
                                }).then((result) => {
                                    if (result.value) {
                                        self.puede_recargar = true;
                                        self.loadInitial(false);
                                    }
                                }).catch(error => {
                                    self.puede_recargar = true;
                                });
                            } else {
                                Swal.fire({
                                    title: `NOTIFICACIÓN`,
                                    text: response.value.mensaje,
                                    type: 'error',
                                    icon: 'error',
                                    showCancelButton: false,
                                    allowOutsideClick: false,
                                    confirmButtonColor: '#3085d6',
                                    cancelButtonColor: '#d33',
                                    confirmButtonText: 'Aceptar',
                                    cancelButtonText: 'Cancelar'
                                }).then((result) => {
                                    if (result.value) {
                                        self.puede_recargar = true;
                                    }
                                }).catch(error => {
                                    self.puede_recargar = true;
                                });
                            }
                        })
                        .catch(error => {
                            $.unblockUI();
                            Swal.fire({
                                title: `NOTIFICACIÓN`,
                                text: "Error al enviar los datos.",
                                type: 'error',
                                icon: 'error',
                                showCancelButton: false,
                                allowOutsideClick: false,
                                confirmButtonColor: '#3085d6',
                                cancelButtonColor: '#d33',
                                confirmButtonText: 'Aceptar',
                                cancelButtonText: 'Cancelar'
                            }).then((result) => {
                                if (result.value) {
                                    self.puede_recargar = true;
                                }
                            }).catch(error => {
                                self.puede_recargar = true;
                            });
                        });
                }
            }
        });
	</script>
{% endblock %}

