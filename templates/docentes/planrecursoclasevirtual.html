{% extends "ajaxformbs.html" %}
{% load sga_extras %}
{% block heading %}
    <style>
        {#table, tr, td, th#}
        {#{#}
        {#    border: 1px solid black;#}
        {#    border-collapse:collapse;#}
        {# }#}
        {#tr.header#}
        {#{#}
        {#    cursor:pointer;#}
        {# }#}
        .header .sign:after {
            content: "+";
            display: inline-block;
        }

        .header.expand .sign:after {
            content: "-";
        }
    </style>
    <script>
        $(function () {
            fechainicio = $(".selectorfechainicio");

            actualiza_fechainicio = function (elemento) {
                var idsilabosemanal;
                var fechaanterior = elemento.attr("va");
                var fechaactual = elemento.val();
                $('.datepicker').css({"display": "none"});
                if (fechaactual != fechaanterior) {
                    idsilabosemanal = elemento.attr("mid");
                    bloqueointerface();
                    $.post("/docentes", {
                        'action': 'updatefechainicio',
                        'idsilabosemanal': idsilabosemanal,
                        'fecha': fechaactual, 'tipo': 1
                    }, function (data) {
                        if (data.result == 'ok') {
                            location.href = location.href;
                        } else {
                            $.unblockUI();
                            elemento.val(fechaanterior);
                            smoke.alert(data.mensaje);
                        }
                    }).error(function () {
                        $.unblockUI();
                        elemento.val(fechaanterior);
                        smoke.alert("Fallo al cambiar la fecha");
                    });
                }
            };

            fechainicio.datepicker({format: "dd-mm-yyyy"}).on('changeDate', function (ev) {
                actualiza_fechainicio($(this));
            });

            fechainicio.change(function () {
                actualiza_fechainicio($(this));
            });

            fechafin = $(".selectorfechafin");
            fechafin.datepicker({format: "dd-mm-yyyy"}).on('changeDate', function (ev) {
                actualiza_fechafin($(this));
            });

            fechafin.change(function () {
                actualiza_fechafin($(this));
            });
            actualiza_fechafin = function (elemento) {
                var idsilabosemanal;
                var fechaanterior = elemento.attr("va");
                var fechaactual = elemento.val();
                $('.datepicker').css({"display": "none"});
                if (fechaactual != fechaanterior) {
                    idsilabosemanal = elemento.attr("mid");
                    bloqueointerface();
                    $.post("/docentes", {'action': 'updatefechainicio', 'idsilabosemanal': idsilabosemanal, 'fecha': fechaactual, 'tipo': 2 }, function (data) {
                        if (data.result == 'ok') {
                            location.href = location.href;
                        } else {
                            $.unblockUI();
                            elemento.val(fechaanterior);
                            smoke.alert("Fallo al cambiar la fecha");
                        }
                    }).error(function () {
                        $.unblockUI();
                        elemento.val(fechaanterior);
                        smoke.alert("Fallo al cambiar la fecha");
                    });
                }
            };
        });
        function formModal(id, text, action) {
            $.ajax({
                type: "GET",
                url: `{{ request.path }}`,
                data: {
                    'action': action,
                    'id': id,
                },
                success: function (data) {
                    if (data.result === true) {
                        $('.panelbody').html(data.data);
                        $('#itemspanel .paneltitle').html(text);
                        $("#itemspanel").modal({backdrop: 'static', width: '900'}).modal('show');
                    } else {
                        smoke.alert(data.mensaje);
                    }
                },
                error: function () {
                    smoke.alert("Error de conexión.");
                },
                dataType: "json"
            });
        }
    </script>
{% endblock %}
{% block atras %}/docentes?action=versilabos&id={{ silabocab.materia.id }}&idp={{ profesor.id }}{% endblock %}
{% block canvas %}
    <script src="/static/adicionalesjs/formquestion.js?0.24"></script>

    <div class="modal fade static" id="itemspanel" style="display: none;">
        <div class="modal-header">
            <h4><i class="fa fa-list"></i> <b class="paneltitle">FORMULARIO MODAL</b></h4>
        </div>
        <div class="modal-body">
            <form id="form2" class="form-horizontal form-modal" autocomplete="off" method="post"
                  enctype="multipart/form-data" action="{{ request.path }}" >
                {% csrf_token %}
                <div class="row-fluid panelbody">
                </div>
            </form>
        </div>
    </div>

    <div class='row-fluid'>
        <div class='span9'>
            <h5>{{ title }} </h5>
            <h5>Profesor: {{ profesor }}</h5>
            <h5>Asignatura: {{ silabocab.materia.asignaturamalla }} - {{ silabocab.materia.paralelo }} </h5>
            (id materia): {{ silabocab.materia.id }} -- id curso moodle: {{ silabocab.materia.idcursomoodle }}
        </div>
        <div class='span3'>
            <table width="100%" border="0" cellspacing="0" cellpadding="0" class="table table-bordered">
                <tr>
                    <td style="text-align: center">
                        <a style="color: #3a87ad; font-size: 18px" href="#"><i class="fa fa-circle"></i></a>
                    </td>
                    <td style="text-align: justify">INGRESADO</td>
                    <td style="text-align: center">
                        <a style="color: #b94a48; font-size: 18px" href="#"><i class="fa fa-circle"></i></a>
                    </td>
                    <td style="text-align: justify">RECHAZADO</td>
                </tr>
                <tr>
                    <td style="text-align: center">
                        <a style="color: #faa732; font-size: 18px" href="#"><i class="fa fa-circle"></i></a>
                    </td>
                    <td style="text-align: justify">APROBADO</td>
                    <td style="text-align: center">
                        <a style="color: #5bb75b; font-size: 18px" href="#"><i class="fa fa-circle"></i></a>
                    </td>
                    <td style="text-align: justify">EN MOODLE</td>
                </tr>
            </table>
        </div>
    </div>

    <div class='row-fluid'>
        <div class='span12'>
            <table cellpadding="0" border="1" cellspacing="0" id="example">
                <thead>
                <tr>
                    <th rowspan="2">TEMAS / SUBTEMAS</th>
                    <th {% if puede_videomagistral %}colspan="5"{% else %}colspan="4"{% endif %}>RECURSOS</th>
                    <th colspan="6">ACTIVIDADES</th>
                </tr>
                <tr>
                    <th style="text-align: center;width: 150px;">
                        Presentación
                    </th>
                    <th style="text-align: center;width: 150px;">
                        Compendio
                    </th>
{#                    {% if puede_videomagistral %}#}
                        <th style="text-align: center;width: 150px;">Video Magistral</th>
{#                    {% endif %}#}
                    <th style="text-align: center;width: 150px;">
                        Guía del estudiante y docente
                    </th>
                    <th style="text-align: center;width: 150px;">
                        Materiales complementarios
                    </th>
                    <th style="text-align: center;width: 150px;">Tarea</th>
                    <th style="text-align: center;width: 150px;">Talleres</th>
                    <th style="text-align: center;width: 150px;">Exposición</th>
                    <th style="text-align: center;width: 150px;">Foro</th>
                    <th style="text-align: center;width: 150px;">Test</th>
                    <th style="text-align: center;width: 100px;">
                        Trabajo práctico experimental
                    </th>
                </tr>
                </thead>
                <tbody>
                {% for semana in silabosemanal %}
                    <tr>
                        <td bgcolor="#d9edf7" {% if puede_videomagistral %}colspan="16"{% else %}colspan="15"{% endif %}
                            height="30" style="text-align: left; font-size: 16px;" valign="middle">
                            <div class='span9'>
                                <strong>
                                    SEMANA {{ semana.numsemana }} |
                                    {% if silabocab.materia.cerrado %}
                                        DESDE: {{ semana.fechainiciosemana|date:"Y-m-d" }}
                                        HASTA: {{ semana.fechafinciosemana|date:"Y-m-d" }}
                                    {% else %}
                                        DESDE: <input mid='{{ semana.id }}' type="text" id="fechafin_{{ semana.id }}" class='selectorfechainicio selectorfecha input-small' va="{{ semana.fechainiciosemana|date:'d-m-Y' }}" value='{{ semana.fechainiciosemana|date:'d-m-Y' }}'/>
                                        HASTA: <input mid='{{ semana.id }}' type="text" id="fechafin_{{ semana.id }}" class='selectorfechafin selectorfecha input-small' va="{{ semana.fechafinciosemana|date:'d-m-Y' }}" value='{{ semana.fechafinciosemana|date:'d-m-Y' }}'/>
                                    {% endif %}
                                </strong>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            {% with temasselec=semana|call:'temas_seleccionados_planclase' %}
                                <div style="max-height: 150px; overflow-y: auto; overflow-x: hidden;">
                                    {% with unidades=semana|call:'unidades_silabosemanal' %}
                                        {% for uni in unidades %}
                                            <b>UNIDAD {{ uni.temaunidadresultadoprogramaanalitico.unidadresultadoprogramaanalitico.orden }}: {{ uni.temaunidadresultadoprogramaanalitico.unidadresultadoprogramaanalitico.descripcion }}</b>
                                            <br>
                                            {% with temasselec=semana|args:uni.temaunidadresultadoprogramaanalitico.unidadresultadoprogramaanalitico.id|call:'temas_silabosemanal' %}
                                                {% for temassel in temasselec %}
                                                    <dt style="font-weight: normal;">
                                                        <ul>
                                                    <dt style="font-weight: normal;">
                                                        <b>TEMA: {{ temassel.temaunidadresultadoprogramaanalitico.orden }}.-</b> {{ temassel.temaunidadresultadoprogramaanalitico.descripcion }}
                                                    </dt>
                                                    <ul>
                                                        {% with subtemasselec=semana|args:temassel.temaunidadresultadoprogramaanalitico|call:'subtemas_silabosemanal' %}
                                                            {% if subtemasselec %}
                                                                {% for subtemassel in subtemasselec %}
                                                                    <dt style="font-weight: normal;">
                                                                        <b>SUBTEMA: {{ subtemassel.subtemaunidadresultadoprogramaanalitico.orden }}.-</b> {{ subtemassel.subtemaunidadresultadoprogramaanalitico.descripcion }}
                                                                    </dt>
                                                                {% endfor %}
                                                            {% endif %}
                                                        {% endwith %}
                                                    </ul>
                                                    </dt>
                                                {% endfor %}
                                            {% endwith %}
                                        {% endfor %}
                                    {% endwith %}
                                </div>
                            {% endwith %}
                        </td>

                        <td valign="top">
                            {% if semana.diapositiva_semanales %}
                                <div class="accordion" id="accordiondiapositiva{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse"
                                               data-parent="#accordiondiapositiva{{ semana.id|encrypt }}"
                                               href="#collapseOnediapositiva{{ semana.id|encrypt }}"><span
                                                    class="fa fa-list"></span> Presentación</a>
                                        </div>
                                        <div id="collapseOnediapositiva{{ semana.id|encrypt }}"
                                             class="accordion-body collapse in">
                                            <a class="recorrepresentacion"
                                               codestado="{{ semana.diapositiva_semanales.estado.id }}"
                                               style="color: #{{ semana.diapositiva_semanales.estado.colorestado }}; font-size: 18px"
                                               href="#"><i class="fa fa-circle"></i></a><br>
                                            {{ semana.diapositiva_semanales.nombre }}<br>
                                            <a href="javascript:;" data-placement="right"
                                               onclick="formModal('{{ semana.diapositiva_semanales.id }}','Editar Presentación','editpresentacion')"
                                               class="btn btn-primary btn-mini tu" codtipo="6"
                                               title="Editar"><span class="fa fa-edit"></span> Editar</a>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        </td>

                        <td valign="top">
                            {% if semana.compendio_semanales %}
                                <div class="accordion" id="accordioncompendio{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse"
                                               data-parent="#accordioncompendio{{ semana.id|encrypt }}"
                                               href="#collapseOnecompendio{{ semana.id|encrypt }}"><span
                                                    class="fa fa-list"></span> Compendio</a>
                                        </div>
                                        <div id="collapseOnecompendio{{ semana.id|encrypt }}"
                                             class="accordion-body collapse in">
                                            <a class="recorrecompendio"
                                               codestado="{{ semana.compendio_semanales.estado.id }}"
                                               style="color: #{{ semana.compendio_semanales.estado.colorestado }}; font-size: 18px"
                                               href="#"><i class="fa fa-circle"></i></a><br>
                                            {{ semana.compendio_semanales.descripcion }}<br>
                                            <a href="javascript:;" data-placement="right"
                                               onclick="formModal('{{ semana.compendio_semanales.id }}','Editar Presentación','editcompendio')"
                                               class="btn btn-primary btn-mini tu" codtipo="7" nomtipo="Compendio"
                                               title="Editar"><span class="fa fa-edit"></span> Editar</a>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        </td>

{#                        {% if puede_videomagistral %}#}
                            <td valign="top">
                                {% if semana.vidmagistral_semanales %}
                                    <div class="accordion" id="accordionvidmagistral{{ semana.id|encrypt }}">
                                        <div class="accordion-group">
                                            <div class="accordion-heading">
                                                <a data-toggle="collapse"
                                                   data-parent="#accordionvidmagistral{{ semana.id|encrypt }}"
                                                   href="#collapseOnevidmagistral{{ semana.id|encrypt }}"><span
                                                        class="fa fa-list"></span> Video magistral</a>
                                            </div>
                                            <div id="collapseOnevidmagistral{{ semana.id|encrypt }}"
                                                 class="accordion-body collapse in">
                                                <a style="color: #{{ semana.vidmagistral_semanales.estado.colorestado }}; font-size: 18px"
                                                   href="#"><i class="fa fa-circle"></i></a><br>
                                                {{ semana.vidmagistral_semanales.get_tipograbacion_display }}<br>
                                                {{ semana.vidmagistral_semanales.nombre }}<br>
                                                {% if semana.vidmagistral_semanales.archivovideomagistral %}
                                                    <a href='{{ semana.vidmagistral_semanales.archivovideomagistral.url }}'
                                                       target="_blank" class="btn btn-warning"><span
                                                            class="fa fa-download"></span> <i
                                                            class=" hidden-phone hidden-tablet visible-desktop "></i>
                                                        Archivo </a>
                                                {% endif %}
                                                <br>
                                                <a href="javascript:;"
                                                   onclick="formModal('{{ semana.vidmagistral_semanales.id }}','Editar Video Magistral','editvideo')"
                                                   data-placement="right" class="btn btn-primary btn-mini tu"
                                                   codtipo="9" nomtipo="Video Magistral" title="Ver más"><span
                                                        class="fa fa-edit"></span> Editar</a>
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}
                                {#                                        {% endif %}#}
                                {#                                    {% endif %}#}
                            </td>
{#                        {% endif %}#}

                        <td valign="top">
                            {% if semana.guiaestudiante_semanales %}
                                <div class="accordion" id="accordionguiaestudiante{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse"
                                               data-parent="#accordionguiaestudiante{{ semana.id|encrypt }}"
                                               href="#collapseOneguiaestudiante{{ semana.id|encrypt }}"><span
                                                    class="fa fa-list"></span> Guía estudiante</a>
                                        </div>
                                        <div id="collapseOneguiaestudiante{{ semana.id|encrypt }}"
                                             class="accordion-body collapse in">
                                            <a class="recorreguias"
                                               codestado="{{ semana.guiaestudiante_semanales.estado.id }}"
                                               style="color: #{{ semana.guiaestudiante_semanales.estado.colorestado }}; font-size: 18px"
                                               href="#"><i class="fa fa-circle"></i></a><br>
                                            {{ semana.guiaestudiante_semanales.observacion }}<br>
                                            <a href="javascript:;" data-placement="right"
                                               class="btn btn-primary btn-mini tu" codtipo="4"
                                               nomtipo="Guia estudiante"
                                               onclick="formModal('{{ semana.guiaestudiante_semanales.id }}','Editar Guia Estudiante','editguia')"
                                               title="Ver más"><span
                                                    class="fa fa-edit"></span> Editar</a>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                            {% if semana.guiadocente_semanales %}
                                <div class="accordion" id="accordionguia{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse"
                                               data-parent="#accordionguia{{ semana.id|encrypt }}"
                                               href="#collapseOneguia{{ semana.id|encrypt }}"><span
                                                    class="fa fa-list"></span> Guía docente</a>
                                        </div>
                                        <div id="collapseOneguia{{ semana.id|encrypt }}"
                                             class="accordion-body collapse in">
                                            <a class="recorreguias"
                                               codestado="{{ semana.guiadocente_semanales.estado.id }}"
                                               style="color: #{{ semana.guiadocente_semanales.estado.colorestado }}; font-size: 18px"
                                               href="#"><i class="fa fa-circle"></i></a><br>
                                            {{ semana.guiadocente_semanales.observacion }}<br>
                                            <a href="javascript:;" data-placement="right"
                                               class="btn btn-primary btn-mini tu" codtipo="5"
                                               nomtipo="Guia docente"
                                               onclick="formModal('{{ semana.guiadocente_semanales.id }}','Editar Guia Estudiante','editguiadocente')"
                                               title="Ver más"><span class="fa fa-edit"></span> Editar</a>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        </td>

                        <td valign="top">
                            {% if semana.material_semanales %}
                                <div class="accordion" id="accordionmaterial{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse"
                                               data-parent="#accordionmaterial{{ semana.id|encrypt }}"
                                               href="#collapsematerial{{ semana.id|encrypt }}"><span
                                                    class="fa fa-list"></span> Material complementario</a>
                                        </div>
                                        <div id="collapsematerial{{ semana.id|encrypt }}"
                                             class="accordion-body collapse in">
                                            {% for material in semana.material_semanales %}
                                                <a class="recorrematerial" codestado="{{ material.estado.id }}"
                                                   style="color:#{{ material.estado.colorestado }}; font-size: 18px"
                                                   href="#"><i class="fa fa-circle"></i></a><br>
                                                {{ material.nombre }}<br>
                                                <a href="javascript:;" data-placement="right"
                                                   class="btn btn-primary btn-mini tu" codtipo="8"
                                                   onclick="formModal('{{ material.id }}','Editar Material Complementario','editmaterial')"
                                                   title="Ver más"><span class="fa fa-edit"></span> Editar</a>
                                                <br><br>
                                            {% endfor %}
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        </td>

                        <td valign="top">
                            {% if semana.tareas_semanales %}
                                <div class="listadotareas_{{ semana.unidad_planclase.0 }}"></div>
                                <div class="accordion" id="accordion{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse" data-parent="#accordion{{ semana.id|encrypt }}"
                                               href="#collapseOneTarea{{ semana.id|encrypt }}"><span
                                                    class="fa fa-list"></span> Tarea</a>
                                        </div>
                                        <div id="collapseOneTarea{{ semana.id|encrypt }}" class="accordion-body collapse in">
                                            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                                <tr>
                                                    <td colspan="8">
                                                        <a style="color: #{{ semana.tareas_semanales.estado.colorestado }}; font-size: 18px"
                                                           href="#" class='tu' data-placement="right"
                                                           href="javascript:;"
                                                           title='{{ semana.tareas_semanales.estado.nombre }}'><i
                                                                class="fa fa-circle"></i></a>
                                                        <span class="label label-default">
                                                        {{ semana.tareas_semanales.detallemodelo.nombre }}
                                                        </span><br>
                                                        {{ semana.tareas_semanales.nombre }} -
                                                        (<b>{{ semana.tareas_semanales.idtareamoodle }}</b>)
                                                    </td>
                                                </tr>
                                            </table>
                                            <a href="javascript:;" data-placement="right"
                                               class="btn btn-primary btn-mini tu" codtipo="1"
                                               onclick="formModal('{{ semana.tareas_semanales.id }}','Editar Tarea Semanal','edittareasemanal')"
                                               title="Ver más"><span class="fa fa-edit"></span> Editar</a>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                            <hr>
                            {% if semana.analisiscasos_semanales %}
                                <div class="listadoforos_{{ semana.unidad_planclase.0 }}"></div>
                                <div class="accordion" id="accordion{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse" data-parent="#accordion{{ semana.id|encrypt }}"
                                               href="#collapseAnalisis{{ semana.id|encrypt }}"><span
                                                    class="fa fa-list"></span> Analisis casos</a>
                                        </div>
                                        <div id="collapseAnalisis{{ semana.id|encrypt }}"
                                             class="accordion-body collapse in">
                                            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                                <tr>
                                                    <td colspan="8">
                                                        <a style="color: #{{ semana.analisiscasos_semanales.estado.colorestado }}; font-size: 18px"
                                                           href="#" class='tu' data-placement="right"
                                                           href="javascript:;"
                                                           title='{{ semana.analisiscasos_semanales.estado.nombre }}'><i
                                                                class="fa fa-circle"></i></a>
                                                        <span class="label label-default">
                                                        {{ semana.analisiscasos_semanales.detallemodelo.nombre }}
                                                        </span><br>
                                                        {{ semana.analisiscasos_semanales.nombre }} -
                                                        (<b>{{ semana.analisiscasos_semanales.idtareamoodle }}</b>)
                                                    </td>
                                                </tr>
                                            </table>
                                            <br>
                                            <a href="javascript:;" data-placement="right"
                                               class="btn btn-primary btn-mini tu" codtipo="2"
                                               onclick="formModal('{{ semana.analisiscasos_semanales.id }}','Editar Analisis Casos Semanales','edittareasemanal')"
                                               title="Editar"><span class="fa fa-edit"></span> Editar</a>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                            <hr>
                            {% if semana.trabajoinvestigacion_semanales %}
                                <div class="listadoforos_{{ semana.unidad_planclase.0 }}"></div>
                                <div class="accordion" id="accordion{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse" data-parent="#accordion{{ semana.id|encrypt }}"
                                               href="#collapseInvestigacion{{ semana.id|encrypt }}"><span
                                                    class="fa fa-list"></span> T. Investigación</a>
                                        </div>
                                        <div id="collapseInvestigacion{{ semana.id|encrypt }}"
                                             class="accordion-body collapse in">
                                            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                                <tr>
                                                    <td colspan="8">
                                                        <a style="color: #{{ semana.trabajoinvestigacion_semanales.estado.colorestado }}; font-size: 18px"
                                                           href="#" class='tu' data-placement="right"
                                                           href="javascript:;"
                                                           title='{{ semana.trabajoinvestigacion_semanales.estado.nombre }}'><i
                                                                class="fa fa-circle"></i></a>
                                                        <span class="label label-default">
                                                        {{ semana.trabajoinvestigacion_semanales.detallemodelo.nombre }}
                                                        </span><br>
                                                        {{ semana.trabajoinvestigacion_semanales.nombre }} -
                                                        (<b>{{ semana.trabajoinvestigacion_semanales.idtareamoodle }}</b>)
                                                    </td>
                                                </tr>
                                            </table>
                                            <a href="javascript:;" data-placement="right"
                                               class="btn btn-primary btn-mini tu" codtipo="2"
                                               onclick="formModal('{{ semana.trabajoinvestigacion_semanales.id }}','Editar Trabajos de Investigación','edittareasemanal')"
                                               title="Editar"><span class="fa fa-edit"></span> Editar</a>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        </td>

                        <td valign="top">
                            {% if semana.talleres_semanales %}
                                <div class="listadotests_{{ semana.unidad_planclase.0 }}"></div>
                                {#                                    <div class="listadotareas_{{ semana.unidad_planclase.0 }}"></div>#}
                                <div class="accordion" id="accordion{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse" data-parent="#accordion{{ semana.id|encrypt }}"
                                               href="#collapseOne{{ semana.id|encrypt }}"><span
                                                    class="fa fa-list"></span> Taller</a>
                                        </div>
                                        <div id="collapseOne{{ semana.id|encrypt }}" class="accordion-body collapse in">
                                            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                                <tr>
                                                    <td colspan="8">
                                                        <a style="color: #{{ semana.talleres_semanales.estado.colorestado }}; font-size: 18px"
                                                           href="#" class='tu' data-placement="right"
                                                           href="javascript:;"
                                                           title='{{ semana.talleres_semanales.estado.nombre }}'><i
                                                                class="fa fa-circle"></i></a>
                                                        <span class="label label-default">
                                                        {{ semana.talleres_semanales.detallemodelo.nombre }}
                                                        </span><br>
                                                        {{ semana.talleres_semanales.nombre }} -
                                                        (<b>{{ semana.talleres_semanales.idtareamoodle }}</b>)
                                                    </td>
                                                </tr>
                                            </table>
                                            <a href="javascript:;" data-placement="right"
                                               class="btn btn-primary btn-mini tu" codtipo="1"
                                               onclick="formModal('{{ semana.talleres_semanales.id }}','Editar Taller Semanal','edittareasemanal')"
                                               title="Ver más"><span class="fa fa-edit"></span> Editar</a>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        </td>

                        <td valign="top">
                            {% if semana.exposiciones_semanales %}
                                <div class="listadotests_{{ semana.unidad_planclase.0 }}"></div>
                                <div class="accordion" id="accordion{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse" data-parent="#accordion{{ semana.id|encrypt }}"
                                               href="#collapseExpo{{ semana.id|encrypt }}"><span
                                                    class="fa fa-list"></span> Exposición</a>
                                        </div>
                                        <div id="collapseExpo{{ semana.id|encrypt }}"
                                             class="accordion-body collapse in">
                                            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                                <tr>
                                                    <td colspan="8">
                                                        <a style="color: #{{ semana.exposiciones_semanales.estado.colorestado }}; font-size: 18px"
                                                           href="#" class='tu' data-placement="right"
                                                           href="javascript:;"
                                                           title='{{ semana.exposiciones_semanales.estado.nombre }}'><i
                                                                class="fa fa-circle"></i></a>
                                                        <span class="label label-default">
                                                        {{ semana.exposiciones_semanales.detallemodelo.nombre }}
                                                        </span><br>
                                                        {{ semana.exposiciones_semanales.nombre }} -
                                                        (<b>{{ semana.exposiciones_semanales.idtareamoodle }}</b>)
                                                    </td>
                                                </tr>
                                            </table>
                                            <a href="javascript:;" data-placement="right"
                                               class="btn btn-primary btn-mini tu" codtipo="1"
                                               onclick="formModal('{{ semana.exposiciones_semanales.id }}','Editar Exposición Semanal','edittareasemanal')"
                                               title="Ver más"><span class="fa fa-edit"></span> Editar</a>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        </td>


                        <td valign="top">
                            {% if semana.foros_semanales %}
                                <div class="listadoforos_{{ semana.unidad_planclase.0 }}"></div>
                                <div class="accordion" id="accordionforo{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse"
                                               data-parent="#accordionforo{{ semana.id|encrypt }}"
                                               href="#collapseforo{{ semana.id|encrypt }}"><span
                                                    class="fa fa-list"></span> Foro</a>
                                        </div>
                                        <div id="collapseforo{{ semana.id|encrypt }}"
                                             class="accordion-body collapse in">
                                            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                                <tr>
                                                    <td colspan="8">
                                                        <a style="color: #{{ semana.foros_semanales.estado.colorestado }}; font-size: 18px"
                                                           href="#"><i class="fa fa-circle"></i></a>
                                                        <span class="label label-default">
                                                        {{ semana.foros_semanales.detallemodelo.nombre }}
                                                        </span><br>
                                                        {{ semana.foros_semanales.nombre }}
                                                    </td>
                                                </tr>
                                            </table>
                                            <a href="javascript:;" data-placement="right"
                                               class="btn btn-primary btn-mini tu" codtipo="2"
                                               onclick="formModal('{{ semana.foros_semanales.id }}','Editar Foros Semanales','editforos')"
                                               title="Editar"><span class="fa fa-edit"></span> Editar</a>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        </td>

                        <td valign="top">
                            {% if idcoordinacion != 9 %}
                                {% if semana.listatest_semanales %}
                                    <div class="listadotests_{{ semana.unidad_planclase.0 }}"></div>
                                        <div class="accordion" id="accordiontest{{ semana.id|encrypt }}">
                                            <div class="accordion-group">
                                                <div class="accordion-heading">
                                                    <a data-toggle="collapse"
                                                       data-parent="#accordiontest{{ semana.id|encrypt }}"
                                                       href="#collapsetest{{ semana.id|encrypt }}"><span
                                                            class="fa fa-list"></span> Test</a>
                                                </div>
                                                <div id="collapsetest{{ semana.id|encrypt }}"
                                                     class="accordion-body collapse in">
                                                    {#                                            <span class="label label-{{ semana.test_semanales.estado.colorestado }}">#}
                                                    {#                                                ESTADO: {{ semana.test_semanales.estado.nombre }}#}
                                                    {#                                            </span><br>#}
                                                    {% for test in semana.listatest_semanales %}
                                                        <a style="color: #{{ test.estado.colorestado }}; font-size: 18px"
                                                           href="#"><i class="fa fa-circle"></i></a>
                                                        <span class="label label-default">
                                                        {{ test.detallemodelo.nombre }}
                                                        </span><br>
                                                        {{ test.instruccion }}
                                                        <br>
                                                        <a href="javascript:;" data-placement="right"
                                                           class="btn btn-primary btn-mini tu" codtipo="2"
                                                           onclick="formModal('{{ test.id }}','Editar Test','edittest')"
                                                           title="Editar"><span class="fa fa-edit"></span> Editar</a>
                                                        <br><br>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                        </div>



                                {% endif %}
                            {% else %}
                                {% if semana.listatest_semanales %}
                                    {% for test in semana.listatest_semanales %}
                                        <div class="listadotests_{{ semana.unidad_planclase.0 }}"></div>
                                        <div class="accordion" id="accordiontest{{ semana.id|encrypt }}">
                                        <div class="accordion-group">
                                            <div class="accordion-heading">
                                                <a data-toggle="collapse"
                                                   data-parent="#accordiontest{{ semana.id|encrypt }}"
                                                   href="#collapsetest{{ semana.id|encrypt }}"><span
                                                        class="fa fa-list"></span> Test</a>
                                            </div>
                                            <div id="collapsetest{{ test.id|encrypt }}"
                                                 class="accordion-body collapse in">
                                                {#                                            <span class="label label-{{ semana.test_semanales.estado.colorestado }}">#}
                                                {#                                                ESTADO: {{ semana.test_semanales.estado.nombre }}#}
                                                {#                                            </span><br>#}
                                                <a style="color: #{{ semana.test_semanalesadmision.estado.colorestado }}; font-size: 18px"
                                                   href="#"><i class="fa fa-circle"></i></a>
                                                <span class="label label-default">
                                                {{ test.detallemodelo.nombre }}
                                            </span><br>
                                                {{ test.titulo }}
                                                <br>
                                                <a href="javascript:;" data-placement="right"
                                                   class="btn btn-primary btn-mini tu" codtipo="2"
                                                   onclick="formModal('{{ test.id }}','Editar Test','edittestnivelacion')"
                                                   title="Editar"><span class="fa fa-edit"></span> Editar</a>
                                            </div>
                                        </div>
                                        </div>
                                    {% endfor %}
                                {% endif %}
                            {% endif %}
                        </td>

                        <td valign="top" align="center">
                            {% if semana.tareaspracticas_semanales %}
                                <div class="listadotareaspra_{{ semana.unidad_planclase.0 }}"></div>
                                <div class="accordion" id="accordion{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse" data-parent="#accordion{{ semana.id|encrypt }}"
                                               href="#collapseOnepra{{ semana.id|encrypt }}"><span
                                                    class="fa fa-list"></span> Trabajo práctico</a>
                                        </div>
                                        <div id="collapseOnepra{{ semana.id|encrypt }}"
                                             class="accordion-body collapse in">
                                            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                                <tr>
                                                    <td colspan="8">
                                                        <a style="color: #{{ semana.tareaspracticas_semanales.estado.colorestado }}; font-size: 18px"
                                                           href="#" class='tu' data-placement="right"
                                                           href="javascript:;"
                                                           title='{{ semana.tareaspracticas_semanales.estado.nombre }}'><i
                                                                class="fa fa-circle"></i></a>
                                                        <span class="label label-default">
                                                        {{ semana.tareaspracticas_semanales.detallemodelo.nombre }}
                                                        </span><br>
                                                        {{ semana.tareaspracticas_semanales.nombre }}
                                                    </td>
                                                </tr>
                                            </table>
                                            <br>
                                            <a href="javascript:;" data-placement="right"
                                               class="btn btn-primary btn-mini tu" codtipo="2"
                                               onclick="formModal('{{ semana.tareaspracticas_semanales.id }}','Editar Trabajo Práctico','edittrabajopractico')"
                                               title="Editar"><span class="fa fa-edit"></span> Editar</a>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        </td>


                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <script type="text/javascript">

        $(function () {
            {% for unidadeslis in listadounidades %}
                {#alert(".listadotareas_"+ {{ unidadeslis.0 }})#}
                if ($(".listadotareas_" + {{ unidadeslis.0 }}).length == 0) {
                    d = 1
                } else {
                    $(".horasauto{{ unidadeslis.0 }}").each(function () {
                        $(this).html({{ silabocab.materia.asignaturamalla.horasautonomassemanales }});
                    });
                    $(".porceauto{{ unidadeslis.0 }}").each(function () {
                        $(this).html('100%');
                    });
                }
                if ($(".listadoforos_" + {{ unidadeslis.0 }}).length == 0) {
                    d = 1
                } else {
                    $(".horasauto{{ unidadeslis.0 }}").each(function () {
                        $(this).html({{ silabocab.materia.asignaturamalla.horasautonomassemanales }});
                    });
                    $(".porceauto{{ unidadeslis.0 }}").each(function () {
                        $(this).html('100%');
                    });
                }


                if ($(".listadotests_" + {{ unidadeslis.0 }}).length == 0) {
                    d = 1
                } else {
                    $(".horasdoc{{ unidadeslis.0 }}").each(function () {
                        $(this).html({{ silabocab.materia.asignaturamalla.horasacdsemanal }});
                    });
                    $(".porcedoc{{ unidadeslis.0 }}").each(function () {
                        $(this).html('100%');
                    });
                    {#alert('si tiene')#}
                }

                if ($(".listadotareaspra_" + {{ unidadeslis.0 }}).length == 0) {
                    d = 1
                } else {
                    $(".horasexp{{ unidadeslis.0 }}").each(function () {
                        $(this).html({{ silabocab.materia.asignaturamalla.horasapesemanal }});
                    });
                    $(".porceexp{{ unidadeslis.0 }}").each(function () {
                        $(this).html('100%');
                    });
                    {#alert('si tiene')#}
                }
                {% if silabocab.materia.asignaturamalla.horasapesemanal == 0 %}
                    $(".horasexp{{ unidadeslis.0 }}").each(function () {
                        $(this).html('N/A');
                    });
                    $(".porceexp{{ unidadeslis.0 }}").each(function () {
                        $(this).html('N/A');
                    });
                {% endif %}
            {% endfor %}
        })
    </script>
{% endblock %}