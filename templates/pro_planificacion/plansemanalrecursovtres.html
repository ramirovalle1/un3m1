{% extends "base.html" %}
{% load sga_extras %}
{% block heading %}
    <style>
        .panelbody {
            padding: 16px;
        !important:;
        }

        .mr-4 {
            margin-right: 2px
        }

        .list-group-item {
            color: #18113c
        }

        .header .sign:after {
            content: "+";
            display: inline-block;
        }

        .header.expand .sign:after {
            content: "-";
        }


        .fa fa-folder-open {
            background-position: -408px -120px;
            width: 16px;
        }

        .well {
            min-height: 20px;
            padding: 19px;
            margin-bottom: 20px;
            background-color: #29baf914;
            border: 1px solid #29baf959;
            -webkit-border-radius: 4px;
            -moz-border-radius: 4px;
            border-radius: 4px;
            -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05);
            -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05);
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05);
        }

        .well blockquote {
            border-color: #ddd;
            border-color: rgba(0, 0, 0, 0.15);
        }

        .well-large {
            padding: 24px;
            -webkit-border-radius: 6px;
            -moz-border-radius: 6px;
            border-radius: 6px;
        }

        .well-small {
            padding: 9px;
            -webkit-border-radius: 3px;
            -moz-border-radius: 3px;
            border-radius: 3px;
        }

        .close {
            float: right;
            font-size: 20px;
            font-weight: bold;
            line-height: 20px;
            color: #000000;
            text-shadow: 0 1px 0 #ffffff;
            opacity: 0.2;
            filter: alpha(opacity=20);
        }

        .close:hover, .close:focus {
            color: #000000;
            text-decoration: none;
            cursor: pointer;
            opacity: 0.4;
            filter: alpha(opacity=40);
        }

        button.close {
            padding: 0;
            cursor: pointer;
            background: transparent;
            border: 0;
            -webkit-appearance: none;
        }

        .tree {
            min-height: 20px;
            padding: 19px;
            margin-bottom: 20px;
            background-color: #fbfbfb;
            border: 1px solid #999;
            -webkit-border-radius: 4px;
            -moz-border-radius: 4px;
            border-radius: 4px;
            -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05);
            -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05);
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05)
        }

        .tree li {
            list-style-type: none;
            margin: 0;
            padding: 10px 5px 0 5px;
            position: relative
        }

        .tree li::before, .tree li::after {
            content: '';
            left: -20px;
            position: absolute;
            right: auto
        }

        .tree li::before {
            border-left: 1px solid #999;
            bottom: 50px;
            height: 100%;
            top: 0;
            width: 1px
        }

        .tree li::after {
            border-top: 1px solid #999;
            height: 20px;
            top: 25px;
            width: 25px
        }

        .tree li span {
            -moz-border-radius: 5px;
            -webkit-border-radius: 5px;
            border: 1px solid #999;
            border-radius: 5px;
            display: inline-block;
            padding: 3px 8px;
            text-decoration: none
        }

        .tree li.parent_li > span {
            cursor: pointer
        }

        .tree > ul > li::before, .tree > ul > li::after {
            border: 0
        }

        .tree li:last-child::before {
            height: 30px
        }

        .tree li.parent_li > span:hover, .tree li.parent_li > span:hover + ul li span {
            background: #eee;
            border: 1px solid #94a0b4;
            color: #000
        }
    </style>
    <link href="/static/css/table-responsive.css?1.0.0" type="text/css" rel="stylesheet"/>
    <script type="text/javascript">
        var itemsblib = 1;
        var lista_items1 = [];
        var obj = 0;
        var enf = 0;
        var rec = 0;
        var eva = 0;

        function tbpaginada1() {
            if ($.fn.dataTable.isDataTable('.tbpaginada1')) {
                table.destroy();
            }
            var table = $('.tbpaginada1').DataTable({
                responsive: true,
                ordering: false,
                paging: true,
                searching: true,
                bInfo: true,
                dom: 'Bfrtip',
                language: {
                    "url": '/static/js/i18n/Spanish.json'
                },
                buttons: []
            });
        }

        function copiaactividad(id, califica) {
            var id = parseInt(id);
            var idsilabosemanal = $("#id_codsemanal").val()
            var idtipoactividad = $("#id_tipoactividad").val()
            codmodelo = ''
            if (califica == 'True') {
                codmodelo = $("#idmodelo" + id).val()
                if (codmodelo == 0) {
                    mensajeWarning('Seleccione modelo a calificar');
                    return false;
                }
            }


            Swal.fire({
                html: `¿Está seguro de copiar actividad?`,
                text: "Esta acción es irreversible",
                type: 'info',
                showCancelButton: true,
                allowOutsideClick: false,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Si, deseo hacerlo',
                cancelButtonText: 'Cancelar'
            }).then((result) => {
                if (result.value) {
                    bloqueointerface();
                    $.post("/pro_planificacion", {"action": 'copiaractividad', "id": id, "idsilabosemanal": idsilabosemanal, "idtipoactividad": idtipoactividad, "codmodelo": codmodelo, "califica": califica}, function (data) {
                        if (data.result == 'ok') {
                            location.reload();
                        } else {
                            $.unblockUI();
                            mensajeWarning(data.mensaje);
                        }
                    }, "json");
                }
            })
        }

        $(function () {
            {#            {% for unidadeslis in listadounidades %}#}
            {#alert(".listadotareas_"+ {{ unidadeslis.0 }})#}
            {#                if($(".listadotareas_"+ {{ unidadeslis.0 }}).length == 0) {#}
            {#                    alert('no tiene')#}
            {#                }else{#}
            {#                    alert('si tiene')#}
            {#                }#}
            {##}
            {#            {% endfor %}#}
            $(".actualizarsmoodle").click(function () {
                $("#divactualizarsmoodle").modal({backdrop: 'static', width: '500px'}).modal('show');
            });
            $(".cancelaactualizacion").click(function () {
                $("#divactualizarsmoodle").modal("hide");
            });

            $(".saveactualizar").click(function () {
                bloqueointerface();
                var idmat = parseInt('{{ silabocab.materia.id }}');
                $.post("/pro_planificacion", {'action': 'actualizarsilabomoodle', 'materia': idmat}, function (data) {
                    if (data.result == 'ok') {
                        $("#divactualizarsmoodle").modal("hide");
                        NotificationJG.success("Se ha guardado con éxito, esta acción tarda de 15 a 20 minutos en reflejarse en el aula virtual.");
                        $.unblockUI();
                    }
                }, 'json');
            });

            $(".notificarmasivo").click(function () {
                $("#divnotificarmasivo").modal({backdrop: 'static', width: '500px'}).modal('show');
            });
            $(".cancelaaprobacion").click(function () {
                $("#divnotificarmasivo").modal("hide");
            });

            $(".savenotificar").click(function () {
                bloqueointerface();
                $.post("/pro_planificacion", {'action': 'notificacionmasiva', 'materia': {{ silabocab.materia.id }}}, function (data) {
                    if (data.result == 'ok') {
                        location.reload();
                    }
                }, 'json');
            });

            /*$(".migrarmoodlemasivo").click(function() {
                $("#divmigrarmasivo").modal({backdrop:'static', width: '500px'}).modal('show');
            });
            $(".cancelarmigrar").click(function() {
                $("#divmigrarmasivo").modal("hide");
            });*/

            $(".action-aceptar", $("#modalErrores")).click(function () {
                bloqueointerface();
                location.reload();
            });

            $(".action-cancelar", $("#modalErrores")).click(function () {
                bloqueointerface();
                location.reload();
            });


            $("#id_objetivo").css({'text-transform': 'none'});
            $("#id_enfoque").css({'text-transform': 'none'});
            $("#id_recurso").css({'text-transform': 'none'});
            $("#id_evaluacion").css({'text-transform': 'none'});
            $("#id_subtema").css({'text-transform': 'none'});
            $("#id_subtema").addClass("validate[required]");
            $("#id_tema").addClass("validate[required]");
            $("#desplegar_obj").each(function () {
                $(this).trigger('click');
            });

            $(".editar_objetivo").click(function () {
                var id = $(this).attr('ids');
                $.get("/pro_planificacion", {'action': 'editarobjetivoaprendizaje', 'ids': id}, function (data) {
                    var dato;
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $("#itemspanelo").modal({backdrop: 'static', width: '610px'}).modal('show');
                        $("#id_objetivo").val(data.objetivo);
                        $("#idso").val(data.ids);
                    }
                }, 'json');

            });
            $("#itemspanelo .btn-cerrar").click(function () {
                $("#itemspanelo").modal("hide");
            });
            $("#itemsrecurso_individual .btn-cerrar").click(function () {
                $("#itemsrecurso_individual").modal("hide");
            });
            $(".delactividad").click(function () {
                var idacti = $(this).attr('idacti');
                var nomacti = ''
                nomacti = $(this).attr('nomacti');
                var opciondel = $(this).attr('opciondel');
                var numerosemana = $(this).attr('numerosemana');
                $("#nomtitulo").html('')
                if (opciondel == 1) {
                    var nombretitulo = $(this).attr('data-original-title');
                    $("#nomtitulo").html(nombretitulo)
                }
                if (opciondel == 2) {
                    $("#nomtitulo").html('Eliminar Foro')
                }
                if (opciondel == 3) {
                    $("#nomtitulo").html('Eliminar Test')
                }
                if (opciondel == 4) {
                    $("#nomtitulo").html('Eliminar guia estudiante')
                }
                if (opciondel == 5) {
                    $("#nomtitulo").html('Eliminar gruia docente')
                }
                if (opciondel == 6) {
                    $("#nomtitulo").html('Eliminar Presentación')
                }
                if (opciondel == 7) {
                    $("#nomtitulo").html('Eliminar Compendio')
                }
                if (opciondel == 8) {
                    $("#nomtitulo").html('Eliminar Material Adicional')
                }
                if (opciondel == 9) {
                    $("#nomtitulo").html('Eliminar Video Magistral')
                }
                if (opciondel == 10) {
                    $("#nomtitulo").html('Eliminar Tarea Práctica')
                }
                var nombreactividad = 'Semana #' + numerosemana + ' | ' + nomacti;
                $("#id_codigoactividad").val(idacti)
                $("#id_codigoopcion").val(opciondel)
                $("#id_nomactividaddel").html(nombreactividad)
                $("#itemsdelactividad").modal("show");
            });
            $(".delactividadadmision").click(function () {
                var idacti = $(this).attr('idacti');
                var nomacti = $(this).attr('nomacti');
                var opciondel = $(this).attr('opciondel');
                var numerosemana = $(this).attr('numerosemana');
                $("#nomtituloadmision").html('')
                $("#nomtituloadmision").html('Eliminar Test')
                nomacti = 'Semana #' + numerosemana + ' | ' + nomacti;
                $("#id_codigoactividadadmision").val(idacti)
                $("#id_codigoopcionadmision").val(opciondel)
                $("#id_nomactividadadmision").html(nomacti)
                $("#itemsdelactividadadmision").modal("show");
            });
            $(".eliminaractividad").click(function () {
                var iddelactividad = $("#id_codigoactividad").val()
                var idcodigoopcion = $("#id_codigoopcion").val()
                $.ajax({
                    type: "POST",
                    url: "/pro_planificacion",
                    data: {"action": "eliminarrecurso", "iddelactividad": iddelactividad, "idcodigoopcion": idcodigoopcion},
                    success: function (data) {
                        if (data.result == 'ok') {
                            location.reload();
                            bloqueointerface();
                        } else {
                            $.unblockUI();
                            mensajeWarning(data.mensaje);
                        }
                    },
                    error: function () {
                        intentos += 1;
                    },
                    dataType: "json"
                });
            });
            $(".eliminaractividadadmision").click(function () {
                var iddelactividad = $("#id_codigoactividadadmision").val()
                var idcodigoopcion = $("#id_codigoopcionadmision").val()
                $.ajax({
                    type: "POST",
                    url: "/pro_planificacion",
                    data: {"action": "eliminarrecursoadmision", "iddelactividad": iddelactividad, "idcodigoopcion": idcodigoopcion},
                    success: function (data) {
                        if (data.result == 'ok') {
                            location.reload();
                            bloqueointerface();
                        }
                    },
                    error: function () {
                        intentos += 1;
                    },
                    dataType: "json"
                });
            });
            $(".delacticerrar").click(function () {
                $("#itemsdelactividad").modal("hide");
            });
            $(".delacticerraradmision").click(function () {
                $("#itemsdelactividadadmision").modal("hide");
            });
            $("#itemspanelo #adicionarobj").click(function () {
                var cont = $("#id_objetivo").val();
                if (cont.length > 0) {
                    var ids = $("#idso").val();
                    var formdata = new FormData($("#formobj")[0]);
                    try {
                        formdata.append("objetivo", JSON.stringify(cont));
                    } catch (err) {
                        console.log(err.message);
                    }
                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: "/pro_planificacion",
                        data: formdata,
                        success: function (data) {
                            if (data.result == 'ok') {
                                bloqueointerface();
                                $("#itemspanelo").modal("hide");
                                location.reload();
                            } else {
                                $.unblockUI();
                                mensajeWarning(data.mensaje);
                            }
                        },
                        error: function () {
                            $.unblockUI();
                            mensajeWarning("Error al enviar los datos.");
                        },
                        dataType: "json",
                        cache: false,
                        contentType: false,
                        processData: false
                    });
                } else {
                    mensajeWarning("Es obligatirio llenar la información Objetivo Apendizaje");
                }
            });
            $(".editar_enfoque").click(function () {
                var id = $(this).attr('ids');
                $.get("/pro_planificacion", {'action': 'editenfoquemetodologico', 'ids': id}, function (data) {
                    var dato;
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $("#itemspanelenf").modal({backdrop: 'static', width: '610px'}).modal('show');
                        $("#id_enfoque").val(data.enfoque);
                        $("#idse").val(data.ids);
                    }
                }, 'json');

            });
            $("#itemspanelenf .btn-cerrar").click(function () {
                $("#itemspanelenf").modal("hide");
            });
            $("#itemspanelenf #adicionarenf").click(function () {
                var cont = $("#id_enfoque").val();
                if (cont.length > 0) {
                    var ids = $("#idse").val();
                    var formdata = new FormData($("#formenf")[0]);
                    try {
                        formdata.append("enfoque", JSON.stringify(cont));
                    } catch (err) {
                        console.log(err.message);
                    }
                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: "/pro_planificacion",
                        data: formdata,
                        success: function (data) {
                            if (data.result == 'ok') {
                                bloqueointerface();
                                $("#itemspanelenf").modal("hide");
                                location.reload();
                            } else {
                                $.unblockUI();
                                mensajeWarning(data.mensaje);
                            }
                        },
                        error: function () {
                            $.unblockUI();
                            mensajeWarning("Error al enviar los datos.");
                        },
                        dataType: "json",
                        cache: false,
                        contentType: false,
                        processData: false
                    });
                } else {
                    mensajeWarning("Es obligatirio llenar la información Enfoque Metodológico");
                }
            });
            $(".editar_recurso").click(function () {
                var id = $(this).attr('ids');
                $.get("/pro_planificacion", {'action': 'editrecursodidactico', 'ids': id}, function (data) {
                    var dato;
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $("#itemspanelrec").modal({backdrop: 'static', width: '610px'}).modal('show');
                        $("#id_recurso").val(data.recurso);
                        $("#idsr").val(data.ids);
                    }
                }, 'json');
            });
            $("#itemspanelrec .btn-cerrar").click(function () {
                $("#itemspanelrec").modal("hide");
            });
            $("#itemspanelrec #adicionarrec").click(function () {
                var cont = $("#id_recurso").val();
                if (cont.length > 0) {
                    var ids = $("#idsr").val();
                    var formdata = new FormData($("#formrec")[0]);
                    try {
                        formdata.append("recurso", JSON.stringify(cont));
                    } catch (err) {
                        console.log(err.message);
                    }
                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: "/pro_planificacion",
                        data: formdata,
                        success: function (data) {
                            if (data.result == 'ok') {
                                bloqueointerface();
                                $("#itemspanelrec").modal("hide");
                                location.href = "/pro_planificacion?action=planclasevirtual&silaboid=" + data.ids;
                            } else {
                                $.unblockUI();
                                mensajeWarning(data.mensaje);
                            }
                        },
                        error: function () {
                            $.unblockUI();
                            mensajeWarning("Error al enviar los datos.");
                        },
                        dataType: "json",
                        cache: false,
                        contentType: false,
                        processData: false
                    });
                } else {
                    mensajeWarning("Es obligatorio llenar la información Recursos Didácticos");
                }
            });

            $(".editar_evaluacion").click(function () {
                var id = $(this).attr('ids');
                $.get("/pro_planificacion", {'action': 'editevaluacion', 'ids': id}, function (data) {
                    var dato;
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $("#itemspaneleva").modal({backdrop: 'static', width: '610px'}).modal('show');
                        $("#id_evaluacion").val(data.evaluacion);
                        $("#idsv").val(data.ids);
                    }
                }, 'json');

            });
            $("#itemspaneleva .btn-cerrar").click(function () {
                $("#itemspaneleva").modal("hide");
            });
            $("#itemspaneleva #adicionareva").click(function () {
                var cont = $("#id_evaluacion").val();
                if (cont.length > 0) {
                    var ids = $("#idsv").val();
                    var formdata = new FormData($("#formeva")[0]);
                    try {
                        formdata.append("evaluacion", JSON.stringify(cont));
                    } catch (err) {
                        console.log(err.message);
                    }
                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: "/pro_planificacion",
                        data: formdata,
                        success: function (data) {
                            if (data.result == 'ok') {
                                bloqueointerface();
                                $("#itemspaneleva").modal("hide");
                                location.href = "/pro_planificacion?action=planclasevirtual&silaboid=" + data.ids;
                            } else {
                                $.unblockUI();
                                mensajeWarning(data.mensaje);
                            }
                        },
                        error: function () {
                            $.unblockUI();
                            mensajeWarning("Error al enviar los datos.");
                        },
                        dataType: "json",
                        cache: false,
                        contentType: false,
                        processData: false
                    });
                } else {
                    mensajeWarning("Es obligatirio llenar la información Evaluación");
                }
            });
            $("#itemspanelduplicar_silabo .btn-cerrar").click(function () {
                $("#itemspanelduplicar_silabo").modal("hide");
            });
            $(".duplicar_silabo").click(function () {
                var id = $(this).attr('ids');
                $.get("/pro_planificacion", {'action': 'duplicar_silabo', 'ids': id}, function (data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $(".panelbody").html(data.data);
                        $("#itemspanelduplicar_silabo").modal({backdrop: 'static', width: '610px'}).modal('show');
                    }
                }, 'json');

            });
            $(".duplicar_silabo_otro_docente").click(function () {
                var id = $(this).attr('ids');
                $.get("/pro_planificacion", {'action': 'duplicar_silabo_otro_docente', 'ids': id}, function (data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $(".panelbody").html(data.data);
                        $("#itemspanelduplicar_silabo").modal({backdrop: 'static', width: '700px'}).modal('show');
                    }
                }, 'json');

            });
            $("#itemspaneldetalle_temas_subtemas .btn-cerrar").click(function () {
                $("#itemspaneldetalle_temas_subtemas").modal("hide");
            });
            $(".detalle_tst_registrar").click(function () {
                var id = $(this).attr('ids');
                $.get("/pro_planificacion", {'action': 'detalle_temasxplanificar', 'ids': id}, function (data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $(".panelbody").html(data.data);
                        $("#itemspaneldetalle_temas_subtemas").modal({backdrop: 'static', width: '1000px'}).modal('show');
                    }
                }, 'json');
            });
            $("#itemspanelplanificacionsalida .btn-cerrar").click(function () {
                $("#itemspanelplanificacionsalida").modal("hide");
            });
            $(".addplanificacionsalida").click(function () {
                var id = $(this).attr('ids');
                $.unblockUI();
                $("#itemspanelplanificacionsalida").modal({backdrop: 'static', width: '610px'}).modal('show');
                $("#ids").val(id);
            });
            $("#adicionarplanificacionsalida").click(function () {
                var cont = $("#contenido").val();
                if (cont.length > 0) {
                    var ids = $("#ids").val();
                    $.ajax({
                        type: "POST",
                        url: "/pro_planificacion",
                        data: {'action': 'addplanificacion_salida', 'ids': ids, 'cont': cont},
                        success: function (data) {
                            if (data.result == 'ok') {
                                $.unblockUI();
                                bloqueointerface();
                                $("#itemspanelplanificacionsalida").modal("hide");
                                location.href = "/pro_planificacion?action=planclasevirtual&silaboid=" + data.ids;
                            } else {
                                $.unblockUI();
                                mensajeWarning(data.mensaje);
                            }
                        }, error: function () {
                            $.unblockUI();
                            {#control.val(0).trigger("change");#}
                            mensajeWarning("Error de conexion.");
                        },
                        dataType: "json"
                    });
                } else {
                    mensajeWarning("Es obligatirio llenar la información de descricripcion de la salida");
                }
            });
            $("#itemspaneleditplanificacionsalida .btn-cerrar").click(function () {
                $("#itemspaneleditplanificacionsalida").modal("hide");
            });
            $(".editplanificacionsemanalsalida").click(function () {
                var id = $(this).attr('ids');
                $.unblockUI();
                $.get("/pro_planificacion", {'action': 'editplanificacion_salida', 'ids': id}, function (data) {
                    if (data.result == 'ok') {
                        $("#itemspaneleditplanificacionsalida").modal({backdrop: 'static', width: '610px'}).modal('show');
                        $("#id_contenido").val(data.descripcion);
                        $("#ids").val(id);
                    }
                }, 'json');
            });
            $("#editplanificacionsalida").click(function () {
                var cont = $("#id_contenido").val();
                if (cont.length > 0) {
                    var id = $("#ids").val();
                    $.ajax({
                        type: "POST",
                        url: "/pro_planificacion",
                        data: {'action': 'editplanificacion_salida', 'ids': id, 'cont': cont},
                        success: function (data) {
                            if (data.result == 'ok') {
                                $.unblockUI();
                                bloqueointerface();
                                $("#itemspanelplanificacionsalida").modal("hide");
                                location.href = "/pro_planificacion?action=planclasevirtual&silaboid=" + data.ids;
                            } else {
                                $.unblockUI();
                                mensajeWarning(data.mensaje);
                            }
                        }, error: function () {
                            $.unblockUI();
                            {#control.val(0).trigger("change");#}
                            mensajeWarning("Error de conexion.");
                        },
                        dataType: "json"
                    });
                } else {
                    mensajeWarning("Es obligatirio llenar la información de descricripcion de la salida");
                }
            });
            $("#id_tema").change(function () {
                var id = $(this).val();
                if (id.length > 0) {
                    $("#id_subtema").prop("disabled", false);
                } else {
                    $("#id_subtema").prop("disabled", true);
                }
                {#                alert(id);#}
            });
            $("#itemspaneladicionarsubtemas .btn-cerrar").click(function () {
                $("#itemspaneladicionarsubtemas").modal("hide");
            });
            $(".adicionarsubtemas").click(function () {
                var id = $(this).attr('ids');
                $.unblockUI();
                $.get("/pro_planificacion", {'action': 'adicionar_subtemas', 'ids': id}, function (data) {
                    if (data.results) {
                        $('#id_tema').empty().append('<option value="">---------</option>').val(0).trigger("change");
                        for (elemento in data.listatema) {
                            $('#id_tema').append('<option value="' + data.listatema[elemento][0] + '">' + data.listatema[elemento][1] + '</option>');
                        }
                        $("#itemspaneladicionarsubtemas").modal({backdrop: 'static', width: '610px'}).modal('show');
                        $("#ids").val(id);
                        $(".elementosubtema").remove();
                        for (elemento in data.lista) {
                            $("#contenidosubtemas").append('<tr class="elementosubtema"  id="fila_' + itemsblib + '">' +
                                '<td style="text-align: center ; display:none" class="idtema">' + data.lista[elemento][0] + '</td>' +
                                '<td width="45%" style="text-align: left;" class="tema">' + data.lista[elemento][1] + '</td>' +
                                '<td width="45%" style="text-align: left;" class="subtema">' + data.lista[elemento][2] + '</td>' +
                                '<td style="text-align:center;" width="5%"><a class="btn btn-mini btn-danger tu eliminarsubtema" title="Eliminar"><i class="fa fa-trash"></i> Eminiar</a></td>' +
                                '</tr>');
                            itemsblib += 1;
                            actualizar_lista_subtemas();
                            eliminar__subtemas();
                        }
                    }
                }, 'json');
            });
            $(".addsubtema").click(function () {
                var idt = $("#id_tema").val();
                var tema = $("#id_tema option:selected").text();
                var subtema = $("#id_subtema").val();
                if (subtema.length > 0) {
                    if (leer_lista_subtemas(subtema) == 0) {
                        $("#contenidosubtemas").append('<tr class="elementosubtema"  id="fila_' + itemsblib + '">' +
                            '<td style="text-align: center ; display:none" class="idtema">' + idt + '</td>' +
                            '<td width="45%" style="text-align: left;" class="tema">' + tema + '</td>' +
                            '<td width="45%" style="text-align: left;" class="subtema">' + subtema + '</td>' +
                            '<td style="text-align:center;" width="5%"><a class="btn btn-mini btn-danger tu eliminarsubtema" title="Eliminar"><i class="fa fa-trash"></i> Eminiar</a></td>' +
                            '</tr>');
                        itemsblib += 1;
                        actualizar_lista_subtemas();
                        eliminar__subtemas();
                        $("#adicionarsubtema").prop("disabled", false);
                    } else {
                        mensajeWarning("El subtema ya se encuentra registrado");
                    }
                    document.getElementById('id_subtema').value = '';
                }
            });
            actualizar_lista_subtemas = function () {
                lista_items1 = [];
                $(".elementosubtema").each(function () {
                    var item = {
                        idtema: $(this).find(".idtema").html(),
                        tema: $(this).find(".tema").html(),
                        subtema: $(this).find(".subtema").html()
                    };
                    lista_items1.push(item);
                });
            };
            eliminar__subtemas = function () {
                $(".eliminarsubtema").unbind();
                $(".eliminarsubtema").click(function () {
                    var padre = $(this).parent().parent();
                    padre.remove();
                    actualizar_lista_subtemas();
                });
            };
            $(".btn-adicionarsubtema").click(function () {
                var id = $("#ids").val();
                if (lista_items1.length > 0) {
                    $.ajax({
                        type: "POST",
                        url: "/pro_planificacion",
                        data: {'action': 'addsubtemasadicional', 'ids': id, 'lista': JSON.stringify(lista_items1)},
                        success: function (data) {
                            if (data.result == 'ok') {
                                $.unblockUI();
                                bloqueointerface();
                                $("#itemspaneladicionarsubtemas").modal("hide");
                                location.href = "/pro_planificacion?action=planclasevirtual&silaboid=" + data.ids;
                            } else {
                                $.unblockUI();
                                mensajeWarning(data.mensaje);
                            }
                        }, error: function () {
                            $.unblockUI();
                            {#control.val(0).trigger("change");#}
                            mensajeWarning("Error de conexion.");
                        },
                        dataType: "json"
                    });
                } else {
                    $("#itemspaneladicionarsubtemas").modal("hide");
                }
            });
            $("#itemspanelimportar_recurso_periodo .btn-cerrar").click(function () {
                $("#itemspanelimportar_recurso_periodo").modal("hide");
            });
            $(".duplicar_recurso_periodo").click(function () {
                var idsemanal = $(this).attr('idsemanal');
                var ids = $(this).attr('ids');
                var semana = $(this).attr('semana');
                var numsemana = $(this).attr('numsemana');
                var fini = $(this).attr('fini');
                var ffin = $(this).attr('ffin');
                $.post("/pro_planificacion", {'action': 'duplicar_recursossilabo_otro_periodo', 'ids': ids, 'semana': semana, 'numsemana': numsemana, 'fini': fini, 'ffin': ffin, 'idsemanal': idsemanal}, function (data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $(".panelbody").html(data.data);
                        $("#itemspanelimportar_recurso_periodo").modal({backdrop: 'static', width: '750px'}).modal('show');
                    }
                }, 'json');
            });

            $(".duplicar_recurso_individual").click(function () {
                var nombretipoactividad = $(this).attr('nombretipoactividad');
                var numsemana = $(this).attr('numsemana');
                $("#id_nombreactividad").html('')
                $("#id_nombreactividad").html('ACTIVIDAD: ' + nombretipoactividad + ' - SEMANA: ' + numsemana)
                var tipoactividad = $(this).attr('tipoactividad');
                var codsemanal = $(this).attr('codsemanal');
                $.post("/pro_planificacion", {'action': 'listar_periodos'}, function (data) {
                    if (data.result == 'ok') {
                        $("#id_tipoactividad").val(tipoactividad)
                        $("#id_codsemanal").val(codsemanal)
                        $("#periodosilabo").html('<option value="">--SELECCIONE PERIODO--</option>').val(0).trigger('change');
                        for (elemento in data.lista) {
                            $("#periodosilabo").append('<option value="' + data.lista[elemento][0] + '">' + data.lista[elemento][1] + '</option>');
                        }
                        $.unblockUI();
                        $("#itemsrecurso_individual").modal({backdrop: 'static', width: '860px', height: '500px'}).modal('show');
                    }
                }, 'json');
            });

            $('#periodosilabo').change(function () {
                $('#listadosilabos').empty().append('<option value="">--SELECCIONE SÍLABO--</option>').val(0).trigger("change");
                var idperiodosilabo = $("#periodosilabo").val();
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/pro_planificacion",
                    data: {'action': 'listarsilabos_periodos', 'idperiodosilabo': idperiodosilabo, 'idsilabo': {{ silabocab.id }}},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            for (elemento in data.lista) {
                                $('#listadosilabos').append('<option value="' + data.lista[elemento][0] + '">' + data.lista[elemento][1] + ' ' + data.lista[elemento][2] + ' ' + data.lista[elemento][5] + '</option>');
                            }
                        } else {
                            {#control.val(0).trigger("change");#}
                            mensajeWarning(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        {#control.val(0).trigger("change");#}
                        mensajeWarning("Error de conexion.");
                    },
                    dataType: "json"
                });
            });

            $('#listadosilabos').change(function () {
                var id_tipoactividad = $("#id_tipoactividad").val()
                var idsilaboperiodo = $("#listadosilabos").val();
                var id_codsemanal = $("#id_codsemanal").val();
                $('#itemsbodyactividades').empty()
                if (idsilaboperiodo > 0) {
                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: "/pro_planificacion",
                        data: {'action': 'listar_actividadsilabo', 'idsilaboperiodo': idsilaboperiodo, 'idtipoactividad': id_tipoactividad, 'id_codsemanal': id_codsemanal},
                        success: function (data) {
                            $.unblockUI();
                            if (data.result == 'ok') {
                                $("#itemsbodyactividades").html(data.data)

                                {#for (elemento in data.lista){#}

                                {#if (id_tipoactividad == 4){#}
                                {#    $("#itemsbodyactividades").append("<tr>" +#}
                                {#        "<td width='5%' style='text-align: center' >"+data.lista[elemento][1]+"</td>" +#}
                                {#        "<td width='95%' style='text-align: justify' ><a href='javascript:;' onclick='copiaactividad("+data.lista[elemento][0]+");' class='btn btn-success btn-mini'><i class='fa fa-plus'></i></a>"+data.lista[elemento][2]+"</td>" +#}
                                {#        "</tr>");#}
                                {# }else{#}
                                {#    $("#itemsbodyactividades").append("<tr>" +#}
                                {#        "<td width='5%' style='text-align: center' >"+data.lista[elemento][1]+"</td>" +#}
                                {#        "<td width='95%' style='text-align: justify' ><a href='javascript:;' onclick='copiaactividad("+data.lista[elemento][0]+");' class='btn btn-success btn-mini'><i class='fa fa-plus'></i></a> <a href='javascript:;' data-placement='right' class='btn btn-warning btn-mini tu detalletarea' codtipo='"+data.lista[elemento][4]+"' nomtipo='"+data.lista[elemento][6]+"' idesta='"+data.lista[elemento][5]+"' idsem='"+data.lista[elemento][1]+"' idtar='"+data.lista[elemento][0]+"' title='Ver más'><span class='fa fa-eye'></span></a> "+data.lista[elemento][2]+' '+ (data.lista[elemento][7] ? 'uuu' : 'iiii' )+"</td>" +#}
                                {#        "</tr>");#}
                                {# }#}
                                {# }#}
                            } else {
                                mensajeWarning(data.mensaje);
                            }
                            actualizar_detalle();
                        },
                        error: function () {
                            $.unblockUI();
                            {#control.val(0).trigger("change");#}
                            mensajeWarning("Error de conexion.");
                        },
                        dataType: "json"
                    });
                }
            });

            $(".duplicar_recurso_periodo_todo").click(function () {
                var ids = $(this).attr('ids');
                var tipo = $(this).attr('tipo');
                var nombretitulo = $(this).attr('nombretitulopanel');
                $.post("/pro_planificacion", {'action': 'duplicar_recursossilabovdos_otro_periodo_todo', 'ids': ids, 'tipo': tipo}, function (data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $("#idtitulo").html(nombretitulo);
                        $(".panelbody").html(data.data);
                        $("#itemspanelimportar_recurso_periodo").modal({backdrop: 'static', width: '750px'}).modal('show');
                    }
                }, 'json');
            });
            $(".duplicar_recurso_periodo_paralelo").click(function () {
                var ids = $(this).attr('ids');
                var tipo = $(this).attr('tipo');
                var nombretitulo = $(this).attr('nombretitulopanel');
                $.post("/pro_planificacion", {'action': 'replicar', 'ids': ids, 'tipo': tipo}, function (data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $("#idtituloreplica").html(nombretitulo);
                        $(".panelbodyreplica").html(data.data);
                        $("#modalereplicar").modal({backdrop: 'static', width: '750px'}).modal('show');
                    }
                }, 'json');
            });
            $(".duplicar_solorecurso_periodo_todo").click(function () {
                var ids = $(this).attr('ids');
                $.post("/pro_planificacion", {'action': 'duplicar_recursossilabovdos_otro_periodo_todo', 'ids': ids}, function (data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $(".panelbody").html(data.data);
                        $("#itemspanelimportar_recurso_periodo").modal({backdrop: 'static', width: '750px'}).modal('show');
                    }
                }, 'json');
            });

            $(".migrar_todocompendio").click(function () {
                var estadorubrica = 0

                $(".panelbody_migrarcompendio").html('hh');
                $("#itemspanelmigrar_compendio").modal({backdrop: 'static', width: '750px'}).modal('show');
            });

            $(".btn-cerrarcompendios").click(function () {
                $("#itemspanelmigrar_compendio").modal("hide");
            });


            $("#desplegar_obj").each(function () {
                obj = desplegar(1, obj, 'desplegar_obj');
            });
            $("#desplegar_enf").each(function () {
                enf = desplegar(2, enf, 'desplegar_enf');
            });
            $("#desplegar_rec").each(function () {
                rec = desplegar(3, rec, 'desplegar_rec');
            });
            $("#desplegar_eva").each(function () {
                eva = desplegar(4, eva, 'desplegar_eva');
            });

            $("#desplegar_obj").click(function () {
                obj = desplegar(1, obj, 'desplegar_obj');
            });
            $("#desplegar_enf").click(function () {
                enf = desplegar(2, enf, 'desplegar_enf');
            });
            $("#desplegar_rec").click(function () {
                rec = desplegar(3, rec, 'desplegar_rec');
            });
            $("#desplegar_eva").click(function () {
                eva = desplegar(4, eva, 'desplegar_eva');
            });
            $(".editobjetivo").change(function () {
                var obj = $(this).val();
                var id = $(this).attr('ids');
                bloqueointerface();
                $.post("/pro_planificacion", {'action': 'editobjetivoact', 'id': id, 'obj': obj}, function (data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                    } else {
                        mensajeWarning(data.mensaje);
                    }
                }, 'json');
            });
            $(".editenfoque").change(function () {
                var enf = $(this).val();
                var id = $(this).attr('ids');
                bloqueointerface();
                $.post("/pro_planificacion", {'action': 'editenfoqueact', 'id': id, 'enf': enf}, function (data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                    } else {
                        mensajeWarning(data.mensaje);
                    }
                }, 'json');
            });
            $(".editrecurso").change(function () {
                var rec = $(this).val();
                var id = $(this).attr('ids');
                bloqueointerface();
                $.post("/pro_planificacion", {'action': 'editrecursoact', 'id': id, 'rec': rec}, function (data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                    } else {
                        mensajeWarning(data.mensaje);
                    }
                }, 'json');
            });
            $(".editevaluacion").change(function () {
                var eval = $(this).val();
                var id = $(this).attr('ids');
                bloqueointerface();
                $.post("/pro_planificacion", {'action': 'editevaluacionact', 'id': id, 'eval': eval}, function (data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                    } else {
                        mensajeWarning(data.mensaje);
                    }
                }, 'json');
            });
            $("#itemspanellink .btn-cerrar").click(function () {
                $("#itemspanellink").modal("hide");
            });
            $(".editrecursolink").click(function () {
                var id = $(this).attr('ids');
                $.post("/pro_planificacion", {'action': 'listarecursolink', 'id': id}, function (data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $(".panelbodylink").html(data.data);
                        $(".itemspanellink").modal({backdrop: 'static', width: '700px'}).modal('show');
                    }
                }, 'json');
            });
            $(".actualizar_horas").click(function () {
                bloqueointerface();
                $.post("/pro_planificacion", {'action': 'actualizar_horas', 'id': {{silabocab.id }}}, function (data) {
                    if (data.result == 'ok') {
                        bloqueointerface();
                        location.href = '/pro_planificacion?action=planclasevirtual&silaboid={{ silabocab.id|encrypt }}';
                        $.unblockUI();
                    } else {
                        mensajeWarning("Error al actualizar las horas")
                    }
                }, 'json');
            });


            $(".verobservaciones").click(function () {
                var obstec = $(this).attr('obstec');
                var obsacad = $(this).attr('obsacad');
                var estadocumplimiento = $(this).attr('estc');
                $("#observaciontecnica").val("");
                $("#observacionacademida").val("");
                $("#estadocumplimiento").val("");
                $("#observaciontecnica").val(obstec);
                $("#observacionacademida").val(obsacad);
                $("#estadocumplimiento").val(estadocumplimiento);
                $("#modalobservacion").modal({backdrop: 'static', width: '610px'}).modal('show');
            });
            $("#modalobservacion .cerrar_modalobservacion").click(function () {
                $("#observaciontecnica").val("");
                $("#observacionacademida").val("");
                $("#estadocumplimiento").val("");
                $("#modalobservacion").modal("hide");
            });

            $(".verrecursostutor").click(function () {
                var ids = $(this).attr('ids');
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/pro_planificacion",
                    data: {'action': 'verdetalletutor', 'id': ids},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $("#selectauditoria-body").html(data.data);
                            $('#auditoriacriterio').modal({'width': 1000}).modal('show');
                        } else {
                            mensajeWarning(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        mensajeWarning("Error al generar los datos.");
                    },
                    dataType: "json"
                });
            });

            $(".auditoriacriterio_cerrar").click(function () {
                $("#auditoriacriterio").modal('hide');
            });
            actualizar_detalle = function () {
                $(".detalletarea").click(function () {
                    var nomtipo = $(this).attr('nomtipo');
                    var codtipo = $(this).attr('codtipo');
                    var idesta = $(this).attr('idesta');
                    var idtar = $(this).attr('idtar');
                    var action = '';
                    var numerosemana = $(this).attr('idsem');
                    $("#nomtitulodetalle").html('')
                    nomacti = 'Semana #' + numerosemana;
                    $("#nomtitulodetalle").html('Detalle de ' + nomtipo)
                    $("#divmostrartarea .subtitle").html('Semana ' + numerosemana + ' del sílabo semanal')
                    $("#id_codigotarea").val(idtar)
                    $("#id_codtipo").val(codtipo)
                    bloqueointerface();
                    $.post("/pro_planificacion", {'action': 'detalletarea_pregrado', 'idtar': idtar, 'codtipo': codtipo}, function (data) {
                        if (data.result == 'ok') {
                            $.unblockUI();
                            $(".panelbodytarea").html(data.data);
                            $("#divmostrartarea").modal({backdrop: 'static', width: '1000px'}).modal('show');
                        }
                    }, 'json');
                });
            };
            $(".cerrartarea").click(function () {
                $("#divmostrartarea").modal("hide");
            });

            $(".informacion").click(function () {
                var opcioninfo = $(this).attr('opcioninfo');
                $("#descripcioninfo").html('')
                if (opcioninfo == 1) {
                    {#var nombretitulo = $(this).attr('data-original-title');#}
                    $("#descripcioninfo").html("<li><b>NOTIFICAR</b></li> <br>" +
                        "<li>Esta opción permite notificar al Coordinador de carrera que el docente ha ingresado los Recursos de Aprendizaje.</li> <br>" +
                        "<li> Notificará únicamente los ítems seleccionados.</li><br>" +
                        "<li>Posteriormente, el coordinador de carrera realiza la revisión de los recursos y emite observaciones en caso de ser necesarias.</li><br>")
                }
                if (opcioninfo == 2) {
                    $("#descripcioninfo").html('<li><b>ACTUALIZAR SÍLABO MOODLE</b></li> <br>' +
                        '<li>Esta opción permite actualizar todo el sílabo a moodle. </li><br>' +
                        '<li>La acción tarda de 15 a 20 minutos en reflejarse en el aula virtual.</li>')
                }
                if (opcioninfo == 3) {
                    $("#descripcioninfo").html('<li><b>TRAZABILIDAD </b></li><br> ' +
                        '<li>Esta opción permite observar la trazabilidad de todos los recursos y actividades ingresadas con su respectivas semanas y descripción.</li>')
                }
                if (opcioninfo == 4) {
                    $("#descripcioninfo").html('<li><b>COPIAR DE OTRO CURSO </b></li><br>' +
                        '<li>Esta opción permite copiar los recursos y las actividades de otros cursos del mismo período. </li> <br>' +
                        '<li> Es importante que verifique cuidadosamente la asignatura que escoja, pues en ésta ventana también aparecen asignaturas relacionadas al nombre de la asignatura con la que está trabajando.</li>  <br> ' +
                        '<li>Únicamente se importarán las actividades y los recursos en estado “Aprobado” o “En Moodle”.</li>  <br>' +
                        '<li> Las actividades y los recursos se mostrarán en estado “Aprobado”, una vez copiado debe dar clic en “Migrar Moodle”.</li>')
                }
                if (opcioninfo == 5) {
                    $("#descripcioninfo").html('<li><b>IMPORTAR RECURSOS</b></li> <br>' +
                        '<li>Esta opción no reemplaza los recursos que ya están ingresados, importan los recursos únicamente en los registros vacíos.</li> <br>' +
                        '<li>Se recomienda que seleccione el período inmediato inferior en el cual el docente tenga planificación completa realizada.</li> <br>' +
                        '<li> Es importante que verifique cuidadosamente la asignatura que escoja, pues en esta ventana también aparecen asignaturas relacionadas al nombre de la asignatura con la que está trabajando.</li> <br>' +
                        '<li>Una vez que haya importado, le aparecerá el recurso en estado “Aprobado” para que le permita migrar a moodle. </li><br>' +
                        '<li> Al importar recursos, únicamente se importan recursos, no actividades. Sólo se importan los recursos en estado “Aprobado” y “En Moodle”. </li> <br>' +
                        '<li>Si selecciona un período diferente al actual, los recursos se mostrarán en estado “Ingresado” para que pueda realizar las actualización de fecha de inicio y de fin. <br>' +
                        '<li>Si selecciona el mismo período, los recursos se mostrarán en estado “Aprobado” para que le permita migrar a moodle.</li>')
                }
                if (opcioninfo == 6) {
                    $("#descripcioninfo").html('<li><b>IMPORTAR ACTIVIDADES.</b></li> <br>' +
                        '<li> Se recomienda que seleccione el periodo inmediato inferior en el cual el docente tenga planificación completa realizada.</li> <br>' +
                        '<li> Es importante que verifique cuidadosamente la asignatura que escoja, pues en esta ventana también aparecen asignaturas relacionadas al nombre de la asignatura con la que está trabajando.</li> <br>' +
                        '<li> Únicamente se importarán las actividades en estado “Aprobado” o “En Moodle”.</li> <br>' +
                        '<li>Si selecciona un período diferente al actual, las actividades se mostrarán en estado “Ingresado” para que pueda realizar las actualización de fecha de inicio y de fin. <br>' +
                        '<li>Si selecciona el mismo período, las actividades se mostrarán en estado “Aprobado” para que le permita migrar a moodle.</li>')
                }
                if (opcioninfo == 7) {
                    $("#descripcioninfo").html('<li><b>IMPORTAR VIDEOS MAGISTRALES</b></li> <br>' +
                        '<li>El botón de “Seleccionar” aparecerá siempre y cuando la asignatura tenga videos magistrales planificados, caso contrario aparecerá un mensaje “No existe video magistral en el periodo seleccionado.”</li><br>' +
                        '<li>Es importante que verifique cuidadosamente la asignatura que escoja, pues en esta ventana también aparecen asignaturas relacionadas al nombre de la asignatura con la que está trabajando.</li> <br>' +
                        '<li>Únicamente se importarán los videos en estado “Aprobado” o “En Moodle”.</li>')
                }
                if (opcioninfo == 8) {
                    $("#descripcioninfo").html('<li><b>DESCARGA MASIVA ACTIVIDADES EN ZIP.</b></li><br>' +
                        '<li>Esta opción permite descargar todas las actividades (Tareas, talleres, tests, exposiciones, foro, análisis de casos, trabajo de investigación, prácticas y trabajos prácticos) de manera masiva en formato ZIP.</li>')
                }
                if (opcioninfo == 9) {
                    $("#descripcioninfo").html('<li><b>URL SILABO MOODLE.</b></li> <br>' +
                        '<li>Esta opción lo direcciona de manera inmediata al aula de moodle de la asignatura. </li>')
                }
                if (opcioninfo == 10) {
                    $("#descripcioninfo").html('<li><b>MIGRAR MOODLE MASIVO.</b></li> <br>' +
                        '<li>Al dar click en "Migrar moodle masivo", este permite crear los recursos o actividades en moodle, estos previamente seleccionados mediante el check disponible cuando esta en estado aprobado.</li>')
                }
                if (opcioninfo == 11) {
                    $("#descripcioninfo").html($("#tema1").html())
                }
                $("#infoaccion").modal("show");
            });
            $(".descripcioninfocerrar").click(function () {
                $("#infoaccion").modal("hide");
            });


            $(".informacionactividades").click(function () {
                var opcioninfoact = $(this).attr('opcioninfoact');
                $("#descripcioninfoact").html('')
                if (opcioninfoact == 1) {
                    {#var nombretitulo = $(this).attr('data-original-title');#}
                    $("#descripcioninfoact").html("<li><b>IMPORTAR TEST</b></li> <br>" +
                        "<li>Al dar clic en “Importar Test”, podrá seleccionar el período, esta lista contiene periodos distintos al actual.</li> <br>" +
                        "<li>Seguidamente aparecerá una lista con las asignaturas o sílabos planificados en el periodo seleccionado.</li><br>" +
                        "<li>Una vez seleccionado el período y el sílabo, debe seleccionar la actividad que desea importar, para esto es obligatorio escoger la categoría de calificación  y dar clic en “+”. </li><br>" +
                        "<li>Únicamente se importarán las actividades en estado “Aprobado” o “En Moodle”. </li><br>" +
                        "<li>Las actividades se mostrarán en estado “Ingresado” para que pueda realizar las actualización de fecha de inicio y de fin. </li><br>" +
                        "<li>Se importará únicamente la actividad que haya seleccionado. </li><br>"
                    )
                }
                if (opcioninfoact == 2) {
                    $("#descripcioninfoact").html("<li><b>IMPORTAR TALLER</b></li> <br>" +
                        "<li>Al dar clic en “Importar Taller”, podrá seleccionar el período, esta lista contiene periodos distintos al actual.</li> <br>" +
                        "<li>Seguidamente aparecerá una lista con las asignaturas o sílabos planificados en el periodo seleccionado.</li><br>" +
                        "<li>Una vez seleccionado el período y el sílabo, debe seleccionar la actividad que desea importar, para esto es obligatorio escoger la categoría de calificación  y dar clic en “+”. </li><br>" +
                        "<li>Únicamente se importarán las actividades en estado “Aprobado” o “En Moodle”. </li><br>" +
                        "<li>Las actividades se mostrarán en estado “Ingresado” para que pueda realizar las actualización de fecha de inicio y de fin. </li><br>" +
                        "<li>Se importará únicamente la actividad que haya seleccionado. </li><br>"
                    )
                }
                if (opcioninfoact == 3) {
                    $("#descripcioninfoact").html("<li><b>IMPORTAR EXPOSICIÓN</b></li> <br>" +
                        "<li>Al dar clic en “Importar Exposición”, podrá seleccionar el período, esta lista contiene periodos distintos al actual.</li> <br>" +
                        "<li>Seguidamente aparecerá una lista con las asignaturas o sílabos planificados en el periodo seleccionado.</li><br>" +
                        "<li>Una vez seleccionado el período y el sílabo, debe seleccionar la actividad que desea importar, para esto es obligatorio escoger la categoría de calificación  y dar clic en “+”. </li><br>" +
                        "<li>Únicamente se importarán las actividades en estado “Aprobado” o “En Moodle”. </li><br>" +
                        "<li>Las actividades se mostrarán en estado “Ingresado” para que pueda realizar las actualización de fecha de inicio y de fin. </li><br>" +
                        "<li>Se importará únicamente la actividad que haya seleccionado. </li><br>"
                    )
                }
                if (opcioninfoact == 4) {
                    $("#descripcioninfoact").html("<li><b>IMPORTAR FORO</b></li> <br>" +
                        "<li>Al dar clic en “Importar Foro”, podrá seleccionar el período, esta lista contiene periodos distintos al actual.</li> <br>" +
                        "<li>Seguidamente aparecerá una lista con las asignaturas o sílabos planificados en el periodo seleccionado.</li><br>" +
                        "<li>Una vez seleccionado el período y el sílabo, debe seleccionar la actividad que desea importar, para esto es obligatorio escoger la categoría de calificación  y dar clic en “+”. </li><br>" +
                        "<li>Únicamente se importarán las actividades en estado “Aprobado” o “En Moodle”. </li><br>" +
                        "<li>Las actividades se mostrarán en estado “Ingresado” para que pueda realizar las actualización de fecha de inicio y de fin. </li><br>" +
                        "<li>Se importará únicamente la actividad que haya seleccionado. </li><br>"
                    )
                }
                if (opcioninfoact == 5) {
                    $("#descripcioninfoact").html("<li><b>IMPORTAR TAREA</b></li> <br>" +
                        "<li>Al dar clic en “Importar Tarea”, podrá seleccionar el período, esta lista contiene periodos distintos al actual.</li> <br>" +
                        "<li>Seguidamente aparecerá una lista con las asignaturas o sílabos planificados en el periodo seleccionado.</li><br>" +
                        "<li>Una vez seleccionado el período y el sílabo, debe seleccionar la actividad que desea importar, para esto es obligatorio escoger la categoría de calificación  y dar clic en “+”. </li><br>" +
                        "<li>Únicamente se importarán las actividades en estado “Aprobado” o “En Moodle”. </li><br>" +
                        "<li>Las actividades se mostrarán en estado “Ingresado” para que pueda realizar las actualización de fecha de inicio y de fin. </li><br>" +
                        "<li>Se importará únicamente la actividad que haya seleccionado. </li><br>"
                    )
                }
                if (opcioninfoact == 6) {
                    $("#descripcioninfoact").html("<li><b>ANÁLISIS DE CASO</b></li> <br>" +
                        "<li>Al dar clic en “Importar Análisis de Caso”, podrá seleccionar el período, esta lista contiene periodos distintos al actual.</li> <br>" +
                        "<li>Seguidamente aparecerá una lista con las asignaturas o sílabos planificados en el periodo seleccionado.</li><br>" +
                        "<li>Una vez seleccionado el período y el sílabo, debe seleccionar la actividad que desea importar, para esto es obligatorio escoger la categoría de calificación  y dar clic en “+”. </li><br>" +
                        "<li>Únicamente se importarán las actividades en estado “Aprobado” o “En Moodle”. </li><br>" +
                        "<li>Las actividades se mostrarán en estado “Ingresado” para que pueda realizar las actualización de fecha de inicio y de fin. </li><br>" +
                        "<li>Se importará únicamente la actividad que haya seleccionado. </li><br>"
                    )
                }
                if (opcioninfoact == 7) {
                    $("#descripcioninfoact").html("<li><b>TRABAJO DE INVESTIGACIÓN</b></li> <br>" +
                        "<li>Al dar clic en “Importar Trabajo de Investigación”, podrá seleccionar el período, esta lista contiene periodos distintos al actual.</li> <br>" +
                        "<li>Seguidamente aparecerá una lista con las asignaturas o sílabos planificados en el periodo seleccionado.</li><br>" +
                        "<li>Una vez seleccionado el período y el sílabo, debe seleccionar la actividad que desea importar, para esto es obligatorio escoger la categoría de calificación  y dar clic en “+”. </li><br>" +
                        "<li>Únicamente se importarán las actividades en estado “Aprobado” o “En Moodle”. </li><br>" +
                        "<li>Las actividades se mostrarán en estado “Ingresado” para que pueda realizar las actualización de fecha de inicio y de fin. </li><br>" +
                        "<li>Se importará únicamente la actividad que haya seleccionado. </li><br>"
                    )
                }
                if (opcioninfoact == 8) {
                    $("#descripcioninfoact").html("<li><b>IMPORTAR TRABAJO PRÁCTICO</b></li> <br>" +
                        "<li>Al dar clic en “Importar Trabajo Práctico”, podrá seleccionar el período, esta lista contiene periodos distintos al actual.</li> <br>" +
                        "<li>Seguidamente aparecerá una lista con las asignaturas o sílabos planificados en el periodo seleccionado.</li><br>" +
                        "<li>Una vez seleccionado el período y el sílabo, debe seleccionar la actividad que desea importar, para esto es obligatorio escoger la categoría de calificación  y dar clic en “+”. </li><br>" +
                        "<li>Únicamente se importarán las actividades en estado “Aprobado” o “En Moodle”. </li><br>" +
                        "<li>Las actividades se mostrarán en estado “Ingresado” para que pueda realizar las actualización de fecha de inicio y de fin. </li><br>" +
                        "<li>Se importará únicamente la actividad que haya seleccionado. </li><br>"
                    )
                }

                if (opcioninfoact == 9) {
                    $("#descripcioninfoact").html("<li><b>CREAR  PRESENTACIONES EN MOODLE</b></li> <br>" +
                        "<li>Al dar clic en “Crear todo moodle”, sin  necesidad de seleccionar, se crearán todas las presentaciones semanales aprobadas del sílabo en el que se está trabajando.</li> <br>" +
                        "<li>En caso de existir algún error en la creación de un recurso, solo dicho recurso no será migrado a moodle.</li> <br>"
                    )
                }

                if (opcioninfoact == 10) {
                    $("#descripcioninfoact").html("<li><b>CREAR  COMPENDIOS EN MOODLE</b></li> <br>" +
                        "<li>Al dar clic en “Crear todo moodle”, sin  necesidad de seleccionar, se crearán todos los compendios semanales aprobados del sílabo en el que se está trabajando.</li> <br>" +
                        "<li>En caso de existir algún error en la creación de un recurso, solo dicho recurso no será migrado a moodle.</li> <br>"
                    )
                }

                if (opcioninfoact == 11) {
                    $("#descripcioninfoact").html("<li><b>CREAR  GUÍA DE ESTUDIANTE EN MOODLE</b></li> <br>" +
                        "<li>Al dar clic en “Crear todo moodle”, sin  necesidad de seleccionar, se crearán todas las guías de estudiante semanales aprobadas del sílabo en el que se está trabajando.</li> <br>" +
                        "<li>En caso de existir algún error en la creación de un recurso, solo dicho recurso no será migrado a moodle.</li> <br>"
                    )
                }

                if (opcioninfoact == 12) {
                    $("#descripcioninfoact").html("<li><b>CREAR  MATERIALES COMPLEMENTARIOS EN MOODLE</b></li> <br>" +
                        "<li>Al dar clic en “Crear todo moodle”, sin  necesidad de seleccionar, se crearán todos los materiales complementarios semanales aprobados del sílabo en el que se está trabajando.</li> <br>" +
                        "<li>En caso de existir algún error en la creación de un recurso, solo dicho recurso no será migrado a moodle.</li> <br>"
                    )
                }

                $("#infoaccionact").modal("show");
            });
            $(".descripcioninfoactcerrar").click(function () {
                $("#infoaccionact").modal("hide");
            });


            $(".detalletareaadmision").click(function () {
                var nomtipo = $(this).attr('nomtipo');
                var codtipo = $(this).attr('codtipo');
                var idesta = $(this).attr('idesta');
                var idtar = $(this).attr('idtar');
                var action = '';
                var numerosemana = $(this).attr('idsem');
                $("#nomtitulodetalle").html('')
                nomacti = 'Semana #' + numerosemana;
                $("#nomtitulodetalle").html('Detalle de ' + nomtipo)
                $("#id_codigotarea").val(idtar)
                $("#id_codtipo").val(codtipo)
                bloqueointerface();
                $.post("/pro_planificacion", {'action': 'detalletareaadmision', 'idtar': idtar, 'codtipo': codtipo}, function (data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $(".panelbodytarea").html(data.data);
                        $("#divmostrartarea").modal({backdrop: 'static', width: '1000px'}).modal('show');
                    }
                }, 'json');
            });
            $(".cerrartarea").click(function () {
                $("#divmostrartarea").modal("hide");
            });
            $('.header').click(function () {
                $(this).toggleClass('expand').nextUntil('tr.header').slideToggle(100);
            });
            actualizar_detalle();

            descargazip = function (id) {
                bloqueointerface();
                $.post("/pro_planificacion", {'action': 'generarmasivo', 'id': id}, function (data) {
                    $.unblockUI();
                    if (data.result == 'ok') {
                        {#openwindow_reporte(location.origin + data.url, 800, 500);#}
                        window.open(data.url, '_blank');
                    } else {
                        mensajeWarning(data.mensaje)
                    }
                });
            };

        });

        function desplegar(id, aux, nombre) {
            if (aux == 0) {
                $(".collapse" + id).collapse('hide');
                $("#" + nombre).parent().find(".fa").removeClass("fa-chevron-up").addClass("fa-chevron-down");
                aux = 1;
            } else {
                $(".collapse" + id).collapse('show');
                $("#" + nombre).parent().find(".fa").removeClass("fa-chevron-down").addClass("fa-chevron-up");
                aux = 0;
            }
            return aux;
        }

        function leer_lista_subtemas(subtema) {
            var ban = 0;
            for (i = 0; i < lista_items1.length; i++) {
                if (subtema == lista_items1[i]['subtema']) {
                    ban = 1;
                    return;
                } else {
                    ban = 0;
                }
            }
            return ban;
        }

        function vistaprevia(idproprag) {
            openwindow('POST', '/pro_planificacion', {action: 'silabopdf', id: idproprag}, '_blank');
        }

        function formModal(id, text, action, nombrediv, dimension) {
            bloqueointerface();
            $.ajax({
                type: "GET",
                url: `{{ request.path }}`,
                data: {
                    'action': action,
                    'id': id,
                    'nombrediv': nombrediv,
                },
                success: function (data) {
                    $.unblockUI();
                    if (data.result === true) {
                        $('.panelbodymatricula').html(data.data);
                        $('#itemspanelmatricula .paneltitlematricula').html(text);
                        $("#itemspanelmatricula").modal({backdrop: 'static', width: dimension}).modal('show');
                    } else {
                        mensajeWarning(data.mensaje);
                    }
                },
                error: function () {
                    $.unblockUI();
                    mensajeWarning("Error de conexión.");
                },
                dataType: "json"
            });
        }

        function migrarmasivo(id) {
            bloqueointerface();
            $.ajax({
                type: "GET",
                url: `{{ request.path }}`,
                data: {
                    'action': 'migrarmasivomodal',
                    'id': id,
                },
                success: function (data) {
                    $.unblockUI();
                    if (data.result === true) {
                        $('.panelmigrarmasivoModal').html(data.data);
                        $("#migrarmasivoModal").modal({backdrop: 'static'}).modal('show');
                    } else {
                        mensajeWarning(data.mensaje);
                    }
                },
                error: function () {
                    $.unblockUI();
                    mensajeWarning("Error de conexión.");
                },
                dataType: "json"
            });
        }

        function verresumen(id) {
            bloqueointerface();
            $.ajax({
                type: "GET",
                url: `{{ request.path }}`,
                data: {
                    'action': 'migrarmasivomodal',
                    'id': id,
                },
                success: function (data) {
                    $.unblockUI();
                    if (data.result === true) {
                        $('.panelmigrarmasivoModal').html(data.data);
                        $("#migrarmasivoModal").modal({backdrop: 'static'}).modal('show');
                    } else {
                        mensajeWarning(data.mensaje);
                    }
                },
                error: function () {
                    $.unblockUI();
                    mensajeWarning("Error de conexión.");
                },
                dataType: "json"
            });
        }

        function cargarBanner(id, text, action) {
            bloqueointerface();
            $.ajax({
                type: "GET",
                url: `{{ request.path }}`,
                data: {
                    'action': action,
                    'id': id,
                },
                success: function (data) {
                    $.unblockUI();
                    if (data.result === true) {
                        $('.panelbodybanner').html(data.data);
                        $('#itemspanelbanner .paneltitlebanner').html(text);
                        $("#itemspanelbanner").modal({backdrop: 'static'}).modal('show');
                    } else {
                        mensajeWarning(data.mensaje);
                    }
                },
                error: function () {
                    $.unblockUI();
                    mensajeWarning("Error de conexión.");
                },
                dataType: "json"
            });
        }

    </script>
    <script src="/static/adicionalesjs/formquestionb4.js?0.26"></script>
{% endblock %}
{% block atras %}{% if idcoordinacion == 7 %}/pro_planificacion?action=silaboposgrado&materia={{ silabocab.materia.id|encrypt }}{% else %}/pro_planificacion?action=silabo&materia={{ silabocab.materia.id|encrypt }}{% endif %}{% endblock %}
{% block canvas %}

    <div class="modal fade static" id="migrarmasivoModal" style="display: none;">
        <div class="modal-dialog modal-fullscreen" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4><i class="fa fa-book"></i> <b>Resumen de Actividades Planificadas</b></h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal form-modal" autocomplete="off" method="post"
                          enctype="multipart/form-data" action="{{ request.path }}">
                        {% csrf_token %}
                        <div class="row-fluid panelmigrarmasivoModal" style="width: 100%; height: 100%;">
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class='row'>
        <div class='col-lg-9'>
            <div class="headtitle">
                <h3 class="texto-blue">{{ title }}</h3>
                <h6>Profesor: {{ profesor }}</h6>
                <h6>Asignatura: {{ silabocab.materia.asignaturamalla.asignatura|lower|capfirst }} - {{ silabocab.materia.paralelo }}</h6>
                <h6>Materia ID: {{ silabocab.materia.id }}</h6>
                <h6>Moodle ID: {{ silabocab.materia.idcursomoodle }}</h6>
            </div>
        </div>
        <div class='col-lg-3'>
            <table width="100%" border="0" cellspacing="0" cellpadding="0" class="table table-bordered">
                <tr>
                    <td style="text-align: center">
                        <a style="color: #3a87ad; font-size: 18px" href="#"><i class="fa fa-circle"></i></a>
                    </td>
                    <td style="text-align: center">Ingresado</td>
                    <td style="text-align: center">
                        <a style="color: #b94a48; font-size: 18px" href="#"><i class="fa fa-circle"></i></a>
                    </td>
                    <td style="text-align: center">Rechazado</td>
                </tr>
                <tr>
                    <td style="text-align: center">
                        <a style="color: #faa732; font-size: 18px" href="#"><i class="fa fa-circle"></i></a>
                    </td>
                    <td style="text-align: center">Aprobado</td>
                    <td style="text-align: center">
                        <a style="color: #5bb75b; font-size: 18px" href="#"><i class="fa fa-circle"></i></a>
                    </td>
                    <td style="text-align: center">En moodle</td>
                </tr>
                <tr>
                    <td style="text-align: center" colspan="1">
                        <a style="color: #77477E; font-size: 18px" href="#"><i class="fa fa-circle"></i></a>
                    </td>
                    <td style="text-align: center" colspan="3">Revisión Crai</td>
                </tr>
            </table>
        </div>
    </div>

    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-4 col-md-12 col-12">
                <div class="card mb-3">
                    <div class="card-header" style="height: 25px;">
                        <h4><i class="fa fa-list-alt"></i> Detalle Planificación</h4>
                    </div>
                    <div class="card-body">
                        <div class="row mb-2 g-0">
                            {% if silabocab.materia.idcursomoodle == 0 %}
                                <div class="alert alert-warning">
                                    <b>Nota:</b> Puede crear los recursos pero no podrá migrar a mooodle mientras la asignatura no exista en el Aula Virtual.
                                </div>
                            {% endif %}
                            {% if titulacion %}
                                <div class="alert alert-primary">
                                    <b>Nota:</b> Las actividades de esta materia no son calificables.
                                </div>
                            {% endif %}
                            {% if silabocab.materia.banner %}
                                <img src="/media/{{ silabocab.materia.banner }}" class="img-fluid img-thumbnail rounded">
                            {% else %}
                                {% if silabocab.materia.idcursomoodle %}
                                    <a class="tr" title="Actualizar Portada" href="javascript:void(0)" onclick="cargarBanner({{ silabocab.materia.id }}, 'Portada Curso {{ silabocab.materia.nombre_completo }}', 'changebannermateria')">
                                        <div class="card border border-2 shadow-none card-dashed-hover" style="height: 75px;">
                                            <div class="card-body d-flex flex-column justify-content-center text-center">
                                                <i class="fa fa-plus text-secondary mb-3 fs-2" aria-hidden="true"></i>
                                            </div>
                                        </div>
                                    </a>
                                {% endif %}
                            {% endif %}
                            <div class="align-items-center">
                                <div class="btn-group">
                                    <button type="button" class="btn btn-block btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <i class="fa fa-cogs" aria-hidden="true"></i> Acciones
                                    </button>
                                    <div class="dropdown-menu">
                                        <a href="javascript:;" class="notificarmasivo dropdown-item" title="Solo se notificarán los ítems seleccionados"><i class="fa fa-check"></i>&nbsp;Notificar</a>
                                        {#                                        <a href="javascript:;" class="migrarmoodlemasivo dropdown-item" title="Solo se migrarán los ítems seleccionados"><i class="fa fa-check"></i>&nbsp;Migrar Moodle Masivo</a>#}
                                        <a href="javascript:;" class="actualizarsmoodle dropdown-item"><i class="fa fa-refresh"></i>&nbsp;Actualizar Sílabo Moodle</a>
                                        <a class="bloqueo_pantalla dropdown-item" href="/pro_planificacion?action=trazabilidad&id={{ silabocab.id|encrypt }}&rutapage=planrecursoclasevirtual"><i class="fa fa-list"></i>&nbsp;Trazabilidad</a>
{#                                        {% if not no_permite_duplicar %}#}
                                        <a tipo="1" ids="{{ silabocab.id|encrypt }}" href="javascript:;" class="duplicar_recurso_periodo_paralelo dropdown-item" nombretitulopanel="Replicar a otros paralelos"><i class="fa fa-clone"></i>&nbsp;Replicar</a>
                                        <a tipo="1" ids="{{ silabocab.id|encrypt }}" href="javascript:;" class="duplicar_recurso_periodo_todo dropdown-item" nombretitulopanel="Copiar de otro curso"><i class="fa fa-clone"></i>&nbsp;Copiar de otro curso</a>
                                        <a tipo="2" ids="{{ silabocab.id|encrypt }}" href="javascript:;" class="duplicar_recurso_periodo_todo dropdown-item" nombretitulopanel="Importar recurso"><i class="fa fa-clone"></i>&nbsp;Importar Recursos</a>
                                        <a tipo="3" ids="{{ silabocab.id|encrypt }}" href="javascript:;" class="duplicar_recurso_periodo_todo dropdown-item"><i class="fa fa-clone"></i>&nbsp;Importar Actividades</a>
{#                                        {% endif %}#}
                                        {% if puede_videomagistral or idcoordinacion == 9 or silabocab.materia.asignaturamalla.transversal %}
                                            <a tipo="4" ids="{{ silabocab.id|encrypt }}" href="javascript:;" class="duplicar_recurso_periodo_todo dropdown-item" nombretitulopanel="Importar videos magistrales"><i class="fa fa-clone"></i>&nbsp;Importar videos magistrales</a>
                                        {% endif %}
                                        <a href="javascript:void(0)" class="dropdown-item" onclick="migrarmasivo('{{ silabocab.id|encrypt }}')"><i class="fa fa-upload"></i>&nbsp;Migrar Recursos a Moodle</a>
                                        <a class="dropdown-item" onclick="descargazip('{{ silabocab.id|encrypt }}')" href="javascript:;"><i class="fa fa-arrow-down"></i>&nbsp;Descarga masiva actividades en zip</a>
                                        <a class="dropdown-item" href="/media/htmlmoodlestatic/{{ silabocab.materia.namehtml }}"><i class="fa fa-arrow-down"></i>&nbsp;Url sílabo moodle</a>
                                        {% if silabocab.materia.banner %}
                                            <a class="dropdown-item"
                                               href="javascript:void(0)" onclick="cargarBanner({{ silabocab.materia.id }}, 'Portada Curso {{ silabocab.materia.nombre_completo }}', 'changebannermateria')">
                                                <i class="fa fa-picture-o"></i>&nbsp;Actualizar Portada
                                            </a>
                                        {% endif %}
                                    </div>
                                </div>
                                <a class="btn btn-info" onclick="verresumen('{{ silabocab.id|encrypt }}')" href="javascript:void(0)">
                                    <i class="fa fa-calendar"></i> Ver Resumen
                                </a>
                                <a class="btn btn-warning" onclick="formModal('{{ silabocab.materia.nivel.modalidad.id|encrypt }}', 'Listado de formatos para planificación de recursos', 'view_formato', '', 'lg')()" href="javascript:void(0)">
                                    <i class="fas fa-file-download"></i> Formatos
                                </a>
                                {% if silabocab.materia.idcursomoodle %}
                                    {% if silabocab.materia.coordinacion.id == 9 %}
                                        <a class="btn btn-warning btn-mini"
                                           href="{{ periodo.urlmoodle2 }}/course/view.php?id={{ silabocab.materia.idcursomoodle }}" target="_blank">
                                            <i class="fa fa-share"></i> Ir a moodle
                                        </a>
                                    {% elif silabocab.materia.coordinacion.id == 7  %}
                                        <a class="btn btn-warning "
                                           href="{{ periodo.urlmoodle }}/course/view.php?id={{ silabocab.materia.idcursomoodle }}" target="_blank">
                                            <i class="fa fa-share"></i> Ir a moodle
                                        </a>
                                    {% elif silabocab.materia.asignaturamalla.malla.modalidad_id == 1 or silabocab.materia.asignaturamalla.malla.modalidad_id == 2 %}
                                        <a class="btn btn-warning "
                                           href="{{ periodo.urlmoodle }}/course/view.php?id={{ silabocab.materia.idcursomoodle }}" target="_blank">
                                            <i class="fa fa-share"></i> Ir a moodle
                                        </a>
                                    {% elif silabocab.materia.asignaturamalla.malla.modalidad_id == 3 %}
                                         <a class="btn btn-warning "
                                           href="{{ periodo.urlmoodleenlinea }}/course/view.php?id={{ silabocab.materia.idcursomoodle }}" target="_blank">
                                            <i class="fa fa-share"></i> Ir a moodle
                                        </a>
                                    {% endif %}
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                <nav class="navbar navbar-expand-md navbar-light shadow-sm mb-4 mb-lg-0 sidenav">
                    <a class="d-xl-none d-lg-none d-md-none text-inherit fw-bold" href="#">Menu</a>
                    <button class="navbar-toggler d-md-none icon-shape icon-sm rounded bg-primary text-light collapsed" type="button"
                            data-bs-toggle="collapse" data-bs-target="#sidenav" aria-controls="sidenav" aria-expanded="false">
                        <span class="fa fa-list"></span>
                    </button>
                    <div class="navbar-collapse collapse" id="sidenav" style="margin-top: 4px;">
                        <div class="navbar-nav flex-column">
                            <span class="navbar-header"><i class="fa fa-calendar"></i> Semanas</span>
                            <ul class="list-unstyled ms-n2 mb-4">
                                {% for semana in silabosemanal %}
                                    {#                                    {% if not semana.examen %}#}
                                    <li id="nav{{ forloop.counter }}" class="menusemanas nav-item {% if forloop.counter == request.session.fecha_sel and not essemanaexamen %}active{% endif %}">
                                        <a class="nav-link bloqueo_pantalla" href="?action=planrecursoclasevirtual&silaboid={{ silabocab.id|encrypt }}&numsemana={{ forloop.counter }}">
                                              <span>
                                                  <i class="fa fa-calendar-check"></i> Semana {{ semana.numsemana }}  {% if semana.examen %}(Examen){% endif %}
                                                  <span class="text-muted">
                                                      ({{ semana.fechainiciosemana|date:"Y-m-d" }} - {{ semana.fechafinciosemana|date:"Y-m-d" }})
{#                                                      ({{ semana.id }})#}
                                                      {% if semana.tieneactividadplanificada %}&nbsp;<i class="fa fa-info-circle tr" title="Tiene planificado actividad en el sílabo para esta semana"></i>{% endif %}
                                                  </span>
                                              </span>
                                        </a>
                                    </li>
                                    {% if not semana.examen %}
                                        {% if semana.numsemana|sumauno in semanaexamenes %}
                                            {% with tiene_semana=silabocab|args:semana.numsemana|call:'tiene_semana_num_semana' %}
                                                {% with semanaexamen=semana.numsemana|sumauno %}
                                                    {% if not tiene_semana %}
                                                        <li id="nav{{ forloop.counter }}" class="menusemanas nav-item {% if semanaexamen == numsemana and essemanaexamen %}active{% endif %}">
                                                            <a class="nav-link" href="?action=planrecursoclasevirtual&silaboid={{ silabocab.id|encrypt }}&numsemana={{ forloop.counter }}&examen={{ semanaexamen }}">
                                                            <span>
                                                                <i class="fa fa-calendar-check"></i> Semana {{ semana.numsemana|sumauno }}
                                                                <span class="text-muted">(Examen)</span>
{#                                                                {% if idcoordinacion != 9 %}#}
{#                                                                    {% if not silabocab.materia.cerrado %}#}
{#                                                                        <a class="btn btn-success btn-mini" href="/pro_planificacion?action=addexamen&silabo={{ semana.silabo.id|encrypt }}&codigoactividad={{ 1|encrypt }}&numerosemana={{ semana.numsemana|sumauno }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar Examen'><i class="fa fa-plus"></i></a>#}
{#                                                                    {% endif %}#}
{#                                                                {% endif %}#}
                                                            </span>
                                                            </a>
                                                        </li>
                                                    {% endif %}
                                                {% endwith %}
                                            {% endwith %}
                                        {% endif %}
{#                                        {% if semana.numsemana|sumauno|sumauno in semanaexamenes and forloop.last %}#}
{#                                            {% with numerosemana=semana.numsemana|sumauno|sumauno %}#}
{#                                                {% with tiene_semana=silabocab|args:numerosemana|call:'tiene_semana_num_semana' %}#}
{#                                                    {% with semanaexamen=numerosemana %}#}
{#                                                        {% if not tiene_semana %}#}
{#                                                            <li id="nav{{ forloop.counter }}" class="menusemanas nav-item {% if semanaexamen == numsemana and essemanaexamen %}active{% endif %}">#}
{#                                                                <a class="nav-link" href="?action=planrecursoclasevirtual&silaboid={{ silabocab.id|encrypt }}&numsemana={{ forloop.counter }}&examen={{ semanaexamen }}">#}
{#                                                                <span>#}
{#                                                                    <i class="fa fa-calendar-check"></i> Semana {{ numerosemana }}#}
{#                                                                    <span class="text-muted">(Examen parcial) jjj</span>#}
{#                                                                </span>#}
{#                                                                </a>#}
{#                                                            </li>#}
{#                                                        {% endif %}#}
{#                                                    {% endwith %}#}
{#                                                {% endwith %}#}
{#                                            {% endwith %}#}
{#                                        {% endif %}#}
                                    {% endif %}
                                    {#                                    {% else %}#}
                                    {#                                        <li id="nav{{ forloop.counter }}" class="menusemanas nav-item {% if forloop.counter == request.session.fecha_sel %}active{% endif %}">#}
                                    {#                                            <a class="nav-link bloqueo_pantalla" href="?action=planrecursoclasevirtual&silaboid={{ silabocab.id|encrypt }}&numsemana={{ forloop.counter }}">#}
                                    {#                                                <span><i class="fa fa-calendar-check"></i> Semana {{ semana.numsemana }} (Examen parcial)#}
                                    {#                                                     <span class="text-muted">#}
                                    {#                                                     ({{ semana.fechainiciosemana|date:"Y-m-d" }} - {{ semana.fechafinciosemana|date:"Y-m-d" }}) ({{ semana.id }})#}
                                    {#                                                     </span>#}
                                    {#                                                </span>#}
                                    {#                                            </a>#}
                                    {#                                        </li>#}
                                    {#                                    {% endif %}#}
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </nav>
            </div>
            <div class="col-lg-8 col-md-12 col-12">
                <div class="card rounded-3">
                    <div class="card-header border-bottom-0 p-0">
                        {#                        <div>#}
                        {#                            <ul class="nav nav-lb-tab" id="tab" role="tablist">#}
                        {#                                <li class="nav-item">#}
                        {#                                    <a class="nav-link active" data-bs-toggle="pill" href="#contenido" role="tab" aria-controls="table" aria-selected="true"><i class="fa fa-pencil-alt"></i> Contenido</a>#}
                        {#                                </li>#}
                        {#                            </ul>#}
                        {#                        </div>#}


                    </div>
                    <div class="card-body detallesemana">
                        {% include 'pro_planificacion/plansemanalrecursovtresdetalle.html' %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="infoaccionact" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle">Información</h3>
                </div>
                <div class="modal-body panelbody" style="padding-top: 4px">
                    <p style="font-size: 16px" class="panel-body" id="descripcioninfoact"></p>
                    {#            <input id="nomtituloinfo" name="nomtituloinfo" type="hidden">#}
                    {#            <input id="id_codigoopcion" name="id_codigoopcion" type="hidden">#}
                    {#            <div id="id_nomactividaddel"></div>#}
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-bs-dismiss="modal"><i class="fa fa-window-close"></i> Cerrar</button>
                </div>
            </div>
        </div>
    </div>


    <div class="modal fade static" id="itemspanelo" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle">Editar Objetivo de Apendizaje</h3>
                </div>
                <div class="modal-body" style="display: inline-block;">
                    <div class="row-fluid">
                        <form id="formobj" name="formobj" class="form-vertical form-modal" style="width: 580px;">
                            <input type='hidden' name='action' value='editarobjetivoaprendizaje'/>
                            <input type='hidden' name='idso' id="idso"/>
                            <label>Objetivo Aprendizaje</label>
                            <textarea maxlength="1000" rows="5" id="id_objetivo" style="text-align: justify"></textarea>
                        </form>
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="javascript:;" id="adicionarobj" class="btn btn-adicionar btn-success"> Guardar</a>
                    <button type="button" class="btn btn-default" data-bs-dismiss="modal"><i class="fa fa-window-close"></i> Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="itemspanelenf" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle">Editar Enfoque Metodológico</h3>
                </div>
                <div class="modal-body" style="display: inline-block;">
                    <div class="row-fluid">
                        <form id="formenf" name="formenf" class="form-vertical form-modal" style="width: 580px;">
                            <input type='hidden' name='action' value='editenfoquemetodologico'/>
                            <input type='hidden' name='idse' id="idse"/>
                            <label>Objetivo Aprendizaje</label>
                            <textarea maxlength="1000" rows="5" id="id_enfoque" style="text-align: justify"></textarea>
                        </form>
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="javascript:;" id="adicionarenf" class="btn btn-adicionar btn-success"> Guardar</a>
                    <button type="button" class="btn btn-default" data-bs-dismiss="modal"><i class="fa fa-window-close"></i> Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="itemspanelrec" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle">Editar Recursos Didácticos</h3>
                </div>
                <div class="modal-body" style="display: inline-block;">
                    <div class="row-fluid">
                        <form id="formrec" name="formrec" class="form-vertical form-modal" style="width: 580px;">
                            <input type='hidden' name='action' value='editrecursodidactico'/>
                            <input type='hidden' name='idsr' id="idsr"/>
                            <label>Recursos Didácticos</label>
                            <textarea maxlength="1000" rows="5" id="id_recurso" style="text-align: justify"></textarea>
                        </form>
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="javascript:;" id="adicionarrec" class="btn btn-adicionar btn-success"> Guardar</a>
                    <button type="button" class="btn btn-default" data-bs-dismiss="modal"><i class="fa fa-window-close"></i> Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="itemspaneleva" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle">Editar Evaluación</h3>
                </div>
                <div class="modal-body" style="display: inline-block;">
                    <div class="row-fluid">
                        <form id="formeva" name="formeva" class="form-vertical form-modal" style="width: 580px;">
                            <input type='hidden' name='action' value='editevaluacion'/>
                            <input type='hidden' name='idsv' id="idsv"/>
                            <label>Evaluación</label>
                            <textarea maxlength="1000" rows="5" id="id_evaluacion" style="text-align: justify"></textarea>
                        </form>
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="javascript:;" id="adicionareva" class="btn btn-adicionar btn-success"> Guardar</a>
                    <button type="button" class="btn btn-default" data-bs-dismiss="modal"><i class="fa fa-window-close"></i> Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static itemspanelduplicar_silabo" id="itemspanelduplicar_silabo" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle">Sílabos que puede importar</h3>
                </div>
                <div class="modal-body panelbody">

                </div>
                <div class="modal-footer">
                    <table class="pull-right">
                        <tr>
                            <td>
                                <button type="button" class="btn btn-default" data-bs-dismiss="modal"><i class="fa fa-window-close"></i> Cerrar</button>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="itemspaneldetalle_temas_subtemas" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle">Temas y subtemas por reguistrar</h3>
                </div>
                <div class="modal-body panelbody">

                </div>
                <div class="modal-footer">
                    <table class="pull-right">
                        <tr>
                            <td>
                                <button type="button" class="btn btn-default" data-bs-dismiss="modal"><i class="fa fa-window-close"></i> Cerrar</button>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="itemspanelplanificacionsalida" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle">Adicionar gira de clase</h3>
                </div>
                <div class="modal-body" style="display: inline-block;">
                    <div class="row-fluid">
                        <form id="formsalida" name="formsalida" class="form-vertical form-modal" style="width: 580px;">
                            <input type='hidden' name='action' value='addplanificacionsalida'/>
                            <input type='hidden' name='ids' id="ids"/>
                            <label>Descripción </label>
                            <textarea rows="4" id="contenido" style="text-align: justify"></textarea>
                        </form>
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="javascript:;" id="adicionarplanificacionsalida" class="btn btn-adicionar btn-success"> Guardar</a>
                    <button type="button" class="btn btn-default" data-bs-dismiss="modal"><i class="fa fa-window-close"></i> Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="itemspaneleditplanificacionsalida" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle">Editar gira de clase</h3>
                </div>
                <div class="modal-body" style="display: inline-block;">
                    <div class="row-fluid">
                        <form id="formsalida" name="formsalida" class="form-vertical form-modal" style="width: 580px;">
                            <input type='hidden' name='ids' id="ids"/>
                            <label>Descripción </label>
                            <textarea rows="4" id="id_contenido" style="text-align: justify"></textarea>
                        </form>
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="javascript:;" id="editplanificacionsalida" class="btn btn-adicionar btn-success"> Guardar</a>
                    <button type="button" class="btn btn-default" data-bs-dismiss="modal"><i class="fa fa-window-close"></i> Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="itemspaneladicionarsubtemas" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle">Adicionar Sub Temas</h3>
                </div>
                <div class="modal-body" style="display: inline-block;">
                    <div class="row-fluid">
                        <form id="formsalida" name="formsubtemas" class="form-vertical form-modal" style="width: 580px;">
                            <span>Tema: </span>
                            <select id="id_tema" class="selector" name="tema" style="width: 92%">
                            </select><br><br>
                            <input type='hidden' name='ids' id="ids"/>
                            <table class="table table-bordered" border="0" width="100%" style="background-color: transparent">
                                <tr>
                                    <td border="0" style="background-color: transparent">
                                        <label><b>Sub Tema</b></label>
                                    </td>
                                </tr>
                                <tr>
                                    <td border="0" style="background-color: transparent">
                                        <textarea rows="2" id="id_subtema" style="text-align: justify; width: 100%;" maxlength="150"></textarea><br>
                                        <span class="obligatorio" style="color: red"></span>
                                    </td>
                                    <td style="text-align: right; background-color: transparent" width="8%" border="0">
                                        <a href="javascript:;" class="btn btn-success addsubtema"><i class="fa fa-plus"></i></a>
                                    </td>
                                </tr>
                            </table>
                        </form>
                        <div style="margin: 0px;overflow-y:auto;height:150px;">
                            <table class="table table-bordered table-condensed">
                                <thead>
                                <tr>
                                    <th style="text-align: left">Tema</th>
                                    <th style="text-align: left">Subtema</th>
                                    <th style="text-align: left">Acciones</th>
                                </tr>
                                </thead>
                                <tbody id="contenidosubtemas">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="javascript:;" id="adicionarsubtema" class="btn btn-adicionarsubtema btn-success"> Guardar</a>
                    <button type="button" class="btn btn-default" data-bs-dismiss="modal"><i class="fa fa-window-close"></i> Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static itemspanelimportar_recurso_periodo" id="itemspanelimportar_recurso_periodo" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle" id="idtitulo">Importar de otro curso</h3>
                </div>
                <div class="modal-body panelbody">a</div>
                <div class="modal-footer" style="margin-top: -15px">
                    <table class="pull-right">
                        <tr>
                            <td>
                                <button type="button" class="btn btn-default" data-bs-dismiss="modal"><i class="fa fa-window-close"></i> Cerrar</button>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static modalereplicar" id="modalereplicar" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle" id="idtituloreplica">Replicar a otros paralelos</h3>
                </div>
                <div class="modal-body panelbodyreplica">a</div>
                <div class="modal-footer" style="margin-top: -15px">
                    <table class="pull-right">
                        <tr>
                            <td>
                                <button type="button" class="btn btn-success guardasilabos" ><i class="fa fa-window-close"></i> Guardar</button>
                                <button type="button" class="btn btn-default" data-bs-dismiss="modal"><i class="fa fa-window-close"></i> Cerrar</button>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static itemspanelmigrar_compendio" id="itemspanelmigrar_compendio" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle">Compendios a migrar a moodle</h3>
                </div>
                <div class="modal-body panelbody_migrarcompendio"></div>
                <div class="modal-footer" style="margin-top: -15px">
                    <table class="pull-right">
                        <tr>
                            <td>
                                <button type="button" class="btn btn-default" data-bs-dismiss="modal"><i class="fa fa-window-close"></i> Cerrar</button>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static itemspanellink" id="itemspanellink" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle">Editar recursos didácticos (link de youtube, etc)</h3>
                </div>
                <div class="modal-body panelbodylink">

                </div>
                <div class="modal-footer">
                    <a href="javascript:;" id="adicionarlink" class="btn btn-success adicionarlink"> Guardar</a>
                    <button type="button" class="btn btn-default" data-bs-dismiss="modal"><i class="fa fa-window-close"></i> Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="itemsdelactividad" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle" id="nomtitulo"></h3>
                </div>
                <div class="modal-body panelbody">
                    <input id="id_codigoactividad" name="id_codigoactividad" type="hidden">
                    <input id="id_codigoopcion" name="id_codigoopcion" type="hidden">
                    <div id="id_nomactividaddel"></div>
                </div>
                <div class="modal-footer">
                    <table class="pull-right">
                        <tr>
                            <td><a href="javascript:;" class="btn btn-danger eliminaractividad">Eliminar</a></td>
                            <td>
                                <button type="button" class="btn btn-default" data-bs-dismiss="modal"><i class="fa fa-window-close"></i> Cerrar</button>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="itemsdelactividadadmision" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle" id="nomtituloadmision"></h3>
                </div>
                <div class="modal-body panelbody">
                    <input id="id_codigoactividadadmision" name="id_codigoactividadadmision" type="hidden">
                    <input id="id_codigoopcionadmision" name="id_codigoopcionadmision" type="hidden">
                    <div id="id_nomactividadadmision"></div>
                </div>
                <div class="modal-footer">
                    <table class="pull-right">
                        <tr>
                            <td><a href="javascript:;" class="btn btn-danger eliminaractividadadmision">Eliminar</a></td>
                            <td>
                                <button type="button" class="btn btn-default" data-bs-dismiss="modal"><i class="fa fa-window-close"></i> Cerrar</button>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="modalobservacion" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle">Observaciones</h3>
                </div>
                <div class="modal-body panelbody">
                    <label> Técnica</label>
                    <textarea id="observaciontecnica" rows="3" cols="40" name="observación técnica" maxlength="1000" style="width: 100%" disabled></textarea>
                    <label> Académica</label>
                    <textarea id="observacionacademida" rows="3" cols="40" name="observación cadémica" maxlength="1000" style="width: 100%" disabled></textarea>
                    <label> Cumplimiento</label>
                    <input type='text' name='action' id="estadocumplimiento" value='' disabled/>
                </div>
                <div class="modal-footer">
                    <table class="pull-right">
                        <tr>
                            <td>
                                <button type="button" class="btn btn-default" data-bs-dismiss="modal"><i class="fa fa-window-close"></i> Cerrar</button>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="auditoriacriterio" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 id="paneltitle">Detalle de recrusos</h4>
                </div>
                <div class="modal-body" id="selectauditoria-body">
                </div>
                <div class="modal-footer">
                    <div style="float: right">
                        <button type="button" class="btn btn-default" data-bs-dismiss="modal"><i class="fa fa-window-close"></i> Cerrar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="divmostrartarea" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header border-0">
{#                    <h4 class="paneltitle" id="nomtitulodetalle"></h4>#}
                    <div class="headtitle ms-3 mt-2">
                        <h4 class="ps-1 my-0 paneltitle" id="nomtitulodetalle"></h4>
                        <h6 class="subtitle"></h6>
                    </div>
                    <button type="button" class="btn btn-close btn-default rounded-circle p-3 my-0" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <input id="id_codigotarea" name="id_codigotarea" type="hidden">
                <input id="id_codtipo" name="id_codtipo" type="hidden">
                {#            <input id="id_codigoopcion" name="id_codigoopcion" type="hidden">#}
                <div id="id_nomactividad"></div>
                <div class="modal-body">
                    <div class="container">
                        <div class="panelbodytarea"></div>
                    </div>
                </div>
                <div class="modal-footer border-0">
                    <table class="pull-right">
                        <tr>
                            <td><a href="javascript:;" class="btn btn-danger cerrartarea">Cerrar</a></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="divnotificarmasivo" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle">Notificación</h3>
                </div>
                <div class="modal-body panelbodyaprobar">
                    Esta seguro que desea notificar para que los recursos sean revisados?
                </div>
                <div class="modal-footer">
                    <table class="pull-right">
                        <tr>
                            <td><a href="javascript:;" class="btn btn-success savenotificar">Notificar</a></td>
                            <td>
                                <button type="button" class="btn btn-default" data-bs-dismiss="modal"><i class="fa fa-window-close"></i> Cerrar</button>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="infoaccion" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle">Información</h3>
                </div>
                <div class="modal-body panelbody">
                    <p style="font-size: 16px" class="panel-body" id="descripcioninfo"></p>
                    {#            <input id="nomtituloinfo" name="nomtituloinfo" type="hidden">#}
                    {#            <input id="id_codigoopcion" name="id_codigoopcion" type="hidden">#}
                    {#            <div id="id_nomactividaddel"></div>#}
                </div>
                <div class="modal-footer">
                    <table class="pull-right">
                        <tr>
                            {#                    <td><a href="javascript:;" class="btn btn-danger eliminaractividad">Eliminar</a></td>#}
                            <td>
                                <button type="button" class="btn btn-default" data-bs-dismiss="modal"><i class="fa fa-window-close"></i> Cerrar</button>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="divactualizarsmoodle" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle">Actualización</h3>
                </div>
                <div class="modal-body panelbodyaprobar">
                    Esta seguro que desea actualizar el sílabo a moodle?
                </div>
                <div class="modal-footer">
                    <table class="pull-right">
                        <tr>
                            <td><a href="javascript:;" class="btn btn-success saveactualizar">Actualizar</a></td>
                            <td>
                                <button type="button" class="btn btn-default" data-bs-dismiss="modal"><i class="fa fa-window-close"></i> Cerrar</button>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static itemsrecurso_individual" id="itemsrecurso_individual" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="id_nombreactividad"></h3>
                    {#            <h3 class="paneltitle">Actividad individual que puede importar.</h3>#}
                </div>
                <div class="modal-body panelbodyindividual">
                    <div class="alert alert-info" style="text-align: justify">
                        <strong>NOTA:</strong> Se podrá importar las actividades que estén en estado "APROBADO" ó "EN MOODLE", también se le recuerda que se mostrará en estado INGRESADO para que pueda realizar la respectiva actualización. (Recuerde que debe actualizar las fecha de inicio y fin de la actividad).
                    </div>
                    <select name="periodosilabo" id="periodosilabo" style="width: 100%;padding: 4px" class="form-control mb-2">
                    </select>
                    <select name="listadosilabos" id="listadosilabos" style="width: 100%;padding: 4px" class="form-control mb-2">
                    </select>

                    <table class='table table-bordered table-striped'>
                        <thead>
                        <tr>
                            <th width='5%'>SEMANA</th>
                            <th width='45%'>ACTIVIDAD</th>
                            <th width='45%'>---</th>
                        </tr>
                        </thead>
                        <tbody id="itemsbodyactividades">
                        </tbody>
                    </table>
                    <input type="hidden" id="id_tipoactividad" name="id_tipoactividad" value="0">
                    <input type="hidden" id="id_codsemanal" name="id_codsemanal" value="0">
                </div>
                <div class="modal-footer" style="margin-top: -15px">
                    <table class="pull-right">
                        <tr>
                            <td>
                                <button type="button" class="btn btn-default" data-bs-dismiss="modal"><i class="fa fa-window-close"></i> Cerrar</button>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="divmigrarmasivo" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle">Migrar Masivo</h3>
                </div>
                <div class="modal-body panelbodyaprobar">
                    Está seguro que desea migrar masivamente?
                </div>
                <div class="modal-footer">
                    <table class="pull-right">
                        <tr>
                            <td><a href="javascript:;" class="btn btn-success savemigrar">Migrar</a></td>
                            <td>
                                <button type="button" class="btn btn-default" data-bs-dismiss="modal"><i class="fa fa-window-close"></i> Cerrar</button>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="modalErrores" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle">Errores <span></span></h3>
                </div>
                <div class="modal-body">
                </div>
                <div class="modal-footer">
                    <table class="pull-right">
                        <tr>
                            <td><a href="javascript:;" class="btn btn-info action-aceptar">Aceptar</a></td>
                            <td>
                                <button type="button" class="btn btn-default" data-bs-dismiss="modal"><i class="fa fa-window-close"></i> Cerrar</button>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        $(function () {
            {% for unidadeslis in listadounidades %}
                console.log('{{ unidadeslis }}')
                {#alert(".listadotareas_"+ {{ unidadeslis.0 }})#}
                if ($(".listadotareas_" + {{ unidadeslis.0 }}).length == 0) {
                    d = 1
                } else {
                    $(".horasauto{{ unidadeslis.0 }}").each(function () {
                        $(this).html({{ silabocab.materia.asignaturamalla.horasautonomassemanales }});
                    });
                    $(".porceauto{{ unidadeslis.0 }}").each(function () {
                        $(this).html('100%');
                    });
                }
                if ($(".listadoforos_" + {{ unidadeslis.0 }}).length == 0) {
                    d = 1
                } else {
                    $(".horasauto{{ unidadeslis.0 }}").each(function () {
                        $(this).html({{ silabocab.materia.asignaturamalla.horasautonomassemanales }});
                    });
                    $(".porceauto{{ unidadeslis.0 }}").each(function () {
                        $(this).html('100%');
                    });
                }
                if ($(".listadotests_" + {{ unidadeslis.0 }}).length == 0) {
                    d = 1
                } else {
                    $(".horasdoc{{ unidadeslis.0 }}").each(function () {
                        $(this).html({{ silabocab.materia.asignaturamalla.horasacdsemanal }});
                    });
                    $(".porcedoc{{ unidadeslis.0 }}").each(function () {
                        $(this).html('100%');
                    });
                    {#alert('si tiene')#}
                }
                if ($(".listadotareaspra_" + {{ unidadeslis.0 }}).length == 0) {
                    d = 1
                } else {
                    $(".horasexp{{ unidadeslis.0 }}").each(function () {
                        $(this).html({{ silabocab.materia.asignaturamalla.horasapesemanal }});
                    });
                    $(".porceexp{{ unidadeslis.0 }}").each(function () {
                        $(this).html('100%');
                    });
                    {#alert('si tiene')#}
                }
                {% if silabocab.materia.asignaturamalla.horasapesemanal == 0 %}
                    $(".horasexp{{ unidadeslis.0 }}").each(function () {
                        $(this).html('N/A');
                    });
                    $(".porceexp{{ unidadeslis.0 }}").each(function () {
                        $(this).html('N/A');
                    });
                {% endif %}
            {% endfor %}
        })
    </script>

    <div class="modal fade static" id="itemspanelmatricula" style="display: none; backdrop-filter: brightness(0.5);">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4><i class="fa fa-list"></i> <b class="paneltitlematricula">FORMULARIO MODAL</b></h4>
                    <button type="button" class="btn-close btn-cerrar-modal fs-5" data-toggle="modal" data-bs-dismiss="modal" aria-label="Close"> X
                    </button>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal form-modal" autocomplete="off" method="post"
                          enctype="multipart/form-data" action="{{ request.path }}">
                        {% csrf_token %}
                        <div class="row-fluid panelbodymatricula">
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="itemspanelbanner">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4><i class="fa fa-list"></i> <b class="paneltitlebanner">FORMULARIO MODAL</b></h4>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal form-modal" autocomplete="off" method="post"
                          enctype="multipart/form-data" action="{{ request.path }}">
                        {% csrf_token %}
                        <div class="row-fluid panelbodybanner">
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

{% endblock %}
