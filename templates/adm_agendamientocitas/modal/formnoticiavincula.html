{% extends 'ajaxformmodalmultiple.html' %}
{% load sga_extras %}
{% block extra_js %}

<input type="hidden" name="id" value="{{ id|encrypt }}"/>
<input type="hidden" name="idpadre" value="{{ idpadre }}"/>
<input type="hidden" name="action" value="{{ action }}"/>

    <style>
        .dropify-wrapper .dropify-message span.file-icon {
            font-size: 25px;
            color: #CCC;
        }
    </style>
    <script src="https://unpkg.com/pica/dist/pica.min.js"></script>
    <script>
        var descripcion = CKEDITOR.replace('descripcion');
        $(function () {
            $('.cke_editable').on('change', function () {
                var value = $(this).outerHTML()
            });
            var drEvent = $('#id_portada').dropify({
                messages: {
                    default: 'Arrastre y suelte el portada o haga clic aquí.',
                    replace: 'Arrastre y suelte el portada o haga clic aquí.',
                    remove: 'Eliminar',
                    error: 'Ocurrió un error!'
                },
                error: {
                    fileSize: "El tamaño del portada debe ser máximo (5MB).",
                    fileExtension: "Sólo puede subir los portadas con las extensiones .jpeg .jpg .png"
                },
                allowedFileExtensions: ['jpeg', 'jpg', 'png']
            });
        });

        function funcionAntesDeGuardar() {
            $('#id_descripcion').val(descripcion.getData())
        }
    </script>
{% endblock %}