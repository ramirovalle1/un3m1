{% extends "ajaxformbs.html" %}
{% block extraheading %}
    <script type="text/javascript">
        $(function(){
            $("#id_total").attr("disabled", "disabled");

            calcula = function() {
                var b100 = parseFloat($("#id_bill100").val()) * 100;
                if (!b100) { b100 = 0; }

                var b50 = parseFloat($("#id_bill50").val()) * 50;
                if (!b50) { b50 = 0; }

                var b20 = parseFloat($("#id_bill20").val()) * 20;
                if (!b20) { b20 = 0; }

                var b10 = parseFloat($("#id_bill10").val()) * 10;
                if (!b10) { b10 = 0; }

                var b5 = parseFloat($("#id_bill5").val()) * 5;
                if (!b5) { b5 = 0; }

                var b2 = parseFloat($("#id_bill2").val()) * 2;
                if (!b2) { b2 = 0; }

                var b1 = parseFloat($("#id_bill1").val());
                if (!b1) { b1 = 0; }

                var m1 = parseFloat($("#id_mon1").val());
                if (!m1) { m1 = 0; }

                var m50 = parseFloat($("#id_mon50").val() * 0.5);
                if (!m50) { m50 = 0; }

                var m25 = parseFloat($("#id_mon25").val() * 0.25);
                if (!m25) { m25 = 0; }

                var m10 = parseFloat($("#id_mon10").val() * 0.10);
                if (!m10) { m10 = 0; }

                var m5 = parseFloat($("#id_mon5").val() * 0.05);
                if (!m5) { m5 = 0; }

                var m1c = parseFloat($("#id_mon1c").val() * 0.01);
                if (!m1c) { m1c = 0; }

                var bdep = parseFloat($("#id_deposito").val());
                if (!bdep) { bdep = 0; }

                var cheq = parseFloat($("#id_cheques").val());
                if (!cheq) { cheq = 0; }

                var trans = parseFloat($("#id_transfer").val());
                if (!trans) { trans = 0; }

                var tar = parseFloat($("#id_tarjeta").val());
                if (!tar) { tar = 0; }

                var elec = parseFloat($("#id_electronico").val());
                if (!elec) { elec = 0; }

                var rec = parseFloat($("#id_recibocaja").val());
                if (!rec) { rec = 0; }

                $("#id_total").val(parseFloat(b100+b50+b20+b10+b5+b2+b1+m1+bdep+m50+m25+m10+m5+m1c+cheq+trans+tar+elec+rec).toFixed(2));
            };

            $("#id_bill100, #id_bill50, #id_bill20, #id_bill5, #id_bill10, #id_bill1, #id_mon1, #id_mon50, #id_mon25, #id_mon10, #id_mon5, #id_mon1c").blur(function(){
                numerico($(this), 0, 0, 0);
                calcula();
            });

            $("#id_deposito, #id_cheques, #id_transfer, #id_tarjeta, #id_electronico, #id_recibocaja").blur(function(){
                numerico($(this), 0, 0, 2);
                calcula();
            });
            calcula();

            $("#itemspanelmensajecerrar").modal({backdrop:'static'}).modal('show');

            $("#itemspanelmensajecerrar .btn-cerrar").click(function() {
                $("#itemspanelmensajecerrar").modal("hide");
            });

        });
    </script>
{% endblock %}
{% block atras %}/rec_caja{% endblock %}
{% block titulo %}{{ title }}{% endblock %}
{% block formwidth %}form-m{% endblock %}
{% block formaction %}/rec_caja{% endblock %}
{% block formdestination %}/rec_caja{% endblock %}
{% block formextra %}
    <input type='hidden' name='action' value='cerrarsesion'/>
    <input type='hidden' name='id' value='{{ sesioncaja.id }}'/>
    <div class="modal fade static" id="itemspanelmensajecerrar" style="display: none;">
        <div class="modal-header">
            <h4 class="paneltitle">Advertencia</h4>
        </div>
        <div class="modal-body panelbodymensajecerrar" style="text-align: justify; color: red">
            <strong>Estimado {{ persona }} usted está a punto de cerrar la sesión de caja del {{ sesioncaja.fecha|date:"d-m-Y" }}</strong>
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar esta Ventana</a></td>
                </tr>
            </table>
        </div>
    </div>
{% endblock %}
{% block formback %}/rec_caja{% endblock %}
{% block buttonname %}Guardar{% endblock %}