{% extends "base.html" %}
{% load sga_extras %}
{% block heading %}
    <script type="text/javascript">
        $(document).ready(function () {
            $('#example').DataTable();
        });

        function solicitudaajax_mio(pk, nombre, accion, url, titulo) {
            Swal.fire({
                title: `${titulo}\n ${nombre}`,
                text: "Esta acción es irreversible",
                type: 'info',
                showCancelButton: true,
                allowOutsideClick: false,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Si, deseo hacerlo',
                cancelButtonText: 'Cancelar'
            }).then((result) => {
                if (result.value) {
                    {#bloqueointerface();#}
                    $.ajax({
                        type: "POST",
                        url: url,
                        data: {action: accion, id: pk,},
                        success: function (data) {
                            if (data.result == 'ok') {
                                location.reload();
                            } else {
                                Swal.fire({
                                    title: `Advertencia`,
                                    text: data.mensaje,
                                    type: 'warning',
                                    showCancelButton: false,
                                    allowOutsideClick: false,
                                    confirmButtonColor: '#3085d6',
                                    cancelButtonColor: '#d33',
                                    confirmButtonText: 'Aceptar',
                                    cancelButtonText: 'Cancelar'
                                })
                            }
                        },
                        error: function () {
                            setTimeout($.unblockUI, 1);
                            mensajeWarning("Error de conexión.");
                        },
                        dataType: "json"
                    });
                }
            })
        }

        async function esperar(){
            await delay(5000);
        }

        function reporteinforme(tpreporte, modal) {
            $('#id_tiporeporte_desdehasta').val(tpreporte)
            $('#id_tiporeporte_activotecnologico').val(tpreporte)
            $('#id_tiporeporte_devolucion').val(tpreporte)
            $('#id_tiporeporte_personaentrega').val(tpreporte)
            $('#id_tiporeporte_personarecibe').val(tpreporte)
            $('#id_tiporeporte_estadoprestamo').val(tpreporte)
            $("#" + modal).modal({backdrop: 'static', width: '600px'}).modal('show');
        }

        $(function () {
            $('select').select2({minimumResultsForSearch: 20, width: '100%'});
            ItemsDisplay = function (item) {
                if (item.name) {
                    {#$('#personaentrega').val(item.idresponsable)#}
                    return $('<span>' + item.name + '</span>');
                } else {
                    return 'Seleccione un activo tecnológico';
                }
            };

            $("#activotecnologico").select2({
                placeholder: "-------------------------------------------",
                allowClear: true,
                width: '100%',
                ajax: {
                    url: function (params) {
                        return "/operaciones_prestamoactivos?action=buscaractivotecnologico&q=" + params.term;
                    },
                    dataType: 'json',
                    delay: 400,
                    data: function (params) {
                        return {
                            q: params.term,
                            page: params.page
                        };
                    },
                    processResults: function (data, params) {
                        // parse the results into the format expected by Select2
                        // since we are using custom formatting functions we do not need to
                        // alter the remote JSON data, except to indicate that infinite
                        // scrolling can be used
                        params.page = params.page || 1;

                        return {
                            results: data.results,
                            pagination: {
                                more: (params.page * 30) < data.total_count
                            }
                        };
                    },
                    cache: true
                },
                escapeMarkup: function (markup) {
                    return markup;
                }, // let our custom formatter work
                minimumInputLength: 1,
                templateResult: ItemsDisplay, // omitted for brevity, see the source of this page
                templateSelection: ItemsDisplay // omitted for brevity, see the source of this page
            }).on("select2:select", function (evt) {
                $("#activotecnologico").attr({"value": (evt.params.data.id)});
            });

            $("#personaentrega").select2({
                placeholder: "-------------------------------------------",
                allowClear: true,
                width: '100%',
                ajax: {
                    url: function (params) {
                        return "/operaciones_prestamoactivos?action=buscarpersona&q=" + params.term;
                    },
                    dataType: 'json',
                    delay: 400,
                    data: function (params) {
                        return {
                            q: params.term,
                            page: params.page
                        };
                    },
                    processResults: function (data, params) {
                        // parse the results into the format expected by Select2
                        // since we are using custom formatting functions we do not need to
                        // alter the remote JSON data, except to indicate that infinite
                        // scrolling can be used
                        params.page = params.page || 1;

                        return {
                            results: data.results,
                            pagination: {
                                more: (params.page * 30) < data.total_count
                            }
                        };
                    },
                    cache: true
                },
                escapeMarkup: function (markup) {
                    return markup;
                }, // let our custom formatter work
                minimumInputLength: 1,
                templateResult: ItemsDisplay, // omitted for brevity, see the source of this page
                templateSelection: ItemsDisplay // omitted for brevity, see the source of this page
            }).on("select2:select", function (evt) {
                $("#personaentrega").attr({"value": (evt.params.data.id)});
            });

            $("#personarecibe").select2({
                placeholder: "-------------------------------------------",
                allowClear: true,
                width: '100%',
                ajax: {
                    url: function (params) {
                        return "/operaciones_prestamoactivos?action=buscarpersona&q=" + params.term;
                    },
                    dataType: 'json',
                    delay: 400,
                    data: function (params) {
                        return {
                            q: params.term,
                            page: params.page
                        };
                    },
                    processResults: function (data, params) {
                        // parse the results into the format expected by Select2
                        // since we are using custom formatting functions we do not need to
                        // alter the remote JSON data, except to indicate that infinite
                        // scrolling can be used
                        params.page = params.page || 1;

                        return {
                            results: data.results,
                            pagination: {
                                more: (params.page * 30) < data.total_count
                            }
                        };
                    },
                    cache: true
                },
                escapeMarkup: function (markup) {
                    return markup;
                }, // let our custom formatter work
                minimumInputLength: 1,
                templateResult: ItemsDisplay, // omitted for brevity, see the source of this page
                templateSelection: ItemsDisplay // omitted for brevity, see the source of this page
            }).on("select2:select", function (evt) {
                $("#personarecibe").attr({"value": (evt.params.data.id)});
            });

            var busqueda = function () {
                var term = $("#searchinput").val().trim().toUpperCase();
                if (term.length > 0) {
                    bloqueointerface();
                    location.href = "/operaciones_prestamoactivos?s=" + term;
                }
                return false;
            };

            $("#search").click(function () {
                busqueda();
            });

            $('#searchinput').keyup(function (e) {
                if (e.keyCode == 13) {
                    busqueda();
                }
            });

        });
    </script>

    <script>
        $(function () {
            $(".gestionprestamo").click(function () {
                var id = $(this).attr('idprestamo');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/operaciones_prestamoactivos",
                    data: {'action': 'auditoriaprestamo', 'id': id},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result === true) {
                            $(".panelbody").html(data.data);
                            $("#itemspanel").modal({backdrop: 'static', width: '1000px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });
        })

        function busquedaprestamo() {
            var term = $("#FilterTextBox").val().trim().toUpperCase();
            var id_estadoprestamo = $("#id_estadoprestamo").val();
            var id_personaprestamo = $("#id_personaprestamo").val();
            if (term.length > 0) {
                bloqueointerface();
                location.href = "/operaciones_prestamoactivos?s=" + term + "&id_estadoprestamo=" + id_estadoprestamo + "&id_personaprestamo=" + id_personaprestamo;
            } else {
                if (id_personaprestamo == 0) {
                    bloqueointerface();
                    location.href = "/operaciones_prestamoactivos?id_estadoprestamo=" + id_estadoprestamo + "&id_personaprestamo=" + id_personaprestamo;
                }else{
                    Swal.fire({
                    title: `Por favor, ingrese una descripción`,
                    type: 'info',
                    showCancelButton: false,
                    allowOutsideClick: false,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'Aceptar',
                    cancelButtonText: 'Cancelar'
                })
                }
            }
            return false;
        }
    </script>
{% endblock %}
{% block atras %}/gestion_operaciones{% endblock %}
{% block canvas %}
    <div class='row'>
        <div class='col-lg-12'>
            <div class="headtitle">
                <h3 class="texto-blue">{{ title }}</h3>
                <h6>Administración</h6>
            </div>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row">
            <div class="col-12">
                <div class="input-group justify-content-start">
                    <div class="input-group-append">
                        <a href="{{ request.path }}?action=addprestamo" class="btn btn-success"><i
                        class="fa fa-plus"></i> Nuevo préstamo</a>
                    </div>
                    <div class="input-group-append">
                        <div class="dropdown">
                            <button class="btn dropdown-toggle" data-bs-toggle="dropdown" href="javascript:;">
                                <i class="fa fa-file-pdf"></i> Reportes <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu" style="text-align: left">
                                <li class="dropdown-item">
                                    <a href='javascript:void(0)' onclick="reporteinforme('6','rep_estado_prestamo')">
                                        <i class="fa fa-file-pdf-o"></i> Reporte por estado del préstamo</a></li>
                                <li class="dropdown-item">
                                    <a href='javascript:void(0)' onclick="reporteinforme('1','rep_activotecnologico')">
                                        <i class="fa fa-file-pdf-o"></i> Reporte por activo tecnológico</a></li>
                                <li class="dropdown-item"><a href='javascript:void(0)'
                                                             onclick="reporteinforme('2','rep_fecha_desde_hasta')">
                                    <i class="fa fa-file-pdf-o"></i> Reporte por fecha (desde-hasta)</a></li>
                                <li class="dropdown-item"><a href='javascript:void(0)'
                                                             onclick="reporteinforme('3','rep_fecha_devolucion')">
                                    <i class="fa fa-file-pdf-o"></i> Reporte por fecha devolución</a></li>
                                <li class="dropdown-item"><a href='javascript:void(0)'
                                                             onclick="reporteinforme('4','rep_personaentrega')">
                                    <i class="fa fa-file-pdf-o"></i> Reporte por persona entrega</a></li>
                                <li class="dropdown-item"><a href='javascript:void(0)'
                                                             onclick="reporteinforme('5','rep_personarecibe')">
                                    <i class="fa fa-file-pdf-o"></i> Reporte por persona recibe</a></li>


                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class='row' style="margin-left: 0px;margin-bottom: 5px">
            <div class="col-12 pb-2">
                <table class="" style="background:rgba(0, 0, 0, 0);border-color: transparent">
                    <tr>
    {#                    <form class="form-search" onsubmit="busquedaprestamo()">#}
                            <td style="width: 15%">
                                <select name="id_estadoprestamo" id="id_estadoprestamo">
                                    <option value="0" {% if id_estadoprestamo == 0 %}selected{% endif %}>Todos</option>
                                    <option value="1" {% if id_estadoprestamo == 1 %}selected{% endif %}>Préstamo</option>
                                    <option value="2" {% if id_estadoprestamo == 2 %}selected{% endif %}>Devuelve usuario
                                    </option>
                                    {#                                <option value="3" {% if id_estadoprestamo == 3 %}selected{% endif %}>Tiempo excedido</option>#}
                                    <option value="4" {% if id_estadoprestamo == 4 %}selected{% endif %}>Solicita
                                        devolución
                                    </option>
                                    <option value="5" {% if id_estadoprestamo == 5 %}selected{% endif %}>Devuelto</option>
                                </select>
                            </td>
                            <td style="width: 15%">
                                <select name="id_personaprestamo" id="id_personaprestamo">
                                    <option value="0" {% if id_personaprestamo == 0 %}selected{% endif %}>Todos</option>
                                    <option value="1" {% if id_personaprestamo == 1 %}selected{% endif %}>Persona entrega</option>
                                    <option value="2" {% if id_personaprestamo == 2 %}selected{% endif %}>Persona recibe
                                    <option value="3" {% if id_personaprestamo == 3 %}selected{% endif %}>Activo tecnológico
                                    </option>
                                </select>
                            </td>
                            <td style="width: 15%">
                                <input type="text" style="text-transform: uppercase; margin-bottom: 0px;" class=""
                                       id="FilterTextBox" name="s" value='{{ s }}'>
                            </td>
    {#                    </form>#}
                        <td style="width: 16%; vertical-align: middle">
                            <a class="btn btn-primary  tu" title="Buscar" id="busqueda" href='javascript:;'
                               onclick="busquedaprestamo()"> <i class='fa fa-search'></i> </a>
                            <a title="Ver todo" href="/operaciones_prestamoactivos" class="btn btn-default"><i class="fas fa-sync-alt"></i></a>

                        </td>
                    </tr>
                </table>
            </div>
            <div class="col-12 ">
                <label class="label label-info"><i class="fa fa-info-circle"></i> Total de
                    préstamos {{ prestamoactivosoperaciones.count }}
                </label>
            </div>
        </div>
        <div class='card'>
            <div class='card-body border-top border-6 rounded-3 border-dark-info'>
                <table class='table table-bordered table-striped tabla_responsive'>
                    <thead class="table-light">
                    <tr>
                        <th style="text-align: center; vertical-align: middle; width: 5%;">#</th>
                        <th style="text-align: center; vertical-align: middle; width: 20%;">Activo tecnológico</th>
                        <th style="text-align: center; vertical-align: middle; width: 20%;">Persona entrega</th>
                        <th style="text-align: center; vertical-align: middle; width: 20%;">Persona recibe</th>
                        <th style="text-align: center; vertical-align: middle; width: 8%;">Fecha desde</th>
                        <th style="text-align: center; vertical-align: middle; width: 8%;">Fecha hasta</th>
                        <th style="text-align: center; vertical-align: middle; width: 8%;">Fecha devolución</th>
                        <th style="text-align: center; vertical-align: middle; width: 8%;">Observación</th>
                        <th style="text-align: center; vertical-align: middle; width: 8%;">Estado</th>
                        <th style="text-align: center; vertical-align: middle; width: 10%;">Acciones</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for prestamos in prestamoactivosoperaciones %}
                        <tr>
                            <td style="text-align: center; vertical-align: middle">{{ forloop.counter }}</td>
                            <td style="text-align: left; vertical-align: middle">
                                {{ prestamos.activotecnologico.activotecnologico }}
                            </td>
                            <td style="text-align: center; vertical-align: middle">
                                {{ prestamos.personaentrega }}
                            </td>
                            <td style="text-align: center; vertical-align: middle">
                                {{ prestamos.personarecibe }}
                            </td>
                            <td style="text-align: center; vertical-align: middle">
                                {{ prestamos.desde|date:"d-m-Y" }}
                            </td>
                            <td style="text-align: center; vertical-align: middle">
                                {{ prestamos.hasta|date:"d-m-Y" }}
                            </td>
                            <td style="text-align: center; vertical-align: middle">
                                {{ prestamos.fechadevolucion|date:"d-m-Y"|default_if_none:"" }}
                            </td>
                            <td style="text-align: center; vertical-align: middle">
                                {{ prestamos.observacion }}
                            </td>
                            <td style="text-align: center; vertical-align: middle">
                                {% if prestamos.estado == 1 and fechaactual > prestamos.hasta %}
                                    <label class="label label-danger">TIEMPO LÍMITE</label>
                                {% else %}
                                    <label class="label label-{% if prestamos.estado == 1 %}warning





                                        {% else %}{% if prestamos.estado == 2 %}success{% endif %}{% endif %}">{{ prestamos.get_estado_display }}</label>
                                {% endif %}
                            </td>
                            <td style="text-align: center; vertical-align: middle">

                                <div class="dropdown" style="text-align: left">
                                    <button class="btn btn-default  dropdown-toggle" data-bs-toggle="dropdown" href="javascript:;">Acciones
                                        <span class="caret"></span></button>
                                    <ul class="dropdown-menu" x-placement="right-start">
                                        {% if prestamos.estado == 1 %}
                                            <li class="dropdown-item"><a
                                                    href="{{ request.path }}?action=editarprestamo&id={{ prestamos.id }}"
                                                    class="bloqueo_pantalla"><i class="fa fa-edit"></i> Editar</a></li>
                                            <li class="dropdown-item"><a style="cursor: pointer"
                                                                         onclick="solicitudaajax_mio('{{ prestamos.id }}','{{ prestamos.activotecnologico.activotecnologico }}','devolverprestamoactivo','/operaciones_prestamoactivos', 'Está por realizar la devolución del activo')"><i
                                                    class="fa fa-undo"></i> Devolver</a></li>
                                        {% endif %}
                                        {% if prestamos.estado == 1 and fechaactual > prestamos.hasta %}
                                            <li class="dropdown-item"><a style="cursor: pointer"
                                                                         onclick="solicitudaajax_mio('{{ prestamos.id }}','{{ prestamos.activotecnologico.activotecnologico }}','notificartraspaso','/operaciones_prestamoactivos', 'Está por notificar traspaso del activo')"><i
                                                    class="fa fa-bell"></i> Notificar
                                                traspaso</a></li>
                                        {% endif %}
                                        {% if prestamos.estado == 4 %}
                                            <li class="dropdown-item"><a style="cursor: pointer"
                                                                         onclick="solicitudaajax_mio('{{ prestamos.id }}','{{ prestamos.activotecnologico.activotecnologico }}','confirmardevolucionactivo','/operaciones_prestamoactivos', 'Está por confirma la devolución del activo')"><i
                                                    class="fa fa-check"></i> Confirma devolución</a></li>
                                            <li class="dropdown-item"><a style="cursor: pointer"
                                                                         onclick="solicitudaajax_mio('{{ prestamos.id }}','{{ prestamos.activotecnologico.activotecnologico }}','rechazadevolucionactivo','/operaciones_prestamoactivos', 'Está por rechazar la devolución del activo')"><i
                                                    class="fa fa-close"></i> Rechazar devolución</a></li>
                                        {% endif %}
                                        <li class="dropdown-item"><a style="cursor: pointer" class="gestionprestamo"
                                                                     idprestamo="{{ prestamos.id }}"><i
                                                class="fa fa-book"></i> Detalle prestamo</a></li>
                                        <li class="dropdown-item"><a style="cursor: pointer"
                                                                     onclick="solicitudaajax_mio('{{ prestamos.id }}','{{ prestamos.activotecnologico.activotecnologico }}','deleteprestamo','/operaciones_prestamoactivos', 'Está por eliminar el préstamo del activo')"><i
                                                class="fa fa-trash"></i> Eliminar</a></li>
                                    </ul>
                                </div>

                            </td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="9" style="text-align: center"><b>NO EXISTE REGISTROS DE PRÉSTAMOS</b></td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
                {% include 'paginacionb4.html' %}
            </div>
        </div>
      </div>
    <div class="modal" role="dialog" id="itemspanel" style="margin-left:-150px">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content" style="width:1000px">
                <div class="modal-header">
                    <h4><i class="fa fa-list"></i> <b class="paneltitle">Auditoría préstamo</b></h4>
                </div>
                <div class="modal-body" style="margin-left:10px">
                    <div class="row-fluid panelbody" style="">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal" role="dialog" id="rep_fecha_desde_hasta">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4><i class="fa fa-list"></i> <b class="paneltitle"> Generación de Informes</b></h4>
                </div>
                <form class="form-horizontal form-modal" target="_blank" method="GET"
                      enctype="multipart/form-data" action="{{ request.path }}">
                    <div class="modal-body">

                        {% csrf_token %}
                        <input type="hidden" name="action" value="generarreporte">
                        <input type="hidden" name="tiporeporte" value="" id="id_tiporeporte_desdehasta">
                        <div class="modal-body">
                            <div class="row-fluid">
                                <div class="span6">
                                    <label for=""><b>Fecha Ingreso Desde:</b> <span class="text-error">*</span></label>
                                    <input type="date" required name="fechadesde" id="id_fechadesde" width="100%"
                                           class="form-control"
                                           style="width: 100%">
                                </div>
                                <div class="span6">
                                    <label for=""><b>Fecha Ingreso Hasta:</b> <span class="text-error">*</span></label>
                                    <input type="date" required name="fechahasta" id="id_fechahasta" width="100%"
                                           class="form-control"
                                           style="width: 100%">
                                </div>
                            </div>
                            <div class="row-fluid">
                                <div class="span6" style="width:100%">
                                    <label for=""><b>Estado:</b> <span class="text-error">*</span></label>
                                    <select name="estadoprestamo" id="estadoprestamo" class="select2-accessible"
                                            aria-hidden="true" width="100%">
                                        <option value="0" selected="selected">Todos</option>
                                        <option value="1">Préstamo</option>
                                        <option value="2">Devuelto</option>
                                        <option value="3">Tiempo excedido</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="modal-footer">
                        <button type="submit" class='btn btn-success'>
                            <span class="fa fa-download"></span> Generar
                        </button>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="modal" role="dialog" id="rep_fecha_devolucion">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4><i class="fa fa-list"></i> <b class="paneltitle"> Generación de Informes</b></h4>
                </div>
                <form class="form-horizontal form-modal" target="_blank" method="GET"
                      enctype="multipart/form-data" action="{{ request.path }}">
                    <div class="modal-body">

                        {% csrf_token %}
                        <input type="hidden" name="action" value="generarreporte">
                        <input type="hidden" name="tiporeporte" value="" id="id_tiporeporte_devolucion">
                        <div class="modal-body">
                            <div class="row-fluid">
                                <div class="span6">
                                    <label for=""><b>Fecha devolución:</b> <span class="text-error">*</span></label>
                                    <input type="date" required name="fechadevolucion" id="id_fechadevolucion"
                                           width="100%"
                                           class="form-control"
                                           style="width: 100%">
                                </div>
                            </div>
                            <div class="row-fluid">
                                <div class="span6" style="width:100%">
                                    <label for=""><b>Estado:</b> <span class="text-error">*</span></label>
                                    <select name="estadoprestamo" id="estadoprestamo" class="select2-accessible"
                                            aria-hidden="true" width="100%">
                                        <option value="0" selected="selected">Todos</option>
                                        <option value="1">Préstamo</option>
                                        <option value="2">Devuelto</option>
                                        <option value="3">Tiempo excedido</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="modal-footer">
                        <button type="submit" class='btn btn-success'>
                            <span class="fa fa-download"></span> Generar
                        </button>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="modal" role="dialog" id="rep_activotecnologico">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4><i class="fa fa-list"></i> <b class="paneltitle"> Generación de Informes</b></h4>
                </div>
                <form class="form-horizontal form-modal" target="_blank" method="GET"
                      enctype="multipart/form-data" action="{{ request.path }}">
                    <div class="modal-body">

                        {% csrf_token %}
                        <input type="hidden" name="action" value="generarreporte">
                        <input type="hidden" name="tiporeporte" value="" id="id_tiporeporte_activotecnologico">
                        <div class="modal-body">
                            <div class="row-fluid">
                                <div class="span6" style="width:100%">
                                    <label for=""><b>Activo tecnológico:</b> <span class="text-error">*</span></label>
                                    <select required name="activotecnologico" id="activotecnologico"
                                            class="select2-accessible"
                                            aria-hidden="true" width="100%">
                                    </select>
                                </div>
                            </div>
                            <div class="row-fluid">
                                <div class="span6" style="width:100%">
                                    <label for=""><b>Estado:</b> <span class="text-error">*</span></label>
                                    <select name="estadoprestamo" id="estadoprestamo" class="select2-accessible"
                                            aria-hidden="true" width="100%">
                                        <option value="0" selected="selected">Todos</option>
                                        <option value="1">Préstamo</option>
                                        <option value="2">Devuelto</option>
                                        <option value="3">Tiempo excedido</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="modal-footer">
                        <button type="submit" class='btn btn-success'>
                            <span class="fa fa-download"></span> Generar
                        </button>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="modal" role="dialog" id="rep_personaentrega">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4><i class="fa fa-list"></i> <b class="paneltitle"> Generación de Informes</b></h4>
                </div>
                <form class="form-horizontal form-modal" target="_blank" method="GET"
                      enctype="multipart/form-data" action="{{ request.path }}">
                    <div class="modal-body">

                        {% csrf_token %}
                        <input type="hidden" name="action" value="generarreporte">
                        <input type="hidden" name="tiporeporte" value="" id="id_tiporeporte_personaentrega">
                        <div class="modal-body">
                            <div class="row-fluid">
                                <div class="span6" style="width:100%">
                                    <label for=""><b>Persona entrega:</b> <span class="text-error">*</span></label>
                                    <select name="personaentrega" id="personaentrega" class="form-control" width="100%">
                                    </select>
                                </div>
                            </div>
                            <div class="row-fluid">
                                <div class="span6" style="width:100%">
                                    <label for=""><b>Estado:</b> <span class="text-error">*</span></label>
                                    <select name="estadoprestamo" id="estadoprestamo" class="select2-accessible"
                                            aria-hidden="true" width="100%">
                                        <option value="0" selected="selected">Todos</option>
                                        <option value="1">Préstamo</option>
                                        <option value="2">Devuelto</option>
                                        <option value="3">Tiempo excedido</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="modal-footer">
                        <button type="submit" class='btn btn-success'>
                            <span class="fa fa-download"></span> Generar
                        </button>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="modal" role="dialog" id="rep_personarecibe">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4><i class="fa fa-list"></i> <b class="paneltitle"> Generación de Informes</b></h4>
                </div>
                <form class="form-horizontal form-modal" target="_blank" method="GET"
                      enctype="multipart/form-data" action="{{ request.path }}">
                    <div class="modal-body">

                        {% csrf_token %}
                        <input type="hidden" name="action" value="generarreporte">
                        <input type="hidden" name="tiporeporte" value="" id="id_tiporeporte_personarecibe">
                        <div class="modal-body">
                            <div class="row-fluid">
                                <div class="span6" style="width:100%">
                                    <label for=""><b>Persona recibe:</b> <span class="text-error">*</span></label>
                                    <select name="personarecibe" id="personarecibe" class="form-control" width="100%">
                                    </select>
                                </div>
                            </div>
                            <div class="row-fluid">
                                <div class="span6" style="width:100%">
                                    <label for=""><b>Estado:</b> <span class="text-error">*</span></label>
                                    <select name="estadoprestamo" id="estadoprestamo" class="select2-accessible"
                                            aria-hidden="true" width="100%">
                                        <option value="0" selected="selected">Todos</option>
                                        <option value="1">Préstamo</option>
                                        <option value="2">Devuelto</option>
                                        <option value="3">Tiempo excedido</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="modal-footer">
                        <button type="submit" class='btn btn-success'>
                            <span class="fa fa-download"></span> Generar
                        </button>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="modal" role="dialog" id="rep_estado_prestamo">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4><i class="fa fa-list"></i> <b class="paneltitle"> Generación de Informes</b></h4>
                </div>
                <form class="form-horizontal form-modal" target="_blank" method="GET"
                      enctype="multipart/form-data" action="{{ request.path }}">
                    <div class="modal-body">

                        {% csrf_token %}
                        <input type="hidden" name="action" value="generarreporte">
                        <input type="hidden" name="tiporeporte" value="" id="id_tiporeporte_estadoprestamo">
                        <div class="modal-body">
                            <div class="row-fluid">
                                <div class="span6" style="width:100%">
                                    <label for=""><b>Estado:</b> <span class="text-error">*</span></label>
                                    <select name="estadoprestamo" id="estadoprestamo" class="select2-accessible"
                                            aria-hidden="true" width="100%">
                                        <option value="0" selected="selected">Todos</option>
                                        <option value="1">Préstamo</option>
                                        <option value="2">Devuelto</option>
                                        <option value="3">Tiempo excedido</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="modal-footer">
                        <button type="submit" class='btn btn-success'>
                            <span class="fa fa-download"></span> Generar
                        </button>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endblock %}
