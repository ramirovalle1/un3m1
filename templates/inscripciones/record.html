{% extends "basebs.html" %}
{% load sga_extras %}
{% block heading %}
    <script type="text/javascript">
        $(function() {
            $(".filterable tr:has(td)").each(function(){
                var t = $(this).text().toLowerCase();
                $("<td class='indexColumn'></td>").hide().text(t).appendTo(this);
            });
            $("#FilterTextBox").keyup(function(){
                var s = $(this).val().toLowerCase().split(" ");
                $(".filterable tr:hidden").show();
                $.each(s, function(){
                    $(".filterable tr:visible .indexColumn:not(:contains('" + this + "'))").parent().hide();
                });
                $(".filterable3 tr:hidden").show();
            });

            $(".seleccionartodos").click(function () {
                if ($(this).is(":checked")){
                    $(".dato").prop('checked', true);
                }else{
                    $(".dato").prop('checked', false);
                }
                actualizar();
            });

            actualizar = function(){
                lista_items1=[];
                $(".dato").each(function(){
                    if($(this).is(":checked")){
                        var id = $(this).attr('idr');
                        var item = {
                            id: id,
                        };
                        lista_items1.push(item);
                    }
                });
            };
            $(".dato").click(function () {
                actualizar();
            });

            $(".eliminarmasivo").click(function () {
                smoke.confirm("¿Está seguro que desea eliminar.?", function(e){
                    if (e){
                        $.blockUI({message: null});
                        bloqueointerface();
                        {#actualizar();#}
                        $.ajax({
                            type: "POST",
                            url: "/inscripciones",
                            data: {"action": "eliminarmasivo", "lista": JSON.stringify(lista_items1)},
                            success: function(data) {
                                $.unblockUI();
                                if (data.result=='ok') {
                                    location.reload();
                                }
                            },
                            error: function() {
                                $.unblockUI();
                                smoke.alert("Error de conexión.", function(e){
                                    $("#itemspanel2").modal({backdrop:'static', width: '400'}).modal('show');
                                }, {
                                    ok: "ok",
                                    classname: "custom-class"
                                });
                            },
                            dataType: "json"
                        });

                    }
                }, {
                    ok: "SI,SEGURO",
                    cancel: "NO,CANCELAR",
                    classname: "custom-class",
                    reverseButtons: true
                });
            });
            actualizar();

            $(".recordhistorico").click(function () {
                var idinscripcion = {{ inscripcion.id }}
                    openwindow('POST' ,'/inscripciones', {action: 'recordhistorico','id':idinscripcion},'_blank');
            });

            $('.btn-accion').click(function () {
                bloqueointerface();
                let data_json = $(this).data('json');
                $.post(data_json.url,data_json).done(function (data) {
                    if(data.result=='ok'){
                        $.unblockUI()
                        Swal.fire({
                            title: `NOTIFICACIÓN`,
                            text: data.mensaje,
                            type: 'success',
                            icon: 'success',
                            showCancelButton: false,
                            allowOutsideClick: false,
                            confirmButtonColor: '#3085d6',
                            cancelButtonColor: '#d33',
                            confirmButtonText: 'Aceptar',
                            cancelButtonText: 'Cancelar'
                        }).then((result) => {
                            if (result.value) {
                                bloqueointerface();
                                location.reload();
                            }
                        }).catch(error => {
                            Swal.fire({
                                toast: true,
                                position: 'top-end',
                                type: 'error',
                                title: 'Ocurrio un error inesperado',
                                showConfirmButton: false,
                                timer: 6000
                            });
                        });
                    }else{
                        NotificationJG.error(data.mensaje)
                        $.unblockUI()
                    }
                }).fail(function (error) {
                    NotificationJG.error(error)
                    $.unblockUI()
                })
            });

        });
    </script>
{% endblock %}
{% block atras %}/inscripciones?id={{ inscripcion.id }}{% endblock %}
{% block canvas %}
    <div class='row-fluid'>
        <div class='span7'>
            <h4>{{ title }}</h4>
            <h5>Estudiante: {{ inscripcion.persona }}</h5>
            <h5>Cédula: {{ inscripcion.persona.cedula }}</h5>
            <h5>Carrera: {{ inscripcion.carrera }}</h5>
            <h5>Malla: {{ inscripcion.malla_inscripcion.malla }}</h5>
            {% if inscripcion.itinerario  %}
                <h4><label class="label label-warning">ITINERARIO  {{ inscripcion.itinerario }}</label></h4>
            {% else  %}
                <h4><label class="label label-info">SIN ITINERARIO EN LA INSCRIPCIÓN</label></h4>
            {% endif  %}
            {% if inscripcion.exonerado_practias %}
                <label class="label label-green"><i class="fa fa-star"></i> Exonerado Prácticas y Vinculación Nro. UNEMI VICE.ACAD. -2013-563-OF</label>
            {% endif %}
        </div>
        <div class='span5'>
            <table class='table table-bordered table-striped'>
                <thead>
                <tr>
                    <th style="text-align: center;width: 20%;">Total<br/>Horas</th>
                    <th style="text-align: center;width: 20%;">Total<br/>Cr&eacute;ditos</th>
                    <th style="text-align: center;width: 20%;">Cr&eacute;ditos<br/>Malla</th>
                    <th style="text-align: center;width: 20%;">Cr&eacute;ditos<br/>M&oacute;dulos</th>
                    <th style="text-align: center;width: 20%;">Cr&eacute;ditos<br/>Otros</th>
                    <th style="text-align: center;width: 20%;">Promedio<br/>General</th>
                    <th style="text-align: center;width: 20%;">Valor<br/>Calif.</th>
                    <th style="text-align: center;width: 20%;">Cantidad<br/>Aprobadas</th>
                    <th style="text-align: center;width: 20%;">Cantidad<br/>Reprobadas</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td style="text-align: center;">{{ total_horas|floatformat:0 }}</td>
                    <td style="text-align: center;">{{ total_creditos|floatformat:4 }}</td>
                    <td style="text-align: center;">{{ total_creditos_malla|floatformat:2 }}</td>
                    <td style="text-align: center;">{{ total_creditos_modulos|floatformat:2 }}</td>
                    <td style="text-align: center;">{{ total_creditos_otros|floatformat:2 }}</td>
                    <td style="text-align: center;">{{ inscripcion.promedio_record|floatformat:2 }}</td>
                    <td style="text-align: center;">{% if inscripcion.valoracioncalificacion %}<span class="tu" title="{{ inscripcion.valoracioncalificacion.categoria }}">{{ inscripcion.valoracioncalificacion.nominacion }}</span>{% endif %}</td>
                    <td style="text-align: center;">{{ aprobadas }}</td>
                    <td style="text-align: center;">{{ reprobadas }}</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    {#    {% if inscripcion.documentos_entregados.pre %}#}
    {#        <div class='row-fluid'>#}
    {#            <div class='span12'>#}
    {#                <div class="alert alert-error">#}
    {#                    <a class="close" data-dismiss="alert">×</a>#}
    {#                    <h4 class="alert-heading">Pre convalidado</h4>#}
    {#                    <p>{{ inscripcion.documentos_entregados.observaciones_pre }}</p>#}
    {#                </div>#}
    {#            </div>#}
    {#        </div>#}
    {#    {% endif %}#}
    <div class="row-fluid">

    <div class="alert alert-info alert-dismissible " role="alert">
        <strong>No puede eliminar una asignatura que esté relacionado con una Matricula!</strong>
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>

        <div class="span12">
            {#            {% if not inscripcion.egresado and not inscripcion.graduado %}#}
            {#            {% with tiene_permiso=pers|args:inscripcion.id|call:'persona_tiene_permiso' %}#}
            {% if add_record %}
                {% if perms.sga.puede_modificar_records and tiene_permiso %}
                    <a href="/inscripciones?action=addrecord&id={{ inscripcion.id }}" class='btn btn-success'><i class="fa fa-plus "></i> Adicionar</a>
                {% endif %}
            {% endif %}
            {#                {% if perms.sga.puede_modificar_homologaciones and tiene_permiso %}#}
            {#                    <a href="/inscripciones?action=addrecordhomologada&id={{ inscripcion.id }}" class='btn btn-success'><i class="fa fa-plus "></i> Homologaci&oacute;n</a>#}
            {#                {% endif %}#}
            {% if perms.sga.puede_modificar_records and tiene_permiso  %}
                {% if not inscripcion.graduado and not inscripcion.egresado or persona.usuario.is_superuser%}
                    <a href="/inscripciones?action=recalcularcreditos&id={{ inscripcion.id }}" class='btn btn-success btn-form'><i class="fa fa-retweet"></i> Calcular. Cred.</a>
                    <a href="/inscripciones?action=recalcularniveles&id={{ inscripcion.id }}" class='btn btn-success btn-form'><i class="fa fa-retweet"></i> Calcular. Nivel.</a>
                {% elif inscripcion.carrera.mi_coordinacion2 == 7  %}
                    <a href="/inscripciones?action=recalcularcreditos&id={{ inscripcion.id }}" class='btn btn-success btn-form'><i class="fa fa-retweet"></i> Calcular. Cred.</a>
                    <a href="/inscripciones?action=recalcularniveles&id={{ inscripcion.id }}" class='btn btn-success btn-form'><i class="fa fa-retweet"></i> Calcular. Nivel.</a>
                {% endif %}
            {% endif %}
            {#            {% endwith %}#}
            {#            {% endif %}#}
            <a href="/inscripciones?action=extracurricular&id={{ inscripcion.id }}" class='btn btn-primary btn-form'><i class="fa fa-certificate "></i> Otras Notas</a>
            {% if reporte_0 %}
                <a href="javascript:;" tipos="{{ reporte_0.tiporeporte }}" nhref="/reportes?action=run&n={{ reporte_0.nombre }}&inscripcion={{ inscripcion.id }}" class="btn reportedirecto btn-warning"><i class="fa fa-print"></i> Imprimir Registro</a>
            {% endif %}
            {#            {%  if personasesion.usuario.id == 46006 or  personasesion.usuario.id == 43138 or personasesion.usuario.id == 43139 or  personasesion.usuario.is_superuser %}#}
            <a href="javascript:;" tipos=",pdf" nhref="/reportes?action=run&rid=586&vqr={{ inscripcion.id }}" class="btn reportedirecto btn-info"><i class="fa fa-print"></i> Imprimir Historico</a>
{#            <a href="javascript:;" class='btn btn-info recordhistorico'><i class="fa fa-print "></i> Imprimir Historico </a>#}
            {%  if personasesion.usuario.is_superuser %}
                <a href="javascript:;" class='btn btn-danger eliminarmasivo'><i class="fa fa-close "></i> Eliminar</a>
            {% endif %}
{#            <a class="btn btn-info btn-accion"#}
{#               href="javascript:;"#}
{#               data-json='{"url":"{{ request.path }}","id":"{{ inscripcion.id|encrypt }}","action":"actualizar_nivel_malla"}'>#}
{#                <i class="fa fa-tag"></i> Actualizar Nivel Malla#}
{#            </a>#}
        </div>
    </div>
    <div class='row-fluid'>
        <div class="span12">
            <input type="search" style="text-transform: uppercase; margin-bottom: 0px" class="input-block-level" id="FilterTextBox" name="FilterTextBox">
            <table class='table table-bordered table-striped filterable' >
                <thead>
                <tr>
                    <th>Asignatura</th>
                    <th style="width: 40px; text-align: center; ">Cred.</th>
                    <th style="width: 40px; text-align: center; ">Hrs.</th>
                    <th style="width: 265px;">Profesor/Periodo</th>
                    <th style="width: 30px; text-align: center; ">Val.</th>
                    <th style="width: 50px; text-align: center; ">Nota</th>
                    <th style="width: 50px; text-align: center; ">Asist.(%)</th>
                    <th style="width: 80px; text-align: center; ">Fecha</th>
                    <th style="width: 40px; text-align: center; ">Suf.</th>
                    <th style="width: 35px; text-align: center; ">Sin Asist.</th>
                    <th style="width: 35px; text-align: center; ">Hom.</th>
                    <th style="width: 35px; text-align: center; ">Cred.</th>
                    <th style="width: 35px; text-align: center; ">Prom.</th>
                    <th style="width: 90px; text-align: center; ">Estado</th>
                    {%  if personasesion.usuario.id == 46006 or  personasesion.usuario.id == 43138 or personasesion.usuario.id == 43139 or persona.usuario.is_superuser%}
                        <th style="width: 25px; text-align: center">Todo <input type="checkbox" class="seleccionartodos" ></th>
{#                    {% else %}#}
{#                        <th style="width: 80px;"></th>#}

                    {% endif %}
                    <th style="width: 80px;"></th>
                </tr>
                </thead>
                <tbody>
                {% for record in records %}
                    <tr>
                        {#                    <td>#}
                        {#                        {{ record.id }}#}
                        {#                        {{ record.asignatura }}<br/>#}
                        {#                        {% if record.asignaturamalla  %}#}
                        {#                            <label class="label label-info smaller">{{ record.asignaturamalla.nivelmalla }}</label>#}
                        {#                        {% elif record.modulomalla  %}#}
                        {#                            <label class="label label-warning smaller">MODULO</label>#}
                        {#                        {% else %}#}
                        {#                            <label class="label smaller">NO CONSTA EN MALLA</label>#}
                        {#                        {% endif %}#}
                        {#                        {% if record.matriculas > 1  %}#}
                        {#                            <label class="label label-warning smaller"> {{ record.matriculas }} MAT.</label>#}
                        {#                        {% endif %}#}
                        {#                    </td>#}
                        <td>
                            {% if record.asignaturamallahistorico %}
                                 {% if record.asignatura %}
                                    {{ record.asignatura }}<br>
                                        {% if record.asignaturamalla  %}
                                            {{ record.asignaturamalla.nivelmalla }}<br>
                                        {% endif %}

                                {% endif %}
                                <label class="label smaller">{{ record.asignaturamallahistorico.asignatura }}</label><br/>
                                <label class="label label-info smaller">{{ record.asignaturamallahistorico.nivelmalla }}</label>

                            {% else %}
                                {% if record.asignatura %}
                                    {{ record.asignatura }}<br/>
                                {% endif %}
                                {% if record.asignaturamalla  %}
                                    <label class="label label-info smaller">{{ record.asignaturamalla.nivelmalla }}</label>
                                    {% if record.asignaturamalla.itinerario  %}
                                        <label class="label label-warning smaller">ITINERARIO {{ record.asignaturamalla.itinerario }}</label>
                                    {% endif %}
                                {% elif record.modulomalla  %}
                                    <label class="label label-warning smaller">MODULO</label>
                                {% else %}
                                    <label class="label smaller">NO CONSTA EN MALLA</label>
                                {% endif %}
                            {% endif %}

                            {% if record.matriculas > 1  %}
                                <label class="label label-warning smaller"> {{ record.matriculas }} MAT.</label>
                            {% endif %}

                        </td>
                        <td style="text-align: center; ">{{ record.creditos|floatformat:4 }}</td>
                        <td style="text-align: center; ">{{ record.horas|floatformat:0 }}</td>
                        <td>
                            {% if record.materiaregular %}
                                <span class="smaller">{{ record.materiaregular.nivel.periodo.nombre }}</span><br>
                                <span class="smaller">{{ record.materiaregular.profesor_principal|default_if_none:"" }}</span><br>
                            {% elif record.materiacurso %}
                                <span class="smaller">{{ record.materiaregular.profesor|default_if_none:"" }}</span><br>
                            {% endif %}
                            <span class="smaller">{{ record.observaciones|default_if_none:"" }}</span>
                            {% if not record.usuario_creacion.is_superuser and not record.usuario_creacion.id == 1%}
                                {% if record.fecha_creacion %}
                                    <br/><b>Fec. cre.:</b>{{ record.fecha_creacion|date:"d-m-Y"  }}
                                {% endif %}
                                {% if record.usuario_creacion %}
                                    {% if not record.usuario_creacion.is_superuser %}
                                        | <b>Usu. cre.:</b>{{ record.usuario_creacion }}
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                            {% if not record.usuario_modificacion.is_superuser and not record.usuario_modificacion.id == 1%}
                                {% if record.fecha_modificacion %}
                                    <br/><b>Fec. mod.:</b>{{ record.fecha_modificacion|date:"d-m-Y"  }}
                                {% endif %}
                                {% if record.usuario_modificacion %}

                                    | <b>Usu. mod.:</b>{{ record.usuario_modificacion }}
                                {% endif %}
                            {% endif %}
                        </td>
                        <td style="text-align: center; ">{% if record.valoracioncalificacion %}<span class="tu" title="{{ record.valoracioncalificacion.categoria }}">{{ record.valoracioncalificacion.nominacion }}</span>{% endif %}</td>
                        <td style="text-align: center; ">{{ record.nota|floatformat:2 }}</td>
                        <td style="text-align: center; ">{{ record.asistencia|floatformat:0 }}%</td>
                        <td style="text-align: center; ">{{ record.fecha|date:"d-m-Y"  }}</td>
                        <td style="text-align: center; ">
                            {% if record.suficiencia %}
                                <i class="fa fa-check tu" title="Suficiencia"></i>
                            {% endif %}
                        </td>
                        <td style="text-align: center; ">
                            {% if record.sinasistencia %}
                                <i class="fa fa-check tu" title="Sin Asistencia"></i>
                            {% endif %}
                        </td>
                        <td style="text-align: center; ">
                            {% if record.homologada or record.convalidacion %}
                                {% if record.datos_homologacion and record.datos_homologacion.archivo %}
                                    <a class="tu" href="{{ record.datos_homologacion.archivo.url }}" title="Descargar Archivo Homologacion interna"><i class="fa fa-folder-open"></i></a>
                                {% else %}
                                    {% if record.datos_convalidacion and record.datos_convalidacion.archivo %}
                                        <a class="tu" href="{{ record.datos_convalidacion.archivo.url }}" title="Descargar Archivo Homologacion de otra institucion"><i class="fa fa-folder-open"></i></a>
                                    {% else %}
                                        <i class="fa fa-check tu" title="Homologada"></i>
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                        </td>
                        <td style="text-align: center; ">
                            {% if record.valida %}
                                <i  class="fa fa-check tu" title="Valida para creditos"></i>
                            {% endif %}
                        </td>
                        <td style="text-align: center; ">
                            {% if record.validapromedio %}
                                <i  class="fa fa-check tu" title="Valida para promedio"></i>
                            {% endif %}
                        </td>
                        <td style="text-align: center; ">
                            <span class='label {% if record.noaplica %}label-warning{% else %}{% if record.aprobada %}label-success{% else %}label-important{% endif %}{% endif %}'>{% if record.noaplica %}NO APLICA{% else %}{% if record.aprobada %}APROBADA{% else %}REPROBADA{% endif %}{% endif %}</span>
                        </td>
                        {%  if personasesion.usuario.id == 46006  or  personasesion.usuario.id == 43138 or personasesion.usuario.id == 43139 or persona.usuario.is_superuser  %}
                            <td style="text-align: center">

                                <input idr="{{ record.id }}" class="dato" type="checkbox" name="chkparticipante_{{ record.id }}" >
                            </td>
                        {% endif %}
                        <td>
                            {% if tiene_permiso  %}
                                {#                            {% if perms.sga.puede_modificar_ingles %}#}
                                {#                                {% if record.asignatura.id in idasignaturasingles and not persona.usuario.is_superuser  %}#}
                                {#                                    <div class="btn-group">#}
                                {#                                        <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown" href="javascript:;">Acciones<span class="caret"></span></a>#}
                                {#                                        <ul class="dropdown-menu pull-right">#}
                                {#                                    {% if not inscripcion.egresado and not inscripcion.graduado %}#}
                                {#                                            <li><a href="/inscripciones?action=historico&id={{ inscripcion.id }}&rec={{ record.id }}"><i class="fa fa-calendar "></i> Hist&oacute;rico</a></li>#}
                                {#                                            <li><a href="/inscripciones?action=editmallahistorica&rec={{ record.id }}"><i class="fa fa-calendar "></i> Añadir historico</a></li>#}
                                {#                                            {% if perms.sga.puede_modificar_records %}#}
                                {#                                                {% if not record.materiaregular_id %}#}
                                {#                                                    <li><a href="/inscripciones?action=editfechamateria&inscripcionid={{ inscripcion.id }}&rec={{ record.id }}"><i class="fa fa-calendar "></i> Editar fecha asignatura</a></li>#}
                                {#                                                {% endif %}#}
                                {#                                            {% endif %}#}
                                {#                                            {% if perms.sga.puede_modificar_homologaciones %}#}
                                {#                                                {% if record.convalidacion %}#}
                                {#                                                    <li><a href='/inscripciones?action=convalidar&id={{ record.id }}'><i class="fa fa-file "></i> Homologaci&oacute;n externa</a></li>#}
                                {#                                                {% endif %}#}
                                {#                                                {% if record.homologada %}#}
                                {#                                                    <li><a href='/inscripciones?action=homologar&id={{ record.id }}'><i class="fa fa-file "></i> Homologaci&oacute;n interna</a></li>#}
                                {#                                                {% endif %}#}
                                {#                                            {% endif %}#}
                                {#                                            {% if perms.sga.puede_modificar_records %}#}
                                {#                                                {% if not record.valida %}#}
                                {#                                                    <li><a href='/inscripciones?action=validar&id={{ record.id }}'><i class="fa fa-plus "></i> Considerar cr&eacute;ditos</a></li>#}
                                {#                                                {% else %}#}
                                {#                                                    <li><a href='/inscripciones?action=novalidar&id={{ record.id }}'><i class="fa fa-minus "></i> No Considerar cr&eacute;ditos</a></li>#}
                                {#                                                {% endif %}#}
                                {#                                                {% if not record.validapromedio %}#}
                                {#                                                    <li><a href='/inscripciones?action=validarpromedio&id={{ record.id }}'><i class="fa fa-plus "></i> Considerar promedio</a></li>#}
                                {#                                                {% else %}#}
                                {#                                                    <li><a href='/inscripciones?action=novalidarpromedio&id={{ record.id }}'><i class="fa fa-minus "></i> No Considerar promedio</a></li>#}
                                {#                                                {% endif %}#}
                                {#                                                <li class="divider"></li>#}
                                {#                                                <li><a class="eliminacionmodal" href="javascript:;" nhref='/inscripciones?action=delrecord&id={{ record.id }}'><i class="fa fa-remove "></i> Eliminar</a></li>#}
                                {#                                            {% endif %}#}
                                {#                                    {% endif %}#}
                                {#                                        </ul>#}
                                {#                                    </div>#}
                                {#                                {% elif personasesion.usuario.id == 46006 or  personasesion.usuario.id == 43138 or personasesion.usuario.id == 43139 %}#}
                                {#                                    <div class="btn-group">#}
                                {#                                        <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown" href="javascript:;">Acciones<span class="caret"></span></a>#}
                                {#                                        <ul class="dropdown-menu pull-right">#}
                                {#                                    {% if not inscripcion.egresado and not inscripcion.graduado %}#}
                                {#                                            <li><a href="/inscripciones?action=historico&id={{ inscripcion.id }}&rec={{ record.id }}"><i class="fa fa-calendar "></i> Hist&oacute;rico</a></li>#}
                                {#                                            <li><a href="/inscripciones?action=editmallahistorica&rec={{ record.id }}"><i class="fa fa-calendar "></i> Añadir historico</a></li>#}
                                {#                                            {% if perms.sga.puede_modificar_records %}#}
                                {#                                                {% if not record.materiaregular_id %}#}
                                {#                                                    <li><a href="/inscripciones?action=editfechamateria&inscripcionid={{ inscripcion.id }}&rec={{ record.id }}"><i class="fa fa-calendar "></i> Editar fecha asignatura</a></li>#}
                                {#                                                {% endif %}#}
                                {#                                            {% endif %}#}
                                {#                                            {% if perms.sga.puede_modificar_homologaciones %}#}
                                {#                                                {% if record.convalidacion %}#}
                                {#                                                    <li><a href='/inscripciones?action=convalidar&id={{ record.id }}'><i class="fa fa-file "></i> Homologaci&oacute;n externa</a></li>#}
                                {#                                                {% endif %}#}
                                {#                                                {% if record.homologada %}#}
                                {#                                                    <li><a href='/inscripciones?action=homologar&id={{ record.id }}'><i class="fa fa-file "></i> Homologaci&oacute;n interna</a></li>#}
                                {#                                                {% endif %}#}
                                {#                                            {% endif %}#}
                                {#                                            {% if perms.sga.puede_modificar_records %}#}
                                {#                                                {% if not record.valida %}#}
                                {#                                                    <li><a href='/inscripciones?action=validar&id={{ record.id }}'><i class="fa fa-plus "></i> Considerar cr&eacute;ditos</a></li>#}
                                {#                                                {% else %}#}
                                {#                                                    <li><a href='/inscripciones?action=novalidar&id={{ record.id }}'><i class="fa fa-minus "></i> No Considerar cr&eacute;ditos</a></li>#}
                                {#                                                {% endif %}#}
                                {#                                                {% if not record.validapromedio %}#}
                                {#                                                    <li><a href='/inscripciones?action=validarpromedio&id={{ record.id }}'><i class="fa fa-plus "></i> Considerar promedio</a></li>#}
                                {#                                                {% else %}#}
                                {#                                                    <li><a href='/inscripciones?action=novalidarpromedio&id={{ record.id }}'><i class="fa fa-minus "></i> No Considerar promedio</a></li>#}
                                {#                                                {% endif %}#}
                                {#                                                <li class="divider"></li>#}
                                {#                                                <li><a class="eliminacionmodal" href="javascript:;" nhref='/inscripciones?action=delrecord&id={{ record.id }}'><i class="fa fa-remove "></i> Eliminar</a></li>#}
                                {#                                            {% endif %}#}
                                {#                                    {% endif %}#}
                                {#                                        </ul>#}
                                {#                                    </div>#}
                                {#                                {% endif %}#}
                                {#                            {% else %}#}
                                {# para quitar validacion para los alumnos de turismo #}
                                {#                                {% if persona.usuario.is_superuser %}#}
                                {#                                    <div class="btn-group">#}
                                {#                                        <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown" href="javascript:;">Acciones<span class="caret"></span></a>#}
                                {#                                        <ul class="dropdown-menu pull-right">#}
                                {#                                    {% if not inscripcion.egresado and not inscripcion.graduado %}#}
                                {#                                            <li><a href="/inscripciones?action=historico&id={{ inscripcion.id }}&rec={{ record.id }}"><i class="fa fa-calendar "></i> Hist&oacute;rico</a></li>#}
                                {#                                            <li><a href="/inscripciones?action=editmallahistorica&rec={{ record.id }}"><i class="fa fa-calendar "></i> Añadir historico</a></li>#}
                                {#                                            {% if perms.sga.puede_modificar_records %}#}
                                {#                                                {% if not record.materiaregular_id %}#}
                                {#                                                    <li><a href="/inscripciones?action=editfechamateria&inscripcionid={{ inscripcion.id }}&rec={{ record.id }}"><i class="fa fa-calendar "></i> Editar fecha asignatura</a></li>#}
                                {#                                                {% endif %}#}
                                {#                                            {% endif %}#}
                                {#                                            {% if perms.sga.puede_modificar_homologaciones %}#}
                                {#                                                {% if record.convalidacion %}#}
                                {#                                                    <li><a href='/inscripciones?action=convalidar&id={{ record.id }}'><i class="fa fa-file "></i> Homologaci&oacute;n externa</a></li>#}
                                {#                                                {% endif %}#}
                                {#                                                {% if record.homologada %}#}
                                {#                                                    <li><a href='/inscripciones?action=homologar&id={{ record.id }}'><i class="fa fa-file "></i> Homologaci&oacute;n interna</a></li>#}
                                {#                                                {% endif %}#}
                                {#                                            {% endif %}#}
                                {#                                            {% if perms.sga.puede_modificar_records %}#}
                                {#                                                {% if not record.valida %}#}
                                {#                                                    <li><a href='/inscripciones?action=validar&id={{ record.id }}'><i class="fa fa-plus "></i> Considerar cr&eacute;ditos</a></li>#}
                                {#                                                {% else %}#}
                                {#                                                    <li><a href='/inscripciones?action=novalidar&id={{ record.id }}'><i class="fa fa-minus "></i> No Considerar cr&eacute;ditos</a></li>#}
                                {#                                                {% endif %}#}
                                {#                                                {% if not record.validapromedio %}#}
                                {#                                                    <li><a href='/inscripciones?action=validarpromedio&id={{ record.id }}'><i class="fa fa-plus "></i> Considerar promedio</a></li>#}
                                {#                                                {% else %}#}
                                {#                                                    <li><a href='/inscripciones?action=novalidarpromedio&id={{ record.id }}'><i class="fa fa-minus "></i> No Considerar promedio</a></li>#}
                                {#                                                {% endif %}#}
                                {#                                                <li class="divider"></li>#}
                                {#                                                <li><a class="eliminacionmodal" href="javascript:;" nhref='/inscripciones?action=delrecord&id={{ record.id }}'><i class="fa fa-remove "></i> Eliminar</a></li>#}
                                {#                                            {% endif %}#}
                                {#                                    {% endif %}#}
                                {#                                        </ul>#}
                                {#                                    </div>#}
                                {#                                {% else %}#}
                                {#                                    {% if record.asignatura.id not in idasignaturasingles or persona.usuario.is_superuser %}#}
                                {#                                        <div class="btn-group">#}
                                {#                                            <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown" href="javascript:;">Acciones<span class="caret"></span></a>#}
                                {#                                            <ul class="dropdown-menu pull-right">#}
                                {#                                    {% if not inscripcion.egresado and not inscripcion.graduado %}#}
                                {#                                                <li><a href="/inscripciones?action=historico&id={{ inscripcion.id }}&rec={{ record.id }}"><i class="fa fa-calendar "></i> Hist&oacute;rico</a></li>#}
                                {#                                                <li><a href="/inscripciones?action=editmallahistorica&rec={{ record.id }}"><i class="fa fa-calendar "></i> Añadir historico</a></li>#}
                                {#                                                {% if perms.sga.puede_modificar_records %}#}
                                {#                                                    {% if not record.materiaregular_id %}#}
                                {#                                                        <li><a href="/inscripciones?action=editfechamateria&inscripcionid={{ inscripcion.id }}&rec={{ record.id }}"><i class="fa fa-calendar "></i> Editar fecha asignatura</a></li>#}
                                {#                                                    {% endif %}#}
                                {#                                                {% endif %}#}
                                {#                                                {% if perms.sga.puede_modificar_homologaciones %}#}
                                {#                                                    {% if record.convalidacion %}#}
                                {#                                                        <li><a href='/inscripciones?action=convalidar&id={{ record.id }}'><i class="fa fa-file "></i> Homologaci&oacute;n externa</a></li>#}
                                {#                                                    {% endif %}#}
                                {#                                                    {% if record.homologada %}#}
                                {#                                                        <li><a href='/inscripciones?action=homologar&id={{ record.id }}'><i class="fa fa-file "></i> Homologaci&oacute;n interna</a></li>#}
                                {#                                                    {% endif %}#}
                                {#                                                {% endif %}#}
                                {#                                                {% if perms.sga.puede_modificar_records %}#}
                                {#                                                    {% if not record.valida %}#}
                                {#                                                        <li><a href='/inscripciones?action=validar&id={{ record.id }}'><i class="fa fa-plus "></i> Considerar cr&eacute;ditos</a></li>#}
                                {#                                                    {% else %}#}
                                {#                                                        <li><a href='/inscripciones?action=novalidar&id={{ record.id }}'><i class="fa fa-minus "></i> No Considerar cr&eacute;ditos</a></li>#}
                                {#                                                    {% endif %}#}
                                {#                                                    {% if not record.validapromedio %}#}
                                {#                                                        <li><a href='/inscripciones?action=validarpromedio&id={{ record.id }}'><i class="fa fa-plus "></i> Considerar promedio</a></li>#}
                                {#                                                    {% else %}#}
                                {#                                                        <li><a href='/inscripciones?action=novalidarpromedio&id={{ record.id }}'><i class="fa fa-minus "></i> No Considerar promedio</a></li>#}
                                {#                                                    {% endif %}#}
                                {#                                                    <li class="divider"></li>#}
                                {#                                                    <li><a class="eliminacionmodal" href="javascript:;" nhref='/inscripciones?action=delrecord&id={{ record.id }}'><i class="fa fa-remove "></i> Eliminar</a></li>#}
                                {#                                                {% endif %}#}
                                {#                                    {% endif %}#}
                                {#                                            </ul>#}
                                {#                                        </div>#}
                                {#                                    {% elif personasesion.usuario.id == 46006 or  personasesion.usuario.id == 43138 or personasesion.usuario.id == 43139 %}#}
                                <div class="btn-group">
                                    <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown" href="javascript:;">Acciones<span class="caret"></span></a>
                                    <ul class="dropdown-menu pull-right">
                                        {#                                    {% if not inscripcion.egresado and not inscripcion.graduado %}#}
                                        <li><a href="/inscripciones?action=historico&id={{ inscripcion.id }}&rec={{ record.id }}"><i class="fa fa-calendar "></i> Hist&oacute;rico</a></li>
                                        {#                                                <li><a href="/inscripciones?action=editmallahistorica&rec={{ record.id }}"><i class="fa fa-calendar "></i> Añadir historico</a></li>#}
                                        {% if perms.sga.puede_modificar_records %}
                                            {% if edit_record %}
                                                <li><a href="/inscripciones?action=editfechamateria&inscripcionid={{ inscripcion.id }}&rec={{ record.id }}"><i class="fa fa-calendar "></i> Editar fecha asignatura</a></li>
                                            {% endif %}
                                        {% endif %}
                                        {% if perms.sga.puede_modificar_homologaciones %}
                                            {% if record.convalidacion %}
                                                <li><a href='/inscripciones?action=convalidar&id={{ record.id }}'><i class="fa fa-file "></i> Homologaci&oacute;n externa</a></li>
                                            {% endif %}
                                            {% if record.homologada %}
                                                <li><a href='/inscripciones?action=homologar&id={{ record.id }}'><i class="fa fa-file "></i> Homologaci&oacute;n interna</a></li>
                                            {% endif %}
                                        {% endif %}
                                        {% if perms.sga.puede_modificar_records %}
                                            {% if not record.valida %}
                                                <li><a href='/inscripciones?action=validar&id={{ record.id }}'><i class="fa fa-plus "></i> Considerar cr&eacute;ditos</a></li>
                                            {% else %}
                                                <li><a href='/inscripciones?action=novalidar&id={{ record.id }}'><i class="fa fa-minus "></i> No Considerar cr&eacute;ditos</a></li>
                                            {% endif %}
                                            {% if not record.validapromedio %}
                                                <li><a href='/inscripciones?action=validarpromedio&id={{ record.id }}'><i class="fa fa-plus "></i> Considerar promedio</a></li>
                                            {% else %}
                                                <li><a href='/inscripciones?action=novalidarpromedio&id={{ record.id }}'><i class="fa fa-minus "></i> No Considerar promedio</a></li>
                                            {% endif %}
                                            <li class="divider"></li>
                                            {% if record.materiaregular == None %}
                                            <li><a class="eliminacionmodal" href="javascript:;" nhref='/inscripciones?action=delrecord&id={{ record.id }}'><i class="fa fa-remove "></i> Eliminar</a></li>
                                            {% endif %}
                                        {% endif %}
                                        {#                                    {% endif %}#}
                                    </ul>
                                </div>
                                {#                                    {% endif %}#}
                                {#                                {% endif %}#}
                                {#                            {% endif %}#}
                            {% endif %}
                        </td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="11">NO EXISTEN REGISTROS</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}
