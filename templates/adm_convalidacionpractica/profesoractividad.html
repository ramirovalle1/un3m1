{% extends "basebs.html" %}
{% load sga_extras %}
{% load humanize %}
{% block heading %}
    <link href="/static/css/table-responsive.css?1.0.0" type="text/css" rel="stylesheet"/>
    <style>
        .dialog-buttons button {
            background-color: #6dbb4a;
            border-color: #6dbb4a;
            color: #FFFFFF;
        }

        .dialog-buttons button.cancel {
            background-color: #ec6459;
            border-color: #ec6459;
            color: #FFFFFF;
        }

        .smoke {
            background-color: #f5f5f5;
        }
    </style>
    <script>
        $(function () {
            $("select").select2({minimumResultsForSearch: 5});
            {#lista_items1 = [];#}

            $("#id_fecha_desde, #id_fecha_hasta, #id_fecha_desde_rv, #id_fecha_hasta_rv").datepicker({format: "dd-mm-yyyy"}).on('changeDate', function (ev) {
                $(this).datepicker('hide');
            });

            $("#id_fecha_desde, #id_fecha_hasta, #id_fecha_desde_rv, #id_fecha_hasta_rv").blur(function () {
                fechavalida($(this));
            });

            $("#id_tipoactividad").change(function () {
                busqueda();
            });
            $("#id_periodo_filtro").change(function () {
                busqueda();
            });

            $("#search").click(function () {
                busqueda();
            });

            $('#searchinput').keyup(function (e) {
                if (e.keyCode == 13) {
                    $("#search").trigger("click");
                }
            });

            busqueda = function () {
                location.href = "/adm_convalidacionpractica?s="+$("#searchinput").val().toUpperCase()+"&tipoactividad="+$("#id_tipoactividad").val()+"&periodo="+$("#id_periodo_filtro").val();

            };

            $("#cerrar, #cerrar2").click(function () {
                $('#itemspanelmostrararchivos').modal('hide');
            });


            $(".mostrararchivos").click(function () {
                var id = $(this).attr('id');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_convalidacionpractica",
                    data: {'action': 'mostrararchivos', 'id': id},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodymostrararchivos").html(data.data);
                            $(".paneltitlemostrararchivos").html(data.title);
                            $("#itemspanelmostrararchivos").modal({
                                backdrop: 'static',
                                width: '700px',
                                height: '500px'
                            }).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $(".mostrarinscritos").click(function () {
                var id = $(this).attr('id');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_convalidacionpractica",
                    data: {'action': 'mostrarinscritos', 'id': id},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodymostrarinscritos").html(data.data);
                            $(".paneltitlemostrarinscritos").html(data.title);
                            $("#itemspanelmostrarinscritos").modal({
                                backdrop: 'static',
                                width: '900px',
                                height: '500px'
                            }).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#itemspanelmostrarinscritos .cerrar").click(function () {
                $('#itemspanelmostrarinscritos').modal('hide');
            });

            $("#itemspanelmostrarinscritos .cerrar2").click(function () {
                $('#itemspanelmostrarinscritos').modal('hide');
            });

            $(".mostraractividades").click(function () {
                var id = $(this).attr('id');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_convalidacionpractica",
                    data: {'action': 'mostraractividades', 'id': id},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodymostraractividades").html(data.data);
                            $(".paneltitlemostraractividades").html(data.title);
                            $("#itemspanelmostraractividades").modal({
                                backdrop: 'static',
                                width: '900px',
                                height: '500px'
                            }).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $(".mostrarrecomendacion").click(function () {
                var id = $(this).attr('id');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_convalidacionpractica",
                    data: {'action': 'mostrarrecomendaciones', 'id': id},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodymostrarrecomendacion").html(data.data);
                            $(".paneltitlemostrarrecomendacion").html(data.title);
                            $("#itemspanelmostrarrecomendacion").modal({
                                backdrop: 'static',
                                width: '900px',
                                height: '500px'
                            }).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#itemspanelmostrarrecomendacion .cerrar").click(function () {
                $('#itemspanelmostrarrecomendacion').modal('hide');
            });

            $("#itemspanelmostrarrecomendacion .cerrar2").click(function () {
                $('#itemspanelmostrarrecomendacion').modal('hide');
            });

            $("#itemspanelmostraractividades .cerrar").click(function () {
                $('#itemspanelmostraractividades').modal('hide');
            });

            $("#itemspanelmostraractividades .cerrar2").click(function () {
                $('#itemspanelmostraractividades').modal('hide');
            });

            $(".aceptarinscripcion").click(function () {
                var id = $(this).attr('id');
                var id2 = $(this).attr('id2');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_convalidacionpractica",
                    data: {'action': 'mostrarpreinscritos', 'id': id, 'id2': id2},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyaceptarinscripcion").html(data.data);
                            $(".paneltitleaceptarinscripcion").html(data.title);
                            $("#itemspanelaceptarinscripcion").modal({
                                backdrop: 'static',
                                width: '80%',
                                height: '580px'
                            }).modal('show');
                        } else {
                            {#location.reload();#}
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            {#$(".aggrecomendacion").click(function () {#}
            {#    var id = $(this).attr('id');#}
            {#    bloqueointerface();#}
            {#    $.ajax({#}
            {#        type: "GET",#}
            {#        url: "/adm_convalidacionpractica",#}
            {#        data: {'action': 'aggrecomendacion', 'id': id},#}
            {#        success: function (data) {#}
            {#            $.unblockUI();#}
            {#            if (data.result == 'ok') {#}
            {#                $(".panelbodyrecomendacion").html(data.data);#}
            {#                $(".paneltitlerecomendacion").html(data.title);#}
            {#                $("#itemspanelrecomendacion").modal({#}
            {#                    backdrop: 'static',#}
            {#                    width: '80%',#}
            {#                    height: '580px'#}
            {#                }).modal('show');#}
            {#            } else {#}
            {#                smoke.alert(data.mensaje);#}
            {#            }#}
            {#        },#}
            {#        error: function () {#}
            {#            $.unblockUI();#}
            {#            smoke.alert("Error de conexión.");#}
            {#        },#}
            {#        dataType: "json"#}
            {#    });#}
            {#});#}

            $("#itemspanelaceptarinscripcion .cerrar").click(function () {
                $('#itemspanelaceptarinscripcion').modal('hide');
            });

            $("#itemspanelaceptarinscripcion .cerrar2").click(function () {
                $('#itemspanelaceptarinscripcion').modal('hide');
            });

            $("#itemspanelaceptarinscripcion .guardar").click(function () {
                if (!datosaceptacioninscripcioncompletos())
                    return false;

                var tp = 0, ta = 0, tr = 0;
                $('select[name="estadopreinscripcion[]"]').each(function () {
                    valor = parseInt($(this).val());

                    if (valor == 1)
                        tp++;
                    else if (valor == 2)
                        ta++;
                    else
                        tr++;
                });

                msg = "¿Está seguro de actualizar los estados de las inscripciones de la siguiente manera?\n";
                msg = msg + "ACEPTADAS: " + ta.toString() + ", "
                msg = msg + "RECHAZADAS: " + tr.toString() + ", "
                msg = msg + "PENDIENTES: " + tp.toString()

                smoke.confirm(msg, function (e) {
                        if (e) {
                            envioformularioreg("/adm_convalidacionpractica", "aceptarinscripcion", false);
                            return false;
                        }
                    }, {
                        ok: "SI, GUARDAR",
                        cancel: "NO, CANCELAR",
                        classname: "custom-class",
                        reverseButtons: true
                    }
                );
            });

            $(".registrocumplimiento").click(function () {
                var id = $(this).attr('id');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_convalidacionpractica",
                    data: {'action': 'registrocumplimiento', 'id': id},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyregistrocumplimiento").html(data.data);
                            $(".paneltitleregistrocumplimiento").html(data.title);
                            $("#itemspanelregistrocumplimiento").modal({
                                backdrop: 'static',
                                width: '80%',
                                height: '580px'
                            }).modal('show');
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });
            {#$(".registrocumplimiento_requisitos").click(function () {#}
            {#    var id = $(this).attr('id');#}
            {#    bloqueointerface();#}
            {#    $.ajax({#}
            {#        type: "GET",#}
            {#        url: "/adm_convalidacionpractica",#}
            {#        data: {'action': 'registrocumplimiento_requisitos', 'id': id},#}
            {#        success: function (data) {#}
            {#            $.unblockUI();#}
            {#            if (data.result == 'ok') {#}
            {#                $(".panelbodyregistrocumplimiento").html(data.data);#}
            {#                $(".paneltitleregistrocumplimiento").html(data.title);#}
            {#                $("#itemspanelregistrocumplimiento").modal({#}
            {#                    backdrop: 'static',#}
            {#                    width: '80%',#}
            {#                    height: '580px'#}
            {#                }).modal('show');#}
            {#            } else {#}
            {#                smoke.alert(data.mensaje);#}
            {#            }#}
            {#        },#}
            {#        error: function () {#}
            {#            $.unblockUI();#}
            {#            smoke.alert("Error de conexión.");#}
            {#        },#}
            {#        dataType: "json"#}
            {#    });#}
            {#});#}

            $("#itemspanelregistrocumplimiento .cerrar").click(function () {
                $('#itemspanelregistrocumplimiento').modal('hide');
            });

            $("#itemspanelregistrocumplimiento .cerrar2").click(function () {
                $('#itemspanelregistrocumplimiento').modal('hide');
            });

            $("#itemspanelregistrocumplimiento .guardar").click(function () {
                if (!datosregistrocumplimientocompletos())
                    return false;

                var tp = 0, ta = 0, tr = 0;
                $('select[name="estadoregistro[]"]').each(function () {
                    valor = parseInt($(this).val());

                    if (valor == 0)
                        tp++;
                    else if (valor == 6)
                        ta++;
                    else
                        tr++;
                });

                msg = "¿Está seguro de guardar el Registro de Cumplimiento de la siguiente manera?\n";
                msg = msg + "APROBADOS: " + ta.toString() + ", "
                msg = msg + "REPROBADOS: " + tr.toString()

                smoke.confirm(msg, function (e) {
                        if (e) {
                            envioformularioreg("/adm_convalidacionpractica", "registrocumplimiento", false);
                            return false;
                        }
                    }, {
                        ok: "SI, GUARDAR",
                        cancel: "NO, CANCELAR",
                        classname: "custom-class",
                        reverseButtons: true
                    }
                );
            });


            $(".ingresoactividades").click(function () {
                var id = $(this).attr('id');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_convalidacionpractica",
                    data: {'action': 'ingresoactividades', 'id': id},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyingresoactividades").html(data.data);
                            $(".paneltitleingresoactividades").html(data.title);
                            $("#itemspanelingresoactividades").modal({
                                backdrop: 'static',
                                width: '900px',
                                height: '500px'
                            }).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#itemspanelingresoactividades .guardar").click(function () {
                envioformularioreg("/adm_convalidacionpractica", "ingresardetalle", false);
                return false;
            });

            envioformularioreg = function (url, action, destino) {
                if (action == 'ingresardetalle')
                    valido = datosdetalleactividadescompleto();
                else if (action == 'aceptarinscripcion')
                    valido = datosaceptacioninscripcioncompletos();
                else if (action == 'registrocumplimiento')
                    valido = datosregistrocumplimientocompletos();

                if (valido) {
                    bloqueointerface();
                    if (action == 'ingresardetalle')
                        var formdata = new FormData($("#formulario2")[0]);
                    else if (action == 'aceptarinscripcion')
                        var formdata = new FormData($("#formulario3")[0]);
                    else if (action == 'registrocumplimiento')
                        var formdata = new FormData($("#formulario4")[0]);
                    {#formdata.append("lista_items1", JSON.stringify(lista_items1));#}

                    $.ajax({
                        type: "POST",
                        action: action,
                        url: url,
                        data: formdata,
                        success: function (data) {
                            if (data.result == 'ok') {
                                if (action == 'ingresardetalle' || action == 'registrocumplimiento') {
                                    $.unblockUI();
                                    location.href = "/adm_convalidacionpractica?action=actividadasignada";
                                } else if (action == 'aceptarinscripcion') {
                                    $.unblockUI();
                                    $('#itemspanelaceptarinscripcion').modal('hide');
                                    empezar_notificacion_estado_inscripcion(data.inscripciones);
                                }
                            } else {
                                {#$.unblockUI();#}
                                {#smoke.alert(data.mensaje);#}
                                {#location.reload(true)#}
                                console.log(data);
                                if (data.result == 'bad') {
                                    $.unblockUI();
                                    smoke.alert(data.mensaje);
                                } else {
                                    $.unblockUI();
                                    smoke.alert(data.mensaje);
                                    location.reload(true)

                                }
                            }
                        },
                        error: function () {
                            $.unblockUI();
                            smoke.alert("Error al enviar los datos.");
                        },
                        dataType: "json",
                        cache: false,
                        contentType: false,
                        processData: false
                    });
                }
            };

            empezar_notificacion_estado_inscripcion = function (inscripciones) {
                cantidad = inscripciones.length;
                indice = 0;

                $("#progresspaneltitle").html("Notificando Aceptación/Rechazo de Inscripciones por e-mail")
                $("#progresspaneldialog").modal({keyboard: false, backdrop: 'static'}).modal("show");
                enviaremailestadoincripcion(inscripciones, indice, (cantidad - 1));
            };

            enviaremailestadoincripcion = function (lista, elemento, cantidad) {
                var inscripcionae = lista[elemento];
                var cp = (100 / (cantidad + 1)) * elemento + '%';
                var porc = (100 / (cantidad + 1)) * elemento;
                if (elemento > cantidad) {
                    $("#progresspanelprogresshint").html("Enviado " + (elemento).toString() + " de " + (cantidad + 1).toString() + " (Progreso " + Math.ceil(porc).toString() + '% completado)');
                    $("#progressbar").css({'width': cp});
                    $(".aceptar").css('display', 'inline');
                    $("#progresspanelbody").html("Proceso finalizado con éxito");
                } else {
                    $("#progresspanelprogresshint").html("Enviado " + (elemento).toString() + " de " + (cantidad + 1).toString() + " (Progreso " + Math.ceil(porc).toString() + '% completado)');
                    $("#progressbar").css({'width': cp});
                    $.ajax({
                        type: "POST",
                        url: "/adm_convalidacionpractica",
                        data: {"action": "enviaremailestadoinscripcion", "id": inscripcionae.id},
                        success: function (data) {
                            if (data.result == 'ok') {
                                intentos = 0;
                                enviaremailestadoincripcion(lista, elemento + 1, cantidad);
                            } else {
                                intentos += 1;
                                if (intentos >= 100) {
                                    errorenvio(elemento, cantidad + 1);
                                } else {
                                    enviaremailestadoincripcion(lista, elemento, cantidad);
                                }
                            }
                        },
                        error: function () {
                            errorenvio(elemento, cantidad + 1);
                        },
                        dataType: "json"
                    });
                }
            };

            errorenvio = function (elemento, cantidad) {
                $.unblockUI();
                $("#progresspaneldialog").modal("hide");
                smoke.alert("No se pudo completar el envío de e-mail masivo. Se enviaron " + elemento.toString() + " de " + cantidad.toString() + ". Reintente nuevamente");
            };

            $("#progresspaneldialog .aceptar").click(function () {
                location.href = "/adm_convalidacionpractica?action=actividadasignada";
            });

            $("#generar_reportemensual").click(function () {
                var fecfin = $('#fecfinmen').val();
                var id_actv = $('#id_act').val();

                if (fecfin) {
                    openwindow('GET', '/adm_convalidacionpractica', {
                        action: 'informeactividadpdf',
                        fecfin: fecfin,
                        id_actv: id_actv
                    }, '_blank');
                } else {
                    smoke.alert('Complete los parametros')
                }
            });
            datosdetalleactividadescompleto = function () {
                var validacion = true;
                var totalhoras = 0;

                if ($('input[name="actividad[]"]').length == 0) {
                    smoke.alert("Ingrese el detalle de las actividades");
                    return false;
                }

                $('input[name="actividad[]"]').each(function () {
                    if ($(this).val().trim() == '') {
                        smoke.alert("Ingrese la información completa del detalle de actividades")
                        validacion = false;
                        return false;
                    }
                });

                if (validacion) {
                    $('input[name="horaactividad[]"]').each(function () {
                        hora = $(this).val().trim();
                        if ($(this).val().trim() == '') {
                            smoke.alert("Ingrese la información completa del detalle de actividades")
                            validacion = false;
                            return false;
                        } else if (!$.isNumeric(hora)) {
                            smoke.alert("Los valores de horas deben ser numéricos");
                            validacion = false;
                            return false;
                        } else if (!Number.isInteger(Number(hora))) {
                            smoke.alert("Los valores de horas deben ser tipo entero");
                            validacion = false;
                            return false;
                        } else if (parseInt(hora) == 0) {
                            smoke.alert("El valor de las horas debe ser mayor a 0.");
                            validacion = false;
                            return false;
                        } else {
                            totalhoras += parseInt(hora);
                        }
                    });
                }

                if (validacion) {
                    var totalhorasactividad = $("#totalhorasactividad").val();
                    if (totalhoras != parseInt(totalhorasactividad)) {
                        smoke.alert("La sumatoria de horas debe ser igual a " + totalhorasactividad);
                        validacion = false;
                    }
                }

                return validacion;
            };

            $("#itemspanelingresoactividades .cerrar").click(function () {
                $('#itemspanelingresoactividades').modal('hide');
            });

            $("#itemspanelingresoactividades .cerrar2").click(function () {
                $('#itemspanelingresoactividades').modal('hide');
            });

            datosaceptacioninscripcioncompletos = function () {
                var validacion = true;

                $('select[name="estadopreinscripcion[]"]').each(function () {
                    valor = parseInt($(this).val());
                    idc = $(this).attr('id');

                    if (valor == 3) {
                        obse = $("#obse_" + idc).val().trim();
                        if (obse == '') {
                            smoke.alert("Ingrese las observaciones en las inscripciones RECHAZADAS.");
                            validacion = false;
                            return false;
                        }
                    }
                });
                return validacion;
            };

            datosregistrocumplimientocompletos = function () {
                var validacion = true;
                {#informetecnico = $("#informetecnico").get(0).files.length;#}
                {#vinforme = $("#obliginforme").val();#}
                {#horasmaximocumplir = parseInt($("#horasmaximocumplir").val());#}
                {#if (informetecnico == 0 && vinforme == 'S') {#}
                {#    smoke.alert("Debe agregar el documento PDF del Informe Técnico de la actividad desarrollada");#}
                {#    return false;#}
                {#}#}

                $('input[name="horacumplida[]"]').each(function () {
                    horaalumno = $(this).val().trim();
                    if ($(this).val().trim() == '') {
                        smoke.alert("Ingrese las horas cumplidas por cada estudiante")
                        validacion = false;
                        return false;
                    } else if (!$.isNumeric(horaalumno)) {
                        smoke.alert("Los valores de las horas cumplidas por cada estudiante debe ser numérico");
                        validacion = false;
                        return false;
                    } else if (!Number.isInteger(Number(horaalumno))) {
                        smoke.alert("Los valores de las horas cumplidas por cada estudiante debe ser tipo entero");
                        validacion = false;
                        return false;
                    } else if (parseInt(horaalumno) < 0) {
                        smoke.alert("El valor de las horas cumplidas por cada estudiante debe ser mayor o igual a 0.");
                        validacion = false;
                        return false;
                    } else if (parseInt(horaalumno) > horasmaximocumplir) {
                        smoke.alert("El valor de las horas cumplidas por cada estudiante debe ser menor o igual que " + horasmaximocumplir.toString());
                        validacion = false;
                        return false;
                    }

                });

                if (validacion) {
                    $('select[name="estadoregistro[]"]').each(function () {
                        valor = parseInt($(this).val());
                        idc = $(this).attr('id');

                        if (valor == 7) {
                            obse = $("#obsereg_" + idc).val().trim();
                            if (obse == '') {
                                smoke.alert("Ingrese las observaciones en los estudiantes REPROBADOS.");
                                validacion = false;
                                return false;
                            }
                        } else if (valor == 0) {
                            smoke.alert("Seleccione el estado para cada uno de los estudiantes.");
                            validacion = false;
                            return false;
                        }

                    });
                }
                return validacion;
            };


            $(".generar_archivo_csv").click(function () {
                $(".panelbodyarchivobeneficiario").html();
                $("#titulomodal").html('Generar Archivo Cuentas Beneficiarios');
                $("#itemspanelarchivobeneficiario").modal({backdrop: 'static', width: '520px'}).modal('show');
            });

            $("#generar_archivo").click(function () {
                var fechadesde = $("#id_fecha_desde").val();
                var fechahasta = $("#id_fecha_hasta").val();

                bloqueointerface();

                $.ajax({
                    type: "POST",
                    url: "/adm_convalidacionpractica",
                    data: {
                        'desde': fechadesde,
                        'hasta': fechahasta,
                        'action': 'verificar_cuentas_validadas'
                    },
                    success: function (data) {
                        if (data.result == 'ok') {
                            $.unblockUI();
                            location.href = "/adm_convalidacionpractica?action=generarbeneficiarioscsv&desde=" + fechadesde + "&hasta=" + fechahasta;
                            $('#itemspanelarchivobeneficiario').modal('hide');
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error al enviar los datos al servidor.");
                    },
                    dataType: "json"
                });
            });

            $("#cerrar_archivo").click(function () {
                $('#itemspanelarchivobeneficiario').modal('hide');
            });

            $(".reporte_cuentas_validadas").click(function () {
                $(".panelbodycuentavalidada").html();
                $("#titulomodalrv").html('Reporte Cuentas Beneficiarios Validadas');
                $("#itemspanelcuentavalidada").modal({backdrop: 'static', width: '520px'}).modal('show');
            });

            $("#generar_reporte").click(function () {
                var fechadesde = $("#id_fecha_desde_rv").val();
                var fechahasta = $("#id_fecha_hasta_rv").val();

                bloqueointerface();

                $.ajax({
                    type: "POST",
                    url: "/adm_convalidacionpractica",
                    data: {
                        'desde': fechadesde,
                        'hasta': fechahasta,
                        'action': 'verificar_cuentas_validadas_reporte'
                    },
                    success: function (data) {
                        if (data.result == 'ok') {
                            $.unblockUI();
                            location.href = "/adm_convalidacionpractica?action=beneficiarioscuentasvalidadas&desde=" + fechadesde + "&hasta=" + fechahasta;
                            $('#itemspanelcuentavalidada').modal('hide');
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error al enviar los datos al servidor.");
                    },
                    dataType: "json"
                });
            });

            $("#cerrar_reporte").click(function () {
                $('#itemspanelcuentavalidada').modal('hide');
            });

            $(".reporte_cuentas_rechazadas").click(function () {
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_convalidacionpractica",
                    data: {'action': 'verificar_cuentas_rechazadas'},
                    success: function (data) {
                        if (data.result == 'ok') {
                            $.unblockUI();
                            location.href = "/adm_convalidacionpractica?action=beneficiarioscuentasrechazadas";
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error al enviar los datos al servidor.");
                    },
                    dataType: "json"
                });
            });

            $(".reporte_cuentas_pendiente_revisar").click(function () {
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_convalidacionpractica",
                    data: {'action': 'verificar_cuentas_pendientes_revisar'},
                    success: function (data) {
                        if (data.result == 'ok') {
                            $.unblockUI();
                            location.href = "/adm_convalidacionpractica?action=beneficiarioscuentaspendientesrevisar";
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error al enviar los datos al servidor.");
                    },
                    dataType: "json"
                });
            });

        });

        function formModal(id, text, action, width = '600px', footer = true) {
            $('.panelbodyform').empty();
            bloqueointerface();
            $.ajax({
                type: "GET",
                url: `{{ request.path }}`,
                data: {
                    'action': action,
                    'id': id,
                },
                success: function (data) {
                    $.unblockUI();
                    if (data.result === true) {
                        if (footer === true) {
                            $('#footermodalform').hide();
                        }
                        $('.panelbodyform').html(data.data);
                        $('#itemspanelform .paneltitleform').html(text);
                        $("#itemspanelform").modal({backdrop: 'static', width: width}).modal('show');
                    } else {
                        smoke.alert(data.mensaje);
                    }
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error de conexión.");
                },
                dataType: "json"
            });
        }
        function reportemensual(id) {
            $("#id_act").val(id)
            $("#reportemensual").modal({backdrop: 'static', width: '500px'}).modal('show');

        }



    </script>
    <script src="/static/adicionalesjs/formquestion.js?0.24"></script>
{% endblock %}

{% block atras %}{% if esdirectorcarr or esdirectorvinc %}/adm_convalidacionpractica{% else %}/{% endif %}{% endblock %}

{% block canvas %}

    <div class="modal fade static" id="itemspanelform" style="display: none;">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            <h4><i class="fa fa-list"></i> <b class="paneltitleform">FORMULARIO MODAL</b></h4>
        </div>
        <div class="modal-body">
            <form autocomplete="off" method="post"
                  enctype="multipart/form-data" action="{{ request.path }}">
                {% csrf_token %}
                <div class="row-fluid panelbodyform">
                </div>
            </form>
        </div>
        <div class="modal-footer" id="footermodalform">
            <a href="javascript:;" class="btn btn-default" data-dismiss="modal"><i
                    class="fa fa-window-close"></i>
                Cerrar</a>
        </div>
    </div>
    <div class="modal fade static" id="reportemensual" style="display: none;">
        <div class="modal-header">
            <h4 class="paneltitle"><i class="fa fa-file-pdf-o"></i> Informe de Actividad Extracurricular</h4>
        </div>
        <div class="modal-body">

            <input type="hidden" name="id_act" id="id_act">
            <div>
                <label for="">Fecha Generación Informe</label>
                <input type="date" name="fecfinmen" id="fecfinmen" width="100%" class="form-control"
                       style="width: 100%">
            </div>
            <br>
            <div class="alert alert-info" role="alert">
                <i class="fa fa-info-circle"></i> Tomar en cuenta el período actual para a generación de la información.
            </div>
        </div>
        <div class="modal-footer" style="text-align: right">
            <a href="javascript:;" class="btn btn-success" id="generar_reportemensual"><i class="fa fa-download"></i>
                Generar</a>
            <a href="javascript:;" class="btn btn-default" data-dismiss="modal"><i class="fa fa-window-close"></i>
                Cerrar</a>
        </div>
    </div>

    <div class='row-fluid'>
        <div class='span12'>
            <h4>{{ title }}</h4>
            <h4>{{ title2 }}</h4>
            <h4>{{ title3 }}</h4>
        </div>
    </div>
    <div class='row-fluid'>
        {#        <div class='span1'>#}
        {#            <div class="btn-group">#}
        {#                <a class="btn btn-success dropdown-toggle" data-toggle="dropdown" href="javascript:;">Acciones <span class="caret"></span></a>#}
        {#                <ul class="dropdown-menu pull-left">#}
        {#                    <li><a href="javascript:;" class="generar_archivo_csv"><i class="fa fa-file-excel-o"></i> Generar Archivo de Beneficiarios (Cuentas validadas)</a></li>#}
        {#                    <li><a href="javascript:;" class="reporte_cuentas_validadas"><i class="fa fa-table"></i> Reporte Cuentas de Beneficiarios Validadas</a></li>#}
        {#                    <li><a href="javascript:;" class="reporte_cuentas_pendiente_revisar"><i class="fa fa-table"></i> Reporte Cuentas de Beneficiarios Pendiente Revisar</a></li>#}
        {#                    <li><a href="javascript:;" class="reporte_cuentas_rechazadas"><i class="fa fa-table"></i> Reporte Cuentas de Beneficiarios Rechazadas</a></li>#}
        {#                </ul>#}
        {#            </div>#}
        {#        </div>#}
        <div class="span4">
            {% if esdirectorcarr %}
                <a href="/adm_convalidacionpractica" class='btn btn-success tu'
                   title="Actividades ExtraCurriculares"><span class="fa fa-table"></span> Actividades Convalidación</a>
            {% endif %}
            {% if esdirectorvinc or esanalistavinc %}
                <a href="/adm_convalidacionpractica?action=convalidacionpractica" class='btn btn-success tu'
                   title="Convalidación Prácticas/Vinculación"><span class="fa fa-list-ul"></span> Convalidación</a>
            {% endif %}
            {#            <table class="table table-bordered" style="padding: 0px; margin: 0px">#}
            {#                <tr>#}
            {#                    <td style="margin: 2px; padding: 4px;">Total Solicitudes: <span class="badge badge-inverse tu" title="Total Solicitudes"><strong>{{ totalsolicitudes }}</strong></span></td>#}
            {#                    <td style="margin: 2px; padding: 4px;">T.Validadas: <span class="badge badge-success tu" title="Total Solicitudes Validadas"><strong>{{ totalaprobadas }}</strong></span></td>#}
            {#                    <td style="margin: 2px; padding: 4px;">T.Rechazadas: <span class="badge badge-important tu" title="Total Solicitudes Rechazadas"><strong>{{ totalrechazadas }}</strong></span></td>#}
            {#                    <td style="margin: 2px; padding: 4px;">T.En Revisión: <span class="badge badge-warning tu" title="Total Solicitudes en revisión"><strong>{{ totalrevision }}</strong></span></td>#}
            {#                    <td style="margin: 2px; padding: 4px;">T. Por Revisar: <span class="badge badge-info tu" title="Total Solicitudes Pendientes de revisar"><strong>{{ totalpendiente }}</strong></span></td>#}
            {#                </tr>#}
            {#            </table>#}
        </div>
        <div class='row-fluid'>
            <div class="span12">
                {#                <form method="GET" action="{{ request.path }}">#}
                <table id="tablaBusqueda" class="table table-hover tablaBusquedaSearch">
                    <tbody>
                    <tr>
                        <td style="width: 200px">
                            <i class="fa fa-calendar"></i> Periodo: <br>
                            <select name="periodo" id="id_periodo_filtro" style="width: 450px">
                                <option value="0" selected="selected">TODOS</option>
                                {% for actividad in actividades_periodos %}
                                    <option {% if actividad.id == periodoid %} selected {% endif %}
                                                                               value="{{ actividad.id }}">{{ actividad.nombre }}</option>
                                {% endfor %}
                            </select>
                        </td>
                        <td>
                            <i class="fa fa-tag"></i> Tipo Actividad: <br>
                            <select id="id_tipoactividad" style="width: 250px">
                                <option value="0" selected="selected">TODOS</option>
                                <option value="1" {% if tipoactividad == 1 %}selected="selected"{% endif %}>PRÁCTICAS
                                    PRE PROFESIONALES
                                </option>
                                <option value="2" {% if tipoactividad == 2 %}selected="selected"{% endif %}>PROYECTO DE
                                    SERVICIO COMUNITARIO
                                </option>
                            </select>
                        </td>
                        <td><br>
                            <form class="form-search">
                                <input class='searchinput' type='text' id='searchinput' value='{{ search }}'
                                       placeholder="ACTIVIDAD Ó APELLIDOS DEL PROFESOR" autocomplete="off"/>
                                <a href="javascript:;" id='search' class='btn btn-info'><span
                                        class="fa fa-search "></span> Buscar</a>
                                {% if search or ids %}
                                    <a href="/adm_convalidacionpractica" id='allresults' class='btn btn-info'><span
                                            class="fa fa-refresh "></span> Todos</a>
                                {% endif %}
                            </form>
                        </td>
                    </tr>
                    </tbody>
                </table>
                {#                </form>#}

            </div>
        </div>
            <div class="alert alert-primary" role="alert">
                <i class="fa fa-info-circle"></i> Al momento de culminar la actividad extracurricular, primero se debe ingresar una o más recomendaciones en la opción Adicionar Recomendación, para que se refleje el informe técnico de la actividad extracurricular.
            </div>
    <div id="no-more-tables"><!-- inicio no more tables-->
        <div class="row-fluid">


            <div class='span12'>
                <table class='table table-bordered' cellpadding="0" cellspacing="0">
                    <thead>
                    <tr>
                        <th style="width: 2%; text-align: center">No</th>
                        <th style="width: 30%; text-align: center">Actividad</th>
                        <th style="width: 10%; text-align: center">Tipo</th>
                        <th style="width: 10%; text-align: center">Fecha Inicio/Fin</th>
                        <th style="width: 5%; text-align: center">Total Horas</th>
                        <th style="width: 5%; text-align: center">Archivos</th>
                        <th style="width: 25%; text-align: center">Carrera</th>
                        <th style="width: 10%; text-align: center">Inicio/Fin Inscripciones</th>
                        <th style="width: 5%; text-align: center">Total Cupos</th>
                        <th style="width: 5%; text-align: center">Total Pre-Inscritos</th>
                        <th style="width: 5%; text-align: center">Total Inscritos</th>
{#                        <th style="width: 5%; text-align: center">Total Aprobados</th>#}
                        <th style="width: 5%; text-align: center">Cupo Disponible</th>
                        <th style="width: 5%; text-align: center">Estado</th>
                        <th style="width: 5%; text-align: center">Acciones</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for actividad in actividades %}
                        <tr>
                            <td style="text-align: right" data-title="N°:">
                                <span class="label label-success">{{ actividad.id|stringformat:"05d" }}</span>
                            </td>
                            <td style="text-align: justify" data-title="Actividad:">
                                {{ actividad.titulo }}<br>
                                {% with totaldetalle=actividad.total_detalle_actividades_profesor %}
                                    <strong>Total Actividades a cumplirse:</strong>&nbsp;
                                    <span class="badge badge-{% if totaldetalle > 0 %}success{% else %}warning{% endif %}">{{ totaldetalle }}</span>
                                {% endwith %}<br>
                                {% if actividad.voluntariado %}
                                    <span class="label label-info">VOLUNTARIADO</span><br>
                                {% endif %}
                                <strong>Periodo:</strong> <span>{{ actividad.periodo }}</span>
                                <br>
                                    <span class="label label-info"><a href="javascript:;" style="color:#FDFDFD"; id="{{ actividad.id }}"
                                                   class="mostrarrecomendacion"><i class='fa fa-outdent'></i> Mostrar
                                                Recomendaciones <span class="badge badge-light">{{ actividad.total_recomendaciones }}</span> </a></span>
                            </td>
                            <td style="text-align: center" data-title="Tipo:">
                                {{ actividad.get_tipoactividad_display }}
                                {% if actividad.tipoactividad == 2 %}
                                    <br>
                                    <strong>Nivel Mínimo:</strong>
                                    <span class="label label-warning">{{ actividad.nivelminimo }}</span>
                                {% endif %}
                            </td>
                            <td style="text-align: center" data-title="Fechas Inicio/Fin:">
                                <span class="label label-inverse">{{ actividad.fechainicio|date:"Y-m-d" }}</span><br>
                                <span class="label label-inverse">{{ actividad.fechafin|date:"Y-m-d" }}</span>
                            </td>
                            <td style="text-align: center" data-title="Total Horas:">
                                {{ actividad.horas }}
                            </td>
                            <td style="text-align: center" data-title="Archivos:">
                                <a href="javascript:;" id="{{ actividad.id }}"
                                   class="btn btn-warning mostrararchivos btn-mini tu" title="Mostrar Archivos"><i
                                        class="fa fa-table"></i></a>
                            </td>
                            <td style="text-align: center" data-title="Carrera:">
                                {% for carrera in actividad.carrera.all %}
                                    <label class="label label-info">{{ carrera.nombre }}</label>
                                {% endfor %}
                                {% if actividad.itinerariomalla %}
                                    <br>
                                    <strong>Itinerario:</strong> <span>{{ actividad.itinerariomalla }}</span>
                                {% endif %}
                            </td>
                            <td style="text-align: center" data-title="Inicio/Fin Inscripciones:">
                                <span class="label label-inverse">{{ actividad.inicioinscripcion|date:"Y-m-d" }}</span><br>
                                <span class="label label-inverse">{{ actividad.fininscripcion|date:"Y-m-d" }}</span>
                            </td>
                            <td style="text-align: center" data-title="Total Cupos Asignados:">
                                <span class="badge badge-info">{{ actividad.cupo }}</span>
                            </td>
                            <td style="text-align: center" data-title="Total Pre-Inscritos:">
                                <span class="badge badge-inverse">{{ actividad.total_alumnos_preinscritos }}</span>
                            </td>
                            <td style="text-align: center" data-title="Total Inscritos:">
                                <span class="badge badge-success">{{ actividad.total_alumnos_inscritos }}</span>
                            </td>
{#                            <td style="text-align: center">#}
{#                                <span class="badge badge-success">{{ actividad.total_alumnos_aprobados }}</span>#}
{#                            </td>#}
                            <td style="text-align: center" data-title="Cupos Disponibles:">
                                <span class="badge badge-warning">{{ actividad.total_cupo_disponible }}</span>
                            </td>
                            <td style="text-align: center" data-title="Estado">
                                {% with estado=actividad.estado %}
                                    <span class="label label-{% if estado == 1 %}info{% elif estado == 2 %}inverse{% elif estado == 3 %}default{% elif estado == 4 or estado == 7 %}warning{% elif estado == 6 or estado == 8 or estado == 9 %}success{% else %}important {% endif %}">{{ actividad.get_estado_display }}</span>
                                {% endwith %}
                            </td>
                            <td style="text-align: center" data-title="Acciones">
                                <div class="btn-group" style="text-align: left">
                                    <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown" href="javascript:;">Acciones<span
                                            class="caret"></span>
                                    </a>
                                    <ul class="dropdown-menu pull-right">

                                        {% if actividad.estado < 4 %}
                                            <li><a href="javascript:;" id="{{ actividad.id }}"
                                                   class="ingresoactividades"><i class='fa fa-outdent'></i> Ingreso Actividades</a></li>
                                            <li>
                                                <a href="javascript:void(0)"
                                                   onclick="formModal('{{ actividad.id }}','ADICIONAR ESTUDIANTE','addinscritomanual', '900px')"><i
                                                        class="fa fa-user-plus"></i> Adicionar Estudiante</a>
                                            </li>

                                        {% else %}


                                            <li><a href="javascript:;" id="{{ actividad.id }}"
                                                   class="mostraractividades"><i class='fa fa-outdent'></i> Mostrar
                                                Actividades</a></li>
                                        {% endif %}
                                        {% if actividad.total_alumnos_preinscritos > 0 %}
                                            <li><a href="javascript:;" id="{{ actividad.id }}" id2="{{1}}"
                                                   class="aceptarinscripcion"><i class='fa fa-check-square-o'></i>
                                                Aceptar/Rechazar Inscripciones</a></li>
                                        {% endif %}
                                        {% if actividad.total_alumnos_inscritos > 0 %}
                                            <li><a href="javascript:;" id="{{ actividad.id }}" class="mostrarinscritos"><i
                                                    class='fa fa-users'></i> Estudiantes Inscritos</a></li>

                                        {% endif %}
{#                                    =============================== MOSTRAR ESTUDIANTES INSCRITOS EN OTRA VENTANA#}
                                        {% if actividad.estado < 4 %}

                                        <li><a href="javascript:;" id="{{ actividad.id }}" id2="{{2}}"
                                                   class="aceptarinscripcion"><i class='fa fa-exclamation-circle'></i>
                                                Rechazar Inscripciones</a></li>


                                        {% endif %}
                                        {% if actividad.total_alumnos_inscritos > 0 %}
                                            {% if actividad.estado <= 7 %}

                                                <li><a href="?action=listarinscritos&id={{ actividad.id }}&op=0" aid="{{ actividad.id }}" >
                                                    <i class='fa fa-folder-open'></i> Revisar documentación </a></li>
                                            {% endif %}
                                        {% endif %}

{#                                        {% if actividad.estado <= 7 %}#}


{#                                        {% endif %}#}

                                        {% if actividad.estado < 4 or actividad.estado == 7  %}

                                        <li>
                                            <a href="?action=requisitos&id={{ actividad.id }}" aid="{{ actividad.id }}"><i
                                                    class="fa fa-file"></i> Documento Requeridos</a>
                                        </li>
                                            <li>
                                                <a href="javascript:void(0)"
                                                   onclick="formModal('{{ actividad.id }}','ADICIONAR RECOMENDACIÓN','addrecomendacion', '900px')"><i
                                                        class="fa fa-clipboard"></i> Adicionar Recomendación </a>

                                        </li>

                                        {% endif %}
                                        {% if actividad.total_alumnos_inscritos > 0 %}
                                            {% if actividad.total_recomendaciones != 0 %}
                                                {% if actividad.total_alumnos_preinscritos == 0 and actividad.periodo_inscripcion_finalizado %}
                                                    {% if actividad.requisito_existe %}
                                                        <li><a href="javascript:;" id="{{ actividad.id }}"
                                                               class="registrocumplimiento"><i class='fa fa-list-ol'></i>
                                                            Culminar actividad extracurricular </a></li>
                                                    {% endif %}

                                                {% endif %}
                                            {% endif %}
                                        {% endif %}
                                        {% if actividad.total_recomendaciones == 0  %}
                                            {% if actividad.estado < 4 %}

                                                        <li><a><i class='fa fa-info-circle'></i>
                                                            Debe agregar una recomendación </a></li>

                                            {% endif %}
                                        {% endif %}
                                        {% if actividad.estado > 7 %}

                                        <li><a href="?action=listarinscritos&id={{ actividad.id }}&op=1" aid="{{ actividad.id }}" >
                                                <i class='fa fa-folder-open'></i> Documentación estudiantes </a></li>
                                            <li>
                                            <a href="?action=requisitos_mostrar&id={{ actividad.id }}" aid="{{ actividad.id }}"><i
                                                    class="fa fa-file"></i> Documentos Requeridos</a>
                                            </li>

                                        {% endif %}




                                    </ul>
                                </div>
                            </td>
                        </tr>
                    {% empty %}
                        <tr>
                            <td colspan="14" style="text-align: center">
                                NO EXISTEN REGISTROS DE ACTIVIDADES EXTRACURRICULARES
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class='row-fluid'>
        {% if paging.num_pages > 20 %}
            <div class='pagination'>
                <ul>
                    {% if paging.primera_pagina %}
                        <li>
                            <a href="/adm_convalidacionpractica?action=actividadasignada&page=1{% if tipoactividad %}&tipoactividad={{ tipoactividad }}{% endif %} {% if periodoid %}&periodo={{ periodoid }}{% endif %}">1</a>
                        </li>
                        <li><a href="/adm_convalidacionpractica?action=actividadasignada&page={{ paging.ellipsis_izquierda }}{% if tipoactividad %}&tipoactividad={{ tipoactividad }}{% endif %} {% if periodoid %}&periodo={{ periodoid }}{% endif %}"
                               class="active">...</a></li>
                    {% endif %}
                    {% for pagenumber in paging.paginas %}
                        <li {%  if pagenumber == page.number %}class='active'{% endif %}><a
                                href="/adm_convalidacionpractica?action=actividadasignada&page={{ pagenumber }}{% if tipoid %}&t={{ tipoid }}{% endif %}{% if tipoactividad %}&tipoactividad={{ tipoactividad }}{% endif %} {% if periodoid %}&periodo={{ periodoid }}{% endif %}">{{ pagenumber }}</a>
                        </li>
                    {% endfor %}
                    {% if paging.ultima_pagina %}
                        <li><a href="/adm_convalidacionpractica?action=actividadasignada&page={{ paging.ellipsis_derecha }}{% if tipoactividad %}&tipoactividad={{ tipoactividad }}{% endif %} {% if periodoid %}&periodo={{ periodoid }}{% endif %}"
                               class="active">...</a></li>
                        <li><a href="/adm_convalidacionpractica?action=actividadasignada&page={{ paging.num_pages }}{% if tipoactividad %}&tipoactividad={{ tipoactividad }}{% endif %} {% if periodoid %}&periodo={{ periodoid }}{% endif %}">{{ paging.num_pages }}</a>
                        </li>
                    {% endif %}
                </ul>
            </div>
        {% else %}
            <div class='pagination'>
                <ul>
                    {% for pagenumber in paging.page_range %}
                        <li {%  if pagenumber == page.number %}class='active'{% endif %}><a
                                href="/adm_convalidacionpractica?action=actividadasignada{% if search %}&s={{ search }}&{% endif %}&page={{ pagenumber }}{% if tipoid %}&t={{ tipoid }}{% endif %}{% if tipoactividad %}&tipoactividad={{ tipoactividad }}{% endif %} {% if periodoid %}&periodo={{ periodoid }}{% endif %}">{{ pagenumber }}</a>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        {% endif %}
    </div>

    <div class="modal fade static" id="itemspanelmostrararchivos" style="display: none;">
        <div class="modal-header">
            <table border="0" width="100%" style="background-color: transparent">
                <tr>
                    <td style="width: 80%"><h4 class="paneltitlemostrararchivos">Revisar y Validar Contrato de Beca</h4>
                    </td>
                    <td><a href="javascript:;" id="cerrar2" title="Cerrar" class="btn btn-danger btn-mini pull-right"><i
                            class="fa fa-remove"></i></a></td>
                </tr>
            </table>
        </div>
        <div class="modal-body panelbodymostrararchivos">
        </div>
        <div class="modal-footer" style="text-align: right">
            <a href="javascript:;" class="btn btn-danger" id="cerrar"> Cerrar</a>
        </div>
    </div>

    <div class="modal fade static" id="itemspanelmostrarinscritos" style="display: none;">
        <div class="modal-header">
            <table border="0" width="100%" style="background-color: transparent">
                <tr>
                    <td style="width: 80%"><h4 class="paneltitlemostrarinscritos">Revisar y Validar Contrato de
                        Beca</h4></td>
                    <td><a href="javascript:;" title="Cerrar" class="btn btn-danger btn-mini pull-right cerrar2"><i
                            class="fa fa-remove"></i></a></td>
                </tr>
            </table>
        </div>
        <div class="modal-body panelbodymostrarinscritos">
        </div>
        <div class="modal-footer" style="text-align: right">
            <a href="javascript:;" class="btn btn-danger cerrar"> Cerrar</a>
        </div>
    </div>

    <div class="modal fade static" id="itemspanelmostraractividades" style="display: none;">
        <div class="modal-header">
            <table border="0" width="100%" style="background-color: transparent">
                <tr>
                    <td style="width: 80%"><h4 class="paneltitlemostraractividades">Revisar y Validar Contrato de
                        Beca</h4></td>
                    <td><a href="javascript:;" title="Cerrar" class="btn btn-danger btn-mini pull-right cerrar2"><i
                            class="fa fa-remove"></i></a></td>
                </tr>
            </table>
        </div>
        <div class="modal-body panelbodymostraractividades">
        </div>
        <div class="modal-footer" style="text-align: right">
            <a href="javascript:;" class="btn btn-danger cerrar"> Cerrar</a>
        </div>
    </div>



    <div class="modal fade static" id="itemspanelmostrarrecomendacion" style="display: none;">
        <div class="modal-header">
            <table border="0" width="100%" style="background-color: transparent">
                <tr>
                    <td style="width: 80%"><h4 class="paneltitlemostrarrecomendacion">Revisar y Validar Contrato de
                        Beca</h4></td>
                    <td><a href="javascript:;" title="Cerrar" class="btn btn-danger btn-mini pull-right cerrar2"><i
                            class="fa fa-remove"></i></a></td>
                </tr>
            </table>
        </div>
        <div class="modal-body panelbodymostrarrecomendacion">
        </div>
        <div class="modal-footer" style="text-align: right">
            <a href="javascript:;" class="btn btn-danger cerrar"> Cerrar</a>
        </div>
    </div>


    <div class="modal fade static" id="itemspanelingresoactividades" style="display: none;">
        <div class="modal-header">
            <table border="0" width="100%" style="background-color: transparent">
                <tr>
                    <td style="width: 80%"><h4 class="paneltitleingresoactividades">Revisar y Validar Contrato de
                        Beca</h4></td>
                    <td><a href="javascript:;" title="Cerrar" class="btn btn-danger btn-mini pull-right cerrar2"><i
                            class="fa fa-remove"></i></a></td>
                </tr>
            </table>
        </div>
        <div class="modal-body panelbodyingresoactividades">
        </div>
        <div class="modal-footer" style="text-align: right">
            <a href="javascript:;" class="btn btn-success guardar"> Guardar</a>
            <a href="javascript:;" class="btn btn-danger cerrar"> Cerrar</a>
        </div>
    </div>

    <div class="modal fade static" id="itemspanelaceptarinscripcion" style="display: none;">
        <div class="modal-header">
            <table border="0" width="100%" style="background-color: transparent">
                <tr>
                    <td style="width: 80%"><h4 class="paneltitleaceptarinscripcion">Revisar y Validar Contrato de
                        Beca</h4></td>
                    <td><a href="javascript:;" title="Cerrar" class="btn btn-danger btn-mini pull-right cerrar2"><i
                            class="fa fa-remove"></i></a></td>
                </tr>
            </table>
        </div>
        <div class="modal-body panelbodyaceptarinscripcion">
        </div>
        <div class="modal-footer" style="text-align: right">
            <a href="javascript:;" class="btn btn-success guardar"> Guardar</a>
            <a href="javascript:;" class="btn btn-danger cerrar"> Cerrar</a>
        </div>
    </div>

    <div class="modal fade static" id="itemspanelrecomendacion" style="display: none;">
        <div class="modal-header">
            <table border="0" width="100%" style="background-color: transparent">
                <tr>
                    <td style="width: 80%"><h4 class="paneltitlerecomendacion">Revisar y Validar Contrato de
                        Beca</h4></td>
                    <td><a href="javascript:;" title="Cerrar" class="btn btn-danger btn-mini pull-right cerrar2"><i
                            class="fa fa-remove"></i></a></td>
                </tr>
            </table>
        </div>
        <div class="modal-body panelbodyrecomendacion">
        </div>
        <div class="modal-footer" style="text-align: right">
            <a href="javascript:;" class="btn btn-success guardar"> Guardar</a>
            <a href="javascript:;" class="btn btn-danger cerrar"> Cerrar</a>
        </div>
    </div>

    <div class="modal fade static" id="itemspanelregistrocumplimiento" style="display: none;">
        <div class="modal-header">
            <table border="0" width="100%" style="background-color: transparent">
                <tr>
                    <td style="width: 80%"><h4 class="paneltitleregistrocumplimiento">Revisar y Validar Contrato de
                        Beca</h4></td>
                    <td><a href="javascript:;" title="Cerrar" class="btn btn-danger btn-mini pull-right cerrar2"><i
                            class="fa fa-remove"></i></a></td>
                </tr>
            </table>
        </div>
        <div class="modal-body panelbodyregistrocumplimiento">
        </div>
        <div class="modal-footer" style="text-align: right">
            <a href="javascript:;" class="btn btn-success guardar"> Finalizar actividad </a>
            <a href="javascript:;" class="btn btn-danger cerrar"> Cerrar</a>
        </div>
    </div>

    <div class="modal static" id="progresspaneldialog" style="display: none;">
        <div class="modal-header">
            <h4 id="progresspaneltitle">Cerrando el Nivel</h4>
        </div>
        <div class="modal-body" id="progresspanelbody">
            <div class="progress progress-success progress-striped active">
                <div class="bar" style="width: 0;" id="progressbar"></div>
            </div>
            <div id="progresspanelprogresshint">
            </div>
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <a href="javascript:;" class="btn btn-success aceptar" style="display: none"> Aceptar</a>
                </tr>
            </table>
        </div>
    </div>

    <div class="modal fade static" id="itemspanelarchivobeneficiario" style="display: none;">
        <div class="modal-header">
            <h4 class="paneltitle"><span class="fa fa-file-excel-o"></span> <span id="titulomodal"></span></h4>
        </div>
        <div class="modal-body panelbodyarchivobeneficiario">
            <div class="span1"><span style="text-align: right; display: block; width: 90px">Validada Desde:</span></div>
            <div class='span1'>
                <input type="text" class="selectorfecha" value="{{ fechaactual }}" id="id_fecha_desde"
                       style="width: 100px;">
            </div>
            <div class="span1"><span style="text-align: right; display: block; width: 90px">Validada Hasta:</span></div>
            <div class='span1'>
                <input type="text" class="selectorfecha" value="{{ fechaactual }}" id="id_fecha_hasta"
                       style="width: 100px; ">
            </div>
            <br><br>
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-generar btn-success" id="generar_archivo"><i
                            class="fa fa-print"></i> Generar</a></td>
                    <td><a href="javascript:;" class="btn btn-cerrar btn-danger" id="cerrar_archivo"><i
                            class="fa fa-close"></i> Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>

    <div class="modal fade static" id="itemspanelcuentavalidada" style="display: none;">
        <div class="modal-header">
            <h4 class="paneltitle"><span class="fa fa-file-excel-o"></span> <span id="titulomodalrv"></span></h4>
        </div>
        <div class="modal-body panelbodycuentavalidada">
            <div class="span1"><span style="text-align: right; display: block; width: 90px">Validada Desde:</span></div>
            <div class='span1'>
                <input type="text" class="selectorfecha" value="{{ fechaactual }}" id="id_fecha_desde_rv"
                       style="width: 100px;">
            </div>
            <div class="span1"><span style="text-align: right; display: block; width: 90px">Validada Hasta:</span></div>
            <div class='span1'>
                <input type="text" class="selectorfecha" value="{{ fechaactual }}" id="id_fecha_hasta_rv"
                       style="width: 100px; ">
            </div>
            <br><br>
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-generar btn-success" id="generar_reporte"><i
                            class="fa fa-print"></i> Generar</a></td>
                    <td><a href="javascript:;" class="btn btn-cerrar btn-danger" id="cerrar_reporte"><i
                            class="fa fa-close"></i> Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>

{% endblock %}