{% extends "basebs.html" %}
{% load sga_extras %}
{% block heading %}
    <script type="text/javascript">
        $(function() {
            $("#cerrartemas").click(function () {
                $("#itemspaneltemas .incompletotemas").hide();
                $("#itemspaneltemas .incompletovalotemas").hide();
                $("#itemspaneltemas").modal("hide");
            });
            addactividad = function(codigoturno,codigodia) {
                $("#codturno").val('');
                $("#coddia").val('');
                $("#codturno").val(codigoturno);
                $("#coddia").val(codigodia);
                $.ajax({
                    type: "GET",
                    url: "/adm_criteriosactividadesdocente",
                    data: {'action': 'listactividades', 'idprofesor': '{{profesor.pk}}'},
                    success: function (data) {
                        $("#idactividad").html(data).trigger('change');
                        if(($('#idactividad option').length)==1){
                            $("#alertaingresotemas").show();
                        }else{
                            $("#alertaingresotemas").hide();
                        }
                        $.unblockUI();
                    },
                    dataType: "html"
                });
                $("#alertaingrestemas").hide();
                $("#itemspaneltemas .incompletotemas").hide();
                $("#itemspaneltemas .incompletovalorestemas").hide();
                $("#adicionarycerrartemas").show();
                $("#guardar").hide();
                $("#itemspaneltemas").modal({backdrop:'static', width: '600px'}).modal('show');
                return false;
            }

             $("#adicionarycerraractividad").click(function() {
                var idactividades = $("#idactividad").val();
                var idactividad = idactividades.split("_");
                var idturno = $("#codturno").val()
                var iddia = $("#coddia").val()
                if (idactividad[0] == 0 || idactividad[1] == 0){$("#itemspaneltemas .incompletotemas").show();return false;}
                $("#itemspaneltemas").modal("hide");
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_criteriosactividadesdocente",
                    data: {'action': 'addactividaddoc', 'idactividad': idactividad[0], 'idturno': idturno, 'iddia': iddia, 'tipoactividad': idactividad[1], 'idprofesor': '{{profesor.pk}}'},
                    error: function () {
                        $.unblockUI();
                        {#smoke.alert("Error al obtener los datos.");#}
                       NotificationJG.error("Error al obtener los datos.");
                    },
                    success: function (data) {
                        if (data.result === "ok") {
                            var cboactividad = $("#idactividad option:selected").text();
                            var nomactividad = cboactividad.split(":");
                            $('#nombreactividad'+idturno+'_'+iddia).html(nomactividad[1]+'<br><a href="javascript:;" class="btn btn-tini btn-danger eliminarobj tu" iturno="'+idturno+'" idia="'+iddia+'" descrip="'+nomactividad[1]+'" onclick="deleteactividad('+data.codiactividad+')"  idact="'+data.codiactividad+'" title="Eliminar"><i class="fa fa-remove"></i></a><a href="javascript:;" id="itemsadicionartema" class="btn btn-tini btn-warning">SOLICITADO</a>');
                            window.location.reload();
                        } else {
                            $.unblockUI();
                            Swal.fire({
                                title: 'Conflicto en las horas!',
                                html: data.mensaje,
                                type: 'error',
                                confirmButtonColor: '#3085d6',
                                confirmButtonText: '<i class="fa fa-thumbs-up"></i> OK',
                            })
                        }
                    }
                });
            });
            $(".mostrardetalle").click(function() {
                {#                $("#aprobarcerrar").css('display', 'block');#}
                var id = $(this).attr('idr');
                $("#itemspanel").modal({backdrop:'static', width: '500px'}).modal('show');
            });
            $(".mostrardetalledesaprobar").click(function() {
                {#                $("#aprobarcerrar").css('display', 'block');#}
                var id = $(this).attr('idr');
                $("#itemspaneldesaprobar").modal({backdrop:'static', width: '500px'}).modal('show');
            });
            $(".mostrardetalleaprobacion").click(function() {
                $("#itemspaneldetalle").modal({backdrop:'static', width: '700px'}).modal('show');
            });
            $("#itemspanel .btn-aprobarcerrar").click(function() {
                var idtipo = $("#id_tipo").val();
                var obse = $("#id_observacion").val();
                if(obse == ""){
                    smoke.alert("Ingrese una observación.");
                    $("#id_observacion").focus();
                    return false;
                }
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_criteriosactividadesdocente",
                    data: {'action': 'addaprobacion','idtipo': idtipo, 'obsaprueba': obse, 'idprofesor': {{ profesor.id }}, 'idperiodo': {{ periodo.id }} },
                    success: function(data) {
                        if (data.result=='ok') {
                            $("#itemspanel").modal("hide");
                            location.href = '/adm_criteriosactividadesdocente?action=horario&id='+{{ profesor.id }};
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        desbloqueoUi();
                        smoke.alert("Error al enviar los datos al servidor.");
                    },
                    dataType: "json"
                });
            });
            {#            $("#itemspaneldesaprobar .btn-aprobarcerrar").click(function() {#}
            {#                var idtipo = 1;#}
            {#                var obse = $("#id_observacion2").val();#}
            {#                if(obse == ""){#}
            {#                    smoke.alert("Ingrese una observación.");#}
            {#                    $("#id_observacion2").focus();#}
            {#                    return false;#}
            {#                }#}
            {#                bloqueointerface();#}
            {#                $.ajax({#}
            {#                    type: "POST",#}
            {#                    url: "/adm_criteriosactividadesdocente",#}
            {#                    data: {'action': 'adddesaprobacion','idtipo': idtipo, 'obsaprueba': obse, 'idprofesor': {{ profesor.id }}, 'idperiodo': {{ periodo.id }} },#}
            {#                    success: function(data) {#}
            {#                        if (data.result=='ok') {#}
            {#                            $("#itemspanel").modal("hide");#}
            {#                            location.href = '/adm_criteriosactividadesdocente?action=horario&id='+{{ profesor.id }};#}
            {#                        } else {#}
            {#                            $.unblockUI();#}
            {#                            smoke.alert(data.mensaje);#}
            {#                        }#}
            {#                    },#}
            {#                    error: function() {#}
            {#                        desbloqueoUi();#}
            {#                        smoke.alert("Error al enviar los datos al servidor.");#}
            {#                    },#}
            {#                    dataType: "json"#}
            {#                });#}
            {#            });#}
            $("#itemspanel .btn-cerrar").click(function() {
                $("#itemspanel").modal("hide");
                return false;
            });
            {#            $("#itemspaneldesaprobar .btn-cerrar").click(function() {#}
            {#                $("#itemspaneldesaprobar").modal("hide");#}
            {#                return false;#}
            {#            });#}
            $("#itemspaneldetalle .btn-cerrar").click(function() {
                $("#itemspaneldetalle").modal("hide");
                return false;
            });

             $(".eliminarobj").click(function () {
                 var desactividad = $(this).attr('descrip');
                var iturno=$(this).attr('turno')
                var idia=$(this).attr('dia')
                 console.log($(this).attr('idact'));
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_criteriosactividadesdocente",
                    data: {'action': 'delactividaddoc', 'id': $(this).attr('idact') },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error al obtener los datos.");
                    },
                    success: function (data) {
                        $.unblockUI();
                        if (data.result === "ok") {
                            $('#leyenda').html(desactividad)
                            $('#codigoturno').val(iturno)
                            $('#codigodia').val(idia)
                            $('#leyenda').html(desactividad)
                            $('#codigoactividad').val(data.idactividad)
                            $('#selectdelete').modal({'width': 800}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    }
                });
            });

              $("#eliminacionmodal_formbutton").click(function(){
                bloqueointerface();
                $('#selectdelete').modal('hide');
                var idturno = $('#codigoturno').val();
                var idia = $('#codigodia').val();
                $.ajax({
                    type: "POST",
                    url: "/adm_criteriosactividadesdocente",
                    data: {'action': 'eliminaractividad', 'idactividad': $('#codigoactividad').val()},
                    error: function () {
                        $.unblockUI();
                        NotificationJG.error("Error al obtener los datos.");
                    },
                    success: function (data) {

                        if (data.result === "ok") {
                            location.reload();
                        } else {
                            $.unblockUI();
                            NotificationJG.error(data.mensaje);
                        }
                    }
                });
            });

              $('#desaprobar').on('click', function (e){
                   bloqueointerface();
                    $.ajax({
                    type: "POST",
                    url: "/adm_criteriosactividadesdocente",
                    data: {'action': 'desaprobar', 'idprofesor': {{ profesor.id }}, 'idperiodo': {{ periodo.id }} },
                    success: function(data) {
                        if (data.result==='ok') {
                            location.href = '/adm_criteriosactividadesdocente?action=horario&id='+{{ profesor.id }};
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error al enviar los datos al servidor.");
                    },
                    dataType: "json"
                });


              });

              $('.removefinalizado').on('click', function (e){
                  bloqueointerface();
                    $.ajax({
                    type: "POST",
                    url: "/adm_criteriosactividadesdocente",
                    data: {'action': 'removefinalizar', 'idprofesor': {{ profesor.id }}, 'idperiodo': {{ periodo.id }} },
                    success: function(data) {
                        if (data.result==='ok') {
                            location.href = '/adm_criteriosactividadesdocente?action=horario&id='+{{ profesor.id }};
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error al enviar los datos al servidor.");
                    },
                    dataType: "json"
                });
              });
        });
        function pdfhorarios(profesorid,periodoid){
            openwindow('POST' ,'/adm_criteriosactividadesdocente', {action:'pdf_horarios',profesor:profesorid,periodo:periodoid}, '_blank');
        }
    </script>
{% endblock %}
{% block atras %}/adm_criteriosactividadesdocente{% if search or idc %}?{% endif %}{% if search %}&s={{ search }}{% endif %}{% if idc %}&idc={{ idc }}{% endif %}{% endblock %}
{% block canvas %}
    <div class='row-fluid'>
        <div class='span12'>
            <h4>{{ title }}</h4>
            <h5>Profesor: {{ profesor }} <label class="label label-info tu" title='Horas Actividades Planificadas'>{{ totalhorasdis|default_if_none:"0"|floatformat:0 }}</label> | <label class="label label-{% if completo == 1 %}info{% else %}important{% endif %} tu" title='Horas Actividades Solicitadas'>{{ totalhorasact }} </label></h5>
        </div>
    </div>
    <div class="row-fluid">
        <div class='span6' style="padding:8px">
            {% if perms.sga.puede_visible_periodo or puede_ver_horario %}
                <a onclick="pdfhorarios({{ profesor.id }},{{ periodo.id }})" href="javascript:;"  class='btn btn-warning'><i class="fa fa-print"></i> Imprimir</a>
            {% endif %}
            {% if perms.sga.puede_aprobar_horariosactividades %}
                {% if not finalizado %}
                    <p style="color: red"><i class="fa fa-info"></i> El docente aun no finaliza la planificación del horario de actividades</p>
                {% endif %}
                {% if finalizado and not aprobado %}
                <a href="javascript:;"  class='btn btn-info removefinalizado' data-toggle="tooltip" title="Permitir editar horario de actividades al docente antes de aprobar"><i class="fa fa-edit"></i> Permitir edición</a>
                {% endif %}
                {% if finalizado %}
                    {% if completo == 1 or periodo.anterior %}
                        {% if mostrar == 0 %}
                            <a href="javascript:;"  class='btn btn-success mostrardetalle'><i class="fa fa-check"></i> Aprobar Actividades</a>
{#                        {% else %}#}
                            {#                        <a href="javascript:;"  class='btn btn-success mostrardetalledesaprobar'><i class="fa fa-square-o"></i> Desaprobar Actividades</a>#}
{#                            <a href="javascript:;" class='btn btn-warning mostrardetalleaprobacion'><i class="fa fa-table"></i> Detalle Aprobación</a>#}
{#                            <a href="javascript:;" class='btn btn-danger' id="desaprobar"><i class="fa fa-times"></i> Remover Aprobación</a>#}
                        {% endif %}
                {% endif %}
                    {% if aprobado %}
                        <a href="javascript:;" class='btn btn-warning mostrardetalleaprobacion'><i class="fa fa-table"></i> Detalle Aprobación</a>
                        <a href="javascript:;" class='btn btn-danger' id="desaprobar"><i class="fa fa-times"></i> Remover Aprobación</a>
                    {% endif %}
                {% endif %}
            {% else %}
                <label class="label label-important">
                    No tiene permiso para aprobar actividades
                </label>
            {% endif %}
        </div>
    </div>
    {% if not totalhorasdis %}
        <div class="row-fluid">
            <div class='span10'>
                <div class="alert alert-danger span12"> No tiene horas actividades planificadas en el distributivo.</div>
            </div>
        </div>
    {% else %}
        {% if completo == 0 %}
            <div class="row-fluid">
                <div class='span10'>
                    <div class="alert alert-info span12">El botón de "Aprobar Actividades" se mostrará completando el 100% de las actividades planificadas en el distributivo.</div>
                </div>
            </div>
        {% endif %}
    {% endif %}
    <div class='row-fluid'>
        <div class='span12'>
            <table class='table table-bordered table-striped'  >
                <thead>
                <tr>
                    <th> </th>
                    <th style="width: 160px">Lunes</th>
                    <th style="width: 160px">Martes</th>
                    <th style="width: 160px">Miercoles</th>
                    <th style="width: 160px">Jueves</th>
                    <th style="width: 160px">Viernes</th>
                    <th style="width: 160px">Sabado</th>
                    <th style="width: 160px">Domingo</th>
                </tr>
                </thead>
                <tbody>
                {% for turno in turnos %}
                    <tr>
                        <td>{{ turno.nombre_horario }}</td>
                        {% for dia in semana %}
                            <td>
                                {% if perms.sga.puede_visible_periodo or puede_ver_horario %}
                                    <table class='cell table table-bordered' dia='{{ forloop.counter }}' turno='{{ turno.id }}' style="margin-bottom: 5px">
                                        {% with clases=profesor|args:forloop.counter|args:turno|args:periodo|call:"clases_horario" clasesactividadestutorvirtual=turno|args:dia.0|args:profesor|args:periodo|call:"horario_profesor_actividadtutrovirtual" clasesactividades=turno|args:dia.0|args:profesor|args:periodo|call:"horario_profesor_actividad"  clasescomplexivo=turno|args:forloop.counter|args:profesor|call:"horario_profesor_complexivo" clasescomplexivofuturas=turno|args:forloop.counter|args:profesor|call:"horario_profesor_complexivo_futuro"  mishorariosactuales=turno|args:dia.0|args:profesor|call:"mis_horario_actuales" %}
                                            {% if clases %}
                                                {% for clase in clases %}
                                                    <tr id='horario_normal_{{ clase.id }}' class='horario_normal'>
                                                        <td style='{% if clase.conflicto_aula %}background-color: #ebcccc; border: 1px solid red;{% endif %}text-align: center'>
                                                            <b>{{ clase.materia.asignatura.nombre }}</b>
                                                            <br><b>[{{ clase.materia.identificacion }}]</b>
                                                            <span class="smaller">
                                                                <br><b>{{ clase.fechas_horarios }}</b>
                                                                <br/>{{ clase.materia.nivel.paralelo }} {{ clase.materia.paralelo }}
                                                                <br/>{{ clase.aula.nombre }}
                                                                <br/>{{ clase.aula.sede.nombre }}
                                                            </span>
                                                            <span class="smaller">{{ clase.tipoprofesor }}</span><br>
                                                            <span class="smaller">{{ clase.get_tipohorario_display }}<br></span>
                                                        </td>
                                                    </tr>
                                                {% endfor %}
                                            {% endif %}
                                            {#                                            {% else %}#}
                                            {% if clasesactividades or clasesactividadestutorvirtual %}
                                                {% if clases %}
                                                    <tr>
                                                        <td>
                                                            <span class="label label-important"> Conflicto de horas</span>
                                                        </td>
                                                    </tr>
                                                {% endif %}
                                                {% if clasesactividades %}
                                                    {% for clasesacti in clasesactividades %}
                                                        <tr>
                                                            <td style='border: 1px solid;text-align: left;font-size: 9px'>
                                                                {% if clasesacti.tipodistributivo == 1 or clasesacti.tipodistributivo == 4 %}
                                                                    {{ clasesacti.detalledistributivo.criteriodocenciaperiodo.criterio.nombre }}<br>
                                                                    <span class="label label-default tu"><strong>{{ clasesacti.inicio|date:"Y-m-d" }} | {{ clasesacti.fin|date:"Y-m-d" }}</strong></span><br>
                                                                    {#                                                                    <span class="label{% if clasesacti.modalidad == 1 %} label-success {% else %} label-info {% endif %}">{{ clasesacti.get_modalidad_display }}</span><br>#}
                                                                    <a href="javascript:;" id="itemsadicionartema" class="btn btn-tini btn-{% if clasesacti.estadosolicitud == 1 %}warning{% endif %}{% if clasesacti.estadosolicitud == 2 %}success{% endif %}{% if clasesacti.estadosolicitud == 3 %}danger{% endif %}">{{ clasesacti.get_estadosolicitud_display }}
                                                                {% endif %}
                                                                {% if clasesacti.tipodistributivo == 2 %}
                                                                    {{ clasesacti.detalledistributivo.criterioinvestigacionperiodo.criterio.nombre }}<br>
                                                                    <span class="label label-default tu"><strong>{{ clasesacti.inicio|date:"Y-m-d" }} | {{ clasesacti.fin|date:"Y-m-d" }}</strong></span><br>
                                                                    {#                                                                    <span class="label{% if clasesacti.modalidad == 1 %} label-success {% else %} label-info {% endif %}">{{ clasesacti.get_modalidad_display }}</span><br>#}
                                                                    <a href="javascript:;" id="itemsadicionartema" class="btn btn-tini btn-{% if clasesacti.estadosolicitud == 1 %}warning{% endif %}{% if clasesacti.estadosolicitud == 2 %}success{% endif %}{% if clasesacti.estadosolicitud == 3 %}danger{% endif %}">{{ clasesacti.get_estadosolicitud_display }}</a>
                                                                {% endif %}
                                                                {% if clasesacti.tipodistributivo == 3 %}
                                                                    {{ clasesacti.detalledistributivo.criteriogestionperiodo.criterio.nombre }}<br>
                                                                    <span class="label label-default tu"><strong>{{ clasesacti.inicio|date:"Y-m-d" }} | {{ clasesacti.fin|date:"Y-m-d" }}</strong></span><br>
{#                                                                    <span class="label{% if clasesacti.modalidad == 1 %} label-success {% else %} label-info {% endif %}">{{ clasesacti.get_modalidad_display }}</span><br>#}
                                                                    <a href="javascript:;" id="itemsadicionartema" class="btn btn-tini btn-{% if clasesacti.estadosolicitud == 1 %}warning{% endif %}{% if clasesacti.estadosolicitud == 2 %}success{% endif %}{% if clasesacti.estadosolicitud == 3 %}danger{% endif %}">{{ clasesacti.get_estadosolicitud_display }}</a>
                                                                {% endif %}
                                                                {% if clasesacti.estadosolicitud == 1 or clasesacti.estadosolicitud == 3 %}
                                                                    &nbsp;&nbsp;<a href='javascript:;' class='btn btn-tini btn-danger eliminarobj tu' turno="{{ turno.id }}" dia="{{ dia.0 }}" descrip="{{ clasesacti.detalledistributivo.criteriodocenciaperiodo.criterio.nombre }}" idact="{{ clasesacti.id }}" title='Eliminar'><i class='fa fa-remove'></i></a>
                                                                {% endif %}
                                                            </td>
                                                        </tr>
                                                    {% endfor %}
                                                {% endif %}
                                                {% if clasesactividadestutorvirtual %}
                                                    {% for clasesacti in clasesactividadestutorvirtual %}
                                                        <tr>
                                                            <td style='border: 1px solid;text-align: left;font-size: 9px'>
                                                                {{ clasesacti.actividaddetalle.nombre }}<br>
                                                                <span class="label label-default tu"><strong>{{ clasesacti.inicio|date:"Y-m-d" }} | {{ clasesacti.fin|date:"Y-m-d" }}</strong></span><br>
                                                                <a href="javascript:;" id="itemsadicionartema" class="btn btn-tini btn-{% if clasesacti.estadosolicitud == 1 %}warning{% endif %}{% if clasesacti.estadosolicitud == 2 %}success{% endif %}{% if clasesacti.estadosolicitud == 3 %}danger{% endif %}">{{ clasesacti.get_estadosolicitud_display }}
                                                            </td>
                                                        </tr>
                                                    {% endfor %}
                                                {% endif %}
                                            {% else %}
                                                {% if estadoactividad.estadosolicitud != 2 %}
                                                    {% if not completo == 1 and not clases and not dia.0 == 7 and turno.sesion.id == 17 and not clasesactividades and not clasesactividadesdetalle %}
                                                        {% if not elijedetalleactividad %}
                                                            <a href="javascript:;" id="itemsadicionartema" class="btn btn-tini btn-success" onclick="addactividad({{ turno.id }},{{ dia.0 }})"><i class="fa fa-plus"></i></a>
                                                        {% else %}
                                                            <a href="javascript:;" id="itemsadicionartema" class="btn btn-tini btn-success" onclick="addactividaddetalle({{ turno.id }},{{ dia.0 }})"><i class="fa fa-plus"></i></a>
                                                        {% endif %}
                                                        {#                                                                    {% if sumaactividad > 0 and not  suma == sumaactividad %}#}
                                                        {#                                                                      {% with turnotutoria=turnog|args:periodo|args:diaturnog.0|args:profesor|call:"verificar_turno_tutoria" %}#}
                                                        {#                                                                        {% if turnotutoria %}#}
                                                        {#                                                                            <br><br><span class="label label-inverse">Disponible para tutoria</span>#}
                                                        {#                                                                        {% endif %}#}
                                                        {#                                                                    {% endwith %}#}
                                                        {#                                                                    {% endif %}#}


                                                    {% endif %}

                                                {% endif %}
                                            {% endif %}
                                            {#                                        HORARIO DE COMPLEXIVO#}
                                            {% if clasescomplexivo %}
                                                <div style="background-color: #7cc885; text-align: center; width: 100%; min-height: 50px; border: 1px solid #a7b0c8; border-radius: 3px; margin-bottom: 2px; padding-bottom: 2px;">
                                                    {% for clase in clasescomplexivo %}
                                                        <b>{{ clase.materia.asignatura.nombre }}<br>[{{ clase.materia.asignatura.codigo }}]</b><br>
                                                        <span class="smaller label">{{ clase.fechainicio|date:'d-m-Y' }} al {{ clase.fechafin|date:'d-m-Y' }}</span><br>
                                                        <span class="smaller">
                                                        {% for mishorarioactual in mishorariosactuales %}
                                                            [{{ mishorarioactual.materia.alternativa.carrera.alias }}]-{{ mishorarioactual.materia.alternativa.get_sesion.sesion.nombre }}-{{ mishorarioactual.materia.alternativa.paralelo }}<br>
                                                        {% endfor %}
                                                    </span>
                                                        <span class="smaller">{{ clase.aula.nombre }}<br></span>
                                                        <span class="smaller label">COMPLEXIVO</span><br>
                                                        <span class="smaller">{{ clase.aula.sede }}<br></span>
                                                    {% endfor %}
                                                    {% if disponiblecomplexivo %}
                                                        {% if clasescomplexivo.0.disponible %}
                                                            <a href='javascript:;' clases="{% for clase in mishorariosactuales %}{{ clase.id }}{% if not forloop.last %},{% endif %}{% endfor %}" class='btn btn-primary btn-mini btn-abrir-complexivo'><i class='fa fa-plus '></i> Comenzar Clase</a>
                                                        {% endif %}
                                                    {% endif %}
                                                </div>
                                            {% endif %}
                                            {% if clasescomplexivofuturas %}
                                                {% for clase in clasescomplexivofuturas %}
                                                    <div style="text-align: center; width: 100%; min-height: 50px; border: 1px solid #a7b0c8; border-radius: 3px; margin-bottom: 2px; padding-bottom: 2px;">
                                                        <b>{{ clase.materia.asignatura.nombre }}<br>[{{ clase.materia.asignatura.codigo }}]</b><br>
                                                        <span class="smaller label">{{ clase.fechainicio|date:'d-m-Y' }} al {{ clase.fechafin|date:'d-m-Y' }}</span><br>
                                                        <span class="smaller">
                                                        {% for mishorarioactual in mishorariosactuales %}
                                                            [{{ mishorarioactual.materia.alternativa.carrera.alias }}]-{{ mishorarioactual.materia.alternativa.get_sesion.sesion.nombre }}-{{ mishorarioactual.materia.alternativa.paralelo }}<br>
                                                        {% endfor %}
                                                            <br></span>
                                                        <span class="smaller">{{ clase.aula.nombre }}<br></span>
                                                        <span class="smaller label">COMPLEXIVO</span><br>
                                                        <span class="smaller">{{ clase.aula.sede }}<br></span>
                                                    </div>
                                                {% endfor %}
                                            {% endif %}

                                        {% endwith %}
                                    </table>
                                {% endif %}
                            </td>
                        {% endfor %}
                    </tr>
                {% endfor %}
                </tbody>
            </table>
            {% if materiasfaltantes %}
                {% if not bloqueo %}
                    <table class="table table-bordered table-striped">
                        <thead>
                        <tr>
                            <th>Materias aun por a&ntilde;adir</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for materia in materiasfaltantes %}
                            {% if materia.horas_restantes_horario != materia.horassemanales %}
                                <tr>
                                    <td><a href="/adm_criteriosactividadesdocente?action=addclase&nivel={{ nivel.id }}&materia={{ materia.id }}{% if carreraid %}&carreraid={{ carreraid }}{% endif %}{% if nivelmid %}&nivelmid={{ nivelmid }}{% endif %}" class="btn btn-mini btn-success adicionarclase"><i class="fa fa-arrow-up"></i> A&ntilde;adir</a> {{ materia.nombre_completo }} - ({{ materia.horas_restantes_horario|floatformat:0 }} de {{ materia.horassemanales|floatformat:0 }}) [Prof: {{ materia.profesor_principal }}]</td>
                                </tr>
                            {% endif %}
                        {% endfor %}
                        </tbody>
                    </table>
                {% endif %}
            {% endif %}
        </div>
    </div>
    <div class="modal fade static" id="selectdelete" style="min-height: 60px">
        <div class="modal-header">
            <h4 id="paneltitle">Eliminar Actividad</h4>
        </div>
        <div class="modal-body" id="selectdeletepar-body">
            <input type='hidden' id="codigoactividad" name="codigoactividad" value=""/>
            <input type="hidden" name="codigoturno" id="codigoturno" value="0">
            <input type="hidden" name="codigodia" id="codigodia" value="0">
            <p style="margin-top: 10px;">Esta seguro(a) que desea eliminar: <b id="leyenda"></b></p>
        </div>
        <div class="modal-footer">
            <p style="text-align: right; margin-bottom: 0">
                <a href="javascript:;" id="eliminacionmodal_formbutton" class='btn btn-danger btn-form'> {% block botonlabel %}Eliminar{% endblock %}</a>
                <a href="javascript:;" id="eliminacionmodal_cancel" class="btn btn-info"> Cerrar</a>
            </p>
        </div>
    </div>
    <div class="modal fade static" id="itemspanel" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Aprobación de Actividades</h3>
        </div>
        <div class="modal-body panelbody">
            Estado:
            <select class="imp-100" id="id_tipo" name="id_tipo">
                <option value="2">Aprobar</option>
                <option value="3">Rechazar</option>
            </select><br>
            Observación:
            <textarea id="id_observacion" rows="3" cols="40" name="observacion" maxlength="1000" style="width: 100%" class="validate[required]"></textarea>
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td id="aprobarcerrar"><a href="javascript:;" class="btn btn-aprobarcerrar btn-success"> Guardar</a></td>
                    <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>
    {#    <div class="modal fade static" id="itemspaneldesaprobar" style="display: none;">#}
    {#        <div class="modal-header">#}
    {#            <h3 class="paneltitle">Desaprobación de Actividades</h3>#}
    {#        </div>#}
    {#        <div class="modal-body panelbody">#}
    {#            Observación:#}
    {#            <textarea id="id_observacion2" rows="3" cols="40" name="observacion2" maxlength="1000" style="width: 100%" class="validate[required]"></textarea>#}
    {#        </div>#}
    {#        <div class="modal-footer">#}
    {#            <table class="pull-right">#}
    {#                <tr>#}
    {#                    <td id="aprobarcerrardesaprobar"><a href="javascript:;" class="btn btn-aprobarcerrar btn-success"> Guardar</a></td>#}
    {#                    <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a></td>#}
    {#                </tr>#}
    {#            </table>#}
    {#        </div>#}
    {#    </div>#}
    <div class="modal fade static" id="itemspaneldetalle" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Detalle</h3>
        </div>
        <div class="modal-body panelbodydetalle">
            <table class='table table-bordered table-striped'  >
                <thead>
                <tr>
                    <th style="width: 160px">Usuario Aprobación</th>
                    <th style="width: 160px">Observación</th>
                    <th style="width: 100px">Estado</th>
                    <th style="width: 100px">Fecha</th>
                </tr>
                </thead>
                <tbody>
                {% for det in detalleestados %}
                    <tr>
                        <td>{{ det.personaaprueba }}</td>
                        <td>{{ det.obseaprueba }}</td>
                        <td>{{ det.get_estadosolicitud_display }}</td>
                        <td>{{ det.fecha_creacion|date:"Y-m-d" }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>

        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>
    <div class="modal fade static" id="itemspaneltemas" style="display: none;">
            <div class="modal-header">
                <h3 class="paneltitle">Adicionar Actividades</h3>
            </div>
            <div class="modal-body panelbody">
                <div class="alert alert-info incompletotemas" style="display: none;">
                    <i class="fa fa-info-sign"></i> Complete todos los campos para continuar
                </div>
                <div class="alert alert-danger" id="incompletovalorestemas" style="display: none;">
                    <i class="fa fa-info-sign"></i> Revise los valores, la fecha/hora DESDE no debe ser mayor a la fecha/hora HASTA
                </div>
                <div class="alert alert-danger" id="alertaingresotemas" style="display: none;"> NO TIENE ACTIVIDADES</div>
                <div class="row-fluid">
                    <form id="formulario2" class='form-vertical' action="" method="POST" >
                        <select id="idactividad" class="imp-90 tdcorto" style="color: #002a80" name="idactividad">
                            <option value="0_0" >Seleccione la actividad </option>
                        </select>
{#                        <br><br>#}
{#                        <label><b>¿Actividad Virtual? </b>&nbsp; <input type="checkbox" id="actividadvirtual"></label>#}
                        <input type="hidden" name="codturno" id="codturno" value="0">
                        <input type="hidden" name="coddia" id="coddia" value="0">
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <a href="javascript:;" class="btn btn-success" id="adicionarycerraractividad"><i class="fa fa-plus"></i> Adicionar</a>
                <a href="javascript:;" class="btn btn-cerrar btn-info" id="cerrartemas">Cerrar</a>
            </div>
        </div>


{% endblock %}