{% load humanize %}
{% load sga_extras %}
<script>
    var tabdetalleevento = localStorage.getItem('tabdetalleevento');
    if (!tabdetalleevento){
        tabdetalleevento = "#evento";
        localStorage.setItem("tabdetalleevento", tabdetalleevento);
    }

    $('.modeldetalle').each(function(){
        if ($(this).attr('href') == tabdetalleevento){
            $(this).trigger('click');
        }
    }).click(function(){
        localStorage.setItem("tabdetalleevento", $(this).attr('href'));
    });






    document.querySelector('a[href="#evento"]').addEventListener('click', function(e) {
  e.preventDefault();
  var eventoTab = document.querySelector('#evento');
  var activeTabs = document.querySelectorAll('.tab-pane.fade.in.active');
  for (var i = 0; i < activeTabs.length; i++) {
    activeTabs[i].classList.remove('active');
    activeTabs[i].classList.remove('in');
  }
  eventoTab.classList.add('active');
  eventoTab.classList.add('in');
});

    document.querySelector('a[href="#horarioevento"]').addEventListener('click', function(e) {
  e.preventDefault();
  var eventoTab = document.querySelector('#horarioevento');
  var activeTabs = document.querySelectorAll('.tab-pane.fade.in.active');
  for (var i = 0; i < activeTabs.length; i++) {
    activeTabs[i].classList.remove('active');
    activeTabs[i].classList.remove('in');
  }
  eventoTab.classList.add('active');
  eventoTab.classList.add('in');
});



</script>
<style>
    .estilotabla1 {
        border-collapse: collapse;
        border-bottom: 1px solid #ddd;
    }
    .estilocabdeta1 {
        display: block;
    }
    th,td {
        box-sizing: border-box;
    }
    .tbody1 {
        height: 400px;
        overflow-y: scroll
    }





</style>
<div class="container-fluid">
    <div class="row-fluid">
    <div class="span12 estilotabla1" >
        <div class="tabbable tabdetalleevento">
            <ul class="nav nav-tabs">
                <li><a  class="tabs modeldetalle nav-link " id="area" href="#evento" data-toggle="tab" aria-selected="true" >Detalles del evento</a></li>
                <li><a class="tabs modeldetalle nav-link" href="#horarioevento" data-toggle="tab">Horario del evento</a></li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane fade active in" role="tabpanel" id="evento">
                    <table style="width: 100%" class="tabla_responsive table table-hover table-bordered estilocabdeta1 tbody1">
                        <thead>
                        <tr>
                            <th colspan="4">Detalles del evento</th>
                        </tr>
                        </thead>
                        <tr>
                            <td colspan="2"><b>Evento: </b>  {{ evento.capevento}}</td>
                            <td colspan="2"><b>Tipo certificación: </b>  {{ evento.tipocertificacion}}</td>
                        </tr>
                        <tr>
                            <td colspan="2"><b>Responsable: </b>  {{ evento.responsable }}</td>
                            <td colspan="2"><b>Enfoque: </b>  {{ evento.enfoque}}</td>
                        </tr>
                        <tr>
                            <td colspan="2"><b>Modalidad Capacitación: </b>  {{ evento.get_modalidad_display}}</td>
                            <td colspan="2"><b>Tipo capacitación: </b>  {{ evento.tipocapacitacion}}</td>

                        </tr>
                        <tr>
                            <td colspan="2"><b>Aula: </b>  {{ evento.aula }}</td>
                            <td colspan="2"><b>Tipo paticipación: </b>  {{ evento.tipoparticipacion}}</td>
                        </tr>
                        <tr>
                            <td colspan="2"><b>Contexto capacitacion: </b>  {{ evento.contextocapacitacion }}</td>
                            <td colspan="2"><b>Horas: </b> {{ evento.horas}}</td>
                        </tr>
                        <tr>
							<td colspan="2"><b>Encuesta de satisfacción: </b> {% if evento.encuesta %} <span class="badge bg-info">{{ evento.encuesta.nombre|upper }}</span> {% else %}<span class="badge bg-warning">NO APLICA</span>{% endif %}</td>
                            <td colspan="2"><b>Cupo: </b> {{ evento.cupo }}</td>
                        </tr>
                        <tr>
                            <td colspan="4"><b>Area de conocimiento: </b>  {{ evento.areaconocimiento }}</td>
                        </tr>
                        <tr>
                            <td colspan="4"><b>Sub area de conocimiento: </b>  {{ evento.subareaconocimiento }}</td>
                        </tr>
                        <tr>
                            <td colspan="4"><b>Sub area especifica de conocimiento: </b>  {{ evento.subareaespecificaconocimiento }}</td>
                        </tr>
                        <tr>
                            <td colspan="4"><b>Objetivo: </b> {{ evento.limitar_objetivo_presentacion}}</td>
                        </tr>
                        <tr>
                            <td colspan="4"><b>Contenido: </b> {{ evento.limitar_contenido_presentacion|safe}}</td>
                        </tr>
                        <tr>
                            <td colspan="4"><b>Observación: </b> {{ evento.limitar_observacion_presentacion}}</td>
                        </tr>
                        <tr>
                            <td style="width: 25%"><b>Pais: </b> {{ evento.pais }}</td>
                            <td style="width: 25%"><b>Provincia: </b> {{ evento.provincia }}</td>
                            <td style="width: 25%"><b>Canton: </b> {{ evento.canton }}</td>
                            <td style="width: 25%"><b>Parroquia: </b> {{ evento.parroquia }}</td>
                        </tr>
                        <tr>
                            <td style="width: 25%"><b>Fecha inicio: </b> {{ evento.fechainicio|date:'d-m-Y' }}</td>
                            <td style="width: 25%"><b>Fecha fin: </b> {{ evento.fechafin|date:'d-m-Y' }}</td>
                            <td style="width: 25%"><b>Min. Calificación: </b> {{evento.minnota}}</td>
                            <td style="width: 25%"><b>Min. Asistencia: </b> {{evento.minasistencia}}</td>
                        </tr>
                    </table>
                </div>
                <div class="tab-pane fade" role="tabpanel" id="horarioevento">
                    <table style="width: 100%" class="tabla_responsive table table-hover table-bordered estilocabdeta1 tbody1">
                        <thead>
                        <tr>
                            <th> </th>
                            <th style="width: 160px">Lunes</th>
                            <th style="width: 160px">Martes</th>
                            <th style="width: 160px">Miercoles</th>
                            <th style="width: 160px">Jueves</th>
                            <th style="width: 160px">Viernes</th>
                            <th style="width: 160px">Sabado</th>
                            <th style="width: 160px">Domingo</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for turno in evento.turno_horario_evento %}
                            <tr>
                                <td style="text-align: center">{{ turno.nombre_horario }}</td>
                                {% for dia in evento.semana %}
                                    <td>
                                        <table class='tabla_responsive table table-hover table-bordered' style="margin-bottom: 5px">
                                            {% with clases=evento|args:forloop.counter|args:turno|call:"clases_activas_horario" %}
                                                {% for clase in clases %}
                                                    <tr>
                                                        <td>
                                                            {{ clase.capeventoperiodo.concatenar_codigo }}
                                                            <br><span class="smaller label label-info"><b>{{ clase.fechas_horarios }}</b></span>
                                                            {% if clase.capeventoperiodo.identificacion %}
                                                                <b>{{ clase.capeventoperiodo.identificacion }}</b>
                                                            {% endif %}
                                                            <br/>Aula: {{ clase.capeventoperiodo.aula.nombre }}
                                                            <br/>{{ clase.capeventoperiodo.aula.sede }}
                                                        </td>
                                                    </tr>
                                                {% endfor %}
                                            {% endwith %}
                                        </table>
                                    </td>
                                {% endfor %}
                            </tr>
                        {% empty %}
                            <tr>
                                <td colspan="8" style="text-align: center">No existen registros de horarios</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
</div>