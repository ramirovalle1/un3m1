{% extends "ajaxformbs.html" %}
{% load sga_extras %}
{% block heading %}
    <script type="text/javascript">
        var itemsblib =1;
        var lista_items1 = [];
        var obj=0;
        var enf=0;
        var rec=0;
        var eva=0;

        $(function() {
            $("#id_objetivo").css({'text-transform': 'none'});
            $("#id_enfoque").css({'text-transform': 'none'});
            $("#id_recurso").css({'text-transform': 'none'});
            $("#id_evaluacion").css({'text-transform': 'none'});
            $("#id_subtema").css({'text-transform': 'none'});
            $("#id_subtema").addClass("validate[required]");
            $("#id_tema").addClass("validate[required]");
            $("#desplegar_obj").each(function () {
                $(this).trigger('click');
            });

            $(".editar_objetivo").click(function() {
                var id = $(this).attr('ids');
                $.get("/niveles", {'action':'editarobjetivoaprendizaje', 'ids': id}, function(data) {
                    var dato;
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $("#itemspanelo").modal({backdrop:'static', width: '610px'}).modal('show');
                        $("#id_objetivo").val(data.objetivo);
                        $("#idso").val(data.ids);
                    }
                }, 'json');

            });
            $("#itemspanelo .btn-cerrar").click(function() {
                $("#itemspanelo").modal("hide");
            });
            $(".delactividad").click(function() {

                var idacti = $(this).attr('idacti');
                var nomacti = $(this).attr('nomacti');
                var opciondel = $(this).attr('opciondel');
                $("#nomtitulo").html('')
                if(opciondel==1){
                    $("#nomtitulo").html('Eliminar Actividad')
                }
                if(opciondel==2){
                    $("#nomtitulo").html('Eliminar Experiencia')
                }
                if(opciondel==3){
                    $("#nomtitulo").html('Eliminar Lectura')
                }
                if(opciondel==4){
                    $("#nomtitulo").html('Eliminar mas Recursos')
                }
                if(opciondel==5){
                    $("#nomtitulo").html('Eliminar Presencial')
                }
                if(opciondel==6){
                    $("#nomtitulo").html('Eliminar Test')
                }
                if(opciondel==7){
                    $("#nomtitulo").html('Eliminar Silabo Semanal')
                    nomacti = 'Semana #'+nomacti;
                }
                $("#id_codigoactividad").val(idacti)
                $("#id_codigoopcion").val(opciondel)
                $("#id_nomactividad").html(nomacti)
                $("#itemsdelactividad").modal("show");
            });
            $(".eliminaractividad").click(function() {
                var iddelactividad= $("#id_codigoactividad").val()
                var idcodigoopcion= $("#id_codigoopcion").val()
                $.ajax({
                    type: "POST",
                    url: "/niveles",
                    data: {"action": "eliminaractividad", "iddelactividad": iddelactividad, "idcodigoopcion": idcodigoopcion },
                    success: function(data) {
                        if (data.result=='ok'){
                            location.reload();
                            bloqueointerface();
                        }
                    },
                    error: function() {
                        intentos += 1;
                    },
                    dataType: "json"
                });
            });
            $(".delacticerrar").click(function() {
                $("#itemsdelactividad").modal("hide");
            });
            $("#itemspanelo #adicionarobj").click(function(){
                var cont = $("#id_objetivo").val();
                if (cont.length >0) {
                    var ids = $("#idso").val();
                    var formdata = new FormData($("#formobj")[0]);
                    try {
                        formdata.append("objetivo", JSON.stringify(cont));
                    } catch (err){
                        console.log(err.message);
                    }
                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: "/niveles",
                        data: formdata,
                        success: function(data) {
                            if (data.result == 'ok') {
                                bloqueointerface();
                                $("#itemspanelo").modal("hide");
                                location.reload();
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        },
                        error: function() {
                            $.unblockUI();
                            smoke.alert("Error al enviar los datos.");
                        },
                        dataType: "json",
                        cache: false,
                        contentType: false,
                        processData: false
                    });
                }else{
                    smoke.alert("Es obligatirio llenar la información Objetivo Apendizaje");
                }
            });
            $(".editar_enfoque").click(function() {
                var id = $(this).attr('ids');
                $.get("/niveles", {'action':'editenfoquemetodologico', 'ids': id}, function(data) {
                    var dato;
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $("#itemspanelenf").modal({backdrop:'static', width: '610px'}).modal('show');
                        $("#id_enfoque").val(data.enfoque);
                        $("#idse").val(data.ids);
                    }
                }, 'json');

            });
            $("#itemspanelenf .btn-cerrar").click(function() {
                $("#itemspanelenf").modal("hide");
            });
            $("#itemspanelenf #adicionarenf").click(function(){
                var cont = $("#id_enfoque").val();
                if (cont.length >0) {
                    var ids = $("#idse").val();
                    var formdata = new FormData($("#formenf")[0]);
                    try {
                        formdata.append("enfoque", JSON.stringify(cont));
                    } catch (err) {
                        console.log(err.message);
                    }
                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: "/niveles",
                        data: formdata,
                        success: function (data) {
                            if (data.result == 'ok') {
                                bloqueointerface();
                                $("#itemspanelenf").modal("hide");
                                location.reload();
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        },
                        error: function () {
                            $.unblockUI();
                            smoke.alert("Error al enviar los datos.");
                        },
                        dataType: "json",
                        cache: false,
                        contentType: false,
                        processData: false
                    });
                }else{
                    smoke.alert("Es obligatirio llenar la información Enfoque Metodológico");
                }
            });
            $(".editar_recurso").click(function() {
                var id = $(this).attr('ids');
                $.get("/niveles", {'action':'editrecursodidactico', 'ids': id}, function(data) {
                    var dato;
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $("#itemspanelrec").modal({backdrop:'static', width: '610px'}).modal('show');
                        $("#id_recurso").val(data.recurso);
                        $("#idsr").val(data.ids);
                    }
                }, 'json');
            });
            $("#itemspanelrec .btn-cerrar").click(function() {
                $("#itemspanelrec").modal("hide");
            });
            $("#itemspanelrec #adicionarrec").click(function(){
                var cont = $("#id_recurso").val();
                if (cont.length >0) {
                    var ids = $("#idsr").val();
                    var formdata = new FormData($("#formrec")[0]);
                    try {
                        formdata.append("recurso", JSON.stringify(cont));
                    } catch (err){
                        console.log(err.message);
                    }
                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: "/niveles",
                        data: formdata,
                        success: function(data) {
                            if (data.result == 'ok') {
                                bloqueointerface();
                                $("#itemspanelrec").modal("hide");
                                location.href="/niveles?action=planclase&silaboid="+data.ids;
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        },
                        error: function() {
                            $.unblockUI();
                            smoke.alert("Error al enviar los datos.");
                        },
                        dataType: "json",
                        cache: false,
                        contentType: false,
                        processData: false
                    });
                }else{
                    smoke.alert("Es obligatirio llenar la información Recursos Didácticos");
                }
            });

            $(".editar_evaluacion").click(function() {
                var id = $(this).attr('ids');
                $.get("/niveles", {'action':'editevaluacion', 'ids': id}, function(data) {
                    var dato;
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $("#itemspaneleva").modal({backdrop:'static', width: '610px'}).modal('show');
                        $("#id_evaluacion").val(data.evaluacion);
                        $("#idsv").val(data.ids);
                    }
                }, 'json');

            });
            $("#itemspaneleva .btn-cerrar").click(function() {
                $("#itemspaneleva").modal("hide");
            });
            $("#itemspaneleva #adicionareva").click(function(){
                var cont = $("#id_evaluacion").val();
                if (cont.length >0) {
                    var ids = $("#idsv").val();
                    var formdata = new FormData($("#formeva")[0]);
                    try {
                        formdata.append("evaluacion", JSON.stringify(cont));
                    } catch (err){
                        console.log(err.message);
                    }
                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: "/niveles",
                        data: formdata,
                        success: function(data) {
                            if (data.result == 'ok') {
                                bloqueointerface();
                                $("#itemspaneleva").modal("hide");
                                location.href="/niveles?action=planclase&silaboid="+data.ids;
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        },
                        error: function() {
                            $.unblockUI();
                            smoke.alert("Error al enviar los datos.");
                        },
                        dataType: "json",
                        cache: false,
                        contentType: false,
                        processData: false
                    });
                }else{
                    smoke.alert("Es obligatirio llenar la información Evaluación");
                }
            });
            $("#itemspanelduplicar_silabo .btn-cerrar").click(function() {
                $("#itemspanelduplicar_silabo").modal("hide");
            });
            $(".duplicar_silabo").click(function() {
                var id = $(this).attr('ids');
                $.get("/pro_planificacion", {'action':'duplicar_silabo', 'ids': id}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $(".panelbody").html(data.data);
                        $("#itemspanelduplicar_silabo").modal({backdrop:'static', width: '610px'}).modal('show');
                    }
                }, 'json');

            });
            $(".duplicar_silabo_otro_docente").click(function() {
                var id = $(this).attr('ids');
                $.get("/pro_planificacion", {'action':'duplicar_silabo_otro_docente', 'ids': id}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $(".panelbody").html(data.data);
                        $("#itemspanelduplicar_silabo").modal({backdrop:'static', width: '700px'}).modal('show');
                    }
                }, 'json');

            });
            $("#itemspaneldetalle_temas_subtemas .btn-cerrar").click(function() {
                $("#itemspaneldetalle_temas_subtemas").modal("hide");
            });
            $(".detalle_tst_registrar").click(function() {
                var id = $(this).attr('ids');
                $.get("/pro_planificacion", {'action':'detalle_temasxplanificar', 'ids': id}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $(".panelbody").html(data.data);
                        $("#itemspaneldetalle_temas_subtemas").modal({backdrop:'static', width: '1000px'}).modal('show');
                    }
                }, 'json');
            });
            $("#itemspanelplanificacionsalida .btn-cerrar").click(function() {
                $("#itemspanelplanificacionsalida").modal("hide");
            });
            $(".addplanificacionsalida").click(function () {
                var id = $(this).attr('ids');
                $.unblockUI();
                $("#itemspanelplanificacionsalida").modal({backdrop:'static', width: '610px'}).modal('show');
                $("#ids").val(id);
            });
            $("#adicionarplanificacionsalida").click(function () {
                var cont = $("#contenido").val();
                if (cont.length >0) {
                    var ids = $("#ids").val();
                    $.ajax({
                        type: "POST",
                        url: "/pro_planificacion",
                        data: {'action': 'addplanificacion_salida', 'ids': ids, 'cont':cont},
                        success: function (data) {
                            if (data.result == 'ok') {
                                $.unblockUI();
                                bloqueointerface();
                                $("#itemspanelplanificacionsalida").modal("hide");
                                location.href="/pro_planificacion?action=planclase&silaboid="+data.ids;
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        },error: function () {
                            $.unblockUI();
                            control.val(0).trigger("change");
                            smoke.alert("Error de conexion.");
                        },
                        dataType: "json"
                    });
                }else{
                    smoke.alert("Es obligatirio llenar la información de descricripcion de la salida");
                }
            });
            $("#itemspaneleditplanificacionsalida .btn-cerrar").click(function() {
                $("#itemspaneleditplanificacionsalida").modal("hide");
            });
            $(".editplanificacionsemanalsalida").click(function () {
                var id = $(this).attr('ids');
                $.unblockUI();
                $.get("/pro_planificacion", {'action':'editplanificacion_salida', 'ids': id}, function(data) {
                    if (data.result == 'ok') {
                        $("#itemspaneleditplanificacionsalida").modal({backdrop:'static', width: '610px'}).modal('show');
                        $("#id_contenido").val(data.descripcion);
                        $("#ids").val(id);
                    }
                }, 'json');
            });
            $("#editplanificacionsalida").click(function () {
                var cont = $("#id_contenido").val();
                if (cont.length >0) {
                    var id = $("#ids").val();
                    $.ajax({
                        type: "POST",
                        url: "/pro_planificacion",
                        data: {'action': 'editplanificacion_salida', 'ids': id, 'cont':cont},
                        success: function (data) {
                            if (data.result == 'ok') {
                                $.unblockUI();
                                bloqueointerface();
                                $("#itemspanelplanificacionsalida").modal("hide");
                                location.href="/pro_planificacion?action=planclase&silaboid="+data.ids;
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        },error: function () {
                            $.unblockUI();
                            control.val(0).trigger("change");
                            smoke.alert("Error de conexion.");
                        },
                        dataType: "json"
                    });
                }else{
                    smoke.alert("Es obligatirio llenar la información de descricripcion de la salida");
                }
            });
            $("#id_tema").change(function () {
                var id = $(this).val();
                if (id.length > 0){
                    $("#id_subtema").prop( "disabled", false );
                }else{
                    $("#id_subtema").prop( "disabled", true );
                }
                {#                alert(id);#}
            });
            $("#itemspaneladicionarsubtemas .btn-cerrar").click(function() {
                $("#itemspaneladicionarsubtemas").modal("hide");
            });
            $(".adicionarsubtemas").click(function () {
                var id = $(this).attr('ids');
                $.unblockUI();
                $.get("/pro_planificacion", {'action':'adicionar_subtemas', 'ids': id}, function(data) {
                    if (data.results) {
                        $('#id_tema').empty().append('<option value="">---------</option>').val(0).trigger("change");
                        for (elemento in data.listatema) {
                            $('#id_tema').append('<option value="' + data.listatema[elemento][0] + '">' + data.listatema[elemento][1] + '</option>');
                        }
                        $("#itemspaneladicionarsubtemas").modal({backdrop:'static', width: '610px'}).modal('show');
                        $("#ids").val(id);
                        $(".elementosubtema").remove();
                        for (elemento in data.lista){
                            $("#contenidosubtemas").append('<tr class="elementosubtema"  id="fila_' + itemsblib + '">' +
                                '<td style="text-align: center ; display:none" class="idtema">' + data.lista[elemento][0] + '</td>' +
                                '<td width="45%" style="text-align: left;" class="tema">' + data.lista[elemento][1] + '</td>' +
                                '<td width="45%" style="text-align: left;" class="subtema">' + data.lista[elemento][2] + '</td>' +
                                '<td style="text-align:center;" width="5%"><a class="btn btn-mini btn-danger tu eliminarsubtema" title="Eliminar"><i class="fa fa-trash"></i> Eminiar</a></td>' +
                                '</tr>');
                            itemsblib += 1;
                            actualizar_lista_subtemas();
                            eliminar__subtemas();
                        }
                    }
                }, 'json');
            });
            $(".addsubtema").click(function () {
                var idt = $("#id_tema").val();
                var tema = $("#id_tema option:selected").text();
                var subtema = $("#id_subtema").val();
                if (subtema.length>0) {
                    if (leer_lista_subtemas(subtema) == 0) {
                        $("#contenidosubtemas").append('<tr class="elementosubtema"  id="fila_' + itemsblib + '">' +
                            '<td style="text-align: center ; display:none" class="idtema">' + idt + '</td>' +
                            '<td width="45%" style="text-align: left;" class="tema">' + tema + '</td>' +
                            '<td width="45%" style="text-align: left;" class="subtema">' + subtema + '</td>' +
                            '<td style="text-align:center;" width="5%"><a class="btn btn-mini btn-danger tu eliminarsubtema" title="Eliminar"><i class="fa fa-trash"></i> Eminiar</a></td>' +
                            '</tr>');
                        itemsblib += 1;
                        actualizar_lista_subtemas();
                        eliminar__subtemas();
                        $("#adicionarsubtema").prop( "disabled", false );
                    }
                    else {
                        smoke.alert("El subtema ya se encuentra registrado");
                    }
                    document.getElementById('id_subtema').value = '';
                }
            });
            actualizar_lista_subtemas = function () {
                lista_items1 = [];
                $(".elementosubtema").each(function () {
                    var item = {
                        idtema: $(this).find(".idtema").html(),
                        tema: $(this).find(".tema").html(),
                        subtema: $(this).find(".subtema").html()
                    };
                    lista_items1.push(item);
                });
            };
            eliminar__subtemas = function () {
                $(".eliminarsubtema").unbind();
                $(".eliminarsubtema").click(function () {
                    var padre = $(this).parent().parent();
                    padre.remove();
                    actualizar_lista_subtemas();
                });
            };
            $(".btn-adicionarsubtema").click(function () {
                var id = $("#ids").val();
                if (lista_items1.length>0) {
                    $.ajax({
                        type: "POST",
                        url: "/pro_planificacion",
                        data: {'action': 'addsubtemasadicional', 'ids': id, 'lista': JSON.stringify(lista_items1)},
                        success: function (data) {
                            if (data.result == 'ok') {
                                $.unblockUI();
                                bloqueointerface();
                                $("#itemspaneladicionarsubtemas").modal("hide");
                                location.href = "/pro_planificacion?action=planclase&silaboid=" + data.ids;
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        }, error: function () {
                            $.unblockUI();
                            control.val(0).trigger("change");
                            smoke.alert("Error de conexion.");
                        },
                        dataType: "json"
                    });
                }else{
                    $("#itemspaneladicionarsubtemas").modal("hide");
                }
            });
            $("#itemspanelimportar_silabo_periodo .btn-cerrar").click(function() {
                $("#itemspanelimportar_silabo_periodo").modal("hide");
            });
            $(".duplicar_silabo_periodo").click(function() {
                var ids = $(this).attr('ids');
                var semana = $(this).attr('semana');
                var numsemana = $(this).attr('numsemana');
                var fini = $(this).attr('fini');
                var ffin = $(this).attr('ffin');
                $.post("/pro_planificacion", {'action':'duplicar_silabo_otro_periodo', 'ids': ids, 'semana':semana, 'numsemana':numsemana, 'fini':fini, 'ffin':ffin}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $(".panelbody").html(data.data);
                        $("#itemspanelimportar_silabo_periodo").modal({backdrop:'static', width: '750px'}).modal('show');
                    }
                }, 'json');
            });

            $("#desplegar_obj").each(function () {
                obj = desplegar(1,obj, 'desplegar_obj');
            });
            $("#desplegar_enf").each(function () {
                enf = desplegar(2,enf, 'desplegar_enf');
            });
            $("#desplegar_rec").each(function () {
                rec = desplegar(3,rec, 'desplegar_rec');
            });
            $("#desplegar_eva").each(function () {
                eva = desplegar(4,eva, 'desplegar_eva');
            });

            $("#desplegar_obj").click(function () {
                obj = desplegar(1,obj, 'desplegar_obj');
            });
            $("#desplegar_enf").click(function () {
                enf = desplegar(2,enf, 'desplegar_enf');
            });
            $("#desplegar_rec").click(function () {
                rec = desplegar(3,rec, 'desplegar_rec');
            });
            $("#desplegar_eva").click(function () {
                eva = desplegar(4,eva, 'desplegar_eva');
            });
            $(".editobjetivo").change(function () {
                var obj = $(this).val();
                var id = $(this).attr('ids');
                bloqueointerface();
                $.post("/pro_planificacion", {'action':'editobjetivoact', 'id': id, 'obj':obj}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                    }
                    else{
                        smoke.alert(data.mensaje);
                    }
                }, 'json');
            });
            $(".editenfoque").change(function () {
                var enf = $(this).val();
                var id = $(this).attr('ids');
                bloqueointerface();
                $.post("/niveles", {'action':'editenfoqueact', 'id': id, 'enf':enf}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                    }
                    else{
                        smoke.alert(data.mensaje);
                    }
                }, 'json');
            });
            $(".editrecurso").change(function () {
                var rec = $(this).val();
                var id = $(this).attr('ids');
                bloqueointerface();
                $.post("/niveles", {'action':'editrecursoact', 'id': id, 'rec':rec}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                    }
                    else{
                        smoke.alert(data.mensaje);
                    }
                }, 'json');
            });
            $(".editevaluacion").change(function () {
                var eval = $(this).val();
                var id = $(this).attr('ids');
                bloqueointerface();
                $.post("/niveles", {'action':'editevaluacionact', 'id': id, 'eval':eval}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                    }
                    else{
                        smoke.alert(data.mensaje);
                    }
                }, 'json');
            });
            $("#itemspanellink .btn-cerrar").click(function() {
                $("#itemspanellink").modal("hide");
            });
            $(".editrecursolink").click(function() {
                var id = $(this).attr('ids');
                $.post("/niveles", {'action':'listarecursolink', 'id': id}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $(".panelbodylink").html(data.data);
                        $(".itemspanellink").modal({backdrop:'static', width: '700px'}).modal('show');
                    }
                }, 'json');
            });
            $(".actualizar_horas").click(function () {
                bloqueointerface();
                $.post("/niveles", {'action':'actualizar_horas', 'id': {{silabocab.id }}}, function(data) {
                    if (data.result == 'ok') {
                        bloqueointerface();
                        location.href='/niveles?action=planclase&silaboid={{ silabocab.id|encrypt }}';
                        $.unblockUI();
                    }else{
                        smoke.alert("Error al actualizar las horas")
                    }
                }, 'json');
            });


            $(".verobservaciones").click(function() {
                var obstec = $(this).attr('obstec');
                var obsacad = $(this).attr('obsacad');
                var estadocumplimiento = $(this).attr('estc');
                $("#observaciontecnica").val("");
                $("#observacionacademida").val("");
                $("#estadocumplimiento").val("");
                $("#observaciontecnica").val(obstec);
                $("#observacionacademida").val(obsacad);
                $("#estadocumplimiento").val(estadocumplimiento);
                $("#modalobservacion").modal({backdrop:'static', width: '610px'}).modal('show');
            });
            $("#modalobservacion .cerrar_modalobservacion").click(function() {
                $("#observaciontecnica").val("");
                $("#observacionacademida").val("");
                $("#estadocumplimiento").val("");
                $("#modalobservacion").modal("hide");
            });
        });
        function desplegar(id, aux, nombre) {
            if (aux == 0){
                $(".collapse"+id).collapse('hide');
                $("#"+nombre).parent().find(".fa").removeClass("fa-chevron-up").addClass("fa-chevron-down");
                aux=1;
            }else{
                $(".collapse"+id).collapse('show');
                $("#"+nombre).parent().find(".fa").removeClass("fa-chevron-down").addClass("fa-chevron-up");
                aux=0;
            }
            return aux;
        }
        function leer_lista_subtemas(subtema) {
            var ban=0;
            for (i=0;i<lista_items1.length;i++){
                if (subtema == lista_items1[i]['subtema']){
                    ban = 1;
                    return;
                }else {
                    ban = 0;
                }
            }
            return ban;
        }
        function vistaprevia(idproprag){
            openwindow('POST' ,'/niveles', {action:'silabopdf',id:idproprag}, '_blank');
        }

    </script>
{% endblock %}
{% block atras %}/niveles?action=silabovirtual&idm={{ silabocab.materia.id|encrypt }}&idmallavirtual={{ idmalla|encrypt }}{% endblock %}
{% block canvas %}
    <div class='row-fluid'>
        <div class='span12'>
            <h4>{{ title }}</h4>
            <h4>Profesor: {{ profesor }}</h4>
            <h4>Asignatura: {{ silabocab.materia.id }} {{ silabocab.materia.asignaturamalla }} - {{ silabocab.materia.paralelo }}</h4>
        </div>
    </div>
    <div class='row-fluid'>
        <div class='span12'>
            {% if panalitico != 0 %}
{#                {% if silabocab.estado_planificacion_clases >= 100 %}#}
                    <a class="btn btn-warning" onclick="vistaprevia('{{ silabocab.id|encrypt }}')" href="javascript:;"><i class="fa fa-print"></i>&nbsp; Imprimir Sílabo</a>
{#                {% endif %}#}
            {% else %}
                {% if pruede_modificar %}
                    {% if silabocab.tiene_materia_duplicadas %}
                        {% if silabocab.tiene_materia_fecha_igual %}
                            <a ids="{{ silabocab.id|encrypt }}" href="javascript:;" class='btn btn-info tu duplicar_silabo'><i class="fa fa-clone"></i> Importar Sílabo</a>
                        {% endif %}
                    {% endif %}
                    {% if silabocab.silabos_para_duplicar and not silabocab.tiene_silabo_semanal %}
                        <a ids="{{ silabocab.id|encrypt }}" href="javascript:;" class='btn btn-inverse tu duplicar_silabo_otro_docente'><i class="fa fa-copy"></i> Importar sílabo de otro docente</a>
                    {% endif %}
                {% endif %}
            {% endif %}
        </div>
    </div>
    {#    <div class="row-fluid">#}
    {#        <div {% if silabocab.estado_planificacion_clases >= 100 %} class="alert alert-success" {% else %} class="alert alert-error"{% endif %} id="mensajeevidencia" style="text-align: justify;font-size: 12px">#}
    {#            {% if silabocab.estado_planificacion_clases >= 100 %}#}
    {#                <strong>* Los temas planificados corresponden al 100% del programa analítico.</strong><br>#}
    {#            {% else %}#}
    {#                <strong>* Los temas planificados corresponden al {{ silabocab.estado_planificacion_clases }}% del programa analítico. Tiene temas pendientes por planificar. El botón imprimir se habilitará cuando se registre toda la planificación.</strong> {% if silabocab.estado_planificacion_clases > 80 %}( <u><a ids="{{ silabocab.id|encrypt }}" href="javascript:;" class="detalle_tst_registrar">Temas pendientes de planificar</a></u>){% endif %}<br>#}
    {#            {% endif %}#}
    {#        </div>#}
    {#    </div>#}
    <div class='row-fluid'>
        <div class='span12'>
            <table class='table table-bordered table-striped' >
                <thead>
                <tr>
                    <th colspan="12">ASIGNATURA: {{ silabocab.materia.asignatura.nombre }}</th>
                </tr>
                <tr>
                    {#                    <th style="width: 70px;text-align: center;">Semana<br><a class="btn btn-success btn-mini actualizar_horas tu" title="Actualizar horas"><i class="fa fa-refresh"></i></a></th>#}
                    <th style="width: 70px;text-align: center;">Semana</th>
                    <th style="text-align: center;width: 200px;">Temas / Subtemas</th>
                    <th style="text-align: center;width: 200px;">Bibliografía</th>
                    <th style="text-align: center;width: 200px;">Objetivo</th>
                    <th style="text-align: center;width: 200px;">Enfoque</th>
                    <th style="text-align: center;width: 200px;">Actividades</th>
                    <th style="text-align: center;width: 200px;">Experiencia </th>
                    <th style="text-align: center;width: 100px;">Lecturas</th>
                    <th style="text-align: center;width: 100px;">Más recursos</th>
                    <th style="text-align: center;width: 100px;">Presencial Virtual</th>
                    <th style="text-align: center;width: 100px;">Test</th>
                    <th style="text-align: center;width: 28px;">Acciones</th>
                </tr>
                </thead>
                <tbody>
                {% for fecha in fechas %}
                    <tr>
                        {% with semanaadicional=silabocab|args:fecha.1|args:fecha.2|call:'semana_adicional' cronograma_silabo=silabocab|args:fecha.1|args:fecha.2|call:'cronograma_silabo' numero_semana=silabocab|args:fecha.1|args:fecha.2|call:'cronograma_silabo_n_semana' %}
                            <td style="text-align: center; width: 65px;">Semana
                                {{ forloop.counter  }}<br> {{ fecha.1|date:"Y-m-d" }} <br>{{ fecha.2|date:"Y-m-d" }}<br>
                                {% if fecha.4.estado == 1 %}
                                    <span class="label label-success">{{ fecha.4.get_estado_display }}</span>
                                {% elif sem.estado == 2 %}
                                    <span class="label label-important">{{ fecha.4.get_estado_display }}</span>
                                {% else %}
                                    <span class="label label-warning">{{ fecha.4.get_estado_display }}</span>
                                {% endif %}
                                {%  if fecha.4.observaciontecnica or fecha.4.observacionacademica  %}
                                    <a class="btn btn-mini btn-info tu verobservaciones" obstec="{{ fecha.4.observaciontecnica }}" obsacad="{{ fecha.4.observacionacademica }}" estc="{{ fecha.4.get_estadocumplimiento_display|default_if_none:"" }}" href="#" title="Observaciones"><span class="fa fa-eye"></span></a>
                                {% endif %}
                            </td>
                            <td width="200px">
                                {% if fecha.3 > 0 %}
                                    {% with temasselec=fecha.4|call:'temas_seleccionados_planclase' %}
                                        {#                                        {% if fecha.4.estado == 2 or fecha.4.estado == 3 %}#}
                                        {% if temasselec %}
                                            <a href="/niveles?action=editsemanasilabotemas&codigosilabo={{ fecha.4.id|encrypt }}&idmallavirtual={{ idmalla|encrypt }}&fini={{ fecha.1|date:"Y-m-d"  }}&ffin={{ fecha.2|date:"Y-m-d"  }}" href="javascript:;" class='tu' title='Editar mis temas y subtemas'><i class="fa fa-edit"></i></a>
                                        {% else %}
                                            {% if fecha.4 %}
                                                <a href="/niveles?action=editsemanasilabotemas&codigosilabo={{ fecha.4.id|encrypt }}&idmallavirtual={{ idmalla|encrypt }}&fini={{ fecha.1|date:"Y-m-d"  }}&ffin={{ fecha.2|date:"Y-m-d"  }}" href="javascript:;" class='tu' title='Editar mis temas y subtemas'><i class="fa fa-edit"></i></a>
                                            {% else %}
                                                <a class="btn btn-mini btn-success tu" href="/niveles?action=addsemanaplanificacionvirtual&idsilabo={{ silabocab.id|encrypt }}&idmallavirtual={{ idmalla|encrypt }}&semana={{ fecha.0|encrypt  }}&numsemana={{ forloop.counter|encrypt  }}&fini={{ fecha.1|date:"Y-m-d"  }}&ffin={{ fecha.2|date:"Y-m-d"  }}" title="Adicionar"><span class="fa fa-plus"></span></a>
                                            {% endif %}
                                        {% endif %}
                                        {#                                        {% endif %}#}
                                        <div style="max-height: 250px; overflow-y: auto; overflow-x: hidden;">
                                            {% with unidades=fecha.4|call:'unidades_silabosemanal' %}
                                                {% for uni in unidades %}
                                                    <b>UNIDAD {{ uni.temaunidadresultadoprogramaanalitico.unidadresultadoprogramaanalitico.orden }}: {{ uni.temaunidadresultadoprogramaanalitico.unidadresultadoprogramaanalitico.descripcion }}</b><br>
                                                    {% with temasselec=fecha.4|args:uni.temaunidadresultadoprogramaanalitico.unidadresultadoprogramaanalitico.id|call:'temas_silabosemanal' %}
                                                        {% for temassel in temasselec %}
                                                            <dt style="font-weight: normal;">
                                                                <ul>
                                                            <dt style="font-weight: normal;"><b>TEMA: {{ temassel.temaunidadresultadoprogramaanalitico.orden }}.-</b> {{ temassel.temaunidadresultadoprogramaanalitico.descripcion }}</dt>
                                                            <ul>
                                                                {% with subtemasselec=fecha.4|args:temassel.temaunidadresultadoprogramaanalitico|call:'subtemas_silabosemanal' %}
                                                                    {% if subtemasselec %}
                                                                        {% for subtemassel in subtemasselec %}
                                                                            <dt style="font-weight: normal;"><b>SUBTEMA: {{ subtemassel.subtemaunidadresultadoprogramaanalitico.orden }}.-</b> {{ subtemassel.subtemaunidadresultadoprogramaanalitico.descripcion }}</dt>
                                                                        {% endfor %}
                                                                    {% endif %}
                                                                {% endwith %}
                                                            </ul>
                                                            </dt>
                                                        {% endfor %}
                                                    {% endwith %}
                                                {% endfor %}
                                            {% endwith %}
                                        </div>
                                    {% endwith %}
                                {% else %}
                                    {#                                    {% if fecha.4.estado == 2 or fecha.4.estado == 3 %}#}
                                    <a style="color: green" href="/niveles?action=addsemanaplanificacionvirtual&idsilabo={{ silabocab.id|encrypt }}&idmallavirtual={{ idmalla|encrypt }}&semana={{ fecha.0|encrypt  }}&numsemana={{ forloop.counter|encrypt  }}&fini={{ fecha.1|date:"Y-m-d"  }}&ffin={{ fecha.2|date:"Y-m-d"  }}" title="Adicionar"><span class="fa fa-plus"></span></a>
                                    {#                                    {% endif %}#}
                                {% endif %}
                            </td>
                        {% endwith %}
                        <td width="200px">
                            {% if fecha.3 > 0 %}
                                <div style="text-align: left">
                                    <a style="color: green" href="/niveles?action=addbibliografia&codigosemana={{ fecha.4.id|encrypt }}&idmallavirtual={{ idmalla|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar actividad'><i class="fa fa-plus"></i></a>
                                </div>
                                {% with librosvirtuales=fecha.4|call:'bibliografia_virtual' %}
                                    {% if  librosvirtuales %}
                                        <a href="/niveles?action=editbibliografia&ids={{ fecha.3|encrypt }}&idmallavirtual={{ idmalla|encrypt }}" href="javascript:;" class='tu' title='Editar Bibliografía'><i class="fa fa-edit"></i></a>
                                        <div class="accordion" id="accordiont{{ fecha.3|encrypt }}">
                                            <div class="accordion-group">
                                                <div class="accordion-heading">
                                                    <a data-toggle="collapse" data-parent="#accordiont{{ fecha.3|encrypt }}" href="#collapseVirt{{ fecha.3|encrypt }}"> <span class="fa fa-list"></span>  Bibliografía Virtual(cita APA)</a>
                                                </div>
                                                <div id="collapseVirt{{ fecha.3|encrypt }}" class="accordion-body collapse in">
                                                    <table class='table table-striped table-bordered'>
                                                        <tbody>
                                                        {% for bvirtual in librosvirtuales %}
                                                            <tr>
                                                                <td style="width: 15px">
                                                                    {% with tieneapro=silabocab|call:'tiene_aprobaciones' %}
                                                                        {% if pruede_modificar %}
                                                                            {% if tieneapro %}
                                                                                {% with estadoaprobacion=silabocab|call:'estado_aprobacion' %}
                                                                                    {%  if estadoaprobacion %}
                                                                                        {% if not estadoaprobacion.estadoaprobacion == aprobar %}
                                                                                            <a class="btn btn-mini btn-danger eliminacionmodal tu" href="javascript:;" nhref="/niveles?action=delbibliografiavirtual&ids={{ fecha.3|encrypt }}&idv={{ bvirtual.id|encrypt }}"><i class="fa fa-trash"></i></a>
                                                                                        {% endif %}
                                                                                    {% endif %}
                                                                                {% endwith %}
                                                                            {% else %}
                                                                                <a class="btn btn-mini btn-danger eliminacionmodal tu" href="javascript:;" nhref="/niveles?action=delbibliografiavirtual&ids={{ fecha.3|encrypt }}&idv={{ bvirtual.id|encrypt }}"><i class="fa fa-trash"></i></a>
                                                                            {% endif %}
                                                                        {% endif %}
                                                                    {% endwith %}
                                                                </td>
                                                                <td style="max-width: 100px;">
                                                                    <span class="fa fa-book"></span> {{ bvirtual.bibliografia|linebreaksbr }}
                                                                </td>
                                                            </tr>
                                                        {% endfor %}
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    {% endif %}
                                {% endwith %}
                            {% endif %}
                        </td>
                        <td width="200px">
                            {% if fecha.3 > 0 %}
                                <div style="text-align: left">
                                    <a ids="{{ fecha.3|encrypt }}" href="javascript:;" class='tu editar_objetivo' title='Editar Objetivo Apendizaje'><i class="fa fa-edit"></i></a>
                                </div>
                                {% if fecha.4.objetivoaprendizaje %}
                                    {% with tieneapro=silabocab|call:'tiene_aprobaciones' estadoaprobacion=silabocab|call:'estado_aprobacion' %}
{#                                        {% if pruede_modificar %}#}
{#                                            {% if tieneapro %}#}
{#                                                {%  if estadoaprobacion %}#}
{#                                                    {% if not estadoaprobacion.estadoaprobacion == aprobar %}#}
{#                                                        <a ids="{{ fecha.3|encrypt }}" href="javascript:;" class='tu editar_objetivo' title='Editar Objetivo Apendizaje'><i class="fa fa-edit"></i></a>#}
{#                                                    {% endif %}#}
{#                                                {% endif %}#}
{#                                            {% else %}#}
{#                                                <a ids="{{ fecha.3|encrypt }}" href="javascript:;" class='tu editar_objetivo' title='Editar Objetivo Apendizaje'><i class="fa fa-edit"></i></a>#}
{#                                            {% endif %}#}
{#                                        {% endif %}#}
{#                                        <a ids="{{ fecha.3|encrypt }}" href="javascript:;" class='tu editar_objetivo' title='Editar Objetivo Apendizaje'><i class="fa fa-edit"></i></a>#}
                                        <div class="accordion" id="accordionob{{ fecha.3|encrypt }}">
                                            <div class="accordion-group">
                                                <div class="accordion-heading">
                                                    <a data-toggle="collapse" data-parent="#collapseTree{{ fecha.3|encrypt }}" href="#collapseTree{{ fecha.3|encrypt }}"> <span class="fa fa-list"></span>  Objetivo de aprendizaje</a>
                                                </div>
                                                <div id="collapseTree{{ fecha.3|encrypt }}" class="accordion-body collapse1 in">
{#                                                    <textarea class="editobjetivo"  ids="{{ fecha.3|encrypt }}" style="width: 180px;" rows="7" >{{ fecha.4.objetivoaprendizaje }}</textarea>#}
                                                    {{ fecha.4.objetivoaprendizaje }}
                                                </div>
                                            </div>
                                        </div>
                                    {% endwith %}
                                {% endif %}
                            {% endif %}
                        </td>
                        <td width="200px">
                            {% if fecha.3 > 0 %}
                                <div style="text-align: left">
                                    <a ids="{{ fecha.3|encrypt }}" href="javascript:;" class='tu editar_enfoque' title='Editar Enfoque Metodológico'><i class="fa fa-edit"></i></a>
                                </div>
                                {% if fecha.4.enfoque %}
                                    {% with tieneapro=silabocab|call:'tiene_aprobaciones' estadoaprobacion=silabocab|call:'estado_aprobacion' %}
{#                                        {% if pruede_modificar %}#}
{#                                            {% if tieneapro %}#}
{#                                                {%  if estadoaprobacion %}#}
{#                                                    {% if not estadoaprobacion.estadoaprobacion == aprobar %}#}
{#                                                        <a ids="{{ fecha.9|encrypt }}" href="javascript:;" class='tu editar_enfoque' title='Editar Enfoque Metodológico'><i class="fa fa-edit"></i></a>#}
{#                                                    {% endif %}#}
{#                                                {% endif %}#}
{#                                            {% else %}#}
{#                                                <a ids="{{ fecha.3|encrypt }}" href="javascript:;" class='tu editar_enfoque' title='Editar Enfoque Metodológico'><i class="fa fa-edit"></i></a>#}
{#                                            {% endif %}#}
{#                                        {% endif %}#}

                                        <div class="accordion" id="accordionef{{ fecha.9|encrypt  }}">
                                            <div class="accordion-group">
                                                <div class="accordion-heading">
                                                    <a data-toggle="collapse" data-parent="#collapseFour{{ fecha.3|encrypt  }}" href="#collapseFour{{ fecha.3|encrypt  }}"> <span class="fa fa-list"></span>  Enfoque Metodológico</a>
                                                </div>
                                                <div id="collapseFour{{ fecha.3|encrypt  }}" class="accordion-body collapse2 in">
{#                                                    <textarea class="editenfoque"  ids="{{ fecha.3|encrypt }}" style="width: 180px" rows="7" {% if pruede_modificar %}{%  if estadoaprobacion %} {% if estadoaprobacion.estadoaprobacion == aprobar %}disabled {% endif %}{% endif %}{% else %}disabled{% endif %}>{{ fecha.4.enfoque }}</textarea>#}
                                                   {{ fecha.4.enfoque }}
                                                </div>
                                            </div>
                                        </div>
                                    {% endwith %}
                                {% endif %}
                            {% endif %}
                        </td>
                        <td width="200px">
                            {% if fecha.3 > 0 %}
                                {#                                {% if fecha.4.estado == 2 or fecha.4.estado == 3 %}#}
                                <div style="text-align: left">
                                    <a style="color: green" href="/niveles?action=addsemanasilaboactividad&codigosemana={{ fecha.4.id|encrypt }}&idmallavirtual={{ idmalla|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar actividad'><i class="fa fa-plus"></i></a>
                                </div>
                                {#                                {% endif %}#}
                                {% for tipoact in tipoactividad %}
                                    {% with actividad=fecha.4|args:tipoact.0|call:'actividad_silabosemanal' %}
                                        {% if actividad %}
                                            <div class="label label-info" style="width: 100%"><strong>{{ tipoact.1 }}</strong></div>
                                            {% for acti in actividad %}
                                                <dt style="font-weight: normal;">
                                                    {#                                                    {% if fecha.4.estado == 2 or fecha.4.estado == 3 %}#}
                                                    <a href="/niveles?action=editsemanasilaboactividad&codigoactividad={{ acti.id|encrypt }}&idmallavirtual={{ idmalla|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Editar actividad'><i class="fa fa-edit"></i></a>
                                                    <a style="color: red" href="#" class='tu delactividad' idacti="{{ acti.id|encrypt }}" nomacti="{{ acti.nombre }}" opciondel="1" title='Eliminar actividad'><i class="fa fa-remove"></i></a>
                                                    {#                                                    {% endif %}#}
                                                    {{ forloop.counter }}) {{ acti.nombre }}
                                                </dt>
                                            {% endfor %}
                                        {% endif %}
                                    {% endwith %}
                                {% endfor %}
                            {% endif %}
                        </td>
                        <td width="200px">
                            {% if fecha.3 > 0 %}
                                {#                                {% if fecha.4.estado == 2 or fecha.4.estado == 3 %}#}
                                <div style="text-align: left">
                                    <a style="color: green" href="/niveles?action=addsemanasilabocasopractico&codigosemana={{ fecha.4.id|encrypt }}&idmallavirtual={{ idmalla|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar caso práctico'><i class="fa fa-plus"></i></a>
                                </div>
                                {#                                {% endif %}#}
                                {% for tlink in tipolink %}
                                    {% with casospracticos=fecha.4|args:tlink.0|call:'casospracticos_silabosemanalvirtual' %}
                                        {% if casospracticos %}
                                            <div class="label label-info" style="width: 100%"><strong>{{ tlink.1 }}</strong></div>
                                            {% for casos in casospracticos %}
                                                <dt style="font-weight: normal;">
                                                    {#                                                    {% if fecha.4.estado == 2 or fecha.4.estado == 3 %}#}
                                                    <a href="/niveles?action=editsemanasilabocasopractico&codigocaso={{ casos.id|encrypt }}&idmallavirtual={{ idmalla|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Editar caso práctico'><i class="fa fa-edit"></i></a>
                                                    <a style="color: red" href="#" class='tu delactividad' idacti="{{ casos.id|encrypt }}" nomacti="{{ casos.nombre }}" opciondel="2" title='Eliminar experiencia'><i class="fa fa-remove"></i></a>
                                                    {#                                                    {% endif %}#}
                                                    {{ forloop.counter }}) {{ casos.nombre }}
                                                </dt>
                                            {% endfor %}
                                        {% endif %}
                                    {% endwith %}
                                {% endfor %}
                            {% endif %}
                        </td>
                        <td width="100px">
                            {% if fecha.3 > 0 %}
                                {#                                {% if fecha.4.estado == 2 or fecha.4.estado == 3 %}#}
                                <div style="text-align: left">
                                    <a style="color: green"  href="/niveles?action=addsemanasilabolecturas&codigosemana={{ fecha.4.id|encrypt }}&idmallavirtual={{ idmalla|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar lectura'><i class="fa fa-plus"></i></a>
                                </div>
                                {#                                {% endif %}#}
                                <div style="text-align: center">
                                    {% for tlink in tipolink %}
                                        {% with listalecturas=fecha.4|args:tlink.0|call:'lecturas_silabosemanalvirtual' %}
                                            {% if listalecturas %}
                                                <div class="label label-info" style="width: 100%"><strong>{{ tlink.1 }}</strong></div>
                                                {% for lec in listalecturas %}
                                                    <dt style="font-weight: normal;">
                                                        {#                                                        {% if fecha.4.estado == 2 or fecha.4.estado == 3 %}#}
                                                        <a href="/niveles?action=editsemanasilabolecturas&codigolectura={{ lec.id|encrypt }}&idmallavirtual={{ idmalla|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Editar lectura'><i class="fa fa-edit"></i></a>
                                                        <a style="color: red" href="#" class='tu delactividad' idacti="{{ lec.id|encrypt }}" nomacti="{{ lec.nombre }}" opciondel="3" title='Eliminar lectura'><i class="fa fa-remove"></i></a>
                                                        {#                                                        {% endif %}#}
                                                        {{ forloop.counter }}) {{ lec.nombre }}
                                                    </dt>
                                                {% endfor %}
                                            {% endif %}
                                        {% endwith %}
                                    {% endfor %}
                                </div>
                            {% endif %}
                        </td>
                        <td width="100px">
                            {% if fecha.3 > 0 %}
                                {#                                {% if fecha.4.estado == 2 or fecha.4.estado == 3 %}#}
                                <div style="text-align: left">
                                    <a style="color: green"  href="/niveles?action=addsemanasilaborecurso&codigosemana={{ fecha.4.id|encrypt }}&idmallavirtual={{ idmalla|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar mas recursos'><i class="fa fa-plus"></i></a>
                                </div>
                                {#                                {% endif %}#}
                                <div style="text-align: center">
                                    {% for recu in tiporecurso %}
                                        {% with listarecursos=fecha.4|args:recu.0|call:'masrecurso_silabosemanalvirtual' %}
                                            {% if listarecursos %}
                                                <div class="label label-info" style="width: 100%"><strong>{{ recu.1 }}</strong></div>
                                                <div style="text-align: left">
                                                    {% for recur in listarecursos %}
                                                        {#                                                        {% if fecha.4.estado == 2 or fecha.4.estado == 3 %}#}
                                                        <a href="/niveles?action=editsemanasilaborecurso&codigorecurso={{ recur.id|encrypt }}&idmallavirtual={{ idmalla|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Editar recurso'><i class="fa fa-edit"></i></a>
                                                        <a style="color: red" href="#" class='tu delactividad' idacti="{{ recur.id|encrypt }}" nomacti="{{ recur.nombre }}" opciondel="4" title='Eliminar recurso'><i class="fa fa-remove"></i></a>
                                                        {#                                                        {% endif %}#}
                                                        {{ forloop.counter }}) {{ recur.nombre }}<br>
                                                    {% endfor %}
                                                </div>
                                            {% endif %}
                                        {% endwith %}
                                    {% endfor %}
                                </div>
                            {% endif %}
                        </td>
                        <td width="100px">
                            {% if fecha.3 > 0 %}
                                {% with listapresencial=fecha.4|call:'presencial_silabosemanalvirtual' %}
                                    {% for pre in listapresencial %}
                                        {#                                        {% if fecha.4.estado == 2 or fecha.4.estado == 3 %}#}
                                        <a href="/niveles?action=editsemanasilabopresencial&codigopresencial={{ pre.id|encrypt }}&idmallavirtual={{ idmalla|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Editar presencial virtual'><i class="fa fa-edit"></i></a>
                                        <a style="color: red" href="#" class='tu delactividad' idacti="{{ pre.id|encrypt }}" nomacti="{{ pre.descripcion }}" opciondel="5" title='Eliminar presencial'><i class="fa fa-remove"></i></a>
                                        {#                                        {% endif %}#}
                                        {{ forloop.counter }}) <a href="{{ pre.link }}" target=""> {{ pre.descripcion }}</a><br>
                                    {% endfor %}
                                {% endwith %}
                                {#                                {% if fecha.4.estado == 2 or fecha.4.estado == 3 %}#}
                                <a style="color: green"  href="/niveles?action=addsemanasilabopresencial&codigosemana={{ fecha.4.id|encrypt }}&idmallavirtual={{ idmalla|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar presencial virtual'><i class="fa fa-plus"></i></a>
                                {#                                {% endif %}#}
                            {% endif %}
                        </td>
                        <td width="100px">
                            {% if fecha.3 > 0 %}
                                {% with listatest=fecha.4|call:'test_silabosemanalvirtual' %}
                                    {% if listatest %}
                                        {% for test in listatest %}
                                            {#                                            {% if fecha.4.estado == 2 or fecha.4.estado == 3 %}#}
                                            <a href="/niveles?action=editsemanasilabotest&codigotest={{ test.id|encrypt }}&idmallavirtual={{ idmalla|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Editar test'><i class="fa fa-edit"></i></a>
                                            <a style="color: red" href="#" class='tu delactividad' idacti="{{ test.id|encrypt }}" nomacti="{{ test.descripcion }}" opciondel="6" title='Eliminar presencial'><i class="fa fa-remove"></i></a>
                                            {#                                            {% endif %}#}
                                            {{ forloop.counter }}<a href="{{ test.link }}" target="_blank"> {{ test.descripcion }}</a><br>
                                        {% endfor %}
                                    {% endif %}
                                {% endwith %}
                                {#                                {% if fecha.4.estado == 2 or fecha.4.estado == 3 %}#}
                                <a style="color: green"  href="/niveles?action=addsemanasilabotest&codigosemana={{ fecha.4.id|encrypt }}&idmallavirtual={{ idmalla|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar test'><i class="fa fa-plus"></i></a>
                                {#                                {% endif %}#}
                            {% endif %}
                        </td>
                        <td style="text-align: center">
                            {% if not fecha.4 %}
                                <a class="btn btn-danger btn-mini tu" href="/niveles?action=addsemanaplanificacionvirtual&idsilabo={{ silabocab.id|encrypt }}&idmallavirtual={{ idmalla|encrypt }}&semana={{ fecha.0|encrypt  }}&numsemana={{ forloop.counter|encrypt  }}&fini={{ fecha.1|date:"Y-m-d"  }}&ffin={{ fecha.2|date:"Y-m-d"  }}" ><span class="fa fa-plus"></span>Adicionar</a>
                            {% else %}
                                {% if fecha.4.estado == 2 or fecha.4.estado == 3 %}
                                    {% if fecha.4 %}
                                        <a href="#" class='btn btn-danger btn-mini tu delactividad' title="Eliminar" idacti="{{ fecha.4.id|encrypt }}" nomacti="{{ fecha.4.numsemana }}" opciondel="7" ><i class="fa fa-remove"></i></a>
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                            {%  if silabocab.materia.coordinacion.id == 9 or silabocab.materia.nivel.modalidad.id == 3 %}
                                <br><br><br>
                                <a class='btn btn-inverse btn-mini tu' title="Adicionar Observación" href="/niveles?action=addobservacionseguimiento&idsilabo={{ silabocab.id|encrypt }}&idmallavirtual={{ idmalla|encrypt }}&semana={{ fecha.0|encrypt  }}&numsemana={{ forloop.counter|encrypt  }}&fini={{ fecha.1|date:"Y-m-d"  }}&ffin={{ fecha.2|date:"Y-m-d"  }}&idact={{ fecha.4.id|encrypt }}" ><span class="fa fa-plus"></span> </a>
                                <br><br><br>
                                <a class='btn btn-warning btn-mini tu' title="Ver recursos" href="/niveles?action=detalles_recurso_tutor_semanal&idsilabo={{ silabocab.id|encrypt }}&id={{ fecha.4.id|encrypt }}&idmallavirtual={{ idmalla|encrypt }}" ><span class="fa fa-eye"></span> </a>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <div class="modal fade static" id="itemspanelo" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Editar Objetivo de Apendizaje</h3>
        </div>
        <div class="modal-body" style="display: inline-block;">
            <div class="row-fluid">
                <form id="formobj" name="formobj" class="form-vertical form-modal" style="width: 580px;">
                    <input type='hidden'  name='action' value='editarobjetivoaprendizaje'/>
                    <input type='hidden'  name='idso'  id="idso"/>
                    <label>Objetivo Aprendizaje</label>
                    <textarea maxlength="1000" rows="5" id="id_objetivo" style="text-align: justify"></textarea>
                </form>
            </div>
        </div>
        <div class="modal-footer">
            <a href="javascript:;" id="adicionarobj" class="btn btn-adicionar btn-success"> Guardar</a>
            <a href="javascript:;" class="btn btn-cerrar btn-info"> Cerrar</a>
        </div>
    </div>
    <div class="modal fade static" id="itemspanelenf" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Editar Enfoque Metodológico</h3>
        </div>
        <div class="modal-body" style="display: inline-block;">
            <div class="row-fluid">
                <form id="formenf" name="formenf" class="form-vertical form-modal" style="width: 580px;">
                    <input type='hidden'  name='action' value='editenfoquemetodologico'/>
                    <input type='hidden'  name='idse'  id="idse"/>
                    <label>Objetivo Aprendizaje</label>
                    <textarea maxlength="1000" rows="5" id="id_enfoque" style="text-align: justify"></textarea>
                </form>
            </div>
        </div>
        <div class="modal-footer">
            <a href="javascript:;" id="adicionarenf" class="btn btn-adicionar btn-success"> Guardar</a>
            <a href="javascript:;" class="btn btn-cerrar btn-info"> Cerrar</a>
        </div>
    </div>
    <div class="modal fade static" id="itemspanelrec" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Editar Recursos Didácticos</h3>
        </div>
        <div class="modal-body" style="display: inline-block;">
            <div class="row-fluid">
                <form id="formrec" name="formrec" class="form-vertical form-modal" style="width: 580px;">
                    <input type='hidden'  name='action' value='editrecursodidactico'/>
                    <input type='hidden'  name='idsr'  id="idsr"/>
                    <label>Recursos Didácticos</label>
                    <textarea maxlength="1000" rows="5" id="id_recurso" style="text-align: justify"></textarea>
                </form>
            </div>
        </div>
        <div class="modal-footer">
            <a href="javascript:;" id="adicionarrec" class="btn btn-adicionar btn-success"> Guardar</a>
            <a href="javascript:;" class="btn btn-cerrar btn-info"> Cerrar</a>
        </div>
    </div>
    <div class="modal fade static" id="itemspaneleva" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Editar Evaluación</h3>
        </div>
        <div class="modal-body" style="display: inline-block;">
            <div class="row-fluid">
                <form id="formeva" name="formeva" class="form-vertical form-modal" style="width: 580px;">
                    <input type='hidden'  name='action' value='editevaluacion'/>
                    <input type='hidden'  name='idsv'  id="idsv"/>
                    <label>Evaluación</label>
                    <textarea maxlength="1000" rows="5" id="id_evaluacion" style="text-align: justify"></textarea>
                </form>
            </div>
        </div>
        <div class="modal-footer">
            <a href="javascript:;" id="adicionareva" class="btn btn-adicionar btn-success"> Guardar</a>
            <a href="javascript:;" class="btn btn-cerrar btn-info"> Cerrar</a>
        </div>
    </div>
    <div class="modal fade static itemspanelduplicar_silabo" id="itemspanelduplicar_silabo" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Sílabos que puede importar</h3>
        </div>
        <div class="modal-body panelbody">

        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>
    <div class="modal fade static" id="itemspaneldetalle_temas_subtemas" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Temas y subtemas por reguistrar</h3>
        </div>
        <div class="modal-body panelbody">

        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>
    <div class="modal fade static" id="itemspanelplanificacionsalida" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Adicionar gira de clase</h3>
        </div>
        <div class="modal-body" style="display: inline-block;">
            <div class="row-fluid">
                <form id="formsalida" name="formsalida" class="form-vertical form-modal" style="width: 580px;">
                    <input type='hidden'  name='action' value='addplanificacionsalida'/>
                    <input type='hidden'  name='ids'  id="ids"/>
                    <label>Descripción </label>
                    <textarea rows="4" id="contenido" style="text-align: justify"></textarea>
                </form>
            </div>
        </div>
        <div class="modal-footer">
            <a href="javascript:;" id="adicionarplanificacionsalida" class="btn btn-adicionar btn-success"> Guardar</a>
            <a href="javascript:;" class="btn btn-cerrar btn-info"> Cerrar</a>
        </div>
    </div>
    <div class="modal fade static" id="itemspaneleditplanificacionsalida" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Editar gira de clase</h3>
        </div>
        <div class="modal-body" style="display: inline-block;">
            <div class="row-fluid">
                <form id="formsalida" name="formsalida" class="form-vertical form-modal" style="width: 580px;">
                    <input type='hidden'  name='ids'  id="ids"/>
                    <label>Descripción </label>
                    <textarea rows="4" id="id_contenido"style="text-align: justify"></textarea>
                </form>
            </div>
        </div>
        <div class="modal-footer">
            <a href="javascript:;" id="editplanificacionsalida" class="btn btn-adicionar btn-success"> Guardar</a>
            <a href="javascript:;" class="btn btn-cerrar btn-info"> Cerrar</a>
        </div>
    </div>
    <div class="modal fade static" id="itemspaneladicionarsubtemas" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Adicionar Sub Temas</h3>
        </div>
        <div class="modal-body" style="display: inline-block;">
            <div class="row-fluid">
                <form id="formsalida" name="formsubtemas" class="form-vertical form-modal" style="width: 580px;">
                    <span>Tema: </span>
                    <select id="id_tema" class="selector" name="tema" style="width: 92%">
                    </select><br><br>
                    <input type='hidden' name='ids' id="ids"/>
                    <table class="table table-bordered" border="0" width="100%" style="background-color: transparent">
                        <tr>
                            <td border="0" style="background-color: transparent">
                                <label><b>Sub Tema</b></label>
                            </td>
                        </tr>
                        <tr>
                            <td border="0" style="background-color: transparent">
                                <textarea rows="2" id="id_subtema"style="text-align: justify; width: 100%;" maxlength="150"></textarea><br>
                                <span class="obligatorio" style="color: red"></span>
                            </td>
                            <td style="text-align: right; background-color: transparent" width="8%" border="0">
                                <a href="javascript:;" class="btn btn-success addsubtema"><i class="fa fa-plus"></i></a>
                            </td>
                        </tr>
                    </table>
                </form>
                <div style="margin: 0px;overflow-y:auto;height:150px;">
                    <table class="table table-bordered table-condensed">
                        <thead>
                        <tr>
                            <th style="text-align: left">Tema</th>
                            <th style="text-align: left">Subtema</th>
                            <th style="text-align: left">Acciones</th>
                        </tr>
                        </thead>
                        <tbody id="contenidosubtemas">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <a href="javascript:;" id="adicionarsubtema" class="btn btn-adicionarsubtema btn-success"> Guardar</a>
            <a href="javascript:;" class="btn btn-cerrar btn-info"> Cerrar</a>
        </div>
    </div>
    <div class="modal fade static itemspanelimportar_silabo_periodo" id="itemspanelimportar_silabo_periodo" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Sílabos que puede importar de otros periodos</h3>
        </div>
        <div class="modal-body panelbody"></div>
        <div class="modal-footer" style="margin-top: -15px">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>

    <div class="modal fade static itemspanellink" id="itemspanellink" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Editar recursos didácticos (link de youtube, etc)</h3>
        </div>
        <div class="modal-body panelbodylink">

        </div>
        <div class="modal-footer">
            <a href="javascript:;" id="adicionarlink" class="btn btn-success adicionarlink"> Guardar</a>
            <a href="javascript:;" class="btn btn-cerrar btn-info"> Cerrar</a>
        </div>
    </div>
    <div class="modal fade static" id="itemsdelactividad" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle" id="nomtitulo"></h3>
        </div>
        <div class="modal-body panelbody">
            <input id="id_codigoactividad" name="id_codigoactividad" type="hidden">
            <input id="id_codigoopcion" name="id_codigoopcion" type="hidden">
            <div id="id_nomactividad"></div>
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-danger eliminaractividad">Eliminar</a></td>
                    <td><a href="javascript:;" class="btn btn-default delacticerrar">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>

    <div class="modal fade static" id="modalobservacion" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle" >Observaciones</h3>
        </div>
        <div class="modal-body panelbody">
            <label> Técnica</label>
            <textarea id="observaciontecnica" rows="3" cols="40" name="observación técnica" maxlength="1000" style="width: 100%" disabled></textarea>
            <label> Académica</label>
            <textarea id="observacionacademida" rows="3" cols="40" name="observación cadémica" maxlength="1000" style="width: 100%" disabled></textarea>
            <label> Cumplimiento</label>
            <input type='text' name='action' id="estadocumplimiento" value='' disabled/>
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-default cerrar_modalobservacion">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>
{% endblock %}