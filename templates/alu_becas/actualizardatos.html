{% extends "basebs.html" %}
{% load sga_extras %}
{% block heading %}
    <script type="text/javascript" src='/static/js/select2.js?v=1.0.0' ></script>
    <script type="text/javascript" src="/static/js/bootstrap-filestyle.min.js"> </script>
    <link type='text/css' rel='stylesheet' href="/static/css/select2.css?v=1.0.0"/>
    <script type="text/javascript">
        $(function() {
            $("select").select2({minimumResultsForSearch: 5 });

            tipobeca = {{ tipobeca }};
            isPersonaExterior = ('{{ isPersonaExterior }}'.toLowerCase() === 'true');
            paisper = parseInt('{{ inscripcion.persona.pais.id }}');
            provper = parseInt('{{ inscripcion.persona.provincia.id }}');
            cantonper = parseInt('{{ inscripcion.persona.canton.id }}');
            parrper = parseInt('{{ inscripcion.persona.parroquia.id }}');
            entidadbancaria = parseInt('{{ cuentabancaria.banco.id }}');


            cargar_pais = function () {
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/api",
                    data: {'a': 'paises'},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            estaselec = false;
                            for (elemento in data.lista) {
                                selecc = '';
                                if(estaselec == false){
                                    idpais = parseInt(data.lista[elemento][0]);
                                    if(paisper == idpais){
                                        estaselec = true;
                                        selecc='selected';
                                    }
                                }
                                $('#pais').append('<option value="' + data.lista[elemento][0] + '" '+selecc+'>' + data.lista[elemento][1] + '</option>');
                            }
                            $("#pais").val(paisper).trigger("change");
                        } else {
                            control.val(0).trigger("change");
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        control.val(0).trigger("change");
                        smoke.alert("Error de conexion.");
                    },
                    dataType: "json"
                });
            };

            $('#pais').change(function(){
                $('#provincia, #canton, #parroquia').empty().append('<option value="">---------</option>').val(0).trigger("change");
                var control = $(this);
                var id = parseInt($("#pais").val());
                if (id > 0) {
                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: "/api",
                        data: {'a': 'provincias', 'id': id},
                        success: function (data) {
                            $.unblockUI();
                            if (data.result == 'ok') {
                                estaselec = false;
                                for (elemento in data.lista) {
                                    selecc = '';
                                    if(estaselec == false){
                                        idprov = parseInt(data.lista[elemento][0]);
                                        if(provper == idprov){
                                            estaselec = true;
                                            selecc='selected';
                                        }
                                    }
                                    $('#provincia').append('<option value="' + data.lista[elemento][0] + '" '+selecc+'>' + data.lista[elemento][1] + '</option>');
                                }
                                $("#provincia").val(provper).trigger("change");
                            } else {
                                control.val(0).trigger("change");
                                smoke.alert(data.mensaje);
                            }
                        },
                        error: function () {
                            $.unblockUI();
                            control.val(0).trigger("change");
                            smoke.alert("Error de conexion.");
                        },
                        dataType: "json"
                    });
                }
            });

            $('#provincia').change(function(){
                $('#canton, #parroquia').empty().append('<option value="">---------</option>').val(0).trigger("change");
                var control = $(this);
                var id = parseInt($("#provincia").val());
                if (id > 0) {
                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: "/api",
                        data: {'a': 'cantones', 'id': id},
                        success: function (data) {
                            $.unblockUI();
                            if (data.result == 'ok') {
                                estaselec = false;
                                for (elemento in data.lista) {
                                    selecc = '';
                                    if(estaselec == false){
                                        idcanton = parseInt(data.lista[elemento][0]);
                                        if(cantonper == idcanton){
                                            estaselec = true;
                                            selecc='selected';
                                        }
                                    }
                                    $('#canton').append('<option value="' + data.lista[elemento][0] + '" '+selecc+'>' + data.lista[elemento][1] + '</option>');
                                }
                                $("#canton").val(cantonper).trigger("change");
                            } else {
                                control.val(0).trigger("change");
                                smoke.alert(data.mensaje);
                            }
                        },
                        error: function () {
                            $.unblockUI();
                            control.val(0).trigger("change");
                            smoke.alert("Error de conexion.");
                        },
                        dataType: "json"
                    });
                }
            });

            $('#canton').change(function(){
                $('#parroquia').empty().append('<option value="">---------</option>').val(0).trigger("change");
                var control = $(this);
                var id = $("#canton").val();
                if (id > 0){
                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: "/api",
                        data: {'a': 'parroquias', 'id': id},
                        success: function(data) {
                            $.unblockUI();
                            if (data.result == 'ok') {
                                estaselec = false;
                                for (elemento in data.lista){
                                    selecc = '';
                                    if(estaselec == false){
                                        idparr = parseInt(data.lista[elemento][0]);
                                        if(parrper == idparr){
                                            estaselec = true;
                                            selecc='selected';
                                        }
                                    }
                                    $('#parroquia').append('<option value="'+data.lista[elemento][0]+'" '+selecc+'>'+data.lista[elemento][1]+'</option>');
                                }
                                $("#parroquia").val(parrper).trigger("change");
                            } else {
                                control.val(0).trigger("change");
                                smoke.alert(data.mensaje);
                            }
                        },
                        error: function() {
                            $.unblockUI();
                            control.val(0).trigger("change");
                            smoke.alert("Error de conexion.");
                        },
                        dataType: "json"
                    });
                }
            });

            bloquear_controles_equipo = function(){
                $("#laptop").attr('disabled','disabled').removeAttr('checked');
                $("#pc").attr('disabled','disabled').removeAttr('checked');
                $("#smartphone").attr('disabled','disabled').removeAttr('checked');
                $("#tablet").attr('disabled','disabled').removeAttr('checked');
                $("#otro").attr('disabled','disabled').removeAttr('checked');
                $("#descripcionotro").attr('disabled','disabled');
                $("#descripcionotro").val('');
            };

            bloquear_controles_internet = function(){
                $("#proveedor").attr('disabled','disabled');
                $("#proveedor").val('0').trigger('change');
                $("#capacidad").attr('disabled','disabled');
                $("#capacidad").val('');
            };

            desbloquear_controles_equipo = function(){
                $("#laptop").removeAttr('disabled');
                $("#pc").removeAttr('disabled');
                $("#smartphone").removeAttr('disabled');
                $("#tablet").removeAttr('disabled');
                $("#otro").removeAttr('disabled');
            };

            desbloquear_controles_internet = function(){
                $("#proveedor").removeAttr('disabled');
                $("#capacidad").removeAttr('disabled');
            };

            chequeaFormulario = function() {
                if ($("#otro").is(':checked')) {
                    $("#descripcionotro").removeAttr('disabled');
                } else {
                    $("#descripcionotro").attr('disabled','disabled');
                    $("#descripcionotro").val('');
                }
            };

            $('#tieneequipo').change(function(){
                var control = $(this);
                valor = parseInt(control.val());
                if(valor == 1){
                    desbloquear_controles_equipo();
                }else{
                    bloquear_controles_equipo();
                }
            });

            $('#tieneinternet').change(function(){
                var control = $(this);
                valor = parseInt(control.val());
                if(valor == 1){
                    desbloquear_controles_internet();
                }else{
                    bloquear_controles_internet();
                }
            });

            cargar_pais();
            bloquear_controles_equipo();
            bloquear_controles_internet();

            $("#otro").click(chequeaFormulario);

            $('#celular, #cuentabancaria').blur(function(){
                digitos($(this));
            });

            $('#btnguardar').click(function () {
                pais = $("#pais").val();
                provincia = $("#provincia").val();
                canton = $("#canton").val();
                parroquia = $("#parroquia").val();
                casa = $("#numerocasa").val().trim();
                sector = $("#sector").val().trim();
                direccion1 = $("#direccion1").val().trim();
                direccion2 = $("#direccion2").val().trim();
                referencia = $("#referencia").val().trim();
                telefonofijo = $("#telefono").val().trim();
                celular = $("#celular").val().trim();
                operadora = $("#operadora").val();
                cedulaestudiante =  $("#cedulaestudiante").val()?$("#cedulaestudiante").get(0).files.length:0;
                //certificadoestudiante = $("#certificadoestudiante").get(0).files.length
                actagrado = 0;
                if(tipobeca == 16)
                    actagrado = $("#actagradoestudiante").get(0).files.length;

                serviciobasico = 0;
                if(tipobeca == 22 && isPersonaExterior == true)
                    serviciobasico = $("#serviciobasico").val()?$("#serviciobasico").get(0).files.length:0;

                raza = 0;
                if(tipobeca == 21)
                    raza = $("#raza").val()?$("#raza").get(0).files.length:0;

                archivodiscapacidad = 0;
                if(tipobeca == 19)
                    archivodiscapacidad =$("#archivodiscapacidad").val()?$("#archivodiscapacidad").get(0).files.length:0;

                deporteentrena = 0;
                deporteevento = 0;
                if(tipobeca == 20 && {% if  deportista.estadoarchivoentrena  in estado_no_cargardocumentos %}false{% else %}true{% endif %}) { //deportista.estadoarchivoentrena != 2
                    deporteentrena = $("#archivodeporteentrena").get(0).files.length;
                }
                if(tipobeca == 20 && {% if  deportista.estadoarchivoevento  in estado_no_cargardocumentos %}false{% else %}true{% endif %}){
                    deporteevento= $("#archivodeporteentrena").get(0).files.length;
                }
                console.log('Hola ...', deporteentrena)
                banco = $("#banco").val();
                cuenta = $("#cuentabancaria").val() ?$("#cuentabancaria").val().trim():'';
                tipocuenta = $("#tipocuenta").val();
                certificadobancario =0;
                {% if cuentabancaria.estadorevision != 2 %}
                   certificadobancario = $("#certificadobancario").get(0).files.length;
                {% endif %}
                if(datoscompletos(pais,provincia,canton,parroquia,sector,casa,direccion1,direccion2,referencia,telefonofijo,celular,operadora,cedulaestudiante,actagrado,banco,cuenta,tipocuenta,certificadobancario,serviciobasico,raza, archivodiscapacidad, deporteentrena, deporteevento)){
                    bloqueointerface();

                    var formdata = new FormData($("#formulario")[0]);
                    $.ajax({
                        type: "POST",
                        url: "/alu_becas",
                        data: formdata,
                        success: function(data) {
                            $.unblockUI();
                            if (data.result=='ok'){
                                {#smoke.alert("Registro grabado con exito "+id);#}
                                location.href = "/alu_becas";
                            } else {
                                Swal.fire({
                                        title: `NOTIFICACIÓN`,
                                        text: data.mensaje,
                                        type: 'error',
                                        icon: 'error',
                                        showCancelButton: false,
                                        allowOutsideClick: false,
                                        confirmButtonColor: '#3085d6',
                                        cancelButtonColor: '#d33',
                                        confirmButtonText: 'Aceptar',
                                    });
                            }
                        },
                        error: function(jqXHR, textStatus, errorThrown) {
                            $.unblockUI();
                            {#smoke.alert("Error de conexión.");#}
                            var msg = '';
                            if (jqXHR.status === 0) {
                                msg='Not connect: Verify Network.';
                            } else if (jqXHR.status == 404) {
                                msg='Requested page not found [404]';
                            } else if (jqXHR.status == 500) {
                                msg='Internal Server Error [500].';
                            } else if (textStatus === 'parsererror') {
                                msg='Requested JSON parse failed.';
                            } else if (textStatus === 'timeout') {
                                msg='Time out error.';
                            } else if (textStatus === 'abort') {
                                msg='Ajax request aborted.';
                            } else {
                                msg='Uncaught Error: ' + jqXHR.responseText;
                            }
                            smoke.alert("Error: " + msg);
                        },
                        dataType: "json",
                        cache: false,
                        contentType: false,
                        processData: false
                    });
                }
            });

            datoscompletos = function (pais,provincia,canton,parroquia,sector,casa,direccion1,direccion2,referencia,telefonofijo,celular,operadora,cedulaestudiante,actagrado,banco,cuenta,tipocuenta,certificadobancario,serviciobasico, raza, archivodiscapacidad, deporteentrena, deporteevento) {
                if(pais == ''){
                    smoke.alert("Seleccione el país del domicilio");
                    return false;
                }
                if(provincia == ''){
                    smoke.alert("Seleccione la provincia del domicilio");
                    return false;
                }
                if(canton == ''){
                    smoke.alert("Seleccione el cantón del domicilio");
                    return false;
                }
                if(tipobeca != 22 && isPersonaExterior == false){
                    if(parroquia == ''){
                        smoke.alert("Seleccione la parroquia del domicilio");
                        return false;
                    }
                    if(sector == ''){
                        smoke.alert("Ingrese el sector del domicilio");
                        return false;
                    }
                }


                if(direccion1 == ''){
                    smoke.alert("Ingrese la calle principal del domicilio");
                    return false;
                }
                if(direccion2 == ''){
                    smoke.alert("Ingrese la calle secundaria del domicilio");
                    return false;
                }
                if(referencia == ''){
                    smoke.alert("Ingrese una referencia del domicilio");
                    return false;
                }
                if(celular == ''){
                    smoke.alert("Ingrese un número de celular");
                    return false;
                }

                if(celular.length < 10 || celular.length > 13){
                    smoke.alert("El número de celular debe tener 10 a 13 dígitos");
                    return false;
                }
                if(operadora == '0'){
                    smoke.alert("Seleccione la operadora");
                    return false;
                }

                if(cedulaestudiante == 0 && {% if  documentopersonal.estadocedula in estado_no_cargardocumentos or documentopersonal.cedula %}false{% else %}true{% endif %}){
                    smoke.alert("Debe agregar el documento PDF de cédula del estudiante");
                    return false;
                }
                /*if(certificadoestudiante == 0 && {% if  documentopersonal.papeleta%}false{% else %}true{% endif %}){
                    smoke.alert("Debe agregar el documento PDF de certificado de votación del estudiante");
                    return false;
                }*/
                if(actagrado == 0 && tipobeca == 16){
                    smoke.alert("Debe agregar el documento PDF del acta de grado del estudiante");
                    return false;
                }

                if (serviciobasico == 0 && tipobeca == 22 && isPersonaExterior == true && {% if documentopersonal.estadoserviciosbasico in estado_no_cargardocumentos or documentopersonal.serviciosbasico %}false{% else %}true{% endif %}){
                    smoke.alert("Debe agregar el documento PDF de servicios básicos");
                    return false;
                }

                if (raza == 0 && tipobeca == 21 && {% if perfil.estadoarchivoraza in estado_no_cargardocumentos or perfil.archivoraza %}false{% else %}true{% endif %}){
                    smoke.alert("Debe agregar el documento PDF de declaración juramentada");
                    return false;
                }

                if (archivodiscapacidad == 0 && tipobeca == 19 && {% if perfil.estadoarchivodiscapacidad in estado_no_cargardocumentos or perfil.archivo%}false{% else %}true{% endif %}){
                    smoke.alert("Debe agregar el documento PDF de certificación de discapacidad");
                    return false;
                }
                if(banco == '0' && {% if  cuentabancaria.estadorevision in estado_no_cargardocumentos %}false{% else %}true{% endif %}){
                    smoke.alert("Seleccione la entidad bancaria");
                    return false;
                }
                {% if not cuentabancaria.estadorevision in estado_no_cargardocumentos%}
                    if(cuenta == ''){
                        smoke.alert("Ingrese el número de cuenta bancaria");
                        return false;
                    }
                    if(cuenta.length < 5){
                        smoke.alert("El número de cuenta bancaria debe tener mínimo 5 dígitos");
                        return false;
                    }
                    if(tipocuenta == '0'){
                        smoke.alert("Seleccione el tipo de cuenta");
                        return false;
                    }
                    if(certificadobancario == 0 && {% if  cuentabancaria.estadorevision in estado_no_cargardocumentos or cuentabancaria.archivo%}false{% else %}true{% endif %}){
                        smoke.alert("Debe agregar el documento PDF del certificado bancario del estudiante");
                        return false;
                    }
                {% endif %}
                return true;
            };

            $('#cedulaestudiante, #certificadoestudiante, #certificadobancario').change(function () {
                var maxSize = 4;
                var ext = ($(this)[0].files[0].type);
                var fileSize = ($(this)[0].files[0].size / 1024 / 1024); //size in MB

                if(!validaextension(ext)){
                    smoke.alert('Solo se permiten archivos PDF.');
                    $(this).filestyle('clear');
                }

                if (fileSize > maxSize) {
                    smoke.alert("El archivo pesa más de "+maxSize+" Mb");
                    $(this).filestyle('clear');
                }
            });

            {% if tipobeca == 16 %}
                $('#actagradoestudiante').change(function () {
                    var maxSize = 4;
                    var ext = ($(this)[0].files[0].type);
                    var fileSize = ($(this)[0].files[0].size / 1024 / 1024); //size in MB

                    if(!validaextension(ext)){
                        smoke.alert('Solo se permiten archivos PDF.');
                        $(this).filestyle('clear');
                    }

                    if (fileSize > maxSize) {
                        smoke.alert("El archivo pesa más de "+maxSize+" Mb");
                        $(this).filestyle('clear');
                    }
                });
            {% endif %}
            {% if tipobeca == 22 and isPersonaExterior %}
                $('#serviciobasico').change(function () {
                    var maxSize = 4;
                    var ext = ($(this)[0].files[0].type);
                    var fileSize = ($(this)[0].files[0].size / 1024 / 1024); //size in MB

                    if(!validaextension(ext)){
                        smoke.alert('Solo se permiten archivos PDF.');
                        $(this).filestyle('clear');
                    }

                    if (fileSize > maxSize) {
                        smoke.alert("El archivo pesa más de "+maxSize+" Mb");
                        $(this).filestyle('clear');
                    }
                });
            {% endif %}
            {% if tipobeca == 21 %}
                $('#raza').change(function () {
                    var maxSize = 4;
                    var ext = ($(this)[0].files[0].type);
                    var fileSize = ($(this)[0].files[0].size / 1024 / 1024); //size in MB

                    if(!validaextension(ext)){
                        smoke.alert('Solo se permiten archivos PDF.');
                        $(this).filestyle('clear');
                    }

                    if (fileSize > maxSize) {
                        smoke.alert("El archivo pesa más de "+maxSize+" Mb");
                        $(this).filestyle('clear');
                    }
                });
            {% endif %}
            {% if tipobeca == 19 %}
                $('archivodiscapacidad').change(function () {
                    var maxSize = 4;
                    var ext = ($(this)[0].files[0].type);
                    var fileSize = ($(this)[0].files[0].size / 1024 / 1024); //size in MB

                    if(!validaextension(ext)){
                        smoke.alert('Solo se permiten archivos PDF.');
                        $(this).filestyle('clear');
                    }

                    if (fileSize > maxSize) {
                        smoke.alert("El archivo pesa más de "+maxSize+" Mb");
                        $(this).filestyle('clear');
                    }
                });
            {% endif %}
            {% if tipobeca == 20 %}
                $('#archivodeporteevento').change(function () {
                    var maxSize = 4;
                    var ext = ($(this)[0].files[0].type);
                    var fileSize = ($(this)[0].files[0].size / 1024 / 1024); //size in MB

                    if(!validaextension(ext)){
                        smoke.alert('Solo se permiten archivos PDF.');
                        $(this).filestyle('clear');
                    }

                    if (fileSize > maxSize) {
                        smoke.alert("El archivo pesa más de "+maxSize+" Mb");
                        $(this).filestyle('clear');
                    }
                });
                $('#archivodeporteentrena').change(function () {
                    var maxSize = 4;
                    var ext = ($(this)[0].files[0].type);
                    var fileSize = ($(this)[0].files[0].size / 1024 / 1024); //size in MB

                    if(!validaextension(ext)){
                        smoke.alert('Solo se permiten archivos PDF.');
                        $(this).filestyle('clear');
                    }

                    if (fileSize > maxSize) {
                        smoke.alert("El archivo pesa más de "+maxSize+" Mb");
                        $(this).filestyle('clear');
                    }
                });
            {% endif %}

            validaextension = function(extension){
                switch (extension) {
                    case 'application/pdf':
                        break;
                    case 'application/x-pdf':
                        break;
                    case 'pdf/application':
                        break;
                    case 'binary/octet-stream':
                        break;
                    case 'application/x-octetstream':
                        break;
                    case 'application/x-download':
                        break;
                    case 'application/download':
                        break;
                    case 'application/xdownload':
                        break;
                    case 'application/force-download':
                        break;
                    default:
                        return false;
                }
                return true;
            };

            {#$("#pais").prop('disabled',true);#}
            $("#operadora").val('{{ inscripcion.persona.tipocelular }}').trigger('change');

            $(".solo-digitos").bind("keypress", function (e) {
                var keyCode = e.which ? e.which : e.keyCode
                if (!(keyCode >= 48 && keyCode <= 57)) {
                    //$(".error").css("display", "inline");
                    return false;
                }else{
                    //$(".error").css("display", "none");
                }
            });

            $('.capacidad').blur(function(){
                numerico($(this), 0, 9999999999, 0);
            });


        });
    </script>
{% endblock %}
{% block atras %}/{% endblock %}
{% block canvas %}
    <div class='row-fluid'>
        <div class='span12'>
            {#            <h4>{{ title }}<br>#}
            {#                {{ title2 }}<br>#}
            {#            </h4>#}
            <h4>{{ title }}</h4> <br>
        </div>
    </div>
    <div class='row-fluid'>
        <div class='span12'>
            <form name="formulario" id="formulario">
                <input type='hidden' name='action' value='actualizardatos'/>
                <table class='table table-bordered table-striped'>
                    <tr>
                        <td colspan="6"><strong>Datos del domicilio y localización del Estudiante</strong></td>
                    </tr>
                    <tr>
                        <td><strong>País:</strong></td>
                        <td>
                            <select id="pais" name="pais">
                                <option value="">---------</option>
                            </select>
                        </td>
                        <td><strong>Provincia:</strong></td>
                        <td>
                            <select id="provincia" name="provincia">
                                <option value="">---------</option>
                            </select>
                        </td>
                        <td><strong>Cantón:</strong></td>
                        <td>
                            <select id="canton" name="canton">
                                <option value="">---------</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td><strong>Parroquia:</strong></td>
                        <td>
                            <select id="parroquia" name="parroquia">
                                <option value="">---------</option>
                            </select>
                        </td>
                        <td><strong>Sector:</strong></td>
                        <td><input class="input-xlarge" style="text-align: left; text-transform: uppercase" maxlength="300" id="sector" name="sector" type="text" value="{{ inscripcion.persona.sector }}"></td>
                        <td><strong>N° Casa:</strong></td>
                        <td><input class="input-xlarge" style="text-align: left; text-transform: uppercase" maxlength="15" id="numerocasa" name="numerocasa" type="text" value="{{ inscripcion.persona.num_direccion }}"></td>
                    </tr>
                    <tr>
                        <td><strong>Calle Principal:</strong></td>
                        <td><input class="input-xlarge" style="text-align: left; text-transform: uppercase" maxlength="300" id="direccion1" name="direccion1" type="text" value="{{ inscripcion.persona.direccion }}" ></td>
                        <td><strong>Calle Secundaria:</strong></td>
                        <td><input class="input-xlarge" style="text-align: left; text-transform: uppercase" maxlength="300" id="direccion2" name="direccion2" type="text" value="{{ inscripcion.persona.direccion2 }}" ></td>
                        <td><strong>Referencia:</strong></td>
                        <td><input class="input-xlarge" style="text-align: left; text-transform: uppercase" maxlength="100" id="referencia" name="referencia" type="text" value="{{ inscripcion.persona.referencia }}" ></td>
                    </tr>
                    <tr>
                        <td><strong>Teléfono (Fijo):</strong></td>
                        <td><input class="input-xlarge" style="text-align: left; text-transform: uppercase;" maxlength="15" id="telefono" name="telefono" type="text" value="{{ inscripcion.persona.telefono_conv }}" ></td>
                        <td><strong>Celular:</strong></td>
                        <td><input class="input-xlarge solo-digitos" style="text-align: left; text-transform: uppercase" minlength="10" maxlength="13" id="celular" name="celular" type="text" value="{{ inscripcion.persona.telefono }}" ></td>
                        <td><strong>Operadora:</strong></td>
                        <td>
                            <select id="operadora" name="operadora">
                                <option value="0">---------</option>
                                <option value="1">CLARO</option>
                                <option value="2">MOVISTAR</option>
                                <option value="3">CNT</option>
                                <option value="4">OTRA</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td><strong>Cédula:</strong></td>
                        <td>
                            {% if not documentopersonal.estadocedula in estado_no_cargardocumentos %}
                            <input type="file" class="filestyle" id="cedulaestudiante" name="cedulaestudiante" data-classButton="btn btn-primary" data-input="false">
                            {% endif %}
                            {% if documentopersonal.cedula %}
                                    <a target="_blank" href="{{ documentopersonal.cedula.url }}"
                                       class="btn btn-mini btn-info tu" title="Descargar Documento"><i
                                            class="fa fa-download"></i></a>
                                    <span class="label label-{% if documentopersonal.estadocedula == 1 %}info{% elif documentopersonal.estadocedula == 2 %}success{% else %}important{% endif %}">{{ documentopersonal.get_estadocedula_display }}</span>
                            {% endif %}
                        </td>
{#                        <td><strong>Certificado Votación:</strong></td>#}
{#                        <td>#}
{#                            <input type="file" class="filestyle" id="certificadoestudiante" name="certificadoestudiante" data-classButton="btn btn-primary" data-input="false">#}
{#                            {% if documentopersonal.papeleta %}#}
{#                                <a target="_blank" href="{{ documentopersonal.papeleta.url }}"#}
{#                                   class="btn btn-mini btn-info tu" title="Descargar Documento"><i#}
{#                                        class="fa fa-download"></i></a>#}
{#                                <span class="label label-{% if documentopersonal.estadopapeleta == 1 %}info{% elif documentopersonal.estadopapeleta == 2 %}success{% else %}important{% endif %}">{{ documentopersonal.get_estadopapeleta_display }}</span>#}
{#                            {% endif %}#}
{#                        </td>#}
                        {% if tipobeca == 16 %}
                            <td><strong>Acta de Grado:</strong></td>
                            <td>
                                <input type="file" class="filestyle" id="actagradoestudiante" name="actagradoestudiante" data-classButton="btn btn-primary" data-input="false">
                            </td>
                        {% elif tipobeca == 22 and isPersonaExterior %}
                            <td><strong>Servicios básico:</strong></td>
                            <td>
                                {% if not documentopersonal.estadoserviciosbasico in estado_no_cargardocumentos %}
                                    <input type="file" class="filestyle" id="serviciobasico" name="serviciobasico" data-classButton="btn btn-primary" data-input="false">
                                {% endif %}
                                {% if documentopersonal.serviciosbasico %}
                                    <a target="_blank" href="{{ documentopersonal.serviciosbasico.url }}"
                                       class="btn btn-mini btn-info tu" title="Descargar Documento"><i
                                            class="fa fa-download"></i></a><br>
                                    <span class="label label-{% if documentopersonal.estadoserviciosbasico == 1 %}info{% elif documentopersonal.estadoserviciosbasico == 2 %}success{% else %}important{% endif %}">{{ documentopersonal.get_estadoserviciosbasico_display }}</span>
                                {% endif %}
                            </td>
                        {% elif tipobeca == 21%}
                            <td><strong>Declaración juramentada:</strong></td>
                            <td colspan="4">
                                {% if not perfil.estadoarchivoraza in estado_no_cargardocumentos %}
                                    <input type="file" class="filestyle" id="raza" name="raza" data-classButton="btn btn-primary" data-input="false">
                                {% endif %}
                                {% if perfil.archivoraza %}
                                        <a target="_blank" href="{{ perfil.archivoraza.url }}" class="btn btn-mini btn-info"><i class="fa fa-download"></i>Descargar</a>
                                    {% endif %}
                                    {% if perfil.raza_id == 1 or perfil.raza_id == 2 or perfil.raza_id == 4 or perfil.raza_id == 5 %}
                                        {% if perfil.estadoarchivoraza == 1 %}
                                            <span class="label label-info">{{ perfil.get_estadoarchivoraza_display }}</span>
                                        {% elif perfil.estadoarchivoraza == 2 %}
                                            <span class="label label-success">{{ perfil.get_estadoarchivoraza_display }}</span>
                                        {% elif perfil.estadoarchivoraza == 3 %}
                                            <span class="label label-important tu" title="{{ perfil.observacionarchraza }}">{{ perfil.get_estadoarchivoraza_display }}</span>
                                        {% else %}
                                            <span class="label label-warning">{{ perfil.get_estadoarchivoraza_display }}</span>
                                        {% endif %}
                                    {% endif %}<br>
                                <span class="text-info">Documento de declaración juramentada de pertenecer algún pueblo y nacionalidades del Ecuador</span><br>
                                <span class="text-info">(Afroecuatoriano/a, Indigena, Montibuo/a)</span>
                            </td>
                        {% elif tipobeca == 20%}
                            <td><strong>Declaración juramentada:</strong></td>
                            <td>
{#                                <span class="text-info">(Afroecuatoriano/a, Indigena, Montibuo/a)</span>#}
                                <table width="100%" class='table table-striped table-bordered' style="margin-bottom: 0px">
                                <tr>
                                    <td style="text-align: center">Evento</td>
                                    <td style="text-align: center">Entrenamiento</td>
                                </tr>
                                <tr>
                                    <td style="text-align: center">
                                        {% if not deportista.estadoarchivoevento in estado_no_cargardocumentos %}
                                            <input type="file" class="filestyle" id="archivodeporteevento" name="archivodeporteevento" data-classButton="btn btn-primary" data-input="false">
                                        {% endif %}
                                        {% if deportista %}
                                            <a href="{{ deportista.archivoevento.url }}" class="btn btn-mini btn-info fancybox-frame" data-fancybox-type="iframe"><i class="fa fa-download"></i>Descargar</a><br>
                                            {% if deportista.estadoarchivoevento == 1 %}
                                                <span id="lbl_estadodoceve_{{ deportista.id }}" class="label label-info tu">{{ deportista.get_estadoarchivoevento_display }}</span>
                                            {% elif deportista.estadoarchivoevento == 2 %}
                                                <span id="lbl_estadodoceve_{{ deportista.id }}" class="label label-success tu">{{ deportista.get_estadoarchivoevento_display }}</span>
                                            {% else %}
                                                <span id="lbl_estadodoceve_{{ deportista.id }}" class="label label-important tu">{{ deportista.get_estadoarchivoevento_display }}</span>
                                            {% endif %}
                                        {% endif %}

                                    </td>
                                    <td style="text-align: center">
                                    {% if not deportista.estadoarchivoentrena in estado_no_cargardocumentos %}
                                        <input type="file" class="filestyle" id="archivodeporteentrena" name="archivodeporteentrena" data-classButton="btn btn-primary" data-input="false">
                                    {% endif %}
                                    {% if deportista %}

                                                <a href="{{ deportista.archivoentrena.url }}" class="btn btn-mini btn-info fancybox-frame" data-fancybox-type="iframe"><i class="fa fa-download"></i>Descargar</a><br>

                                            {% if deportista.estadoarchivoentrena == 1 %}
                                                <span id="lbl_estadodocent_{{ deportista.id }}" class="label label-info tu">{{ deportista.get_estadoarchivoentrena_display }}</span>
                                            {% elif deportista.estadoarchivoentrena == 2 %}
                                                <span id="lbl_estadodocent_{{ deportista.id }}" class="label label-success tu">{{ deportista.get_estadoarchivoentrena_display }}</span>
                                            {% else %}
                                                <span id="lbl_estadodocent_{{ deportista.id }}" class="label label-important tu">{{ deportista.get_estadoarchivoentrena_display }}</span>
                                            {% endif %}
                                        {% endif %}
                                    </td>
                                </tr>
                            </table>
                                <span class="text-info">Documento de declaración juramentada de pertenecer a un club de deportes</span><br>
                            </td>
                        {% elif tipobeca == 19 %}
                            <td><strong>Certificado de Discapacidad:</strong></td>
                            <td>
                                {% if not perfil.estadoarchivodiscapacidad in estado_no_cargardocumentos%}
                                <input type="file" class="filestyle" id="archivodiscapacidad" name="archivodiscapacidad" data-classButton="btn btn-primary" data-input="false">
                                    <span class="text-info">Documento que certifique discapacidad</span><br>
                                {% endif %}
                                {% if perfil.tienediscapacidad %}
                                    {% if perfil.archivo %}
                                        <a target="_blank" href="{{ perfil.archivo.url }}"
                                           class="btn btn-mini btn-info"><i class="fa fa-download"></i>Descargar</a>
                                    {% endif %}
                                    {% if perfil.estadoarchivodiscapacidad %}
                                        {% if perfil.estadoarchivodiscapacidad == 1 %}
                                            <span class="label label-info">{{ perfil.get_estadoarchivodiscapacidad_display }}</span>
                                        {% elif perfil.estadoarchivodiscapacidad == 2 %}
                                            <span class="label label-success">{{ perfil.get_estadoarchivodiscapacidad_display }}</span>
                                        {% elif perfil.estadoarchivodiscapacidad == 3 %}
                                            <span class="label label-important tu"
                                                  title="{{ perfil.observacionarchdiscapacidad }}">{{ perfil.get_estadoarchivodiscapacidad_display }}</span>
                                        {% else %}
                                            <span class="label label-warning">{{ perfil.get_estadoarchivodiscapacidad_display }}</span>
                                        {% endif %}
                                    {% endif %}
                                {% endif %}
                            </td>
                        {% else %}
                            <td colspan="2"></td>
                        {% endif %}
                    </tr>
                </table>
                {% if not cuentabancaria.estadorevision in estado_no_cargardocumentos %}
                    <table class='table table-bordered table-striped'>
                    <tr>
                        <td colspan="6"><strong>Datos de la Cuenta bancaria</strong></td>
                    </tr>
                    <tr>
                        <td><strong>Entidad Bancaria:</strong></td>
                        <td>
                            <select id="banco" name="banco" style="width: 400px">
                                <option value="0">---------</option>
                                {% for banco in bancos %}
                                    <option value="{{ banco.id }}" {% if cuentabancaria.banco_id == banco.id %}selected{% endif %}>{{ banco.nombre }}</option>
                                {% endfor %}
                            </select>
                        </td>
                        <td><strong>Número Cuenta:</strong></td>
                        <td><input class="input-xlarge solo-digitos" style="text-align: left; text-transform: uppercase" maxlength="15" id="cuentabancaria" name="cuentabancaria" type="text" value="{{ cuentabancaria.numero }}" ></td>
                        <td><strong>Tipo de Cuenta:</strong></td>
                        <td>
                            <select id="tipocuenta" name="tipocuenta">
                                <option value="0">---------</option>
                                {% for tipocuenta in tiposcuentas %}
                                    <option value="{{ tipocuenta.id }}" {% if cuentabancaria.tipocuentabanco_id == tipocuenta.id %}selected{% endif %}>{{ tipocuenta }}</option>
                                {% endfor %}
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td><strong>Beneficiario:</strong></td>
                        <td><input class="input-xlarge" style="text-align: left; text-transform: uppercase;" maxlength="200" id="beneficiario" name="beneficiario" type="text" readonly value="{{ inscripcion.persona }}" ></td>
                        <td><strong>Certificado Bancario:</strong></td>
                        <td colspan="3">
                            <input type="file" class="filestyle" id="certificadobancario" name="certificadobancario" data-classButton="btn btn-primary" data-input="false">
                            {% if cuentabancaria.archivo %}
                                    <a target="_blank" href="{{ cuentabancaria.archivo.url }}"
                                       class="btn btn-mini btn-info tu" title="Descargar Documento"><i
                                            class="fa fa-download"></i></a>
                                    <span class="label label-{% if cuentabancaria.estadorevision == 1 %}info{% elif cuentabancaria.estadorevision == 2 %}success{% else %}important{% endif %}">{{ cuentabancaria.get_estadorevision_display }}</span>
                            {% endif %}
                        </td>
                    </tr>
                </table>
                {% endif %}
{#                <table class='table table-bordered table-striped'>#}
{#                    <tr>#}
{#                        <td colspan="6"><strong>Datos del Representante Solidario</strong></td>#}
{#                    </tr>#}
{#                    <tr>#}
{#                        <td><strong>Número Cédula:</strong></td>#}
{#                        <td colspan="5"><input class="input-xlarge solo-digitos" style="text-align: left; text-transform: uppercase;" maxlength="10" id="numerocedularepresentante" name="numerocedularepresentante" type="text" value="" ></td>#}
{#                    </tr>#}
{#                    <tr>#}
{#                        <td><strong>Nombres:</strong></td>#}
{#                        <td><input class="input-xlarge" style="text-align: left; text-transform: uppercase" maxlength="100" id="nombrerepresentante" name="nombrerepresentante" type="text" value="" ></td>#}
{#                        <td><strong>Primer Apellido:</strong></td>#}
{#                        <td><input class="input-xlarge" style="text-align: left; text-transform: uppercase" maxlength="50" id="apellido1representante" name="apellido1representante" type="text" value="" ></td>#}
{#                        <td><strong>Segundo Apellido:</strong></td>#}
{#                        <td><input class="input-xlarge" style="text-align: left; text-transform: uppercase" maxlength="50" id="apellido2representante" name="apellido2representante" type="text" value="" ></td>#}
{#                    </tr>#}
{##}
{#                    <tr>#}
{#                        <td><strong>Cédula:</strong></td>#}
{#                        <td><input type="file" class="filestyle" id="cedularepresentante" name="cedularepresentante" data-classButton="btn btn-primary" data-input="false"></td>#}
{#                        <td><strong>Certificado Votación:</strong></td>#}
{#                        <td><input type="file" class="filestyle" id="certificadorepresentante" name="certificadorepresentante" data-classButton="btn btn-primary" data-input="false"></td>#}
{#                        <td colspan="2"></td>#}
{#                    </tr>#}
{#                </table>#}
{#            {% if tipobeca == 22 and not  isPersonaExterior %}#}
{#                <table class='table table-bordered table-striped'>#}
{#                    <tr>#}
{#                        <td colspan="6"><strong>Dirección de estudiantes en el extranjero</strong></td>#}
{#                    </tr>#}
{#                    <tr>#}
{#                        <td><strong>Pais:</strong></td>#}
{#                        <td>#}
{#                            <select id="paisextranjero" name="paisextranjero">#}
{#                                <option value="">---------</option>#}
{#                            </select>#}
{#                        </td>#}
{#                        <td><strong>Años:</strong></td>#}
{#                        <td><input class="input-xlarge" style="text-align: left; text-transform: uppercase" maxlength="15" id="añosresidencia" name="añosresidencia" type="text" value=""></td>#}
{#                        <td><strong>Meses:</strong></td>#}
{#                        <td><input class="input-xlarge" style="text-align: left; text-transform: uppercase" maxlength="15" id="mesesresidencia" name="mesesresidencia" type="text" value=""></td>#}
{#                        <td><strong>Certificado extranjero:</strong></td>#}
{#                        <td>#}
{#                            <input type="file" class="filestyle" id="certificadoextranjero" name="certificadoextranjero" data-classButton="btn btn-primary" data-input="false">#}
{#                        </td>#}
{#                    </tr>#}
{#                </table>#}
{#            {% endif %}#}
            </form>
        </div>
    </div>
    <div class='row-fluid'>
        <div class='span12' style="text-align: center">
            <a href="javascript:;" class="btn btn-success btn-large" id="btnguardar">Guardar</a>
        </div>
    </div>

{% endblock %}
