{% extends "ajaxformbs.html" %}
{% load sga_extras %}
{% block heading %}
    <script type="text/javascript">
        $(function() {
            $(".estadoingresado").click(function(){
                var codsemana = $(this).attr("codsemana");
                var nombresemana = $(this).attr("nombresemana");
                smoke.confirm("¿Está seguro de regresar a estado ingresado la SEMANA " + nombresemana + ".? " +
                    "\n Le recordamos que al momento de aceptar se regresarán a estado INGRESADO todos lo registro de la semana, a excepción de los recursos que ya están en moodle.", function(e){
                    if (e){
                        bloqueointerface();
                        $.ajax({
                            type: "POST",
                            url: "/aprobar_silabo",
                            data: {'action': 'estadoingresado','idsilabosemana':codsemana },
                            error: function () {
                                $.unblockUI();
                                smoke.alert("Error al obtener los datos.");
                            },
                            success: function (data) {
                                if (data.result == "ok") {
                                    location.reload();
                                } else {
                                    $.unblockUI();
                                    smoke.alert(data.mensaje);
                                }
                            }
                        });
                    }
                }, {
                    ok: "SI,REGRESAR A ESTADO INGRESADO",
                    cancel: "NO,CANCELAR",
                    classname: "custom-class",
                    reverseButtons: true
                });

            });
            $(".aprobarmasivo").click(function() {
                $("#divaprobarmasivo").modal({backdrop:'static', width: '500px'}).modal('show');
            });
            $(".cancelaaprobacion").click(function() {
                $("#divaprobarmasivo").modal("hide");
            });

            $(".action-aceptar", $("#modalErrores")).click(function() {
                bloqueointerface();
                location.reload();
            });

            $(".action-cancelar", $("#modalErrores")).click(function() {
                bloqueointerface();
                location.reload();
            });
            $(".saveaprobacion").click(function() {
                var listatarea = [];
                var listatareatalleexpo = [];
                var listaforo = [];
                var listatest = [];
                var listaguiaestudiante = [];
                var listaguiadocente = [];
                var listadiapositiva = [];
                var listacompendio = [];
                var listamaterial = [];
                var listatareapractica = [];
                $(".recorreitemstarea").each(function () {
                    if($(this).prop('checked')){
                        listatarea.push($(this).attr('iditem'));
                    }
                });
                $(".recorreitemstareapractica").each(function () {
                    if($(this).prop('checked')){
                        listatareapractica.push($(this).attr('iditem'));
                    }
                });
                $(".recorreitemsforo").each(function () {
                    if($(this).prop('checked')){
                        listaforo.push($(this).attr('iditem'));
                    }
                });
                $(".recorreitemstest").each(function () {
                    if($(this).prop('checked')){
                        listatest.push($(this).attr('iditem'));
                    }
                });
                $(".recorreitemstaller").each(function () {
                    if($(this).prop('checked')){
                        listatareatalleexpo.push($(this).attr('iditem'));
                    }
                });
                $(".recorreitemsguiaestudiante").each(function () {
                    if($(this).prop('checked')){
                        listaguiaestudiante.push($(this).attr('iditem'));
                    }
                });
                $(".recorreitemsguiadocente").each(function () {
                    if($(this).prop('checked')){
                        listaguiadocente.push($(this).attr('iditem'));
                    }
                });
                $(".recorreitemsdiapositiva").each(function () {
                    if($(this).prop('checked')){
                        listadiapositiva.push($(this).attr('iditem'));
                    }
                });
                $(".recorreitemscompendio").each(function () {
                    if($(this).prop('checked')){
                        listacompendio.push($(this).attr('iditem'));
                    }
                });
                $(".recorreitemsmaterial").each(function () {
                    if($(this).prop('checked')){
                        listamaterial.push($(this).attr('iditem'));
                    }
                });
                bloqueointerface();
                $.post("/aprobar_silabo", {'action':'aprobacionmasivarecurso', 'listatarea': JSON.stringify(listatarea),
                    'listaforo': JSON.stringify(listaforo),'listatest': JSON.stringify(listatest),
                    'listaguiaestudiante': JSON.stringify(listaguiaestudiante),'listaguiadocente': JSON.stringify(listaguiadocente),
                    'listadiapositiva': JSON.stringify(listadiapositiva),'listacompendio': JSON.stringify(listacompendio),
                    'listamaterial': JSON.stringify(listamaterial),'listatareapractica': JSON.stringify(listatareapractica),'listatareatalleexpo': JSON.stringify(listatareatalleexpo)}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        if (data.errores.length > 0) {
                            /*abrir modal*/
                            let html_ = "<div><h4>Actividades que no se migraron a moodle</h4></div><br>";
                            html_ += `<table class='table table-bordered table-striped'><thead>
                                                    <tr>
                                                        <th style="text-align: center; vertical-align: middle;">Actividad</th>
                                                        <th style="text-align: center; vertical-align: middle;">Nombre</th>
                                                        <th style="text-align: center; vertical-align: middle;">Descripción</th>
                                                        <th style="text-align: center; vertical-align: middle;">Error</th>
                                                    </tr>
                                                    </thead><tbody>`;
                            $.each(data.errores, function (i, item) {
                                //console.log(item);
                                html_ += `<tr>`;
                                html_ += `<td style="text-align: center; vertical-align: middle;">${item['actividad']}</td>`;
                                html_ += `<td>${item['descripcion']}</td>`;
                                html_ += `<td>${item['nombre']}</td>`;
                                html_ += `<td>${item['error']}</td>`;
                                html_ += `</tr>`;
                            });
                            html_ += "</tbody></table>";
                            $(".paneltitle span", $("#modalErrores")).html(" al migrar a moodle");
                            $(".modal-body", $("#modalErrores")).html(html_);
                            $("#modalErrores").modal({"backdrop":"static", "width": "90%"}).modal("show");
                        }
                        else
                        {
                            location.reload();
                        }
                    }
                    else{
                        $.unblockUI();
                        smoke.alert(data.mensaje);
                    }
                }, 'json');
            });
            $(".savetarea").click(function() {
                var idcodigotarea = $("#id_codigotarea").val()
                var id_observacion = $("#id_observacion").val()
                var id_codtipo = $("#id_codtipo").val()
                var id_estadosolicitud = $("#id_estadosolicitud").val()
                if (id_observacion == ''){
                    smoke.alert('Favor ingrese observación');
                    return false;
                }
                if (id_estadosolicitud == 0){
                    smoke.alert('Favor ingrese estado');
                    return false;
                }
                bloqueointerface();
                $.post("/aprobar_silabo", {'action':'tareaestado', 'idcodigotarea': idcodigotarea, 'id_observacion': id_observacion, 'id_estadosolicitud': id_estadosolicitud, 'id_codtipo': id_codtipo}, function(data) {
                    if (data.result == 'ok') {
                        location.reload();
                    }
                    else{
                        $.unblockUI();
                        smoke.alert(data.mensaje);
                    }
                }, 'json');
            });
            $(".detalletarea").click(function() {
                var nomtipo = $(this).attr('nomtipo');
                var codtipo = $(this).attr('codtipo');
                var idesta = $(this).attr('idesta');
                var idtar = $(this).attr('idtar');
                var action = '';
                {#alert(idesta)#}
                var numerosemana = $(this).attr('idsem');
                $("#nomtitulo").html('')
                nomacti = 'Semana #' + numerosemana;
                $("#nomtitulo").html('Detalle de ' + nomtipo)
                $("#id_codigotarea").val(idtar)
                $("#id_codtipo").val(codtipo)
                bloqueointerface();
                $.post("/aprobar_silabo", {'action':'detalletarea', 'idtar': idtar, 'codtipo': codtipo}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $(".panelbody").html(data.data);
                        $("#divmostrartarea").modal({backdrop:'static', width: '1000px'}).modal('show');

                        if(codtipo==7){
                            $("#muestraguardar").hide()
                        }else{
                            if(idesta != 4 && idesta != 5 ){
                                $("#muestraguardar").show()
                            }else{
                                $("#muestraguardar").hide()
                            }
                        }

                    }
                }, 'json');
            });
            $(".cerrartarea").click(function() {
                $("#divmostrartarea").modal("hide");
            });
        });
    </script>
{% endblock %}
{% block atras %}/aprobar_silabo?id={{ silabocab.materia.id }}{% endblock %}
{% block canvas %}
    <div class='row-fluid'>
        <div class='span9'>
            <h5>{{ title }}</h5>
            <h5>Profesor: {{ silabocab.materia.profesor_principal }}</h5>
            <h5>Asignatura: {{ silabocab.materia.asignaturamalla }} - {{ silabocab.materia.paralelo }}</h5>
        </div>
        <div class='span3'>
            <table width="100%" border="0" cellspacing="0" cellpadding="0" class="table table-bordered" >
                <tr>
                    <td style="text-align: center">
                        <a style="color: #3a87ad; font-size: 18px" href="#"><i class="fa fa-circle"></i></a>
                    </td>
                    <td style="text-align: justify">INGRESADO</td>
                    <td style="text-align: center">
                        <a style="color: #b94a48; font-size: 18px" href="#"><i class="fa fa-circle"></i></a>
                    </td>
                    <td style="text-align: justify">RECHAZADO</td>
                </tr>
                <tr>
                    <td style="text-align: center">
                        <a style="color: #faa732; font-size: 18px" href="#"><i class="fa fa-circle"></i></a>
                    </td>
                    <td style="text-align: justify">APROBADO</td>
                    <td style="text-align: center">
                        <a style="color: #5bb75b; font-size: 18px" href="#"><i class="fa fa-circle"></i></a>
                    </td>
                    <td style="text-align: justify">EN MOODLE</td>
                </tr>
                <tr>
                    <td style="text-align: center" colspan="1">
                        <a style="color: #77477E; font-size: 18px" href="#"><i class="fa fa-circle"></i></a>
                    </td>
                    <td style="text-align: justify" colspan="3">REVISIÓN CRAI</td>
                </tr>
            </table>
        </div>
    </div>
    {% if not silabocab.materia.cerrado %}
        {% if silabocab.materia.idcursomoodle > 0 %}
            <div class='row-fluid'>
                <div class='span12'>
                    <a href="javascript:;" class="btn btn-success btn-mini tu aprobarmasivo" title="Solo se aprobarán los ítems seleccionados"><span class="fa fa-check"></span> Aprobar masivo</a>
                    <label class="label label-info">
                        Al dar clic en "Aprobar masivo", solo se aprobarán los ítems seleccionados
                    </label>
                </div>
            </div>
        {% endif %}
    {% endif %}
    {% if silabocab.materia.idcursomoodle == 0 %}
        <div class='row-fluid'>
            <div class='span12'>
                <div class="alert alert-danger">
                    NOTA: No podrá migrar a mooodle mientras la asignatura no exista en el Aula Virtual.
                </div>
            </div>
        </div>
    {% endif %}
    <div class='row-fluid'>
        <div class='span12'>
            <table width="100%" border="0" cellspacing="0" cellpadding="0" class="table table-bordered" >
                <thead>
                <tr>
                    <th style="text-align: center;width: 150px;">Temas / Subtemas</th>
                    <th style="text-align: center;width: 150px;">APRENDIZAJE AUTÓNOMO</th>
                    <th style="text-align: center;width: 150px;">APRENDIZAJE CONTACTO CON EL DOCENTE</th>
                    <th style="text-align: center;width: 150px;">Guía del estudiante y docente</th>
                    <th style="text-align: center;width: 150px;">Presentación</th>
                    <th style="text-align: center;width: 150px;">Compendio</th>
                    <th style="text-align: center;width: 150px;">Materiales complementarios</th>
                    <th style="text-align: center;width: 150px;">Trabajo práctico experimental</th>
                    <th style="text-align: center;width: 150px;">Video magistral</th>
                </tr>
                </thead>
                <tbody>
                {% for semana in silabosemanal %}
                    <tr>
                        <td bgcolor="#d9edf7" colspan="9" height="30" style="text-align: left; font-size: 16px;" valign="middle">
                            <div class='span12'>
                                <strong>
                                    SEMANA {{ semana.numsemana }} |
                                    DESDE: {{ semana.fechainiciosemana|date:"Y-m-d" }}
                                    HASTA: {{ semana.fechafinciosemana|date:"Y-m-d" }}
                                </strong>
                                {% if not silabocab.materia.cerrado %}
                                    <a href="javascript:;" class="btn btn-info btn-mini tu estadoingresado" nombresemana="{{ semana.numsemana }}" codsemana="{{ semana.id }}" title="Regresar a estado inscrito"><span class="fa fa-check"></span> Regresar  estado ingresado</a>
                                {% endif %}
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td >
                            {% with temasselec=semana|call:'temas_seleccionados_planclase' %}
                                <div style="max-height: 300px !important; overflow-y: auto; overflow-x: hidden;">
                                    {% with unidades=semana|call:'unidades_silabosemanal' %}
                                        {% for uni in unidades %}
                                            <b>UNIDAD {{ uni.temaunidadresultadoprogramaanalitico.unidadresultadoprogramaanalitico.orden }}: {{ uni.temaunidadresultadoprogramaanalitico.unidadresultadoprogramaanalitico.descripcion }}</b><br>
                                            {% with temasselec=semana|args:uni.temaunidadresultadoprogramaanalitico.unidadresultadoprogramaanalitico.id|call:'temas_silabosemanal' %}
                                                {% for temassel in temasselec %}
                                                    <dt style="font-weight: normal;">
                                                        <ul>
                                                    <dt style="font-weight: normal;"><b>TEMA: {{ temassel.temaunidadresultadoprogramaanalitico.orden }}.-</b> {{ temassel.temaunidadresultadoprogramaanalitico.descripcion }}</dt>
                                                    <ul>
                                                        {% with subtemasselec=semana|args:temassel.temaunidadresultadoprogramaanalitico|call:'subtemas_silabosemanal' %}
                                                            {% if subtemasselec %}
                                                                {% for subtemassel in subtemasselec %}
                                                                    <dt style="font-weight: normal;"><b>SUBTEMA: {{ subtemassel.subtemaunidadresultadoprogramaanalitico.orden }}.-</b> {{ subtemassel.subtemaunidadresultadoprogramaanalitico.descripcion }}</dt>
                                                                {% endfor %}
                                                            {% endif %}
                                                        {% endwith %}
                                                    </ul>
                                                    </dt>
                                                {% endfor %}
                                            {% endwith %}
                                        {% endfor %}
                                    {% endwith %}
                                </div>
                            {% endwith %}
                        </td>
                        <td valign="top">
                            {% if semana.foros_semanales %}
                                {% if semana.foros_semanales.estado.id == 1 or semana.foros_semanales.estado.id == 3 %}
                                        <input type="checkbox" class="recorreitemsforo" iditem="{{ semana.foros_semanales.id }}">
                                {% endif %}
                                <div class="accordion" id="accordionforo{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse" data-parent="#accordionforo{{ semana.id|encrypt }}" href="#collapseforo{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Foro</a>
                                        </div>
                                        <div id="collapseforo{{ semana.id|encrypt }}" class="accordion-body in">
                                            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                                <tr>
                                                    <td colspan="8">
                                                        <a style="color: #{{ semana.foros_semanales.estado.colorestado }}; font-size: 18px" href="#"><i class="fa fa-circle"></i></a>
                                                        <span class="label label-default">
                                                        {{ semana.foros_semanales.detallemodelo.nombre }}
                                                        </span><br>
                                                        {{ semana.foros_semanales.nombre }}
                                                    </td>
                                                </tr>
                                            </table>
                                            <a href="javascript:;" class="btn btn-warning btn-mini tu detalletarea" codtipo="2" nomtipo="Foro" idesta="{{ semana.foros_semanales.estado.id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.foros_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                            {% if semana.tareas_semanales %}
                                {% if semana.tareas_semanales.estado.id == 1 or semana.tareas_semanales.estado.id == 3 %}
                                        <input type="checkbox" class="recorreitemstarea" iditem="{{ semana.tareas_semanales.id }}">
                                {% endif %}
                                <div id="id_tarea{{ semana.tareas_semanales.id }}">
                                    <div class="accordion" id="accordiontareas{{ semana.id|encrypt }}">
                                        <div class="accordion-group">
                                            <div class="accordion-heading">
                                                <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne"><span class="fa fa-list"></span> Tarea</a>
                                            </div>
                                            <div id="collapseOne" class="accordion-body in">
                                                <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                                    <tr>
                                                        <td colspan="8">
                                                            <a style="color: #{{ semana.tareas_semanales.estado.colorestado }}; font-size: 18px" href="#" class='tu' data-placement="right" href="javascript:;"  title='{{ semana.tareas_semanales.estado.nombre }}'><i class="fa fa-circle"></i></a>
                                                            <span class="label label-default">
                                                        {{ semana.tareas_semanales.detallemodelo.nombre }}
                                                        </span><br>
                                                            {{ semana.tareas_semanales.nombre }}
                                                        </td>
                                                    </tr>
                                                </table>
                                                <br>
                                                <a href="javascript:;" class="btn btn-warning btn-mini tu detalletarea" codtipo="1" nomtipo="Tarea" idesta="{{ semana.tareas_semanales.estado.id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.tareas_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                            {% if semana.analisiscasos_semanales %}
                                {% if semana.analisiscasos_semanales.estado.id == 1 or semana.analisiscasos_semanales.estado.id == 3 %}
                                        <input type="checkbox" class="recorreitemstarea" iditem="{{ semana.analisiscasos_semanales.id }}">
                                {% endif %}
                                <div class="accordion" id="accordioncasoanalisis{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse" data-parent="#accordion{{ semana.id|encrypt }}" href="#collapseAnalisis{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Analisis casos</a>
                                        </div>
                                        <div id="collapseAnalisis{{ semana.id|encrypt }}" class="accordion-body collapse in">
                                            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                                <tr>
                                                    <td colspan="8">
                                                        <a style="color: #{{ semana.analisiscasos_semanales.estado.colorestado }}; font-size: 18px" href="#" class='tu' data-placement="right" href="javascript:;"  title='{{ semana.analisiscasos_semanales.estado.nombre }}'><i class="fa fa-circle"></i></a>
                                                        <span class="label label-default">
                                                        {{ semana.analisiscasos_semanales.detallemodelo.nombre }}
                                                        </span><br>
                                                        {{ semana.analisiscasos_semanales.nombre }}
                                                    </td>
                                                </tr>
                                            </table>
                                            <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletarea" codtipo="1" nomtipo="analisis de caso" idesta="{{ semana.analisiscasos_semanales.estado.id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.analisiscasos_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                            {% if semana.trabajoinvestigacion_semanales %}
                                {% if semana.trabajoinvestigacion_semanales.estado.id == 1 or semana.trabajoinvestigacion_semanales.estado.id == 3 %}
                                        <input type="checkbox" class="recorreitemstarea" iditem="{{ semana.trabajoinvestigacion_semanales.id }}">
                                {% endif %}
                                <div class="accordion" id="accordiontrabinv{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse" data-parent="#accordion{{ semana.id|encrypt }}" href="#collapseInvestigacion{{ semana.id|encrypt }}"><span class="fa fa-list"></span> T. Investigación</a>
                                        </div>
                                        <div id="collapseInvestigacion{{ semana.id|encrypt }}" class="accordion-body collapse in">
                                            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                                <tr>
                                                    <td colspan="8">
                                                        <a style="color: #{{ semana.trabajoinvestigacion_semanales.estado.colorestado }}; font-size: 18px" href="#" class='tu' data-placement="right" href="javascript:;"  title='{{ semana.trabajoinvestigacion_semanales.estado.nombre }}'><i class="fa fa-circle"></i></a>
                                                        <span class="label label-default">
                                                        {{ semana.trabajoinvestigacion_semanales.detallemodelo.nombre }}
                                                        </span><br>
                                                        {{ semana.trabajoinvestigacion_semanales.nombre }}
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="4">
                                                        {% if semana.trabajoinvestigacion_semanales.archivorubrica %}
                                                            <a href='{{ semana.trabajoinvestigacion_semanales.archivorubrica.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Rúbrica</a>
                                                        {% endif %}
                                                    </td>
                                                    <td colspan="4">
                                                        {% if semana.trabajoinvestigacion_semanales.archivotareasilabo %}
                                                            <a href='{{ semana.trabajoinvestigacion_semanales.archivotareasilabo.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Trabajo investigación</a>
                                                        {% endif %}
                                                    </td>
                                                </tr>
                                            </table>
                                            <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletarea" codtipo="1" nomtipo="trabajo de investigación" idesta="{{ semana.trabajoinvestigacion_semanales.estado.id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.trabajoinvestigacion_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        </td>
                        <td valign="top">
                            {% if semana.test_semanalesadmision %}
                                {% if semana.test_semanalesadmision.estado_id == 1 or semana.test_semanalesadmision.estado_id == 3 %}
                                        <input type="checkbox" class="recorreitemstest" iditem="{{ semana.test_semanalesadmision.id }}">
                                {% endif %}
                                <div id="accordiontest{{ semana.id|encrypt }}" class="accordion-body">
                                    {% for test in semana.listatest_semanalesadmision %}
                                        <a style="color:#{{ test.estado.colorestado }}; font-size: 18px" href="#"><i class="fa fa-circle"></i></a><br>
                                        {{ test.titulo }} dhsrtrtu<br>
                                        <a href="javascript:;" class="btn btn-warning btn-mini tu detalletarea" codtipo="3" nomtipo="Test" idesta="{{ test.estado.id }}" idsem="{{ semana.numsemana }}" idtar="{{ test.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                        {% if test.url1 %}
                                            <label class="label label-info">
                                                Link1
                                            </label>
                                        {% endif %}
                                        {% if test.url2 %}
                                            <label class="label label-info">
                                                Link2
                                            </label>
                                        {% endif %}
                                        <br><br>
                                    {% endfor %}
                                </div>
                            {% endif %}
                            {% if semana.talleres_semanales %}
                                {% if semana.talleres_semanales.estado.id == 1 or  semana.talleres_semanales.estado.id == 3 %}
                                    <input type="checkbox" class="recorreitemstarea" iditem="{{ semana.talleres_semanales.id }}">
                                {% endif %}
                                <div class="accordion" id="accordion{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse" data-parent="#accordion{{ semana.id|encrypt }}" href="#collapseOne{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Taller</a>
                                        </div>
                                        <div id="collapseOne{{ semana.id|encrypt }}" class="accordion-body">
                                            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                                <tr>
                                                    <td colspan="8">
                                                        <a style="color: #{{ semana.talleres_semanales.estado.colorestado }}; font-size: 18px" href="#" class='tu' data-placement="right" href="javascript:;"  title='{{ semana.talleres_semanales.estado.nombre }}'><i class="fa fa-circle"></i></a>
                                                        <span class="label label-default">
                                                        {{ semana.talleres_semanales.detallemodelo.nombre }}
                                                        </span><br>
                                                        {{ semana.talleres_semanales.nombre }}
                                                    </td>
                                                </tr>
                                                {% if semana.talleres_semanales.archivorubrica or semana.talleres_semanales.archivotareasilabo %}
                                                    <tr>
                                                        <td colspan="4">
                                                            {% if semana.talleres_semanales.archivorubrica %}
                                                                <a href='{{ semana.talleres_semanales.archivorubrica.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Rúbrica</a>
                                                            {% endif %}
                                                        </td>
                                                        <td colspan="4">
                                                            {% if semana.talleres_semanales.archivotareasilabo %}
                                                                <a href='{{ semana.talleres_semanales.archivotareasilabo.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Tarea</a>
                                                            {% endif %}
                                                        </td>
                                                    </tr>
                                                {% endif %}
                                            </table>
                                            <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletarea" codtipo="1" nomtipo="Taller" idesta="{{ semana.talleres_semanales.estado.id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.talleres_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                            {% if semana.exposiciones_semanales %}
                                {% if semana.exposiciones_semanales.estado.id == 1 or semana.exposiciones_semanales.estado.id == 3 %}
                                        <input type="checkbox" class="recorreitemstarea" iditem="{{ semana.exposiciones_semanales.id }}">
                                {% endif %}
                                <div class="accordion" id="accordion{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse" data-parent="#accordion{{ semana.id|encrypt }}" href="#collapseExpo{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Exposición</a>
                                        </div>
                                        <div id="collapseExpo{{ semana.id|encrypt }}" class="accordion-body">
                                            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                                <tr>
                                                    <td colspan="8">
                                                        <a style="color: #{{ semana.exposiciones_semanales.estado.colorestado }}; font-size: 18px" href="#" class='tu' data-placement="right" href="javascript:;"  title='{{ semana.exposiciones_semanales.estado.nombre }}'><i class="fa fa-circle"></i></a>
                                                        <span class="label label-default">
                                                        {{ semana.exposiciones_semanales.detallemodelo.nombre }}
                                                        </span><br>
                                                        {{ semana.exposiciones_semanales.nombre }}
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="4">
                                                        {% if semana.exposiciones_semanales.archivorubrica %}
                                                            <a href='{{ semana.exposiciones_semanales.archivorubrica.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Rúbrica</a>
                                                        {% endif %}
                                                    </td>
                                                    <td colspan="4">
                                                        {% if semana.exposiciones_semanales.archivotareasilabo %}
                                                            <a href='{{ semana.exposiciones_semanales.archivotareasilabo.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Exposición</a>
                                                        {% endif %}
                                                    </td>
                                                </tr>
                                            </table>
                                            <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletarea" codtipo="1" nomtipo="Exposición" idesta="{{ semana.exposiciones_semanales.estado.id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.exposiciones_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        </td>
                        <td valign="top">
                            {% if semana.guiaestudiante_semanales %}
                                {% if semana.guiaestudiante_semanales.estado.id == 1 or semana.guiaestudiante_semanales.estado.id == 3 %}
                                        <input type="checkbox" class="recorreitemsguiaestudiante" iditem="{{ semana.guiaestudiante_semanales.id }}">
                                {% endif %}
                                <div class="accordion" id="accordionguiaestudiante{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse" data-parent="#accordionguiaestudiante{{ semana.id|encrypt }}" href="#collapseOneguiaestudiante{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Guía estudiante</a>
                                        </div>
                                        <div id="collapseOneguiaestudiante{{ semana.id|encrypt }}" class="accordion-body in">
                                            <a style="color: #{{ semana.guiaestudiante_semanales.estado.colorestado }}; font-size: 18px" href="#"><i class="fa fa-circle"></i></a><br>
                                            {{ semana.guiaestudiante_semanales.observacion }}<br>
                                        </div>
                                        <br>
                                        <a href="javascript:;" class="btn btn-warning btn-mini tu detalletarea" codtipo="4" nomtipo="Guia estudiante" idesta="{{ semana.guiaestudiante_semanales.estado.id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.guiaestudiante_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                    </div>
                                </div>
                            {% endif %}
                            {% if semana.guiadocente_semanales %}
                                {% if semana.guiadocente_semanales.estado.id == 1 or semana.guiadocente_semanales.estado.id == 3  %}
                                        <input type="checkbox" class="recorreitemsguiadocente" iditem="{{ semana.guiadocente_semanales.id }}">
                                {% endif %}
                                <div class="accordion" id="accordionguia{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse" data-parent="#accordionguia{{ semana.id|encrypt }}" href="#collapseOneguia{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Guía docente</a>
                                        </div>
                                        <div id="collapseOneguia{{ semana.id|encrypt }}" class="accordion-body in">
                                            <a style="color: #{{ semana.guiadocente_semanales.estado.colorestado }}; font-size: 18px" href="#"><i class="fa fa-circle"></i></a><br>
                                            {{ semana.guiadocente_semanales.observacion }}<br>
                                        </div>
                                        <br>
                                        <a href="javascript:;" class="btn btn-warning btn-mini tu detalletarea" codtipo="5" nomtipo="Guia docente" idesta="{{ semana.guiadocente_semanales.estado.id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.guiadocente_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                    </div>
                                </div>
                            {% endif %}
                        </td>
                        <td valign="top">
                            {% if semana.diapositiva_semanales_admision %}
                                <div class="accordion" id="accordiondiapositiva{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse" data-parent="#accordiondiapositiva{{ semana.id|encrypt }}" href="#collapseOnediapositiva{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Presentación</a>
                                        </div>
                                        <div id="collapseOnediapositiva{{ semana.id|encrypt }}" class="accordion-body in">
                                            {% for diapositiva in semana.diapositiva_semanales_admision %}
                                                {% if diapositiva.estado.id == 1 or diapositiva.estado.id == 3 %}
                                                    <input type="checkbox" class="recorreitemsdiapositiva" iditem="{{ diapositiva.id }}">
                                                {% endif %}
                                                <a style="color: #{{ diapositiva.estado.colorestado }}; font-size: 18px" href="#"><i class="fa fa-circle"></i></a><br>
                                                {{ diapositiva.nombre }}<br>
                                                <a href="javascript:;" class="btn btn-warning btn-mini tu detalletarea" codtipo="6" nomtipo="Presentación" idesta="{{ diapositiva.estado.id }}" idsem="{{ semana.numsemana }}" idtar="{{ diapositiva.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                                <br><br>
                                            {% endfor %}
                                        </div>
                                    </div>
                                </div>

                            {% endif %}
                        </td>
                        <td valign="top">
                            {% if semana.compendio_semanales %}
                                {% if semana.compendio_semanales.estado_id == 1 or semana.diapositiva_semanales.estado_id == 3 %}
                                        <input type="checkbox" class="recorreitemscompendio" iditem="{{ semana.compendio_semanales.id }}">
                                {% endif %}
                                <div class="accordion" id="accordioncompendio{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse" data-parent="#accordioncompendio{{ semana.id|encrypt }}" href="#collapseOnecompendio{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Compendio</a>
                                        </div>
                                        <div id="collapseOnecompendio{{ semana.id|encrypt }}" class="accordion-body in">
                                            <a style="color: #{{ semana.compendio_semanales.estado.colorestado }}; font-size: 18px" href="#"><i class="fa fa-circle"></i></a><br>
                                            {{ semana.compendio_semanales.descripcion }}<br>
                                        </div>
                                        <br>
                                        <a href="javascript:;" class="btn btn-warning btn-mini tu detalletarea" codtipo="7" nomtipo="Compendio" idesta="{{ semana.compendio_semanales.estado.id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.compendio_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                    </div>
                                </div>
                            {% endif %}
                        </td>
                        <td valign="top">
                            <div style="text-align: left">
                            </div>
                            {% if semana.material_semanales %}
                                <div class="accordion" id="accordionmaterial{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse" data-parent="#accordionmaterial{{ semana.id|encrypt }}" href="#collapsematerial{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Material complementario</a>
                                        </div>
                                        <div id="collapsematerial{{ semana.id|encrypt }}" class="accordion-body in">
                                            {% for material in semana.material_semanales %}
                                                {% if material.estado.id == 1 or material.estado.id == 3 %}
                                                        <input type="checkbox" class="recorreitemsmaterial" iditem="{{ material.id }}">
                                                {% endif %}
                                                <a style="color: #{{ material.estado.colorestado }}; font-size: 18px" href="#"><i class="fa fa-circle"></i></a>
                                                {{ material.nombre }}<br>
                                                {% if material.tipomaterial == 2 or material.tipomaterial == 3 %}
                                                    <a href="{{ material.testourl }}" target="_blank"><i class="fa fa-link"></i> ver link</a>
                                                {% endif %}
                                                <br>
                                                <a href="javascript:;" class="btn btn-warning btn-mini tu detalletarea" codtipo="8" nomtipo="Material complementario" idesta="{{ material.estado.id }}" idsem="{{ semana.numsemana }}" idtar="{{ material.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                                <br><br>
                                            {% endfor %}
                                        </div>
                                        {#                                        <br>#}
                                        {#                                        <a href="javascript:;" class="btn btn-warning btn-mini tu" title="Ver más"><span class="fa fa-eye"></span></a>#}
                                    </div>
                                </div>
                            {% endif %}
                        </td>
                        <td valign="top">
                            {% if semana.tareaspracticas_semanales %}
                                {% if semana.tareaspracticas_semanales.estado.id == 1 or semana.tareaspracticas_semanales.estado.id == 3 %}
                                        <input type="checkbox" class="recorreitemstareapractica" iditem="{{ semana.tareaspracticas_semanales.id }}">
                                {% endif %}
                                <div id="id_tareapra{{ semana.tareaspracticas_semanales.id }}">
                                    <div class="accordion" id="accordionpractica">
                                        <div class="accordion-group">
                                            <div class="accordion-heading">
                                                <a data-toggle="collapse" data-parent="#accordion" href="#collapseOnepra"><span class="fa fa-list"></span> Tarea práctica</a>
                                            </div>
                                            <div id="collapseOnepra" class="accordion-body in">
                                                <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                                    <tr>
                                                        <td colspan="8">
                                                            <a style="color: #{{ semana.tareaspracticas_semanales.estado.colorestado }}; font-size: 18px" href="#" class='tu' data-placement="right" href="javascript:;"  title='{{ semana.tareaspracticas_semanales.estado.nombre }}'><i class="fa fa-circle"></i></a>
                                                            <span class="label label-default">
                                                        {{ semana.tareaspracticas_semanales.detallemodelo.nombre }}
                                                        </span><br>
                                                            {{ semana.tareaspracticas_semanales.nombre }}
                                                        </td>
                                                    </tr>
                                                </table>
                                                <br>
                                                <a href="javascript:;" class="btn btn-warning btn-mini tu detalletarea" codtipo="9" nomtipo="Tarea práctica " idesta="{{ semana.tareaspracticas_semanales.estado.id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.tareaspracticas_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        </td>
                        <td data-title='VIDEO MAGISTRAL' valign="top">
                            {% if semana.vidmagistral_semanales_sinvalidar %}
                                <div class="accordion" id="accordionvidmagistral{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse" data-parent="#accordionvidmagistral{{ semana.id|encrypt }}" href="#collapseOnevidmagistral{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Video magistral</a>
                                        </div>
                                        <div id="collapseOnevidmagistral{{ semana.id|encrypt }}" class="accordion-body">
                                            <a style="color: #{{ semana.vidmagistral_semanales.estado.colorestado }}; font-size: 18px" href="#"><i class="fa fa-circle"></i></a><br>
                                            {{ semana.vidmagistral_semanales.get_tipograbacion_display }}<br>
                                            {{ semana.vidmagistral_semanales.nombre }}<br>
                                            {% if semana.vidmagistral_semanales.archivovideomagistral %}
                                                <a href='{{ semana.vidmagistral_semanales.archivovideomagistral.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Archivo </a>
                                            {% endif %}
                                            <br>
                                            <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletarea" codtipo="10" nomtipo="Video Magistral" idesta="{{ semana.vidmagistral_semanales.estado.id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.vidmagistral_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>

                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                            {#                                        {% endif %}#}
                            {#                                    {% endif %}#}
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <div class="modal fade static" id="divmostrartarea" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle" id="nomtitulo"></h3>
        </div>
        <input id="id_codigotarea" name="id_codigotarea" type="hidden">
        <input id="id_codtipo" name="id_codtipo" type="hidden">
        {#            <input id="id_codigoopcion" name="id_codigoopcion" type="hidden">#}
        <div id="id_nomactividad"></div>
        <div class="modal-body panelbody">

        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td>
                        <div id="muestraguardar">
                            <a href="javascript:;" class="btn btn-success savetarea">Guardar</a>
                        </div>
                    </td>
                    <td><a href="javascript:;" class="btn btn-default cerrartarea">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>
    <div class="modal fade static" id="divaprobarmasivo" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Aprobación masiva</h3>
        </div>
        <div class="modal-body panelbodyaprobar">
            Esta seguro  que desea aprobar masivamente?
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-success saveaprobacion">Aprobar</a></td>
                    <td><a href="javascript:;" class="btn btn-default cancelaaprobacion">Cancelar</a></td>
                </tr>
            </table>
        </div>
    </div>
    <div class="modal fade static" id="modalErrores" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Errores <span></span></h3>
        </div>
        <div class="modal-body">
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-info action-aceptar">Aceptar</a></td>
                    <td><a href="javascript:;" class="btn btn-default action-cancelar">Cancelar</a></td>
                </tr>
            </table>
        </div>
    </div>
{% endblock %}