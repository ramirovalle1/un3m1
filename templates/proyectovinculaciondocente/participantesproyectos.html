{% extends "ajaxformbs.html" %}
{% load humanize %}
{% load sga_extras %}
{% block extraheading %}
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.6/js/dataTables.buttons.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.6/js/buttons.bootstrap.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.6/js/buttons.colVis.min.js"></script>
    <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/2.5.0/jszip.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.6/js/buttons.flash.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.6/js/buttons.html5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/js/i18n/es.js"></script>
    <script src="/static/adicionalesjs/formquestion.js?0.24"></script>
    <link href="/static/widget_ppp.css" rel="stylesheet"/>
    <link rel="stylesheet" href="/static/eventostyle.css">
    <link rel="stylesheet" href="/static/eventoframework.css">

    <style>
        .bordecaja {
            border: .07em solid rgba(0, 0, 0, .2);
            color: white;
        !important;
        }
        .course-path-card {
            background-color: #0b2f44;
        }
        .bordestabla {
            border: .07em solid rgba(0, 0, 0, .1);
            color: #000000;
            box-shadow: 1px 1px 3px #999;
        !important;
        }
        .course-path-card-footer {
            justify-content: normal;
        !important;
        }
    </style>

    <script type="text/javascript">
        $(document).ready(function() {
            $("#cancel_eliminarparticipantes").click(function(){
                $('#modalpregntadel').modal('hide');
            });
            $("#delparticipantes").click(function(){
                var idproyecto = {{ proyecto.id }}
                    bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/proyectovinculaciondocente",
                    data: {'action': 'delparticipantesproyectos', 'idproyecto': idproyecto },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error al obtener los datos.");
                    },
                    success: function (data) {
                        if (data.result == "ok") {
                            $("#modalpregntadel").modal({backdrop:'static', width: '600px'}).modal('hide');
                            location.href = '/proyectovinculaciondocente?action=participantesproyectos&id={{ proyecto.id }}'
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    }
                });

            });
            $('.registrarhorasblur').blur(function (){
               let elemento = $(this);
               let participante;
               let valoranterior = elemento.attr("valante");
               let horas = elemento.val();
               if(horas!=valoranterior){
                   let duracionproyecto = elemento.attr("duracion");
                   if((parseInt(horas)<=parseInt(duracionproyecto)) && parseInt(horas)>0){
                       participante = elemento.attr("idpar");
                       //alert(participante, duracionproyecto, valoranterior, horas);
                       bloqueointerface();
                       $.post("/proyectovinculaciondocente",{'action':'updatehoras','indi':participante, 'valor':horas}, function (data){
                           $.unblockUI();
                           if(data.result==='ok'){
                               elemento.attr({'va': data.valor});
                               elemento.val(data.valor);
                               elemento.hide();
                               console.log(elemento.parent());
                               $('#horascumplidas_'+participante).text(data.valor);
                           }else{
                               elemento.val(valoranterior);
                               smoke.alert(data.mensaje);
                           }
                       }).error(function () {
                           $.unblockUI();
                           elemento.val(valoranterior);
                           smoke.alert("Fallo al registrar horas");
                       })
                   }else{
                       smoke.alert("Las horas ingresadas deben ser menor o igual a la duración del proyecto.");
                   }
               }
            });
            $('.horas').blur(function(){
                var elemento = $(this);
                var indi;
                var valoranterior = elemento.attr("valante");
                var valoractual = elemento.val();
                if (valoractual!=valoranterior){
                    indi = elemento.attr("indi");
                    bloqueointerface();
                    $.post("/proyectovinculaciondocente", {'action': 'updatehoras', 'indi': indi, 'valor': valoractual}, function(data) {
                        $.unblockUI();
                        if (data.result=='ok') {
                            elemento.attr({'va': data.valor});
                            elemento.val(data.valor);
                        } else {
                            elemento.val(valoranterior);
                            smoke.alert(data.mensaje);
                        }
                    }).error(function(){
                        $.unblockUI();
                        elemento.val(valoranterior);
                        smoke.alert("Fallo al cambiar el cupo");
                    });
                }

            });
            $('.tipodocente').change(function(){
                var elemento = $(this);
                var cadena = elemento.val().split("_");
                var tipoparticipante = cadena[0];
                var idparticipante = cadena[1];
                bloqueointerface();
                $.post("/proyectovinculaciondocente", {'action': 'updatetipoparticipante', 'tipoparticipante': tipoparticipante, 'idparticipante': idparticipante}, function(data) {
                    $.unblockUI();
                    if (data.result=='ok') {
                        bloqueointerface();
                        location.href = 'proyectovinculaciondocente?action=participantesproyectos&id={{ proyecto.id }}';
                    } else {
                        {#                        elemento.val(valoranterior);#}
                        smoke.alert(data.mensaje);
                    }
                }).error(function(){
                    $.unblockUI();
                    elemento.val(valoranterior);
                    smoke.alert("Fallo al cambiar el cupo");
                });

            });
            /*$('.registrarhoras').click(function () {
                let idparticipacion = $(this).attr('idparticipacion');
                let idproyecto = $(this).attr('idproyecto');
                let idparticipante = $(this).attr('idparticipante');
                //alert(idparticipacion, idproyecto);
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/proyectovinculaciondocente",
                    data: {
                        'action': 'registrarhoras',
                        'idparticipacion': idparticipacion,
                        'idproyecto': idproyecto,
                        'idparticipante': idparticipante
                    },
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyhoras").html(data.data);
                            $("#paneltitlehoras").html(data.titulo);
                            $("#itemspanelhoras").modal({backdrop: 'static', width: '300px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                })
            });*/

        });
        $(function() {
            busqueda = function(){
                var term = $("#searchinput").val().toUpperCase().trim();
                if (term.length>0){
                    location.href = "proyectovinculaciondocente?action=participantesproyectos&id={{ proyecto.id }}&s="+term;
                }
            };

            $("#search").click(function(){
                busqueda();
            });

            $('#searchinput').keyup(function(e) {
                if(e.keyCode == 13) {
                    busqueda();
                }
            });
        });
        function eliminarparticipantes(idproyecto) {
            bloqueointerface();
            $("#modalpregntadel").modal({backdrop:'static', width: '600px'}).modal('show');
            $.unblockUI();
        }

        function formModal(id, participante, text, action, footer = true) {
            $('.panelbody_').empty();
            bloqueointerface();
            $.ajax({
                type: "GET",
                url: `{{ request.path }}`,
                data: {
                    'action': action,
                    'id': id,
                    'participante': participante
                },
                success: function (data) {
                    $.unblockUI();
                    if (data.result === true) {
                        if (footer === true) {
                            $('#footermodal').hide();
                        }
                        $('.panelbody_').html(data.data);
                        $('#itemspanel .paneltitle').html(text);
                        $("#itemspanel").modal({backdrop: 'static', width: '85%'}).modal('show');
                    } else {
                        smoke.alert(data.mensaje);
                    }
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error de conexión.");
                },
                dataType: "json"
            });
        }

        function registrarHoras(idproyecto, idparticipacion, idparticipante, text, action) {
            $('.panebodyhoras').empty();
            bloqueointerface();
            $.ajax({
                type: "GET",
                url: `{{ request.path }}`,
                data: {
                    'action': action,
                    'idparticipacion': idparticipacion,
                    'idproyecto': idproyecto,
                    'idparticipante': idparticipante
                },
                success: function (data) {
                    if (data.result === true) {
                        $.unblockUI();
                        /*if (footer === true) {
                            $('#footermodal').hide();
                        }*/
                        $('.panelbodyhoras').html(data.data);
                        $('#itemspanelhoras .paneltitlehoras').html(text);
                        $("#itemspanelhoras").modal({backdrop: 'static', width: '400'}).modal('show');
                    } else {
                        smoke.alert(data.mensaje);
                    }
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error de conexión.");
                },
                dataType: "json"
            });
        }

        $(function (){
           var panelvinculacion = localStorage.getItem('panelvinculacion');
            if (panelvinculacion) {
                panelvinculacion = "#1";
                localStorage.setItem("panelvinculacion", panelvinculacion);
                $('.tab-pane').removeClass('active');
                $(`${panelvinculacion}`).addClass('active');
            }

            $('.btntabla').each(function () {
                if ($(this).attr('href') == panelvinculacion) {
                    //alert(panelvinculacion);
                    $(this).trigger('click');
                }
            }).click(function () {
                let panelvinculacion = $(this).attr('href');
                localStorage.setItem("panelvinculacion", panelvinculacion);
                $('.tab-pane').removeClass('active');
                $(`${panelvinculacion}`).addClass('active');
                /*console.log($(this).attr('href'))*/
            });
        });



    </script>

{% endblock %}
{% block atras %}/proyectovinculaciondocente?action=listadoproyectos&id={{ proyecto.id }}{% endblock %}
{% block canvas %}

{#    <div class="modal fade static" id="itemspanelhoras" style="display: none;">#}
{#        <div class="modal-header">#}
{#            <button type="button" class="close" data-dismiss="modal" aria-label="Close">#}
{#                <span aria-hidden="true">×</span>#}
{#            </button>#}
{#            <b><h4 id="paneltitlehoras"></h4></b>#}
{#        </div>#}
{#        <div class="modal-body panelbodyhoras">#}
{#        </div>#}
{#    </div>#}

    <div class="modal fade static" id="itemspanelhoras" style="display: none;">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            <h4><i class="fa fa-list"></i> <b class="paneltitlehoras">FORMULARIO MODAL</b></h4>
        </div>
        <div class="modal-body">
            <form action="form-horizontal form-modal" autocomplete="off" method="post"
                  enctype="multipart/form-data" action="{{ request.path }}">{% csrf_token %}
                <div class="row-fluid panelbodyhoras"></div>
            </form>
        </div>
    </div>


    <div class="row-fluid">
        <div class="tabbable panelvinculacion">
{#            PARTICIPANTES MATRICES - ESTUDIANTES #}
            <a class="tabs btntabla" href="#1" data-toggle="tabs">
                <div class='span2' style="margin: 5px;">
                    <div class="course-path-card  uk-width-1-1 transition-3d-hover bordecaja" style="cursor:pointer;">
                        <div class="course-path-card-contents">
                            <h4><b style="color: white">ESTUDIANTES</b></h4>
                            <div style="text-align: left; font-size: 11px; color: white; !important;">
                                <b><i class="fa fa-sort-numeric-asc"></i> <span
                                        class="badge bg-success">{{ cantidad_estudiantes }}</span></b>
                            </div>
                        </div>
                    </div>
                </div>
            </a>
{#            PARTICIPANTES MATRICES - PROMOTORES Y LIDERES #}
            <a class="tabs btntabla" href="#2" data-toggle="tabs">
                <div class='span2' style="margin: 5px;">
                    <div class="course-path-card  uk-width-1-1 transition-3d-hover bordecaja" style="cursor:pointer;">
                        <div class="course-path-card-contents">
                            <h4><b style="color: white">DOCENTES</b></h4>
                            <div style="text-align: left; font-size: 11px; color: white; !important;">
                                <b><i class="fa fa-sort-numeric-asc"></i> <span
                                        class="badge bg-info">{{ cantidad_docentes }}</span></b>
                            </div>
                        </div>
                    </div>
                </div>
            </a>

            <a class="tabs btntabla" href="#3" data-toggle="tabs">
                <div class='span2' style="margin: 5px;">
                    <div class="course-path-card  uk-width-1-1 transition-3d-hover bordecaja" style="cursor:pointer;">
                        <div class="course-path-card-contents">
                            <h4><b style="color: white">ADMINISTRATIVOS</b></h4>
                            <div style="text-align: left; font-size: 11px; color: white; !important;">
                                <b><i class="fa fa-sort-numeric-asc"></i> <span
                                        class="badge bg-warning">{{ cantidad_administrativos }}</span></b>
                            </div>
                        </div>
                    </div>
                </div>
            </a>
        </div>
        <br>
        <div class="row-fluid">
            <div class="btn-group ">
                <a class="btn dropdown-toggle" data-toggle="dropdown" href="#"> Acciones<span
                        class="caret"></span></a>
                <ul class="dropdown-menu">
                    <li>
                    <li>
                        <a href="/proyectovinculaciondocente?action=excelparticipanteproyecto&idproyecto={{ proyecto.id }}"><i
                                class="fa fa-list "></i> Descargar Excel</a></li>
                    </li>
                </ul>
            </div>
        </div>
    <div class="tab-content">
        <div class="tab-pane" id="1">
            <div id="no-more-tables">
                <div class="row-fluid">
                    <div class="alert alert-warning span12">
                            <strong><i class="fa fa-warning"></i> ¡IMPORTANTE! </strong><br>
                            <strong> Una vez registradas las horas de cumplimiento del estudiante no se podrán realizar modificaciones en la mismas.</strong>
                    </div>
                </div>
                <div class='row-fluid'>
                    <div class='span12'>
                        <h4>
                            {{ title }}<br>
                            {{ proyecto }}
                        </h4>
                    </div>
                </div>

                <div class='row-fluid'>

                    <div class="span6">
                        <form class="form-search">
                            <input class='searchinput' type='text' id='searchinput' value='{{ search }}'
                                   autocomplete="off"/>
                            <a href="javascript:;" id='search' class='btn btn-info'><span class="fa fa-search "></span>
                                Buscar</a>
                            {% if search or ids %}
                                <a href="/proyectovinculaciondocente?action=participantesproyectos&id={{ proyecto.id }}"
                                   id='allresults' class='btn btn-info'><span class="fa fa-refresh "></span> Todos</a>
                            {% endif %}
                        </form>
                    </div>
                </div>

                <div class='row-fluid'>
                    <div class='span12'>
                        <table class='table table-bordered bordestabla uk-width-1-1'>
                            <thead>
                            <tr>
                                <th colspan="8">Participantes (Estudiantes)</th>
                            </tr>
                            <tr>
                                <th style="text-align: center;"><i class="fa fa-user"></i> Datos del Estudiante
                                </th>
                                <th style="text-align: center;"><i class="fa fa-graduation-cap"></i> Carrera
                                </th>
                                <th style="text-align: center;"><i class="fa fa-tag"></i> Tipo</th>
                                <th style="text-align: center;" colspan="2">
                                    <iclass
                                    ="fa fa-american-sign-language-interpreting"></i> Datos de
                                    Participación
                                </th>
                                <th style="text-align: center;">Acciones</th>
                            </tr>
                            </thead>

                            <tbody>
                            {% for participante in participantes %}
                                <tr>
                                    <td>
                                        <b><i class="fa fa-id-card"></i> Cédula:
                                        </b>{{ participante.inscripcion.persona.cedula|default_if_none:"" }}<br>
                                        <b><i class="fa fa-user"></i> Nombres:
                                        </b> {{ participante.inscripcion|default_if_none:"" }} <br>
                                        <b><i class="fa fa-envelope"></i> Email:
                                        </b> {{ participante.inscripcion.persona.emailinst }} <br>
                                        <b><i class="fa fa-mobile-phone"></i> Celular:
                                        </b> {{ participante.inscripcion.persona.telefono }}
                                    </td>

                                    <td style="text-align: justify;">
                                        {{ participante.inscripcion.carrera }}
                                    </td>

                                    <td style="text-align: center; vertical-align: middle">
                                        {% if participante.inscripcion %}
                                            <span class="badge badge-info"
                                                  data-original-title="Estudiante"> ESTUDIANTE</span>
                                        {% endif %}
                                    </td>

                                    <td style="text-align: center; vertical-align: middle">
                                        {% if participante.registrohorasdesde %}
                                                    {% if not participante.horas %}
                                                        {% if participante.puede_registrar_horas %}
                                                            <input class="form-imput input-mini registrarhorasblur" idpar="{{ participante.id }}"
                                                                   duracion="{{ participante.proyecto.horas }}"
                                                                   valante="{{ participante.horas }}"
                                                                   value="{{ participante.horas|default_if_none:"0" }}"
                                                                   type="text"><br>
                                                        {% endif %}
                                                    {% endif %}
                                        {% endif %}

                                        <b><i class="fa fa-clock-o"></i> Horas Cumplidas: </b><span
                                            class="badge badge-info" id="horascumplidas_{{ participante.id }}">{{ participante.horas }}</span><br>
                                        {% if participante.horas %}
                                            <b><i class="fa fa-user"></i> Usuario Modificación: {{ participante.usuario_modificacion }}</b><br>
                                            <b><i class="fa fa-calendar"></i> Fecha Modificación: {{ participante.fecha_modificacion|date:'Y-m-d H:i' }}</b>
                                        {% endif %}

                                    </td>
                                    <td>
                                        <b><i class="fa fa-file"></i> Informes:</b><br>
                                        <b style="vertical-align: middle"><i class="fa fa-chevron-circle-right"></i>
                                            Cargados: </b> <span
                                            class="badge badge-info"> {{ participante.cantidad_informes_cargados }}</span><br>
{#                                        <b style="vertical-align: middle"><i class="fa fa-chevron-circle-right"></i>#}
{#                                            Pendientes: </b> <span#}
{#                                            class="badge badge-inverse"> {{ participante.cantidad_informes_pendientes }}</span><br>#}
                                        {#                                        <b style="vertical-align: middle"><i class="fa fa-chevron-circle-right"></i> Por#}
                                        {#                                            Corregir: </b> <span#}
                                        {#                                            class="badge badge-warning"> {{ participante.cantidad_informes_corregir }}</span><br>#}
                                        <b style="vertical-align: middle"><i class="fa fa-chevron-circle-right"></i>
                                            Aprobados: </b> <span
                                            class="badge badge-success"> {{ participante.cantidad_informes_aprobados }}</span><br>
                                        <b style="vertical-align: middle"><i class="fa fa-chevron-circle-right"></i>
                                            Rechazados: </b> <span
                                            class="badge badge-danger"> {{ participante.cantidad_informes_rechazados }}</span>
                                    </td>

                                    <td style="text-align: center;">
                                        <div class="btn-group">
                                            <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown"
                                               href="javascript:;">Acciones<span class="caret"></span></a>
                                            <ul class="dropdown-menu pull-right">

                                                <li><a href="javascript:void(0);"
                                                       onclick="formModal('{{ participante.id }}','{{ participante.inscripcion.pk }}', 'Ver Informes de Cumplimiento de {{ participante.inscripcion }}', 'revisarinformes', true)"
                                                       style="text-align: left"><i class="fa fa-files-o"></i> Revisar Informes</a></li>

{#                                                {% if participante.registrohorasdesde %}#}
{#                                                    {% if not participante.horas %}#}
{#                                                        {% if participante.puede_registrar_horas %}#}
{#                                                            <li><a#}
{#                                                                    href="javascript:void(0);"#}
{#                                                                    onclick="registrarHoras('{{ participante.proyecto.id }}',#}
{#                                                                            '{{ participante.id }}',#}
{#                                                                            '{{ participante.inscripcion.id }}',#}
{#                                                                            'REGISTRAR HORAS',#}
{#                                                                            'registrarhoras')"#}
{#                                                                    style="text-align: left"#}
{#                                                            ><i class="fa fa-clock-o"></i> Registrar Horas</a></li>#}
{#                                                        {% endif %}#}
{#                                                    {% endif %}#}
{#                                                {% endif %}#}
                                                <li><a class="eliminacionmodal" style="text-align: left"
                                                       href="javascript:;"
                                                       nhref='/proyectovinculaciondocente?action=deleteparticipanteproyecto&idproyecto={{ participante.proyecto.id }}&id={{ participante.id }}&tipo=2'><i
                                                        class="fa fa-close"></i> Eliminar</a></li>
                                            </ul>
                                        </div>
                                    </td>
                                </tr>
                            {% endfor %}
                            {% if not participantes %}
                                <tr>
                                    <td colspan="5">
                                        NO SE REGISTRAN PARTICIPANTES ESTUDIANTES
                                    </td>
                                </tr>
                            {% endif %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>


            <div class='row-fluid'>
                <div class="span12">
                    {% if paging.num_pages > 20 %}
                        <div class='pagination'>
                            <ul>
                                {% if paging.primera_pagina %}
                                    <li>
                                        <a href="/proyectovinculaciondocente?action=participantesproyectos&id={{ proyecto.id }}&{% if search %}s={{ search }}&{% endif %}page=1">1</a>
                                    </li>
                                    <li>
                                        <a href="/proyectovinculaciondocente?action=participantesproyectos&id={{ proyecto.id }}&{% if search %}s={{ search }}&{% endif %}page={{ paging.ellipsis_izquierda }}"
                                           class="active">...</a></li>
                                {% endif %}
                                {% for pagenumber in paging.paginas %}
                                    <li {%  if pagenumber == page.number %}class='active'{% endif %}><a
                                            href="/proyectovinculaciondocente?{% if search %}s={{ search }}&{% endif %}page={{ pagenumber }}">{{ pagenumber }}</a>
                                    </li>
                                {% endfor %}
                                {% if paging.ultima_pagina %}
                                    <li>
                                        <a href="/proyectovinculaciondocente?action=participantesproyectos&id={{ proyecto.id }}&{% if search %}s={{ search }}&{% endif %}page={{ paging.ellipsis_derecha }}"
                                           class="active">...</a></li>
                                    <li>
                                        <a href="/proyectovinculaciondocente?action=participantesproyectos&id={{ proyecto.id }}&{% if search %}s={{ search }}&{% endif %}page={{ paging.num_pages }}">{{ paging.num_pages }}</a>
                                    </li>
                                {% endif %}
                            </ul>
                        </div>
                    {% else %}
                        <div class='pagination'>
                            <ul>
                                {% for pagenumber in paging.page_range %}
                                    <li {%  if pagenumber == page.number %}class='active'{% endif %}><a
                                            href="/proyectovinculaciondocente?action=participantesproyectos&id={{ proyecto.id }}&{% if search %}s={{ search }}&{% endif %}page={{ pagenumber }}">{{ pagenumber }}</a>
                                    </li>
                                {% endfor %}
                            </ul>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
{#            ================================================================== DOCENTES ======================================================#}
        <div class="tab-pane" id="2">
            <div id="no-more-tables">
                <div class='row-fluid'>
                    <div class='span12'>
                        <h4>
                            {{ title }}<br>
                            {{ proyecto }}
                        </h4>
                    </div>
                </div>

                <div class='row-fluid'>
                    <div class='span12'>
                        <table class='table table-bordered bordestabla uk-width-1-1'>
                            <thead>
                            <tr>
                                <th colspan="8">Participantes (Docentes)</th>
                            </tr>
                            <tr>
                                <th style="text-align: center;"><i class="fa fa-user"></i> Datos del Personal</th>
                                <th style="text-align: center;"><i class="fa fa-graduation-cap"></i> Carrera</th>
                                <th style="text-align: center;"><i class="fa fa-tag"></i> Tipo</th>
                                <th style="text-align: center;">Acciones</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for participante in personal_docente %}
                                <tr>
                                    <td>
                                        {% if participante.profesor %}
                                            <b><i class="fa fa-id-card"></i> Cédula:
                                            </b>{{ participante.profesor.persona.cedula|default_if_none:"" }}<br>
                                            <b><i class="fa fa-user"></i> Nombres:
                                            </b> {{ participante.profesor|default_if_none:"" }} <br>
                                            <b><i class="fa fa-envelope"></i> Email:
                                            </b> {{ participante.profesor.persona.emailinst }} <br>
                                            <b><i class="fa fa-mobile-phone"></i> Celular:
                                            </b> {{ participante.profesor.persona.telefono }}
                                        {% endif %}
                                    </td>
                                    <td style="text-align: justify">
                                        {{ participante.profesor.coordinacion }}
                                    </td>
                                    <td style="text-align: center;">
                                        <select class="form-control tipodocente" id="tipodocente" name="tipodocente">
                                            {% for tipopar in tipoparticipante %}
                                                <option {% if tipopar.id == participante.tipoparticipante.id %}
                                                    selected {% endif %}
                                                    value="{{ tipopar.id }}_{{ participante.id }}">{{ tipopar }}</option>
                                            {% endfor %}
                                        </select>
                                    </td>
                                    <td style="text-align: center;">
                                        <div class="btn-group">
                                            <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown"
                                               href="javascript:;">Acciones<span class="caret"></span></a>
                                            <ul class="dropdown-menu pull-right">
                                                <li><a class="eliminacionmodal" style="text-align: left" href="javascript:;" nhref='/proyectovinculaciondocente?action=deleteparticipanteproyecto&idproyecto={{ participante.proyecto.id }}&id={{ participante.id }}&tipo=1'><i class="fa fa-close"></i> Eliminar</a></li>
                                            </ul>
                                        </div>
                                    </td>
                                </tr>
                            {% endfor %}
                            {% if not personal_docente %}
                                <tr>
                                    <td colspan="4">
                                        NO SE REGISTRAN DOCENTES
                                    </td>
                                </tr>
                            {% endif %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>


        </div>
{#            ================================================================== ADMINISTRATIVOS ======================================================#}
        <div class="tab-pane" id="3">
            <div id="no-more-tables">
                <div class='row-fluid'>
                    <div class='span12'>
                        <h4>
                            {{ title }}<br>
                            {{ proyecto }}
                        </h4>
                    </div>
                </div>

                <div class='row-fluid'>
                    <div class='span12'>
                        <table class='table table-bordered bordestabla uk-width-1-1'>
                            <thead>
                            <tr>
                                <th colspan="8">Participantes (Administrativos)</th>
                            </tr>
                            <tr>
                                <th style="text-align: center;"><i class="fa fa-user"></i> Datos del Personal</th>
                                <th style="text-align: center;"><i class="fa fa-tag"></i> Tipo</th>
                                <th style="text-align: center;">Acciones</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for participante in personal_administrativo %}
                                <tr>
                                    <td>
                                        {% if participante.profesor %}
                                            <b><i class="fa fa-id-card"></i> Cédula:
                                            </b>{{ participante.administrativo.persona.cedula|default_if_none:"" }}
                                            <br>
                                            <b><i class="fa fa-user"></i> Nombres:
                                            </b> {{ participante.administrativo|default_if_none:"" }} <br>
                                            <b><i class="fa fa-envelope"></i> Email:
                                            </b> {{ participante.administrativo.persona.emailinst }} <br>
                                            <b><i class="fa fa-mobile-phone"></i> Celular:
                                            </b> {{ participante.administrativo.persona.telefono }}
                                        {% endif %}
                                    </td>
                                    <td style="text-align: center;">
                                        <span class="badge badge-green" data-original-title="Administrativo"> ADMINISTRATIVO</span>
                                    </td>
                                    <td style="text-align: center;">
                                        <div class="btn-group">
                                            <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown"
                                               href="javascript:;">Acciones<span class="caret"></span></a>
                                            <ul class="dropdown-menu pull-right">
                                                <li><a class="eliminacionmodal" style="text-align: left"
                                                       href="javascript:;"
                                                       nhref='/proyectovinculaciondocente?action=deleteparticipanteproyecto&idproyecto={{ participante.proyecto.id }}&id={{ participante.id }}&tipo=3'><i
                                                        class="fa fa-close"></i> Eliminar</a></li>
                                            </ul>
                                        </div>
                                    </td>
                                </tr>
                            {% endfor %}
                            {% if not personal_administrativo %}
                                <tr>
                                    <td colspan="4">
                                        NO SE REGISTRA PERSONAL ADMINISTRATIVO
                                    </td>
                                </tr>
                            {% endif %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    <div class="modal fade static modal-xl" id="itemspanel" style="display: none;">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            <h4><i class="fa fa-list"></i> <b class="paneltitle">FORMULARIO MODAL</b></h4>
        </div>
        <div class="modal-body">
            <form autocomplete="off" method="post"
                  enctype="multipart/form-data" action="{{ request.path }}">
                {% csrf_token %}
                <div class="row-fluid panelbody_">
                </div>
            </form>
        </div>
        <div class="modal-footer" id="footermodal">
            <a href="javascript:;" class="btn btn-danger" data-dismiss="modal">Cerrar</a>
        </div>
    </div>

{#    <div class='row-fluid'>#}
{#        <div class='span12'>#}
{#            <h4>{{ title }}<br>{{ proyecto }}</h4>#}
{#        </div>#}
{#    </div>#}
{#    <div class='row-fluid'>#}
{#        <div class="span6">#}
{#            <div class="btn-group ">#}
{#                <a class="btn dropdown-toggle" data-toggle="dropdown" href="#"> Acciones<span class="caret"></span></a>#}
{#                <ul class="dropdown-menu">#}
{#                    <li><a href="/proyectovinculaciondocente?action=addparticipantesdocentes&idproyecto={{ proyecto.id }}&tipoparticipante={{ proyecto.tipo }}"><i class="fa fa-user"></i> Adicionar Participante Docente</a></li>#}
                  {# <!--  <li><a href="/proyectovinculaciondocente?action=addparticipantesestudiantes&idproyecto={{ proyecto.id }}"><i class="fa fa-user"></i> Adicionar Participante Estudiante</a></li>--> #}
{#                    <li><a href="/proyectovinculaciondocente?action=addparticipantesadministrativos&idproyecto={{ proyecto.id }}"><i class="fa fa-user"></i> Adicionar Participante Administrativo</a></li>#}
{#                    <li><li><a href="/proyectovinculaciondocente?action=excelparticipanteproyecto&idproyecto={{ proyecto.id }}"><i class="fa fa-list "></i> Descargar Excel</a></li></li>#}
{#                </ul>#}
{#            </div>#}
{#            {% if participantes %}#}
{#                <a href="javascript:;" class='btn btn-danger' onclick="eliminarparticipantes({{ proyecto.id }})"><span class="fa fa-trash"></span> Eliminar</a>#}
{#            {% endif %}#}
{#        </div>#}
{#        <div class="span6">#}
{#            <form class="form-search">#}
{#                <input class='searchinput' type='text' id='searchinput' value='{{ search }}' autocomplete="off"/>#}
{#                <a href="javascript:;" id='search' class='btn btn-info'><span class="fa fa-search " ></span> Buscar</a>#}
{#                {% if search or ids %}#}
{#                    <a href="/proyectovinculaciondocente?action=participantesproyectos&id={{ proyecto.id }}" id='allresults' class='btn btn-info'><span class="fa fa-refresh " ></span> Todos</a>#}
{#                {% endif %}#}
{#            </form>#}
{#        </div>#}
{#    </div>#}
{#    <div class='row-fluid'>#}
{#        <div class='span12'>#}
{#            <table class='table table-striped table-bordered'>#}
{#                <thead>#}
{#                <tr>#}
{#                    <th style="width: 50px;text-align: center;">CEDULA</th>#}
{#                    <th style="text-align: center;"><i class="fa fa-user"></i> Datos del Estudiante</th>#}
{#                    <th style="text-align: center;"><i class="fa fa-graduation-cap"></i> Carrera</th>#}
{#                    <th style="text-align: center;"><i class="fa fa-tag"></i> Tipo</th>#}
{#                    <th style="text-align: center;" colspan="2"><i class="fa fa-american-sign-language-interpreting"></i> Datos de Participación</th>#}
{#                    <th style="text-align: center;">Acciones</th>#}
{#                </tr>#}
{#                </thead>#}
{#                <tbody>#}
{#                {% for participante in participantes %}#}
{#                    <tr>#}
{#                        <td>#}
{#                            {% if participante.profesor %}#}
{#                                {{ participante.profesor|default_if_none:"" }}#}
{#                            {% endif %}#}
{#                            {% if participante.inscripcion %}#}
{#                                <b><i class="fa fa-id-card"></i> Cédula:#}
{#                                </b>{{ participante.profesor.persona.cedula|default_if_none:"" }}#}
{#                                {{ participante.inscripcion.persona.cedula|default_if_none:"" }}#}
{#                                {{ participante.administrativo.persona.cedula|default_if_none:"" }}<br>#}
{#                                <b><i class="fa fa-user"></i> Nombres: </b> {{ participante.inscripcion|default_if_none:"" }} <br>#}
{#                                <b><i class="fa fa-envelope"></i> Email: </b> {{ participante.inscripcion.persona.emailinst }} <br>#}
{#                                <b><i class="fa fa-mobile-phone"></i> Celular: </b> {{ participante.inscripcion.persona.telefono }}#}
{#                            {% endif %}#}
{#                            {% if participante.administrativo %}#}
{#                                {{ participante.administrativo|default_if_none:"" }}#}
{#                            {% endif %}#}
{#                        </td>#}
{#                        <td style="text-align: justify;">#}
{#                            {% if participante.profesor %}#}
{#                                {{ participante.profesor.coordinacion }}#}
{#                            {% endif %}#}
{#                            {% if participante.inscripcion %}#}
{#                                {{ participante.inscripcion.carrera }}#}
{#                            {% endif %}#}
{#                            {% if participante.administrativo %}#}
{#                                {{ participante.administrativo|default_if_none:"" }}#}
{#                            {% endif %}#}
{#                        </td>#}
{#                        <td style="text-align: center;">#}
{#                            {% if participante.profesor %}#}
{#                                <select class="form-control tipodocente" id="tipodocente" name="tipodocente">#}
{#                                    {% for tipopar in tipoparticipante %}#}
{#                                        <option {% if tipopar.id == participante.tipoparticipante.id %} selected {% endif %} value="{{ tipopar.id }}_{{ participante.id }}">{{ tipopar }}</option>#}
{#                                    {% endfor %}#}
{#                                </select>#}
                                {#                                <span class="label label-info tu" data-original-title="Docente"> {{ participante.tipoparticipante }}</span>#}
{#                            {% endif %}#}
{#                            {% if participante.inscripcion %}#}
{#                                <span class="badge badge-info" data-original-title="Estudiante"> ESTUDIANTE</span>#}
{#                            {% endif %}#}
{#                            {% if participante.administrativo %}#}
{#                                <span class="badge badge-green" data-original-title="Administrativo"> ADMINISTRATIVO</span>#}
{#                            {% endif %}#}
{#                        </td>#}
{#                        <td>#}
{#                            <b><i class="fa fa-clock-o"></i> Horas Cumplidas: </b><span class="badge badge-info">0</span><br>#}
{#                            <b><i class="fa fa-check"></i> Estado: </b><span class="badge badge-success">---</span><br>#}
{#                        </td>#}
{#                        <td>#}
{#                            <b><i class="fa fa-file"></i> Informes:</b><br>#}
{#                            <b style="vertical-align: middle"><i class="fa fa-chevron-circle-right"></i> Cargados: </b> <span class="badge badge-info"> {{ participante.cantidad_informes_cargados }}</span><br>#}
{#                            <b style="vertical-align: middle"><i class="fa fa-chevron-circle-right"></i> Pendientes: </b> <span class="badge badge-inverse"> {{ participante.cantidad_informes_pendientes }}</span><br>#}
{#                            <b style="vertical-align: middle"><i class="fa fa-chevron-circle-right"></i> Por Corregir: </b> <span class="badge badge-warning"> {{ participante.cantidad_informes_corregir }}</span><br>#}
{#                            <b style="vertical-align: middle"><i class="fa fa-chevron-circle-right"></i> Aprobados: </b> <span class="badge badge-success"> {{ participante.cantidad_informes_aprobados }}</span><br>#}
{#                            <b style="vertical-align: middle"><i class="fa fa-chevron-circle-right"></i> Rechazados: </b> <span class="badge badge-danger"> {{ participante.cantidad_informes_rechazados }}</span>#}
{#                        </td>#}
{#                        <td style="text-align: center;">#}
{#                            <div class="btn-group">#}
{#                                <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown"#}
{#                                   href="javascript:;">Acciones<span class="caret"></span></a>#}
{#                                <ul class="dropdown-menu pull-right">#}
{#                                    <li><a href="javascript:void(0);"#}
{#                                           onclick="formModal('{{ participante.id }}','{{ participante.inscripcion.pk }}', 'Ver Informes de Cumplimiento de {{ participante.inscripcion }}', 'revisarinformes', true)"#}
{#                                           style="text-align: left"><i class="fa fa-files-o"></i> Revisar Informes</a></li>#}
{#                                    {% if participante.profesor %}#}
{#                                        <li><a class="eliminacionmodal" style="text-align: left" href="javascript:;" nhref='/proyectovinculaciondocente?action=deleteparticipanteproyecto&idproyecto={{ participante.proyecto.id }}&id={{ participante.id }}&tipo=1'><i class="fa fa-close"> Eliminar</i></a></li>#}
{#                                    {% endif %}#}
{#                                    {% if participante.inscripcion %}#}
{#                                        <li><a class="eliminacionmodal" style="text-align: left" href="javascript:;" nhref='/proyectovinculaciondocente?action=deleteparticipanteproyecto&idproyecto={{ participante.proyecto.id }}&id={{ participante.id }}&tipo=2'><i class="fa fa-close"></i> Eliminar</a></li>#}
{#                                    {% endif %}#}
{#                                    {% if participante.administrativo %}#}
{#                                        <li><a class="eliminacionmodal" style="text-align: left" href="javascript:;" nhref='/proyectovinculaciondocente?action=deleteparticipanteproyecto&idproyecto={{ participante.proyecto.id }}&id={{ participante.id }}&tipo=3'><i class="fa fa-close"></i> Eliminar</a></li>#}
{#                                    {% endif %}#}
{#                                </ul>#}
{#                            </div>#}
{#                        </td>#}
{#                    </tr>#}
{#                {% endfor %}#}
{#                {% if not participantes %}#}
{#                    <tr>#}
{#                        <td colspan="6">#}
{#                            NO HAY PARTICIPANTES#}
{#                        </td>#}
{#                    </tr>#}
{#                {% endif %}#}
{#                </tbody>#}
{#            </table>#}
{#        </div>#}
{#    </div>#}
{#    <div class='row-fluid'>#}
{#        <div class="span12">#}
{#            {% if paging.num_pages > 20 %}#}
{#                <div class='pagination'>#}
{#                    <ul>#}
{#                        {% if paging.primera_pagina %}#}
{#                            <li><a href="/proyectovinculaciondocente?action=participantesproyectos&id={{ proyecto.id }}&{% if search %}s={{ search }}&{% endif %}page=1">1</a></li>#}
{#                            <li><a href="/proyectovinculaciondocente?action=participantesproyectos&id={{ proyecto.id }}&{% if search %}s={{ search }}&{% endif %}page={{ paging.ellipsis_izquierda }}" class="active">...</a></li>#}
{#                        {% endif %}#}
{#                        {% for pagenumber in paging.paginas %}#}
{#                            <li {%  if pagenumber == page.number %}class='active'{% endif %}><a href="/proyectovinculaciondocente?{% if search %}s={{ search }}&{% endif %}page={{ pagenumber }}">{{ pagenumber }}</a></li>#}
{#                        {% endfor %}#}
{#                        {% if paging.ultima_pagina %}#}
{#                            <li><a href="/proyectovinculaciondocente?action=participantesproyectos&id={{ proyecto.id }}&{% if search %}s={{ search }}&{% endif %}page={{ paging.ellipsis_derecha }}" class="active">...</a></li>#}
{#                            <li><a href="/proyectovinculaciondocente?action=participantesproyectos&id={{ proyecto.id }}&{% if search %}s={{ search }}&{% endif %}page={{ paging.num_pages }}">{{ paging.num_pages }}</a></li>#}
{#                        {% endif %}#}
{#                    </ul>#}
{#                </div>#}
{#            {% else %}#}
{#                <div class='pagination'>#}
{#                    <ul>#}
{#                        {% for pagenumber in paging.page_range %}#}
{#                            <li {%  if pagenumber == page.number %}class='active'{% endif %}><a href="/proyectovinculaciondocente?action=participantesproyectos&id={{ proyecto.id }}&{% if search %}s={{ search }}&{% endif %}page={{ pagenumber }}">{{ pagenumber }}</a></li>#}
{#                        {% endfor %}#}
{#                    </ul>#}
{#                </div>#}
{#            {% endif %}#}
{#        </div>#}
{#    </div>#}
    <div class="modal fade static" id="modalpregntadel" style="display: none;">
        <div class="modal-header">
            <h4 id="paneltitle">Eliminar participantes</h4>
        </div>
        <div class="modal-body panelbody">
            <div class="alert alert-danger">
                <h4 class="alert-heading">CONFIRMACIÓN</h4>
                Al dar clic en eliminar se borrará todo el listado de participantes(estudiantes,docente,administrativos)
            </div>
            <p style="margin-top: 16px;">Esta seguro(a) que desea eliminar participantes?</p>
            <input type="hidden" id="idepregunta" name="idepregunta">
        </div>
        <div class="modal-footer">
            <p style="text-align: right; margin-bottom: 0">
                <a href="javascript:;" id="delparticipantes" class='btn btn-danger'> Eliminar</a>
                <a href="javascript:;" id="cancel_eliminarparticipantes" class='btn btn-default'> Cancelar</a>
            </p>
        </div>
    </div>
{% endblock %}



