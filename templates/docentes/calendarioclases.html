{% load humanize %}
{% load sga_extras %}
<style>
    .actionGoDay:hover{
        cursor: pointer;
        background-color: #d2e3fc;
        color: #185abc;
    }
</style>
<script type="text/javascript">
    var loadCalendario = function (aData){
        bloqueointerface();
        $.ajax({
            type: "POST",
            url: "/api/data/inno",
            data: aData,
            success: function(data){
                if (data.result == 'ok') {
                    $(".modal-body", $("#{{ modal }}")).html(data.html);
                    $.unblockUI();
                }else{
                    NotificationJG.error(data.mensaje);
                    $.unblockUI();
                }
            },
            error: function() {
                NotificationJG.error("Error de conexión");
                $.unblockUI();
            },
            dataType: "json"
        });
    }
    $(function (){
        $(".actionMoveCalendar", $("#{{ modal }}")).click(function (){
            let idp = $(this).attr('idp');
            let mes = $(this).attr('mes');
            let anio = $(this).attr('anio');
            let dia = $(this).attr('dia');
            let numsemana = $(this).attr('numsemana');
            let action = $(this).attr('action');
            let ver = $(this).attr('ver');
            let modal = '{{ modal }}';
            var aData = {
                "action": "loadTeacherClassCalendar",
                "idp": idp,
                "mover": action,
                "mes": mes,
                "dia": dia,
                "anio": anio,
                "numsemana": numsemana,
                "ver": ver,
                "modal": modal,
            }
            loadCalendario(aData);

        });
        $(".actionLoadCalendar", $("#{{ modal }}")).click(function (){
            let idp = $(this).attr('idp');
            let ver = $(this).attr('ver');
            let modal = '{{ modal }}';
            var aData = {
                "action": "loadTeacherClassCalendar",
                "idp": idp,
                "ver": ver,
                "modal": modal,
            }
            loadCalendario(aData);

        });

        $(".actionGoDay", $("#{{ modal }}")).click(function (){
            let idp = $(this).attr('idp');
            let ver = 'D';
            let mes = $(this).attr('mes');
            let anio = $(this).attr('anio');
            let dia = $(this).attr('dia');
            let modal = '{{ modal }}';
            var aData = {
                "action": "loadTeacherClassCalendar",
                "idp": idp,
                "ver": ver,
                "mes": mes,
                "dia": dia,
                "anio": anio,
                "mover": "day",
                "modal": modal,
            }
            loadCalendario(aData);

        });

        $("#id_lista_ver", $("#{{ modal }}")).change(function (){
            let idp = $(this).attr('_value_idp');
            let ver = $(this).val();
            let modal = '{{ modal }}';
            var aData = {
                "action": "loadTeacherClassCalendar",
                "idp": idp,
                "ver": ver,
                "modal": modal,
            }
            console.log(aData);
            loadCalendario(aData);
        });

        $('select').select2({minimumResultsForSearch: 20, width: '100%', dropdownParent: $('#{{ modal }}') });
        $(".tl", $('#{{ modal }}')).tooltip({placement: "left"});
        $(".tr", $('#{{ modal }}')).tooltip({placement: "right"});
        $(".tu", $('#{{ modal }}')).tooltip({placement: "top"});
        $(".tb", $('#{{ modal }}')).tooltip({placement: "bottom"});
    });
</script>
<div class="row-fluid">
    <div class="span3">
        <div class="row-fluid">
            <div class="span12">
                {% if ver == 'M' %}
                    <table width="100%" border="0" cellspacing="0" cellpadding="0" class="table table-bordered" style="margin-bottom: 5px !important;">
                        <tr>
                            <th style="height: 10%; text-align: center;vertical-align: middle;"><a href="javascript:;" class="btn btn-mini actionMoveCalendar" mes={{ pmes }} anio={{ panio }} dia="0" numsemana="0" idp="{{ profesor.id }}" action="before" ver="M"><i class="fa fa-backward"></i></a></th>
                            <th style="height: 80%; text-align: center;vertical-align: middle;">{{ mes.1|upper }} de {{ panio }}</th>
                            <th style="height: 10%; text-align: center;vertical-align: middle;"><a href="javascript:;" class="btn btn-mini actionMoveCalendar" mes={{ pmes }} anio={{ panio }} dia="0" numsemana="0" idp="{{ profesor.id }}" action="after" ver="M"><i class="fa fa-forward"></i></a></th>
                        </tr>
                    </table>
                {% endif %}
                {% if ver == 'D' %}
                    <table width="100%" border="0" cellspacing="0" cellpadding="0" class="table table-bordered" style="margin-bottom: 5px !important;">
                        <tr>
                            <th style="height: 10%; text-align: center;vertical-align: middle;"><a href="javascript:;" class="btn btn-mini actionMoveCalendar" mes={{ pmes }} anio={{ panio }} dia="{{ pdia }}" numsemana="0" idp="{{ profesor.id }}" action="before" ver="D"><i class="fa fa-backward"></i></a></th>
                            <th style="height: 80%; text-align: center;vertical-align: middle;">{{ pdia }} de {{ mes_verbose }} de {{ panio }}</th>
                            <th style="height: 10%; text-align: center;vertical-align: middle;"><a href="javascript:;" class="btn btn-mini actionMoveCalendar" mes={{ pmes }} anio={{ panio }} dia="{{ pdia }}" numsemana="0" idp="{{ profesor.id }}" action="after" ver="D"><i class="fa fa-forward"></i></a></th>
                        </tr>
                    </table>
                {% endif %}
                {% if ver == 'W' %}
                    <table width="100%" border="0" cellspacing="0" cellpadding="0" class="table table-bordered" style="margin-bottom: 5px !important;">
                        <tr>
                            <th style="height: 10%; text-align: center;vertical-align: middle;"><a href="javascript:;" class="btn btn-mini actionMoveCalendar" mes={{ pmes }} anio={{ panio }} dia="0" numsemana="{{ numsemana }}" idp="{{ profesor.id }}" action="before" ver="W"><i class="fa fa-backward"></i></a></th>
                            <th style="height: 80%; text-align: center;vertical-align: middle;">{{ semana_verbose }}</th>
                            <th style="height: 10%; text-align: center;vertical-align: middle;"><a href="javascript:;" class="btn btn-mini actionMoveCalendar" mes={{ pmes }} anio={{ panio }} dia="0" numsemana="{{ numsemana }}" idp="{{ profesor.id }}" action="after" ver="W"><i class="fa fa-forward"></i></a></th>
                        </tr>
                    </table>
                {% endif %}
                <table width="100%" border="0" cellspacing="0" cellpadding="0" class="table table-bordered" style="margin-bottom: 5px !important;">
                    <tr>
                        <th colspan="2" style="height: 100%; vertical-align: middle; text-align: center;"><a href="javascript:;" class="btn btn-primary btn-large actionLoadCalendar" idp="{{ profesor.id }}" ver="{{ ver }}"><i class="fa fa-calendar-times-o"></i> HOY</a></th>
                    </tr>
                    <tr>
                        <td style="height: 40%; vertical-align: middle; text-align: right; padding-right: 10px"><b>Ver:</b></td>
                        <td style="height: 60%; vertical-align: middle">
                            <select name="lista_ver" id="id_lista_ver" _value_idp="{{ profesor.id }}">
                                {% for l in lista_ver %}
                                    <option value="{{ l.0 }}" {% if l.0 == ver %}selected="selected"{% endif %}>{{ l.1 }}</option>
                                {% endfor %}
                            </select>
                        </td>
                    </tr>
                </table>
                <table width="100%" border="0" cellspacing="0" cellpadding="0" class="table table-bordered" style="margin-bottom: 5px !important;">
                    <tr class="">
                        <td style="text-align: center">
                            <a style="color: #055f67; font-size: 18px" href="#"><i class="fa fa-check-square-o"></i></a>
                        </td>
                        <td style="text-align: justify"><b>TIENE CLASES PLANIFICADAS</b></td>
                    </tr>
                    <tr>
                        <td style="text-align: center">
                            <a style="color: #b94a48; font-size: 18px" href="#"><i class="fa fa-close"></i></a>
                        </td>
                        <td style="text-align: justify"><b>NO APERTURO CLASES</b></td>
                    </tr>
                    <tr>
                        <td style="text-align: center">
                            <a style="color: #faa732; font-size: 18px" href="#"><i class="fa fa-close"></i></a>
                        </td>
                        <td style="text-align: justify"><b>NO SUBIO VIDEO</b></td>
                    </tr>
                    <tr>
                        <td style="text-align: center">
                            <a style="color: #5bb75b; font-size: 18px" href="#"><i class="fa fa-check-square-o"></i></a>
                        </td>
                        <td style="text-align: justify"><b>DÍA NO LABORABLE</b></td>
                    </tr>
                    <tr>
                        <td style="text-align: center">
                            <a style="color: #c5c6c8; font-size: 18px" href="#"><i class="fa fa-circle-o"></i></a>
                        </td>
                        <td style="text-align: justify"><b>NO TIENE CLASES/TUTORIAS PLANIFICADAS</b></td>
                    </tr>
                    <tr>
                        <td style="text-align: center" colspan="1">
                            <a style="color: #77477E; font-size: 18px" href="#"><i class="fa fa-check-square-o"></i></a>
                        </td>
                        <td style="text-align: justify"><b>TIENE TUTORIAS PLANIFICADAS</b></td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <div class="span9">
        {% if ver == 'M' %}
            <table class="table table-bordered">
                <thead>
                <tr>
                    <th class="celdacalendarioheader" style="text-align: center;vertical-align: middle;">Lunes</th>
                    <th class="celdacalendarioheader" style="text-align: center;vertical-align: middle;">Martes</th>
                    <th class="celdacalendarioheader" style="text-align: center;vertical-align: middle;">Miercoles</th>
                    <th class="celdacalendarioheader" style="text-align: center;vertical-align: middle;">Jueves</th>
                    <th class="celdacalendarioheader" style="text-align: center;vertical-align: middle;">Viernes</th>
                    <th class="celdacalendarioheader" style="text-align: center;vertical-align: middle;">Sabado</th>
                    <th class="celdacalendarioheader" style="text-align: center;vertical-align: middle;">Domingo</th>
                </tr>
                </thead>
                <tbody>
                {% for semana in calenadrio_mes %}
                    <tr>
                        {% for s in semana %}
                            <td class="celdacalendarioheader" style="padding: 0px; height: 60px; vertical-align: top; text-align: center">
                                {% with d=s|date:"d"|sumarvalores:0 m=s|date:"m"|sumarvalores:0 a=s|date:"Y"|sumarvalores:0 %}
                                    <div style="padding: 5px; width: 100%; height: 100%; {% if m != pmes %}background-color: darkgrey;{% endif %}" class="actionGoDay" mes={{ m }} anio={{ a }} dia="{{ d }}" idp="{{ profesor.id }}">
                                        {% if h_day == d and pmes == m and panio == h_year %}
                                            <label class="badge badge-info tu" title="Hoy">{{ d }}</label>
                                        {% else %}
                                            <b>{{ d }}</b>
                                        {% endif %}
                                        {% if m == pmes %}
                                            {% with tiene_dias_nolaborables=periodo|args:s|args:profesor|args:None|args:ver|call:'tiene_dias_nolaborables_calendario' %}
                                                <div style="text-align: left; margin-top: 5px;">
                                                    {% if not tiene_dias_nolaborables %}
                                                        {% with tiene_clases_en_dia=periodo|args:s|args:profesor|call:"tiene_clases_en_dia" tiene_tutorias_en_dia=periodo|args:s|args:profesor|call:"tiene_tutorias_en_dia" tiene_clases_noaperturada_en_dia=periodo|args:s|args:profesor|call:"tiene_clases_noaperturada_en_dia" tiene_clases_pendiente_enlacesubir=periodo|args:s|args:profesor|call:"tiene_clases_pendiente_enlacesubir_v2" %}
                                                            {% if tiene_clases_en_dia %}
                                                                <span style="background-color: #055f67; color: #ffffff; font-size: 12px " class="badge tu" title="Tiene clases programadas"><i class="fa fa-check-square-o"></i></span>
                                                                {% if tiene_clases_pendiente_enlacesubir %}
                                                                    <span style="background-color: #faa732; color: #ffffff; font-size: 12px " class="badge tu" title="Tiene clases programadas pendiente de subir enlaces"><i class="fa fa-close"></i></span>
                                                                {% endif %}
                                                                {% if tiene_clases_noaperturada_en_dia %}
                                                                    <span style="background-color: #b94a48; color: #ffffff; font-size: 12px " class="badge tu" title="Tiene clases programadas pendientes por aperturar"><i class="fa fa-close"></i></span>
                                                                {% endif %}
                                                            {% else %}
                                                                <span style="background-color: #c5c6c8; color: #ffffff; font-size: 12px " class="badge tu" title="No tiene clases programadas"><i class="fa fa-circle-o"></i></span>
                                                            {% endif %}
                                                            {% if tiene_tutorias_en_dia %}
                                                                <span style="background-color: #77477E; color: #ffffff; font-size: 12px " class="badge tu" title="Tiene tutorias programadas"><i class="fa fa-check-square-o"></i></span>
                                                            {% endif %}

                                                        {% endwith %}
                                                    {% else %}
                                                        {% with dias_nolaborables=periodo|args:s|args:profesor|args:None|args:ver|call:'dias_nolaborables_calendario' %}
                                                            {% if dias_nolaborables  %}
                                                                {% for dianolaborable in dias_nolaborables %}
                                                                    <span style="background-color: #5bb75b; color: #ffffff; font-size: 12px " class="badge tu" title="{{ dianolaborable }}"><i class="fa fa-check-square-o"></i></span>
                                                                {% endfor %}
                                                            {% endif %}
                                                        {% endwith %}
                                                    {% endif %}
                                                </div>
                                            {% endwith %}
                                        {% endif %}
                                    </div>
                                {% endwith %}
                            </td>
                        {% endfor %}
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        {% endif %}
        {% if ver == 'D' %}
            <table class="table table-bordered">
                <thead>
                <tr>
                    <th class="celdacalendarioheader" style="width:15%; text-align: center;vertical-align: middle;"></th>
                    <th class="celdacalendarioheader" style="width:85%; text-align: center;vertical-align: middle;">
                        {{ dia_verbose }}<br>
                        {% if h_day == pdia and pmes == h_month and panio == h_year %}
                            <label class="badge badge-info tu" title="Hoy">{{ pdia }}</label>
                        {% else %}
                            <b>{{ pdia }}</b>
                        {% endif %}
                    </th>
                </tr>
                </thead>
                <tbody>
                {% for sesion in sesiones %}
                    <tr style="color: #185abc;background-color: #d9edf7;border-color: #bce8f1;">
                        <td colspan="2" style="padding: 10px; text-align: center"><b>{{ sesion }}</b></td>
                    </tr>
                    {% if sesion.id != 15 %}
                        {% with turnos=sesion|args:clases|args:clasecomplexivo|call:'turnos_clasehorario' %}
                            {% for turno in turnos %}
                                <tr>
                                    <td style="text-align: center; font-weight: bold">{{ turno.comienza|date:"h:i a" }} - {{ turno.termina|date:"h:i a" }}</td>
                                    <td>
                                        {% with clasesactuales=turno|args:dia_isoweekday|args:profesor|args:periodo|call:'horario_profesor_actual_horario' clasesactualespractica=turno|args:dia_isoweekday|args:profesor|args:periodo|call:'horario_profesor_actual_practica' %}
                                            {% for clase in clasesactuales %}
                                                <div>
                                                    {% with tiene_dias_nolaborables=periodo|args:fecha_dia|args:profesor|args:clase.materia|args:ver|call:'tiene_dias_nolaborables_calendario' tiene_clases_noaperturada_en_dia=periodo|args:fecha_dia|args:profesor|args:clase|call:"tiene_clases_noaperturada_en_dia" tiene_enlace_subido=clase|args:fecha_dia|call:"tiene_enlace_subido_v2" %}
                                                        {% if not tiene_dias_nolaborables %}
                                                            <span style="background-color: #055f67; color: #ffffff; font-size: 12px " class="badge tu" title="{{ clase.materia.asignaturamalla.malla.carrera.alias }} - {{ clase.materia.nivel.coordinacion.alias }}"><i class="fa fa-check-square-o"></i> {{ clase.materia.asignatura.nombre }} [{{ clase.materia.identificacion }}] [{{ clase.materia.asignaturamalla.nivelmalla }}] - {{ clase.materia.paralelo }} ({{ clase.get_tipohorario_display }})</span>
                                                            {% if tiene_clases_noaperturada_en_dia %}
                                                                <span style="background-color: #b94a48; color: #ffffff; font-size: 12px " class="badge tu" title="NO APERTURO LA CLASE {{ clase.materia.asignatura.nombre }} [{{ clase.materia.identificacion }}] [{{ clase.materia.asignaturamalla.nivelmalla }}] - {{ clase.materia.paralelo }} ({{ clase.get_tipohorario_display }})"><i class="fa fa-close"></i></span>
                                                            {% endif %}
                                                            {% if clase.subirenlace %}
                                                                {% if not tiene_enlace_subido %}
                                                                    <span style="background-color: #faa732; color: #ffffff; font-size: 12px " class="badge tu" title="FALTA SUBIR ENLACE DE LA CLASE {{ clase.materia.asignatura.nombre }} [{{ clase.materia.identificacion }}] [{{ clase.materia.asignaturamalla.nivelmalla }}] - {{ clase.materia.paralelo }} ({{ clase.get_tipohorario_display }})"><i class="fa fa-close"></i></span>
                                                                {% endif %}
                                                            {% endif %}
                                                        {% else %}
                                                            {% with dias_nolaborables=periodo|args:fecha_dia|args:profesor|args:clase.materia|args:ver|call:'dias_nolaborables_calendario' %}
                                                                {% for dianolaborable in dias_nolaborables %}
                                                                    {% if dianolaborable %}
                                                                        <span style="background-color: #5bb75b; color: #ffffff; font-size: 12px " class="badge tu" title="{{ dianolaborable }}"><i class="fa fa-check-square-o"></i> {{ dianolaborable }}</span>
                                                                    {% endif %}
                                                                {% endfor %}
                                                            {% endwith %}
                                                        {% endif %}
                                                    {% endwith %}
                                                </div>
                                            {% endfor %}

                                            {% for clase in clasesactualespractica %}
                                                <div>
                                                    {% with tiene_dias_nolaborables=periodo|args:fecha_dia|args:profesor|args:clase.materia|args:ver|call:'tiene_dias_nolaborables_calendario' tiene_clases_noaperturada_en_dia=periodo|args:fecha_dia|args:profesor|args:clase|call:"tiene_clases_noaperturada_en_dia" tiene_enlace_subido=clase|args:fecha_dia|call:"tiene_enlace_subido_v2" %}
                                                        {% if not tiene_dias_nolaborables %}
                                                            <span style="background-color: #055f67; color: #ffffff; font-size: 12px " class="badge tu" title="{{ clase.materia.asignaturamalla.malla.carrera.alias }} - {{ clase.materia.nivel.coordinacion.alias }}"><i class="fa fa-check-square-o"></i> {{ clase.materia.asignatura.nombre }} [{{ clase.materia.identificacion }}] [{{ clase.materia.asignaturamalla.nivelmalla }}] - {{ clase.materia.paralelo }} <span class="smaller label label-inverse">{{ clase.grupoprofesor.get_paralelopractica_display }}</span> ({{ clase.get_tipohorario_display }})</span>
                                                            {% if tiene_clases_noaperturada_en_dia %}
                                                                <span style="background-color: #b94a48; color: #ffffff; font-size: 12px " class="badge tu" title="NO APERTURO LA CLASE {{ clase.materia.asignatura.nombre }} [{{ clase.materia.identificacion }}] [{{ clase.materia.asignaturamalla.nivelmalla }}] - {{ clase.materia.paralelo }} {{ clase.grupoprofesor.get_paralelopractica_display }} ({{ clase.get_tipohorario_display }})"><i class="fa fa-close"></i></span>
                                                            {% endif %}
                                                            {% if clase.subirenlace %}
                                                                {% if not tiene_enlace_subido %}
                                                                    <span style="background-color: #faa732; color: #ffffff; font-size: 12px " class="badge tu" title="FALTA SUBIR ENLACE DE LA CLASE {{ clase.materia.asignatura.nombre }} [{{ clase.materia.identificacion }}] [{{ clase.materia.asignaturamalla.nivelmalla }}] - {{ clase.materia.paralelo }} {{ clase.grupoprofesor.get_paralelopractica_display }} ({{ clase.get_tipohorario_display }})"><i class="fa fa-close"></i></span>
                                                                {% endif %}
                                                            {% endif %}
                                                        {% else %}
                                                            {% with dias_nolaborables=periodo|args:fecha_dia|args:profesor|args:clase.materia|args:ver|call:'dias_nolaborables_calendario' %}
                                                                {% for dianolaborable in dias_nolaborables %}
                                                                    {% if dianolaborable %}
                                                                        <span style="background-color: #5bb75b; color: #ffffff; font-size: 12px " class="badge tu" title="{{ dianolaborable }}"><i class="fa fa-check-square-o"></i> {{ dianolaborable }}</span>
                                                                    {% endif %}
                                                                {% endfor %}
                                                            {% endwith %}
                                                        {% endif %}
                                                    {% endwith %}
                                                </div>
                                            {% endfor %}
                                            {% if not clasesactuales and not clasesactualespractica %}
                                                <div>
                                                    <span style="background-color: #c5c6c8; color: #3F51B5; font-size: 12px " class="badge"><i class="fa fa-circle-o"></i> NO TIENE CLASES</span>
                                                </div>
                                            {% endif %}
                                        {% endwith %}
                                    </td>
                                </tr>
                            {% endfor %}
                            {% if not turnos %}
                                <tr><td colspan="2">NO SE REGISTRA CLASES PROGRAMADAS</td></tr>
                            {% endif %}
                        {% endwith %}
                    {% endif %}
                    {% if sesion.id == 15 %}
                        {% with turnos=sesion|args:profesor|args:periodo|args:dia_isoweekday|call:'turnosactivos_tutoria' %}
                            {% for turno in turnos %}
                                <tr>
                                    <td style="text-align: center; font-weight: bold">{{ turno.comienza|date:"h:i a" }} - {{ turno.termina|date:"h:i a" }}</td>
                                    <td>
                                        {% with horariotutoria=turno|args:dia_isoweekday|args:profesor|args:periodo|call:'horario_tutorias_academicas'%}
                                            {% for clase in horariotutoria %}
                                                <div>
                                                    {% with tiene_dias_nolaborables=periodo|args:fecha_dia|args:profesor|args:None|args:ver|call:'tiene_dias_nolaborables_calendario' %}
                                                        {% if not tiene_dias_nolaborables %}
                                                            <span style="background-color: #77477E; color: #ffffff; font-size: 12px " class="badge tu" title="TUTORIA"><i class="fa fa-check-square-o"></i> ORIENTACIÓN Y ACOMPAÑAMIENTO A TRAVÉS DE TUTORÍAS PRESENCIALES O VIRTUALES, INDIVIDUALES O GRUPALES</span>
                                                        {% else %}
                                                            {% with dias_nolaborables=periodo|args:fecha_dia|args:profesor|args:None|args:ver|call:'dias_nolaborables_calendario' %}
                                                                {% for dianolaborable in dias_nolaborables %}
                                                                    {% if dianolaborable %}
                                                                        <span style="background-color: #5bb75b; color: #ffffff; font-size: 12px " class="badge tu" title="{{ dianolaborable }}"><i class="fa fa-check-square-o"></i> {{ dianolaborable }}</span>
                                                                    {% endif %}
                                                                {% endfor %}
                                                            {% endwith %}
                                                        {% endif %}
                                                    {% endwith %}
                                                </div>
                                            {% endfor %}
                                            {% if not horariotutoria %}
                                                <div>
                                                    <span style="background-color: #c5c6c8; color: #3F51B5; font-size: 12px " class="badge"><i class="fa fa-circle-o"></i> NO TIENE TUTORIA</span>
                                                </div>
                                            {% endif %}

                                        {% endwith %}

                                    </td>
                                </tr>
                            {% endfor %}
                        {% endwith %}
                    {% endif %}
                {% endfor %}
                {% if not sesiones %}
                    <tr><td colspan="2" style="text-align: center"><b>NO SE REGISTRA CLASES PROGRAMADAS</b></td></tr>
                {% endif %}
                </tbody>
            </table>
        {% endif %}
        {% if ver == 'W' %}
            <table class="table table-bordered">
                <thead>
                <tr>
                    <th class="celdacalendarioheader" style="width:10%; text-align: center;vertical-align: middle;"></th>
                    {% for s in semana %}
                        <th class="celdacalendarioheader actionGoDay" style="width:12.86%; text-align: center;vertical-align: middle;" mes={{ s|date:"m" }} anio={{ s|date:"Y" }} dia="{{ s|date:"d" }}" idp="{{ profesor.id }}">
                            {{ s|diaenletra_fecha }}<br>
                            {% if h_day == s|date:"d"|sumarvalores:0 and pmes == h_month and panio == h_year %}
                                <label class="badge badge-info tu" title="Hoy">{{ s|date:"d"|sumarvalores:0 }}</label>
                            {% else %}
                                <b>{{ s|date:"d"|sumarvalores:0 }}</b>
                            {% endif %}
                        </th>
                    {% endfor %}
                </tr>
                </thead>
                <tbody>
                {% for sesion in sesiones %}
                    <tr style="color: #185abc;background-color: #d9edf7;border-color: #bce8f1;">
                        <td colspan="8" style="padding: 10px; text-align: center"><b>{{ sesion }}</b></td>
                    </tr>
                    {% if sesion.id != 15 %}
                        {% with turnos=sesion|args:clases|args:clasecomplexivo|call:'turnos_clasehorario' %}
                            {% for turno in turnos %}
                                <tr>
                                    <td style="text-align: center; font-weight: bold">{{ turno.comienza|date:"h:i a" }} <br> {{ turno.termina|date:"h:i a" }}</td>
                                    {% for s in semana %}
                                        {% with diaisoweekday=s|diaisoweekday %}
                                            <td style="">
                                                {% with clasesactuales=turno|args:diaisoweekday|args:profesor|args:periodo|call:'horario_profesor_actual_horario' clasesactualespractica=turno|args:diaisoweekday|args:profesor|args:periodo|call:'horario_profesor_actual_practica' %}
                                                    {% for clase in clasesactuales %}
                                                        <div>
                                                            {% with tiene_dias_nolaborables=periodo|args:s|args:profesor|args:clase.materia|args:ver|call:'tiene_dias_nolaborables_calendario' tiene_clases_noaperturada_en_dia=periodo|args:s|args:profesor|args:clase|call:"tiene_clases_noaperturada_en_dia" tiene_enlace_subido=clase|args:s|call:"tiene_enlace_subido_v2" %}
                                                                {% if not tiene_dias_nolaborables %}
                                                                    <span style="background-color: #055f67; color: #ffffff; font-size: 12px " class="badge tu" title="{{ clase.materia.asignaturamalla.malla.carrera.alias }} - {{ clase.materia.nivel.coordinacion.alias }} {{ clase.materia.asignatura.nombre }} [{{ clase.materia.identificacion }}] [{{ clase.materia.asignaturamalla.nivelmalla }}] - {{ clase.materia.paralelo }} ({{ clase.get_tipohorario_display }})"><i class="fa fa-check-square-o"></i></span>
                                                                    {% if tiene_clases_noaperturada_en_dia %}
                                                                        <span style="background-color: #b94a48; color: #ffffff; font-size: 12px " class="badge tu" title="NO APERTURO LA CLASE {{ clase.materia.asignatura.nombre }} [{{ clase.materia.identificacion }}] [{{ clase.materia.asignaturamalla.nivelmalla }}] - {{ clase.materia.paralelo }} ({{ clase.get_tipohorario_display }})"><i class="fa fa-close"></i></span>
                                                                    {% endif %}
                                                                    {% if clase.subirenlace %}
                                                                        {% if not tiene_enlace_subido %}
                                                                            <span style="background-color: #faa732; color: #ffffff; font-size: 12px " class="badge tu" title="FALTA SUBIR ENLACE DE LA CLASE {{ clase.materia.asignatura.nombre }} [{{ clase.materia.identificacion }}] [{{ clase.materia.asignaturamalla.nivelmalla }}] - {{ clase.materia.paralelo }} ({{ clase.get_tipohorario_display }})"><i class="fa fa-close"></i></span>
                                                                        {% endif %}
                                                                    {% endif %}
                                                                {% else %}
                                                                    {% with dias_nolaborables=periodo|args:s|args:profesor|args:clase.materia|args:ver|call:'dias_nolaborables_calendario' %}
                                                                        {% for dianolaborable in dias_nolaborables %}
                                                                            <span style="background-color: #5bb75b; color: #ffffff; font-size: 12px " class="badge tu" title="{{ dianolaborable }}"><i class="fa fa-check-square-o"></i></span>
                                                                        {% endfor %}
                                                                    {% endwith %}
                                                                {% endif %}
                                                            {% endwith %}
                                                        </div>
                                                    {% endfor %}
                                                    {% for clase in clasesactualespractica %}
                                                        <div>
                                                            {% with tiene_dias_nolaborables=periodo|args:s|args:profesor|args:clase.materia|args:ver|call:'tiene_dias_nolaborables_calendario' tiene_clases_noaperturada_en_dia=periodo|args:s|args:profesor|args:clase|call:"tiene_clases_noaperturada_en_dia" tiene_enlace_subido=clase|args:s|call:"tiene_enlace_subido_v2" %}
                                                                {% if not tiene_dias_nolaborables %}
                                                                    <span style="background-color: #055f67; color: #ffffff; font-size: 12px " class="badge tu" title="{{ clase.materia.asignaturamalla.malla.carrera.alias }} - {{ clase.materia.nivel.coordinacion.alias }} {{ clase.materia.asignatura.nombre }} [{{ clase.materia.identificacion }}] [{{ clase.materia.asignaturamalla.nivelmalla }}] - {{ clase.materia.paralelo }} --{{ clase.grupoprofesor.get_paralelopractica_display }}-- ({{ clase.get_tipohorario_display }})"><i class="fa fa-check-square-o"></i></span>
                                                                    {% if tiene_clases_noaperturada_en_dia %}
                                                                        <span style="background-color: #b94a48; color: #ffffff; font-size: 12px " class="badge tu" title="NO APERTURO LA CLASE {{ clase.materia.asignatura.nombre }} [{{ clase.materia.identificacion }}] [{{ clase.materia.asignaturamalla.nivelmalla }}] - {{ clase.materia.paralelo }} {{ clase.grupoprofesor.get_paralelopractica_display }} ({{ clase.get_tipohorario_display }})"><i class="fa fa-close"></i></span>
                                                                    {% endif %}
                                                                    {% if clase.subirenlace %}
                                                                        {% if not tiene_enlace_subido %}
                                                                            <span style="background-color: #faa732; color: #ffffff; font-size: 12px " class="badge tu" title="FALTA SUBIR ENLACE DE LA CLASE {{ clase.materia.asignatura.nombre }} [{{ clase.materia.identificacion }}] [{{ clase.materia.asignaturamalla.nivelmalla }}] - {{ clase.materia.paralelo }} {{ clase.grupoprofesor.get_paralelopractica_display }} ({{ clase.get_tipohorario_display }})"><i class="fa fa-close"></i></span>
                                                                        {% endif %}
                                                                    {% endif %}
                                                                {% else %}
                                                                    {% with dias_nolaborables=periodo|args:s|args:profesor|args:clase.materia|args:ver|call:'dias_nolaborables_calendario' %}
                                                                        {% for dianolaborable in dias_nolaborables %}
                                                                            <span style="background-color: #5bb75b; color: #ffffff; font-size: 12px " class="badge tu" title="{{ dianolaborable }}"><i class="fa fa-check-square-o"></i></span>
                                                                        {% endfor %}
                                                                    {% endwith %}
                                                                {% endif %}
                                                            {% endwith %}
                                                        </div>
                                                    {% endfor %}
                                                    {% if not clasesactuales and not clasesactualespractica %}
                                                        <div>
                                                            <span style="background-color: #c5c6c8; color: #3F51B5; font-size: 12px " class="badge tu" title="NO TIENE CLASES"><i class="fa fa-circle-o"></i></span>
                                                        </div>
                                                    {% endif %}
                                                {% endwith %}
                                            </td>
                                        {% endwith %}
                                    {% endfor %}
                                </tr>
                            {% endfor %}
                            {% if not turnos %}
                                <tr><td colspan="8" style="text-align: center"><b>NO SE REGISTRA CLASES PROGRAMADAS</b></td></tr>
                            {% endif %}
                        {% endwith %}
                    {% endif %}
                    {% if sesion.id == 15 %}
                        {% with turnos=sesion|args:profesor|args:periodo|call:'turnosactivos_tutoria' %}
                            {% for turno in turnos %}
                                <tr>
                                    <td style="text-align: center; font-weight: bold">{{ turno.comienza|date:"h:i a" }} <br> {{ turno.termina|date:"h:i a" }}</td>
                                    {% for s in semana %}
                                        {% with diaisoweekday=s|diaisoweekday %}
                                            <td style="" class="actionGoDay" mes={{ s|date:"m" }} anio={{ s|date:"Y" }} dia="{{ s|date:"d" }}" idp="{{ profesor.id }}">
                                                {% with horariotutoria=turno|args:diaisoweekday|args:profesor|args:periodo|call:'horario_tutorias_academicas'%}
                                                    {% for clase in horariotutoria %}
                                                        <div>
                                                            {% with tiene_dias_nolaborables=periodo|args:s|call:'tiene_dias_nolaborables' %}
                                                                {% if not tiene_dias_nolaborables %}
                                                                    <span style="background-color: #77477E; color: #ffffff; font-size: 12px " class="badge tu" title="ORIENTACIÓN Y ACOMPAÑAMIENTO A TRAVÉS DE TUTORÍAS PRESENCIALES O VIRTUALES, INDIVIDUALES O GRUPALES"><i class="fa fa-check-square-o"></i></span>
                                                                {% else %}
                                                                    {% with dias_nolaborables=periodo|args:fecha_dia|call:'dias_nolaborables' %}
                                                                        {% if dias_nolaborables %}
                                                                            <span style="background-color: #5bb75b; color: #ffffff; font-size: 12px " class="badge tu" title="{{ dianolaborable }}"><i class="fa fa-check-square-o"></i></span>
                                                                        {% else %}
                                                                            <span style="background-color: #c5c6c8; color: #3F51B5; font-size: 12px " class="badge tu" title="NO TIENE TUTORIA"><i class="fa fa-circle-o"></i></span>
                                                                        {% endif %}
                                                                    {% endwith %}
                                                                {% endif %}
                                                            {% endwith %}
                                                        </div>
                                                    {% endfor %}
                                                    {% if not horariotutoria %}
                                                        <div>
                                                            <span style="background-color: #c5c6c8; color: #3F51B5; font-size: 12px " class="badge tu" title="NO TIENE TUTORIA"><i class="fa fa-circle-o"></i></span>
                                                        </div>
                                                    {% endif %}

                                                {% endwith %}

                                            </td>
                                        {% endwith %}
                                    {% endfor %}
                                </tr>
                            {% endfor %}
                        {% endwith %}
                    {% endif %}

                {% endfor %}
                {% if not sesiones %}
                    <tr><td colspan="8" style="text-align: center"><b>NO SE REGISTRA CLASES PROGRAMADAS</b></td></tr>
                {% endif %}
                </tbody>
            </table>
        {% endif %}
    </div>
</div>
