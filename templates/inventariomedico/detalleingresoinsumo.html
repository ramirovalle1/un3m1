{% load humanize %}
{% load sga_extras %}
{% for detalle in detalles %}
    <tr id="filadetalle_{{ forloop.counter }}" class="detalleinsumos" idprod="{{ detalle.producto.id }}">
        <td style="text-align: right;"><b>{{ forloop.counter }}</b></td>
        <td style="text-align: justify">
            <b>Producto:</b> {{ detalle.producto.cuenta.cuenta }}.{{ detalle.producto.codigo }} - {{ detalle.producto.descripcion }}<br>
            <b>Total:</b> $ {{ detalle.valor|floatformat:2 }}
            <input type="hidden" id="idproducto{{ forloop.counter }}" name="idproducto[]" value="{{ detalle.producto.id }}">
            <input type="hidden" id="total{{ forloop.counter }}" name="total[]" value="{{ detalle.valor|floatformat:2 }}" class="total" style="width: 100%;">
        </td>
        <td style="text-align: left">
            <input type="text" autocomplete="off" maxlength="100" id="descripcion{{ forloop.counter }}" name="descripcion[]" value="{{ detalle.producto.descripcion }}" class="descripcion" style="width: 100%; text-transform: uppercase">
            <div class="help-text" style="color: #dc1414; font-size: xx-small; margin-bottom: 0;"> </div>
        </td>
        <td style="text-align: left">
            <select style="width: 100%;" class="tipo" id="tipo{{ forloop.counter }}" name="tipo[]" >
                <option value="" selected>---------</option>
                <option value="1">MEDICAMENTOS</option>
                <option value="2">MATERIALES</option>
            </select>
            <div class="help-text" style="color: #dc1414; font-size: xx-small; margin-bottom: 0;"> </div>
        </td>
        <td style="text-align: left">
            <input type="text" autocomplete="off" maxlength="30" id="lote{{ forloop.counter }}" name="lote[]" value="" class="lote" style="width: 100%; text-transform: uppercase">
            <div class="help-text" style="color: #dc1414; font-size: xx-small; margin-bottom: 0;"> </div>
        </td>
        <td style="text-align: center">
            <input type="date" autocomplete="off" maxlength="30" id="fechaelabora{{ forloop.counter }}" name="fechaelabora[]" value="{{ fecha|date:'Y-m-d' }}" class="fechaelabora" style="width: 100%;">
            <div class="help-text" style="color: #dc1414; font-size: xx-small; margin-bottom: 0;"> </div>
        </td>
        <td style="text-align: center">
            <input type="date" autocomplete="off" maxlength="30" id="fechavence{{ forloop.counter }}" name="fechavence[]" value="{{ fecha|date:'Y-m-d' }}" class="fechavence" style="width: 100%;">
            <div class="help-text" style="color: #dc1414; font-size: xx-small; margin-bottom: 0;"> </div>
        </td>
        <td style="text-align: center">
            <input type="text" autocomplete="off" maxlength="30" id="cantidad{{ forloop.counter }}" name="cantidad[]" value="0" class="cantidad" style="width: 100%; text-align: right">
            <div class="help-text" style="color: #dc1414; font-size: xx-small; margin-bottom: 0;"> </div>
        </td>
        <td style="text-align: center">
{#            <input type="text" autocomplete="off" maxlength="30" id="costo{{ forloop.counter }}" name="costo[]" value="0.00" class="costo" style="width: 100%; text-align: right">#}
            <input type="text" autocomplete="off" maxlength="30" id="costo{{ forloop.counter }}" name="costo[]" value="0.00" class="costo" style="width: 100%; text-align: right" readonly>
            <div class="help-text" style="color: #dc1414; font-size: xx-small; margin-bottom: 0;"> </div>
        </td>
        <td style="text-align: center">
            <a href="javascript:;" class="btn btn-tini btn-danger eliminaritem_insumo" idreg="0" idfila="{{ forloop.counter }}" descripcion="{{ detalle.producto.descripcion }}" title="Borrar fila"><i class="fa fa-remove"></i></a>
        </td>
    </tr>
{% endfor %}