{% load sga_extras %}
<!DOCTYPE html>
<!--suppress JSUnresolvedVariable -->
<html lang="es" data-location="UNEMI">
<head>
    {#NOTIFICACIONES WEB#}
    {% if request.user.is_authenticated and persona.es_administrativo and permiteWebPush and persona.es_profesor %}
        <meta name="vapid-key" content="{{ vapid_key }}">
        <meta name="islogged" content="{{ request.user.username }}">
        <meta name="uslog" content="{% if request.session.user_anterior %}{{ request.session.user_anterior }}{% else %}false{% endif %}">
        {% load pwa %}
        {% progressive_web_app_meta_i %}
    {% endif %}
    {#NOTIFICACIONES WEB#}
    <meta charset="utf-8">
    <title>{% block pagetitle %}{{ title }}{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="UNEMI">
    <meta name="theme-color" content="#1C3247 ">
    <script src="/static/js/offline/v0.7.13/offline.min.js"></script>
    <link rel="stylesheet" href="/static/js/offline/v0.7.13/offline-theme-default.css" />
    <link rel="stylesheet" href="/static/js/offline/v0.7.13/offline-language-spanish.css" />
    <style>
        @keyframes spinner-border {
            to {
                transform: rotate(360deg);
            }
        }

        .spinner-border {
            display: inline-block;
            width: 15rem;
            height: 15rem;
            vertical-align: text-bottom;
            border: 50px solid currentColor;
            border-right-color: transparent;
            border-radius: 50%;
            animation: spinner-border .75s linear infinite;
        }

        .spinner-border-sm {
            width: 15rem;
            height: 15rem;
            border-width: 50px;
        }


        @keyframes spinner-grow {
            0% {
                transform: scale(0);
            }
            50% {
                opacity: 1;
                transform: none;
            }
        }

        .spinner-grow {
            display: inline-block;
            width: 15rem;
            height: 15rem;
            vertical-align: text-bottom;
            border-radius: 50%;
            opacity: 66%;
            animation: spinner-grow .75s linear infinite;
        }

        .spinner-grow-sm {
            width: 15rem;
            height: 15rem;
        }

        .modal-body {
            max-height: calc(100vh - 190px);
            overflow-y: auto;
        }
        div.online-indicator {
            display: inline-block;
            width: 15px;
            height: 15px;
            margin-right: 10px;
            background-color: #0fcc45;
            border-radius: 50%;
            position: relative;
        }
        span.blink-online {
            display: block;
            width: 15px;
            height: 15px;
            background-color: #0fcc45;
            opacity: 0.7;
            border-radius: 50%;

            animation: blink 1s linear infinite;
        }

        div.offline-indicator {
            display: inline-block;
            width: 15px;
            height: 15px;
            margin-right: 10px;
            background-color: #ba2121;
            border-radius: 50%;
            position: relative;
        }
        span.blink-offline {
            display: block;
            width: 15px;
            height: 15px;
            background-color: #ba2121;
            opacity: 0.7;
            border-radius: 50%;
            animation: blink 1s linear infinite;
        }

        /*Animations*/

        @keyframes blink {
            100% { transform: scale(2, 2);
                opacity: 0;
            }
        }

        #page-loader .preloader-interior {
            display: block;
            position: relative;
            left: 50%;
            top: 50%;
            width: 150px;
            height: 150px;
            margin: -75px 0 0 -75px;
            border-radius: 50%;
            border: 3px solid transparent;
            border-top-color: #1C3247 ;

            -webkit-animation: spin 2s linear infinite; /* Chrome, Opera 15+, Safari 5+ */
            animation: spin 2s linear infinite; /* Chrome, Firefox 16+, IE 10+, Opera */
        }

        #page-loader .preloader-interior:before {
            content: "";
            position: absolute;
            top: 5px;
            left: 5px;
            right: 5px;
            bottom: 5px;
            border-radius: 50%;
            border: 3px solid transparent;
            border-top-color: #00501f;
            -webkit-animation: spin 3s linear infinite; /* Chrome, Opera 15+, Safari 5+ */
            animation: spin 3s linear infinite; /* Chrome, Firefox 16+, IE 10+, Opera */
        }

        #page-loader .preloader-interior:after {
            content: "";
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            bottom: 15px;
            border-radius: 50%;
            border: 3px solid transparent;
            border-top-color: #F8B334;

            -webkit-animation: spin 1.5s linear infinite; /* Chrome, Opera 15+, Safari 5+ */
            animation: spin 1.5s linear infinite; /* Chrome, Firefox 16+, IE 10+, Opera */
        }

    </style>
    <!--[if lt IE 9]>
{#    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>#}
    <![endif]-->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4ZBWFH9X5W"></script>

    <link rel="shortcut icon" href="/static/images/aok/favicon32X32.ico?1.6.0">

    <style>
        .backgrounmarcaagua {
            min-height: 80vh;
            background: url('/static/images/coverbalcon.png') no-repeat fixed;
            background-size: 260px;
            background-position: 98% 90%;
        }

        .normal-input {
            color: black;
            width: 100%;
            font-size: 12px;
            margin-bottom: 0;
            text-transform: initial;
        }

        .tablaBusquedaSearch td {
            padding-top: 8px;
            padding-bottom: 8px;
            padding-right: 3px;
            padding-left: 3px;
            line-height: 20px;
            text-align: left;
            vertical-align: top;
            border-top: 1px solid #ffffff;
        !important;
            border-left: transparent;
        }

        .tablaBusquedaSearch tbody tr.info:hover td {
            background-color: #F8F9F9 !important;
        }

        .tablaBusquedaSearch tbody tr.info td {
            background-color: transparent !important;
        }

        .tablaHoverOculto tbody tr.info:hover td {
            background-color: transparent !important;
        }
    </style>

    {% if not request.path in "'/adm_solicitudpago', '/pro_solicitudpago','/dir_cronograma', '/adm_planpractica', '/adm_convenioempresa', '/alu_practicaspro', '/adm_ingresoacta', '/alu_justificacionsufragio', '/pro_justificacionsufragio', '/adm_padronelectoral', '/alu_practicaspreprofesionalesinscripcion', '/alu_convalidacionpractica', '/alu_finanzas', '/pro_cronograma', '/adm_solicitudbalcon', /adm_evento', /alu_eventos', '/alu_solicitudbalcon', '/adm_balconservicios', '/adm_gedcevaluacion', '/adm_solicitudpermisossistemas', '/alu_solicitudcambiocarrera', '/pro_tutoria', '/alu_solicitudtutor'" or  request.path == '/' %}
        {#        <link rel="stylesheet" href="/static/css/jquery.fancybox.css?v=2.1.4" type="text/css" media="screen"/>#}
        {#        <script type="text/javascript" src="/static/js/jquery.fancybox.pack.js?v=2.1.4"></script>#}
    {% else %}
        {#        <link rel="stylesheet" href="/static/fancybox/css/core.css"/>#}
        {#        <script src="/static/fancybox/js/core.js"></script>#}
    {% endif %}


    <link href="/static/sweet2/sweetalert2.css?1.0.3" rel="stylesheet"/>
    <script src="/static/sweet2/sweetalert2.js?1.0.1"></script>
    <!-- Google Font: Source Sans Pro -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="/static/bootstrap4/fontawesome-free/css/all.min.css">
    <!-- Ionicons -->
    {#    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">#}
    <!-- Tempusdominus Bootstrap 4 -->
    <link rel="stylesheet" href="/static/bootstrap4/plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css">
    <!-- iCheck -->
    <link rel="stylesheet" href="/static/bootstrap4/plugins/icheck-bootstrap/icheck-bootstrap.min.css">
    <!-- JQVMap -->
    <link rel="stylesheet" href="/static/bootstrap4/plugins/jqvmap/jqvmap.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="/static/bootstrap4/dist/css/adminlte.min.css">
    <link href="/static/bootstrap4/stylesbs.css?5.1.0" rel='stylesheet'/>
    <!-- overlayScrollbars -->
    <link rel="stylesheet" href="/static/bootstrap4/plugins/overlayScrollbars/css/OverlayScrollbars.min.css">
    <!-- Daterange picker -->
    <link rel="stylesheet" href="/static/bootstrap4/plugins/daterangepicker/daterangepicker.css">
    <!-- summernote -->
    <link rel="stylesheet" href="/static/bootstrap4/plugins/summernote/summernote-bs4.min.css">

    <link rel="stylesheet" href="/static/bootstrap4/plugins/bs-stepper/css/bs-stepper.min.css">
</head>
<body class="layout-navbar-fixed layout-fixed control-sidebar-slide-open layout-footer-fixed sidebar-closed sidebar-collapse text-sm">
{% if not request.path in "'/loginsga', '/loginsagest', '/loginposgrado', '/loginpostulacion', '/alu_addremove_matricula/pregrado', '/alu_matricula/pregrado', '/alu_horarios', '/pro_horarios', '/alu_solicitudmatricula/especial'" or  request.path == '/' %}
    <div id="loading">
        <div id="loading-center" style="opacity: 2 !important;">
            <div id="loading-center-absolute" style="opacity: 2 !important;">
                <img src="/static/images/tigrillo_loader.gif" style="opacity: 2 !important; width:100px"/>
            </div>
        </div>
    </div>
{% endif %}

{#BOOSTRAP4#}
<div class="wrapper">

    {% if not useModal %}
        {#        main-header navbar navbar-expand navbar-white navbar-light#}
        {#        <nav class="main-header navbar navbar-expand navbar-white navbar-light">#}
        <nav class="main-header navbar navbar-expand navbar-primary navbar-dark"  style="border-bottom: 11px solid #fe9900;">
            <!-- Left navbar links -->
            <ul class="navbar-nav" id="contenedorLogo">
                <li class="nav-item" style="margin: auto">
                    <a class="nav-link" data-widget="pushmenu" href="#" role="button">
                        <img src='/static/images/aok/logo_unemi.svg' style="height: 24px !important; width: 86px !important;"/>
                    </a>
                </li>
                {% if not request.user.is_anonymous and eTemplateBaseSetting and eTemplateBaseSetting.use_menu_favorite_module and modulos_favoritos %}
                    <li class="nav-item d-none d-sm-inline-block">
                        <a href="javascript:void(0);" onclick="openNav()"><i class="fa fa-list fa-2x"></i></a>
                        <a href="#" onclick="openNav()" class="hidden-phone hidden-tablet visible-desktop">
                            <svg width="20" height="20" id="icoOpen">
                                <path d="M0,4 30,4" stroke="#fff" stroke-width="5"/>
                                <path d="M0,11 30,11" stroke="#fff" stroke-width="5"/>
                                <path d="M0,18 30,18" stroke="#fff" stroke-width="5"/>
                            </svg>
                        </a>
                    </li>
                {% endif %}
                <li class="nav-item d-none d-sm-inline-block">
                    <a class="nav-link" style="font-size: 16px; color: #ffffff;" href="/" class="hidden-phone hidden-tablet visible-desktop">
                        {% if tipoentrada == 'SGA' %}
                            <span style="vertical-align: middle;">| <span style=" font-weight: bold;">{{ tipoentrada }}</span> | Gestión Académica</span>
                        {% endif %}
                        {% if tipoentrada == 'SAGEST' %}
                            <span style="vertical-align: middle;">| <span
                                    style=" font-weight: bold;">{{ tipoentrada }}</span> | Sistema de Gestión Administrativa</span>
                        {% endif %}
                        {% if tipoentrada == 'POSGRADO' %}
                            <span style="vertical-align: middle;">| <span
                                    style=" font-weight: bold;">{{ tipoentrada }}</span> | Sistema de Admisión Posgrado</span>
                        {% endif %}
                        {% if tipoentrada == 'POSTULACIONPOSGRADO' %}
                            <span style="vertical-align: middle;">| <span
                                    style=" font-weight: bold;">POSGRADO</span> | Sistema de Selección Docentes Posgrado</span>
                        {% endif %}
                    </a>
                </li>
            </ul>
            <!-- Right navbar links -->
            <ul class="navbar-nav ml-auto">
                {% if not request.user.is_anonymous %}
                    <div class="pull-right hidden-phone hidden-tablet visible-desktop">
                        <ul class='navbar-nav ml-auto'>
                            {% if tiposistema == 'sga' %}
                                <ul class="nav">
                                    <li class="dropdown has_hover" style="">
                                        <a style="height: 50px; vertical-align: middle; padding-top: 12px"
                                           href="javascript:;" id="accPeriodo" class="dropdown-toggle tb"
                                           data-toggle="dropdown"
                                           title="Periodos Académicos">{{ periodo.tipo }} {{ periodo.nombre }}</a>
                                        <ul id="listaPeriodos" style="padding: 10px 10px;"
                                            class="dropdown-menu pull-right {% if periodos.count > 10 %}card divScroll square scrollbar-dusty-grass square thin{% endif %}">
                                            <li style="width: 100%;display: block;padding-left: 3%; padding-right: 3px;">
                                                <input type="search" id="buscarPeriodo" autocomplete="off"
                                                       placeholder="Buscar..."
                                                       style="width: 100%;display: block; padding: 3px 15px; float: right; -webkit-border-radius: 20px; border-radius: 20px; margin-top: -4px;"/>
                                            </li>
                                            {% for periodo2 in periodos %}
                                                <li><a href='javascript:;' class='periodoselector'
                                                       pid='{{ periodo2.id|encrypt }}'>{% if periodo2.id == periodo.id %}
                                                    <i class="fa fa-check"></i>{% endif %} {{ periodo2 }}</a></li>
                                            {% endfor %}
                                        </ul>
                                    </li>
                                </ul>
                            {% endif %}

                            {% if persona.tiene_notificaciones.sga and tipoentrada == 'SGA' %}
                                <!--<li class="divider-vertical"></li>-->
                                <ul class="nav" style="margin: 0 !important;">
                                    <li class="dropdown has_hover">
                                        <a style="height: 50px;" href="javascript:void(0);" class="dropdown-toggle"
                                           data-toggle="dropdown">
                                            <i class="fa fa-bell fa-2x blinkimg" border=0></i>
                                            <sup style="top: -10px; left: -3px;" class="blinkimg"><label class="label label-warning"
                                                                                                         style="padding: 4px; font-size: 8px;line-height: 8px;">{{ persona.num_notificaciones.sga }}</label></sup><b
                                                class="caret"></b>
                                        </a>
                                        <ul class="dropdown-menu pull-right">
                                            {% for notificacion in persona.notificaciones.sga %}
                                                <li>
                                                    <a _href="{{ notificacion.url }}" id="{{ notificacion.id }}"
                                                       href="javascript:;" class="btn-form viewNotification_b">
                                                        <i class="fa fa-exclamation-circle"></i> {{ notificacion.titulo }}
                                                    </a>
                                                </li>
                                            {% empty %}
                                                <li><i class="fa fa-ticket"></i>No tiene ninguna notificación</li>
                                            {% endfor %}
                                            <li><a href="/notificacion" class="btn-form"><i class="fa fa-list"></i> Ver mis
                                                notificaciones</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            {% endif %}
                            {% if persona.tiene_notificaciones.sagest and tipoentrada == 'SAGEST' %}
                                <!--<li class="divider-vertical"></li>-->
                                <ul class="nav">
                                    <li class="dropdown has_hover">
                                        <a style="height: 50px;" href="javascript:;" class="dropdown-toggle"
                                           data-toggle="dropdown">
                                            <i class="fa fa-bell fa-2x blinkimg" border=0></i>
                                            <sup style="top: -10px; left: -3px;"><label class="label label-warning" style="padding: 4px; font-size: 8px;line-height: 8px;">{{ persona.num_notificaciones.sagest }}</label></sup><b
                                                class="caret"></b>
                                        </a>
                                        <ul class="dropdown-menu pull-right">
                                            {% for notificacion in persona.notificaciones.sagest %}
                                                <li><a _href="{{ notificacion.url }}" id="{{ notificacion.id }}"
                                                       href="javascript:;" class="btn-form viewNotification_b"><i
                                                        class="fa fa-exclamation-circle"></i> {{ notificacion.titulo }}</a>
                                                </li>
                                            {% empty %}
                                                <li><i class="fa fa-ticket"></i>No tiene ninguna notificación</li>
                                            {% endfor %}
                                            <li><a href="/notificacion" class="btn-form"><i class="fa fa-list"></i> Ver mis notificaciones</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            {% endif %}

                            {% if request.user.is_authenticated and persona.es_administrativo and permiteWebPush and persona.es_profesor %}
                                <li class="divider-vertical"></li>
                                <ul class="nav" id="btnNotificacionTareas">
                                    <li class="dropdown has_hover">
                                        <a style="height: 50px;" href="javascript:;" class="dropdown-toggle" data-toggle="dropdown">
                                            {% if totalnotarchivos > 0 %}
                                                <label class="label label-warning"
                                                       style="padding: 4px; font-size: 8px;line-height: 8px;">{{ totalnotarchivos }}</label>
                                            {% endif %}
                                            <i class="fa fa-download fa-2x" id="btnNotiIcono"></i>
                                            <b class="caret"></b>
                                        </a>
                                        <ul class="dropdown-menu pull-right">
                                            {% for a in notificacionesarchivos %}
                                                <li>
                                                    <a _href="{{ a.url }}" href="javascript:void(0);" id="{{ a.id }}" class="btn-form viewNotification_b">
                                                        {% if a.en_proceso %}<i class="fa fa-cog fa-spin text-info"></i>{% else %}<i class="fa fa-check-circle text-success"></i>{% endif %} {{ a.titulo }}<br>
                                                        <span class="text-muted">hace {{ a.diasingresado }} dias</span>
                                                    </a>
                                                </li>
                                            {% empty %}
                                                <li>
                                                    <a href="javascript:;" class="btn-form"><i class="fa fa-times-circle"></i> Sin notificaciones.</a>
                                                </li>
                                            {% endfor %}
                                            <li><a href="/notificacion" class="btn-form"><i class="fa fa-list"></i> Ver mis notificaciones</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            {% endif %}

                            {#                            <li id="checkmailicon" class="{% if not persona.tiene_mensajes %}hidden nav-link has_hover{% endif %}">#}
                            {#                                <a style="height: 50px;" href="/mailbox"> <i class="fa fa-envelope fa-2x"></i> </a>#}
                            {#                            </li>#}

{#                            {% if persona.usuario.is_superuser %}#}
{#                                <li class="nav-link has_hover">#}
{#                                    <a style="height: 50px;" href='/unemi_2021_admin_desarrollo_' target="_blank" class="tb"#}
{#                                       title="Administrar Django"><i class="fa fa-cogs fa-2x"></i></a>#}
{#                                </li>#}
{#                            {% endif %}#}

                            <!---
                            PRUEBA DEMO
                            -->
                            {% if tiposistema == 'sga' %}
                            {% endif %}
                            <li class="nav-link has_hover">
                                <a style="height: 50px;" href="javascript:void(0);" class="viewProfile tb" title="Mi Perfil">
                                    {% if persona.foto %}
                                        <img src="{{ persona.foto.foto.url }}" onerror="this.onerror=null;this.src='/static/images/image.png'" width="25" height="25" class="gb_Da img-circle viewProfileIMG">
                                    {% else %}
                                        <img style="background-color: #FFFFFF" src="/static/images/iconos/{% if persona.sexo.id == 2 %}hombre.png{% else %}mujer.png{% endif %}" onerror="this.onerror=null;this.src='/static/images/image.png'" width="25" height="25" class="gb_Da img-circle viewProfileIMG">
                                    {% endif %}
                                </a>
                            </li>
                        </ul>
                    </div>
                {% endif %}
            </ul>
            {#            </nav>#}
        </nav>
    {% endif %}

    <!-- Main Sidebar Container -->

    <!-- Content Wrapper. Contains page content -->

    <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        {#        <div class="content-header">#}
        {#            <div class="container-fluid">#}
        {#                <div class="row mb-2">#}
        {##}
        {#                    <div class="col-sm-12">#}
        {#                        <ol class="breadcrumb float-sm-left">#}
        {#                            <li class="breadcrumb-item"><a href="#">Home</a></li>#}
        {#                            <li class="breadcrumb-item active">Dashboard v1</li>#}
        {#                        </ol>#}
        {#                    </div><!-- /.col -->#}
        {#                </div><!-- /.row -->#}
        {#            </div><!-- /.container-fluid -->#}
        {#        </div>#}
        <!-- /.content-header -->

        <!-- Main content -->
        <section class="content">
            {% block canvas %}
            {% endblock %}
        </section>
        <!-- /.content -->
    </div>

    <!-- /.content-wrapper -->
    {% if not request.user.is_anonymous and not useModal %}
        <footer class="main-footer">
            {% block footerextra %}
            {% endblock %}
            <div style="{% if pie_pagina_creative_common_licence %}text-align: left; float: left;{% else %}text-align: center;{% endif %}">
                <div style="margin-bottom: -5px">{{ nombresistema }}, {{ institucion }}</div>
                <div>Todos los derechos reservados(c) 2012<span id="ipcapturada"></span> -
                    {% if remotenameaddr %}{{ remotenameaddr }}{% endif %} - S{{ server_response }}</div>
            </div>
            <div style="text-align: right; float: right" class="hidden-phone hidden-tablet visible-desktop">
                <p></p>
                <span class="signal_line">
                    <div class="online-indicator">
                        <span class="blink-online"></span>
                    </div>
                </span>
                <font>
                    <a href="javascript:;" style="font-size: 28px; color: #fffeec; font-weight: bold" id="clock"></a>
                </font>
            </div>
        </footer>
    {% endif %}
    {% if not request.user.is_anonymous and not useModal %}
        <div class="panelProfile">
            <div class="panelProfile_pesonal_info">
                <div class="panelProfile_pesonal_info_image">
                    <a class="fancybox" rel="group" {% if persona.foto %}href="{{ persona.foto.foto.url }}" title="{{ persona }}"{% endif %}>
                        {% if persona.foto %}
                            <img src="{{ persona.foto.foto.url }}" onerror="this.onerror=null;this.src='/static/images/image.png'" class="img-circle profile_info_image">
                        {% else %}
                            <img src="/static/images/iconos/{% if persona.sexo.id == 2 %}hombre.png{% else %}mujer.png{% endif %}" onerror="this.onerror=null;this.src='/static/images/image.png'" class="img-circle profile_info_image">
                        {% endif %}
                    </a>
                </div>

                <div class="panelProfile_pesonal_manage_info">
                    <div><span class="label label-success">{{ perfilprincipal.tipo }}</span></div>
                    <strong>{{ persona.nombre_completo }}</strong>
                </div>
                <div class="panelProfile_pesonal_manage_email">
                    {{ persona.emailinst }}
                </div>
                <div class="panelProfile_pesonal_manage_my_profile"><a class="btn btn-default btn-large" href="/th_hojavida">Gestionar mi perfil</a></div>
                <div class="panelProfile_pesonal_manage_my_pass"><a href="/pass" class="btn btn-default btn-large"><i class="fa fa-lock"></i> Cambiar contraseña</a></div>
            </div>
            <div class="panelProfile_profiles">
                <div class="menu-profiles">
                    <ul>
                        {% for perfil in perfiles_usuario %}
                            {% if perfil.activo %}
                                <li class="has-sub {% if perfilprincipal.id == perfil.id %}active{% endif %}">
                                    <a {% if perfilprincipal.id == perfil.id %} href='javascript:;' {% else %} href='/cudu?id={{ perfil.id|encrypt }}' class="btn-form bloqueo_pantalla" {% endif %}>
                                        {% if perfilprincipal.id == perfil.id %}
                                            <i class="fa fa-check-square-o"></i> &nbsp;
                                        {% endif %}
                                        {{ perfil.tipo }}
                                    </a>
                                </li>
                            {% endif %}
                        {% endfor %}
                    </ul>
                </div>
            </div>
            <div class="panelProfile_logout">
                <a href="javascript:void(0);" class="logoutuser tb btn btn-default btn-large"><i class="fa fa-power-off"></i> Cerrar Sesión</a>
            </div>
        </div>

        <div class="panelPeriodosAcademicos">
            <p>ENTRA PERIODOS</p>
        </div>
    {% endif %}

    <!-- Control Sidebar -->

    <!-- /.control-sidebar -->
</div>

{#</div>#}
<div id="throbber" style="display:none; margin: 0 auto; width: 100px; height: 100px; background-color: #ffffff">
    <img style="width: 100px" src="/static/images/tigrillo_loader.gif"/>
</div>


{#NOTIFICACIONES WEB#}

<!-- jQuery -->
<script src="/static/bootstrap4/plugins/jquery/jquery.min.js"></script>
<!-- jQuery UI 1.11.4 -->
<script src="/static/bootstrap4/plugins/jquery-ui/jquery-ui.min.js"></script>
<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
<script>
    $.widget.bridge('uibutton', $.ui.button)
</script>
<!-- Bootstrap 4 select2 -->
<script type="text/javascript" src="/static/bootstrap4/js/select2.js"></script>
<script type="text/javascript" src="/static/bootstrap4/js/select2.min.js"></script>
<!-- Bootstrap 4 -->
<script src="/static/bootstrap4/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- ChartJS -->
{#<script src="/static/bootstrap4/plugins/chart.js/Chart.min.js"></script>#}
<!-- Sparkline -->
<script src="/static/bootstrap4/plugins/sparklines/sparkline.js"></script>
<!-- JQVMap -->
<script src="/static/bootstrap4/plugins/jqvmap/jquery.vmap.min.js"></script>
<script src="/static/bootstrap4/plugins/jqvmap/maps/jquery.vmap.usa.js"></script>
<!-- jQuery Knob Chart -->
<script src="/static/bootstrap4/plugins/jquery-knob/jquery.knob.min.js"></script>
<!-- daterangepicker -->
<script src="/static/bootstrap4/plugins/moment/moment.min.js"></script>
<script src="/static/bootstrap4/plugins/daterangepicker/daterangepicker.js"></script>
<!-- Tempusdominus Bootstrap 4 -->
<script src="/static/bootstrap4/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js"></script>
<!-- Summernote -->
<script src="/static/bootstrap4/plugins/summernote/summernote-bs4.min.js"></script>
<!-- overlayScrollbars -->
<script src="/static/bootstrap4/plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js"></script>
<!-- AdminLTE App -->
<script src="/static/bootstrap4/dist/js/adminlte.js"></script>
<script type='text/javascript' src="/static/bootstrap4/js/jquery.blockUI.js?v=2.70.0"></script>
<!-- AdminLTE for demo purposes -->
{#<script src="/static/bootstrap4/dist/js/demo.js"></script>#}
<!-- AdminLTE dashboard demo (This is only for demo purposes) -->
{#<script src="/static/bootstrap4/dist/js/pages/dashboard.js"></script>#}
<!-- AdminLTE table -->
<link rel="stylesheet" href="/static/bootstrap4/plugins/datatables-bs4/css/dataTables.bootstrap4.min.css">
<link rel="stylesheet" href="/static/bootstrap4/plugins/datatables-responsive/css/responsive.bootstrap4.min.css">
<link rel="stylesheet" href="/static/bootstrap4/plugins/datatables-buttons/css/buttons.bootstrap4.min.css">

<script src="/static/bootstrap4/plugins/datatables/jquery.dataTables.min.js"></script>
<script src="/static/bootstrap4/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
<script src="/static/bootstrap4/plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
<script src="/static/bootstrap4/plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
<script src="/static/bootstrap4/plugins/datatables-buttons/js/dataTables.buttons.min.js"></script>
<script src="/static/bootstrap4/plugins/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
<script src="/static/bootstrap4/plugins/jszip/jszip.min.js"></script>
<script src="/static/bootstrap4/plugins/pdfmake/pdfmake.min.js"></script>
<script src="/static/bootstrap4/plugins/pdfmake/vfs_fonts.js"></script>
<script src="/static/bootstrap4/plugins/datatables-buttons/js/buttons.html5.min.js"></script>
<script src="/static/bootstrap4/plugins/datatables-buttons/js/buttons.print.min.js"></script>
<script src="/static/bootstrap4/plugins/datatables-buttons/js/buttons.colVis.min.js"></script>
<script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());

    gtag('config', 'G-4ZBWFH9X5W');
</script>
<script type="text/javascript">
    $(function () {
        var
            $online = $('.online'),
            $offline = $('.offline');

        Offline.on('confirmed-down', function () {
            //console.log("down");
            $(".signal_line").html("<div class='offline-indicator'> <span class='blink-offline'></span></div>")
            $online.fadeOut(function () {
                $offline.fadeIn();
            });
        });

        Offline.on('confirmed-up', function () {
            //console.log("up");
            $(".signal_line").html("<div class='online-indicator'> <span class='blink-online'></span></div>")
            $offline.fadeOut(function () {
                $online.fadeIn();
            });
        });

        {# });#}
        $(document).ready(function () {
            $(".fancybox").fancybox();
            $('[data-toggle="tooltip"]').tooltip();
        });

        $(".tl").tooltip({placement: "top"});
    });

    function eliminarajax(pk, nombre, accion, url = '{{ request.path }}', titulo = 'Estás por eliminar este registro') {
        Swal.fire({
            title: `${titulo}\n ${nombre}`,
            text: "Esta acción es irreversible",
            type: 'info',
            showCancelButton: true,
            allowOutsideClick: false,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Si, deseo hacerlo',
            cancelButtonText: 'Cancelar'
        }).then((result) => {
            if (result.value) {
                bloqueointerface();
                $.ajax({
                    type: 'POST',
                    url: url,
                    async: false,
                    data: {
                        csrfmiddlewaretoken: '{{ csrf_token }}',
                        action: accion,
                        id: pk,
                    },
                    dataType: "url",
                    beforeSend: function () {
                        bloqueointerface();
                        location.reload();
                    },
                }).done(function (data) {
                    setTimeout($.unblockUI, 1);
                    if (data.error === false) {
                        location.reload();
                    }
                }).fail(function (jqXHR, textStatus, errorThrown) {
                    setTimeout($.unblockUI, 1);
                    NotificationJG.error('Error en el servidor', 'Advertencia!', 10000);
                }).always(function () {
                });

            } else {
            }
        })
    }

    function confirmacionarajax(pk, nombre, accion, url = '{{ request.path }}', titulo = '¿Está seguro de continuar?') {
        Swal.fire({
            title: `${titulo}\n ${nombre}`,
            text: "Esta acción es irreversible",
            type: 'warning',
            showCancelButton: true,
            allowOutsideClick: false,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Si, deseo hacerlo',
            cancelButtonText: 'Cancelar'
        }).then((result) => {
            if (result.value) {
                bloqueointerface();
                $.ajax({
                    type: 'POST',
                    url: url,
                    async: false,
                    data: {
                        csrfmiddlewaretoken: '{{ csrf_token }}',
                        action: accion,
                        id: pk,
                    },
                    dataType: "url",
                    beforeSend: function () {
                        bloqueointerface();
                        location.reload();
                    },
                }).done(function (data) {
                    setTimeout($.unblockUI, 1);
                    if (data.error === false) {
                        location.reload();
                    }
                }).fail(function (jqXHR, textStatus, errorThrown) {
                    setTimeout($.unblockUI, 1);
                    NotificationJG.error('Error en el servidor', 'Advertencia!', 10000);
                }).always(function () {
                });

            } else {
            }
        })
    }

    function mensajeFlotante(tipo, mensaje) {
        Swal.fire({
            toast: false,
            position: 'center',
            icon: "info",
            type: 'info',
            title: mensaje,
            html: tipo,
            showConfirmButton: false
        });
    }

    function alertaSuccess(mensaje) {
        Swal.fire({
            toast: true,
            position: 'top-end',
            type: 'success',
            title: mensaje,
            showConfirmButton: false,
            timer: 1000
        })
    }

    function alertaWarning(mensaje) {
        Swal.fire({
            toast: true,
            position: 'top-end',
            type: 'warning',
            title: mensaje,
            showConfirmButton: false,
            timer: 1000
        })
    }

    function alertaDanger(mensaje) {
        Swal.fire({
            toast: true,
            position: 'top-end',
            type: 'error',
            title: mensaje,
            showConfirmButton: false,
            timer: 1000
        })
    }

    function mensajeSuccess(mensaje) {
        Swal.fire(mensaje, '{{ nombreempresa }}', 'success')
    }

    function mensajeWarning(mensaje) {
        Swal.fire(mensaje, '{{ nombreempresa }}', 'warning')
    }

    function mensajeDanger(mensaje) {
        Swal.fire(mensaje, '{{ nombreempresa }}', 'error')
    }
</script>
<link rel="stylesheet" href="/static/jgrowl/jgrowl.css" type="text/css"/>
<script type="text/javascript" src="/static/jgrowl/jgrowl.min.js"></script>
<script type="text/javascript">
    window.RTCPeerConnection = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection;   //compatibility for firefox and chrome
    var modalposition = 0;
    var mensaje = '';
    var capippriva = ''

    function converToAscii(str) {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toUpperCase();
    }

    $(function () {

        $('#periodoselectorall').select2();

        $('#accPeriodo').click(function () {
            $('#buscarPeriodo').val('');
            var listaPeriodos = $('#listaPeriodos').children('li').toArray();
            for (i = 1; i < listaPeriodos.length; i++) {
                var li = listaPeriodos[i];
                $(li).removeAttr('style');
            }
        });

        $('#buscarPeriodo').mouseenter(function () {
            $(this).focus();
        });

        $('#buscarPeriodo').keyup(function () {
            var listaPeriodos = $('#listaPeriodos').children('li').toArray();
            for (i = 1; i < listaPeriodos.length; i++) {
                var li = listaPeriodos[i];
                if (!converToAscii($(li).children('a:first').html()).includes(converToAscii($(this).val()))) {
                    $(li).attr('style', 'display:none');
                } else {
                    $(li).removeAttr('style');
                }
            }
        });

        if (!('contains' in String.prototype)) {
            String.prototype.contains = function (str, startIndex) {
                return -1 !== String.prototype.indexOf.call(this, str, startIndex);
            };
        }

        {#$("*").focusin(function () {#}
        {#    $('.datepicker').css({"display": "none"});#}
        {# });#}

        showWaiting = function (titulo, mensaje, close) {
            var panel = $("#waitpanel");
            $("#waitpaneltitle").html(titulo);
            $("#waitpanelbody").html(mensaje);
            if (!close) {
                panel.modal({keyboard: false, backdrop: 'static'});
            }
            panel.modal("show");
        };

        hideWaiting = function () {
            $("#waitpanel").modal("hide");
        };

        sinurlatrasbutton = function () {
            if (location.pathname == '/') {
                $("#urlatrasbutton").remove();
            } else {
                $("#idbuscador").remove();
            }
        };

        deshabilitar = function (nombre) {
            $(nombre).attr({"disabled": "disabled"});
        };

        habilitar = function (nombre) {
            $(nombre).removeAttr("disabled").removeAttr("readonly");
        };

        // Funcion de redondeo que reemplaza a la funcion math.round() de javascript por fallos al redondear
        redondeo = function (numero, presicion) {
            var multiplicador = Math.pow(10, presicion + 1);
            var num_multi = Math.floor(numero * multiplicador);
            var num_redondeado = (Math.round(num_multi / 10)) * 10 / multiplicador;

            if (num_redondeado == 0) {
                return 0;
            } else {
                if (!isNaN(num_redondeado))
                    return num_redondeado;
                else
                    return 0;
            }
        };


        openwindow_reporte = function (url, width, height) {
            newwindow = window.open(url, 'name', 'height=' + height + ' ,width=' + width);
        };

        openwindow = function (verb, url, data, target) {
            var form = document.createElement("form");
            form.action = url;
            form.method = verb;
            form.target = target || "_self";
            if (data) {
                for (var key in data) {
                    var input = document.createElement("textarea");
                    input.name = key;
                    input.value = typeof data[key] === "object" ? JSON.stringify(data[key]) : data[key];
                    form.appendChild(input);
                }
                var csrf = document.createElement("input");
                csrf.name = 'csrfmiddlewaretoken';
                csrf.value = '{{ csrf_token }}';
                form.appendChild(csrf);
            }
            form.style.display = 'none';
            document.body.appendChild(form);
            form.submit();
        };

        fechavalida = function (elemento) {
            var valor = elemento.val().toString();
            //Validate dd/mm/yyyy or dd-mm-yyyy format
            var dateformat = /^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/;
            // Match the date format through regular expression
            if (valor.match(dateformat)) {
                //Test which seperator is used '/' or '-'
                var opera1 = valor.split('/');
                var opera2 = valor.split('-');
                lopera1 = opera1.length;
                lopera2 = opera2.length;
                // Extract the string into month, date and year
                if (lopera1 > 1) {
                    var pdate = valor.split('/');
                } else if (lopera2 > 1) {
                    var pdate = valor.split('-');
                }
                var dd = parseInt(pdate[0]);
                var mm = parseInt(pdate[1]);
                var yy = parseInt(pdate[2]);
                // Create list of days of a month [assume there is no leap year by default]
                var ListofDays = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
                if (mm == 1 || mm > 2) {
                    if (dd > ListofDays[mm - 1]) {
                        //alert('Invalid date format!');
                        elemento.val(fechaactual());
                        return;
                    }
                }
                if (mm == 2) {
                    var lyear = false;
                    if ((!(yy % 4) && yy % 100) || !(yy % 400)) {
                        lyear = true;
                    }
                    if ((lyear == false) && (dd >= 29)) {
                        //alert('Invalid date format!');
                        elemento.val(fechaactual());
                        return;
                    }
                    if ((lyear == true) && (dd > 29)) {
                        //alert('Invalid date format!');
                        elemento.val(fechaactual());
                        return;
                    }
                }
            } else {
                //alert("Invalid date format!");
                elemento.val(fechaactual());
                return;
            }
            //return;
        };

        fechaactual = function () {
            var d = new Date();
            var month = d.getMonth() + 1;
            var day = d.getDate();
            var fecha = (day < 10 ? '0' : '') + day + '-' + (month < 10 ? '0' : '') + month + '-' + d.getFullYear();
            return fecha;
        };

        showMsgAlertModal = function (title, message, type) {
            $("#itemspanelmsgalertmodal .paneltitlemsgalertmodal").html(title);

            if ($("#itemspanelmsgalertmodal .msgtypealert").hasClass("alert alert-success"))
                $("#itemspanelmsgalertmodal .msgtypealert").removeClass("alert alert-success");
            else if ($("#itemspanelmsgalertmodal .msgtypealert").hasClass("alert alert-info"))
                $("#itemspanelmsgalertmodal .msgtypealert").removeClass("alert alert-info");
            else if ($("#itemspanelmsgalertmodal .msgtypealert").hasClass("alert alert-warning"))
                $("#itemspanelmsgalertmodal .msgtypealert").removeClass("alert alert-warning");
            else if ($("#itemspanelmsgalertmodal .msgtypealert").hasClass("alert alert-danger"))
                $("#itemspanelmsgalertmodal .msgtypealert").removeClass("alert alert-danger");

            if (type == 'success')
                $("#itemspanelmsgalertmodal .msgtypealert").addClass("alert alert-success");
            else if (type == 'info')
                $("#itemspanelmsgalertmodal .msgtypealert").addClass("alert alert-info");
            else if (type == 'warning')
                $("#itemspanelmsgalertmodal .msgtypealert").addClass("alert alert-warning");
            else if (type == 'danger')
                $("#itemspanelmsgalertmodal .msgtypealert").addClass("alert alert-danger");

            $("#itemspanelmsgalertmodal .msgtextalert").html(message);
            $("#itemspanelmsgalertmodal").modal({backdrop: 'static', width: '700px'}).modal('show');
        };

        closeMsgAlertModal = function () {
            $("#itemspanelmsgalertmodal").modal('hide');
        };

        showMsgConfirmationModal = function (title, message, type, positiveText, negativeText) {
            $("#itemspanelmsgconfirmationmodal .paneltitlemsgconfirmationmodal").html(title);

            if ($("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").hasClass("alert alert-success"))
                $("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").removeClass("alert alert-success");
            else if ($("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").hasClass("alert alert-info"))
                $("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").removeClass("alert alert-info");
            else if ($("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").hasClass("alert alert-warning"))
                $("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").removeClass("alert alert-warning");
            else if ($("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").hasClass("alert alert-danger"))
                $("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").removeClass("alert alert-danger");

            if (type == 'success')
                $("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").addClass("alert alert-success");
            else if (type == 'info')
                $("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").addClass("alert alert-info");
            else if (type == 'warning')
                $("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").addClass("alert alert-warning");
            else if (type == 'danger')
                $("#itemspanelmsgconfirmationmodal .msgtypeconfirmation").addClass("alert alert-danger");

            $("#itemspanelmsgconfirmationmodal .msgtextconfirmation").html(message);
            $("#itemspanelmsgconfirmationmodal .btn-positive-cm").html(positiveText);
            $("#itemspanelmsgconfirmationmodal .btn-negative-cm").html(negativeText);
            $("#itemspanelmsgconfirmationmodal").modal({backdrop: 'static', width: '700px'}).modal('show');
        };

        closeMsgConfirmationModal = function () {
            $("#itemspanelmsgconfirmationmodal").modal('hide');
        };


        numerico = function (elemento, min, max, decimales) {
            var nvalor;
            var valor = elemento.val();
            if (valor == "") {
                valor = parseFloat(0).toFixed(decimales);
                elemento.val(valor);
                return;
            }
            if (isNaN(valor)) {
                nvalor = parseFloat(min).toFixed(decimales);
                elemento.val(nvalor);
                return;
            }
            if (valor < min) {
                nvalor = parseFloat(min).toFixed(decimales);
                elemento.val(nvalor);
                return;
            }
            if (max > 0 && valor > max) {
                nvalor = parseFloat(max).toFixed(decimales);
                elemento.val(nvalor);
                return;
            }
            nvalor = parseFloat(valor).toFixed(decimales);
            elemento.val(nvalor);
        };

        digitos = function (elemento) {
            var valor = elemento.val();
            if (valor == "") {
                elemento.val("");
                return;
            }
            if (isNaN(valor)) {
                elemento.val("");
                return;
            } else if (valor.indexOf("-") != -1 || valor.indexOf(".") != -1 || valor.indexOf(",") != -1) {
                elemento.val("");
                return;
            } else {
                elemento.val(valor.trim());
            }
        };

        validacionesnumericas = function () {
            $(".validarnumero").blur(function () {
                numerico($(this), 0, 0, 0);
            });

            $(".validarmoneda").blur(function () {
                numerico($(this), 0, 0, 2);
            });
        };

        sinurlatrasbutton();

        $(".listaperiodos").click(function () {
            $("#periodospanel").modal("show");
        });

        $("#cerrarperiodospanel").click(function () {
            $("#periodospanel").modal("hide");
        });

        cerrar_viewhtml = function () {
            $("#viewhtml").modal("hide");
        };

        $("#seleccionarperiodospanel").click(function () {
            var pid = $("#periodoselectorall").val();
            $("#periodospanel").modal("hide");
            bloqueointerface();
            $.ajax({
                type: "POST",
                url: "/",
                data: {'action': 'periodo', 'id': pid},
                success: function (data) {
                    if (data.result == 'ok') {
                        location.href = location.pathname;
                    } else {
                        $.unblockUI();
                        smoke.alert("Error al cambiar de periodo");
                    }
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error al cambiar de periodo");
                },
                dataType: "json"
            });
        });


        sleep = function (milliseconds) {
            var start = new Date().getTime();
            for (var i = 0; i < 1e7; i++) {
                if ((new Date().getTime() - start) > milliseconds) {
                    break;
                }
            }
        };

        {% if persona and check_session %}
            chequearsesion = function () {
                $.ajax({
                    type: "POST",
                    url: "/api",
                    data: {'a': 'checksession'},
                    success: function (data) {
                        if (data.result == 'ok') {
                            if (data.nuevasesion) {
                                bloqueointerface();
                                location.href = '/logout';
                            }
                        }
                    },
                    dataType: "json"
                });
            };

            setInterval(chequearsesion, 500000);
        {% endif %}


        bloqueointerface1 = function () {
            if (!$(".blockUI").length) {
                $.blockUI({
                    message: '<span class="spinner-grow spinner-border-lg" role="status" aria-hidden="true" style="width: 10rem; height: 10rem; background-color: #1C3247 ; color: #1C3247 ; !important"</span>',
                    css: {
                        backgroundColor: 'transparent',
                        border: '0',
                        zIndex: 9999999
                    },
                    overlayCSS: {
                        backgroundColor: '#fff',
                        opacity: 0.8,
                        zIndex: 9999990
                    }
                });
            }
        };

        bloqueointerface2 = function () {
            if (!$(".blockUI").length) {
                $.blockUI({
                    message: $('#throbber'),
                    css: {
                        backgroundColor: 'transparent',
                        border: '0',
                        zIndex: 9999999
                    },
                    overlayCSS: {
                        backgroundColor: '#fff',
                        opacity: 0.8,
                        zIndex: 9999990
                    }
                });
            }
        };


        bloqueointerface = function () {
            if (!$(".blockUI").length) {
                $.blockUI({
                    message: '<span class="spinner-grow spinner-border-lg" role="status" aria-hidden="true" style="width: 10rem; height: 10rem; background-color: #F8C471 ; color: #F8C471 ; !important"</span>',
                    css: {
                        backgroundColor: 'transparent',
                        border: '0',
                        zIndex: 9999999
                    },
                    overlayCSS: {
                        backgroundColor: '#fff',
                        opacity: 0.8,
                        zIndex: 9999990
                    }
                });
            }
        };

        function getPromise(url, params) {
            return new Promise(resolve => {
                //$.get(url, {data: JSON.stringify(params)}, function (data) {
                $.get(url, params, function (data) {
                    resolve(data);
                }, 'json');
            });
        }

        function postPromise(url, action, params) {
            return new Promise(resolve => {
                $.post(url, {
                    'action': action,
                    'csrfmiddlewaretoken': '{{ csrf_token }}',
                    data: JSON.stringify(params)
                }, function (data) {
                    resolve(data);
                }, 'json');
            });
        }

        {% if persona and check_session %}
            var check_logout;

            logout = function () {
                bloqueointerface();
                localStorage.clear();
                $.ajax({
                    type: "POST",
                    url: "/api",
                    data: {'a': 'logout'},
                    success: function (data) {
                        if (data.result === 'ok') {
                            location.href = data.url;
                        } else {
                            logout();
                        }
                    },
                    error: function () {
                        logout();
                    },
                    dataType: "json"
                });
            };

            {#$('.logoutuser').click(function () {#}
            {#    logout();#}
            {# });#}

            $('.logoutuser').on('click', function () {
                logout();
            });

        {% endif %}

        serverdate = new Date({{ currenttime.year }}, {{ currenttime.month }}-1, {{ currenttime.day }}, {{ currenttime.hour }}, {{ currenttime.minute }}, {{ currenttime.second }}, 0);
        clientdate = new Date();

        showTime = function () {
            var m;
            var today = new Date();
            var timediff = today - clientdate;
            var renderdate = new Date(serverdate.getTime() + timediff);
            var h = renderdate.getHours();
            var mer = " AM";
            if (h > 12) {
                mer = " PM";
                h -= 12;
            }
            m = renderdate.getMinutes();
            m = checkTime(m);
            $("#clock").text(h + ":" + m + mer);
        };

        checkTime = function (i) {
            if (i < 10) {
                i = "0" + i;
            }
            return i;
        };

        setInterval(showTime, 15000);

        showTime();

        $('.dropdown-toggle').dropdown();
        $(".collapse").collapse();
        $('.tips').tooltip({});

        $(".periodoselector").click(function () {
            var pid = $(this).attr('pid');
            bloqueointerface();
            $.ajax({
                type: "POST",
                url: "/",
                data: {'action': 'periodo', 'id': pid},
                success: function (data) {
                    if (data.result == 'ok') {
                        location.href = location.pathname;
                    } else {
                        $.unblockUI();
                        smoke.alert("Error al cambiar de periodo");
                    }
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error al cambiar de periodo");
                },
                dataType: "json"
            });
        });

        $("#id_email, #id_emailinst, #id_correoinstasoc, #id_correoinst").css({'text-transform': 'none'});

        $("table tbody tr").hover(function () {
            $(this).addClass("info");
        }, function () {
            $(this).removeClass("info");
        });

        {#$(".btn-form").click(function () {#}
        {#    bloqueointerface();#}
        {# });#}

        $(".bloqueo_pantalla").click(function () {
            bloqueointerface();
        });

        if (typeof String.prototype.startsWith != 'function') {
            String.prototype.startsWith = function (str) {
                return this.indexOf(str) == 0;
            };
        }

        if (typeof String.prototype.endsWith != 'function') {
            String.prototype.endsWith = function (str) {
                return this.slice(-str.length) == str;
            };
        }

        abrir_reporte = function () {
            var href = $(this).attr('nhref');
            var tipos = $(this).attr('tipos');
            if (!tipos) {
                tipos = "pdf, xls, csv, doc";
            }
            if (tipos.contains("pdf")) {
                $("#formatopdf").removeAttr("hidden");
            } else {
                $("#formatopdf").attr({"hidden": "hidden"});
            }
            if (tipos.contains("doc")) {
                $("#formatodoc").removeAttr("hidden");
            } else {
                $("#formatodoc").attr({"hidden": "hidden"});
            }
            if (tipos.contains("xls")) {
                $("#formatoxls").removeAttr("hidden");
            } else {
                $("#formatoxls").attr({"hidden": "hidden"});
            }
            if (tipos.contains("csv")) {
                $("#formatocsv").removeAttr("hidden");
            } else {
                $("#formatocsv").attr({"hidden": "hidden"});
            }
            if (tipos.length > 4) {
                primero = $("#formatoreporte_formato").find("option:first").val();
                $("#formatoreporte_formato").val(primero);
                $('#formatoreporte').modal({'width': '400'}).modal('show');
                $('#formatoreporte_run').attr('nhref', href);
            } else {
                primero = $("#formatoreporte_formato").find("option:first").val();
                $("#formatoreporte_formato").val(primero);
                ejecutar_reporte_directo(href);

            }

        };

        cerrar_reporte = function () {
            $('#formatoreporte').modal('hide');
        };

        ejecutar_reporte_directo = function (ruta) {
            var href = ruta;
            $('#formatoreporte').modal('hide');
            var formato = $('#formatoreporte_formato').val();
            var formato_final = '';
            if (formato == 0) {
                formato_final = '&rt=pdf';
            } else if (formato == 1) {
                formato_final = '&rt=docx';
            } else if (formato == 2) {
                formato_final = '&rt=xlsx';
            } else if (formato == 3) {
                formato_final = '&rt=csv';
            }
            bloqueointerface();
            var report_url = href + formato_final;
            $.ajax({
                type: "POST",
                url: report_url,
                success: function (data) {
                    $.unblockUI();
                    if (data.result == 'ok') {
                        if (data.es_background) {
                            Swal.fire({
                                title: `NOTIFICACIÓN`,
                                text: data.r,
                                type: 'success',
                                icon: 'success',
                                showCancelButton: false,
                                allowOutsideClick: false,
                                confirmButtonColor: '#3085d6',
                                cancelButtonColor: '#d33',
                                confirmButtonText: 'Aceptar',
                                cancelButtonText: 'No, cancelar'
                            }).then((result) => {

                            }).catch(error => {
                                Swal.fire({
                                    toast: false,
                                    position: 'center',
                                    icon: 'error',
                                    type: 'error',
                                    title: 'Notificación',
                                    text: error.message,
                                    showConfirmButton: false,
                                    timer: 6000
                                });
                            });
                        } else {
                            if (formato == 0) {
                                openwindow_reporte(location.origin + data.reportfile, 800, 500);
                            } else {
                                location.href = location.origin + data.reportfile;
                            }
                        }
                    } else {
                        Swal.fire({
                            toast: false,
                            position: 'center',
                            icon: 'error',
                            type: 'error',
                            title: 'Reporte',
                            text: data.mensaje,
                            showConfirmButton: false,
                            timer: 6000
                        });
                        //NotificationJG.error(data.mensaje, "Reporte")
                    }
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error al generar el reporte");
                },
                dataType: "json"
            });
        };

        ejecutar_reporte = function () {
            var href = $(this).attr('nhref');
            $('#formatoreporte').modal('hide');
            var formato = $('#formatoreporte_formato').val();
            var formato_final = '';
            if (formato == 0) {
                formato_final = '&rt=pdf';
            } else if (formato == 1) {
                formato_final = '&rt=docx';
            } else if (formato == 2) {
                formato_final = '&rt=xlsx';
            } else if (formato == 3) {
                formato_final = '&rt=csv';
            }
            bloqueointerface();
            var report_url = href + formato_final;
            {#alert(report_url);#}
            $.ajax({
                type: "POST",
                url: report_url,
                success: function (data) {
                    $.unblockUI();
                    if (data.result == 'ok') {
                        if (formato == 0) {
                            openwindow_reporte(location.origin + data.reportfile, 800, 500);
                        } else {
                            location.href = location.origin + data.reportfile;
                        }
                    } else {
                        smoke.alert("Error al generar el reporte");
                    }
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error al generar el reporte");
                },
                dataType: "json"
            });
        };

        {% if messages %}
            {% for message in messages %}
                {% if message.tags == 'success' %}
                    NotificationJG.success('{{ message }}', 'Aviso!', 10000);
                {% elif message.tags == 'info' %}
                    NotificationJG.info('{{ message }}', 'Aviso!', 10000);
                {% elif message.tags == 'warning' %}
                    NotificationJG.warning('{{ message }}', 'Advertencia!', 10000);
                {% elif message.tags == 'error' %}
                    NotificationJG.error('{{ message }}', 'Advertencia!', 10000);
                {% endif %}
                {#Swal.fire('{{ message }}', 'Advertencia', '{{ message.tags }}');#}
            {% endfor %}
        {% endif %}

        {% if mensj or info %}
            //smoke.alert('{{ mensj }}{{ info }}');
            NotificationJG.warning('{{ mensj }}{{ info }}', 'Advertencia!', 10000);
        {% endif %}

        conectar_confirmacion = function () {
            var href = $(this).attr('nhref');
            bloqueointerface();
            $.ajax({
                type: "GET",
                url: href,
                success: function (data) {
                    $.unblockUI();
                    if (data.search('"' + 'ajaxconfirmaciondinamicbs' + '"') >= 0) {
                        $("#confirmacionmodal").html(data);
                        $('#confirmacionmodal').modal({'width': '650'}).modal('show');
                    } else {
                        smoke.alert("Error de conexión.");
                    }
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error de conexión.");
                },
                dataType: "html"
            });
        };

        conectar_eliminacion = function () {
            var href = $(this).attr('nhref');
            bloqueointerface();
            $.ajax({
                type: "GET",
                url: href,
                success: function (data) {
                    $.unblockUI();
                    if (data.search('"' + 'ajaxdeletedinamicbs' + '"') >= 0) {
                        $("#eliminacionmodal").html(data);
                        $('#eliminacionmodal').modal({'width': '650'}).modal('show');
                    } else {
                        smoke.alert("Error de conexión.");
                    }
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error de conexión.");
                },
                dataType: "html"
            });
        };

        conectar_viewhtml = function () {
            var href = $(this).attr('nhref');
            bloqueointerface();
            $.ajax({
                type: "GET",
                url: href,
                success: function (data) {
                    $.unblockUI();
                    if (data.search('"' + 'ajaxconfirmaciondinamicbs' + '"') >= 0) {
                        $("#viewhtml").html(data);
                        $('#viewhtml').modal({'width': '650'}).modal('show');
                        $('.cerrarviewhtml').bind('click.cerrar_viewhtml', cerrar_viewhtml);
                    } else {
                        smoke.alert("Error de conexión.");
                    }
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error de conexión.");
                },
                dataType: "html"
            });
        };


        $('.confirmacionmodal').bind('click.conectar_confirmacion', conectar_confirmacion);
        $('.viewhtml').bind('click.conectar_viewhtml', conectar_viewhtml);
        $('.eliminacionmodal').bind('click.conectar_eliminacion', conectar_eliminacion);
        $(".reportedirecto").bind("click.conectar_reporte", abrir_reporte);
        $("#formatoreporte_run").bind("click.ejecutar_reporte", ejecutar_reporte);
        $("#formatoreporte_close").bind("click.cerrar_reporte", cerrar_reporte);

        conectar_reporte = function () {
            $(".reportedirecto").unbind("click.conectar_reporte");
            $(".reportedirecto").bind("click.conectar_reporte", abrir_reporte);
        };

        tooltips = function () {
            $(".tl").tooltip({placement: "left"});
            $(".tr").tooltip({placement: "right"});
            $(".tu").tooltip({placement: "top"});
            $(".tb").tooltip({placement: "bottom"});
        };

        tooltips();

        $('.selectorfecha').keypress(function () {
            return false;
        });

        history.pushState(null, null, location.href);
        window.addEventListener('popstate', function (event) {
            history.pushState(null, null, location.href);
        });

        actualizarnumerico = function () {
            $('.imp-number[decimal], .imp-moneda[decimal], .imp-numbersmall[decimal], .imp-numbermed-right[decimal], .imp-numbermed-center[decimal], .nota[decimal]').each(function () {
                numerico($(this), 0, 0, $(this).attr('decimal'));
            })
        };

        escapeHTMLEncode = function (str) {
            var div = document.createElement('div');
            var text = document.createTextNode(str);
            div.appendChild(text);
            return div.innerHTML;
        };

        actualizarnumerico();

        $('.imp-number, .imp-moneda, .imp-numbersmall, .imp-numbermed-right, .imp-numbermed-center, .nota').focus(function () {
            if (!parseFloat($(this).val())) {
                $(this).val("");
            }
        });

        $('.selectorfecha').keypress(function () {
            return false;
        });

        tipo_formulario = function (elemento) {
            if (elemento.attr('formtype') == 'form-vertical') {
                elemento.find(".control-label").css({'float': 'none'});
                elemento.find(".label-text").css({'text-align': 'left'});
                elemento.find(".control-label").each(function () {
                    var contenedor = parseFloat($(this).parent().css('width')) - 5;
                    $(this).css({'width': contenedor.toString() + 'px'});
                });
                elemento.find(".control").each(function () {
                    var contenedor = parseFloat($(this).parent().css('width')) - 5;
                    $(this).css({'width': contenedor.toString() + 'px'});
                });

            } else {
                elemento.find(".control-label").css({'float': 'left'});
                elemento.find(".label-text").css({'text-align': 'right'});
                if (elemento.hasClass('form-modal')) {
                    elemento.find(".control-group").each(function () {
                        var contenedor = parseFloat($(this).parent().width());
                        var porciento = (parseFloat($(this).width()) / 100);
                        var tam = parseInt(contenedor * porciento);
                        $(this).css({'width': tam});
                    });
                }
                elemento.find(".control-label").each(function () {
                    if ($(this).attr('labelwidth')) {
                        $(this).css({'width': $(this).attr('labelwidth')});
                    } else {
                        $(this).css({'width': '160px'});
                    }
                });
                elemento.find(".control").each(function () {
                    var contenedor = $(this).parent().width();
                    var label = parseFloat($(this).parent().find('.control-label').width());
                    $(this).css({'width': ((contenedor - label) - 20).toString() + 'px'});
                });
            }
            elemento.find(".select2").css({'width': '100%'});
        };
        pop_lista = function (arr, item) {
            for (var i = arr.length; i--;) {
                if (arr[i] === item) {
                    arr.splice(i, 1);
                }
            }
        };


        $('.viewNotification_b').click(function () {
            var id = $(this).attr('id');
            var _href = $(this).attr('_href');
            bloqueointerface();
            $.ajax({
                type: "POST",
                url: "/notificacion",
                data: {'action': 'ViewedNotification', 'id': id},
                success: function (data) {
                    $.unblockUI();
                    if (data.result == 'ok') {
                        window.location.href = _href;
                    } else {
                        smoke.alert(data.mensaje);
                    }
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error de conexión.");
                },
                dataType: "json"
            });
        });

        $(".action_view_change_profile").click(function () {
            $("#modalPerfilChangeMobile").modal({backdrop: 'static', width: '100%'}).modal('show');
        });

        $(".btn-cerrar", $("#modalPerfilChangeMobile")).click(function () {
            $("#modalPerfilChangeMobile").modal('hide');
        });

        $(".action_change_mobile", $("#modalPerfilChangeMobile")).click(function () {
            let nhref = $(this).attr('nhref');
            bloqueointerface();
            location.href = nhref;
        });

    });


    //aqui entra
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = jQuery.trim(cookies[i]);
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }

    var csrftoken = getCookie('csrftoken');

    function csrfSafeMethod(method) {
        return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
    }

    $.ajaxSetup({
        beforeSend: function (xhr, settings) {
            if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                xhr.setRequestHeader("X-CSRFToken", csrftoken);
            }
        }
    });
</script>
<script type="text/javascript">

    $.extend(true, $.jGrowl.defaults, {
        pool: 5,
        closerTemplate: '<div>[Cerrar todas]</div>',
        closer: function () {
        },
        log: function (e, m, o) {
            //$('#logs').append("<div><strong>#" + $(e).attr('id') + "</strong> <em>" + (new Date()).getTime() + "</em>: " + m + " (" + o.theme + ")</div>")
        }

    });

    NotificationJG = {
        success: function (msg, header/*=undefined*/, ttime/*=5000*/) {
            $.jGrowl(msg, {
                theme: 'growl-success',
                header: (header == 'undefined') ? 'Mensaje!' : header,
                life: ttime,
                closeTemplate: ''
            });
        },
        error: function (msg, header/*=undefined*/, ttime/*=5000*/) {
            $.jGrowl(msg, {
                theme: 'growl-error',
                header: (header == 'undefined') ? 'Mensaje!' : header,
                life: ttime,
                closeTemplate: ''
            });
        },
        warning: function (msg, header/*=undefined*/, ttime/*=5000*/) {
            $.jGrowl(msg, {
                theme: 'growl-warning',
                header: (header == 'undefined') ? 'Mensaje!' : header,
                life: ttime,
                closeTemplate: ''
            });
        },
        info: function (msg, header/*=undefined*/, ttime/*=5000*/) {
            $.jGrowl(msg, {
                theme: 'growl-info',
                header: (header == 'undefined') ? 'Mensaje!' : header,
                life: ttime,
                closeTemplate: ''
            });
        }
    };

    Confirm = {
        question: function (question, fun_yes/*=null*/, fun_no/*=null*/) {
            var $popup = $('#modalConfirm');

            $popup.modal({backdrop: 'static', keyboard: false}).modal('show');

            $('.modal-body p', $popup).html(question);

            $('.action_yes', $popup).off('click').on('click', function () {
                if (typeof fun_yes != 'undefined') {
                    fun_yes();
                }
                $popup.modal('hide');
            });

            $('.action_not', $popup).off('click').on('click', function () {
                if (typeof fun_no != 'undefined') {
                    fun_no();
                }
                $popup.modal('hide');
            });
        },
        ajax: function (aData, fun_yes/*=null*/, fun_no/*=null*/) {
            var d = {"action": "deleteView"}
            $.each(aData, function (index, value) {
                d[index] = value
            });
            aData = d
            bloqueointerface();
            var $popup = $('#modalConfirmAjax');
            $.ajax({
                type: "GET",
                url: "/data",
                data: aData,
                success: function (data) {
                    if (data.result == 'ok') {
                        $('.modal-body', $popup).html(data.html);
                        var h = $(window).height() - 350;
                        $popup.modal({backdrop: 'static', keyboard: false, width: "60%", height: h}).modal('show');
                        $('.action_yes', $popup).off('click').on('click', function () {
                            if (typeof fun_yes != 'undefined') {
                                fun_yes();
                            }
                            $popup.modal('hide');
                        });

                        $('.action_not', $popup).off('click').on('click', function () {
                            if (typeof fun_no != 'undefined') {
                                fun_no();
                            }
                            $popup.modal('hide');
                        });
                    } else {
                        NotificationJG.error(data.mensaje);
                    }
                    $.unblockUI();
                },
                error: function () {
                    $.unblockUI();
                    NotificationJG.error("Error al enviar los datos.");
                },
                dataType: "json",
            });
        },

    };
    $(function () {
        $(document).ready(function () {

            {% if persona.tiene_notificaciones.sga and tipoentrada == 'SGA' %}
                var num_notificaciones = {{ persona.num_notificaciones.sga }}
                {% if persona.num_notificaciones.sga > 1 %}
                    var msg = `Tiene ${num_notificaciones} notificaciones`;
                {% else %}
                    var msg = `Tiene ${num_notificaciones} notificación`;
                {% endif %}
                NotificationJG.info(msg, "SGA");
            {% endif %}
            {% if persona.tiene_notificaciones.sagest and tipoentrada == 'SAGEST'%}
                var num_notificaciones = {{ persona.num_notificaciones.sagest }}
                {% if persona.num_notificaciones.sagest > 1 %}
                    var msg = `Tiene ${num_notificaciones} notificaciones`;
                {% else %}
                    var msg = `Tiene ${num_notificaciones} notificación`;
                {% endif %}
                NotificationJG.info(msg, "SAGEST");
            {% endif %}

            {% for notificacion in  notificaciones %}
                {% if notificacion.type == 'error' %}
                    NotificationJG.error("{{ notificacion.body  }}", "{{ notificacion.title }}");
                {% endif %}
                {% if notificacion.type == 'succes' %}
                    NotificationJG.success("{{ notificacion.body  }}", "{{ notificacion.title }}");
                {% endif %}
                {% if notificacion.type == 'warning' %}
                    NotificationJG.warning("{{ notificacion.body  }}", "{{ notificacion.title }}");
                {% endif %}
                {% if notificacion.type == 'info' %}
                    NotificationJG.info("{{ notificacion.body  }}", "{{ notificacion.title }}");
                {% endif %}
            {% endfor %}
            //99
            {% if periodo.id == 99 and persona.tiene_encuesta_pendiente_google and perfilprincipal.es_estudiante %}
                //console.log(Date.now() >= Date.parse("2021/03/11") && Date.now() <= Date.parse("2021/03/23"));
                if (Date.now() >= Date.parse("2021/03/11") && Date.now() <= Date.parse("2021/03/23")) {
                    var banderaForm = 0;
                    $('#encuestaGoogleModal')
                        .off('shown.bs.modal')
                        .on('shown.bs.modal', function () {
                            $('#formsGoogleDocs').on('load', function () {
                                if (banderaForm == 1) {
                                    bloqueointerface();
                                    id_persona = {{ persona.id }}
                                        $.ajax({
                                            type: "POST",
                                            url: "/",
                                            data: {'action': 'RegisterPoll', 'id': id_persona},
                                            success: function (data) {
                                                $.unblockUI();
                                                if (data.result == 'ok') {
                                                    $('#encuestaGoogleModal').modal('hide');
                                                    banderaForm = 0;
                                                    NotificationJG.success("Realizo la encuesta, correctamente", "SGA");
                                                } else {
                                                    smoke.alert(data.mensaje);
                                                }
                                            },
                                            error: function () {
                                                $.unblockUI();
                                                smoke.alert("Error de conexión.");
                                            },
                                            dataType: "json"
                                        });

                                } else {
                                    banderaForm = 1;
                                }
                            });

                        })
                        .modal('show');
                }
            {% endif %}

            $(".viewProfile").click(function () {
                var panelProfile = $(".panelProfile");
                if (panelProfile.css('display') == 'none') {
                    // Acción si el elemento no es visible
                    panelProfile.css('display', 'block');

                    //$( ".panelProfile >[img]" ).css('border', '5px #cb8a4f !important;')
                    //panelProfile.addClass('has_active');

                } else {
                    // Acción si el elemento es visible
                    panelProfile.css('display', 'none');
                    //panelProfile.removeClass('has_active')
                }
            });

            $(".viewPeriodosAcademicos").click(function () {
                var panelPeriodosAcademicos = $(".panelPeriodosAcademicos");
                if (panelPeriodosAcademicos.css('display') == 'none') {
                    // Acción si el elemento no es visible
                    panelPeriodosAcademicos.css('display', 'block');
                    //panelProfile.addClass('has_active');

                } else {
                    // Acción si el elemento es visible
                    panelPeriodosAcademicos.css('display', 'none');
                }
            });

            $(document).on("click", function (e) {
                var panelProfile = $(".panelProfile");
                var viewProfile = $(".viewProfile");
                var viewPeriodosAcademicos = $(".viewPeriodosAcademicos");
                var panelPeriodosAcademicos = $(".panelPeriodosAcademicos");
                if (!panelProfile.is(e.target) && panelProfile.has(e.target).length === 0 && !viewProfile.is(e.target) && viewProfile.has(e.target).length === 0) {
                    //console.log("entro a super");
                    if (panelProfile.css('display') == 'block') {
                        //Acción si el elemento no es visible
                        panelProfile.css('display', 'none');
                        //panelProfile.removeClass('has_active');
                    }
                }

                if (!panelPeriodosAcademicos.is(e.target) && panelPeriodosAcademicos.has(e.target).length === 0 && !viewPeriodosAcademicos.is(e.target) && viewPeriodosAcademicos.has(e.target).length === 0) {
                    //console.log("entro a super");
                    if (panelPeriodosAcademicos.css('display') == 'block') {
                        //Acción si el elemento no es visible
                        panelPeriodosAcademicos.css('display', 'none');
                    }
                }

            });
            /*$('[data-toggle="popover"]').popover({
                placement: 'left',
                trigger: 'hover'
            });*/

            $('.action_info_menu_admin').popover({
                placement: 'left',
                html: true,
                trigger: 'hover',
                delay: {
                    show: "1",
                    hide: "100"
                }
            }).on('shown.bs.popover', function () {
                setTimeout(function () {
                    $('.action_info_menu_admin').popover('hide');
                }, 1000);
            });


        });
    });
</script>
<script>
    function openNav() {
        document.getElementById("sideNavigation").style.width = "250px";
        document.getElementById("app").style.marginLeft = "250px";
        //document.getElementById("contenedorLogo").style.display = 'none';
        document.getElementById("contenedorLogo").style.paddingLeft = '240px';
        //$("#contenedorLogo").style("padding-left", '240px');
        var x = document.getElementById("contenedorLogo").firstElementChild;
        x.style.display = 'none';
    }

    function closeNav() {
        document.getElementById("sideNavigation").style.width = "0";
        document.getElementById("app").style.marginLeft = "0";
        //document.getElementById("contenedorLogo").style.display = 'block';
        document.getElementById("contenedorLogo").style.paddingLeft = '0px';
        var x = document.getElementById("contenedorLogo").firstElementChild;
        x.style.display = 'block';
        //$("#contenedorLogo").style("padding-left", '0px');
    }

    function irArriba() {
        //console.log("arrr")
        $('.ir-arriba').click(function () {
            $('body,html').animate({scrollTop: '0px'}, 1000);
        });
        $(window).scroll(function () {
            if ($(this).scrollTop() > 0) {
                $('.ir-arriba').slideDown(600);
            } else {
                $('.ir-arriba').slideUp(600);
            }
        });
        $('.ir-abajo').click(function () {
            $('body,html').animate({scrollTop: '1000px'}, 1000);
        });
    }

    $(document).ready(function () {
        irArriba();
    });
</script>
<script>
    $(window).on("load", (function () {
        setTimeout(function () {
            jQuery('#loading').fadeOut(100);
        }, 100);
    }));

    console.log('%cUNIVERSIDAD ESTATAL DE MILAGRO', 'color:red; font-size: 2em;')
    console.log('%cTodos los derechos reservados © 2012', 'color:red; font-size: 2em;')

</script>

{#NOTIFICACIONES WEB#}
{% if request.user.is_authenticated and persona.es_administrativo and permiteWebPush and persona.es_profesor %}
    <script src="/static/webpush/registerSw.js?0.21"></script>
    <script>
        $(function(){
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.ready.then(registration => {
                    registration.active.postMessage({type: 'PORT_INITIALIZATION'});
                    if ('SyncManager' in window) {
                        registration.sync.register('sync-data');
                    }
                    navigator.serviceWorker.addEventListener('message', (event) => {
                        var data = event.data;
                        console.log(data)
                        if (data.btn_notificaciones) {
                            mensajeSuccess('Su reporte ha sido generado con exito.')
                            $('#btnNotificacionTareas').html(data.btn_notificaciones);
                        }
                    });
                });
            }
        });
    </script>
{% endif %}
{% block heading %}
{% endblock %}
{% block extraJs %}{% endblock %}
</body>
</html>
