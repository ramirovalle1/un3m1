{% extends "base.html" %}
{% load sga_extras %}
{% block heading %}
    <link rel="stylesheet" href="/static/css/bloques.css?v=1">
    <link href="/static/css/table-responsive.css?1.0.0" type="text/css" rel="stylesheet" />
    <script type="text/javascript" src="/static/js/jquery.fancybox.pack.js?v=1.0.0"></script>
    <link rel="stylesheet" href="/static/css/jquery.fancybox.css?v=1.0.0" type="text/css" media="screen"/>
    <script type="text/javascript" src='/static/js/select2.js?v=1.0.0'></script>
    <link type='text/css' rel='stylesheet' href="/static/css/select2.css?v=1.0.0"/>
    <link href="/static/widget_ppp.css" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
        #app {padding-left: 1.5rem !important;padding-right: 1.5rem !important}
        .table_striped thead th:nth-child(2), .table_striped thead td:nth-child(2) {text-align: left !important;padding-left: 15px}

        .btn-success {background-color: #15ca9a !important}

        .btn_tipo:hover {
            transform: scale(1.05);
        {#background-color: var(--bs-warning) !important;#}
        {#border-color: white !important;#}
        }

        .dataTables_wrapper .dataTables_filter {
            display: none;
        }

        .btn_tipo.active {
            background-color: var(--bs-warning) !important;
            color:white !important;
        }

        .radius-20 {
            border-radius:20px!important;
        }

        /* Estilo de la barra de desplazamiento */
        ::-webkit-scrollbar {
            width: 10px; /* Ancho de la barra de desplazamiento */
            height: 10px;
        }

        /* Estilo del área de la barra de desplazamiento (track) */
        ::-webkit-scrollbar-track {
            background-color: #E7F0F8; /* Color de fondo */
        }

        /* Estilo del mango de la barra de desplazamiento (thumb) */
        ::-webkit-scrollbar-thumb {
        {#background-color: #b4b4b4; /* Color del mango */#}
            background-color: #A8B4BF; /* Color del mango */
        }

    </style>
    <script type="text/javascript">

        var busqueda = function (page/*=undefined*/) {
            var term = $("#searchinput").val().trim().toUpperCase();
            var idcoor = $("#coordinacion").val();
            page = typeof page == 'undefined' ? 1 : page;

            bloqueointerface();
            location.href = `/adm_criteriosactividadesdocente?s=${term}&idc=${idcoor}&page=${page}`;
            return false;
        };


        $(document).ready(function() {
            $(".fancybox").fancybox();
            $(".gallerypdf").fancybox({
                openEffect: 'elastic',
                closeEffect: 'elastic',
                autoSize: true,
                type: 'iframe',
                iframe: {
                    preload: false // fixes issue with iframe and IE
                }
            });
        });

        const reporte_cumplimiento_general_actividades_docente = () => {
            bloqueointerface();
            let mes = $('#reportecumplimiento #id_mes').val()
            let action = 'reporte_cumplimiento_actividades'
            const permiteWebPush = eval('{% if permiteWebPush %}"true"{% else %}"false"{% endif %}') === 'true';

            if (permiteWebPush){
                $.get("{{ request.path }}", {'action': action, 'm': mes}, function (data) {
                    $.unblockUI();
                    if (data.result) {
                        $('#btnNotificacionTareas').html(data.btn_notificaciones);
                        $('#reportecumplimiento').modal('hide');
                        mensajeSuccess(data.mensaje);
                    } else {
                        mensajeWarning(data.mensaje)
                    }
                }, 'json');
            }
            else{
                $.unblockUI();
                openwindow('GET' ,'{{ request.path }}', {action:action}, '_blank');
            }
        }

        $(function() {
            $("select").select2({minimumResultsForSearch: 5 });
            {#$("#id_fecha_desde,#id_fecha_hasta, #id_fecha_desde_3,#id_fecha_hasta_3, #id_fecha_inicio, #id_fecha_fin, #id_fecha_desde,#id_fecha_hasta,#id_fini, #id_ffin, #id_fini_seguimiento_general, #id_ffin_seguimiento_general, #id_fini_seguimiento_tutor,#id_ffin_seguimiento_tutor").datepicker({format:"dd-mm-yyyy"}).on('changeDate', function(ev){ $(this).datepicker('hide'); });#}
            {#$("#id_fecha_desde,#id_fecha_hasta, #id_fecha_desde_3,#id_fecha_hasta_3, #id_anio, #id_fini, #id_ffin").addClass("validate[required]");#}
            {#$("#id_anio").datepicker({format: " yyyy", viewMode: "years", minViewMode: "years"}).on('changeDate', function(ev){ $(this).datepicker('hide');});#}
            iddocente=0
            docente=""
            periodo=0
            {#busqueda = function(){#}
            {#    var term = $("#searchinput").val().toUpperCase().trim();#}
            {#    if (term.length>0){#}
            {#        location.href = "/adm_criteriosactividadesdocente?s=" + term + "&" + "{% if idc %}idc={{ idc }}{% endif %}";#}
            {#    }#}
            {#    return false;#}
            {# };#}

            $("#search").click(function(){
                busqueda();
            });

            $('#searchinput').keyup(function(e) {
                if(e.keyCode == 13) {
                    busqueda();
                }
            });

            $(".imprimirinformecumfac").click(function () {
                var idcum = $(this).attr('idcum');
                if (idcum == 3) {
                    $('#idoculto').hide();
                }
                $("#imprimirinformecumfac").modal({backdrop: 'static', width: '500px'}).modal('show');
            });
            $("#printrecursocumfac_cerrar").click(function() {
                $("#imprimirinformecumfac").modal("hide");
            });

            $("#coordinacion").change(function() {
                var id;
                id = $(this).val();
                bloqueointerface();
                location.href = '/adm_criteriosactividadesdocente?idc='+id;
            });

            $(".marcadas").click(function () {
                {#                var id = $(this).attr('idperiodo');#}
                {#                $("#itemspanel_adicionar_2").attr({'idperiodo': id});#}
                $("#itemspanel2").modal({backdrop:'static', width: '400'}).modal('show');
            });

            $("#itemspanel_cerrar_2").click(function () {
                $("#itemspanel2").modal('hide');
            });

            $("#itemspanel_adicionar_2").click(function () {
                var fecha_desde = $("#id_fecha_desde").val();
                var fecha_hasta = $("#id_fecha_hasta").val();
                $("#itemspanel2").modal('hide');
                if (fecha_desde){
                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: "/adm_criteriosactividadesdocente",
                        data: {"action": "marcadas", "fecha_desde": fecha_desde, "fecha_hasta": fecha_hasta },
                        success: function(data) {
                            $.unblockUI();
                            if (data.result=='ok'){

                                location.href = data.archivo;
                            } else {
                                smoke.alert(data.mensaje, function(e){
                                    $("#itemspanel2").modal({backdrop:'static', width: '400'}).modal('show');
                                }, {
                                    ok: "ok",
                                    classname: "custom-class"
                                });
                            }
                        },
                        error: function() {
                            $.unblockUI();
                            smoke.alert("Error de conexión.", function(e){
                                $("#itemspanel2").modal({backdrop:'static', width: '400'}).modal('show');
                            }, {
                                ok: "ok",
                                classname: "custom-class"
                            });
                        },
                        dataType: "json"
                    });
                }
            });

            $(".imprimirinforme").click(function () {
                $(".incompletoaddpreguntas").hide();
                iddocente=$(this).attr('idd');
                periodo=$(this).attr('idp');
                docente=$(this).attr('idn');
                $("#itemspanel").modal({backdrop: 'static', width: '300px'}).modal('show');
            });

            $("#add_cancel").click(function(){
                $('#itemspanel').modal('hide');
                $(".incompletoaddpreguntas").hide();
                $("#id_fini").val("");
                $("#id_ffin").val("");
            });

            $(".generarinforme").click(function () {
                $(".incompletoaddpreguntas").hide();
                fini = $("#id_fini").val();
                ffin = $("#id_ffin").val();
                if( fini.length!=0 && ffin.length!=0 ){
                    openwindow('GET' ,'/adm_criteriosactividadesdocente', {action: 'informedocente', iddocente:iddocente, periodo:periodo, docente:docente, fini:fini, ffin:ffin },'_blank');
                }else{
                    $(".incompletoaddpreguntas").show();
                    return false;
                }
                $("#id_fini").val("");
                $("#id_ffin").val("");
            });
            $(".asistenciadocente").click(function () {
                if ($("#coordinacion").val()>0){
                    $("#itemspanel3").modal({backdrop:'static', width: '290'}).modal('show');
                }
                else{
                    smoke.alert("Seleccione una coordinación");
                }
            });

            $('#btn_reporte_cumplimiento').click(function(){
                $("#reportecumplimiento").modal({backdrop:'static', width: '290'}).modal('show');
                $.unblockUI()
            })

            $("#itemspanel_cerrar_3").click(function () {
                $("#itemspanel3").modal('hide');
                $(".incompletoaddpreguntas").hide();
            });

            $("#itemspanel_adicionar_3").click(function () {
                $(".incompletoaddpreguntas").hide();
                var ini = $("#id_fecha_inicio").val();
                var fin = $("#id_fecha_fin").val();
                var c=$("#coordinacion").val();
                var tipoarchivo=$(".tipo_archivo").val();
                $("#itemspanel3").modal('hide');
                if (ini && fin && ini<=fin){
                    if(tipoarchivo==1){
                        openwindow('POST' ,'/adm_criteriosactividadesdocente', {action: 'reporteasistenciadocentepdf', 'ini':ini, 'fin':fin, 'c':c},'_blank');
                    }
                    else{
                        openwindow('POST' ,'/adm_criteriosactividadesdocente', {action: 'reporteasistenciadocente', 'ini':ini, 'fin':fin, 'c':c},'_blank');
                    }
                }
                else{
                    $(".incompletoaddpreguntas").show();
                }
            });
            $(".reportetutorias").click(function () {
                var c=$("#coordinacion").val();
                if (c > 0) {
                    $("#itemspaneltutoria").modal({backdrop: 'static', width: '300'}).modal('show');
                }else{
                    smoke.alert("Selecione Coordinación");
                }
            });
            $(".reportepares").click(function () {
                $("#itemspanelpares").modal({backdrop: 'static', width: '600'}).modal('show');
            });
            $("#generar_reportepares").click(function () {
                var idcarr = $("#cmbcarreras").val()
                openwindow('POST' ,'/adm_criteriosactividadesdocente', {action:'pdfconfiguracionpares',idcarr:idcarr }, '_blank');
            });
            $("#cerrar_reportepares").click(function () {
                $("#itemspanelpares").modal('hide');
            });
            $(".reporteseguimiento").click(function () {
                var c=$("#coordinacion").val();
                if (c > 0) {
                    $("#itemspanelseguimiento").modal({backdrop: 'static', width: '300'}).modal('show');
                }else{
                    smoke.alert("Selecione Coordinación");
                }
            });
            $("#cerrar_tutoria").click(function () {
                $("#itemspaneltutoria").modal('hide');
            });
            $("#cerrar_seguimiento").click(function () {
                $("#itemspanelseguimiento").modal('hide');
            });
            $("#generar_tutoria").click(function () {
                var c=$("#coordinacion").val();
                if (c > 0) {
                    var tipoarchivo = $(".tipo_archivo_tutoria").val();
                    $("#itemspaneltutoria").modal('hide');
                    if (tipoarchivo == 1) {
                        openwindow('POST', '/adm_criteriosactividadesdocente', {action: 'reportepracticas_pdf','c': c}, '_blank');
                    }
                    else {
                        openwindow('POST', '/adm_criteriosactividadesdocente', {action: 'reportepracticas_excel', 'c': c}, '_blank');
                    }
                }else{
                    smoke.alert("Selecione Coordinación");
                }
            });

            $("#generar_seguimiento").click(function () {
                var c=$("#coordinacion").val();
                if (c > 0) {
                    var tipoarchivo = $(".tipo_archivo_seguimiento").val();
                    $("#itemspanelseguimiento").modal('hide');
                    if (tipoarchivo == 1) {
                        openwindow('POST', '/adm_criteriosactividadesdocente', {action: 'reporteseguimiento_pdf','c': c}, '_blank');
                    }
                    else {
                        openwindow('POST', '/adm_criteriosactividadesdocente', {action: 'reporteseguimiento_excel', 'c': c}, '_blank');
                    }
                }else{
                    smoke.alert("Selecione Coordinación");
                }
            });

            $(".reportepracticas").click(function () {
                var coordinacion=$("#coordinacion").val();
                if (coordinacion){
                    openwindow('POST' ,'/adm_criteriosactividadesdocente', {action: 'reportepracticas', 'coordinacion':coordinacion},'_blank');
                }
                else{
                    smoke.alert("Selecione Coordinación");
                }
            });


            $(".fechanotificacion").click(function() {
                $("#fechanotificacion").modal({backdrop:'static', width: '240px'}).modal('show');
                $("#mensajeevidencia").show();
            });

            $(".cerrarmodal").click(function() {
                $("#fechanotificacion").modal("hide");
                $("#mensajeevidencia").hide();
            });

            {#$("#id_fechadesdenotificacion").datepicker({format:"dd-mm-yyyy"}).on('changeDate', function(ev){ $(this).datepicker('hide'); });#}

            {#$("form").validationEngine({autoHidePrompt:true, autoHideDelay:1000 });#}

            $(".aprobarcerrar").click(function() {
                bloqueointerface();
                var fechanoti = $("#id_fechadesdenotificacion").val();
                $.ajax({
                    type: "POST",
                    url: "/adm_criteriosactividadesdocente",
                    data: {'action': 'fechanotificacionevaluacion','fechadesdenotificacion': fechanoti},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            if (data.fechanotificacion){
                                mensaje = "Esta configurado la fecha desde : " + data.fechanotificacion;
                            }
                            else{
                                mensaje = "Esta configurado la fecha desde : Ninguna fecha";
                            }
                            document.getElementById("mensajeevidencia").innerText = mensaje;
                            $("#fechanotificacion").modal("hide");
                            $("#mensajeevidencia").hide();
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error al enviar los datos.");
                    },
                    dataType: "json"
                });

            });

            $(".reporteformacion").click(function () {
                var idc=$("#coordinacion").val();
                if (coordinacion){
                    openwindow('POST' ,'/adm_criteriosactividadesdocente', {action: 'formaciondocente_excel', 'idc':idc},'_blank');
                }
                else{
                    smoke.alert("Selecione Coordinación");
                }
            });

            $(".reportearticulo").click(function () {
                if ($("#coordinacion").val()>0){
                    $(".incompletoaddpreguntas").hide();
                    $("#itemspanelarticulo").modal({backdrop: 'static', width: '300px'}).modal('show');
                }
                else{
                    smoke.alert("Seleccione una coordinación.");
                }
            });

            $(".generarinformearticulo").click(function () {
                var valid = $("#formArticulo").validationEngine('validate');
                if (valid) {
                    $('.bootstrap-timepicker-widget').css({"display": "none"});
                    bloqueointerface();
                    $('.controls input').each(function () {
                        if ($(this).attr('type') == 'text') {
                            $(this).val($(this).val().trim());
                        }
                        if ($(this).attr('type') != 'file') {
                            if ($(this).css('text-transform') == 'uppercase') {
                                if ($(this).attr('type') != 'password') {
                                    $(this).val($(this).val().toUpperCase());
                                }
                            }
                        }
                    });
                    $.unblockUI();
                    $("#itemspanelarticulo").modal("hide");
                    openwindow('POST', '/adm_criteriosactividadesdocente', {action: 'reportearticuloexcel','idc': $("#coordinacion").val(),'anio':$("#id_anio").val()}, '_blank');
                }
                else {
                    setTimeout(function() { $('.help-text').html(""); }, 8000);
                    $.unblockUI();
                }
            });

            $(".cancelarinformearticulo").click(function() {
                $("#itemspanelarticulo").modal("hide");
            });

            $(".generar_seguimiento").click(function () {
                var idp = $(this).attr('idp');
                var idreport = $(this).attr('idreport');
                $(".incompletoseguimiento_general").hide();
                $("#idreporte").val(idreport);
                $("#idprofesor").val("");
                $("#idprofesor").val(idp);
                $("#itemspanel_generar_seguimiento").modal({backdrop: 'static', width: '300px'}).modal('show');
            });


            $("#cancel_seguimiento_general").click(function(){
                $('#itemspanel_generar_seguimiento').modal('hide');
                $(".incompletoseguimiento_general").hide();
            });

            $(".generar_seguimiento_general").click(function () {
                $(".incompletoseguimiento_general").hide();
                var idreporte = $("#idreporte").val();
                var fini = $("#id_fini_seguimiento_general").val();
                var partesFechaini = fini.split("-");
                var aionini = partesFechaini[0];
                var mesini = partesFechaini[1];
                var diaini = partesFechaini[2];
                var fini = diaini + "-" + mesini + "-" + aionini;

                var ffin = $("#id_ffin_seguimiento_general").val();
                var partesFechafin = ffin.split("-");
                var aionfin = partesFechafin[0];
                var mesfin = partesFechafin[1];
                var diafin = partesFechafin[2];
                var ffin = diafin + "-" + mesfin + "-" + aionfin;
                var idprof = $("#idprofesor").val();
                if( fini.length!=0 && ffin.length!=0 ){
                    openwindow('POST' ,'/adm_criteriosactividadesdocente', {'action': 'informe_seguimiento_general', 'fini': fini, 'ffin': ffin,'idprof':idprof,'opcionreport':idreporte },'_blank');
                }else{
                    $(".incompletoseguimiento_general").show();
                    return false;
                }
            });

            $(".reporte_mensajes").click(function () {
                var idreporte = $(this).attr('idreport');
                var idprofesor = $(this).attr('idp');
                openwindow('POST' ,'/adm_criteriosactividadesdocente', {'action': 'reporte_mensajes', 'opcionreport':idreporte, 'idprofesor':idprofesor },'_blank');
            });

            $(".reporte_foros").click(function () {
                var idreporte = $(this).attr('idreport');
                var idprofesor = $(this).attr('idp');
                openwindow('POST' ,'/adm_criteriosactividadesdocente', {'action': 'reporte_foros', 'opcionreport':idreporte, 'idprofesor':idprofesor },'_blank');
            });
            $(".reporte_actividad_autor").click(function () {
                var idprofesor = $(this).attr('idp');
                openwindow('POST' ,'/adm_criteriosactividadesdocente', {'action': 'informe_actividades_autor1', 'idprofesor':idprofesor },'_blank');
            });

            $("#imprimirproductoexcel_filtros").click(function () {
                var coordinacion =  $("#coordinacion").val();
                openwindow('POST' ,'/adm_criteriosactividadesdocente', {action: 'imprimirproductoexcel_filtros', coordinacion: coordinacion },'_blank');
            });

            $(".reporteactividadespendientes").click(function () {
                $(".incompletoaddpreguntas").hide();
                $("#itemspanelactividadespendientes").modal({backdrop: 'static', width: '600px'}).modal('show');
            });

            $("#generar_reporteactividades").click(function () {
                var carrera =  $("#cmbcarreraspregradovirtual").val();
                if(carrera>0){
                    openwindow('POST' ,'/adm_criteriosactividadesdocente', {action: 'reporteactividadespendientes', idcarrera: carrera },'_blank');
                }
            });
            $("#cerrar_reporteactividades").click(function(){
                $('#itemspanelactividadespendientes').modal('hide');
                $(".incompletoaddpreguntas").hide();
            });



            $(".informeactividades").click(function () {
                $(".incompletoinformeactividades").hide();
                $("#itemspanelinformeactividades").modal({backdrop: 'static', width: '600px'}).modal('show');
            });

            $("#generar_informeactividades").click(function () {
                var carrera =  $("#cbocarreraactividades").val();
                if(carrera>0){
                    openwindow('POST' ,'/adm_criteriosactividadesdocente', {action: 'informe_actividades_autor', idcarrera: carrera },'_blank');
                }
            });
            $("#cerrar_informeactividades").click(function(){
                $('#itemspanelinformeactividades').modal('hide');
                $(".incompletoinformeactividades").hide();
            });


            $(".informe_seguimiento_tutor_pregrado_criterio").click(function () {
                var idp = $(this).attr('idp');
                var idreport = $(this).attr('idreport');
                $(".incompletoseguimiento_general_tutor").hide();
                $("#idreporte").val(idreport);
                $("#idprofesor").val("");
                $("#idprofesor").val(idp);
                $("#itemspanel_generar_seguimiento_tutor").modal({backdrop: 'static', width: '300px'}).modal('show');
            });


            $("#cancel_seguimiento_tutor").click(function(){
                $('#itemspanel_generar_seguimiento_tutor').modal('hide');
                $(".incompletoseguimiento_general_tutor").hide();
            });

            $(".generar_seguimiento_tutor").click(function () {
                $(".incompletoseguimiento_general_tutor").hide();
                var idreporte = $("#idreporte").val();
                var fini = $("#id_fini_seguimiento_tutor").val();
                var partesFechaini = fini.split("-");
                var aionini = partesFechaini[0];
                var mesini = partesFechaini[1];
                var diaini = partesFechaini[2];
                var fini = diaini + "-" + mesini + "-" + aionini;

                var ffin = $("#id_ffin_seguimiento_tutor").val();
                var partesFechafin = ffin.split("-");
                var aionfin = partesFechafin[0];
                var mesfin = partesFechafin[1];
                var diafin = partesFechafin[2];
                var ffin = diafin + "-" + mesfin + "-" + aionfin;
                var idprof = $("#idprofesor_tutor").val();
                if( fini.length!=0 && ffin.length!=0 ){
                    openwindow('POST' ,'/adm_criteriosactividadesdocente', {'action': 'informe_seguimiento_tutor_pregrado_criterio', 'fini': fini, 'ffin': ffin,'idprof':idprof,'opcionreport':idreporte },'_blank');
                }else{
                    $(".incompletoseguimiento_general_tutor").show();
                    return false;
                }
            });
            function fallorecalculo(){
                $.unblockUI();
                $("#recalcularmodal").modal("hide");
                smoke.alert("Fallo al recalcular los resultados");
            }

            function terminarecalculo(){
                $("#recalcularmodal").modal("hide");
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_criteriosactividadesdocente",
                    {#data: {"action": "recalcularprofesoresevaluar", "id": profesor.id},#}
                    data: {"action": "actualizarpreferenciaperiodo", "codigoperiodo": {{ idperiodomigrar }} },
                    success: function(data) {
                        location.reload();
                    },
                    error: function() {
                        smoke.alert(data.mensaje);
                    },
                    dataType: "json"
                });

            }
            function recalculo(lista, elemento, cantidad){
                var profesor = lista[elemento];
                var cp = (100 / (cantidad+1)) * elemento + '%';
                if (elemento>cantidad){
                    terminarecalculo();
                } else {
                    {#$("#recalcularmodalprogresshint").html(profesor.nombre);#}
                    $("#recalcularmodalprogresshint").html(profesor.profesor__persona__apellido1 + ' ' + profesor.profesor__persona__apellido2 + ' ' + profesor.profesor__persona__nombres);
                    $("#progressbar").css({'width': cp});
                    $("#progressbar").html(((elemento * 100) / cantidad).toFixed(2) + '%');
                    $.ajax({
                        type: "POST",
                        url: "/adm_criteriosactividadesdocente",
                        {#data: {"action": "recalcularprofesoresevaluar", "id": profesor.id},#}
                        data: {"action": "migraactividadpreferencia", "iddistributivo": profesor.id },
                        success: function(data) {
                            if (data.result=='ok'){
                                intentos = 0;
                                recalculo(lista, elemento+1, cantidad);
                            } else {
                                intentos += 1;
                                if (intentos>=100){
                                    fallorecalculo();
                                } else {
                                    recalculo(lista, elemento, cantidad);
                                }
                            }
                        },
                        error: function() {
                            intentos += 1;
                            if (intentos>=100){
                                fallorecalculo();
                            } else {
                                recalculo(lista, elemento, cantidad);
                            }
                        },
                        dataType: "json"
                    });
                }
            }
            $("#recalcular").click(function(){
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_criteriosactividadesdocente",
                    data: {'action': 'profesoresmigraractividad'},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $('#recalcularmodal').modal({keyboard: false, backdrop: 'static'}).modal("show");
                            var indice = 0;
                            var cantidad = parseInt(data.cantidad);
                            var profesores = data.profesores;
                            recalculo(profesores, indice, (cantidad-1));
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error al obtener los datos");
                    },
                    dataType: "json"
                });

            });


            function fallorecalculohoras(){
                $.unblockUI();
                $("#recalcularmodalhoras").modal("hide");
                smoke.alert("Fallo al recalcular los resultados");
            }

            function terminarecalculohoras(){
                $("#recalcularmodalhoras").modal("hide");
                bloqueointerface();
                location.reload();
            }
            function recalculohoras(lista, elemento, cantidad){
                var profesor = lista[elemento];
                var cp = (100 / (cantidad+1)) * elemento + '%';
                if (elemento>cantidad){
                    terminarecalculohoras();
                } else {
                    $("#recalcularmodalprogresshinthoras").html(profesor.profesor__persona__apellido1 + ' ' + profesor.profesor__persona__apellido2 + ' ' + profesor.profesor__persona__nombres);
                    $("#progressbarhoras").css({'width': cp});
                    $("#progressbarhoras").html(((elemento * 100) / cantidad).toFixed(2) + '%');
                    $.ajax({
                        type: "POST",
                        url: "/adm_criteriosactividadesdocente",
                        data: {"action": "actualizatodo", "iddistributivo": profesor.id },
                        success: function(data) {
                            if (data.result=='ok'){
                                intentos = 0;
                                recalculohoras(lista, elemento+1, cantidad);
                            } else {
                                intentos += 1;
                                if (intentos>=100){
                                    fallorecalculohoras();
                                } else {
                                    recalculohoras(lista, elemento, cantidad);
                                }
                            }
                        },
                        error: function() {
                            intentos += 1;
                            if (intentos>=100){
                                fallorecalculohoras();
                            } else {
                                recalculohoras(lista, elemento, cantidad);
                            }
                        },
                        dataType: "json"
                    });
                }
            }
            $("#recalcularhoras").click(function(){
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_criteriosactividadesdocente",
                    data: {'action': 'profesorescalcularhoras'},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $('#recalcularmodalhoras').modal({keyboard: false, backdrop: 'static'}).modal("show");
                            var indice = 0;
                            var cantidad = parseInt(data.cantidad);
                            var profesores = data.profesores;
                            recalculohoras(profesores, indice, (cantidad-1));
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error al obtener los datos");
                    },
                    dataType: "json"
                });

            });



            $('.horario_tutorias').click(function () {
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_criteriosactividadesdocente",
                    data: {"action": "solicitudeshorariotutoria", "id": $(this).attr('idsol')},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result==='ok'){
                            $('#solicitudhorariotutotiasmodalbody').html(data.html);
                            $('#solicitud_horario_tutorias').modal({backdrop:'static', width: '400px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            })

            $('#reporte_asignacion_horas_tutorias').on('click', function () {
                $('#modal_reportes').modal({backdrop: 'static', width: '450px'}).modal('show');
                {#$('#facultad_group').fadeIn();#}
                $('#periodo_group').fadeIn();

                /* $('#id_facultad').empty().append('<option value="">----------</option>').val(0).trigger("change");
                 $.ajax({
                     type: "GET",
                     url: `{{ request.path }}`,
                    data: {'action': 'cargar_facultad'},
                    success: function (data) {
                        if (data.result == 'ok') {
                            for (elemento in data.lista) {
                                $('#id_facultad').append('<option value="' + data.lista[elemento].id + '">' + data.lista[elemento].nombre + '</option>');
                            }
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        smoke.alert("Error de conexion.");
                    },
                    dataType: "json"
                });*/

                $('#id_periodo').empty().append('<option value="">----------</option>').val(0).trigger("change");
                $.ajax({
                    type: "GET",
                    url: `{{ request.path }}`,
                    data: {'action': 'cargar_periodo'},
                    success: function (data) {
                        if (data.result == 'ok') {
                            for (elemento in data.lista) {
                                $('#id_periodo').append('<option value="' + data.lista[elemento].id + '">' + data.lista[elemento].nombre + '</option>');
                            }
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        smoke.alert("Error de conexion.");
                    },
                    dataType: "json"
                });

                /*    $('#download_report').click(function () {
                    let facultad = $('#id_facultad').val();

                    //bloqueointerface();
                    let facultad_nombre = $('#id_facultad').find('option:selected').text();
                    let url = '{{ request.path }}?action=reportehoraseingresos';
                console.log(facultad);
                console.log(facultad_nombre);
                url += '&facultad=' + facultad + '&facultad_nombre=' + facultad_nombre;
                window.location.href = url


                $('#modal_reportes').modal('hide');
            });*/

                $('#download_report').click(function () {
                    let periodo = $('#id_periodo').val();

                    //bloqueointerface();
                    let periodo_nombre = $('#id_periodo').find('option:selected').text();
                    let url = '{{ request.path }}?action=reportehoraseingresos';
                    console.log(periodo);
                    console.log(periodo_nombre);
                    url += '&periodo=' + periodo + '&periodo_nombre=' + periodo_nombre;
                    window.location.href = url


                    $('#modal_reportes').modal('hide');
                });

                $('#modal_reportes').on('hidden', function () {
                    {#$('#facultad_group').val('');#}
                    $('#periodo_group').val('');
                });

            });

            $('#reporte_ejecucion_tutorias').on('click', function () {
                $('#modal_reportes2').modal({backdrop: 'static', width: '450px'}).modal('show');
                $('#periodo_group2').fadeIn();
                $('#estado_group2').fadeIn();

                $('#id_periodo2').empty().append('<option value="">----------</option>').val(0).trigger("change");

                $.ajax({
                    type: "GET",
                    url: `{{ request.path }}`,
                    data: {'action': 'cargar_periodo'},
                    success: function (data) {
                        if (data.result == 'ok') {
                            for (elemento in data.lista) {
                                $('#id_periodo2').append('<option value="' + data.lista[elemento].id + '">' + data.lista[elemento].nombre + '</option>');
                            }
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        smoke.alert("Error de conexion.");
                    },
                    dataType: "json"
                });

                $('#download_report2').click(function () {
                    let periodo = $('#id_periodo2').val();
                    let estado = $('#id_estado2').val();

                    //bloqueointerface();
                    {#let periodo_nombre = $('#id_periodo2').find('option:selected').text();#}
                    let url = '{{ request.path }}?action=reportetutoria';
                    console.log(periodo);
                    console.log(estado);
                    url += '&periodo=' + periodo + '&estado=' + estado;
                    window.location.href = url


                    $('#modal_reportes2').modal('hide');

                });

                $('#modal_reportes2').on('hidden', function () {
                    $('#periodo_group2').val('');
                    $('#estado_group2').val('');
                });
            });

            $('#cod_facultad').select2().on("select2:select", function(evt){
                let id = evt.params.data.id;
                $('#cod_carrera').empty().append('<option value="0">--TODAS LAS CARRERAS--</option>').val(0).trigger("change");
                var control = $(this);
                if (id.length > 0) {
                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: "/aprobar_silabo",
                        data: {'action': 'carrerascoordinacion', 'id': id},
                        success: function (data) {
                            $.unblockUI();
                            if (data.result == 'ok') {
                                for (elemento in data.lista) {
                                    $('#cod_carrera').append('<option value="' + data.lista[elemento][0] + '">' + data.lista[elemento][1] + '</option>');
                                }
                            } else {
                                control.val(0).trigger("change");
                                alertaWarning(data.mensaje);
                            }
                        },
                        error: function () {
                            $.unblockUI();
                            control.val(0).trigger("change");
                            alertaDanger("Error de conexion.");
                        },
                        dataType: "json"
                    });
                }

                $("#cod_facultad").attr({"value":(evt.params.data.id)});
            });

        });
        function pdfafinidad(){
            openwindow('POST' ,'/adm_criteriosactividadesdocente', {action:'pdflistaafinidad'}, '_blank');
        }
        function pdfafinidadfacultades(){
            openwindow('POST' ,'/adm_criteriosactividadesdocente', {action:'pdflistaafinidadfacultades'}, '_blank');
        }
        function imprimirinformeadm(){
            openwindow('POST' ,'/adm_criteriosactividadesdocente', {action:'reporterecursosadm'}, '_blank');
        }
        function notificar_alertas(texto, action, id) {
            Swal.fire({
                html: texto,
                type: 'warning',
                showCancelButton: true,
                allowOutsideClick: false,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Si, deseo hacerlo',
                cancelButtonText: 'Cancelar'
            }).then((result) => {
                if (result.value) {
                    bloqueointerface();
                    $.ajax({
                        data: {
                            'action': action, 'id': id,
                        },
                        url: '{{ request.path }}',
                        type: "POST",
                        success: function (data) {
                            $.unblockUI();
                            var object = data
                            if (object.result === 'ok') {
                                Swal.fire({
                                    title: 'Acción realizada correctamente!',
                                    text: "Esta acción no se puede revertir.",
                                    type: 'success',
                                    showCancelButton: false,
                                    allowOutsideClick: false,
                                    confirmButtonColor: '#3085d6',
                                    confirmButtonText: 'Ok'
                                }).then((result) => {
                                    if (result.value) {
                                        bloqueointerface();
                                        location.reload();
                                    }
                                })
                            }
                            else {
                                Swal.fire(object.mensaje, '', 'warning');
                            }
                        },
                        error: function () {
                            $.unblockUI();
                            smoke.alert("Error de conexión.")
                        },
                    });
                }
            })

        }



        {#$(".criteriosactividadesprofesor").click(function () {#}
        {#    smoke.confirm("Seguro que desea actualizar los criterios y actividades de docencia a los profesores?", function(e){#}
        {#        if (e) {#}
        {#            showWaiting('Actualizando los criterios y actividades de docencia a los profesores', 'Espere unos segundos por favor...');#}
        {#            $.ajax({#}
        {#                type: "POST",#}
        {#                url: "/adm_criteriosactividadesdocente",#}
        {#                data: {"action": "actualizacriteriosdocenciaprofesores"},#}
        {#                success: function(data) {#}
        {#                    if (data.result=='ok'){#}
        {#                        location.reload();#}
        {#                    } else {#}
        {#                        hideWaiting();#}
        {#                        smoke.alert(data.mensaje);#}
        {#                    }#}
        {#                },#}
        {#                error: function() {#}
        {#                    hideWaiting();#}
        {#                    smoke.alert("Error de conexión.");#}
        {#                },#}
        {#                dataType: "json"#}
        {#            });#}
        {#        }}, {#}
        {#        ok: "SI,SEGURO",#}
        {#        cancel: "NO,CANCELAR",#}
        {#        classname: "custom-class",#}
        {#        reverseButtons: true#}
        {#    });#}
        {# });#}

        function criteriosactividadesprofesor(texto, action, id) {
            Swal.fire({
                html: texto,
                type: 'warning',
                showCancelButton: true,
                allowOutsideClick: false,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Si, deseo hacerlo',
                cancelButtonText: 'Cancelar'
            }).then((result) => {
                if (result.value) {
                    bloqueointerface();
                    $.ajax({
                        data: {
                            'action': action, 'id': id,
                        },
                        url: '{{ request.path }}',
                        type: "POST",
                        success: function (data) {
                            $.unblockUI();
                            var object = data
                            if (object.result === 'ok') {
                                Swal.fire({
                                    title: 'Acción realizada correctamente!',
                                    text: "Esta acción no se puede revertir.",
                                    type: 'success',
                                    showCancelButton: false,
                                    allowOutsideClick: false,
                                    confirmButtonColor: '#3085d6',
                                    confirmButtonText: 'Ok'
                                }).then((result) => {
                                    if (result.value) {
                                        bloqueointerface();
                                        location.reload();
                                    }
                                })
                            }
                            else {
                                Swal.fire(object.mensaje, '', 'warning');
                            }
                        },
                        error: function () {
                            $.unblockUI();
                            smoke.alert("Error de conexión.")
                        },
                    });
                }
            })

        }

        function vistareporterecursosilabocumfac(){
            var cod_facultad = $("#cod_facultad").val();
            var id_fini_autor = $("#id_fini_autor").val();
            var id_ffin_autor = $("#id_ffin_autor").val();
            {% if periodo.version_cumplimientorecurso %}
                {% if periodo.version_cumplimientorecurso == 3 %}
                    var cod_carrera = $("#cod_carrera").val();
                    {#openwindow('POST' ,'/aprobar_silabo', {action:'reporterecursoscompenente',cod_facultad:cod_facultad,id_fini_autor:id_fini_autor,id_ffin_autor:id_ffin_autor}, '_blank');#}
                    url = '/adm_criteriosactividadesdocente?action=reporterecursoscompenente&cod_facultad='+cod_facultad+'&cod_carrera='+cod_carrera
                    bloqueointerface();
                    $.get(url, {}, function (data) {
                        $.unblockUI();
                        if (data.result) {
                            $('#btnNotificacionTareas').html(data.btn_notificaciones);
                            mensajeSuccess(data.mensaje)
                        } else {
                            mensajeWarning(data.mensaje)
                        }
                    }, "json");

                {% endif %}
            {% endif %}
        }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/js/i18n/es.js"></script>
    {#    <script src="/static/adicionalesjs/formquestion.js?0.24"></script>#}
    {#    <script src="/static/adicionalesjs/formquestionb4.js?0.24"></script>#}
{% endblock %}
{% block atras %}/{% endblock %}
{% block canvas %}
    <div class='row'>
        <div class='col-lg-12'>
            <div class="headtitle">
                <h3 class="texto-blue">{{ title }}</h3>
                <h6>Gestión de actividades</h6>
            </div>
        </div>
    </div>

    <div class="container-fluid">

        <div class="row">
            <div class="col-sm-6 mb-3">
                {% if not periodo.cerradodistributivo %}
                    {% if perms.sga.puede_modificar_criteriosdocentes %}
                        <a class="btn btn-success" href="/adm_criteriosactividadesdocente?action=addprofesor"><i class="fa fa-plus"></i> Adicionar Profesor</a>
                    {% endif %}
                {% else %}
                    <span class="label label-important"> CERRADO </span>
                {% endif %}

                <a class="btn btn-default" href="/adm_criteriosactividadesdocente?action=listadodereportes" target="_blank"><i class="fa fa-file-excel"></i> Reportes </a>
                <button class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" href="#"
                        aria-expanded="false"> Acciones <span
                        class="fa fa-angle-down"></span></button>
                <ul class="dropdown-menu">
                    {#                    <li><a href="/adm_criteriosactividadesdocente?action=responsableactividad"><i class="fa fa-plus"></i> Asignar responsables de las actividades</a></li>#}
                    {#                    <li><a href="/adm_criteriosactividadesdocente?action=evidenciasactividades&periodo={{ periodo.id }}" class="bloqueo_pantalla"><i class="fa fa-plus"></i> Evidencias de las actividades del docente</a></li>#}
                    {% if not periodoposgrado %}
                        {% if perms.sga.puede_migrar_actividadespreferencia %}
                            <li><a href="/adm_criteriosactividadesdocente?action=planificarhoras" class="dropdown-item bloqueo_pantalla"> <i class='fa fa-plus'></i>&nbsp;Planificar horas mínimas y máximas</a></li>
                        {% endif %}
                        {% if perms.sga.puede_aprobar_permisos_docentes %}
                            <li><a href="/adm_criteriosactividadesdocente?action=permisoinstitucional" class="dropdown-item"> <i class='fa fa-user'></i> Aprobar permisos institucionales</a></li>
                        {% endif %}
                        {% if not periodo.cerradodistributivo %}
                            {% if persona.usuario.is_superuser %}
                                <li><a class="dropdown-item" onclick="criteriosactividadesprofesor('¿Seguro que desea actualizar los criterios y actividades de docencia a los profesores?', 'actualizacriteriosdocenciaprofesores', 0)" href="javascript:;"><i class="fa fa-refresh"></i> Actualizar criterios y actividades de docencia a los profesores</a></li>
                            {% endif %}
                            {% if perms.sga.puede_modificar_criteriosdocentes %}
                                <li><a class='dropdown-item' onclick="notificar_alertas('¿Seguro que desea actualizar carrera y coordinación en los docentes?', 'carreraprofesores', 0)" href="javascript:;"><i class="fa fa-refresh"></i> Actualizar asignación de carrera a profesores (Carga horaria)</a></li>
                                <li><a class='fechanotificacion dropdown-item' href="javascript:;"> <span class='fa fa-calendar-times-o'></span> Configurar fecha de notificacion a Evaluación</a></li>
                            {% endif %}
                        {% endif %}
                        {% if persona.usuario.is_superuser %}
                            {% if periodo.cerradodistributivo %}
                                <li><a href="javascript:;" nhref="/adm_criteriosactividadesdocente?action=abrirdistributivo" class='confirmacionmodal dropdown-item'><i class='fa fa-check'></i> Abrir distributivo (En el periodo seleccionado)</a></li>
                            {% else %}
                                <li><a href="javascript:;" nhref="/adm_criteriosactividadesdocente?action=cerrardistributivo" class='confirmacionmodal dropdown-item'><i class='fa fa-remove'></i> Cerrar distributivo (En el periodo seleccionado)</a></li>
                            {% endif %}
                        {% endif %}
                        {% if perms.sga.puede_migrar_actividadespreferencia %}
                            {% if periodo.tipo.id == 1 or periodo.tipo.id == 2 or periodo.id > 94 %}
                                {% if periodomigrar %}
                                    {% if not periodomigrar.preferenciaactividad %}
                                        <li><a href="javascript:;" id="recalcular" class="dropdown-item"><i class="fa fa-retweet"></i> Migrar actividades de preferencias</a></li>
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                        {% endif %}
                        {% if periodo.version_cumplimientorecurso %}
                            <li><a class="imprimirinformecumfac dropdown-item" href="javascript:;" idcum="{{ periodo.version_cumplimientorecurso }}"><span class="fa fa-file-pdf-o"></span> Reporte consolidado de cumplimiento de actividades y recursos de aprendizaje</a></li>
                        {% endif %}
                        <li><a href="javascript:;" id="recalcularhoras" class="dropdown-item"><i class="fa fa-retweet"></i> Actualizar horas distributivo docente</a></li>
                    {% endif %}
                    <li>
                        <a href="/adm_criteriosactividadesdocente?action=solicitudinforme" class="bloqueo_pantalla dropdown-item"><i class='fa fa-check'></i> Informes Mensuales del Personal Académico</a>
                    </li>
                    {% if persona.id in PUEDE_VER_TERMINOS_CONDICIONES %}
                        <li><a href="?action=terminoscondiciones" class="bloqueo_pantalla dropdown-item"><i class='fa fa-gavel'></i> Términos y condiciones</a></li>
                    {% endif %}
                    <li><a href="?action=justificaciontutoriaacademica" class="bloqueo_pantalla dropdown-item"><i class="bi bi-envelope-check fw-4"></i> Justificación de tutoría académica</a></li>
                    {% if es_decano %}
                        <li><a href="?action=solicitudaperturaclase" class="bloqueo_pantalla dropdown-item"><i class='fa fa-laptop'></i> Solicitudes de clases virtuales</a></li>
                    {% endif %}
                </ul>
                {#                <a class="btn dropdown-toggle" data-toggle="dropdown" href="javascript:;">Reportes  <span class="caret"></span></a>#}
                <ul class="dropdown-menu pull-left" style="width: 400px;">
                    <li><a href="/adm_criteriosactividadesdocente?action=excelldistributivo&periodo={{ periodo.id|encrypt }}"><i class="fa fa-file-excel-o"></i> Docentes del distributivo</a></li>
                    <!--<li><a onclick="pdflistadopares()" href="javascript:;"><i class="fa fa-file-excel-o"></i> Configuracion de pares</a></li>-->
                    <li><a class="reportepares" href="javascript:;"><i class="fa fa-file-excel-o"></i> Configuracion de pares</a></li>
                    <li><a href="/adm_criteriosactividadesdocente?action=totalactividadesdocentes&periodo={{ periodo.id }}"><i class="fa fa-file-excel-o"></i> Actividades y horas de los docentes</a></li>
                    <li><a href="/adm_criteriosactividadesdocente?action=totalactividadesdocentesmaterias&periodo={{ periodo.id }}"><i class="fa fa-file-excel-o"></i> Criterios, horas, asignaturas, formación de los docentes</a></li>
                    <li><a href="/adm_criteriosactividadesdocente?action=totalactividadesdocentesmaterias_nuevo&periodo={{ periodo.id }}"><i class="fa fa-file-excel-o"></i> Criterios, actividades, horas, asignaturas, formación de los docentes</a></li>
                    <li><a href="/adm_criteriosactividadesdocente?action=totalactividadesdocentescarrera&periodo={{ periodo.id }}"><i class="fa fa-file-excel-o"></i> Reporte de horas de titulación</a></li>
                    <li><a href="/adm_criteriosactividadesdocente?action=totalactividadesdocentesmaterias_conevidencias&periodo={{ periodo.id }}"><i class="fa fa-file-excel-o"></i> Evidencias de las actividades asignadas</a></li>
                    {#                    <li><a href="/adm_criteriosactividadesdocente?action=formaciondocentesactivos&periodo={{ periodo.id }}"><i class="fa fa-table"></i> Descargar formación de los docente activos</a></li>#}
                    {% if reporte_2 %}
                        <li><a href="javascript:;" tipos="{{ reporte_2.tiporeporte }}" nhref="/reportes?action=run&n={{ reporte_2.nombre }}&coordinacion={{ idc }}&periodo={{ periodo.id }}" title="Imprimir hoja de vida"  class="reportedirecto"> <span class='fa fa-print'></span> Reporte en PDF actividades y horas de los docentes por facultad (170)</a></li>
                    {% endif %}
                    {#                    <li><a href="javascript:;" class="marcadas"><i class="fa fa-file-excel-o"></i> Marcadas Docente</a></li>#}
                    <li><a href="javascript:;" class="asistenciadocente"><i class="fa fa-file-excel-o"></i> Informe mensual de actividades docente</a></li>
                    {#                    <li><a href="javascript:;" class="reportepracticas"><i class="fa fa-file-excel-o"></i> Reporte de Tutorías </a></li>#}
                    <li><a href="javascript:;" class="reportetutorias"><i class="fa fa-file-excel-o"></i> Reporte de Tutorías </a></li>
                    <li><a href="/adm_criteriosactividadesdocente?action=tutoriasfacultadespdf&periodo={{ periodo.id }}" target="_blank"><i class="fa fa-file-pdf-o"></i> Reporte de Tutorías Facultades(pdf)</a></li>
                    <li><a href="/adm_criteriosactividadesdocente?action=excelltutoriasfacultades&periodo={{ periodo.id|encrypt }}"><i class="fa fa-file-excel-o"></i> Reporte de Tutorías Facultades(excel)</a></li>
                    <li><a href="javascript:;" class="reporteseguimiento"><i class="fa fa-file-excel-o"></i> Reporte de seguimientos de ingreso de calificaciones </a></li>
                    <li><a href="javascript:;" class="reporteformacion"><i class="fa fa-file-excel-o"></i> Formación docentes </a></li>
                    <li><a href="javascript:;" class="reportearticulo"><i class="fa fa-file-excel-o"></i> Articulos de los profesores </a></li>
                    <li><a onclick="pdfafinidad()" href="javascript:;"><i class="fa fa-file-excel-o"></i> Afinidad de los profesores </a></li>
                    <li><a onclick="pdfafinidadfacultades()" href="javascript:;"><i class="fa fa-file-excel-o"></i> Afinidad facultades de los profesores</a></li>
                    <li><a href="javascript:;" id="imprimirproductoexcel_filtros"><i class="fa fa-file-excel-o"></i> Excel de productos de investigación docente </a></li>
                    <li><a href="javascript:;" class="reporteactividadespendientes"><i class="fa fa-file-excel-o"></i> Actividades pendientes  </a></li>
                    <li><a href="javascript:;" class="informeactividades"><i class="fa fa-file-excel-o"></i> INFORME DE ACTIVIDADES DE RECURSOS DE APRENDIZAJE  </a></li>
                    <li><a href="/adm_criteriosactividadesdocente?action=preferenciasactividades" class="bloqueo_pantalla"><i class="fa fa-table"></i> PREFERENCIA ACTIVIDADES  </a></li>
                    <li><a href="/adm_criteriosactividadesdocente?action=totalpreferenciaspregrado"><i class="fa fa-file-excel-o"></i> PREFERENCIA PREGRADO  </a></li>
                    <li><a href="/adm_criteriosactividadesdocente?action=totalpreferenciasposgrado"><i class="fa fa-file-excel-o"></i> PREFERENCIA POSGRADO  </a></li>
                    <li><a href="/adm_criteriosactividadesdocente?action=totalpreferenciasactividades"><i class="fa fa-file-excel-o"></i> PREFERENCIA ACTIVIDADES  </a></li>
                    <li><a href="/adm_criteriosactividadesdocente?action=totalpreferenciashorarios"><i class="fa fa-file-excel-o"></i> PREFERENCIA HORARIOS  </a></li>
                    <li><a onclick="imprimirinformeadm()" href="javascript:;"><span class="fa fa-file-pdf-o"></span> Informe de recursos de sílabos tutores administrativos</a></li>
                    <li><a id="reporte_asignacion_horas_tutorias" href="#"><i class="fa fa-file-excel-o"></i> Reporte de asignación de horas e ingreso de tutorías académicas  </a></li>
                    <li><a id= "reporte_ejecucion_tutorias" href="#"><span class="fa fa-file-pdf-o"></span> Reporte de ejecución de tutorías</a></li>
                </ul>
            </div>
        </div>
        <div class="modal fade static" id="modal_reportes" style="display: none;">
            <div class="modal-header">
                <h3 class="paneltitle">Filtrar por periodo</h3>
            </div>
            <div class="modal-body panelbody">
                <div class="row-fluid">
                    <div class="span12">
                        <div class="form-group" id="facultad_group" style="display: none">
                            <form class="form-search">
                                <select id="id_facultad" name="Facultad" style="width: 415px;">
                                    <option value="0">--------</option>
                                </select>
                            </form>
                            <br>
                        </div>

                        <div class="form-group" id="periodo_group" style="display: none">
                            <form class="form-search">
                                <select id="id_periodo" name="Periodo" style="width: 415px;">
                                    <option value="0">--------</option>
                                </select>
                            </form>
                            <br>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <table class="pull-right">
                    <tr>
                        <td><a class="btn btn-success " id="download_report"><i class="fa fa-download"></i> Descargar Reporte</a>
                        </td>
                        <td><a class="btn btn-danger" data-dismiss="modal"><i class="fa fa-close"></i> Cerrar</a></td>
                    </tr>
                </table>
            </div>
        </div>

        {#    Reporte Tutorias Modal#}
        <div class="modal fade static" id="modal_reportes2" style="display: none;">
            <div class="modal-header">
                <h3 class="paneltitle">Filtrar por periodo y estado</h3>
            </div>
            <div class="modal-body panelbody">
                <div class="row-fluid">
                    <div class="span12">


                        <div class="form-group" id="periodo_group2" style="display: none">
                            <span> <b> Periodo: </b>  </span>
                            <form class="form-search">
                                <select id="id_periodo2" name="Periodo" style="width: 415px;">
                                    <option value="0">--------</option>
                                </select>
                            </form>
                            <br>
                        </div>

                        <div class="form-group" id="estado_group2" style="display: none">
                            <span> <b> Estado: </b> </span>
                            <form class="form-search">
                                <select id="id_estado2" name="Estado" style="width: 415px;">
                                    <option value="0">--------</option>
                                    <option value="1">SOLICITADO</option>
                                    <option value="2">PROGRAMADO</option>
                                    <option value="3">EJECUTADO</option>
                                    <option value="4">CANCELADO</option>
                                </select>
                            </form>
                            <br>
                        </div>

                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <table class="pull-right">
                    <tr>
                        <td><a class="btn btn-success " id="download_report2"><i class="fa fa-download"></i> Descargar Reporte</a>
                        </td>
                        <td><a class="btn btn-danger" data-dismiss="modal"><i class="fa fa-close"></i> Cerrar</a></td>
                    </tr>
                </table>
            </div>
        </div>
        <div >
            <form class="form-search" onsubmit="return busqueda()" style="width:100%">
                <div class="">
                    <div class="row">
                        <div class="col-sm-6">
                            <select name="mes" id="coordinacion" class="select2" style="width: 100%;">
                                <option value="0">--TODOS--</option>
                                {% for coordinacion in coordinaciones %}
                                    <option {% if idc == coordinacion.id %}selected{% endif %} value="{{ coordinacion.id }}">{{ coordinacion.nombre }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-sm-6">
                            <div class="input-group">
                                <input type="text" id="searchinput" class="form-control searchinput"
                                       placeholder="Buscar por apellidos..." aria-label="Buscar"
                                       aria-describedby="button-addon2" name="s" value="{{ search }}">
                                <div class="input-group-append">
                                    <a href="javascript:;" class="btn btn-primary-old py-1 p-3 {% if search %}btn-search-before{% else %}btn-search{% endif %}" type="button" id="search">
                                        <i class="fa fa-search"></i>
                                    </a>
                                </div>
                                {% if search %}
                                    <div class="input-group-append">
                                        <a title="Ver todo" href="{{ request.path }}"
                                           class="btn btn-primary-old py-1 p-3 tr {% if not search %}btn-search-before{% else %}btn-search{% endif %} action_clean bloqueo_pantalla"><i
                                                class="fas fa-sync-alt" title="Limpiar"></i></a>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <table class='table table_primary table_striped' width="100%">
                <thead>
                <tr>
                    <th colspan="3"></th>
                    <th colspan="2" style="text-align: center">Docencia</th>
                    <th colspan="2" style="text-align: center">Investigaci&oacute;n</th>
                    <th colspan="2" style="text-align: center">Gesti&oacute;n</th>
                    <th colspan="2" style="text-align: center">Vinculación</th>
                    <th colspan="2"></th>
                </tr>
                <tr>
                    <th style="width: 80px;text-align: center">N.</th>
                    <th style="width: 800px">Nombre</th>
                    <th style="width: 250px">Tipo /Categoría / Dedicación</th>
                    {#                    <th style="width: 200px">T. Pond.</th>#}
                    <th style="width: 40px; text-align: center">Horas</th>
                    <th style="width: 40px; text-align: center">Crit.</th>
                    <th style="width: 40px; text-align: center">Horas </th>
                    <th style="width: 40px; text-align: center">Crit</th>
                    <th style="width: 40px; text-align: center">Horas </th>
                    <th style="width: 40px; text-align: center">Crit</th>
                    <th style="width: 40px; text-align: center">Horas </th>
                    <th style="width: 40px; text-align: center">Crit</th>
                    <th style="width: 40px; text-align: center">Total Horas</th>
                    <th style="width: 80px;"></th>
                </tr>
                </thead>
                <tbody>
                {% for distributivo in distributivos %}
                    <tr>
                        <td style="text-align: center">
                            {% if numeropagina == 1 %}
                                {{ forloop.counter }}
                            {% else %}
                                {% with contador=numerofilasguiente|sumar_pagineo:forloop.counter %}
                                    {{ contador }}
                                {% endwith %}
                            {% endif %}
                        </td>
                        <td style="text-align:left;vertical-align:middle;" class="ms-2">
                            <div class="d-flex align-items-center">
                                <div class='d-flex bd-highlight mb-0'>
                                <span class="avatar avatar-lg">
                                    {% if distributivo.profesor.persona.foto.foto %}
                                        <a href="https://sga.unemi.edu.ec{{ distributivo.profesor.persona.foto.foto.url }}" class="fancybox">
                                        <img style="border:2px solid white;" src="https://sga.unemi.edu.ec{{ distributivo.profesor.persona.foto.foto.url }}" class="rounded-circle">
                                        </a>
                                    {% else %}
                                        {% if distributivo.profesor.persona.sexo_id == 1 %}
                                            <img style="border:2px solid white;" src="/static/images/iconos/mujer.png" class="rounded-circle">
                                        {% else %}
                                            <img style="border:2px solid white;" src="/static/images/iconos/hombre.png" class="rounded-circle">
                                        {% endif %}
                                    {% endif %}
                                </span>
                                </div>
                                <div class="ms-0">
                                    <h6 class="mb-0">
                                        <i class="fa fa-address-card" aria-hidden="true"></i>
                                        {{ distributivo.profesor.persona.cedula }} | {{ distributivo.profesor }}
                                    </h6>
                                    <p class="mb-0 text-muted">
                                        {%  for email in distributivo.profesor.persona.lista_emails %}
                                            <span class="fa fa-envelope"></span> <a href="mailto:{{ email }}">{{ email }}</a>
                                            {% if not forloop.last %}| {% endif %}
                                        {% endfor %}<br>
                                        {%  for telefono in distributivo.profesor.persona.lista_telefonos %}
                                            {{ telefono }}{% if not forloop.last %}, {% endif %}
                                        {% endfor %}
                                    </p>
                                    <p class="h6" style="color: #7C7C7C;margin-bottom:0rem">{{ distributivo.coordinacion.alias }} | {{ distributivo.carrera|default_if_none:"Sin carrera asignada" }}</p>

                                    <h6 class="mb-0 text-muted">
                                        {% if distributivo.materia %}
                                            <br>{{ distributivo.materia }}
                                        {% endif %}
                                        <b>Fecha: </b>{{ distributivo.fecha_creacion|date:"d-m-Y H:i" }}<br>
                                        {% if not distributivo.activo %}
                                            <span style="color: #b94a48;">Desactivado</span> |
                                        {% endif %}
                                        {% if distributivo.vercertificado %}
                                            <span style="color: #468847;">Puede ver certificado</span> |
                                        {% else %}<br>
                                            <span style="color: #b94a48;margin-bottom: 0px">No puede ver certificado</span> |
                                        {% endif %}
                                        {% if distributivo.verinforme %}
                                            <span class="label label-info tu" data-original-title="Para Docentes que no tienen asignaturas asignadas, pero si tienen otras actividades y puedan imprimir el informe mensual."> Puede ver informe</span> |
                                        {% endif %}
                                        {% if distributivo.bloqueardistributivo %}
                                            <span style="color: #b94a48;margin-bottom: 0px">Criterios Bloqueados</span>
                                            {#                                            <br><span class="label label-important" data-toggle="tooltip" title="Este distributivo se encuentra bloqueado y no se puede modificar los criterios"> Criterios Bloqueados</span>#}
                                        {% endif %}

                                        {% with solicitudhorariotutoria=distributivo.periodo|args:distributivo|args:persona|call:'solicitudes_horario_tutorias'%}
                                            {% if solicitudhorariotutoria.estadosolicitud == 0 %}
                                                <div class="alert alert-info">
                                                    <strong>
                                                        <i class="fa fa-info"></i>
                                                        Solicitó nueva fecha para subir horario tutorias <a class="btn btn-success tu horario_tutorias" idsol="{{ solicitudhorariotutoria.id }}"> click aqui</a>
                                                        {#                                                    Solicitó nueva fecha para subir horario tutorias <a class="btn btn-success tu horario_tutorias" idsol="1"> click aqui</a>#}
                                                    </strong>
                                                </div>
                                            {% endif %}
                                        {% endwith %}
                                    </h6>
                                </div>
                            </div>
                        </td>
                        <td>
                            {{ distributivo.nivelcategoria|default_if_none:"-" }},
                            {{ distributivo.categoria|default_if_none:"-" }} {{ distributivo.nivelescalafon|default_if_none:"" }} ,
                            {{ distributivo.dedicacion|default_if_none:"-" }}<br>
                            {% if distributivo.observacion %}
                                <b>Obs.:</b> {{ distributivo.observacion }}
                            {% endif %}
                        </td>
{#                        <td style="text-align: center">#}
{#                            {% if distributivo.tablaponderacion %}#}
{#                                <i class="fa fa-table" data-bs-toggle="tooltip" title="{{ distributivo.tablaponderacion|default_if_none:"" }}"></i>#}
{#                            {% endif %}#}
{#                        </td>#}
                        <td style="text-align: center">{{ distributivo.horasdocencia|floatformat:0 }}</td>
                        <td style="text-align: center">{{ distributivo.total_cridocencia|floatformat:0 }}</td>
                        <td style="text-align: center">{{ distributivo.horasinvestigacion|floatformat:0 }}</td>
                        <td style="text-align: center">{{ distributivo.total_criinvestigacion|floatformat:0 }}</td>
                        <td style="text-align: center">{{ distributivo.horasgestion|floatformat:0 }}</td>
                        <td style="text-align: center">{{ distributivo.total_crigestion|floatformat:0 }}</td>
                        <td style="text-align: center">{{ distributivo.horasvinculacion|floatformat:0 }}</td>
                        <td style="text-align: center">{{ distributivo.total_crivinculacion|floatformat:0 }}</td>

                        {% with totalhoras=distributivo.profesor|args:periodo|call:'cantidad_total_horas_criterios' %}
                            <td style="text-align: center">
                                {% if distributivo.horasdocencia == 0 and  distributivo.horasinvestigacion == 0 and distributivo.horasgestion == 0 and distributivo.horasvinculacion == 0  %}
                                    <span class="text-danger label-mini">
                                {% else %}
                                    {%  if distributivo.dedicacion.id == 1 and totalhoras != 40  %}
                                        <span class="text-warning label-mini">
                                    {% else %}
                                        {%  if distributivo.dedicacion.id == 2 and totalhoras != 20  %}
                                            <b class="text-warning label-mini">
                                        {% else %}
                                            <b class="text-success label-mini">
                                        {% endif %}
                                    {% endif %}
                                {% endif %}
                                {{ totalhoras|floatformat:0 }}
                                </b>
                            </td>
                        {% endwith %}
                        <td>
                            <div class="dropdown dropstart">
                                <a href="javascript:void(0);" class="btn-icon btn btn-ghost btn-sm rounded-circle" data-bs-toggle="dropdown" data-offset="-140" aria-haspopup="true" aria-expanded="false">
                                    <i class="fa fa-ellipsis-v"></i>
                                </a>
                                <div class="dropdown-menu">
                                    {% if perms.sga.puede_bloquear_desbloquear_distibutivo %}
                                        <li><a class="dropdown-item" onclick="notificar_alertas('¿Esta seguro que desea <b>{% if distributivo.bloqueardistributivo %}DESBLOQUEAR{% else %}BLOQUEAR{% endif %}</b> el distributivo del docente <b>{{ distributivo.profesor.persona.nombre_completo }}</b>?', 'bloqueardistributivo', {{ distributivo.pk }})" href="javascript:;"> <i class='fa fa-ban'></i>&nbsp; {% if distributivo.bloqueardistributivo %} Desbloquear {% else %} Bloquear {% endif %} </a></li>
                                        <li><a class="dropdown-item" onclick="notificar_alertas('¿Esta seguro que desea recalcular el horario de actividades del docente <b>{{ distributivo.profesor.persona.nombre_completo }}</b>?', 'recalcularhorario', {{ distributivo.pk }})" href="javascript:;"> <i class='fa fa-refresh'></i>&nbsp;Recalcular Horario de actividades</a></li>
                                    {% endif %}
                                    {% if perms.sga.puede_modificar_datos_distributivo %}
                                        <li><a class="dropdown-item" href="/adm_criteriosactividadesdocente?action=edittipos&profesor={{ distributivo.profesor.id }}&idc={{ idc }}&periodolectivo={{ periodo.id }}{% if search %}&s={{ search }}{% endif %}{% if idc %}&idc={{ idc }}{% endif %}{% if distributivo.materia.id %}&idm={{ distributivo.materia.id }}{% endif %}"> <i class='fa fa-file'></i>&nbsp;Editar</a></li>
                                    {% endif %}
                                    {% if persona.usuario.is_superuser or perms.sga.puede_modificar_datos_distributivo %}
                                        {#                                        {% if distributivo.horasdocencia == 0 and  distributivo.horasinvestigacion == 0 and distributivo.horasgestion == 0  %}#}
                                        {% if not distributivo.bloqueardistributivo %}
                                            <li><a class="eliminacionmodal dropdown-item" href="javascript:;" nhref='/adm_criteriosactividadesdocente?action=deletedistributivo&iddistributivo={{ distributivo.id }}{% if search %}&s={{ search }}{% endif %}{% if idc %}&idc={{ idc }}{% endif %}'><span class="fa fa-trash "></span> Eliminar <label class="label tu"></label></a></li>
                                        {% endif %}
                                        {#                                        {% endif %}#}
                                    {% endif %}
                                    <li><a class="dropdown-item" href='/adm_criteriosactividadesdocente?action=criterios&id={{ distributivo.profesor.id }}&iddistri={{ distributivo.id }}{% if search %}&s={{ search }}{% endif %}{% if idc %}&idc={{ idc }}{% endif %}'><i class="fa fa-list" ></i>&nbsp;Criterios y Actividades</a></li>
{#                                    {% if perms.sga.puede_modificar_criteriosdocentes %}#}
{#                                        <li><a class="dropdown-item"  href='/adm_criteriosactividadesdocente?action=tablaponderativa&id={{ distributivo.profesor.id }}{% if search %}&s={{ search }}{% endif %}{% if idc %}&idc={{ idc }}{% endif %}'><i class="fa fa-list" ></i> Tabla ponderativa</a></li>#}
{#                                    {% endif %}#}
                                    <li><a class="dropdown-item"  href='/adm_criteriosactividadesdocente?action=horario&id={{ distributivo.profesor.id }}{% if search %}&s={{ search }}{% endif %}{% if idc %}&idc={{ idc }}{% endif %}'><i class="fa fa-calendar " ></i>&nbsp;Horario</a></li>
                                    {% if periodoposgrado %}
                                        <li><a class="dropdown-item"  href='/adm_criteriosactividadesdocentepos?action=horarioclases&id={{ distributivo.id }}{% if search %}&s={{ search }}{% endif %}{% if idc %}&idc={{ idc }}{% endif %}'><span class="fa fa-calendar" ></span> Gestión de horario posgrado</a></li>
                                    {% endif %}
                                    <li><a class="dropdown-item"  href='/adm_criteriosactividadesdocente?action=verevidencia&id={{ distributivo.profesor.id }}{% if search %}&s={{ search }}{% endif %}{% if idc %}&idc={{ idc }}{% endif %}'><i class="fa fa-file-pdf-o" ></i>&nbsp;Ver Evidencias</a></li>
                                    <li><a class="dropdown-item"  href='/adm_criteriosactividadesdocente?action=verlogmarcadas&id={{ distributivo.profesor.persona.id|encrypt }}{% if search %}&s={{ search }}{% endif %}{% if idc %}&idc={{ idc }}{% endif %}'><i class="fa fa-calendar" ></i>&nbsp;Ver Marcadas</a></li>
                                    {% if not periodo.cerradodistributivo %}
                                        {% if perms.sga.puede_modificar_criteriosdocentes %}
                                            <li><a href="javascript:;" nhref='/adm_criteriosactividadesdocente?action=actualiza&id={{ distributivo.id }}{% if search %}&s={{ search }}{% endif %}{% if idc %}&idc={{ idc }}{% endif %}' class="confirmacionmodal dropdown-item"><i class="fa fa-refresh" ></i>&nbsp;Actualizar Horas</a></li>
                                            {% if distributivo.cuentaadmision %}
                                                <li><a href="javascript:;" nhref='/adm_criteriosactividadesdocente?action=nocontaradmision&id={{ distributivo.id }}{% if search %}&s={{ search }}{% endif %}{% if idc %}&idc={{ idc }}{% endif %}' class="confirmacionmodal dropdown-item"><i class="fa fa-remove" ></i>&nbsp;No contar admisión(Informe asis. docente)</a></li>
                                            {% else %}
                                                <li><a href="javascript:;" nhref='/adm_criteriosactividadesdocente?action=contaradmision&id={{ distributivo.id }}{% if search %}&s={{ search }}{% endif %}{% if idc %}&idc={{ idc }}{% endif %}' class="confirmacionmodal dropdown-item"><i class="fa fa-check" ></i>&nbsp;Contar admisión(Informe asis. docente)</a></li>
                                            {% endif %}
                                        {% endif %}
                                    {% endif %}
                                    {% if not periodo.cerradodistributivo and perms.sga.puede_modificar_criteriosdocentes %}
                                        {% if perms.sga.puede_modificar_criteriosdocentes %}
                                            {% if distributivo.activo %}
                                                <li><a href="javascript:;" nhref='/adm_criteriosactividadesdocente?action=desactivar&id={{ distributivo.id|encrypt }}{% if search %}&s={{ search }}{% endif %}{% if idc %}&idc={{ idc }}{% endif %}' class="confirmacionmodal dropdown-item"><i class="fa fa-remove" ></i>&nbsp;Desactivar distributivo del profesor</a></li>
                                            {% else %}
                                                <li><a href="javascript:;" nhref='/adm_criteriosactividadesdocente?action=activar&id={{ distributivo.id|encrypt }}{% if search %}&s={{ search }}{% endif %}{% if idc %}&idc={{ idc }}{% endif %}' class="confirmacionmodal dropdown-item"><i class="fa fa-check" ></i>&nbsp;Activar distributivo del profesor</a></li>
                                            {% endif %}
                                        {% endif %}
                                    {% endif %}
                                    {% if reporte_1 %}
                                        <li><a href="javascript:;" tipos="{{ reporte_1.tiporeporte }}" nhref="/reportes?action=run&n={{ reporte_1.nombre }}&persona={{ distributivo.profesor.persona.id }}" class="reportedirecto dropdown-item"> <i class='fa fa-print'></i>&nbsp;Hoja de vida</a></li>
                                    {% endif %}
                                    {% if reporte_3 %}
                                        <li><a href="javascript:;" tipos="{{ reporte_3.tiporeporte }}" nhref="/reportes?action=run&n={{ reporte_3.nombre }}&profesor={{ distributivo.profesor.id }}&periodo={{ periodo.id }}"  class="reportedirecto dropdown-item"> <i class='fa fa-print'></i>&nbsp;Actividades y horas del docente</a></li>
                                    {% endif %}
                                    <li><a class="tu dropdown-item"  href='/adm_criteriosactividadesdocente?action=imprimiracompanamiento&iddocente={{ distributivo.profesor.id }}&periodo={{ periodo.id }}&docente={{ distributivo.profesor }}' ><i class="fa fa-print"></i>&nbsp;Acompañamiento</a></li>
                                    <li class="dropdown-submenu pull-left dropdown-item"><a href="javascript:;"><i class="fa fa-list"></i> Informes</a>
                                        <ul class="dropdown-menu">
                                            {% with validacoordinaciones=distributivo|args:1|call:'verificar_coordinacioneslista' %}
                                                {%  if validacoordinaciones.0.0 %}
                                                    <li><a class="tu generar_seguimiento dropdown-item" idreport="1" href="javascript:;" idp="{{ distributivo.profesor.id|encrypt }}"><i class="fa fa-print"></i>&nbsp;Informe mensual de cumplimiento de actividades (pregrado en línea)</a></li>
                                                    <li><a class="tu informe_seguimiento_tutor_pregrado_criterio dropdown-item" idreport="1" href="javascript:;" idp="{{ distributivo.profesor.id|encrypt }}"><i class="fa fa-print"></i>&nbsp;Informe mensual de cumplimiento de actividades (pregrado en línea) v2</a></li>
                                                    <li><a class="tu reporte_mensajes dropdown-item" idreport="1" href="javascript:;" idp="{{ distributivo.profesor.id|encrypt }}"><i class="fa fa-print"></i>&nbsp;Reporte de mensajes no leidos moodle (pregrado en línea) </a></li>
                                                    <li><a class="tu reporte_foros dropdown-item" idreport="1" href="javascript:;" idp="{{ distributivo.profesor.id|encrypt }}"><i class="fa fa-print"></i>&nbsp;Reporte de foros no calificados moodle (pregrado en línea) </a></li>
                                                {% endif %}
                                                {% if  validacoordinaciones.0.1 %}
                                                    <li><a  class="tu imprimirinforme dropdown-item" href="javascript:;" idd="{{ distributivo.profesor.id }}" idp="{{ periodo.id }}" idn="{{ distributivo.profesor }}"  ><i class="fa fa-print"></i>&nbsp;Informe mensual de actividades del docente</a></li>
                                                {% endif %}
                                                {%  if validacoordinaciones.0.2 %}
                                                    <li><a class="tu generar_seguimiento dropdown-item" idreport="3" href="javascript:;" idp="{{ distributivo.profesor.id|encrypt }}"><i class="fa fa-print"></i>&nbsp;Informe mensual de cumplimiento de actividades (admisión presencial)</a></li>
                                                    <li><a class="tu reporte_mensajes dropdown-item" idreport="3" href="javascript:;" idp="{{ distributivo.profesor.id|encrypt }}"><i class="fa fa-print"></i>&nbsp;Reporte de mensajes no leidos moodle (admisión presencial) </a></li>
                                                    <li><a class="tu reporte_foros dropdown-item" idreport="3" href="javascript:;" idp="{{ distributivo.profesor.id|encrypt }}"><i class="fa fa-print"></i>&nbsp;Reporte de foros no calificados moodle (admisión presencial) </a></li>
                                                {% endif %}
                                                {%  if validacoordinaciones.0.3 %}
                                                    <li><a class="tu generar_seguimiento dropdown-item" idreport="2" href="javascript:;" idp="{{ distributivo.profesor.id|encrypt }}"><i class="fa fa-print"></i>&nbsp;Informe mensual de cumplimiento de actividades (admisión en línea)</a></li>
                                                    <li><a class="tu reporte_mensajes dropdown-item" idreport="2" href="javascript:;" idp="{{ distributivo.profesor.id|encrypt }}"><i class="fa fa-print"></i>&nbsp;Reporte de mensajes no leidos moodle (admisión en línea) </a></li>
                                                    <li><a class="tu reporte_foros dropdown-item" idreport="2" href="javascript:;" idp="{{ distributivo.profesor.id|encrypt }}"><i class="fa fa-print"></i>&nbsp;Reporte de foros no calificados moodle (admisión en línea) </a></li>
                                                {% endif %}
                                            {% endwith %}

                                        </ul>
                                    </li>
                                    {% with  cantidadmaterias=distributivo.profesor|args:periodo|call:"cantidad_materiastodas" %}
                                        <li><a class="dropdown-item" href='/adm_criteriosactividadesdocente?action=materias&id={{ distributivo.profesor.id }}'><i class='fa fa-list' ></i>&nbsp;Materias - {{ cantidadmaterias }}</a></li>
                                    {% endwith %}
                                    <li><a class="tu reporte_actividad_autor dropdown-item" href="javascript:;" idp="{{ distributivo.profesor.id|encrypt }}"><i class="fa fa-print"></i>&nbsp;Informe acti de recurso aprendizaje aula </a></li>
                                </div>
                            </div>
                        </td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="15">NO EXISTEN DOCENTES ASIGNADOS A MATERIAS EN EL PERIODO SELECCIONADO</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
            {% if distributivos %}
                <div class="card-footer border-top-0">
                    {% include 'paginacionb4.html' %}
                </div>
            {% endif %}
        </div>
    </div>
    <div class="modal fade static" id="itemspanel2" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="paneltitle">Reporte Marcadas Docente</h4>
                </div>
                <div class="modal-body panelbody">
                    <div class="row-fluid">
                        <form id="form3" class="form-horizontal form-modal" style="width: 370px; margin-bottom: 0">
                            <div style="width: 150px">
                                <p>Desde: <input type="text" id="id_fecha_desde"></p>
                                <p>Hastta: <input type="text" id="id_fecha_hasta"></p>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="javascript:;" class="btn btn-danger" id="itemspanel_adicionar_2"><i class="fa fa-plus"></i> Procesar</a>
                    <a href="javascript:;" class="btn btn-info" id="itemspanel_cerrar_2"> Cerrar</a>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="itemspanel3" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="paneltitle">Reporte Asistencia Docente</h4>
                </div>
                <div class="modal-body panelbody">
                    <div class="alert alert-danger invalidofechas" style="display: none">
                        <i class="fa fa-info-sign"></i> Seleccione un rango de fechas valida para continuar...!!!
                    </div>
                    <div style="text-align: center;">
                        <input placeholder="Fecha desde" type="text" value="{{ fechainicio }}" name="fini" id="id_fecha_inicio" style="width: 100px">
                        <input placeholder="Fecha hasta" type="text" value="{{ fechafin }}" name="ffin" id="id_fecha_fin" style="width: 100px"><br><br>
                        <select style="width: 200px" class="no-margin-bottom tipo_archivo">
                            <option  value="1">Archivo Pdf</option>
                            <option  value="2">Archivo Excel</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer" style="text-align: center">
                    <a href="javascript:;" class="btn btn-danger" id="itemspanel_adicionar_3"><i class="fa fa-plus"></i> Procesar</a>
                    <a href="javascript:;" class="btn btn-info" id="itemspanel_cerrar_3"> Cerrar</a>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="reportecumplimiento" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="paneltitle">Reporte Cumplimiento Docente</h4>
                </div>
                <div class="modal-body panelbody">
                    <div class="alert alert-danger invalidofechas" style="display: none">
                        <i class="fa fa-info-sign"></i> Seleccione un rango de fechas valida para continuar...!!!
                    </div>
                    <div style="text-align: center;">
                        <form action="{{ request.path }}" method="GET" enctype="multipart/form-data">
                            <input type="hidden" name="action" value="reporte_cumplimiento_actividades">
                            <div class="form-control" style="text-align: left">
                                Seleccione el mes: <span class="text-danger">*</span> <br>
                                <select name="m" id="id_mes" style="width: 100%">
                                    {% for m in meses %}
                                        <option value="{{ m.0 }}">{{ m.1|title }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <br>
                            <br>
                            <div class="" style="text-align:right">
                                <a href="javascript:;" onclick="reporte_cumplimiento_general_actividades_docente()" class="btn btn-success"><i class="fa fa-plus"></i> Procesar</a>
                                <a href="javascript:;" class="btn btn-danger" data-dismiss="modal"> Cerrar</a>
                            </div>

                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="itemspanel" style="display: none;" >
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 id="paneltitle">Ingresar un rango de fechas:</h4>
                </div>
                <div class="modal-body panelbody">
                    <div class="alert alert-danger incompletoaddpreguntas" style="display: none">
                        <i class="fa fa-info-sign"></i> Seleccione un rango de fechas para continuar...!!!
                    </div>
                    <div style="text-align: center">
                        <input placeholder="fecha desde" type="text" value="{{ fechainicio }}" name="fini" id="id_fini" style="width: 100px">
                        <input placeholder="fecha hasta" type="text" value="{{ fechafin }}" name="ffin" id="id_ffin" style="width: 100px">
                    </div><br>
                </div>
                <div class="modal-footer">
                    <p style="text-align: center; margin-bottom: 0">
                        <a href="javascript:;" class="btn btn-danger generarinforme"><i class="fa fa-plus"></i> Procesar</a>
                        <a href="javascript:;" id="add_cancel" class="btn btn-info"> Cancelar</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade static" id="itemspaneltutoria" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="paneltitle">Reporte Tutorias</h4>
                </div>
                <div class="modal-body panelbody">
                    <div class="alert alert-danger invalidofechas" style="display: none">
                        <i class="fa fa-info-sign"></i> Seleccione un rango de fechas valida para continuar...!!!
                    </div>
                    <div style="text-align: center;">
                        {#                <input placeholder="Fecha desde" type="text" value="{{ fechainicio }}" name="fini" id="id_fecha_inicio" style="width: 100px">#}
                        {#                <input placeholder="Fecha hasta" type="text" value="{{ fechafin }}" name="ffin" id="id_fecha_fin" style="width: 100px"><br><br>#}
                        <select style="width: 200px" class="no-margin-bottom tipo_archivo_tutoria">
                            <option  value="1">Archivo Pdf</option>
                            <option  value="2">Archivo Excel</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer" style="text-align: center">
                    <a href="javascript:;" class="btn btn-danger" id="generar_tutoria"><i class="fa fa-plus"></i> Generar</a>
                    <a href="javascript:;" class="btn btn-info" id="cerrar_tutoria"> Cerrar</a>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade static" id="itemspanelpares" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="paneltitle">Reporte Pares</h4>
                </div>
                <div class="modal-body panelbody">
                    <div class="alert alert-danger invalidofechas" style="display: none">
                        <i class="fa fa-info-sign"></i> Seleccione
                    </div>
                    <div style="text-align: center;">
                        <select style="width: 500px" class="no-margin-bottom" name="cmbcarreras" id="cmbcarreras">
                            {% for listacar in listadocarreras %}
                                <option  value="{{ listacar.id }}">{{ listacar }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="modal-footer" style="text-align: center">
                    <a href="javascript:;" class="btn btn-danger" id="generar_reportepares"><i class="fa fa-plus"></i> Generar</a>
                    <a href="javascript:;" class="btn btn-info" id="cerrar_reportepares"> Cerrar</a>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade static" id="itemspanelseguimiento" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="paneltitle">Reporte Seguimiento Notas</h4>
                </div>
                <div class="modal-body panelbody">
                    {#            <div class="alert alert-danger invalidofechas" style="display: none">#}
                    {#                <i class="fa fa-info-sign"></i> Seleccione un rango de fechas valida para continuar...!!!#}
                    {#            </div>#}
                    <div style="text-align: center;">
                        {#                <input placeholder="Fecha desde" type="text" value="{{ fechainicio }}" name="fini" id="id_fecha_inicio" style="width: 100px">#}
                        {#                <input placeholder="Fecha hasta" type="text" value="{{ fechafin }}" name="ffin" id="id_fecha_fin" style="width: 100px"><br><br>#}
                        <select style="width: 200px" class="no-margin-bottom tipo_archivo_seguimiento">
                            <option  value="1">Archivo Pdf</option>
                            {#                    <option  value="2">Archivo Excel</option>#}
                        </select>
                    </div>
                </div>
                <div class="modal-footer" style="text-align: center">
                    <a href="javascript:;" class="btn btn-danger" id="generar_seguimiento"><i class="fa fa-plus"></i> Generar</a>
                    <a href="javascript:;" class="btn btn-info" id="cerrar_seguimiento"> Cerrar</a>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade static" id="fechanotificacion" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <table border="0" width="100%" style="background-color: transparent;">
                        <tr>
                            <td style="width: 100%"><h3 class="paneltitlefecha">Fecha de notificación</h3></td>
                        </tr>
                    </table>
                </div>
                <div class="modal-body">
                    <div class="alert alert-info" id="mensajeevidencia" style="display: none;text-align: center; font-size: 11px">Esta configurado la fecha desde : {%  if periodo.fechadesdenotificacion %}{{ periodo.fechadesdenotificacion|date:"d-m-Y" }}{% else %}Ninguna fecha{% endif %}</div>
                    <form id="formulario2" style="width: 100%; margin-bottom: 0;padding-left: 2%;">
                        <div class="row-fluid">
                            <input type='hidden' name='action' value='fechanotificacionevaluacion' />
                            {% for field in form2 %}
                                {% if field.field.widget.attrs.separator %}
                                    {% if field.field.widget.attrs.blanklinebefore %}
                                    {% endif %}
                                    <div style="width: 100%; height: max-content">
                                        <h6 style="width:100%; text-align:left; border-bottom: 1px solid #98a3ab; line-height:0.1em; margin:10px 0 20px;">
                                            <span style="padding:0 10px; background: #f5f5f5;">
                                                {% if field.field.widget.attrs.separatortitle %}
                                                    {{ field.field.widget.attrs.separatortitle }}
                                                {% endif %}
                                             </span>
                                        </h6>
                                    </div>
                                {% endif %}
                                <div id="fieldset_{{ field.name }}" class="col-lg-{{ field.field.widget.attrs.col }}" style="float: left; padding-right: 10px;">
                                    <label class="control-label pr-2" for="id_{{ field.name }}"><b>{{ field.label }}&nbsp;:</b></label>
                                    {{ field }}
                                    <p class="help-text">{{ field.help_text }} </p>
                                </div>
                            {% endfor %}
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <a href="javascript:;" class="btn btn-success aprobarcerrar"> Guardar</a>
                    <a href="javascript:;" class="btn btn-info cerrarmodal">Cerrar</a>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade static" id="itemspanelarticulo" style="display: none;" >
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 id="paneltitle">Ingrese los datos para descargar</h4>
                </div>
                <div class="modal-body panelbody">
                    <div style="text-align: center">
                        <form id="formArticulo" style="height: 15px; text-align: center">
                            <input placeholder="Seleccione año" type="text" style="text-align: center" values="" name="anio" id="id_anio">
                            <span class='help-text' id="itemshelptext"></span>
                        </form>
                    </div><br>
                </div>
                <div class="modal-footer">
                    <p style="text-align: center; margin-bottom: 0">
                        <a href="javascript:;" class="btn btn-danger generarinformearticulo"><i class="fa fa-plus"></i> Procesar</a>
                        <a href="javascript:;" class="btn btn-info cancelarinformearticulo"> Cancelar</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="itemspanel_generar_seguimiento" style="display: none;" >
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 id="paneltitle">Ingresar un rango de fechas :</h4>
                </div>
                <div class="modal-body" id="printrecursofac_body1">
                    <div class="alert alert-danger incompletoseguimiento_general" style="display: none">
                        <i class="fa fa-info-sign"></i> Seleccione un rango de fechas para continuar...!!!
                    </div>
                    <div style="text-align: center">
                        <div id="fieldset_fechadesdei" class="col-lg-6" style="float: left; padding-right: 10px;">
                            <input placeholder="fecha desde" type="date" value="{{ fechainicio }}" name="fini" id="id_fini_seguimiento_general" style="width: 100%">
                        </div>
                        <div id="fieldset_fechadesdei" class="col-lg-6" style="float: left; padding-right: 10px;">
                            <input placeholder="fecha hasta" type="date" value="{{ fechafin }}" name="ffin" id="id_ffin_seguimiento_general" style="width: 100%">
                        </div>
                        <input type="hidden" id="idreporte" name="idreporte" value="0">
                        <input type="hidden" id="idprofesor" name="idprofesor" value="0">
                    </div><br>
                </div>
                <div class="modal-footer">
                    <p style="text-align: center; margin-bottom: 0">
                        <a href="javascript:;" class="btn btn-danger generar_seguimiento_general"><i class="fa fa-plus"></i> Procesar</a>
                        <a href="javascript:;" id="cancel_seguimiento_general" class="btn btn-info"> Cancelar</a>
                    </p>
                </div>
            </div>
        </div>
    </div>


    <div class="modal fade static" id="itemspanelactividadespendientes" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="paneltitle">Reporte actividades pendientes</h4>
                </div>
                <div class="modal-body panelbody">
                    <div class="alert alert-danger invalidofechas" style="display: none">
                        <i class="fa fa-info-sign"></i> Seleccione
                    </div>
                    <div style="text-align: center;">
                        <select style="width: 500px" class="no-margin-bottom" name="cmbcarreraspregradovirtual" id="cmbcarreraspregradovirtual">
                            {% for listacar in listadocarreraspregradovirtual %}
                                <option  value="{{ listacar.id }}">{{ listacar }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="modal-footer" style="text-align: center">
                    <a href="javascript:;" class="btn btn-danger" id="generar_reporteactividades"><i class="fa fa-plus"></i> Generar</a>
                    <a href="javascript:;" class="btn btn-info" id="cerrar_reporteactividades"> Cerrar</a>
                </div>
            </div>
        </div>
    </div>


    <div class="modal fade static" id="itemspanelinformeactividades" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="paneltitle">Informe actividades </h4>
                </div>
                <div class="modal-body panelbody">
                    <div class="alert alert-danger incompletoinformeactividades" style="display: none">
                        <i class="fa fa-info-sign"></i> Seleccione
                    </div>
                    <div style="text-align: center;">
                        <select style="width: 500px" class="no-margin-bottom" name="cbocarreraactividades" id="cbocarreraactividades">
                            {% for listacar in listadocarreraspregradovirtual %}
                                <option  value="{{ listacar.id }}">{{ listacar }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="modal-footer" style="text-align: center">
                    <a href="javascript:;" class="btn btn-danger" id="generar_informeactividades"><i class="fa fa-plus"></i> Generar</a>
                    <a href="javascript:;" class="btn btn-info" id="cerrar_informeactividades"> Cerrar</a>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="itemspanel_generar_seguimiento_tutor" style="display: none;" >
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 id="paneltitle">Ingresar un rango de fechas :</h4>
                </div>
                <div class="modal-body" id="printrecursofac_body">
                    <div class="alert alert-danger incompletoseguimiento_general_tutor" style="display: none">
                        <i class="fa fa-info-sign"></i> Seleccione un rango de fechas para continuar...!!!
                    </div>
                    <div style="text-align: center">
                        <div id="fieldset_fechadesde" class="col-lg-6" style="float: left; padding-right: 10px;">
                            <label class="control-label pr-2" for="id_fechainicio"><b>Fecha desde:&nbsp;:</b></label>
                            <input placeholder="fecha desde" type="date" value="{{ fechainicio }}" name="fini" id="id_fini_seguimiento_tutor" style="width: 100%">
                        </div>
                        <div id="fieldset_fechadesde" class="col-lg-6" style="float: left; padding-right: 10px;">
                            <label class="control-label pr-2" for="id_fechainicio"><b>Fecha hasta:&nbsp;:</b></label>
                            <input placeholder="fecha hasta" type="date" value="{{ fechafin }}" name="ffin" id="id_ffin_seguimiento_tutor" style="width: 100%">
                        </div>
                        <input type="hidden" id="idreporte_tutor" name="idreporte" value="0">
                        <input type="hidden" id="idprofesor_tutor" name="idprofesor_tutor" value="0">
                    </div><br>
                </div>
                <div class="modal-footer">
                    <p style="text-align: center; margin-bottom: 0">
                        <a href="javascript:;" class="btn btn-danger generar_seguimiento_tutor"><i class="fa fa-plus"></i> Procesar</a>
                        <a href="javascript:;" id="cancel_seguimiento_tutor" class="btn btn-info"> Cancelar</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div class="modal static" id="recalcularmodal" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Migrando criterios y actividades de preferencias</h3>
                </div>
                <div class="modal-body">
                    <div style='margin-bottom:1px;height: 20px;background-image: linear-gradient(to bottom, #dde2df, #d7e2dd)' class="progress progress-success progress-striped active">
                        <div class="bar" style="font-weight: bold; width: 0;" id="progressbar" aria-valuenow="25"></div>
                    </div>
                    <div id="recalcularmodalprogresshint">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal static" id="recalcularmodalhoras" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Actualizando horas distributivo</h3>
                </div>
                <div class="modal-body">
                    <div style='margin-bottom:1px;height: 20px;background-image: linear-gradient(to bottom, #dde2df, #d7e2dd)' class="progress progress-success progress-striped active">
                        <div class="bar" style="font-weight: bold; width: 0;" id="progressbarhoras" aria-valuenow="25"></div>
                    </div>
                    <div id="recalcularmodalprogresshinthoras">
                    </div>
                </div>
            </div>
        </div>
    </div>

    {# MODAL DE SOLICITUD DE NUEVA FECHA PARA SUBIR HORARIO DE TUTORIAS   #}
    <div class="modal static" id="solicitud_horario_tutorias" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3><i class="fa fa-share-square"></i> Solicitud de horario de tutorías</h3>
                </div>
                <div class="modal-body">
                    <div id="solicitudhorariotutotiasmodalbody">
                    </div>
                </div>
                <div class="modal-footer">
                    <a  href="javascript:;" class="btn btn-success btn-guardar"> Guardar</a>
                    <a  href="javascript:;" class="btn btn-cerrar btn-danger" data-dismiss="modal">Cerrar</a>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade static" id="imprimirinformecumfac" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitleprintrecursofac">Reporte de cumplimiento actividades y recursos de aprendizaje</h3>
                </div>
                <div class="modal-body" id="printrecursofac_body">
                    <div id="fieldset_fechainicio" class="col-lg-6" style="float: left; padding-right: 10px;">
                        <label class="control-label pr-2" for="id_fechainicio"><b>Fecha desde:&nbsp;:</b></label>
                        <input col="6" placeholder="fecha desde" type="date" value="{{ periodo.inicio|date:"Y-m-d" }}" name="fini" id="id_fini_autor" style="width: 100%">
                    </div>
                    <div id="fieldset_fechainicio" class="col-lg-6" style="float: left; padding-right: 10px;">
                        <label class="control-label pr-2" for="id_fechainicio"><b>Fecha hasta:&nbsp;:</b></label>
                        <input col="6" placeholder="fecha hasta" type="date" value="{{  periodo.fin|date:"Y-m-d" }}" name="ffin" id="id_ffin_autor" style="width: 100%">
                    </div>
                    <select name="cod_facultad" id="cod_facultad" style="width: 100%;">
                        {% for coordinacion in persona.mis_coordinaciones %}
                            <option value="{{ coordinacion.id }}">{{ coordinacion.nombre }}</option>
                        {% endfor %}
                    </select>
                    <select name="cod_carrera" id="cod_carrera" style="width: 100%;">
                        <option value="0">--TODAS LAS CARRERA--</option>
                    </select><br><br>
                </div>

                <div class="modal-footer">
                    <div id="idoculto">
                        <table class='table table-bordered table-striped'>
                            <thead>
                            <th>UNIDADES</th>
                            <th>FECHA INICIO</th>
                            <th>FECHA FIN</th>
                            <th>TIPO PROFESOR</th>
                            </thead>
                            <tbody>
                            {% for uni in listadounidades %}
                                <tr>
                                    <td>{{ uni.0 }}</td>
                                    <td>{{ uni.2|date:"Y-m-d" }}</td>
                                    <td>{{ uni.3|date:"Y-m-d" }}</td>
                                    <td>{{ uni.4 }}</td>
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    <div style="text-align: left">
                        <a href="javascript:;" onclick="vistareporterecursosilabocumfac()" class="btn btn-warning"> Imprimir</a>
                        <a href="javascript:;" id="printrecursocumfac_cerrar" class="btn btn-danger"> Cerrar</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}