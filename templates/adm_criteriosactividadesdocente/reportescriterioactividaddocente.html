{% extends "basebs.html" %}
{% load sga_extras %}
{% block heading %}
    <script type="text/javascript" src='/static/js/select2.js?v=1.0.0' ></script>

    <link type='text/css' rel='stylesheet' href="/static/css/select2.css?v=1.0.0"/>

    <script src="https://kit.fontawesome.com/a96c5b6f8d.js" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css"/>

    <script type="text/javascript" src='/static/js/jquery.validationEngine.js?v=1.0.0'></script>
    <script type="text/javascript" src='/static/js/jquery.validationEngine-es.js?v=1.0.0' ></script>
    <link type='text/css' rel='stylesheet' href="/static/css/validationEngine.jquery.css?v=1.0.0"/>

    <script type="text/javascript">
        const reporte_cumplimiento_general_actividades_docente = () => {
            bloqueointerface();
            let mes = $('#reportecumplimiento #id_mes').val()
            let action = 'reporte_cumplimiento_actividades'
            const permiteWebPush = eval('{% if permiteWebPush %}"true"{% else %}"false"{% endif %}') === 'true';

            if (permiteWebPush){
                $.get("{{ request.path }}", {'action': action, 'm': mes}, function (data) {
                    $.unblockUI();
                    if (data.result) {
                        $('#btnNotificacionTareas').html(data.btn_notificaciones);
                        $('#reportecumplimiento').modal('hide');
                        mensajeSuccess(data.mensaje);
                    } else {
                        mensajeWarning(data.mensaje)
                    }
                }, 'json');
            }
            else{
                $.unblockUI();
                openwindow('GET' ,'{{ request.path }}', {action:action}, '_blank');
            }
        }

        function vistareportecumplimiento() {
            var cod_carrera = $("#imprimirinformetutorias #cod_carreracum").val();
            if (!cod_carrera) {
                cod_carrera = 0;
            }
            url = '/adm_criteriosactividadesdocente?action=reportepracticasgeneral_pdf&cod_carrera='+cod_carrera
            $("#imprimirinformetutorias").modal("hide");
            window.open(url, '_blank');
        }




        $(function () {
            $("select").select2({minimumResultsForSearch: 5 });
            $("#id_fecha_desde,#id_fecha_hasta, #id_fecha_desde_3,#id_fecha_hasta_3, #id_fecha_inicio, #id_fecha_fin, #id_fecha_desde,#id_fecha_hasta,#id_fini, #id_ffin, #id_fini_seguimiento_general, #id_ffin_seguimiento_general, #id_fini_seguimiento_tutor,#id_ffin_seguimiento_tutor").datepicker({format:"dd-mm-yyyy"}).on('changeDate', function(ev){ $(this).datepicker('hide'); });
            $("#id_fecha_desde,#id_fecha_hasta, #id_fecha_desde_3,#id_fecha_hasta_3, #id_anio, #id_fini, #id_ffin").addClass("validate[required]");
            $("#id_anio").datepicker({format: " yyyy", viewMode: "years", minViewMode: "years"}).on('changeDate', function(ev){ $(this).datepicker('hide');});
            iddocente=0
            docente=""
            periodo=0
            busqueda = function(){
                var term = $("#searchinput").val().toUpperCase().trim();
                if (term.length>0){
                    location.href = "/adm_criteriosactividadesdocente?s=" + term + "&" + "{% if idc %}idc={{ idc }}{% endif %}";
                }
                return false;
            };

            $("#search").click(function(){
                busqueda();
            });

            $('#searchinput').keyup(function(e) {
                if(e.keyCode == 13) {
                    busqueda();
                }
            });

            $("#cumplimiento_cerrar").click(function() {
                $("#imprimirinformetutorias").modal("hide");
            });

            $(".imprimirinformetutorias").click(function () {
                $("#imprimirinformetutorias").modal({backdrop: 'static', width: '500px'}).modal('show');
            });


            $("#coordinacion").change(function() {
                var id;
                id = $(this).val();
                bloqueointerface();
                location.href = '/adm_criteriosactividadesdocente?idc='+id;
            });

            $(".marcadas").click(function () {
                {#                var id = $(this).attr('idperiodo');#}
                {#                $("#itemspanel_adicionar_2").attr({'idperiodo': id});#}
                $("#itemspanel2").modal({backdrop:'static', width: '400'}).modal('show');
            });

            $("#itemspanel_cerrar_2").click(function () {
                $("#itemspanel2").modal('hide');
            });

            $("#itemspanel_adicionar_2").click(function () {
                var fecha_desde = $("#id_fecha_desde").val();
                var fecha_hasta = $("#id_fecha_hasta").val();
                $("#itemspanel2").modal('hide');
                if (fecha_desde){
                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: "/adm_criteriosactividadesdocente",
                        data: {"action": "marcadas", "fecha_desde": fecha_desde, "fecha_hasta": fecha_hasta },
                        success: function(data) {
                            $.unblockUI();
                            if (data.result=='ok'){

                                location.href = data.archivo;
                            } else {
                                smoke.alert(data.mensaje, function(e){
                                    $("#itemspanel2").modal({backdrop:'static', width: '400'}).modal('show');
                                }, {
                                    ok: "ok",
                                    classname: "custom-class"
                                });
                            }
                        },
                        error: function() {
                            $.unblockUI();
                            smoke.alert("Error de conexión.", function(e){
                                $("#itemspanel2").modal({backdrop:'static', width: '400'}).modal('show');
                            }, {
                                ok: "ok",
                                classname: "custom-class"
                            });
                        },
                        dataType: "json"
                    });
                }
            });


            $(".reportepares").click(function () {
                $("#itemspanelpares").modal({backdrop: 'static', width: '430'}).modal('show');
            });
            $("#generar_reportepares").click(function () {
                var idcarr = $("#cmbcarreras").val()
                console.log(idcarr)
                openwindow('POST', '/adm_criteriosactividadesdocente', {action:'pdfconfiguracionpares',idcarr:idcarr }, '_blank');
                $("#itemspanelpares").modal('hide');
            });
            $("#cerrar_reportepares").click(function () {
                $("#itemspanelpares").modal('hide');
            });

            $(".asistenciadocente").click(function () {
                $("#itemspanel3").modal({backdrop: 'static', width: '450'}).modal('show');
                $('#facultad_group2').fadeIn();

                $('#id_facultad2').empty().append('<option value="">----------</option>').val(0).trigger("change");


                $.ajax({
                    type: "GET",
                    url: `{{ request.path }}`,
                    data: {'action': 'cargar_facultad'},
                    success: function (data) {
                        if (data.result == 'ok') {
                            for (elemento in data.lista) {
                                $('#id_facultad2').append('<option value="' + data.lista[elemento].id + '">' + data.lista[elemento].nombre + '</option>');
                            }
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        smoke.alert("Error de conexion.");
                    },
                    dataType: "json"
                });


/*                } else {
                    smoke.alert("Seleccione una coordinación");
                }*/
            });

            $("#itemspanel_cerrar_3").click(function () {
                $("#itemspanel3").modal('hide');
                $(".incompletoaddpreguntas").hide();
            });

            $("#itemspanel_adicionar_3").click(function () {
                $(".incompletoaddpreguntas").hide();
                var ini = $("#id_fecha_inicio").val();
                var fin = $("#id_fecha_fin").val();
                var c=$("#id_facultad2").val();
                var tipoarchivo=$(".tipo_archivo").val();
                $("#itemspanel3").modal('hide');
                if (ini && fin && ini<=fin){
                    if(tipoarchivo==1){
                        openwindow('POST' ,'/adm_criteriosactividadesdocente', {action: 'reporteasistenciadocentepdf', 'ini':ini, 'fin':fin, 'c':c},'_blank');
                    }
                    else{
                        openwindow('POST' ,'/adm_criteriosactividadesdocente', {action: 'reporteasistenciadocente', 'ini':ini, 'fin':fin, 'c':c},'_blank');
                    }
                }
                else{
                    $(".incompletoaddpreguntas").show();
                }
            });

            $(".reportetutorias").click(function () {
                $("#itemspaneltutoria").modal({backdrop: 'static', width: '450'}).modal('show');
                $('#facultad_group3').fadeIn();

                $('#id_facultad3').empty().append('<option value="">----------</option>').val(0).trigger("change");


                $.ajax({
                    type: "GET",
                    url: `{{ request.path }}`,
                    data: {'action': 'cargar_facultad'},
                    success: function (data) {
                        if (data.result == 'ok') {
                            for (elemento in data.lista) {
                                $('#id_facultad3').append('<option value="' + data.lista[elemento].id + '">' + data.lista[elemento].nombre + '</option>');
                            }
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        smoke.alert("Error de conexion.");
                    },
                    dataType: "json"
                });

            });
            {#$("#id_facultad3").change(function () {#}
            {#    $('#id_carrera3').empty().append('<option value="">----------</option>').val(0).trigger("change");#}
            {#    if ($(this).val() > 0){#}
            {#         $.ajax({#}
            {#        type: "GET",#}
            {#        url: `{{ request.path }}`,#}
            {#        data: {'action': 'cargar_carrera', 'id': $(this).val()},#}
            {#        success: function (data) {#}
            {#            if (data.result === 'ok') {#}
            {#                for (elemento in data.lista) {#}
            {#                    $('#id_carrera3').append('<option value="' + data.lista[elemento].id + '">' + data.lista[elemento].nombre + '</option>');#}
            {#                }#}
            {#            } else {#}
            {#                smoke.alert(data.mensaje);#}
            {#            }#}
            {#        },#}
            {#        error: function () {#}
            {#            smoke.alert("Error de conexion.");#}
            {#        },#}
            {#        dataType: "json"#}
            {#    });#}
            {#    } return false#}
            {##}
            {##}
            {##}
            {# });#}

            $("#cerrar_tutoria").click(function () {
                $("#itemspaneltutoria").modal('hide');
            });

            $("#generar_tutoria").click(function () {
                var c=$("#id_facultad3").val();
                {#var carrera=$("#id_carrera3").val();#}
                if (c > 0) {
                    var tipoarchivo = $(".tipo_archivo_tutoria").val();
                    $("#itemspaneltutoria").modal('hide');
                    if (tipoarchivo == 1) {
                        openwindow('POST', '/adm_criteriosactividadesdocente', {action: 'reportepracticas_pdf','c': c}, '_blank');
                    }
                    else {
                        openwindow('POST', '/adm_criteriosactividadesdocente', {action: 'reportepracticas_excel', 'c': c}, '_blank');
                    }
                }else{
                    smoke.alert("Selecione Coordinación");
                }
            });

            $(".reporteseguimiento").click(function () {
                $("#itemspanelseguimiento").modal({backdrop: 'static', width: '450'}).modal('show');
                $('#facultad_group4').fadeIn();

                $('#id_facultad4').empty().append('<option value="">----------</option>').val(0).trigger("change");


                $.ajax({
                    type: "GET",
                    url: `{{ request.path }}`,
                    data: {'action': 'cargar_facultad'},
                    success: function (data) {
                        if (data.result == 'ok') {
                            for (elemento in data.lista) {
                                $('#id_facultad4').append('<option value="' + data.lista[elemento].id + '">' + data.lista[elemento].nombre + '</option>');
                            }
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        smoke.alert("Error de conexion.");
                    },
                    dataType: "json"
                });

            });

            $("#generar_seguimiento").click(function () {
                var c=$("#id_facultad4").val();
                if (c > 0) {
                    var tipoarchivo = $(".tipo_archivo_seguimiento").val();
                    $("#itemspanelseguimiento").modal('hide');
                    if (tipoarchivo == 1) {
                        openwindow('POST', '/adm_criteriosactividadesdocente', {action: 'reporteseguimiento_pdf','c': c}, '_blank');
                    }
                    else {
                        openwindow('POST', '/adm_criteriosactividadesdocente', {action: 'reporteseguimiento_excel', 'c': c}, '_blank');
                    }
                }else{
                    smoke.alert("Selecione Coordinación");
                }
            });

            $("#cerrar_seguimiento").click(function () {
                $("#itemspanelseguimiento").modal('hide');
            });


            $(".reporteformacion").click(function () {
                $("#itemsformacion").modal({backdrop: 'static', width: '450'}).modal('show');
                $('#facultad_group7').fadeIn();

                $('#id_facultad7').empty().append('<option value="">----------</option>').val(0).trigger("change");


                $.ajax({
                    type: "GET",
                    url: `{{ request.path }}`,
                    data: {'action': 'cargar_facultad'},
                    success: function (data) {
                        if (data.result == 'ok') {
                            for (elemento in data.lista) {
                                $('#id_facultad7').append('<option value="' + data.lista[elemento].id + '">' + data.lista[elemento].nombre + '</option>');
                            }
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        smoke.alert("Error de conexion.");
                    },
                    dataType: "json"
                });

 /*               var idc=$("#coordinacion").val();
                if (coordinacion){
                    openwindow('POST' ,'/adm_criteriosactividadesdocente', {action: 'formaciondocente_excel', 'idc':idc},'_blank');
                }
                else{
                    smoke.alert("Selecione Coordinación");
                }*/
            });

            $("#generar_formacion").click(function () {
                var idc=$("#id_facultad7").val();
                openwindow('POST' ,'/adm_criteriosactividadesdocente', {action: 'formaciondocente_excel', 'idc':idc},'_blank');
                $("#itemsformacion").modal('hide');
            });

            $("#cerrar_formacion").click(function () {
                $("#itemsformacion").modal('hide');
            });

            $(".reportearticulo").click(function () {
                $(".incompletoaddpreguntas").hide();
                $("#itemspanelarticulo").modal({backdrop: 'static', width: '445px'}).modal('show');
                $('#facultad_group5').fadeIn();

                $('#id_facultad5').empty().append('<option value="">----------</option>').val(0).trigger("change");

                $.ajax({
                    type: "GET",
                    url: `{{ request.path }}`,
                    data: {'action': 'cargar_facultad'},
                    success: function (data) {
                        if (data.result == 'ok') {
                            for (elemento in data.lista) {
                                $('#id_facultad5').append('<option value="' + data.lista[elemento].id + '">' + data.lista[elemento].nombre + '</option>');
                            }
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        smoke.alert("Error de conexion.");
                    },
                    dataType: "json"
                });

            });

            $(".generarinformearticulo").click(function () {
                var valid = $("#formArticulo").validationEngine('validate');
                if (valid) {
                    $('.bootstrap-timepicker-widget').css({"display": "none"});
                    bloqueointerface();
                    $('.controls input').each(function () {
                        if ($(this).attr('type') == 'text') {
                            $(this).val($(this).val().trim());
                        }
                        if ($(this).attr('type') != 'file') {
                            if ($(this).css('text-transform') == 'uppercase') {
                                if ($(this).attr('type') != 'password') {
                                    $(this).val($(this).val().toUpperCase());
                                }
                            }
                        }
                    });
                    $.unblockUI();
                    $("#itemspanelarticulo").modal("hide");
                    openwindow('POST', '/adm_criteriosactividadesdocente', {action: 'reportearticuloexcel','idc': $("#id_facultad5").val(),'anio':$("#id_anio").val()}, '_blank');
                }
                else {
                    setTimeout(function() { $('.help-text').html(""); }, 8000);
                    $.unblockUI();
                }
            });

            $(".cancelarinformearticulo").click(function() {
                $("#itemspanelarticulo").modal("hide");
            });

            $(".reporteactividadespendientes").click(function () {
                $(".incompletoaddpreguntas").hide();
                $("#itemspanelactividadespendientes").modal({backdrop: 'static', width: '435px'}).modal('show');
            });
            $("#generar_reporteactividades").click(function () {
                let carrera =  $("#cmbcarreraspregradovirtual").val();
                if(carrera>0){
                    openwindow('POST' ,'/adm_criteriosactividadesdocente', {action: 'reporteactividadespendientes', idcarrera: carrera },'_blank');
                }
                $('#itemspanelactividadespendientes').modal('hide');
            });
            $("#cerrar_reporteactividades").click(function(){
                $('#itemspanelactividadespendientes').modal('hide');
                $(".incompletoaddpreguntas").hide();
            });


            $(".informeactividades").click(function () {
                $(".incompletoinformeactividades").hide();
                $("#itemspanelinformeactividades").modal({backdrop: 'static', width: '430px'}).modal('show');
            });

            $("#generar_informeactividades").click(function () {
                var carrera =  $("#cbocarreraactividades").val();
                if(carrera>0){
                    openwindow('POST' ,'/adm_criteriosactividadesdocente', {action: 'informe_actividades_autor', idcarrera: carrera },'_blank');
                }
                $('#itemspanelinformeactividades').modal('hide');
            });
            $("#cerrar_informeactividades").click(function(){
                $('#itemspanelinformeactividades').modal('hide');
                $(".incompletoinformeactividades").hide();
            });

            $('#reporte_asignacion_horas_tutorias').on('click', function () {
                $('#modal_reportes').modal({backdrop: 'static', width: '450px'}).modal('show');
                {#$('#facultad_group').fadeIn();#}
                $('#periodo_group').fadeIn();

               /* $('#id_facultad').empty().append('<option value="">----------</option>').val(0).trigger("change");
                $.ajax({
                    type: "GET",
                    url: `{{ request.path }}`,
                    data: {'action': 'cargar_facultad'},
                    success: function (data) {
                        if (data.result == 'ok') {
                            for (elemento in data.lista) {
                                $('#id_facultad').append('<option value="' + data.lista[elemento].id + '">' + data.lista[elemento].nombre + '</option>');
                            }
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        smoke.alert("Error de conexion.");
                    },
                    dataType: "json"
                });*/

                $('#id_periodo').empty().append('<option value="">----------</option>').val(0).trigger("change");
                $.ajax({
                    type: "GET",
                    url: `{{ request.path }}`,
                    data: {'action': 'cargar_periodo'},
                    success: function (data) {
                        if (data.result == 'ok') {
                            for (elemento in data.lista) {
                                $('#id_periodo').append('<option value="' + data.lista[elemento].id + '">' + data.lista[elemento].nombre + '</option>');
                            }
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        smoke.alert("Error de conexion.");
                    },
                    dataType: "json"
                });

            /*    $('#download_report').click(function () {
                let facultad = $('#id_facultad').val();

                //bloqueointerface();
                let facultad_nombre = $('#id_facultad').find('option:selected').text();
                let url = '{{ request.path }}?action=reportehoraseingresos';
                console.log(facultad);
                console.log(facultad_nombre);
                url += '&facultad=' + facultad + '&facultad_nombre=' + facultad_nombre;
                window.location.href = url


                $('#modal_reportes').modal('hide');
            });*/

                $('#download_report').click(function () {
                let periodo = $('#id_periodo').val();

                //bloqueointerface();
                let periodo_nombre = $('#id_periodo').find('option:selected').text();
                let url = '{{ request.path }}?action=reportehoraseingresos';
                console.log(periodo);
                console.log(periodo_nombre);
                url += '&periodo=' + periodo + '&periodo_nombre=' + periodo_nombre;
                window.location.href = url


                $('#modal_reportes').modal('hide');
            });

            $('#modal_reportes').on('hidden', function () {
                {#$('#facultad_group').val('');#}
                $('#periodo_group').val('');
            });

            });

            $(".imprimirproductoexcel_filtros").click(function () {
/*                var coordinacion =  $("#coordinacion").val();
                openwindow('GET' ,'/adm_criteriosactividadesdocente', {action: 'imprimirproductoexcel_filtros', coordinacion: coordinacion },'_blank');*/
                $('#modal_reportes3').modal({backdrop: 'static', width: '450px'}).modal('show');
                $('#facultad_group6').fadeIn();

                $('#id_facultad6').empty().append('<option value="">----------</option>').val(0).trigger("change");

                $.ajax({
                    type: "GET",
                    url: `{{ request.path }}`,
                    data: {'action': 'cargar_facultad'},
                    success: function (data) {
                        if (data.result == 'ok') {
                            for (elemento in data.lista) {
                                $('#id_facultad6').append('<option value="' + data.lista[elemento].id + '">' + data.lista[elemento].nombre + '</option>');
                            }
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        smoke.alert("Error de conexion.");
                    },
                    dataType: "json"
                });
            });

            $("#generar_producto").click(function () {
                var coordinacion=$("#id_facultad6").val();
                openwindow('POST' ,'/adm_criteriosactividadesdocente', {action: 'imprimirproductoexcel_filtros', 'coordinacion': coordinacion },'_blank');
                $('#modal_reportes3').modal('hide')
            });

            $("#cerrar_producto").click(function () {
                $("#modal_reportes3").modal('hide');
            });
/*
                $('#download_report3').click(function () {
                    let coordinacion = $('#id_facultad6').val();

                    //bloqueointerface();
                    {#let periodo_nombre = $('#id_periodo2').find('option:selected').text();#}
                    let url = '{{ request.path }}?action=imprimirproductoexcel_filtros';
                    alert(url);
                    url += '&coordinacion=' + coordinacion;
                    window.location.href = url


                    $('#modal_reportes3').modal('hide');

                });

            $('#modal_reportes3').on('hidden', function () {
                $('#facultad_group6').val('');
            });
            });*/

            $('.reporte_ejecucion_tutorias').click(function () {
                $('#modal_reportes2').modal({backdrop: 'static', width: '450px'}).modal('show');
                $('#estado_group2').fadeIn();

            });

            $('#download_report2').click(function () {
                var estado = $('#id_estado2').val();
                var fdesde = $('#fecha_desde').val();
                var fhasta = $('#fecha_hasta').val();
                window.location.href = '/adm_criteriosactividadesdocente?action=reportetutoria&estado='+estado+'&fdesde='+fdesde+'&fhasta='+fhasta
                {#openwindow('GET' ,'/adm_criteriosactividadesdocente', {action: 'reportetutoria', 'estado':estado, 'fdesde': fdesde, 'fhasta': fhasta},'_blank');#}
               $('#modal_reportes2').modal('hide');
            });

            /*
            $('#download_report2').click(function () {
                var periodo = $('#id_periodo2').val();
                let estado = $('#id_estado2').val();

                //bloqueointerface();
                {#let periodo_nombre = $('#id_periodo2').find('option:selected').text();#}
                let url = '{{ request.path }}?action=reportetutoria';
                console.log(periodo);
                console.log(estado);
                url += '&periodo=' + periodo + '&estado=' + estado;
                window.location.href = url


                $('#modal_reportes2').modal('hide');

                });
*/
/*
            $('#modal_reportes2').on('hidden', function () {
                $('#periodo_group2').val('');
                $('#estado_group2').val('');
            });
            });*/


            $('.reporte_actividades').click(function (e) {
                e.preventDefault();
                $('#itemsactividadeshoras').modal({backdrop: 'static', width: '450px'}).modal('show');

                $('#facultad_group8').fadeIn();

                $('#id_facultad8').empty().append('<option value="">----------</option>').val(0).trigger("change");

                $.ajax({
                    type: "GET",
                    url: `{{ request.path }}`,
                    data: {'action': 'cargar_facultad'},
                    success: function (data) {
                        if (data.result == 'ok') {
                            for (elemento in data.lista) {
                                $('#id_facultad8').append('<option value="' + data.lista[elemento].id + '">' + data.lista[elemento].nombre + '</option>');
                            }
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        smoke.alert("Error de conexion.");
                    },
                    dataType: "json"
                });

            });

            $(".generar_reporte_actividad").click(function (e) {
/*                var estado = null, epunemi=null, key_activo=true, key_epunemi=true;
                let estado_val = $('#activo_id').val(), epunemi_val=$('#epunemi_id').val();
                if (epunemi_val === '0'){epunemi = true; key_epunemi=false} else if  (epunemi_val === '1'){epunemi = false; key_epunemi=false}
                if (estado_val === '0'){estado = true; key_activo=false} else if  (estado_val === '1'){estado = false; key_activo=false}*/
                var variables = {'action': 'run', 'rt': $('#formato').val(), 'rid': 170,
                    'coordinacion': $('#id_facultad8').val(), 'periodo': {{periodosesion.pk}}
                };
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/reportes",
                    data: variables,
                    success: function (data) {
                        $.unblockUI();
                        if (data.result === 'ok') {
                            $('#itemsactividadeshoras').modal('hide');
                            window.open(data.reportfile, '_blank');
                        } else {
                            smoke.alert('Error al generar el reporte');
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });

            });


            $('.reporte_marcadas_docentes').click(function () {
                $('#modal_reportes4').modal({backdrop: 'static', width: '450px'}).modal('show');
                $('#facultad_group9').fadeIn();
                $('#periodo_group3').fadeIn();

                $('#id_facultad9').empty().append('<option value="">----------</option>').val(0).trigger("change");

                $.ajax({
                    type: "GET",
                    url: `{{ request.path }}`,
                    data: {'action': 'cargar_facultad'},
                    success: function (data) {
                        if (data.result == 'ok') {
                            for (elemento in data.lista) {
                                $('#id_facultad9').append('<option value="' + data.lista[elemento].id + '">' + data.lista[elemento].nombre + '</option>');
                            }
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        smoke.alert("Error de conexion.");
                    },
                    dataType: "json"
                });

                $('#id_periodo3').empty().append('<option value="">----------</option>').val(0).trigger("change");

                $.ajax({
                    type: "GET",
                    url: `{{ request.path }}`,
                    data: {'action': 'cargar_periodo'},
                    success: function (data) {
                        if (data.result == 'ok') {
                            for (elemento in data.lista) {
                                $('#id_periodo3').append('<option value="' + data.lista[elemento].id + '">' + data.lista[elemento].tipo +' '+data.lista[elemento].nombre + ' - ' + data.lista[elemento].id + '</option>');
                            }
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        smoke.alert("Error de conexion.");
                    },
                    dataType: "json"
                });
            });

            $('#descargar_reporte_marcadas').click(function () {
                var fdesde = $('#fecha_desde_1').val();
                var fhasta = $('#fecha_hasta_1').val();
                var peri = $('#id_periodo3').val();
                var cordi = $('#id_facultad9').val();
                {#window.location.href = '/adm_criteriosactividadesdocente?action=reportemarcadasprofesor&fdesde=' + fdesde + '&fhasta=' + fhasta + '&periodo=' + peri + '&coordinacion=' + cordi#}
                openwindow('GET' ,'/adm_criteriosactividadesdocente', {action: 'reportemarcadasprofesor', 'fdesde': fdesde, 'fhasta': fhasta, 'periodo':peri, 'coordinacion':cordi},'_blank');
                $('#modal_reportes4').modal('hide');
            });

            $('#btn_reporte_cumplimiento').click(function(){
                $("#reportecumplimiento").modal({backdrop:'static', width: '290'}).modal('show');
                $.unblockUI()
            });

            $("#btn_totalactividadesdocentesmaterias_nuevo").click(function () {
                $.post("{{ request.path }}", {'action': 'totalactividadesdocentesmaterias_nuevo'}, function (data) {
                    if (data.result) {
                        $('#btnNotificacionTareas').html(data.btn_notificaciones);
                        mensajeSuccess(data.mensaje)
                    } else {
                        mensajeWarning(data.mensaje)
                    }
                }, 'json');
            });
            
            $("#btn_titulosacademicosdocentes").click(function () {
                $.post("{{ request.path }}", {'action': 'titulosacaademicosdocentes'}, function (data) {
                    if (data.result) {
                        $('#btnNotificacionTareas').html(data.btn_notificaciones);
                        mensajeSuccess(data.mensaje)
                    } else {
                        mensajeWarning(data.mensaje)
                    }
                }, 'json');
            });

            $("#btn_nuevoreporte").click(function () {
                $.post("{{ request.path }}", {'action': 'nuevoreporte'}, function (data) {
                    if (data.result) {
                        $('#btnNotificacionTareas').html(data.btn_notificaciones);
                        mensajeSuccess(data.mensaje)
                    } else {
                        mensajeWarning(data.mensaje)
                    }
                }, 'json');
            });

        });

        function pdfafinidad(){
            openwindow('POST' ,'/adm_criteriosactividadesdocente', {action:'pdflistaafinidad'}, '_blank');
        }
        function pdfafinidadfacultades(){
            openwindow('POST' ,'/adm_criteriosactividadesdocente', {action:'pdflistaafinidadfacultades'}, '_blank');
        }
        function imprimirinformeadm(){
            openwindow('POST' ,'/adm_criteriosactividadesdocente', {action:'reporterecursosadm'}, '_blank');
        }

    </script>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/js/i18n/es.js"></script>

{% endblock %}
{% block atras %}/{% endblock %}
{% block canvas %}
    <div class="modal fade static" id="itemreporteform" style="display: none;">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            <h4><i class="fa fa-list"></i> <b class="paneltitlereporteform">FORMULARIO MODAL</b></h4>
        </div>
        <div class="modal-body">
            <form autocomplete="off" method="get"
                  enctype="multipart/form-data" action="{{ request.path }}">
                {% csrf_token %}
                <div class="row-fluid panelreporteform">
                </div>
            </form>
        </div>
        <div class="modal-footer" id="footermodalreporte">
            <a href="javascript:;" class="btn btn-default" data-dismiss="modal"><i class="fa fa-window-close"></i> Cerrar</a>
        </div>
    </div>


    <div class='row-fluid'>
        <div class='span12'>
            <h4>{{ title }}</h4>
        </div>
    </div>

<div id="no-more-tables"><!-- inicio no more tables-->
    <div class='row-fluid'>
        <div class='span12'>
            <div class="tabbable">
                    <div class="tab-pane">
                        <div class="row-fluid">
                            <table class="table table-bordered table-striped filterable">
                                <thead>
                                <tr>
                                    <th style="width:90px;" title="Archivo">Archivo</th>
                                    <th title="Nombre del reporte">Nombre del reporte</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td><a class="btn btn-warning" href="/adm_criteriosactividadesdocente?action=excelldistributivo&periodo={{ periodo.id|encrypt }}" target="_blank"><i class="fa fa-download"></i> Descargar</a></td>
                                    <td>Docentes del distributivo</td>
                                </tr>
                                <tr>
                                    <td><a class="btn btn-warning reportepares" href="javascript:;"><i class="fa fa-download"></i> Descargar</a></td>
                                    <td>Configuración de pares</td>
                                </tr>
                                <tr>
                                    <td><a class="btn btn-warning" href="/adm_criteriosactividadesdocente?action=totalactividadesdocentes&periodo={{ periodo.id }}" target="_blank"><i class="fa fa-download"></i> Descargar</a></td>
                                    <td>Actividades y horas de los docentes</td>
                                </tr>
                                <tr>
                                    <td><a class="btn btn-warning"  id="btn_nuevoreporte"><i class="fa fa-download"></i> Descargar</a></td>
                                    {#                                           href="/adm_criteriosactividadesdocente?action=totalactividadesdocentesmaterias&periodo={{ periodo.id }}"#}

                                    <td>Criterios, horas, asignaturas, formación de los docentes</td>
                                </tr>
                                <tr>
                                    <td><a class="btn btn-warning"  id="btn_totalactividadesdocentesmaterias_nuevo"
{#                                           href="/adm_criteriosactividadesdocente?action=totalactividadesdocentesmaterias_nuevo&periodo={{ periodo.id }}"#}
                                    ><i class="fa fa-download"></i> Descargar</a></td>
                                    <td>Criterios, actividades, horas, asignaturas, formación de los docentes</td>
                                </tr>
                                
                                <tr>
                                    <td><a class="btn btn-warning"  id="btn_titulosacademicosdocentes"
{#                                           href="/adm_criteriosactividadesdocente?action=totalactividadesdocentesmaterias_nuevo&periodo={{ periodo.id }}"#}
                                    ><i class="fa fa-download"></i> Descargar</a></td>
                                    <td>Reporte de Docentes con Registro de Títulos Académicos</td>
                                </tr>

                                <tr>
                                    <td><a class="btn btn-warning" href="/adm_criteriosactividadesdocente?action=asignacion_carrera_distributivo_docentes&periodo={{ periodo.id }}" target="_blank"><i class="fa fa-download"></i> Descargar</a></td>
                                    <td>Asignación de carreras</td>
                                </tr>
                                <tr>
                                    <td><a class="btn btn-warning" href="/adm_criteriosactividadesdocente?action=totalactividadesdocentescarrera&periodo={{ periodo.id }}" target="_blank"><i class="fa fa-download"></i> Descargar</a></td>
                                    <td>Reporte de horas de titulación</td>
                                </tr>
                                <tr>
                                    <td><a class="btn btn-warning" href="/adm_criteriosactividadesdocente?action=totalactividadesdocentesmaterias_conevidencias&periodo={{ periodo.id }}" target="_blank"><i class="fa fa-download"></i> Descargar</a></td>
                                    <td>Evidencias de las actividades asignadas</td>
                                </tr>
{#                                <tr>#}
{#                                    {% if reporte_2 %}#}
{#                                    <td><a class="btn btn-warning reportedirecto" href="javascript:;" tipos="{{ reporte_2.tiporeporte }}" nhref="/reportes?action=run&n={{ reporte_2.nombre }}&coordinacion={{ idc }}&periodo={{ periodo.id }}" title="Imprimir hoja de vida"><i class="fa fa-download"></i> Descargar</a></td>#}
{#                                    <td>Reporte en PDF actividades y horas de los docentes por facultad (170)</td>#}
{#                                    {% endif %}#}
{#                                </tr>#}
                                <tr>
                                    <td><a class="btn btn-warning reporte_actividades" href="javascript:;"><i class="fa fa-download"></i> Descargar</a></td>
                                    <td>Reporte en PDF actividades y horas de los docentes por facultad (170)</td>
                                </tr>
{#                                <tr>#}
{#                                    <td><a class="btn btn-warning asistenciadocente" href="javascript:;"><i class="fa fa-download"></i> Descargar</a></td>#}
{#                                    <td>Informe mensual de actividades docente</td>#}
{#                                </tr>#}
                                <tr>
                                    <td><a class="btn btn-warning reportetutorias" href="javascript:;"><i class="fa fa-download"></i> Descargar</a></td>
                                    <td>Reporte de Tutorías</td>
                                </tr>
                                <tr>
                                    <td><a class="btn btn-warning" href="/adm_criteriosactividadesdocente?action=tutoriasfacultadespdf&periodo={{ periodo.id }}" target="_blank"><i class="fa fa-download"></i> Descargar</a></td>
                                    <td>Reporte de Tutorías Facultades(pdf).</td>
                                </tr>
                                <tr>
                                    <td><a class="btn btn-warning" href="/adm_criteriosactividadesdocente?action=excelltutoriasfacultades&periodo={{ periodo.id|encrypt }}" target="_blank"><i class="fa fa-download"></i> Descargar</a>
                                    <td>Reporte de Tutorías Facultades(excel)</td>
                                    </td>
                                </tr>
                                <tr>
                                    <td><a class="btn btn-warning reporteseguimiento" href="javascript:;"><i class="fa fa-download"></i> Descargar</a></td>
                                    <td>Reporte de seguimientos de ingreso de calificaciones</td>
                                </tr>
                                <tr>
                                    <td><a class="btn btn-warning reporteformacion" href="javascript:;"><i class="fa fa-download"></i> Descargar</a></td>
                                    <td>Formación Docentes</td>
                                </tr>
                                <tr>
                                    <td><a class="btn btn-warning reportearticulo" href="javascript:;"><i class="fa fa-download"></i> Descargar</a></td>
                                    <td>Articulos de los profesores</td>
                                </tr>
                                <tr>
                                    <td><a onclick="pdfafinidad()" href="javascript:;" class="btn btn-warning "><i class="fa fa-download"></i> Descargar</a></td>
                                    <td>Afinidad de los profesores</td>
                                </tr>
                                <tr>
                                    <td><a onclick="pdfafinidadfacultades()" class="btn btn-warning " href="javascript:;"><i class="fa fa-download"></i> Descargar</a></td>
                                    <td>Afinidad facultades de los profesores</td>
                                </tr>
                                <tr>
                                    <td><a class="btn btn-warning imprimirproductoexcel_filtros" href="javascript:;"><i class="fa fa-download"></i> Descargar</a></td>
                                    <td>Excel de productos de investigación docente</td>
                                </tr>
                                <tr>
                                    <td><a class="btn btn-warning reporteactividadespendientes" href="javascript:;"><i class="fa fa-download"></i> Descargar</a></td>
                                    <td>Actividades pendientes</td>
                                </tr>
                                <tr>
                                    <td><a class="btn btn-warning informeactividades" href="javascript:;"><i class="fa fa-download"></i> Descargar</a></td>
                                    <td>Informe de Actividades de Recursos de Aprendizaje</td>
                                </tr>
                                <tr>
                                    <td><a class="btn btn-warning bloqueo_pantalla" href="/adm_criteriosactividadesdocente?action=preferenciasactividades"><i class="fa fa-download"></i> Descargar</a></td>
                                    <td>Preferencia Actividades</td>
                                </tr>
                                <tr>
                                    <td><a class="btn btn-warning" href="/adm_criteriosactividadesdocente?action=totalpreferenciaspregrado" target="_blank"><i class="fa fa-download"></i> Descargar</a></td>
                                    <td>Preferencia Pregrado</td>
                                </tr>
                                <tr>
                                    <td><a class="btn btn-warning" href="/adm_criteriosactividadesdocente?action=totalpreferenciasposgrado" target="_blank"><i class="fa fa-download"></i> Descargar</a></td>
                                    <td>Preferencia Posgrado</td>
                                </tr>
                                <tr>
                                    <td><a class="btn btn-warning" href="/adm_criteriosactividadesdocente?action=totalpreferenciasactividades" target="_blank"><i class="fa fa-download"></i> Descargar</a></td>
                                    <td>Preferencia Actividades</td>
                                </tr>
                                <tr>
                                    <td><a class="btn btn-warning" href="/adm_criteriosactividadesdocente?action=totalpreferenciashorarios" target="_blank"><i class="fa fa-download"></i> Descargar</a></td>
                                    <td>Preferencia Horarios</td>
                                </tr>
                                <tr>
                                    <td><a class="btn btn-warning" onclick="imprimirinformeadm()" href="javascript:;"><i class="fa fa-download"></i> Descargar</a></td>
                                    <td>Informe de recursos de sílabos tutores administrativos</td>
                                </tr>
                                <tr>
                                    <td><a class="btn btn-warning" id="reporte_asignacion_horas_tutorias"><i class="fa fa-download"></i> Descargar</a></td>
                                    <td>Reporte de asignación de horas e ingreso de tutorías académicas</td>
                                </tr>
                                <tr>
                                    <td><a class="btn btn-warning reporte_ejecucion_tutorias"  href="javascript:;"><i class="fa fa-download"></i> Descargar</a></td>
                                    <td>Reporte de ejecución de tutorías</td>
                                </tr>
                                <tr>
{#                                    <td><a class="btn btn-warning reporte_distributivo_docente"  href="javascript:;"><i class="fa fa-download"></i> Descargar</a></td>#}
                                    <td><a class="btn btn-warning" href="/adm_criteriosactividadesdocente?action=reportedistributivo" target="_blank"><i class="fa fa-download"></i> Descargar</a></td>
                                    <td>Reporte de distributivo docentes </td>
                                </tr>
                                <tr>
                                    <td>
                                    <a class="btn btn-warning" href="/adm_criteriosactividadesdocente?action=reportehorasnoaprobadas" target="_blank"><i class="fa fa-download"></i> Descargar</a>
                                    </td>
                                    <td>Reporte horas de Actividades</td>
                                </tr>
                                <tr>
                                    <td>
                                    <a class="btn btn-warning" href="/adm_criteriosactividadesdocente?action=reportehorascriterios" target="_blank"><i class="fa fa-download"></i> Descargar</a>
                                    </td>
                                    <td>Reporte horas de Actividades (Por Criterio)</td>
                                </tr>
                                <tr>
                                    <td>
                                        <a class="btn btn-warning reporte_marcadas_docentes"  href="javascript:;"><i class="fa fa-download"></i> Descargar</a>
{#                                        <a class="btn btn-warning" href="/adm_criteriosactividadesdocente?action=reportemarcadasprofesor" target="_blank"><i class="fa fa-download"></i> Descargar</a>#}
                                    </td>
                                    <td>Reporte de Marcadas Docentes</td>
                                </tr>
                                <tr>
                                    <td>
                                    <a class="btn btn-warning" href="/adm_criteriosactividadesdocente?action=reportedocentes_con_estudiantes_discapacitados" target="_blank"><i class="fa fa-download"></i> Descargar</a>
                                    </td>
                                    <td>Reporte  de Docentes con estudiantes con discapacidad</td>
                                </tr>
                                {% if es_decano or es_director_carr %}
                                    <tr>
    {#                                    <td>#}
    {#                                    <a class="btn btn-warning" href="/adm_criteriosactividadesdocente?action=reportepracticasenfermeria_pdf" target="_blank"><i class="fa fa-download"></i> Descargar</a>#}
    {#                                    </td>#}
    {#                                    <td>Reporte de Tutorías Enfermería</td>#}
                                        <td>
                                        {% if es_decano %}
                                            <a class="btn btn-warning imprimirinformetutorias" href="javascript:void(0)"><i class="fa fa-download"></i> Descargar</a>
                                        {% else %}
                                            <a class="btn btn-warning" href="/adm_criteriosactividadesdocente?action=reportepracticasgeneral_pdf" target="_blank"><i class="fa fa-download"></i> Descargar</a>
                                        {% endif %}
                                        </td>
                                        <td>Reporte Consolidado de Tutorías Académicas</td>
                                    </tr>
                                {% endif %}
                                <tr>
                                    <td>
                                        <li><a href="javascript:;" id="btn_reporte_cumplimiento" class="btn btn-warning bloqueo_pantalla"><i class='fa fa-download'></i> Descargar</a></li>
                                    </td>
                                    <td>
                                        Reporte general de porcentaje de cumplimiento en informe mensual de actividades
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!--- =============== PESTAñA CACES / AUTH: ROALEX =============== --->
{##}
{#                    <div class="tab-pane" id="4">#}
{#                        <div class="row-fluid">#}
{#                            <table class="table table-bordered">#}
{#                                <thead>#}
{#                                <tr>#}
{#                                    <th>Nombre de reporte</th>#}
{#                                    <th style="width:120px;">Archivo</th>#}
{#                                </tr>#}
{#                                </thead>#}
{#                                <tbody>#}
{#                                <tr>#}
{#                                    <td>Cargos académicos directivos</td>#}
{#                                    <td style='text-align:center'><a class="btn btn-warning" id="filtro_sexo"><i class="fa fa-download"></i> Descargar</a></td>#}
{#                                </tr>#}
{##}
{#                                <tr>#}
{#                                    <td>Profesores-contratos</td>#}
{#                                    <td style='text-align:center'><a href='/descargaarchivo?action=profesores_contratos' class="btn btn-warning"><i class="fa fa-download"></i> Descargar</a></td>#}
{#                                </tr>#}
{##}
{#                                <tr>#}
{#                                    <td>Profesores-formación profesional</td>#}
{#                                    <td style='text-align:center'><a class="btn btn-warning" id="filtro_formacion"><i class="fa fa-download"></i> Descargar</a></td>#}
{#                                </tr>#}
{##}
{#                                <tr>#}
{#                                    <td>Reporte de ponencias realizadas por los docentes</td>#}
{#                                    <td style='text-align:center'><a class="btn btn-warning" id="btn_reporte_ponencias"><i class="fa fa-download"></i> Descargar</a></td>#}
{#                                </tr>#}
{##}
{#                                <tr>#}
{#                                    <td>Reporte de los docentes que participan en publicaciones</td>#}
{#                                    <td style='text-align:center'><a class="btn btn-warning" id="btn_reporte_publicaciones"><i class="fa fa-download"></i> Descargar</a></td>#}
{#                                </tr>#}
{##}
{#                                <tr>#}
{#                                    <td>Reporte de los docentes que participan en proyectos de investigación</td>#}
{#                                    <td style='text-align:center'><a class="btn btn-warning" id="btn_reporte_proyectos"><i class="fa fa-download"></i> Descargar</a></td>#}
{#                                </tr>#}
{##}
{#                                <tr>#}
{#                                    <td>Reporte de informe de cumplimiento de los proyectos</td>#}
{#                                    <td style='text-align:center'><a class="btn btn-warning" id="btn_cumplimiento"><i class="fa fa-download"></i> Descargar</a></td>#}
{#                                </tr>#}
{##}
{#                                </tbody>#}
{#                            </table>#}
{#                        </div>#}
{#                    </div>#}

{#                    <div class="modal fade static" id="modal_sexo" style="display: none;">#}
{#                        <div class="modal-header">#}
{#                            <h3 class="paneltitle">Filtrar por sexo</h3>#}
{#                        </div>#}
{#                        <div class="modal-body panelbody">#}
{#                            <div class="row-fluid">#}
{#                                <div class="span12">#}
{#                                    <div class="form-group" id="sexo_group" style="display: none">#}
{#                                        <select id="id_sexo" name="Sexo">#}
{#                                            <option value="0">TODOS</option>#}
{#                                            <option value="1">MASCULINO</option>#}
{#                                            <option value="2">FEMENINO</option>#}
{#                                        </select>#}
{#                                    </div>#}
{#                                </div>#}
{#                            </div>#}
{#                        </div>#}
{#                        <div class="modal-footer">#}
{#                            <table class="pull-right">#}
{#                                <tr>#}
{#                                    <td><a class="btn btn-success" id="download_report_cargos_academicos_directivos"><i class="fa fa-download"></i>#}
{#                                        Descargar Reporte</a>#}
{#                                    </td>#}
{#                                    <td><a class="btn btn-danger" data-dismiss="modal"><i class="fa fa-close"></i>#}
{#                                        Cerrar</a></td>#}
{#                                </tr>#}
{#                            </table>#}
{#                        </div>#}
{#                    </div>#}
{##}
{##}
{#                    <div class="modal fade static" id="modal_formacion" style="display: none;">#}
{#                        <div class="modal-header">#}
{#                            <h3 class="paneltitle">Filtrar por formación</h3>#}
{#                        </div>#}
{#                        <div class="modal-body panelbody">#}
{#                            <div class="row-fluid">#}
{#                                <div class="span12">#}
{#                                    <div class="form-group" id="formacion_group" style="display: none">#}
{#                                        <select id="id_formacion" name="Formación">#}
{#                                            <option value="1">EN CURSO</option>#}
{#                                            <option value="2">TERMINADA</option>#}
{#                                        </select>#}
{#                                    </div>#}
{#                                </div>#}
{#                            </div>#}
{#                        </div>#}
{#                        <div class="modal-footer">#}
{#                            <table class="pull-right">#}
{#                                <tr>#}
{#                                    <td><a class="btn btn-success" id="download_report_profesores_formacion"><i class="fa fa-download"></i>#}
{#                                        Descargar Reporte</a>#}
{#                                    </td>#}
{#                                    <td><a class="btn btn-danger" data-dismiss="modal"><i class="fa fa-close"></i>#}
{#                                        Cerrar</a></td>#}
{#                                </tr>#}
{#                            </table>#}
{#                        </div>#}
{#                    </div>#}
{##}
{#                </div>#}
{#            </div>#}
{##}
{#        </div>#}
{#    </div>#}

    {# MODALES #}

    <div class="modal fade static" id="itemspanel2" style="display: none;">
        <div class="modal-header">
            <h4 class="paneltitle">Reporte Marcadas Docente</h4>
        </div>
        <div class="modal-body panelbody">
            <div class="row-fluid">
                <form id="form3" class="form-horizontal form-modal" style="width: 370px; margin-bottom: 0">
                    <div style="width: 150px">
                        <p>Desde: <input type="text" id="id_fecha_desde"></p>
                        <p>Hastta: <input type="text" id="id_fecha_hasta"></p>
                    </div>
                </form>
            </div>
        </div>
        <div class="modal-footer">
            <a href="javascript:;" class="btn btn-danger" id="itemspanel_adicionar_2"><i class="fa fa-plus"></i> Procesar</a>
            <a href="javascript:;" class="btn btn-info" id="itemspanel_cerrar_2"> Cerrar</a>
        </div>
    </div>

    <div class="modal fade static" id="itemspanel3" style="display: none;">
        <div class="modal-header">
            <h4 class="paneltitle">Reporte Asistencia Docente</h4>
        </div>
        <div class="modal-body panelbody">
            <div class="alert alert-danger invalidofechas" style="display: none">
                <i class="fa fa-info-sign"></i> Seleccione un rango de fechas valida para continuar...!!!
            </div>
            <div style="text-align: left">
                <span> <b> Tipo de archivo: </b>  </span><br>
                <select style="width: 200px" class="no-margin-bottom tipo_archivo">
                    <option  value="1">Archivo Pdf</option>
                    <option  value="2">Archivo Excel</option>
                </select>
                <br><br>
                <div class="form-group" id="facultad_group2" style="display: none">
                    <span> <b> Coordinación: </b>  </span>
                       <form class="form-search">
                           <select id="id_facultad2" name="Facultad" style="width: 415px;">
                               <option value="0">--------</option>
                           </select>
                       </form>
                       <br>
                </div>
                <span> <b> Rango de fechas: </b>  </span><br>
                <input placeholder="Fecha desde" type="text" value="{{ fechainicio }}" name="fini" id="id_fecha_inicio" style="width: 100px">
                <input placeholder="Fecha hasta" type="text" value="{{ fechafin }}" name="ffin" id="id_fecha_fin" style="width: 100px"><br>
            </div>
        </div>
        <div class="modal-footer" style="text-align: right">
            <a href="javascript:;" class="btn btn-info" id="itemspanel_adicionar_3"><i class="fa fa-plus"></i> Procesar</a>
            <a href="javascript:;" class="btn btn-danger" id="itemspanel_cerrar_3"><i class="fa fa-close"></i> Cerrar</a>
        </div>
    </div>

    <div class="modal fade static" id="itemspanelpares" style="display: none;">
        <div class="modal-header">
            <h4 class="paneltitle">Reporte Pares</h4>
        </div>
        <div class="modal-body panelbody">
            <div class="alert alert-danger invalidofechas" style="display: none">
                <i class="fa fa-info-sign"></i> Seleccione
            </div>
            <div style="text-align: left;">
                <span> <b> Seleccione una coordinación: </b>  </span>
                <select style="width: 400px" class="no-margin-bottom" name="cmbcarreras" id="cmbcarreras">
                    {% for listacar in listadocarreras %}
                        <option  value="{{ listacar.id }}">{{ listacar }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        <div class="modal-footer" style="text-align: right">
            <a href="javascript:;" class="btn btn-info" id="generar_reportepares"><i class="fa fa-plus"></i> Generar</a>
            <a href="javascript:;" class="btn btn-danger" id="cerrar_reportepares"><i class="fa fa-close"></i> Cerrar</a>
        </div>
    </div>


    <div class="modal fade static" id="itemspanelactividadespendientes" style="display: none;">
        <div class="modal-header">
            <h4 class="paneltitle">Reporte actividades pendientes</h4>
        </div>
        <div class="modal-body panelbody">
            <div class="alert alert-danger invalidofechas" style="display: none">
                <i class="fa fa-info-sign"></i> Seleccione
            </div>
            <div style="text-align: left;">
                <span> <b> Seleccione una Carrera: </b></span>
                <select style="width: 400px" class="no-margin-bottom" name="cmbcarreraspregradovirtual" id="cmbcarreraspregradovirtual">
                    {% for listacar in listadocarreraspregradovirtual %}
                        <option  value="{{ listacar.id }}">{{ listacar }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        <div class="modal-footer" style="text-align: right">
            <a href="javascript:;" class="btn btn-info" id="generar_reporteactividades"><i class="fa fa-plus"></i> Generar</a>
            <a href="javascript:;" class="btn btn-danger" id="cerrar_reporteactividades"><i class="fa fa-close"></i> Cerrar</a>
        </div>
    </div>

    <div class="modal fade static" id="itemspanelinformeactividades" style="display: none;">
        <div class="modal-header">
            <h4 class="paneltitle">Informe actividades </h4>
        </div>
        <div class="modal-body panelbody">
            <div class="alert alert-danger incompletoinformeactividades" style="display: none">
                <i class="fa fa-info-sign"></i> Seleccione
            </div>
            <div style="text-align: left;">
                <span> <b> Seleccione una Carrera: </b>  </span> <br>
                <select style="width: 400px" class="no-margin-bottom" name="cbocarreraactividades" id="cbocarreraactividades">
                    {% for listacar in listadocarreraspregradovirtual %}
                        <option  value="{{ listacar.id }}">{{ listacar }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        <div class="modal-footer" style="text-align: right">
            <a href="javascript:;" class="btn btn-info" id="generar_informeactividades"><i class="fa fa-plus"></i> Generar</a>
            <a href="javascript:;" class="btn btn-danger" id="cerrar_informeactividades"><i class="fa fa-close"></i> Cerrar</a>
        </div>
    </div>

    <div class="modal fade static" id="modal_reportes" style="display: none;">
            <div class="modal-header">
                <h3 class="paneltitle">Filtrar por periodo</h3>
            </div>
            <div class="modal-body panelbody">
            <div class="row-fluid">
               <div class="span12">
                   <div class="form-group" id="facultad_group" style="display: none">
                       <form class="form-search">
                           <select id="id_facultad" name="Facultad" style="width: 415px;">
                               <option value="0">--------</option>
                           </select>
                       </form>
                   </div>

                   <div class="form-group" id="periodo_group" style="display: none">
                       <form class="form-search">
                           <select id="id_periodo" name="Periodo" style="width: 415px;">
                               <option value="0">--------</option>
                           </select>
                       </form>
                   </div>
               </div>
           </div>
        </div>

       <div class="modal-footer">
           <table class="pull-right">
               <tr>
                   <td><a class="btn btn-info " id="download_report"><i class="fa fa-plus"></i> Descargar Reporte</a>
                   </td>
                   <td><a class="btn btn-danger" data-dismiss="modal"><i class="fa fa-close"></i> Cerrar</a></td>
               </tr>
           </table>
       </div>
</div>

    <div class="modal fade static" id="itemspaneltutoria" style="display: none;">
        <div class="modal-header">
            <h4 class="paneltitle">Reporte Tutorias</h4>
        </div>
        <div class="modal-body panelbody">
            <div class="alert alert-danger invalidofechas" style="display: none">
                <i class="fa fa-info-sign"></i> Seleccione un rango de fechas valida para continuar...!!!
            </div>
            <div style="text-align: left;">
                {#                <input placeholder="Fecha desde" type="text" value="{{ fechainicio }}" name="fini" id="id_fecha_inicio" style="width: 100px">#}
                {#                <input placeholder="Fecha hasta" type="text" value="{{ fechafin }}" name="ffin" id="id_fecha_fin" style="width: 100px"><br><br>#}
                <span> <b> Seleccione el tipo de archivo: </b>  </span> <br>
                <select style="width: 200px" class="no-margin-bottom tipo_archivo_tutoria">
                    <option  value="1">Archivo Pdf</option>
                    <option  value="2">Archivo Excel</option>
                </select>
                <br><br>
                <div class="form-group" id="facultad_group3" style="display: none">
                    <span> <b> Seleccione una coordinación: </b>  </span>
                    <form class="form-search">
                        <select id="id_facultad3" name="Facultad" style="width: 415px;">
                            <option value="0">--------</option>
                        </select>
                    </form>
                </div>
{#                <br><br>#}
{#                <div class="form-group" id="carrera_group3">#}
{#                    <span> <b> Seleccione una carrera: </b>  </span>#}
{#                    <form class="form-search">#}
{#                        <select id="id_carrera3" name="Carrera" style="width: 415px;">#}
{#                            <option value="0">--------</option>#}
{#                        </select>#}
{#                    </form>#}
{#                </div>#}
            </div>
        </div>
        <div class="modal-footer" style="text-align: right">
            <a href="javascript:;" class="btn btn-info" id="generar_tutoria"><i class="fa fa-plus"></i> Generar</a>
            <a href="javascript:;" class="btn btn-danger" id="cerrar_tutoria"><i class="fa fa-close"></i> Cerrar</a>
        </div>
    </div>

    <div class="modal fade static" id="itemspanelseguimiento" style="display: none;">
        <div class="modal-header">
            <h4 class="paneltitle">Reporte Seguimiento Notas</h4>
        </div>
        <div class="modal-body panelbody">
            {#            <div class="alert alert-danger invalidofechas" style="display: none">#}
            {#                <i class="fa fa-info-sign"></i> Seleccione un rango de fechas valida para continuar...!!!#}
            {#            </div>#}
            <div style="text-align: left;">
                {#                <input placeholder="Fecha desde" type="text" value="{{ fechainicio }}" name="fini" id="id_fecha_inicio" style="width: 100px">#}
                {#                <input placeholder="Fecha hasta" type="text" value="{{ fechafin }}" name="ffin" id="id_fecha_fin" style="width: 100px"><br><br>#}
                <span> <b> Seleccione el tipo de archivo: </b>  </span><br>
                <select style="width: 200px" class="no-margin-bottom tipo_archivo_seguimiento">
                    <option  value="1">Archivo Pdf</option>
                    {#                    <option  value="2">Archivo Excel</option>#}
                </select>
                <br><br>
                <div class="form-group" id="facultad_group4" style="display: none">
                    <span> <b> Seleccione una coordinación: </b>  </span>
                    <form class="form-search">
                        <select id="id_facultad4" name="Facultad" style="width: 415px;">
                            <option value="0">--------</option>
                        </select>
                    </form>
                </div>

            </div>
        </div>
        <div class="modal-footer" style="text-align: right">
            <a href="javascript:;" class="btn btn-info" id="generar_seguimiento"><i class="fa fa-plus"></i> Generar</a>
            <a href="javascript:;" class="btn btn-danger" id="cerrar_seguimiento"><i class="fa fa-close"></i> Cerrar</a>
        </div>
    </div>

    <div class="modal fade static" id="itemspanelarticulo" style="display: none;" >
        <div class="modal-header">
            <h4 id="paneltitle">Ingrese los datos para descargar</h4>
        </div>
        <div class="modal-body panelbody">
            <div style="text-align: left">
                <form id="formArticulo" style="height: 15px; text-align: left">
                    <span> <b>Seleccione un año:</b> </span> <br>
                    <input placeholder="Año" type="text" style="text-align: center; width: 150px" values="" name="anio" id="id_anio">
                    <span class='help-text' id="itemshelptext"></span>
                </form>
            <br><br>
            <div class="form-group" id="facultad_group5" style="display: none">
                <span><b> Seleccione una coordinación: </b></span> <br>
                <form class="form-search">
                    <select id="id_facultad5" name="Facultad" style="width: 415px;">
                        <option value="0">--------</option>
                    </select>
                </form>
            </div>
            </div>
        </div>
        <div class="modal-footer">
            <p style="text-align: right; margin-bottom: 0">
                <a href="javascript:;" class="btn btn-info generarinformearticulo"><i class="fa fa-plus"></i> Procesar</a>
                <a href="javascript:;" class="btn btn-danger cancelarinformearticulo"><i class="fa fa-close"></i> Cancelar</a>
            </p>
        </div>
    </div>

    <div class="modal fade static" id="modal_reportes3" style="display: none;">
            <div class="modal-header">
                <h3 class="paneltitle">Productos de investigación docente</h3>
            </div>
            <div class="modal-body panelbody">
            <div class="row-fluid">
               <div class="span12">


                   <div class="form-group" id="facultad_group6" style="display: none; text-align: left">
                       <span> <b> Seleccione una coordinación: </b>  </span>
                       <form class="form-search">
                           <select id="id_facultad6" name="Facultad" style="width: 415px;">
                               <option value="0">--------</option>
                           </select>
                       </form>
                   </div>
               </div>
           </div>
        </div>

       <div class="modal-footer">
           <table class="pull-right">
               <tr>
                   <td><a class="btn btn-info " id="generar_producto"><i class="fa fa-plus"></i> Generar</a>
                   </td>
                   <td><a class="btn btn-danger" id="cerrar_producto"><i class="fa fa-close"></i> Cerrar</a></td>
               </tr>
           </table>
       </div>
    </div>


    <div class="modal fade static" id="modal_reportes2" style="display: none;">
            <div class="modal-header">
                <h3 class="paneltitle">Reporte Ejecución de Tutorías</h3>
            </div>
            <div class="modal-body panelbody">
            <div class="row-fluid">
               <div class="span12">

                   <b> <b> Rango de Fechas: </b> </b>
                   <br>

                   <div class="form-group span4">

                       <div class="input-group input-daterange">
                           <input type="date" name="fechas" id="fecha_desde" class="form-control span12" value=""
                                  autocomplete="off"
                                  placeholder="FECHA DESDE">
                       </div>
                   </div>

                   <div class="form-group span4">

                       <div class="input-group input-daterange">
                           <input type="date" name="fechas" id="fecha_hasta" class="form-control span12" value=""
                                  autocomplete="off"
                                  placeholder="FECHA HASTA">
                       </div>
                   </div>

                   <br><br>


{#                   <div class="form-group" id="periodo_group2" style="display: none">#}
{#                       <span> <b> Periodo: </b>  </span>#}
{#                       <form class="form-search">#}
{#                           <select id="id_periodo2" name="Periodo" style="width: 415px;">#}
{#                               <option value="0">--------</option>#}
{#                           </select>#}
{#                       </form>#}
{#                   </div>#}

                   <div class="form-group" id="estado_group2" style="display: none">
                       <span> <b> Estado: </b> </span>
                       <form class="form-search">
                           <select id="id_estado2" name="Estado" style="width: 415px;">
                               <option value="">TODOS</option>
                               <option value="1">SOLICITADO</option>
                               <option value="2">PROGRAMADO</option>
                               <option value="3">EJECUTADO</option>
                               <option value="4">CANCELADO</option>
                           </select>
                       </form>
                   </div>
               </div>
           </div>
        </div>

       <div class="modal-footer">
           <table class="pull-right">
               <tr>
                   <td><a class="btn btn-info " id="download_report2"><i class="fa fa-plus"></i> Descargar Reporte</a>
                   </td>
                   <td><a class="btn btn-danger" data-dismiss="modal"><i class="fa fa-close"></i> Cerrar</a></td>
               </tr>
           </table>
       </div>
    </div>

{#INICIO REPORTE MARCADAS  #}
    <div class="modal fade static" id="modal_reportes4" style="display: none;">
            <div class="modal-header">
                <h3 class="paneltitle">Reporte de Marcadas Docentes</h3>
            </div>
            <div class="modal-body panelbody">
            <div class="row-fluid">
               <div class="span12">

                   <b> <b> Rango de Fechas: </b> </b>
                   <br><br>

                   <div class="form-group span4">

                       <div class="input-group input-daterange">
                           <input type="date" name="fechas" id="fecha_desde_1" class="form-control span12" value=""
                                  autocomplete="off"
                                  placeholder="FECHA DESDE">
                       </div>
                   </div>

                   <div class="form-group span4">

                       <div class="input-group input-daterange">
                           <input type="date" name="fechas" id="fecha_hasta_1" class="form-control span12" value=""
                                  autocomplete="off"
                                  placeholder="FECHA HASTA">
                       </div>
                   </div>

                   <br>
                   <br>
                   <br>

                   <div class="form-group" id="periodo_group3">
                       <span> <b> Periodo: </b>  </span>
                       <form class="form-search">
                           <select id="id_periodo3" name="Periodo" style="width: 415px;">
                               <option value="0">--------</option>
                           </select>
                       </form>
                   </div>

                   <br>

                   <div class="form-group" id="facultad_group9">
{#                       <label for="id_facultad8"> <b>Coordinación:</b></label>#}
                       <span> <b> Facultad: </b>  </span>
                       <form class="form-search">
                           <select id="id_facultad9" name="coordinacion" style="width: 415px;">
                               <option value="0">--------</option>
                           </select>
                       </form>
                   </div>


               </div>
           </div>
        </div>

       <div class="modal-footer">
           <table class="pull-right">
               <tr>
                   <td><a class="btn btn-info " id="descargar_reporte_marcadas"><i class="fa fa-plus"></i> Descargar Reporte</a>
                   </td>
                   <td><a class="btn btn-danger" data-dismiss="modal"><i class="fa fa-close"></i> Cerrar</a></td>
               </tr>
           </table>
       </div>
    </div>
{#FIN REPORTE MARCADAS            #}
     <div class="modal fade static" id="itemsformacion" style="display: none;">
        <div class="modal-header">
            <h4 class="paneltitle">Formación Docentes</h4>
        </div>
        <div class="modal-body panelbody">
            <div style="text-align: left;">
                <div class="form-group" id="facultad_group7" style="display: none">
                    <span> <b> Seleccione una coordinación: </b>  </span>
                       <form class="form-search">
                           <select id="id_facultad7" name="Facultad" style="width: 415px;">
                               <option value="0">--------</option>
                           </select>
                       </form>
                </div>
            </div>
        </div>
        <div class="modal-footer" style="text-align: right">
            <a href="javascript:;" class="btn btn-info" id="generar_formacion"><i class="fa fa-plus"></i> Procesar</a>
            <a href="javascript:;" class="btn btn-danger" id="cerrar_formacion"><i class="fa fa-close"></i> Cerrar</a>
        </div>
    </div>

    <div class="modal fade static" id="imprimirinformetutorias" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-md" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitleprintrecursofac">Reporte de tutorías prácticas</h3>
                </div>
                <div class="modal-body" id="printrecursofac_body">

                        <label for="cod_carreracum">Seleccione una carrera:</label>
                            <select name="cod_carreracum" id="cod_carreracum" class="select2" style="width: 100%;">
                                <option value="0" {% if carrerasselected == 0 %}selected{% endif %}>-- TODAS LAS CARRERAS --</option>
                                {% for carr in carreras_decano %}
                                    <option {% if carrerasselected == carr.id %}selected{% endif %}
                                            value="{{ carr.id }}">{{ carr.nombre }}</option>
                                {% endfor %}
                            </select>

                    <br>

                    <br>
                </div>
                <div class="modal-footer">
                    <div style="text-align: left">
                        <a href="javascript:;" onclick="vistareportecumplimiento()" class="btn btn-warning"> Imprimir</a>
                        <a href="javascript:;" id="cumplimiento_cerrar" class="btn btn-danger"> Cerrar</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="reportecumplimiento" style="display: none;">
        <div class="modal-header">
            <h4 class="paneltitle">Reporte Cumplimiento Docente</h4>
        </div>
        <div class="modal-body panelbody">
            <div class="alert alert-danger invalidofechas" style="display: none">
                <i class="fa fa-info-sign"></i> Seleccione un rango de fechas valida para continuar...!!!
            </div>
            <div style="text-align: center;">
                <form action="{{ request.path }}" method="GET" enctype="multipart/form-data">
                    <input type="hidden" name="action" value="reporte_cumplimiento_actividades">
                    <div class="form-control" style="text-align: left">
                        Seleccione el mes: <span class="text-danger">*</span> <br>
                        <select name="m" id="id_mes" style="width: 100%">
                        {% for m in meses %}
                            <option value="{{ m.0 }}">{{ m.1|title }}</option>
                        {% endfor %}
                        </select>
                    </div>
                    <br>
                    <br>
                    <div class="" style="text-align:right">
                        <a href="javascript:;" onclick="reporte_cumplimiento_general_actividades_docente()" class="btn btn-success bloqueo_pantalla"><i class="fa fa-plus"></i> Procesar</a>
                        <a href="javascript:;" class="btn btn-danger" data-dismiss="modal"> Cerrar</a>
                    </div>

                </form>
            </div>
        </div>
    </div>


   <div class="modal fade static" id="itemsactividadeshoras" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle"> Parámetros del reporte</h3>
        </div>

        <div class="modal-body panelbody">
            <form>
                <div class="form-group" id="facultad_group8" style="display: none">
                    <label for="id_facultad8"> <b>Coordinación:</b></label>
                       <form class="form-search">
                           <select id="id_facultad8" name="coordinacion" style="width: 415px;">
                               <option value="0">--------</option>
                           </select>
                       </form>
                </div>

{#            <div class="form-group">#}
{#                <label for="activo_id">Estado:</label>#}
{#                <select name="activo" id="activo_id">#}
{#                    <option value="0">Activa</option>#}
{#                    <option value="1">Inactiva</option>#}
{#                    <option value="3">Todas</option>#}
{#                </select>#}
{#            </div>#}
{#            <div class="form-group">#}
{#                <label for="tipo_id">Tipo:</label>#}
{#                <select name="tipo" id="tipo_id">#}
{#                    <option value="2">Grupo</option>#}
{#                    <option value="1">Movimiento</option>#}
{#                    <option value="3">Todas</option>#}
{#                </select>#}
{#            </div>#}
{#            <div class="form-group">#}
{#                <label for="epunemi_id">Epunemi:</label>#}
{#                <select name="epunemi" id="epunemi_id">#}
{#                    <option value="0">Si</option>#}
{#                    <option value="1">No</option>#}
{#                    <option value="3">Todas</option>#}
{#                </select>#}
{#            </div>#}
            <div class="form-group">
                <label for="formato"><b>Formato de reporte:</b></label>
                <select name="formato" id="formato">
                    <option value="pdf">PDF</option>
                    <option value="docx">WORD</option>
                    <option value="xls">EXCEL</option>
                    <option value="csv">CSV</option>

                </select>
            </div>
                <br>
            <div class="form-group" style="text-align: right">
                <a href="javascript:;" type="button" class="btn btn-info generar_reporte_actividad"><i class="fa fa-plus"></i> Generar</a>
                <button class="btn btn-danger" type="button" data-dismiss="modal"><i class="fa fa-close"></i> Cerrar</button>
            </div>
            </form>
        </div>
    </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}