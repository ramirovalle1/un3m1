{% extends  "ajaxformbs.html" %}
{% load sga_extras %}
{% block extraheading %}
    <link href="/static/widget_ppp.css" rel="stylesheet"/>
    <script type="text/javascript">
        $(function () {
            var tabtemastitulacion = localStorage.getItem('tabtemastitulacion');
            if (!tabtemastitulacion) {
                tabtemastitulacion = "#1";
                localStorage.setItem("tabtemastitulacion", tabtemastitulacion);
            }

            $('.tabs').each(function () {
                if ($(this).attr('href') == tabtemastitulacion) {
                    $(this).trigger('click');
                }
            }).click(function () {
                localStorage.setItem("tabtemastitulacion", $(this).attr('href'));
            });
        });

    </script>
    <script type="text/javascript">

        function irArriba() {
            //console.log("arrr")
            $('.ir-arriba').click(function () {
                $('body,html').animate({scrollTop: '0px'}, 1000);
            });
            $(window).scroll(function () {
                if ($(this).scrollTop() > 0) {
                    $('.ir-arriba').slideDown(600);
                } else {
                    $('.ir-arriba').slideUp(600);
                }
            });
            $('.ir-abajo').click(function () {
                $('body,html').animate({scrollTop: '1000px'}, 1000);
            });
        }

        $(document).ready(function () {
            irArriba();
            $(".fancybox").fancybox();
            $(".gallerypdf").fancybox({
                openEffect: 'elastic',
                closeEffect: 'elastic',
                autoSize: true,
                type: 'iframe',
                iframe: {
                    preload: false // fixes issue with iframe and IE
                }
            });
        });

        $(function () {
            busqueda = function () {
                var term = $("#searchinput").val().trim().toUpperCase();
                if (term.length > 0) {
                    bloqueointerface();
                    location.href = "/adm_configuracionpropuesta?action=tribunaltemas&idconfiguracion={{ configuracion.id }}&s=" + term;
                }
                return false;
            };

            $("#search").click(function () {
                busqueda();
            });

            $('#searchinput').keyup(function (e) {
                if (e.keyCode == 13) {
                    busqueda();
                }
            });

            $("#detalleguiaspracticasmodal_cerrar").click(function () {
                $("#detalleguiaspracticasmodal").modal("hide");
            });

             $('.seguimiento_tribunal').click(function () {
                var id = $(this).attr('idr');
                var es_pareja = $(this).attr('es_pareja');
                $("#nombremaestrante").html("SEGUIMIENTO INFORME TRIBUNAL");
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_configuracionpropuesta",
                    data: {'action': 'seguimiento_tribunal', 'id': id,'es_pareja':es_pareja},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $("#detalletalentohumanomodal_contenido").html(data.data);
                            $("#detalletalentohumanomodal").modal({'width': '750px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $('.detalle').click(function () {
                var id = $(this).attr('idr');
                var nommaestrante = $(this).attr('nommaestrante');
                $("#nombremaestrante").html("DETALLE TRIBUNAL " + nommaestrante);
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_configuracionpropuesta",
                    data: {'action': 'detalle_tribunal', 'id': id},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $("#detalletalentohumanomodal_contenido").html(data.data);
                            $("#detalletalentohumanomodal").modal({'width': '750px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $('#detalletalentohumanomodal_cerrar').click(function () {
                $("#detalletalentohumanomodal").modal('hide');
            });
            $(".cerraactaposgrado").click(function () {
                var idtematitulacion = $(this).attr('idtematitulacion');
                var nommaestrante = $(this).attr('nommaestrante');
                smoke.confirm("¿Está seguro de cerrar/actualizar acta " + nommaestrante + ".?", function (e) {
                    if (e) {
                        bloqueointerface();
                        var id = idtematitulacion;
                        $.ajax({
                            type: "POST",
                            url: "/adm_configuracionpropuesta",
                            data: {'action': 'cerraactaposgrado', 'id': id},
                            error: function () {
                                $.unblockUI();
                                smoke.alert("Error al obtener los datos.");
                            },
                            success: function (data) {
                                if (data.result == "ok") {
                                    location.reload();
                                } else {
                                    $.unblockUI();
                                    smoke.alert(data.mensaje);
                                }
                            }
                        });
                    }
                }, {
                    ok: "SI, CERRAR ACTA",
                    cancel: "NO,CANCELAR",
                    classname: "custom-class",
                    reverseButtons: true
                });
            });
            $(".abriractaposgrado").click(function () {
                var idtematitulacion = $(this).attr('idtematitulacion');
                var nommaestrante = $(this).attr('nommaestrante');
                smoke.confirm("¿Está seguro de cerrar/actualizar acta " + nommaestrante + " .?", function (e) {
                    if (e) {
                        bloqueointerface();
                        var id = idtematitulacion;
                        $.ajax({
                            type: "POST",
                            url: "/adm_configuracionpropuesta",
                            data: {'action': 'abriractaposgrado', 'id': id},
                            error: function () {
                                $.unblockUI();
                                smoke.alert("Error al obtener los datos.");
                            },
                            success: function (data) {
                                if (data.result == "ok") {
                                    location.reload();
                                } else {
                                    $.unblockUI();
                                    smoke.alert(data.mensaje);
                                }
                            }
                        });
                    }
                }, {
                    ok: "SI, ABRIR ACTA",
                    cancel: "NO,CANCELAR",
                    classname: "custom-class",
                    reverseButtons: true
                });
            });
            $(".habilitartesiscorrejida").click(function () {
                var idtematitulacion = $(this).attr('idtematitulacion');
                var nommaestrante = $(this).attr('nommaestrante');
                smoke.confirm("¿Está seguro de habilitar para correjir tesis de " + nommaestrante + ".?", function (e) {
                    if (e) {
                        bloqueointerface();
                        var id = idtematitulacion;
                        $.ajax({
                            type: "POST",
                            url: "/adm_configuracionpropuesta",
                            data: {'action': 'habilitartesiscorrejida', 'id': id},
                            error: function () {
                                $.unblockUI();
                                smoke.alert("Error al obtener los datos.");
                            },
                            success: function (data) {
                                if (data.result == "ok") {
                                    location.reload();
                                } else {
                                    $.unblockUI();
                                    smoke.alert(data.mensaje);
                                }
                            }
                        });
                    }
                }, {
                    ok: "SI, HABILITAR",
                    cancel: "NO,CANCELAR",
                    classname: "custom-class",
                    reverseButtons: true
                });
            });
            $(".habilitartesiscorrejidapareja").click(function () {
                var idtematitulacion = $(this).attr('idtematitulacion');
                var nommaestrante = $(this).attr('nommaestrante');
                smoke.confirm("¿Está seguro de habilitar para correjir la tesis  de los maestrantes:  " + nommaestrante + ".?", function (e) {
                    if (e) {
                        bloqueointerface();
                        var id = idtematitulacion;
                        $.ajax({
                            type: "POST",
                            url: "/adm_configuracionpropuesta",
                            data: {'action': 'habilitartesiscorrejidapareja', 'id': id},
                            error: function () {
                                $.unblockUI();
                                smoke.alert("Error al obtener los datos.");
                            },
                            success: function (data) {
                                if (data.result == "ok") {
                                    location.reload();
                                } else {
                                    $.unblockUI();
                                    smoke.alert(data.mensaje);
                                }
                            }
                        });
                    }
                }, {
                    ok: "SI, HABILITAR",
                    cancel: "NO,CANCELAR",
                    classname: "custom-class",
                    reverseButtons: true
                });
            });
            $(".deletecaltribunal").click(function () {
                var idtematitulacion = $(this).attr('idtematitulacion');
                var nommaestrante = $(this).attr('nommaestrante');
                smoke.confirm("¿Está seguro de eliminar las calificaciones del tribunal del Maestrante: " + nommaestrante + " .?", function (e) {
                    if (e) {
                        bloqueointerface();
                        var id = idtematitulacion;
                        $.ajax({
                            type: "POST",
                            url: "/adm_configuracionpropuesta",
                            data: {'action': 'deletecaltribunal', 'idtematitulacion': id},
                            error: function () {
                                $.unblockUI();
                                smoke.alert("Error al obtener los datos.");
                            },
                            success: function (data) {
                                if (data.result == "ok") {
                                    location.reload();
                                } else {
                                    $.unblockUI();
                                    smoke.alert(data.mensaje);
                                }
                            }
                        });
                    }
                }, {
                    ok: "SI, ELIMINAR",
                    cancel: "NO,CANCELAR",
                    classname: "custom-class",
                    reverseButtons: true
                });
            });
            $(".deletecaltribunalpareja").click(function () {
                var idtematitulacion = $(this).attr('idtematitulacion');
                var nommaestrante = $(this).attr('nommaestrante');
                smoke.confirm("¿Está seguro de eliminar las calificaciones del tribunal del Maestrante: " + nommaestrante + " .?", function (e) {
                    if (e) {
                        bloqueointerface();
                        var id = idtematitulacion;
                        $.ajax({
                            type: "POST",
                            url: "/adm_configuracionpropuesta",
                            data: {'action': 'deletecaltribunalpareja', 'idtematitulacion': id},
                            error: function () {
                                $.unblockUI();
                                smoke.alert("Error al obtener los datos.");
                            },
                            success: function (data) {
                                if (data.result == "ok") {
                                    location.reload();
                                } else {
                                    $.unblockUI();
                                    smoke.alert(data.mensaje);
                                }
                            }
                        });
                    }
                }, {
                    ok: "SI, ELIMINAR",
                    cancel: "NO,CANCELAR",
                    classname: "custom-class",
                    reverseButtons: true
                });
            });
            $(".detallecalificacion").click(function () {
                var id = $(this).attr("idpar");
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_configuracionpropuesta",
                    data: {'action': 'detallecalificaciontribunal', 'id': id},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $("#deletemodal").html(data.data);
                            $(".btn-cerrar").bind('click', function () {
                                $("#deletemodal").modal('hide');
                            });
                            $("#deletemodal").modal({backdrop: 'static', width: '900px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#id_fechainirural, #id_fechafinrural").addClass("validate[required]").datepicker({format: "yyyy-mm-dd"}).on('changeDate', function (ev) {
                $(this).datepicker('hide');
            })
            $("#modal_listado").click(function () {
                $("#id_fechaini").val('');
                $("#id_fechafin").val('');
                $("#idoperativoadd").val('');
                $("#idoperativoadd").val(5);
                $("#alertaingresoaddindicadorrural").hide();
                $("#itemspaneladdacionesrural .incompletoaddindicadorrural").hide();
                $("#itemspaneladdacionesrural .incompletovaloresaddindicadorrural").hide();
                $("#generar_reporterural").show();
                $("#guardar").hide();
                $("#modallistado").modal({backdrop: 'static', width: '350px'}).modal('show');
            });
            $("#generar_reporterural").click(function () {
                var id_fini = $("#id_fechainirural").val();
                var id_ffin = $("#id_fechafinrural").val();
                var opcion = $("#idtodos").prop('checked');
                if (opcion) {
                    idtodos = 1
                } else {
                    idtodos = 0
                }
                if (idtodos == 0) {
                    if (id_fini == '' || id_ffin == '') {
                        smoke.alert('Favor ingresar fecha');
                        return false;
                    }
                }

                openwindow('GET', '/adm_configuracionpropuesta', {
                    action: 'exceltribunalconvocatoria',
                    fechainicio: id_fini,
                    fechafin: id_ffin,
                    idtodos: idtodos,
                    idconfiguracion: {{ configuracion.id }}
                }, '_blank');
                $("#modallistado").modal("hide");
            });
            $("#cerrarindicadoresaddrural").click(function () {
                $("#modallistado .incompletoaddindicadoresrural").hide();
                $("#modallistado .incompletovaloindicadoresrural").hide();
                $("#modallistado").modal("hide");
            });

        });

        function actagradoposgrado(idinscripcion) {
            openwindow('POST', '/adm_configuracionpropuesta', {
                action: 'pdfactagradoposgrado',
                id: idinscripcion,
                csrfmiddlewaretoken: '{{ csrf_token }}'
            }, '_blank');
        }

        function actagradoposgradocomplexivo(idinscripcion) {
            openwindow('POST', '/adm_configuracionpropuesta', {
                action: 'pdfactagradoposgradocomplexivo',
                id: idinscripcion,
                csrfmiddlewaretoken: '{{ csrf_token }}'
            }, '_blank');
        }

        function certificaciondefensa(idinscripcion) {
            openwindow('POST', '/adm_configuracionpropuesta', {
                action: 'pdfcertificaciondefensa',
                id: idinscripcion,
                csrfmiddlewaretoken: '{{ csrf_token }}'
            }, '_blank');
        }

        const generar_acta_grado = (pk) => {
            Swal.fire({
                html: `<strong>¿Está seguro de generar el Acta de Grado?</strong>
                <br>
                <p style="font-size: .8rem">En caso de que ya exista un archivo generado, <strong>será reemplazado.</strong></p>`,
                type: 'info',
                showCancelButton: true,
                allowOutsideClick: false,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Si, deseo hacerlo',
                cancelButtonText: 'Cancelar'
            }).then((result) => {
                if (result.value) {
                    actagradoposgradocomplexivoactualizapagina(pk)
                }
            });
        }

        const generar_certificacion_defesa = (pk) => {
            Swal.fire({
                html: `<strong>¿Está seguro de generar el Acta de la certificación de la defensa?</strong>
                <br>
                <p style="font-size: .8rem">En caso de que ya exista un archivo generado, <strong>será reemplazado.</strong></p>`,
                type: 'info',
                showCancelButton: true,
                allowOutsideClick: false,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Si, deseo hacerlo',
                cancelButtonText: 'Cancelar'
            }).then((result) => {
                if (result.value) {
                    certificaciondefensaactualizapagina(pk)
                }
            });
        }

        const generar_acta_sustentacion_con_nota = (pk) => {
            Swal.fire({
                html: `<strong>¿Está seguro de generar el Acta de sustentación con nota?</strong>
                                <br>
                                <p style="font-size: .8rem">En caso de que ya exista un archivo generado, <strong>será reemplazado.</strong></p>`,
                type: 'info',
                showCancelButton: true,
                allowOutsideClick: false,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Si, deseo hacerlo',
                cancelButtonText: 'Cancelar'
            }).then((result) => {
                if (result.value) {
                    actasustentacionnotaactualizapagina(pk)
                }
            });
        }

        function actagradoposgradocomplexivoactualizapagina(id) {
            bloqueointerface();
            $.ajax({
                type: "POST",
                url: "/adm_configuracionpropuesta",
                data: {'action': 'pdfactagradoposgrado', 'id': id},
                error: function () {
                    $.unblockUI();
                    alertaDanger("Error al obtener los datos.");
                },
                success: function (data) {
                    if (data.result === "ok") {
                        window.open(data.url, '_blank');
                        location.reload();
                        window.addEventListener('load', function () {
                             $.unblockUI();
                        });
                    } else {
                        $.unblockUI();
                        alertaDanger(data.mensaje);
                    }
                }
            });
        }


        function certificaciondefensaactualizapagina(id) {
            bloqueointerface();
            $.ajax({
                type: "POST",
                url: "/adm_configuracionpropuesta",
                data: {'action': 'pdfcertificaciondefensaposgrado', 'id': id},
                error: function () {
                    $.unblockUI();
                    alertaDanger("Error al obtener los datos.");
                },
                success: function (data) {
                    if (data.result === "ok") {
                        window.open(data.url, '_blank');
                        location.reload();
                        window.addEventListener('load', function () {
                             $.unblockUI();
                        });
                    } else {
                        $.unblockUI();
                        alertaDanger(data.mensaje);
                    }
                }
            });
        }

        function actasustentacionnotaactualizapagina(id) {
            bloqueointerface();
            $.ajax({
                type: "POST",
                url: "/adm_configuracionpropuesta",
                data: {'action': 'pdfactasustentacionnotaposgrado', 'id': id},
                error: function () {
                    $.unblockUI();
                    alertaDanger("Error al obtener los datos.");
                },
                success: function (data) {
                    if (data.result === "ok") {
                        window.open(data.url, '_blank');
                        location.reload();
                        window.addEventListener('load', function () {
                             $.unblockUI();
                        });
                    } else {
                        $.unblockUI();
                        alertaDanger(data.mensaje);
                    }
                }
            });
        }


        function actadefensaposgrado(idinscripcion) {
            openwindow('POST', '/adm_configuracionpropuesta', {
                action: 'pdfactadefensaposgrado',
                id: idinscripcion,
                csrfmiddlewaretoken: '{{ csrf_token }}'
            }, '_blank');
        }

        function actadefensaposgradonotas(idinscripcion) {
            openwindow('POST', '/adm_configuracionpropuesta', {
                action: 'pdfactadefensaposgradonotas',
                id: idinscripcion,
                csrfmiddlewaretoken: '{{ csrf_token }}'
            }, '_blank');
        }

        function pdfrubricacalificaciones(idparticipante) {
            openwindow('POST', '/adm_configuracionpropuesta', {
                action: 'pdfrubricacalificacionesposgrado',
                'id': idparticipante
            }, '_blank');
        }

        function vistaprevia_actaacompanamiento(id) {
            openwindow('POST', '/adm_configuracionpropuesta', {action: 'actaacompanamiento_pdf', id: id}, '_blank');
        }

        function vistaprevia_actaacompanamientopareja(id) {
            openwindow('POST', '/pro_tutoriaposgrado', {action: 'actaacompanamientopareja_pdf', id: id}, '_blank');
        }

        function formModal(id, text, action, size='500') {
            $.ajax({
                type: "GET",
                url: `{{ request.path }}`,
                data: {
                    'action': action,
                    'id': id,
                },
                success: function (data) {
                    if (data.result === true) {
                        $('.panelbody').html(data.data);
                        $('#itemspanel .paneltitle').html(text);
                        $("#itemspanel").modal({backdrop: 'static', width: size}).modal('show');
                    } else {
                        smoke.alert(data.mensaje);
                    }
                },
                error: function () {
                    smoke.alert("Error de conexión.");
                },
                dataType: "json"
            });
        }

        {#function eliminar_informes_tribunal(id) {#}
        {#    const mensaje = `Al eliminar el informe de revisión no podra volver a recuperar el informe. <br>¿Está seguro de eliminar el informe de revisión?`;#}
        {#    Swal.fire({#}
        {#        title: mensaje,#}
        {#        text: "Esta acción es irreversible",#}
        {#        type: 'warning',#}
        {#        showCancelButton: true,#}
        {#        allowOutsideClick: false,#}
        {#        confirmButtonColor: '#3085d6',#}
        {#        cancelButtonColor: '#d33',#}
        {#        confirmButtonText: 'Si, deseo hacerlo',#}
        {#        cancelButtonText: 'Cancelar'#}
        {#    }).then((result) => {#}
        {#        if (result.value) {#}
        {#            bloqueointerface();#}
        {#            $.ajax({#}
        {#                type: "POST",#}
        {#                url: '{{ reques.path }}',#}
        {#                data: {#}
        {#                    action: 'eliminar_informe_tribunal',#}
        {#                    id: id,#}
        {#                },#}
        {#                success: function (data) {#}
        {#                    $.unblockUI();#}
        {#                    if (data.result == 'ok') {#}
        {#                        let timerInterval#}
        {#                        Swal.fire({#}
        {#                            title: '',#}
        {#                            html: data.mensaje,#}
        {#                            timer: 5000,#}
        {#                            timerProgressBar: true,#}
        {#                            didOpen: () => {#}
        {#                                Swal.showLoading()#}
        {#                                const b = Swal.getHtmlContainer().querySelector('b')#}
        {#                                timerInterval = setInterval(() => {#}
        {#                                    b.textContent = Swal.getTimerLeft()#}
        {#                                }, 100)#}
        {#                            },#}
        {#                            willClose: () => {#}
        {#                                clearInterval(timerInterval)#}
        {#                            }#}
        {#                        }).then((result) => {#}
        {#                            /* Read more about handling dismissals below */#}
        {#                            if (result.dismiss === Swal.DismissReason.timer) {#}
        {#                                console.log('I was closed by the timer')#}
        {#                            }#}
        {#                            bloqueointerface();#}
        {#                            location.reload();#}
        {#                        })#}
        {##}
        {#                    } else {#}
        {#                        alertaDanger(data.mensaje, 10000);#}
        {#                    }#}
        {#                },#}
        {#                error: function () {#}
        {#                    $.unblockUI();#}
        {#                    alertaDanger('Error en el servidor', 'Advertencia!', 10000);#}
        {#                },#}
        {#                dataType: "json"#}
        {#            });#}
        {##}
        {#        }#}
        {#    });#}
        {##}
        {##}
        {#}#}

    </script>
    <script src="/static/adicionalesjs/formquestion.js?0.24"></script>
{% endblock %}
{% block atras %}/adm_configuracionpropuesta{% endblock %}
{% block canvas %}

    <div class="modal fade static" id="itemspanel" style="display: none;">
        <div class="modal-header">
            <h4><i class="fa fa-list"></i> <b class="paneltitle">FORMULARIO MODAL</b></h4>
        </div>
        <div class="modal-body">
            <form class="form-horizontal form-modal" autocomplete="off" method="post"
                  enctype="multipart/form-data" action="{{ request.path }}">
                {% csrf_token %}
                <div class="row-fluid panelbody">
                </div>
            </form>
        </div>
    </div>

    <div class='row-fluid'>
        <div class='span12' style="text-align: right">
            <a class="btn btn-default btn-mini bloqueo_pantalla"
               href="/adm_configuracionpropuesta?action=propuestastemas&idconfiguracion={{ configuracion.id }}">
                PROPUESTAS TEMAS</a>
            <a class="btn btn-default btn-mini bloqueo_pantalla"
               href="/adm_configuracionpropuesta?action=propuestastemasprofesor&idconfiguracion={{ configuracion.id }}">
                SOLICITUDES PROFESOR</a>
            <a class="btn btn-success btn-mini"> INGRESO TRIBUNAL</a>
        </div>
    </div>
    <div class="row-fluid"><h4>{{ title |upper }}</h4></div>
    <div class='row-fluid'>
        <div class="span12">
            <div class="alert alert-info" style="text-align: justify">

                <h4 class="alert-heading"> CONVOCATORIA({{ configuracion.id }}) - {{ configuracion.periodo }}</h4>
                <p><i class="fa fa-book" aria-hidden="true"></i> {{ configuracion.carrera }}</p>

            </div>
        </div>
    </div>

    <div class="row-fluid">
        <div class='span12'>
            <div class="tabtable">
                <ul class="nav nav-tabs">
                    <li><a class="tabs active" href="#1" data-toggle="tab">INGRESO TRIBUNAL INDIVIDUAL</a></li>
                    <li><a class="tabs" href="#2" data-toggle="tab">INGRESO TRIBUNAL PAREJA</a></li>

                </ul>
                <div class="tab-content">
                    <div class="tab-pane" id="1">
                        <div class='row-fluid'>
                            <div class='span7'>
                                <a href="#" id="modal_listado" class="btn btn-mini btn-warning tu"><i
                                        class="fa fa-table"></i>
                                    Listado</a>
                            </div>
                            <div class='span5'>
                                <form class="form-search" onsubmit="return busqueda()">
                                    <input placeholder="BUSCAR POR APELLIDOS / CÉDULA" class='searchinput' type='text'
                                           id='searchinput' value='{{ search }}' autocomplete="off"/>
                                    <a href="javascript:;" id='search' class='btn btn-info'><i
                                            class="fa fa-search "></i> Buscar</a>
                                    {% if search or ids or mid or nid %}
                                        <a href="/adm_configuracionpropuesta?action=tribunaltemas&idconfiguracion={{ configuracion.id }}"
                                           id='allresults' class='btn btn-info bloqueo_pantalla'><i
                                                class="fa fa-refresh "></i>
                                            Todos</a>
                                    {% endif %}
                                </form>
                            </div>
                        </div>
                        <div class='row-fluid'>
                            <table class='table table-bordered table-striped'>
                                <thead>
                                <tr>
                                    <th style="width: 250px;text-align: left;">Maestrante</th>
                                    <th style="width: 250px;text-align: center;">Tema</th>
                                    <th style="width: 350px;text-align: center;">Variables</th>
                                    <th style="width: 80px">Acciones</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for tema in temas %}
                                    <tr>
                                        <td>
                                            <li class="list-group-item list-group-item-success"
                                                style="padding: 1px 2px;text-align: justify;background-color: #f1f1f1;">
                                                {% if persona.usuario.is_superuser %}
                                                    {{ tema.matricula.inscripcion.id }}{% endif %}
                                                <i class="fa fa-graduation-cap"></i>
                                                {{ tema.matricula.inscripcion.persona.titulacion_solo3nivelparapogrado.titulo.abreviatura|default_if_none:'' }}
                                                {{ tema.matricula.inscripcion.persona.nombre_completo_inverso }}
                                                <br>
                                                {% if tema.tutor %}
                                                    <strong>Tutor: </strong>
                                                    {{ tema.tutor.persona.titulacion_principal_senescyt_registro.titulo.abreviatura|lower|title|default_if_none:'' }}
                                                    {{ tema.tutor.persona.nombre_completo_inverso }} <br>
                                                {% else %}
                                                    <strong>No tiene aún tutor</strong>
                                                {% endif %}
                                            </li>
                                            <ul style="text-align: justify;font-size: 9px;margin: 0 0 0px 0px;">
                                                {% for listadotribunal in tema.detalletribunal %}
                                                    <li class="list-group-item list-group-item-success"
                                                        style="padding: 4px 6px;text-align: center;background-color: #dff0d8;">
                                                        <strong>TRIBUNAL
                                                            CALIFICADOR<br></strong>{{ listadotribunal.fechadefensa|date:"Y-m-d" }}
                                                        | {{ listadotribunal.horadefensa|time:"H:i" }} a
                                                        {{ listadotribunal.horafindefensa|time:"H:i" }}</li>
                                                    <li class="list-group-item list-group-item-success"
                                                        style="padding: 2px 4px;">
                                                        <strong>Presidente: </strong>
                                                        {{ listadotribunal.presidentepropuesta.persona.titulacion_principal_senescyt_registro.titulo.abreviatura|lower|title|default_if_none:'' }}
                                                        {{ listadotribunal.presidentepropuesta|default_if_none:"" }}
                                                    </li>
                                                    <li class="list-group-item list-group-item-success"
                                                        style="padding: 2px 4px;">
                                                        <strong>Secretario: </strong>
                                                        {{ listadotribunal.secretariopropuesta.persona.titulacion_principal_senescyt_registro.titulo.abreviatura|lower|title|default_if_none:'' }}
                                                        {{ listadotribunal.secretariopropuesta|default_if_none:"" }}
                                                    </li>
                                                    <li class="list-group-item list-group-item-success"
                                                        style="padding: 2px 4px;">
                                                        <strong>Vocal: </strong>
                                                        {{ listadotribunal.delegadopropuesta.persona.titulacion_principal_senescyt_registro.titulo.abreviatura|lower|title|default_if_none:'' }}
                                                        {{ listadotribunal.delegadopropuesta|default_if_none:"" }}
                                                    </li>
                                                {% endfor %}
                                                {% with tieneapro=tema|call:'tiene_aprobaciones' estadoaprobacion=tema|call:'estado_aprobacion' %}
                                                    <table class="table table-bordered">
                                                        <tbody>
                                                        <tr>
                                                            <th>
                                                                ESTADO TUTORÍA
                                                                {% if tieneapro %}
                                                                    {% if estadoaprobacion %}
                                                                        {% if estadoaprobacion.estado == aprobar %}
                                                                            <li class="list-group-item list-group-item-success"
                                                                                style="padding: 1px 2px;text-align: center;background-color: #dff0d8;">
                                                                                <strong>{{ estadoaprobacion.get_estado_display }}</strong>
                                                                            </li>
                                                                        {% else %}
                                                                            {% if estadoaprobacion.estado == rechazar %}
                                                                                <li class="list-group-item list-group-item-success"
                                                                                    style="padding: 1px 2px;text-align: left;background-color: #f2dede;">
                                                                                    <strong>{{ estadoaprobacion.get_estado_display }}</strong>
                                                                                </li>
                                                                            {% else %}
                                                                                <span class="label label-warning">{{ estadoaprobacion.get_estado_display }}</span>
                                                                            {% endif %}
                                                                        {% endif %}
                                                                    {% endif %}
                                                                {% endif %}
                                                            </th>
                                                            <th>
                                                                ESTADO GRADUADO
                                                                {% if tema.matricula.inscripcion.graduado %}
                                                                    <li class="list-group-item list-group-item-success"
                                                                        style="padding: 1px 2px;text-align: center;background-color: #dff0d8;">
                                                                        <strong>GRADUADO</strong></li>
                                                                {% else %}
                                                                    <li class="list-group-item list-group-item-success"
                                                                        style="padding: 1px 2px;text-align: left;background-color: #f2dede;">
                                                                        <strong>NO GRADUADO</strong></li>
                                                                {% endif %}
                                                            </th>
                                                            <th>

                                                                {% if tema.archivo %}
                                                                    <a href='{{ tema.archivo.url }}' target="_blank"
                                                                       class='btn btn-info btn-mini tu'
                                                                       title="Descargar"><i
                                                                            class="fa fa-download  "></i></a>{% endif %}
                                                            </th>
                                                        </tr>

                                                        </tbody>
                                                    </table>
                                                {% endwith %}
                                            </ul>

                                            <ul style="text-align: center;font-size: 9px;margin: 0 0 0px 0px;">
                                                <li class="list-group-item list-group-item-success"
                                                    style="padding: 2px 6px;text-align: center;background-color: #dff0d8;"><strong>Estado Documentos</strong>
                                                </li>
                                                {% if tema.estado_firmas_acta_graduado != None %}
                                                    <li class="list-group-item list-group-item-success" style="padding: 4px 6px;">
                                                    ACTA DE GRADO <br>
                                                    {% if  tema.get_firmado_por %}

                                                            {% for integrante in  tema.get_firmado_por %}
                                                                <span class="label label-info tu"
                                                                      title="Firmado">
                                                                    {{ integrante }}
                                                                </span>
                                                            {% endfor %}
                                                            <br>
                                                             <button class="btn btn-primary btn-mini" title="Historial de archivo"
                                                                onclick="formModal('{{ tema.id }}','HISTORIAL FIRMA ACTA DE GRADO','historial_firma_actas_de_grado', 1000)"
                                                                href="javascript:;"><i class="fa fa-clock-o"></i>
                                                            </button>
                                                             <a class="btn btn-default btn-sm btn-hover gallerypdf" data-fancybox-type="iframe" href="{{ tema.get_documento_informe.url }}"><img src="/static/images/pdf.png" width="18" height="18" align="absmiddle"></a></a><br>
                                                        {% else %}
                                                            <span class="label label-info tu" title="ACTA GENERADA">
                                                                    ACTA DE GRADO GENERADA
                                                            </span>
                                                            <button class="btn btn-primary btn-mini" title="Historial de archivo"
                                                                onclick="formModal('{{ tema.id }}','HISTORIAL FIRMA ACTA DE GRADO','historial_firma_actas_de_grado', 1000)"
                                                                href="javascript:;"><i class="fa fa-clock-o"></i>
                                                            </button>
                                                            <a class="btn btn-default btn-sm btn-hover gallerypdf" data-fancybox-type="iframe" href="{{ tema.get_documento_informe.url }}"><img src="/static/images/pdf.png" width="18" height="18" align="absmiddle"></a></a><br>
                                                        {% endif %}
                                                </li>
                                                {% else %}
                                                    <li class="list-group-item list-group-item-success" style="padding: 4px 6px;">
                                                    <span class="label label-default tu" title="PENDIENTE">
                                                        POR GENERAR ACTA DE GRADO
                                                    </span>
                                                </li>
                                                {% endif %}

                                                {% if tema.archivo_certificacion_defensa %}
                                                    <li class="list-group-item list-group-item-success" style="padding: 4px 6px;">
                                                    CERTIFICACIÓN DEFENSA <br>
                                                    {% if  tema.get_firmado_por_certificacion_defensa %}

                                                            {% for integrante in  tema.get_firmado_por_certificacion_defensa %}
                                                                <span class="label label-info tu"
                                                                      title="Firmado">
                                                                    {{ integrante }}
                                                                </span>
                                                            {% endfor %}
                                                            <br>
                                                             <button class="btn btn-primary btn-mini" title="Historial de archivo"
                                                                onclick="formModal('{{ tema.id }}','HISTORIAL FIRMA CERTIFICACIÓN DEFENSA','historial_firma_certificacion_defensa', 1000)"
                                                                href="javascript:;"><i class="fa fa-clock-o"></i>
                                                            </button>
                                                             <a class="btn btn-default btn-sm btn-hover gallerypdf" data-fancybox-type="iframe" href="{{ tema.get_documento_certificacion_defensa.url }}"><img src="/static/images/pdf.png" width="18" height="18" align="absmiddle"></a></a><br>
                                                        {% else %}
                                                            <span class="label label-info tu" title="ACTA GENERADA">
                                                                    CERTIFICACIÓN DEFENSA GENERADA
                                                            </span>
                                                            <button class="btn btn-primary btn-mini" title="Historial de archivo"
                                                                onclick="formModal('{{ tema.id }}','HISTORIAL FIRMA CERTIFICACIÓN DEFENSA','historial_firma_certificacion_defensa', 1000)"
                                                                href="javascript:;"><i class="fa fa-clock-o"></i>
                                                            </button>
                                                            <a class="btn btn-default btn-sm btn-hover gallerypdf" data-fancybox-type="iframe" href="{{ tema.get_documento_certificacion_defensa.url }}"><img src="/static/images/pdf.png" width="18" height="18" align="absmiddle"></a></a><br>
                                                        {% endif %}
                                                </li>
                                                {% else %}
                                                    <li class="list-group-item list-group-item-success" style="padding: 4px 6px;">
                                                    <span class="label label-default tu" title="PENDIENTE">
                                                        POR GENERAR CERTIFICACIÓN DEFENSA
                                                    </span>
                                                </li>
                                                {% endif %}

                                                {% if tema.archivo_acta_sustentacion %}
                                                    <li class="list-group-item list-group-item-success" style="padding: 4px 6px;">
                                                    ACTA DE SUSTENTACIÓN <br>
                                                    {% if  tema.get_firmado_por_acta_sustentacion_con_nota %}

                                                            {% for integrante in  tema.get_firmado_por_acta_sustentacion_con_nota %}
                                                                <span class="label label-info tu"
                                                                      title="Firmado">
                                                                    {{ integrante }}
                                                                </span>
                                                            {% endfor %}
                                                            <br>
                                                             <button class="btn btn-primary btn-mini" title="Historial de archivo"
                                                                onclick="formModal('{{ tema.id }}','HISTORIAL ACTA SUSTENTACIÓN CON NOTA','historial_firma_acta_sustentacion_nota', 1000)"
                                                                href="javascript:;"><i class="fa fa-clock-o"></i>
                                                            </button>
                                                             <a class="btn btn-default btn-sm btn-hover gallerypdf" data-fancybox-type="iframe" href="{{ tema.get_documento_acta_sustentacion_nota.url }}"><img src="/static/images/pdf.png" width="18" height="18" align="absmiddle"></a></a><br>
                                                        {% else %}
                                                            <span class="label label-info tu" title="ACTA GENERADA">
                                                                    ACTA DE SUSTENTACIÓN GENERADA
                                                            </span>
                                                            <button class="btn btn-primary btn-mini" title="Historial de archivo"
                                                                onclick="formModal('{{ tema.id }}','HISTORIAL ACTA SUSTENTACIÓN CON NOTA','historial_firma_acta_sustentacion_nota', 1000)"
                                                                href="javascript:;"><i class="fa fa-clock-o"></i>
                                                            </button>
                                                            <a class="btn btn-default btn-sm btn-hover gallerypdf" data-fancybox-type="iframe" href="{{ tema.get_documento_acta_sustentacion_nota.url }}"><img src="/static/images/pdf.png" width="18" height="18" align="absmiddle"></a></a><br>
                                                        {% endif %}
                                                </li>
                                                {% else %}
                                                    <li class="list-group-item list-group-item-success" style="padding: 4px 6px;">
                                                    <span class="label label-default tu" title="PENDIENTE">
                                                        POR GENERAR ACTA DE SUSTENTACIÓN
                                                    </span>
                                                </li>
                                                {% endif %}
                                            </ul>

                                        </td>
                                        <td style="text-align: justify;font-size: 10px;">
                                            <li class="list-group-item list-group-item-success"
                                                style="padding: 1px 2px;text-align: justify;">
                                                {% if persona.usuario.is_superuser %} {{ tema.id }}{% endif %}
                                                <strong>TEMA ACTUALIZADO POR TUTOR:</strong>
                                                {% for listadotribunal in tema.detalletribunal %}
                                                    {% if listadotribunal.subtema %}
                                                        {{ listadotribunal.subtema }}
                                                    {% endif %}
{#                                                    {% if forloop.last %}#}
{#                                                        {% if listadotribunal.obtener_archivo_titulacion_final %}#}
{#                                                            <a href='media/{{ listadotribunal.obtener_archivo_titulacion_final }}'#}
{#                                                               target="_blank"#}
{#                                                               class='btn btn-info btn-mini tu'#}
{#                                                               title="Descargar"><i#}
{#                                                                    class="fa fa-download  "></i></a>#}
{#                                                        {% endif %}#}
{#                                                    {% endif %}#}
                                                {% endfor %}
                                            </li>
                                            <li class="list-group-item list-group-item-success"
                                                style="padding: 1px 2px;text-align: justify;">
                                                <strong>MECANISMO:</strong> {{ tema.mecanismotitulacionposgrado.get_mecanismo_posgrado }}
                                            </li>
                                            {% if tema.rubrica %}
                                                <li class="list-group-item list-group-item-success"
                                                    style="padding: 1px 2px;text-align: left;">
                                                    <strong>RÚBRICA:</strong> {{ tema.rubrica.nombre }} </li>
                                            {% else %}
                                                <li class="list-group-item list-group-item-success"
                                                    style="padding: 1px 2px;text-align: left;background-color: #f2dede;">
                                                    <strong>SIN RÚBRICA</strong></li>
                                            {% endif %}

                                            <table class="table table-bordered">
                                                <thead>
                                                <tr>
                                                    <th>
                                                        {% if tema.califico %}
                                                            <li class="list-group-item list-group-item-success"
                                                                style="padding: 1px 2px;text-align: center;background-color: #dff0d8;">
                                                                <strong>ACTA CALIFICADA</strong></li>
                                                        {% else %}
                                                            <li class="list-group-item list-group-item-success"
                                                                style="padding: 1px 2px;text-align: left;background-color: #f2dede;">
                                                                <strong>ACTA NO CALIFICADA</strong></li>
                                                        {% endif %}
                                                    </th>
                                                    <th>
                                                        {% if tema.actacerrada %}
                                                            <li class="list-group-item list-group-item-success"
                                                                style="padding: 1px 2px;text-align: center;background-color: #dff0d8;">
                                                                <strong>ACTA CERRADA</strong></li>
                                                        {% else %}
                                                            <li class="list-group-item list-group-item-success"
                                                                style="padding: 1px 2px;text-align: left;background-color: #f2dede;">
                                                                <strong>ACTA NO CERRADA</strong></li>
                                                        {% endif %}
                                                    </th>
                                                    <th>
                                                        {% if tema.estadotribunal == 1 %}
                                                            <li class="list-group-item list-group-item-success"
                                                                style="padding: 1px 2px;text-align: center;background-color: #f1f1f1;">
                                                                <strong>{{ tema.get_estadotribunal_display }}</strong>
                                                            </li>
                                                        {% endif %}
                                                        {% if tema.estadotribunal == 2 %}
                                                            <li class="list-group-item list-group-item-success"
                                                                style="padding: 1px 2px;text-align: center;background-color: #dff0d8;">
                                                                <strong>{{ tema.get_estadotribunal_display }}</strong>
                                                            </li>
                                                        {% endif %}
                                                        {% if tema.estadotribunal == 3 %}
                                                            <li class="list-group-item list-group-item-success"
                                                                style="padding: 1px 2px;text-align: center;">
                                                                <strong>{{ tema.get_estadotribunal_display }}</strong>
                                                            </li>
                                                        {% endif %}
                                                    </th>

                                                <tr>

                                                    <th colspan="3">
                                                        <p class="list-group-item list-group-item-success"
                                                           style="padding: 4px 6px;text-align: center;background-color: #dff0d8;">
                                                            REVISIÓN DEL TRIBUNAL</p>
                                                        <div style="text-align: center;">
                                                            {{ tema|obtener_numero_de_revision_tribunal|upper }}
                                                        </div>

                                                        <div style="text-align: center">
                                                            {% if tema.obtener_ultimo_estado_revision_tribunal %}
                                                                {{ tema.obtener_ultimo_estado_revision_tribunal |upper }}
                                                            {% endif %}

                                                        </div>
                                                    </th>

                                                </tr>
                                                <tr>
                                                    {% if tema.debe_subir_correccion %}
                                                        {% if tema.tematitulacionposarchivofinal_set.all %}
                                                                <tr>
                                                                    <th colspan="3">ARCHIVO DE TESIS CORREJIDA</th>
                                                                </tr>
                                                                <tr>

                                                                    <th>
                                                                        {% if tema.archivofinal.archivo %}
                                                                            <a class="btn btn-success btn-mini"
                                                                               href="media/{{ tema.archivofinal.archivo }}"
                                                                               target="_blank"><i class="fa fa-file-word-o"></i>
                                                                                Archivo</a>
                                                                        {% endif %}
                                                                    </th>
                                                                    <th>
                                                                        {% if tema.archivofinal.estado == 1 %}
                                                                            <span class="label label-warning">{{ tema.archivofinal.get_estado_display }}</span>
                                                                        {% else %}
                                                                            <span class="label label-success">{{ tema.archivofinal.get_estado_display }}</span>
                                                                        {% endif %}
                                                                    </th>
                                                                    <th>
                                                                        {{ tema.archivofinal.fechapersonaprueba|date:"Y-m-d" }}
                                                                    </th>
                                                                </tr>
                                                        {% else %}
                                                               <tr>
                                                                <th colspan="3">ARCHIVO CORREJIDO NO CARGADO</th>
                                                            </tr>
                                                        {% endif %}
                                                    {% endif %}

                                                </tr>


                                                </thead>
                                            </table>
                                            {% if tema.get_integrantes_firman %}
                                                <h5>Integrantes Acta de grado</h5>
                                                <table>
                                                    <thead>
                                                        <tr class="text-center">
                                                            <td class="text-center"><b>Orden</b></td>
                                                            <td class="text-center"><b>Integrante</b></td>
                                                            <td class="text-center"><b>¿Firma?</b></td>
                                                        </tr>
                                                    </thead>
                                                    {% for foo in tema.get_integrantes_firman %}
                                                        <tr class="text-center">
                                                         <td class="text-center"> {{ foo.ordenfirma.orden }}</td>
                                                         <td class="text-center"> <b>{{ foo.ordenfirma }}:</b> {{ foo }} </td>
                                                         <td class="text-center"> {% if foo.firmo %}<i class="fa fa-check"></i>{% else %}x{% endif %} </td>
                                                        </tr>
                                                    {% endfor %}
                                                </table>
                                            {% else %}
                                                No existen integrantes en el acta de grado.
                                            {% endif %}

                                        </td>
                                        <td>
                                            <ul style="text-align: justify;font-size: 9px;margin: 0 0 0px 0px;">
                                                <li class="list-group-item list-group-item-success"
                                                    style="padding: 4px 6px;text-align: center;background-color: #dff0d8;">
                                                    <strong>Variables</strong></li>
                                                <li class="list-group-item list-group-item-success"
                                                    style="padding: 4px 6px;">
                                                    <strong>Dependiente: </strong> {{ tema.variabledependiente }}
                                                    <br>
                                                    <strong>Independiente: </strong> {{ tema.variableindependiente }}
                                                </li>
                                                <li class="list-group-item list-group-item-success"
                                                    style="padding: 4px 6px;;text-align: center;background-color: #d9edf7;">
                                                    <strong>Linea/Sublinea</strong></li>
                                                <li class="list-group-item list-group-item-success"
                                                    style="padding: 4px 6px;">
                                                    <strong>Linea: </strong> {{ tema.sublinea.linea.nombre }} <br>
                                                    <strong>SubLinea: </strong> {{ tema.sublinea.nombre }}
                                                </li>
                                            </ul>
                                            <table>
                                                <tr>
                                                    <td>
                                                        {% if tema.get_integrantes_certificacion_defensa %}
                                                            <h5>Integrantes certificación defensa</h5>
                                                            <table>
                                                            <thead>
                                                                <tr class="text-center">
                                                                    <td class="text-center"><b>Orden</b></td>
                                                                    <td class="text-center"><b>Integrante</b></td>
                                                                    <td class="text-center"><b>¿Firma?</b></td>
                                                                </tr>
                                                            </thead>
                                                            {% for foo in tema.get_integrantes_certificacion_defensa %}
                                                                <tr class="text-center">
                                                                 <td class="text-center"> {{ foo.ordenfirma.orden }}</td>
                                                                 <td class="text-center"> <b>{{ foo.ordenfirma }}:</b> {{ foo }} </td>
                                                                 <td class="text-center"> {% if foo.firmo %}<i class="fa fa-check"></i>{% else %}x{% endif %} </td>
                                                                </tr>
                                                            {% endfor %}
                                                        </table>
                                                        {% else %}
                                                            No existen integrantes en la certificación de la defensa.
                                                        {% endif %}
                                                    </td>
                                                    <td>
                                                        {% if tema.get_integrantes_acta_sustentacion_con_nota %}
                                                            <h5>Integrantes acta de sustentación con notas</h5>
                                                            <table>
                                                            <thead>
                                                                <tr class="text-center">
                                                                    <td class="text-center"><b>Orden</b></td>
                                                                    <td class="text-center"><b>Integrante</b></td>
                                                                    <td class="text-center"><b>¿Firma?</b></td>
                                                                </tr>
                                                            </thead>
                                                            {% for foo in tema.get_integrantes_acta_sustentacion_con_nota %}
                                                                <tr class="text-center">
                                                                 <td class="text-center"> {{ foo.ordenfirma.orden }}</td>
                                                                 <td class="text-center"> <b>{{ foo.ordenfirma }}:</b> {{ foo }} </td>
                                                                 <td class="text-center"> {% if foo.firmo %}<i class="fa fa-check"></i>{% else %}x{% endif %} </td>
                                                                </tr>
                                                            {% endfor %}
                                                        </table>
                                                        {% else %}
                                                            No existen integrantes en la acta de sustentación.
                                                        {% endif %}
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                        <td style="text-align: center">
                                            <div class="btn-group">
                                                <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown"
                                                   href="javascript:;">Acciones<span class="caret"></span></a>
                                                <ul class="dropdown-menu pull-right" style="text-align: left">
                                                    {% if not tema.rubrica %}
                                                        <li><a href="javascript:void(0);"
                                                               onclick="formModal('{{ tema.id }}','ADICIONAR RUBRICA','asignar_rubrica')"><i
                                                                class="fa fa-check"></i> Asignar rubrica</a></li>
                                                    {% endif %}
                                                    <li><a href="javascript:void(0);"
                                                           onclick="formModal('{{ tema.id }}','MODALIDAD SUSTENTACIÓN','asignar_modalidad_sustentacion')"><i
                                                            class="fa fa-check"></i> Modalidad de sustentación</a>
                                                    </li>
                                                    <li><a class="bloqueo_pantalla"
                                                           href="/adm_configuracionpropuesta?action=asignartribunal&id={{ tema.id }}&idconfiguracion={{ configuracion.id }}"><i
                                                            class="fa fa-group"></i> Tribunal Calificador</a></li>
                                                {% if tema.actacerrada == False %}

                                                <li><a class="bloqueo_pantalla"
                                                           href="/adm_configuracionpropuesta?action=cambiartribunal&id={{ tema.id }}&idconfiguracion={{ configuracion.id }}"><i
                                                            class="fa fa-user"></i> Cambiar Tribunal</a></li>
                                                {% endif %}
                                                    <li><a class="seguimiento_tribunal" idr="{{ tema.id }}"  es_pareja ="false" href="Javascript:void(0)";><i class="fa fa-search"></i> Seguimiento tribunal</a></li>

                                                    {% if tema.califico %}
                                                        <li><a href="javascript:;" class="detalle" nommaestrante="{{ tema.matricula.inscripcion.persona.nombre_completo_inverso }}"
                                                               idr="{{ tema.id }}"><i class="fa fa-list"></i>
                                                            Detalle
                                                            tribunal</a></li>
                                                    {% endif %}
                                                    <li><a onclick="vistaprevia_actaacompanamiento({{ tema.id }})"
                                                           href="javascript:;"><i class="fa fa-file-pdf-o"></i> Acta
                                                        de
                                                        acompañamiento</a></li>
                                                    {% if escoordinadoraposgrado or persona.usuario.is_superuser %}
                                                        {% if tema.estadotribunal == 2 %}
                                                        <li><a class="cerraactaposgrado"
                                                               idtematitulacion="{{ tema.id }}"
                                                               nommaestrante="{{ tema.matricula.inscripcion.persona.nombre_completo_inverso }}"
                                                               href="javascript:;"><i
                                                                class="fa fa-graduation-cap"></i> Cerrar
                                                            acta y graduar</a></li>
                                                                                                {% endif %}
                                                        {% if not tema.califico and tema.rubrica %}
                                                            <li><a class="deletecaltribunal"
                                                                   idtematitulacion="{{ tema.id }}"
                                                                   nommaestrante="{{ tema.matricula.inscripcion.persona.nombre_completo_inverso }}"
                                                                   href="javascript:;"><i class="fa fa-minus"></i>
                                                                Eliminar
                                                                calificaciones tribunal</a></li>
                                                        {% endif %}
                                                        {% if tema.rubrica %}
                                                            <li><a href="javascript:;" class="detallecalificacion"
                                                                   idpar="{{ tema.id }}"><i class="fa fa-list"></i>
                                                                Detalle calificación tribunal</a></li>
                                                        {% endif %}
                                                        <li><a class="abriractaposgrado"
                                                                   idtematitulacion="{{ tema.id }}"
                                                                   nommaestrante="{{ tema.matricula.inscripcion.persona.nombre_completo_inverso }}"
                                                                   href="javascript:;"><i
                                                                    class="fa fa-graduation-cap"></i>
                                                                Abrir acta</a></li>
                                                        {% if tema.matricula.inscripcion.graduado and tema.califico %}


                                                            <li><a class="bloqueo_pantalla"
                                                                   href="/adm_configuracionpropuesta?action=editarnumeroacta&id={{ tema.id }}"><i
                                                                    class="fa fa-edit"></i> Editar numero acta</a>
                                                            </li>
{#                                                            <li><a onclick="certificaciondefensa({{ tema.id }})"#}
{#                                                                   href="javascript:;"><i#}
{#                                                                    class="fa fa-file-pdf-o"></i>#}
{#                                                                Certificación defensa</a></li>#}

                                                            <li><a onclick="generar_certificacion_defesa({{ tema.id }})"
                                                                   href="javascript:;"><i
                                                                    class="fa fa-file-pdf-o"></i>
                                                                Generar Certificación defensa</a></li>
                                                            {#                                            <li><a onclick="formModal('{{ tema.id }}','ACTUALIZAR FECHA DE SOLICITUD DE LA PROPUESTA DE TITULACIÓN','actualizar_fecha_solicitud_propuesta')"  href="javascript:;"><i class="fa fa-list"></i>Actualizar fecha de solicitud</a></li>#}
                                                            <li><a onclick="generar_acta_grado({{ tema.id }})"
                                                                   href="javascript:;"><i
                                                                    class="fa fa-file-pdf-o"></i> Generar
                                                                Acta de Grado</a></li>
{#                                                            <li><a onclick="actadefensaposgradonotas({{ tema.id }})"#}
{#                                                                   href="javascript:;"><i#}
{#                                                                    class="fa fa-file-pdf-o"></i> Imprimir#}
{#                                                                Acta de Defensa con notas</a></li>#}
                                                            <li><a onclick="generar_acta_sustentacion_con_nota({{ tema.id }})"
                                                                   href="javascript:;"><i
                                                                    class="fa fa-file-pdf-o"></i> Generar Acta de sustentación con notas</a></li>
                                                            <li><a onclick="pdfrubricacalificaciones({{ tema.id }})"
                                                                   href="javascript:;"><i
                                                                    class="fa fa-file-pdf-o"></i> Imprimir
                                                                detalle rúbricas</a></li>
                                                        {% endif %}
                                                        <li><a onclick="actadefensaposgrado({{ tema.id }})"
                                                               href="javascript:;"><i
                                                                class="fa fa-file-pdf-o"></i> Imprimir Acta de
                                                            Defensa sin notas</a>
                                                        </li>
                                                    {% endif %}
                                                </ul>
                                            </div>
                                        </td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                        <div class='row-fluid'>
                            <div class="span12">
                                {% if paging.num_pages > 20 %}
                                    <div class='pagination'>
                                        <ul>
                                            {% if paging.primera_pagina %}
                                                <li>
                                                    <a href="/adm_configuracionpropuesta?action=tribunaltemas&idconfiguracion={{ configuracion.id }}&{% if search %}s={{ search }}&{% endif %}page=1">1</a>
                                                </li>
                                                <li>
                                                    <a href="/adm_configuracionpropuesta?action=tribunaltemas&idconfiguracion={{ configuracion.id }}&{% if search %}s={{ search }}&{% endif %}page={{ paging.ellipsis_izquierda }}"
                                                       class="active">...</a></li>
                                            {% endif %}
                                            {% for pagenumber in paging.paginas %}
                                                <li {% if pagenumber == page.number %}class='active'{% endif %}><a
                                                        href="/adm_configuracionpropuesta?action=tribunaltemas&idconfiguracion={{ configuracion.id }}&{% if search %}s={{ search }}&{% endif %}page={{ pagenumber }}">{{ pagenumber }}</a>
                                                </li>
                                            {% endfor %}
                                            {% if paging.ultima_pagina %}
                                                <li>
                                                    <a href="/adm_configuracionpropuesta?action=tribunaltemas&idconfiguracion={{ configuracion.id }}&{% if search %}s={{ search }}&{% endif %}page={{ paging.ellipsis_derecha }}"
                                                       class="active">...</a></li>
                                                <li>
                                                    <a href="/adm_configuracionpropuesta?action=tribunaltemas&idconfiguracion={{ configuracion.id }}&{% if search %}s={{ search }}&{% endif %}page={{ paging.num_pages }}">{{ paging.num_pages }}</a>
                                                </li>
                                            {% endif %}
                                        </ul>
                                    </div>
                                {% else %}
                                    <div class='pagination'>
                                        <ul>
                                            {% for pagenumber in paging.page_range %}
                                                <li {% if pagenumber == page.number %}class='active'{% endif %}><a
                                                        href="/adm_configuracionpropuesta?action=tribunaltemas&idconfiguracion={{ configuracion.id }}&{% if search %}s={{ search }}&{% endif %}page={{ pagenumber }}">{{ pagenumber }}</a>
                                                </li>
                                            {% endfor %}
                                        </ul>
                                    </div>
                                {% endif %}
                            </div>

                        </div>
                    </div>

                    <div class="tab-pane" id="2">
                        <div class="row-fluid">
                            <div class='span12'>
                                <table class='table table-bordered table-striped'>
                                    <thead>
                                    <tr>
                                        <th style="width: 5%;text-align: left;">N°</th>
                                        <th style="text-align: left;width: 40%;">Tema</th>
                                        <th style=" text-align: center; width: 40%;">Participantes</th>

                                        <th style="width: 10%;">Acciones</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for tema in temas_pareja %}
                                        <tr>
                                            <td style="text-align: center;"> {{ forloop.counter }} </td>
                                            <td style="text-align: justify;font-size: 10px;">
                                                <li class="list-group-item list-group-item-success"
                                                    style="padding: 1px 2px;text-align: justify;">
                                                    {% if persona.usuario.is_superuser %} {{ tema.id }}{% endif %}
                                                    <strong>TEMA ACTUALIZADO POR TUTOR:</strong>
                                                    {% for listadotribunal in tema.detalletribunal %}
                                                        {% if listadotribunal.subtema %}
                                                            {{ listadotribunal.subtema }}
                                                        {% endif %}
                                                         {% if forloop.last %}
                                                            <a href='media/{{ listadotribunal.obtener_archivo_titulacion_final}}' target="_blank"
                                                               class='btn btn-info btn-mini tu'
                                                               title="Descargar"><i
                                                                    class="fa fa-download"></i></a>
                                                        {% endif %}
                                                    {% endfor %}
                                                </li>
                                                <li class="list-group-item list-group-item-success"
                                                    style="padding: 1px 2px;text-align: justify;">
                                                    <strong>MECANISMO:</strong> {{ tema.mecanismotitulacionposgrado.get_mecanismo_posgrado }}
                                                </li>

                                                <li class="list-group-item list-group-item-success"
                                                    style="padding: 1px 2px;text-align: justify;">
                                                    {% if tema.tutor %}
                                                        <strong>Tutor: </strong>
                                                        {{ tema.tutor.persona.titulacion_principal_senescyt_registro.titulo.abreviatura|lower|title|default_if_none:'' }}
                                                        {{ tema.tutor.persona.nombre_completo_inverso }} <br>
                                                    {% else %}
                                                        <strong>No tiene aún tutor</strong>
                                                    {% endif %}
                                                </li>

                                                <li>
                                                    <ul style="text-align: justify;font-size: 9px;margin: 0 0 0px 0px;">
                                                        {% for listadotribunal in tema.detalletribunal %}
                                                            <li class="list-group-item list-group-item-success"
                                                                style="padding: 4px 6px;text-align: center;background-color: #dff0d8;">
                                                                <strong>TRIBUNAL
                                                                    CALIFICADOR<br></strong>{{ listadotribunal.fechadefensa|date:"Y-m-d" }}
                                                                | {{ listadotribunal.horadefensa|time:"H:i" }} a
                                                                {{ listadotribunal.horafindefensa|time:"H:i" }}</li>
                                                            <li class="list-group-item list-group-item-success"
                                                                style="padding: 2px 4px;">
                                                                <strong>Presidente: </strong>
                                                                {{ listadotribunal.presidentepropuesta.persona.titulacion_principal_senescyt_registro.titulo.abreviatura|lower|title|default_if_none:'' }}
                                                                {{ listadotribunal.presidentepropuesta|default_if_none:"" }}
                                                            </li>
                                                            <li class="list-group-item list-group-item-success"
                                                                style="padding: 2px 4px;">
                                                                <strong>Secretario: </strong>
                                                                {{ listadotribunal.secretariopropuesta.persona.titulacion_principal_senescyt_registro.titulo.abreviatura|lower|title|default_if_none:'' }}
                                                                {{ listadotribunal.secretariopropuesta|default_if_none:"" }}
                                                            </li>
                                                            <li class="list-group-item list-group-item-success"
                                                                style="padding: 2px 4px;">
                                                                <strong>Vocal: </strong>
                                                                {{ listadotribunal.delegadopropuesta.persona.titulacion_principal_senescyt_registro.titulo.abreviatura|lower|title|default_if_none:'' }}
                                                                {{ listadotribunal.delegadopropuesta|default_if_none:"" }}
                                                            </li>
                                                        {% endfor %}

                                                    </ul>

                                                </li>

                                                <li>
                                                    <p class="list-group-item list-group-item-success"
                                                       style="padding: 4px 6px;text-align: center;background-color: #dff0d8;">
                                                        REVISIÓN DEL TRIBUNAL</p>
                                                    <div
                                                            style="text-align: center;">
                                                        {{ tema|obtener_numero_de_revision_tribunal_pareja |upper }}
                                                    </div>

                                                    <div
                                                            style="text-align: center">
                                                        {% if tema.obtener_ultimo_estado_revision_tribunal %}
                                                            {{ tema.obtener_ultimo_estado_revision_tribunal |upper }}
                                                        {% endif %}

                                                    </div>
                                                </li>


                                            </td>

                                            <td>
                                                {% for foo in tema.obtener_parejas %}
                                                    <table>
                                                        <thead>
                                                        {% if persona.usuario.is_superuser %}
                                                            <span class="tu" title="Inscripcion id">{{ foo.matricula.inscripcion.id }}</span>
                                                        {% endif %}
                                                        <i class="fa fa-graduation-cap"></i>
                                                        [{{ foo.id }}]{{ foo.matricula.inscripcion.persona.titulacion_solo3nivelparapogrado.titulo.abreviatura|default_if_none:'' }}
                                                        {{ foo.matricula.inscripcion.persona.nombre_completo_inverso }}
                                                        </thead>

                                                        <th>

                                                            <div class="col-md-3">
                                                                {% with tieneapro=foo|call:'tiene_aprobaciones' estadoaprobacion=foo|call:'estado_aprobacion' %}
                                                                    {% if tieneapro %}
                                                                        {% if estadoaprobacion %}
                                                                            {% if estadoaprobacion.estado == aprobar %}
                                                                                <li class="list-group-item list-group-item-success"
                                                                                    style="padding: 1px 2px;text-align: center;background-color: #dff0d8;">
                                                                                    <strong>{{ estadoaprobacion.get_estado_display }}</strong>
                                                                                </li>
                                                                            {% else %}
                                                                                {% if estadoaprobacion.estado == rechazar %}
                                                                                    <li class="list-group-item list-group-item-success"
                                                                                        style="padding: 1px 2px;text-align: left;background-color: #f2dede;">
                                                                                        <strong>{{ estadoaprobacion.get_estado_display }}</strong>
                                                                                    </li>
                                                                                {% else %}
                                                                                    <span class="label label-warning">{{ estadoaprobacion.get_estado_display }}</span>
                                                                                {% endif %}
                                                                            {% endif %}
                                                                        {% endif %}
                                                                    {% endif %}
                                                                {% endwith %}
                                                            </div>
                                                        <td>
                                                            <div class="col-md-3">
                                                                {% if foo.matricula.inscripcion.graduado %}
                                                                    <li class="list-group-item list-group-item-success"
                                                                        style="padding: 1px 2px;text-align: center;background-color: #dff0d8;">
                                                                        <strong>GRADUADO</strong></li>
                                                                {% else %}
                                                                    <li class="list-group-item list-group-item-success"
                                                                        style="padding: 1px 2px;text-align: center;background-color: #f2dede;">
                                                                        <strong>NO GRADUADO</strong></li>
                                                                {% endif %}
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="col-md-3">
                                                                {% if foo.califico %}
                                                                    <li class="list-group-item list-group-item-success"
                                                                        style="padding: 1px 2px;text-align: center;background-color: #dff0d8;">
                                                                        <strong>ACTA CALIFICADA</strong></li>
                                                                {% else %}
                                                                    <li class="list-group-item list-group-item-success"
                                                                        style="padding: 1px 2px;text-align: center;background-color: #f2dede;">
                                                                        <strong>ACTA NO CALIFICADA</strong></li>
                                                                {% endif %}
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="col-md-3">
                                                                {% if foo.actacerrada %}
                                                                    <li class="list-group-item list-group-item-success"
                                                                        style="padding: 1px 2px;text-align: center;background-color: #dff0d8;">
                                                                        <strong>ACTA CERRADA</strong></li>
                                                                {% else %}
                                                                    <li class="list-group-item list-group-item-success"
                                                                        style="padding: 1px 2px;text-align: center;background-color: #f2dede;">
                                                                        <strong>ACTA NO CERRADA</strong></li>
                                                                {% endif %}
                                                            </div>
                                                        </td>
                                                        <td>
                                                            {% if foo.estadotribunal == 1 %}
                                                                <li class="list-group-item list-group-item-success"
                                                                    style="padding: 1px 2px;text-align: center;background-color: #f1f1f1;">
                                                                    <strong>{{ foo.get_estadotribunal_display }}</strong>
                                                                </li>
                                                            {% endif %}
                                                            {% if foo.estadotribunal == 2 %}
                                                                <li class="list-group-item list-group-item-success"
                                                                    style="padding: 1px 2px;text-align: center;background-color: #dff0d8;">
                                                                    <strong>{{ foo.get_estadotribunal_display }}</strong>
                                                                </li>
                                                            {% endif %}
                                                            {% if foo.estadotribunal == 3 %}
                                                                <li class="list-group-item list-group-item-success"
                                                                    style="padding: 1px 2px;text-align: center;">
                                                                    <strong>{{ foo.get_estadotribunal_display }}</strong>
                                                                </li>
                                                            {% endif %}
                                                        </td>
                                                        </th>
                                                    </table>
                                                    <div class="row-fluid ">
                                                        <table>
                                                            <thead></thead>
                                                            <tr>
                                                                <td>
                                                                    <div class="col-md-3 " style="padding-top: 5px;">
                                                                        {% if foo.archivo %}
                                                                            <a href='{{ foo.archivo.url }}'
                                                                               target="_blank"
                                                                               class='btn btn-info btn-mini tu'
                                                                               title="Archivo solicitud propuesta"> <i
                                                                                    class="fa fa-download "></i></a>
                                                                        {% endif %}
                                                                    </div>

                                                                </td>
                                                                <td>
                                                                    <div class="col-md-3 " style="padding-top: 5px;">

                                                                            <a onclick="actadefensaposgrado({{ foo.id }})"
                                                                               href="javascript:;"
                                                                               class='btn btn-info btn-mini tu'
                                                                               title="Acta defensa sin notas"> <i
                                                                                    class="fa fa-download "></i></a>


                                                                    </div>
                                                                </td>
                                                                {% if escoordinadoraposgrado or persona.usuario.is_superuser %}
                                                                    {% if foo.rubrica %}
                                                                        <td>
                                                                            <div class="col-md-3 "
                                                                                 style="padding-top: 5px;">

                                                                                <li>
                                                                                    <a href="javascript:;"
                                                                                       title="Detalle calificación tribunal"
                                                                                       class="btn btn-mini  btn-warning detallecalificacion tu"
                                                                                       idpar="{{ foo.id }}"><i
                                                                                            class="fa fa-list"></i>
                                                                                    </a></li>

                                                                            </div>
                                                                        </td>
                                                                    {% endif %}
                                                                    {% if  foo.rubrica and not foo.actacerrada %}
                                                                        <td>
                                                                            <div class="col-md-3 "
                                                                                 style="padding-top: 5px;">
                                                                                {% if foo.estadotribunal == 2 %}
                                                                                    <li>
                                                                                        <a class="cerraactaposgrado btn btn-mini  btn-silver tu"
                                                                                           idtematitulacion="{{ foo.id }}"
                                                                                           nommaestrante="{{ foo.matricula.inscripcion.persona.nombre_completo_inverso }}"
                                                                                           href="javascript:;"><i
                                                                                                class="fa fa-graduation-cap"></i>
                                                                                            Cerrar acta y graduar</a>

                                                                                    </li>
                                                                                {% endif %}


                                                                            </div>
                                                                        </td>
                                                                    {% endif %}
                                                                    {% if  foo.actacerrada %}
                                                                        <td>
                                                                            <div class="col-md-3 "
                                                                                 style="padding-top: 5px;">

                                                                                <li>
                                                                                    <a class="abriractaposgrado btn btn-mini  btn-silver  tu"
                                                                                       idtematitulacion="{{ foo.id }}"
                                                                                       nommaestrante="{{ foo.matricula.inscripcion.persona.nombre_completo_inverso }}"
                                                                                       href="javascript:;"><i
                                                                                            class="fa fa-graduation-cap"></i>
                                                                                        Abrir acta</a></li>


                                                                            </div>
                                                                        </td>
                                                                    {% endif %}

                                                                    {# certificados y actas#}

                                                                    {% if foo.matricula.inscripcion.graduado and foo.califico %}
                                                                        <td>
                                                                            <div class="col-md-3 "
                                                                                 style="padding-top: 5px;">
                                                                                <li>
                                                                                    <a class="bloqueo_pantalla btn btn-mini btn-silver tu "
                                                                                       title="Editar numero acta" href="/adm_configuracionpropuesta?action=editarnumeroacta&id={{ foo.id }}"><i class="fa fa-edit"></i></a>
                                                                                </li>
                                                                            </div>
                                                                        </td>

                                                                        <td>
                                                                            <div class="col-md-3 "
                                                                                 style="padding-top: 5px;">
                                                                                <li>
{#                                                                                    <a href='javascript:;' onclick="certificaciondefensa({{ foo.id }})" class="btn btn-sucess btn-mini" >Imprimir certificación de la defensa</a>#}
                                                                                    <a href='javascript:;' onclick="generar_certificacion_defesa({{ foo.id }})" class="btn btn-sucess btn-mini" >Generar certificación de la defensa</a>
                                                                                </li>
                                                                            </div>
                                                                        </td>
                                                                        <td>
                                                                            <div class="col-md-3 "
                                                                                 style="padding-top: 5px;">

                                                                                <li>
                                                                                    <a href='javascript:;' onclick="generar_acta_grado({{ foo.id }})" class="btn btn-sucess btn-mini" >Generar acta de grado</a>

                                                                                </li>
                                                                            </div>
                                                                        </td>

                                                                        <td>
                                                                            <div class="col-md-3 "
                                                                                 style="padding-top: 5px;">
                                                                                <li>
{#                                                                                    <a href='javascript:;' onclick="actadefensaposgradonotas({{ foo.id }})" class="btn btn-sucess btn-mini" >Imprimir Acta de defensa con notas</a>#}
                                                                                    <a href='javascript:;' onclick="generar_acta_sustentacion_con_nota({{ foo.id }})" class="btn btn-sucess btn-mini" >Generar Acta de sustentación con notas</a>
                                                                                </li>
                                                                            </div>
                                                                        </td>

                                                                        <td>
                                                                            <div class="col-md-3 "
                                                                                 style="padding-top: 5px;">
                                                                                <li>
                                                                                      <a href='javascript:;' onclick="pdfrubricacalificaciones({{ foo.id }})" class="btn btn-sucess btn-mini" > Imprimir detalle rúbricas</a>

                                                                                </li>
                                                                            </div>
                                                                        </td>
                                                                    {% endif %}

                                                                {% endif %}

                                                                {% if persona.usuario.is_superuser %}
                                                                    {% if not foo.califico and foo.rubrica %}
                                                                        <td>
                                                                            <div class="col-md-3 "
                                                                                 style="padding-top: 5px;">
                                                                                <li>
                                                                                    <a class="deletecaltribunal btn btn-mini btn-danger"
                                                                                       title="Eliminar calificaciones tribunal"
                                                                                       idtematitulacion="{{ foo.id }}"
                                                                                       nommaestrante="{{ foo.matricula.inscripcion.persona.nombre_completo_inverso }}"
                                                                                       href="javascript:;"><i
                                                                                            class="fa fa-minus"></i>
                                                                                    </a></li>

                                                                            </div>
                                                                        </td>
                                                                    {% endif %}
                                                                {% endif %}
                                                            </tr>
                                                        </table>
                                                    </div>
                                                    <div>

                                                        <ul style="text-align: center;font-size: 9px;margin: 0 0 0px 0px;">
                                                            <li class="list-group-item list-group-item-success"
                                                                style="padding: 2px 6px;text-align: center;background-color: #dff0d8;">
                                                                <strong>Estado Documentos</strong>
                                                            </li>
                                                            {% if foo.estado_firmas_acta_graduado != None %}
                                                                <li class="list-group-item list-group-item-success"
                                                                    style="padding: 4px 6px;">
                                                                    ACTA DE GRADO <br>
                                                                    {% if  foo.get_firmado_por %}
                                                                        {% for integrante in  foo.get_firmado_por %}
                                                                            <span class="label label-info tu"
                                                                                  title="Firmado">
                                                                                {{ integrante }}
                                                                            </span>
                                                                        {% endfor %}
                                                                        <br>
                                                                        <button class="btn btn-primary btn-mini"
                                                                                title="Historial de archivo"
                                                                                onclick="formModal('{{ foo.id }}','HISTORIAL FIRMA ACTA DE GRADO','historial_firma_actas_de_grado', 1000)"
                                                                                href="javascript:;"><i
                                                                                class="fa fa-clock-o"></i>
                                                                        </button>
                                                                        <a class="btn btn-default btn-sm btn-hover gallerypdf"
                                                                           data-fancybox-type="iframe"
                                                                           href="{{ foo.get_documento_informe.url }}"><img
                                                                                src="/static/images/pdf.png" width="18"
                                                                                height="18" align="absmiddle"></a></a>
                                                                        <br>
                                                                    {% else %}
                                                                        <span class="label label-info tu"
                                                                              title="ACTA GENERADA">
                                                                                ACTA DE GRADO GENERADA
                                                                        </span>
                                                                        <button class="btn btn-primary btn-mini"
                                                                                title="Historial de archivo"
                                                                                onclick="formModal('{{ foo.id }}','HISTORIAL FIRMA ACTA DE GRADO','historial_firma_actas_de_grado', 1000)"
                                                                                href="javascript:;"><i
                                                                                class="fa fa-clock-o"></i>
                                                                        </button>
                                                                        <a class="btn btn-default btn-sm btn-hover gallerypdf"
                                                                           data-fancybox-type="iframe"
                                                                           href="{{ foo.get_documento_informe.url }}"><img
                                                                                src="/static/images/pdf.png" width="18"
                                                                                height="18" align="absmiddle"></a></a>
                                                                        <br>
                                                                    {% endif %}
                                                                </li>
                                                            {% else %}
                                                                <li class="list-group-item list-group-item-success"
                                                                    style="padding: 4px 6px;">
                                                                    <span class="label label-default tu" title="PENDIENTE">
                                                                        POR GENERAR ACTA DE GRADO
                                                                    </span>
                                                                </li>
                                                            {% endif %}

                                                            {% if foo.archivo_certificacion_defensa %}
                                                                <li class="list-group-item list-group-item-success"
                                                                    style="padding: 4px 6px;">
                                                                    CERTIFICACIÓN DEFENSA <br>
                                                                    {% if  foo.get_firmado_por_certificacion_defensa %}

                                                                        {% for integrante in  foo.get_firmado_por_certificacion_defensa %}
                                                                            <span class="label label-info tu"
                                                                                  title="Firmado">
                                                                                {{ integrante }}
                                                                            </span>
                                                                        {% endfor %}
                                                                        <br>
                                                                        <button class="btn btn-primary btn-mini"
                                                                                title="Historial de archivo"
                                                                                onclick="formModal('{{ foo.id }}','HISTORIAL FIRMA CERTIFICACIÓN DEFENSA','historial_firma_certificacion_defensa', 1000)"
                                                                                href="javascript:;"><i
                                                                                class="fa fa-clock-o"></i>
                                                                        </button>
                                                                        <a class="btn btn-default btn-sm btn-hover gallerypdf"
                                                                           data-fancybox-type="iframe"
                                                                           href="{{ foo.get_documento_certificacion_defensa.url }}"><img
                                                                                src="/static/images/pdf.png" width="18"
                                                                                height="18" align="absmiddle"></a></a>
                                                                        <br>
                                                                    {% else %}
                                                                        <span class="label label-info tu" title="ACTA GENERADA">
                                                                            CERTIFICACIÓN DEFENSA GENERADA
                                                                        </span>
                                                                        <button class="btn btn-primary btn-mini"
                                                                                title="Historial de archivo"
                                                                                onclick="formModal('{{ foo.id }}','HISTORIAL FIRMA CERTIFICACIÓN DEFENSA','historial_firma_certificacion_defensa', 1000)"
                                                                                href="javascript:;"><i
                                                                                class="fa fa-clock-o"></i>
                                                                        </button>
                                                                        <a class="btn btn-default btn-sm btn-hover gallerypdf"
                                                                           data-fancybox-type="iframe"
                                                                           href="{{ foo.get_documento_certificacion_defensa.url }}"><img
                                                                                src="/static/images/pdf.png" width="18"
                                                                                height="18" align="absmiddle"></a></a>
                                                                        <br>
                                                                    {% endif %}
                                                                </li>
                                                            {% else %}
                                                                <li class="list-group-item list-group-item-success"
                                                                    style="padding: 4px 6px;">
                                                                <span class="label label-default tu" title="PENDIENTE">
                                                                    POR GENERAR CERTIFICACIÓN DEFENSA
                                                                </span>
                                                                </li>
                                                            {% endif %}

                                                            {% if foo.archivo_acta_sustentacion %}
                                                                <li class="list-group-item list-group-item-success"
                                                                    style="padding: 4px 6px;">
                                                                    ACTA DE SUSTENTACIÓN <br>
                                                                    {% if  foo.get_firmado_por_acta_sustentacion_con_nota %}

                                                                        {% for integrante in  foo.get_firmado_por_acta_sustentacion_con_nota %}
                                                                            <span class="label label-info tu"
                                                                                  title="Firmado">
                                                                    {{ integrante }}
                                                                </span>
                                                                        {% endfor %}
                                                                        <br>
                                                                        <button class="btn btn-primary btn-mini"
                                                                                title="Historial de archivo"
                                                                                onclick="formModal('{{ foo.id }}','HISTORIAL ACTA SUSTENTACIÓN CON NOTA','historial_firma_acta_sustentacion_nota', 1000)"
                                                                                href="javascript:;"><i
                                                                                class="fa fa-clock-o"></i>
                                                                        </button>
                                                                        <a class="btn btn-default btn-sm btn-hover gallerypdf"
                                                                           data-fancybox-type="iframe"
                                                                           href="{{ foo.get_documento_acta_sustentacion_nota.url }}"><img
                                                                                src="/static/images/pdf.png" width="18"
                                                                                height="18" align="absmiddle"></a></a>
                                                                        <br>
                                                                    {% else %}
                                                                        <span class="label label-info tu"
                                                                              title="ACTA GENERADA">
                                                                    ACTA DE SUSTENTACIÓN GENERADA
                                                            </span>
                                                                        <button class="btn btn-primary btn-mini"
                                                                                title="Historial de archivo"
                                                                                onclick="formModal('{{ foo.id }}','HISTORIAL ACTA SUSTENTACIÓN CON NOTA','historial_firma_acta_sustentacion_nota', 1000)"
                                                                                href="javascript:;"><i
                                                                                class="fa fa-clock-o"></i>
                                                                        </button>
                                                                        <a class="btn btn-default btn-sm btn-hover gallerypdf"
                                                                           data-fancybox-type="iframe"
                                                                           href="{{ foo.get_documento_acta_sustentacion_nota.url }}"><img
                                                                                src="/static/images/pdf.png" width="18"
                                                                                height="18" align="absmiddle"></a></a>
                                                                        <br>
                                                                    {% endif %}
                                                                </li>
                                                            {% else %}
                                                                <li class="list-group-item list-group-item-success"
                                                                    style="padding: 4px 6px;">
                                                                    <span class="label label-default tu" title="PENDIENTE">
                                                                        POR GENERAR ACTA DE SUSTENTACIÓN
                                                                    </span>
                                                                </li>
                                                            {% endif %}
                                                        </ul>

                                                        <table>
                                                            <tr>
                                                                <td>
                                                                    {% if foo.get_integrantes_firman %}
                                                                        <h5>Integrantes Acta de grado</h5>
                                                                        <table>
                                                                            <thead>
                                                                                <tr class="text-center">
                                                                                    <td class="text-center"><b>Orden</b></td>
                                                                                    <td class="text-center"><b>Integrante</b></td>
                                                                                    <td class="text-center"><b>¿Firma?</b></td>
                                                                                </tr>
                                                                            </thead>
                                                                            {% for fo in foo.get_integrantes_firman %}
                                                                                <tr class="text-center">
                                                                                 <td class="text-center"> {{ fo.ordenfirma.orden }}</td>
                                                                                 <td class="text-center"> <b>{{ fo.ordenfirma }}:</b> {{ fo }} </td>
                                                                                 <td class="text-center"> {% if fo.firmo %}<i class="fa fa-check"></i>{% else %}x{% endif %} </td>
                                                                                </tr>
                                                                            {% endfor %}
                                                                        </table>
                                                                    {% else %}
                                                                        No existen integrantes en el acta de grado.
                                                                    {% endif %}
                                                                </td>
                                                                <td>
                                                                    {% if foo.get_integrantes_certificacion_defensa %}
                                                                        <h5>Integrantes certificación defensa</h5>
                                                                        <table>
                                                                        <thead>
                                                                            <tr class="text-center">
                                                                                <td class="text-center"><b>Orden</b></td>
                                                                                <td class="text-center"><b>Integrante</b></td>
                                                                                <td class="text-center"><b>¿Firma?</b></td>
                                                                            </tr>
                                                                        </thead>
                                                                        {% for fo in foo.get_integrantes_certificacion_defensa %}
                                                                            <tr class="text-center">
                                                                             <td class="text-center"> {{ fo.ordenfirma.orden }}</td>
                                                                             <td class="text-center"> <b>{{ fo.ordenfirma }}:</b> {{ fo }} </td>
                                                                             <td class="text-center"> {% if fo.firmo %}<i class="fa fa-check"></i>{% else %}x{% endif %} </td>
                                                                            </tr>
                                                                        {% endfor %}
                                                                    </table>
                                                                    {% else %}
                                                                        No existen integrantes en la certificación de la defensa.
                                                                    {% endif %}
                                                                </td>
                                                                <td>
                                                                    {% if foo.get_integrantes_acta_sustentacion_con_nota %}
                                                                        <h5>Integrantes acta de sustentación con notas</h5>
                                                                        <table>
                                                                        <thead>
                                                                            <tr class="text-center">
                                                                                <td class="text-center"><b>Orden</b></td>
                                                                                <td class="text-center"><b>Integrante</b></td>
                                                                                <td class="text-center"><b>¿Firma?</b></td>
                                                                            </tr>
                                                                        </thead>
                                                                        {% for fo in foo.get_integrantes_acta_sustentacion_con_nota %}
                                                                            <tr class="text-center">
                                                                             <td class="text-center"> {{ fo.ordenfirma.orden }}</td>
                                                                             <td class="text-center"> <b>{{ fo.ordenfirma }}:</b> {{ fo }} </td>
                                                                             <td class="text-center"> {% if fo.firmo %}<i class="fa fa-check"></i>{% else %}x{% endif %} </td>
                                                                            </tr>
                                                                        {% endfor %}
                                                                    </table>
                                                                    {% else %}
                                                                        No existen integrantes en la acta de sustentación.
                                                                    {% endif %}
                                                                </td>
                                                            </tr>
                                                        </table>

                                                    </div>


                                                {% endfor %}
                                                {% if tema.rubrica_pareja %}
                                                    <li class="list-group-item list-group-item-success"
                                                        style="padding: 1px 2px;text-align: left;">
                                                        <strong>RÚBRICA:</strong> {{ tema.rubrica_pareja.nombre }}
                                                    </li>
                                                {% else %}
                                                    <li class="list-group-item list-group-item-success"
                                                        style="padding: 1px 2px;text-align: left;background-color: #f2dede;">
                                                        <strong>SIN RÚBRICA</strong></li>
                                                {% endif %}

                                                {% if tema.debe_subir_correccion %}
                                                    {% if tema.tematitulacionposarchivofinal_set.all %}

                                                    <table class="table">
                                                        <th colspan="3">ARCHIVO DE TESIS CORREJIDA</th>
                                                        <tr>
                                                            <th>
                                                                {% if tema.archivofinal.archivo %}
                                                                    <a class="btn btn-success btn-mini"
                                                                       href="media/{{ tema.archivofinal.archivo }}"
                                                                       target="_blank"><i
                                                                            class="fa fa-file-word-o"></i>
                                                                        Archivo</a>
                                                                {% endif %}
                                                            </th>
                                                            <th>
                                                                {% if tema.archivofinal.estado == 1 %}
                                                                    <span class="label label-warning">{{ tema.archivofinal.get_estado_display }}</span>
                                                                {% else %}
                                                                    <span class="label label-success">{{ tema.archivofinal.get_estado_display }}</span>
                                                                {% endif %}
                                                            </th>
                                                            <th colspan="">
                                                                {{ tema.archivofinal.fechapersonaprueba|date:"Y-m-d" }}
                                                            </th>
                                                        </tr>
                                                    </table>


                                                {% else %}
                                                    <p>ARCHIVO CORREJIDO NO CARGADO</p>
                                                {% endif %}

                                                {% endif %}


                                            </td>

                                            <td style="text-align: center">
                                                <div class="btn-group">
                                                    <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown"
                                                       href="javascript:;">Acciones<span class="caret"></span></a>
                                                    <ul class="dropdown-menu pull-right" style="text-align: left">
                                                        {% if not tema.rubrica_pareja %}
                                                            <li><a href="javascript:void(0);"
                                                                   onclick="formModal('{{ tema.id }}','ADICIONAR RUBRICA','asignar_rubrica_pareja')"><i
                                                                    class="fa fa-check"></i> Asignar rúbrica</a>
                                                            </li>
                                                        {% endif %}
                                                        <li><a href="javascript:void(0);"
                                                               onclick="formModal('{{ tema.id }}','MODALIDAD SUSTENTACIÓN','asignar_modalidad_sustentacion_pareja')"><i
                                                                class="fa fa-check"></i> Modalidad de
                                                            sustentación</a>
                                                        </li>
                                                        <li><a class="bloqueo_pantalla"
                                                               href="/adm_configuracionpropuesta?action=asignartribunalpareja&id={{ tema.id }}&idconfiguracion={{ configuracion.id }}"><i
                                                                class="fa fa-group"></i> Tribunal Calificador</a>
                                                        </li>
                                                        {% if tema.acta_cerrada == False %}
                                                     <li><a class="bloqueo_pantalla"
                                                           href="/adm_configuracionpropuesta?action=cambiartribunalpareja&id={{ tema.id }}&idconfiguracion={{ configuracion.id }}"><i
                                                            class="fa fa-user"></i> Cambiar Tribunal</a></li>
                                                        {% endif %}
                                                     <li><a class="seguimiento_tribunal" idr="{{ tema.id }}"  es_pareja ="true" href="Javascript:void(0)";><i class="fa fa-search"></i> Seguimiento tribunal</a></li>


                                                        <li>
                                                            <a onclick="vistaprevia_actaacompanamientopareja({{ tema.id }})"
                                                               href="javascript:;"><i class="fa fa-file-pdf-o"></i>
                                                                Acta de acompañamiento</a>
                                                        </li>

                                                        {% if not tema.califcacion_ambas_pareja and tema.rubrica_pareja %}
                                                            <li>
                                                                <a class="deletecaltribunalpareja "
                                                                   title="Eliminar calificaciones tribunal"
                                                                   idtematitulacion="{{ tema.id }}"
                                                                   nommaestrante=" {% for participante in tema.obtener_parejas %}{{ participante.matricula.inscripcion.persona.nombre_completo_inverso }}{% if forloop.first %} y {% endif %}{% endfor %}"
                                                                   href="javascript:;"><i class="fa fa-minus"></i>
                                                                    Eliminar calificaciones tribunal
                                                                </a>
                                                            </li>
                                                        {% endif %}

                                                    </ul>
                                                </div>
                                            </td>

                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade static" id="detalleguiaspracticasmodal" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Listado de guías de prácticas</h3>
        </div>
        <div class="modal-body" id="detalleguiaspracticasmodal_body"></div>
        <div class="modal-footer">
            <div style="float: right">
                <a href="javascript:;" id="detalleguiaspracticasmodal_cerrar" class="btn btn-info"> Cerrar</a>
            </div>
        </div>
    </div>
    <div class="modal fade static" id="detalletalentohumanomodal" style="display: none;">
        <div class="modal-header">
            <h4 id="nombremaestrante">Detalle Tribunal</h4>
        </div>
        <div class="modal-body" id="detalletalentohumanomodal_contenido">
        </div>
        <div class="modal-footer">
            <a href="javascript:;" class="btn btn-cerrar" id="detalletalentohumanomodal_cerrar">Cerrar</a>
        </div>
    </div>
    <div class="modal fade static" id="deletemodal" style="display: none;">
    </div>
    <div class="modal fade static" id="modallistado" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Reporte listado</h3>
        </div>
        <div class="modal-body panelbody">
            <div class="alert alert-info incompletoaddindicadoresrural" style="display: none;">
                <i class="fa fa-info-sign"></i> Complete todos los campos para continuar
            </div>
            <div class="alert alert-danger" id="incompletovaloresaddindicadoresrural" style="display: none;">
                <i class="fa fa-info-sign"></i> Revise los valores, la fecha/hora DESDE no debe ser mayor a la
                fecha/hora HASTA
            </div>
            <div class="alert alert-danger" id="alertaingresoaddindicadoresrural" style="display: none;"> FECHAS YA
                FUERON INGRESADAS
            </div>
            <div class="row-fluid">
                <form id="formulario3" class='form-vertical' action="" method="POST">
                    Fecha Inicio:<br><input type="text" name="id_fechainirural" id="id_fechainirural"
                                            placeholder="Fecha Inicio">
                    <br>Fecha Fin:<br><input type="text" name="id_fechafinrural" id="id_fechafinrural"
                                             placeholder="Fecha Fin">
                    <br><br><input type="checkbox" id="idtodos" name="idtodos"> Todos (significa que no consultará por
                    fecha)
                </form>
            </div>
        </div>
        <div class="modal-footer">
            <a href="javascript:;" class="btn btn-warning" id="generar_reporterural"><i class="fa fa-list"></i> Generar
                Reporte</a>
            <a href="javascript:;" class="btn btn-cerrar btn-info" id="cerrarindicadoresaddrural">Cerrar</a>
        </div>
    </div>
{% endblock %}
