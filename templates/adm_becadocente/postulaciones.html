{% extends "base.html" %}
{% load humanize %}
{% load sga_extras %}
{% block heading %}
    <link rel="stylesheet" href="/static/css/bloques.css">
    <script type="text/javascript" src='/static/js/jquery.validationEngine.js?v=1.0.0'></script>
    <script type="text/javascript" src='/static/js/jquery.validationEngine-es.js?v=1.0.0' ></script>
    <link type='text/css' rel='stylesheet' href="/static/css/validationEngine.jquery.css?v=1.0.0"/>
    <script type="text/javascript">
        $(function() {
            $('[data-bs-toggle="tooltip"]').on('click', function () {
                $(this).tooltip('hide');
            });

            $("#search").click(function() {
                busqueda();
            });

            $('#searchinput').keyup(function(e) {
                if(e.keyCode == 13) {
                    $("#search").trigger("click");
                }
            });

            busqueda = function () {
                let term = $("#searchinput").val().toUpperCase().trim();

                if (term.length > 0){
                    location.href = "/adm_becadocente?action=postulaciones&idc={{ convocatoria.id|encrypt }}&s="+$("#searchinput").val().toUpperCase();
                }
            };

            $(".mostrartotales").click(function() {
                let id = $(this).attr('idc');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becadocente",
                    data: {'action': 'mostrartotales', 'id': id},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".paneltitlemostrartotales").html(data.title);
                            $(".panelbodymostrartotales").html(data.data);
                            $("#itemspanelmostrartotales").modal({backdrop:'static'}).modal('show');
                        } else {
                            mensajeErrorSwal("No se puede consultar", data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        mensajeErrorSwal("No se puede consultar", "Error al enviar los datos")
                    },
                    dataType: "json"
                });
            });

            $(".mostrarrecorrido").click(function() {
                let id = $(this).attr('idc');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becadocente",
                    data: {'action': 'mostrarrecorridopostulacion', 'id': id},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".paneltitlerecorrido").html(data.title);
                            $(".panelbodyrecorrido").html(data.data);
                            $("#itemspanelrecorrido").modal({backdrop:'static'}).modal('show');
                        } else {
                            mensajeErrorSwal("No se puede consultar", data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        mensajeErrorSwal("No se puede consultar", "Error al enviar los datos")
                    },
                    dataType: "json"
                });
            });

            $(".imprimirinforme").click(function() {
                let id=$(this).attr('id');
                let tipo=$(this).attr('tipo');
                let accion = (tipo=='IO') ? 'informeotorgamientopdf': 'informejuridicopdf';

                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_becadocente",
                    data: {'action':accion, 'id': id},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result=='ok'){
                            window.open(data.documento, '_blank');
                            location.href = "/adm_becadocente?action=postulaciones&idc={{ convocatoria.id|encrypt }}&id="+data.id;
                        } else {
                            mensajeErrorSwal("No se puede imprimir", data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        mensajeErrorSwal("No se puede consultar", "Error al enviar los datos")
                    },
                    dataType: "json"
                });
            });

            $(".subirinforme").click(function() {
                let id = $(this).attr('id');
                let tipo = $(this).attr('tipo');

                let accion = (tipo == 'IO') ? 'subirinformeotorgamiento': 'subirinformejuridico';

                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becadocente",
                    data: {'action': accion, 'id': id},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodysubirinforme").html(data.data);
                            $(".paneltitlesubirinforme").html(data.title);
                            $("#itemspanelsubirinforme").modal({backdrop:'static'}).modal('show');
                        } else {
                            mensajeErrorSwal("No se puede consultar", data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        mensajeErrorSwal("No se puede consultar", "Error al enviar los datos")
                    },
                    dataType: "json"
                });
            });

            $("#itemspanelsubirinforme .guardar").click(function () {
                envioformularioreg("/adm_becadocente", $("#action").val(), false);
                return false;
            });

            $(".notificarinforme").click(function() {
                let id = $(this).attr('id');

                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becadocente",
                    data: {'action': 'notificarinformeotorgamiento', 'id': id},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodynotificarinforme").html(data.data);
                            $(".paneltitlenotificarinforme").html(data.title);
                            $("#itemspanelnotificarinforme").modal({backdrop:'static'}).modal('show');
                        } else {
                            mensajeErrorSwal("No se puede consultar", data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        mensajeErrorSwal("No se puede consultar", "Error al enviar los datos")
                    },
                    dataType: "json"
                });
            });

            $("#itemspanelnotificarinforme .guardar").click(function () {
                envioformularioreg("/adm_becadocente", "notificarinformeotorgamiento", false);
                return false;
            });

            $(".revisarinforme").click(function() {
                let id = $(this).attr('id');

                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becadocente",
                    data: {'action': 'revisarinformeotorgamiento', 'id': id},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyrevisarinforme").html(data.data);
                            $(".paneltitlerevisarinforme").html(data.title);
                            $("#itemspanelrevisarinforme").modal({backdrop:'static'}).modal('show');
                        } else {
                            mensajeErrorSwal("No se puede consultar", data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        mensajeErrorSwal("No se puede consultar", "Error al enviar los datos")
                    },
                    dataType: "json"
                });
            });

            $("#itemspanelrevisarinforme .guardar").click(function () {
                envioformularioreg("/adm_becadocente", "revisarinformeotorgamiento", false);
                return false;
            });

            $(".notificarinformecomite").click(function() {
                let id = $(this).attr('id');

                bloqueointerface();

                $.ajax({
                    type: "POST",
                    url: "/adm_becadocente",
                    data: {"action": "notificarinformecomite", "id": id},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result=='ok'){
                            $.unblockUI();
                            let urlDestino = "/adm_becadocente?action=postulaciones&idc={{ convocatoria.id|encrypt }}";
                            mensajeSuccessSwal(data.titulo, data.mensaje, urlDestino);
                        } else {
                            $.unblockUI();
                            if(data.swalType == 'warning')
                                mensajeWarningSwal(data.titulo, data.mensaje);
                            else
                                mensajeErrorSwal(data.titulo, data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        mensajeErrorSwal("No se puede procesar", "Error al enviar los datos")
                    },
                    dataType: "json"
                });
            });

            $(".notificarinformecomitemasivo").click(function() {
                let idc = $(this).attr('idc');

                bloqueointerface();

                $.ajax({
                    type: "POST",
                    url: "/adm_becadocente",
                    data: {"action": "notificarinformecomitemasivo", "idc": idc},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result=='ok'){
                            $.unblockUI();
                            let urlDestino = "/adm_becadocente?action=postulaciones&idc={{ convocatoria.id|encrypt }}";
                            mensajeSuccessSwal(data.titulo, data.mensaje, urlDestino);
                        } else {
                            $.unblockUI();
                            if(data.swalType == 'warning')
                                mensajeWarningSwal(data.titulo, data.mensaje);
                            else
                                mensajeErrorSwal(data.titulo, data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        mensajeErrorSwal("No se puede procesar", "Error al enviar los datos")
                    },
                    dataType: "json"
                });
            });

            $(".imprimirresolucion").click(function() {
                let id=$(this).attr('id');

                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_becadocente",
                    data: {'action':'resolucioncomitepdf', 'id': id},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result=='ok'){
                            window.open(data.documento, '_blank');
                            location.href = "/adm_becadocente?action=postulaciones&idc={{ convocatoria.id|encrypt }}&id="+data.id;
                        } else {
                            mensajeErrorSwal("No se puede imprimir", data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        mensajeErrorSwal("No se puede consultar", "Error al enviar los datos")
                    },
                    dataType: "json"
                });
            });

            $(".subirresolucion").click(function() {
                let id = $(this).attr('id');

                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becadocente",
                    data: {'action': 'subirresolucion', 'id': id},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodysubirresolucion").html(data.data);
                            $(".paneltitlesubirresolucion").html(data.title);
                            $("#itemspanelsubirresolucion").modal({backdrop:'static'}).modal('show');
                        } else {
                            mensajeErrorSwal("No se puede consultar", data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        mensajeErrorSwal("No se puede consultar", "Error al enviar los datos")
                    },
                    dataType: "json"
                });
            });

            $("#itemspanelsubirresolucion .guardar").click(function () {
                envioformularioreg("/adm_becadocente", "subirresolucion", false);
                return false;
            });

            $(".confirmar").click(function() {
                let id = $(this).attr('id');
                let titulo = $(this).attr('titulo');
                let url = "/adm_becadocente";
                let action = "confirmarresolucion";
                let urlDestino = "/adm_becadocente?action=postulaciones&idc={{ convocatoria.id|encrypt }}";

                mensajeConfirmSwal("Confirmar Resultado de Resolución", "¿Está seguro de confirmar el resultado de la resolución para la postulación al programa <b>"+titulo+"</b>?", true, url, action, id, urlDestino);
            });

            $(".firmardocumento").click(function() {
                let id = $(this).attr('id');
                let idper = $(this).attr('idper');
                let tipofirma = $(this).attr('tipofirma');
                let accion = $(this).attr('acc');

                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becadocente",
                    data: {'action': accion, 'id': id, 'idper': idper, 'tipofirma': tipofirma},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyfirmardocumento").html(data.data);
                            $(".paneltitlefirmardocumento").html(data.title);
                            $("#itemspanelfirmardocumento").modal({backdrop:'static'}).modal('show');
                            $("#itemspanelfirmardocumento .guardar").attr('accion', accion);
                        } else {
                            mensajeErrorSwal("No se puede consultar", data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        mensajeErrorSwal("No se puede consultar", "Error al enviar los datos")
                    },
                    dataType: "json"
                });
            });

            $("#itemspanelfirmardocumento .guardar").click(function () {
                envioformularioreg("/adm_becadocente", $(this).attr('accion'), false);
                return false;
            });

            $(".notificarinformeinvestigacion").click(function() {
                let id = $(this).attr('id');

                bloqueointerface();

                $.ajax({
                    type: "POST",
                    url: "/adm_becadocente",
                    data: {"action": "notificarinformeinvestigacion", "id": id},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result=='ok'){
                            $.unblockUI();
                            let urlDestino = "/adm_becadocente?action=postulaciones&idc={{ convocatoria.id|encrypt }}";
                            mensajeSuccessSwal(data.titulo, data.mensaje, urlDestino);
                        } else {
                            $.unblockUI();
                            if(data.swalType == 'warning')
                                mensajeWarningSwal(data.titulo, data.mensaje);
                            else
                                mensajeErrorSwal(data.titulo, data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        mensajeErrorSwal("No se puede procesar", "Error al enviar los datos")
                    },
                    dataType: "json"
                });
            });

            $(".notificarinformesolicitante").click(function() {
                let id = $(this).attr('id');

                bloqueointerface();

                $.ajax({
                    type: "POST",
                    url: "/adm_becadocente",
                    data: {"action": "notificarinformesolicitante", "id": id},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result=='ok'){
                            $.unblockUI();
                            let urlDestino = "/adm_becadocente?action=postulaciones&idc={{ convocatoria.id|encrypt }}";
                            mensajeSuccessSwal(data.titulo, data.mensaje, urlDestino);
                        } else {
                            $.unblockUI();
                            if(data.swalType == 'warning')
                                mensajeWarningSwal(data.titulo, data.mensaje);
                            else
                                mensajeErrorSwal(data.titulo, data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        mensajeErrorSwal("No se puede procesar", "Error al enviar los datos")
                    },
                    dataType: "json"
                });
            });

            $(".habilitaredicion").click(function() {
                let id = $(this).attr('id');
                let titulo = $(this).attr('titulo');
                let url = "/adm_becadocente";
                let action = "habilitaredicion";
                let urlDestino = "/adm_becadocente?action=postulaciones&idc={{ convocatoria.id|encrypt }}";

                mensajeConfirmSwal("Confirmar habilitar la Edición para la Postulación a Beca", "¿Está seguro de habilitar la edición para la postulación a beca docente para el programa: <b>"+titulo+"</b>?", true, url, action, id, urlDestino);
            });

            envioformularioreg = function(url, action, destino){
                let valido;
                let formdata;
                let urlDestino;

                if(action == 'subirinformeotorgamiento' || action == 'subirinformejuridico'){
                    $("#frmSubirInforme").validationEngine('attach',{ scroll: false });
                    valido = $("#frmSubirInforme").validationEngine('validate', { scroll: false });
                }
                else if(action == 'notificarinformeotorgamiento'){
                    $("#frmNotificarInforme").validationEngine('attach',{ scroll: false });
                    valido = $("#frmNotificarInforme").validationEngine('validate', { scroll: false });
                }
                else if(action == 'revisarinformeotorgamiento'){
                    $("#frmRevisarInforme").validationEngine('attach',{ scroll: false });
                    valido = $("#frmRevisarInforme").validationEngine('validate', { scroll: false });
                }
                else if(action == 'subirresolucion'){
                    $("#frmSubirResolucion").validationEngine('attach',{ scroll: false });
                    valido = $("#frmSubirResolucion").validationEngine('validate', { scroll: false });
                }
                else if(action == 'firmarinformejuridico' || action == 'firmarinformeotorgamiento' || action == 'firmarresolucion'){
                    $("#frmFirmarDocumento").validationEngine('attach',{ scroll: false });
                    valido = $("#frmFirmarDocumento").validationEngine('validate', { scroll: false });
                }
                else if(action == 'consolidarinformacion'){
                    valido = true;
                }
                else if(action == 'revisarinformacionconsolidada'){
                    $("#frmRevisarInformacionConsolidada").validationEngine('attach',{ scroll: false });
                    valido = $("#frmRevisarInformacionConsolidada").validationEngine('validate', { scroll: false });
                }
                else if(action == 'notificarresultadoocas'){
                    $("#frmNotificarResultadoOcas").validationEngine('attach',{ scroll: false });
                    valido = $("#frmNotificarResultadoOcas").validationEngine('validate', { scroll: false });
                }

                if(valido){
                    bloqueointerface();
                    if(action == 'subirinformeotorgamiento' || action == 'subirinformejuridico')
                        formdata = new FormData($("#frmSubirInforme")[0]);
                    else if(action == 'notificarinformeotorgamiento')
                        formdata = new FormData($("#frmNotificarInforme")[0]);
                    else if(action == 'revisarinformeotorgamiento')
                        formdata = new FormData($("#frmRevisarInforme")[0]);
                    else if(action == 'subirresolucion')
                        formdata = new FormData($("#frmSubirResolucion")[0]);
                    else if(action == 'firmarinformejuridico' || action == 'firmarinformeotorgamiento' || action == 'firmarresolucion')
                        formdata = new FormData($("#frmFirmarDocumento")[0]);
                    else if(action == 'consolidarinformacion')
                        formdata = new FormData($("#frmConsolidarInformacion")[0]);
                    else if(action == 'revisarinformacionconsolidada')
                        formdata = new FormData($("#frmRevisarInformacionConsolidada")[0]);
                    else if(action == 'notificarresultadoocas')
                        formdata = new FormData($("#frmNotificarResultadoOcas")[0]);

                    $.ajax({
                        type: "POST",
                        action: action,
                        url: url,
                        data: formdata,
                        success: function(data) {
                            if(data.result=='ok'){
                                $.unblockUI();
                                if(action == 'firmarinformeotorgamiento' || action == 'firmarinformejuridico' || action == 'firmarresolucion')
                                    urlDestino = "/adm_becadocente?action=postulaciones&idc={{ convocatoria.id|encrypt }}&id="+data.id;
                                else
                                    urlDestino = "/adm_becadocente?action=postulaciones&idc={{ convocatoria.id|encrypt }}";

                                if(action == 'firmarinformeotorgamiento' || action == 'firmarinformejuridico' || action == 'firmarresolucion' || action == 'consolidarinformacion')
                                    window.open(data.documento, '_blank');

                                mensajeSuccessSwal(data.titulo, data.mensaje, urlDestino);
                            }else{
                                $.unblockUI();
                                if(data.swalType == 'warning')
                                    mensajeWarningSwal(data.titulo, data.mensaje);
                                else
                                    mensajeErrorSwal(data.titulo, data.mensaje);
                            }
                        },
                        error: function() {
                            $.unblockUI();
                            mensajeErrorSwal("No se puede guardar", "Error al enviar los datos")
                        },
                        dataType: "json",
                        cache: false,
                        contentType: false,
                        processData: false
                    });
                }else{
                    setTimeout(function() {
                        $('.help-text').html("");
                    }, 8000);
                    $.unblockUI();
                }
            };

            $(".consolidarinformacion").click(function() {
                let idc = $(this).attr('idc');

                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becadocente",
                    data: {'action': 'consolidarinformacion', 'idc': idc},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyconsolidarinformacion").html(data.data);
                            $(".paneltitleconsolidarinformacion").html(data.title);
                            $("#itemspanelconsolidarinformacion").modal({backdrop:'static'}).modal('show');
                        } else {
                            if(data.swalType == 'warning')
                                mensajeWarningSwal(data.titulo, data.mensaje);
                            else
                                mensajeErrorSwal(data.titulo, data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        mensajeErrorSwal("No se puede consultar", "Error al enviar los datos")
                    },
                    dataType: "json"
                });
            });

            $("#itemspanelconsolidarinformacion .guardar").click(function () {
                envioformularioreg("/adm_becadocente", "consolidarinformacion", false);
                return false;
            });

            $(".revisarconsolidado").click(function() {
                let idc = $(this).attr('idc');

                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becadocente",
                    data: {'action': 'revisarinformacionconsolidada', 'idc': idc},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyrevisarconsolidado").html(data.data);
                            $(".paneltitlerevisarconsolidado").html(data.title);
                            $("#itemspanelrevisarconsolidado").modal({backdrop:'static'}).modal('show');
                        } else {
                            if(data.swalType == 'warning')
                                mensajeWarningSwal(data.titulo, data.mensaje);
                            else
                                mensajeErrorSwal(data.titulo, data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        mensajeErrorSwal("No se puede consultar", "Error al enviar los datos")
                    },
                    dataType: "json"
                });
            });

            $("#itemspanelrevisarconsolidado .guardar").click(function () {
                envioformularioreg("/adm_becadocente", "revisarinformacionconsolidada", false);
                return false;
            });

            $(".notificarresultadoocas").click(function() {
                let id = $(this).attr('id');

                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becadocente",
                    data: {'action': 'notificarresultadoocas', 'id': id},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodynotificarresultadoocas").html(data.data);
                            $(".paneltitlenotificarresultadoocas").html(data.title);
                            $("#itemspanelnotificarresultadoocas").modal({backdrop:'static'}).modal('show');
                        } else {
                            if(data.swalType == 'warning')
                                mensajeWarningSwal(data.titulo, data.mensaje);
                            else
                                mensajeErrorSwal(data.titulo, data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        mensajeErrorSwal("No se puede consultar", "Error al enviar los datos")
                    },
                    dataType: "json"
                });
            });

            $("#itemspanelnotificarresultadoocas .guardar").click(function () {
                envioformularioreg("/adm_becadocente", "notificarresultadoocas", false);
                return false;
            });

        });
    </script>
{% endblock %}
{% block atras %}/adm_becadocente?action=convocatorias&idc={{ convocatoria.id|encrypt }}{% endblock %}
{% block canvas %}
    {# TITULO PANTALLA #}
    <div class='row'>
        <div class='col-lg-12'>
            <div class="headtitle">
                <h3 class="texto-blue">{{ title }}</h3>
                <h6>Gestión Becas Docentes</h6>
            </div>
        </div>
    </div>
    {# TITULO PANTALLA #}
    {% if convocatoria.postulaciones_sin_certificacion and not espersonalfinanciero %}
        <div class='row-fluid'>
            <div class="alert alert-warning">
                <strong>Atención!!! Existen postulaciones ACEPTADAS sin solicitud de certificación presupuestaria</strong>
            </div>
        </div>
    {% endif %}
    {# FILA DE TOTALES #}
{#    {% if persona.es_analista_investigacion or espersonaljuridico or persona.es_coordinador_investigacion or persona.es_vicerrector_investigacion or espersonalfinanciero %}#}
        <div class='row'>
            <div class="col-sm-12 pb-2">
{#                {% if persona.es_coordinador_investigacion or espersonalfinanciero or persona.es_vicerrector_investigacion %}#}
                    <div class="btn-group">
                        <button type="button" class="btn btn-success dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Transacciones <i class="fa fa-angle-down"></i></button>
                        <div class="dropdown-menu">
{#                            {% if persona.es_coordinador_investigacion or espersonalfinanciero %}#}
                                <a class="dropdown-item" href="/adm_becadocente?action=certificaciones&idc={{ convocatoria.id|encrypt }}"><i class="fa fa-money"></i>&nbsp;Certificaciones Presupuestarias</a>
{#                            {% endif %}#}
{#                            {% if persona.es_vicerrector_investigacion %}#}
                                <a class="dropdown-item revisarconsolidado" idc="{{ convocatoria.id|encrypt }}" href="javascript:;"><i class="fa fa-check"></i>&nbsp;Revisar Información Consolidada</a>
{#                            {% endif %}#}
                        </div>
                    </div>
{#                {% endif %}#}
{#                {% if persona.es_vicerrector_investigacion or persona.es_coordinador_investigacion %}#}
                    <div class="btn-group">
                        <button type="button" class="btn btn-warning dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Procesos <i class="fa fa-angle-down"></i></button>
                        <div class="dropdown-menu">
{#                            {% if pornotificarcb %}#}
                                <a class="dropdown-item notificarinformecomitemasivo" idc="{{ convocatoria.id|encrypt }}" href="javascript:;"><i class="fa fa-envelope"></i>&nbsp;Notificación masiva (Informes al Comité)</a>
{#                            {% endif %}#}
{#                            {% if persona.es_coordinador_investigacion %}#}
                                <a class="dropdown-item consolidarinformacion" idc="{{ convocatoria.id|encrypt }}" href="javascript:;"><i class="fa fa-cubes"></i>&nbsp;Consolidar Información</a>
{#                            {% endif %}#}
                        </div>
                    </div>
{#                {% endif %}#}
{#                {% if persona.es_analista_investigacion %}#}
                    <div class="btn-group">
                        <button type="button" class="btn btn-info dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Reportes <i class="fa fa-angle-down"></i></button>
                        <div class="dropdown-menu">
                            <a class="dropdown-item mostrartotales" idc="{{ convocatoria.id|encrypt }}" href="javascript:;"><i class="fa fa-table"></i>&nbsp;Resumen Seguimiento Postulaciones</a>
                        </div>
                    </div>
{#                {% endif %}#}
            </div>
        </div>
{#    {% endif %}#}
    {# FILA DE TOTALES #}
    {# FILA DE FILTRO #}
    <div class='row'>
        {# COLUMNA TOTALES #}
        <div class="col-sm-8 pb-2">

        </div>
        {# COLUMNA TOTALES #}
        {# COLUMNA FILTRO #}
        <div class="col-sm-4 pb-2">
            <div class="input-group mb-2">
                <input type="text" class="form-control" autocomplete="off" placeholder="Apellidos del docente" aria-label="Buscar" id='searchinput' name="s" value="{{ s }}">
                <div class="input-group-append">
                    <button class="btn btn-primary" id="search" type="button"><i class="fa fa-search"></i></button>
                    {% if url_vars %}
                        {% if s or ids %}
                            <a title="Ver todo" href="{{ request.path }}?action=postulaciones&idc={{ convocatoria.id|encrypt }}" class="btn btn-default tr"><i class="fas fa-sync-alt"></i></a>
                        {% endif %}
                    {% endif %}
                </div>
            </div>
        </div>
        {# COLUMNA FILTRO #}
    </div>
    {# FILA DE FILTRO #}
    {# TABLA DE DATOS #}
    <div class="card mb-4">
        <div class="card-body border-top border-6 rounded-3 border-dark-info">
            <table class='tabla_responsive table table-bordered table-striped'>
                <thead class="table-light cabecera-fija">
                    <tr>
                        <th style="width: 5%; font-weight: bold; text-align: center">Fecha/N°Solic.</th>
                        <th style="width: 20%; font-weight: bold; text-align: center">Solicitante</th>
                        <th style="width: 25%; font-weight: bold; text-align: center">Programa/Título</th>
                        <th style="width: 20%; font-weight: bold; text-align: center">Institución/País/Ciudad</th>
                        <th style="width: 5%; font-weight: bold; text-align: center">Presupuesto</th>
                        <th style="width: 5%; font-weight: bold; text-align: center">Informes</th>
                        <th style="width: 5%; font-weight: bold; text-align: center">Resoluciones</th>
                        <th style="width: 5%; font-weight: bold; text-align: center">Estado</th>
                        <th style="width: 5%; font-weight: bold; text-align: center">Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    {% for postulacion in postulaciones %}
                    <tr>
                        <td style="text-align: center">
                            {% if postulacion.fechasolicitud %}
                                {{ postulacion.fechasolicitud|date:"d-m-Y" }}<br>
                                <span class="label label-info">{{ postulacion.numero|stringformat:"05d" }}</span>
                            {% else %}
                                <span class="label label-warning">POR DEFINIR</span>
                            {% endif %}
                            <br>
                            <span class="label label-success">{{ postulacion.get_tipoestudio_display }}</span>
                        </td>
                        <td style="text-align: left">
                            <strong><span class="fa fa-id-badge tu" title="Identificación"></span> {{ postulacion.profesor.persona.identificacion }}</strong>
                            | <span class="fa fa-user tu" title="Apellidos y Nombres"></span> {{ postulacion.profesor.persona.nombre_completo_inverso }}
                            <br><span class="fa fa-envelope tu" title="Dirección de e-mail"></span> {{ postulacion.profesor.persona.email }} / {{ postulacion.profesor.persona.emailinst }}
                            | <span class="fa fa-phone-square tu" title="Número de teléfono"></span> {{ postulacion.profesor.persona.telefono }}
                            <br>
                            <span class="fa fa-cubes tu" title="Categoría"></span> <span class="label label-info">{{ postulacion.profesor.nivelcategoria.nombre }}</span>
                            <span class="fa fa-clock tu" title="Dedicación"></span> <span class="label label-warning">{{ postulacion.profesor.dedicacion.nombre }}</span>
                        </td>
                        <td style="text-align: justify">
                            {{ postulacion.programa }}<br>
                            <span class="label label-info">{{ postulacion.tituloobtener }}</span>
                        </td>
                        <td style="text-align: justify">
                            {{ postulacion.institucion.nombre }}<br>
                            <span class="label label-info">{{ postulacion.pais.nombre }}</span>
                            <span class="label label-warning">{{ postulacion.canton.nombre }}</span><br>
                            {{ postulacion.modalidad.nombre }}<br>
                            <table class='table table-striped table-bordered' style="width: 70%">
                                <tbody>
                                    <tr>
                                        <td><span class="label label-info tu" title="Fecha Inicio">FI:</span></td>
                                        <td>{{ postulacion.inicio|date:"d-m-Y" }}</td>
                                    </tr>
                                    <tr>
                                        <td><span class="label label-warning tu" title="Fecha Fin">FF:</span></td>
                                        <td>{{ postulacion.fin|date:"d-m-Y" }}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </td>
                        <td style="text-align: center">
                            $ {{ postulacion.presupuesto|floatformat:2|intcomma }}
                            {% if postulacion.certificacion_presupuestaria_emitida %}
                                <a target="_blank" href="{{ postulacion.certificacion_presupuestaria_emitida.archivo.url }}" class="btn btn-mini btn-info" data-bs-toggle="tooltip" data-placement="top" title="Descargar Certificación Presupuestaria"><i class="fa fa-download"></i> </a>
                            {% endif %}
                        </td>
                        <td style="text-align: center">
                            {% if postulacion.tiene_informe_juridico and not persona.es_vicerrector_investigacion and not persona.es_coordinador_investigacion %}
                                {% if postulacion.informe_juridico.archivo %}
                                    <a target="_blank" href="{{ postulacion.informe_juridico.archivo.url }}" class="btn btn-mini btn-info" data-bs-toggle="tooltip" data-placement="top" title="Descargar informe jurídico"><i class="fa fa-download"></i> </a>
                                    {% if postulacion.informe_juridico.archivofirmado %}
                                        <a target="_blank" href="{{ postulacion.informe_juridico.archivofirmado.url }}" class="btn btn-mini btn-success" data-bs-toggle="tooltip" data-placement="top" title="Descargar informe jurídico firmado"><i class="fa fa-download"></i> </a>
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                            {% if postulacion.tiene_informe_otorgamiento %}
                                {% if postulacion.informe_otorgamiento.archivo %}
                                    {% if not persona.es_vicerrector_investigacion and not persona.es_coordinador_investigacion %}
                                        <a target="_blank" href="{{ postulacion.informe_otorgamiento.archivo.url }}" class="btn btn-mini btn-primary" data-bs-toggle="tooltip" data-placement="top" title="Descargar informe de otorgamiento"><i class="fa fa-download"></i> </a>
                                        {% if postulacion.informe_otorgamiento.archivofirmado %}
                                            <a target="_blank" href="{{ postulacion.informe_otorgamiento.archivofirmado.url }}" class="btn btn-mini btn-warning" data-bs-toggle="tooltip" data-placement="top" title="Descargar informe otorgamiento firmado"><i class="fa fa-download"></i> </a>
                                        {% endif %}
                                    {% endif %}
                                    {% if persona.es_coordinador_investigacion %}
                                        <a target="_blank" href="{{ postulacion.informe_otorgamiento.archivofirmado.url }}" class="btn btn-mini btn-warning" data-bs-toggle="tooltip" data-placement="top" title="Descargar informe otorgamiento firmado"><i class="fa fa-download"></i> </a>
                                        <br>
                                        {% with informe=postulacion.informe_otorgamiento %}
                                            <span class="label label-{{ informe.color_notificadovi }} tu" title="Notificado al Vicerrector de Investigación">{% if informe.notificadovi %}SI{% else %}NO{% endif %}</span>
                                        {% endwith %}
                                    {% endif %}
                                    {% if persona.es_vicerrector_investigacion %}
                                        <a target="_blank" href="{{ postulacion.informe_otorgamiento.archivofirmado.url }}" class="btn btn-mini btn-warning" data-bs-toggle="tooltip" data-placement="top" title="Descargar informe otorgamiento firmado"><i class="fa fa-download"></i> </a>
                                        <br>
                                        {% with informe=postulacion.informe_otorgamiento %}
                                            <span class="label label-{{ informe.color_revisadovi }} tu" title="Revisado por Vicerrector">{% if informe.revisadovi %}SI{% else %}NO{% endif %}</span>
                                            <span class="label label-{{ informe.color_notificadocb }} tu" title="Notificado al Comité de Becas">{% if informe.notificadocb %}SI{% else %}NO{% endif %}</span>
                                        {% endwith %}
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                        </td>
                        <td style="text-align: center">
                            {% if postulacion.tiene_informe_otorgamiento %}
                                {% with resolucioncomite=postulacion|args:postulacion.informe_otorgamiento|call:"resolucion_comite" %}
                                    {% if resolucioncomite %}
                                        Comité Becas<br>
                                        <span class="label label-{{ resolucioncomite.color_resultado }} tu" title="Resultado del Comité de Becas">{{ resolucioncomite.get_resultado_display }}</span>
                                        {% if resolucioncomite.archivo %}
                                            <a target="_blank" href="{{ resolucioncomite.archivo.url }}" class="btn btn-mini btn-info" data-bs-toggle="tooltip" data-placement="top" title="Descargar Resolución"><i class="fa fa-download"></i> </a>
                                        {% endif %}
                                        {% if resolucioncomite.archivofirmado %}
                                            <a target="_blank" href="{{ resolucioncomite.archivofirmado.url }}" class="btn btn-mini btn-success" data-bs-toggle="tooltip" data-placement="top" title="Descargar Resolución firmada"><i class="fa fa-download"></i> </a>
                                        {% endif %}
                                        {% if resolucioncomite.archivo %}
                                            <br>E.Firmas:<br>
                                            {% with color_firmado_vice=resolucioncomite.color_estado_firmado_vicerrector color_firmado_coord=resolucioncomite.color_estado_firmado_coordinador %}
                                                <span class="label label-{{ color_firmado_vice.color }} tu" title="{{ color_firmado_vice.titulo }}">V</span>
                                                <span class="label label-{{ color_firmado_coord.color }} tu" title="{{ color_firmado_coord.titulo }}">C</span>
                                            {% endwith %}
                                        {% endif %}
                                    {% endif %}
                                    {% if postulacion.archivo_resolucion_ocas %}
                                        <br>OCAS<br>
                                        <a target="_blank" href="{{ postulacion.archivo_resolucion_ocas.archivofirmado.url }}" class="btn btn-mini btn-success" data-bs-toggle="tooltip" data-placement="top" title="Descargar Resolución OCAS"><i class="fa fa-download"></i> </a>
                                    {% endif %}
                                {% endwith %}
                            {% endif %}
                        </td>
                        <td style="text-align: center">
                            <span class="{{ postulacion.estado.clase }} tu" title="{{ postulacion.estado.observacion }}">{{ postulacion.estado.descripcion }}</span>
                            {% if postulacion.estado.valor == 8 %}
                                {% if postulacion.informe_juridico.impreso %}
                                    E.Firmas:<br>
                                    {% with color_firmado=postulacion.informe_juridico.color_estado_firmado_elaborado color_verificado=postulacion.informe_juridico.color_estado_firmado_verificado color_aprobado=postulacion.informe_juridico.color_estado_firmado_aprobado %}
                                        <span class="label label-{{ color_firmado.color }} tu" title="{{ color_firmado.titulo }}">E</span>
                                        <span class="label label-{{ color_verificado.color }} tu" title="{{ color_verificado.titulo }}">V</span>
                                        <span class="label label-{{ color_aprobado.color }} tu" title="{{ color_aprobado.titulo }}">A</span>
                                    {% endwith %}
                                {% endif %}
                            {% endif %}
                            {% if postulacion.estado.valor == 12 %}
                                {% if postulacion.informe_otorgamiento.impreso %}
                                    E.Firmas:<br>
                                    {% with color_firmado=postulacion.informe_otorgamiento.color_estado_firmado_elaborado color_verificado=postulacion.informe_otorgamiento.color_estado_firmado_verificado color_aprobado=postulacion.informe_otorgamiento.color_estado_firmado_aprobado %}
                                        <span class="label label-{{ color_firmado.color }} tu" title="{{ color_firmado.titulo }}">E</span>
                                        <span class="label label-{{ color_verificado.color }} tu" title="{{ color_verificado.titulo }}">V</span>
                                        <span class="label label-{{ color_aprobado.color }} tu" title="{{ color_aprobado.titulo }}">A</span>
                                    {% endwith %}
                                {% endif %}
                            {% endif %}
                            {% if postulacion.estado.valor == 25 and not postulacion.cpresupuestaria %}
                                <span class="label label-warning tu" title="SOLICITUD DE CERTIFICACIÓN PRESUPUESTARIA PENDIENTE">SCPP</span>
                            {% endif %}
                        </td>
                        <td style="text-align: center">
                            <div class="dropbottom" style="text-align: left">
                                <button type="button" class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Acciones <i class="fa fa-angle-down"></i></button>
                                <ul class="dropdown-menu pull-right" x-placement="right-start">
                                    {% if postulacion.puede_habilitar_edicion %}
                                        <li class="dropdown-item"><a class="habilitaredicion" id="{{ postulacion.id|encrypt }}" titulo="{{ postulacion.programa }}" href="javascript:;"><i class="fa fa-unlock-alt"></i> Habilitar Edición</a></li>
                                        <div class="dropdown-divider"></div>
                                    {% endif %}
                                    <li class="dropdown-item"><a class="mostrarrecorrido" idc="{{ postulacion.id|encrypt }}" href="javascript:;"><i class="fa fa-list-ol"></i> Mostrar Recorrido</a></li>

{#                                    {% if persona.es_analista_investigacion and postulacion.puede_revisar %}#}
                                        <li class="dropdown-item"><a href="/adm_becadocente?action=revisarpostulacion&id={{ postulacion.id|encrypt }}"><i class="fa fa-check-square-o"></i> Validar Requisitos</a></li>
{#                                    {% endif %}#}


{#                                    {% if persona.es_analista_investigacion and postulacion.puede_generar_informe_otorgamiento %}#}
                                        {% if not postulacion.tiene_informe_otorgamiento %}
                                            <li class="dropdown-item"><a href="/adm_becadocente?action=addinformeotorgamiento&id={{ postulacion.id|encrypt }}"><i class="fa fa-file-text"></i> Agregar Informe Otorgamiento</a></li>
                                        {% else %}
                                            <li class="dropdown-item"><a href="/adm_becadocente?action=editinformeotorgamiento&id={{ postulacion.informe_otorgamiento.id|encrypt }}"><i class="fa fa-file-text"></i> Editar Informe Otorgamiento</a></li>
                                        {% endif %}
{#                                    {% endif %}#}


{#                                    {% if persona.es_analista_investigacion and postulacion.tiene_informe_otorgamiento %}#}
                                        {% if postulacion.informe_otorgamiento.estado == 1 or postulacion.informe_otorgamiento.estado == 2 or postulacion.informe_otorgamiento.estado == 6 %}
                                            <li class="dropdown-item"><a href="javascript:;" class="imprimirinforme" tipo="IO" id="{{ postulacion.informe_otorgamiento.id|encrypt }}"><i class="fa fa-print"></i> Generar Informe Otorgamiento</a></li>
                                            {% if postulacion.informe_otorgamiento.impreso %}
                                                <div class="dropdown-divider"></div>
                                                <div class="dropdown-submenu dropdown-hover dropdown-menu-right">
                                                    <li class="dropdown-item dropdown-submenu">
                                                        <a id="dropsubmenu" class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-pencil-alt"></i> Firmar Informe</a>
                                                    </li>
                                                    <ul class="dropdown-menu border-0" aria-labelledby="dropsubmenu" style="position: absolute; transform: translate3d(-200px, 0px, 0px); top: 0px; left: 0px;width: 200px; will-change: transform;">
                                                        <li class="dropdown-item"><a href="javascript:;" class="firmardocumento" id="{{ postulacion.informe_otorgamiento.id|encrypt }}" idper="{{ postulacion.informe_otorgamiento.elabora.id|encrypt }}" tipofirma="ELA" acc="firmarinformeotorgamiento"><i class="fa fa-user"></i> Analista Investigación</a></li>
                                                        <li class="dropdown-item"><a href="javascript:;" class="firmardocumento" id="{{ postulacion.informe_otorgamiento.id|encrypt }}" idper="{{ postulacion.informe_otorgamiento.verifica.id|encrypt }}" tipofirma="VER" acc="firmarinformeotorgamiento"><i class="fa fa-user-md"></i> Experto Investigación</a></li>
                                                        <li class="dropdown-item"><a href="javascript:;" class="firmardocumento" id="{{ postulacion.informe_otorgamiento.id|encrypt }}" idper="{{ postulacion.informe_otorgamiento.aprueba.id|encrypt }}" tipofirma="APR" acc="firmarinformeotorgamiento"><i class="fa fa-user-secret"></i> Coordinador Investigación</a></li>
                                                    </ul>
                                                </div>

                                                {% if postulacion.informe_otorgamiento.puede_notificar_docente %}
                                                    <li class="dropdown-item"><a href="javascript:;" class="notificarinformesolicitante" id="{{ postulacion.informe_otorgamiento.id|encrypt }}"><i class="fa fa-reply"></i> Notificar Informe a Solicitante</a></li>
                                                {% endif %}
                                            {% endif %}
                                        {% endif %}
{#                                    {% endif %}#}
{#                                    {% if persona.es_analista_juridico or persona.es_experto_juridico or persona.es_director_juridico %}#}
                                        {% if not postulacion.tiene_informe_juridico %}
                                            <li class="dropdown-item"><a href="/adm_becadocente?action=addinformejuridico&id={{ postulacion.id|encrypt }}"><i class="fa fa-file-text"></i> Agregar Informe Jurídico</a></li>
                                        {% else %}
                                            {% if postulacion.puede_manipular_informejuridico %}
                                                <li class="dropdown-item"><a href="/adm_becadocente?action=editinformejuridico&id={{ postulacion.informe_juridico.id|encrypt }}"><i class="fa fa-file-text"></i> Editar Informe Jurídico</a></li>
                                                {% if postulacion.informe_juridico.estado == 1 or postulacion.informe_juridico.estado == 2 or postulacion.informe_juridico.estado == 6 %}
                                                    <li class="dropdown-item"><a href="javascript:;" class="imprimirinforme" tipo="IJ" id="{{ postulacion.informe_juridico.id|encrypt }}"><i class="fa fa-print"></i> Generar Informe Jurídico</a></li>
                                                {% endif %}
                                                {% if postulacion.informe_juridico.impreso %}
                                                    <div class="dropdown-divider"></div>
                                                    <div class="dropdown-submenu dropdown-hover dropdown-menu-right">
                                                        <li class="dropdown-item dropdown-submenu">
                                                            <a id="dropsubmenu" class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-pencil-alt"></i> Firmar Informe</a>
                                                        </li>
                                                        <ul class="dropdown-menu border-0" aria-labelledby="dropsubmenu" style="position: absolute; transform: translate3d(-200px, 0px, 0px); top: 0px; left: 0px;width: 200px; will-change: transform;">
                                                            <li class="dropdown-item"><a href="javascript:;" class="firmardocumento" id="{{ postulacion.informe_juridico.id|encrypt }}" idper="{{ postulacion.informe_juridico.elabora.id|encrypt }}" tipofirma="ELA" acc="firmarinformejuridico"><i class="fa fa-user"></i> Analista Jurídico</a></li>
                                                            <li class="dropdown-item"><a href="javascript:;" class="firmardocumento" id="{{ postulacion.informe_juridico.id|encrypt }}" idper="{{ postulacion.informe_juridico.verifica.id|encrypt }}" tipofirma="VER" acc="firmarinformejuridico"><i class="fa fa-user-md"></i> Experto Jurídico</a></li>
                                                            <li class="dropdown-item"><a href="javascript:;" class="firmardocumento" id="{{ postulacion.informe_juridico.id|encrypt }}" idper="{{ postulacion.informe_juridico.aprueba.id|encrypt }}" tipofirma="APR" acc="firmarinformejuridico"><i class="fa fa-user-secret"></i> Director Jurídico</a></li>
                                                        </ul>
                                                    </div>
                                                {% endif %}
                                                {% if postulacion.informe_juridico.puede_notificar_investigacion %}
                                                    <li class="dropdown-item"><a href="javascript:;" class="notificarinformeinvestigacion" id="{{ postulacion.informe_juridico.id|encrypt }}"><i class="fa fa-reply"></i> Notificar a Investigación</a></li>
                                                {% endif %}
                                            {% endif %}
{#                                        {% endif %}#}
                                    {% endif %}

{#                                    {% if persona.es_coordinador_investigacion and postulacion.tiene_informe_otorgamiento %}#}
                                        {% if postulacion.puede_notificar_informe_otorgamiento %}
                                            <li class="dropdown-item"><a href="javascript:;" class="notificarinforme" id="{{ postulacion.informe_otorgamiento.id|encrypt }}"><i class="fa fa-location-arrow"></i> Notificar Informe a Vicerrector</a></li>
                                        {% endif %}
{#                                    {% endif %}#}

{#                                    {% if persona.es_vicerrector_investigacion and postulacion.tiene_informe_otorgamiento %}#}
                                        {% if not postulacion.informe_otorgamiento.revisadovi %}
                                            <li class="dropdown-item"><a href="javascript:;" class="revisarinforme" id="{{ postulacion.informe_otorgamiento.id|encrypt }}"><i class="fa fa-check"></i> Revisar Informe</a></li>
                                        {% elif postulacion.puede_notificar_a_comite %}
                                            <li class="dropdown-item"><a href="javascript:;" class="notificarinformecomite" id="{{ postulacion.informe_otorgamiento.id|encrypt }}"><i class="fa fa-reply"></i> Notificar Informe a Comité</a></li>
                                        {% endif %}
{#                                    {% endif %}#}

{#                                    {% if secretariocomite %}#}
                                        {% if postulacion.puede_revisar_comite %}
                                            <li class="dropdown-item"><a href="/adm_becadocente?action=emitirresolucion&id={{ postulacion.id|encrypt }}"><i class="fa fa-users"></i> Emitir Resolución</a></li>
                                            {% with resolucioncomite=postulacion|args:postulacion.informe_otorgamiento|call:"resolucion_comite" %}
                                                {% if resolucioncomite %}
                                                    <li class="dropdown-item"><a href="javascript:;" class="imprimirresolucion" id="{{ resolucioncomite.id|encrypt }}"><i class="fa fa-print"></i> Generar Resolución</a></li>
                                                    {% if resolucioncomite.impreso %}
                                                        <div class="dropdown-divider"></div>
                                                        <div class="dropdown-submenu dropdown-hover dropdown-menu-right">
                                                            <li class="dropdown-item dropdown-submenu">
                                                                <a id="dropsubmenu" class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-pencil-alt"></i> Firmar Resolución</a>
                                                            </li>
                                                            <ul class="dropdown-menu border-0" aria-labelledby="dropsubmenu" style="position: absolute; transform: translate3d(-200px, 0px, 0px); top: 0px; left: 0px;width: 200px; will-change: transform;">
                                                                <li class="dropdown-item"><a href="javascript:;" class="firmardocumento" id="{{ resolucioncomite.id|encrypt }}" idper="{{ resolucioncomite.personacoord.id|encrypt }}" tipofirma="COORD" acc="firmarresolucion"><i class="fa fa-user"></i> Coordinador Investigación</a></li>
                                                                <li class="dropdown-item"><a href="javascript:;" class="firmardocumento" id="{{ resolucioncomite.id|encrypt }}" idper="{{ resolucioncomite.personavice.id|encrypt }}" tipofirma="VICE" acc="firmarresolucion"><i class="fa fa-user-secret"></i> Vicerrector Investigación</a></li>
                                                            </ul>
                                                        </div>

                                                        {% if resolucioncomite.puede_confirmar_resultado %}
                                                            <li class="dropdown-item"><a class="confirmar" id="{{ resolucioncomite.id|encrypt }}" titulo="{{ postulacion.programa }}" href="javascript:;"><i class="fa fa-check"></i> Confirmar Resultado</a></li>
                                                        {% endif %}
                                                    {% endif %}
                                                {% endif %}
                                            {% endwith %}
                                        {% endif %}
{#                                    {% endif %}#}

{#                                    {% if persona.es_coordinador_investigacion and postulacion.puede_registrar_resultado_ocas %}#}
                                        <li class="dropdown-item"><a href="javascript:;" class="notificarresultadoocas" id="{{ postulacion.id|encrypt }}"><i class="fa fa-cloud-upload"></i> Notificar Resultado OCAS</a></li>
{#                                    {% endif %}#}
                                </ul>
                            </div>
                        </td>
                    </tr>
                    {% empty %}
                    <tr><td style="text-align: center" colspan="9">NO EXISTEN REGISTROS DE POSTULACIONES A BECAS</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="card-footer border-top-0">
            {% include 'paginacionb4.html' %}
        </div>
    </div>
    {# TABLA DE DATOS #}

    <div class="modal fade static"  id="itemspanelrecorrido" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4><i class="fa fa-list-ol"></i>&nbsp;<span class="paneltitlerecorrido">Mostrar Recorrido de la Convocatoria</span></h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    </button>
                </div>
                <div class="modal-body panelbodyrecorrido">

                </div>
                <div class="modal-footer" id="footermodal">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal"> Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static"  id="itemspanelmostrartotales" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4><i class="fa fa-table"></i>&nbsp;<span class="paneltitlemostrartotales">Mostrar Recorrido de la Convocatoria</span></h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    </button>
                </div>
                <div class="modal-body panelbodymostrartotales">

                </div>
                <div class="modal-footer" id="footermodal">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal"> Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static"  id="itemspanelsubirinforme" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4><i class="fa fa-cloud-upload"></i>&nbsp;<span class="paneltitlesubirinforme">Mostrar Recorrido de la Convocatoria</span></h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    </button>
                </div>
                <div class="modal-body panelbodysubirinforme">

                </div>
                <div class="modal-footer" id="footermodal">
                    <button type="button" class="btn btn-success guardar"> Guardar</button>
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal"> Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static"  id="itemspanelnotificarinforme" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4><i class="fa fa-location-arrow"></i>&nbsp;<span class="paneltitlenotificarinforme">Mostrar Recorrido de la Convocatoria</span></h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    </button>
                </div>
                <div class="modal-body panelbodynotificarinforme">

                </div>
                <div class="modal-footer" id="footermodal">
                    <button type="button" class="btn btn-success guardar"> Guardar</button>
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal"> Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static"  id="itemspanelrevisarinforme" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4><i class="fa fa-check"></i>&nbsp;<span class="paneltitlerevisarinforme">Mostrar Recorrido de la Convocatoria</span></h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    </button>
                </div>
                <div class="modal-body panelbodyrevisarinforme">

                </div>
                <div class="modal-footer" id="footermodal">
                    <button type="button" class="btn btn-success guardar"> Guardar</button>
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal"> Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static"  id="itemspanelsubirresolucion" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4><i class="fa fa-cloud-upload"></i>&nbsp;<span class="paneltitlesubirresolucion">Mostrar Recorrido de la Convocatoria</span></h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    </button>
                </div>
                <div class="modal-body panelbodysubirresolucion">

                </div>
                <div class="modal-footer" id="footermodal">
                    <button type="button" class="btn btn-success guardar"> Guardar</button>
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal"> Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static"  id="itemspanelfirmardocumento" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4><i class="fa fa-pencil-alt"></i>&nbsp;<span class="paneltitlefirmardocumento">Mostrar Recorrido de la Convocatoria</span></h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    </button>
                </div>
                <div class="modal-body panelbodyfirmardocumento">

                </div>
                <div class="modal-footer" id="footermodal">
                    <button type="button" class="btn btn-success guardar" accion=""> Firmar</button>
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal"> Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static"  id="itemspanelconsolidarinformacion" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4><i class="fa fa-cubes"></i>&nbsp;<span class="paneltitleconsolidarinformacion">Mostrar Recorrido de la Convocatoria</span></h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    </button>
                </div>
                <div class="modal-body panelbodyconsolidarinformacion">

                </div>
                <div class="modal-footer" id="footermodal">
                    <button type="button" class="btn btn-success guardar"> Consolidar</button>
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal"> Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static"  id="itemspanelrevisarconsolidado" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4><i class="fa fa-check"></i>&nbsp;<span class="paneltitlerevisarconsolidado">Mostrar Recorrido de la Convocatoria</span></h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    </button>
                </div>
                <div class="modal-body panelbodyrevisarconsolidado">

                </div>
                <div class="modal-footer" id="footermodal">
                    <button type="button" class="btn btn-success guardar"> Guardar</button>
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal"> Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static"  id="itemspanelnotificarresultadoocas" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4><i class="fa fa-cloud-upload"></i>&nbsp;<span class="paneltitlenotificarresultadoocas">Mostrar Recorrido de la Convocatoria</span></h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    </button>
                </div>
                <div class="modal-body panelbodynotificarresultadoocas">

                </div>
                <div class="modal-footer" id="footermodal">
                    <button type="button" class="btn btn-success guardar"> Notificar</button>
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal"> Cerrar</button>
                </div>
            </div>
        </div>
    </div>


{% endblock %}
