{% load sga_extras %}
{% load tz %}
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<?python import sitetemplate ?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:py="http://purl.org/kid/ns#" py:extends="sitetemplate">
<html lang="en">
<head>
    <meta charset=UTF-8">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Red+Hat+Display:wght@300;400;500;700;800&display=swap" rel="stylesheet">
    <style type="text/css">

        .page-break-before {
            page-break-before: always;
        }

        * {
            font-family: 'Red Hat Display', sans-serif;
            font-size: 12px;
            color: #000000;
        }

        @page vertical {
            size: a4;
            top: 4cm;
            left: 2.5cm;
            right: 2.5cm;
            bottom: 1cm;
            @frame header_frame {
                -pdf-frame-content: header_content;
                left: 2cm;
                right: 2cm;
                top: 1cm;
                height: 4.5cm;
            }
            @frame footer {
                -pdf-frame-content:footerContent;
                bottom: 0cm;
                margin-left: 1.5cm;
                margin-right: 2cm;
                text-align:right;
                height: 1cm;
            }
        }



        @page  {
            size: a4 landscape;
            top: 4cm;
            left: 1cm;
            right: 1cm;
            bottom: 1cm;
            @frame header_frame {
                -pdf-frame-content: header_content;
                left: 2cm;
                right: 2cm;
                top: 1cm;
                height: 4.5cm;
            }
            @frame footer {
                -pdf-frame-content:footerContent;
                bottom: 0cm;
                margin-left: 1.5cm;
                margin-right: 2cm;
                text-align:right;
                height: 1cm;
            }
        }

        table.table tbody th {
            border: 1px solid #a6a6a6;
            background-color: #F0F0F0;
            font-weight: 700;
            padding: 3px;
        }

        table.table tbody td {
            border: 1px solid #a6a6a6;
            padding: 3px;
        }

        table.table thead tr th {
            border: 1px solid #a6a6a6;
            padding: 3px;
        }

        .border-table {
            border: 1px solid #a6a6a6;
            padding: 3px;
        }

        p {
            text-align: justify;
        }
        .negrita {
            font-weight: bold;
        }

        .font_size {
            font-size: 8px;
            align: center;
            text-align: center;
            align: center;
            font-family: 'Red Hat Display', sans-serif;
        }
        .font_size_min {
            font-size: 7px;
            align: center;
            text-align: center;
            align: center;
            font-family: 'Red Hat Display', sans-serif;
        }

        .text_content_p {
            font-size: 11px;
            text-align: justify;
            font-family: 'Red Hat Display', sans-serif;
        }

        .text_content_p_title {
            font-size: 7.0pt;
            font-family: "Tahoma", sans-serif;
            align: center;
            text-align: center;
            align: center;
            font-family: 'Red Hat Display', sans-serif;
            color: gray;
            padding: 3px;
        }

        .td_style_content_p_title {
            background-color: #f2f2f2;

        }

        .title_head {
            text-align: center;
            align: center;
            padding-top: 0.05cm;
        }


        table.tabla-eval-perfil thead th {
            text-align: center;
            width: 500px;
            vertical-align: middle;
            {#word-wrap: break-word;#}
        }

        .clip{
            {#clip-path: inset(20px 60px 20px 0px);#}
            width: 100%;
            overflow-x: hidden;
        }

        .clip > img{
         {#border: 3px solid #ff9daa;#}
            overflow-x: hidden;
        }

        .fw-tbody {
            font-size: 9px;
        }



        .table-overflow-hiden tbody tr td {
            word-wrap: break-word;
        }

    </style>
</head>
<body>
<div id="header_content">
    <table class="table table-overflow-hiden" width="100%" style="line-height:3px; vertical-align:top; padding:1px;" border="0">
        <tr>
            <td style="width: 30%;border: 0;">
                <div class="clip">
                    <img src="https://sga.unemi.edu.ec/media/reportes/encabezados_pies/logo_unemi.png?v=1" alt="" width="163" height="57">
                </div>
            </td>
            <td style="width: 55%;overflow-x: hidden;max-width: 50%;border: 0;text-align: center">
                <span style="color: #0b2f44;font-size: 15px;padding: 0;font-weight: bold;">UNIVERSIDAD ESTATAL DE MILAGRO <br> VICERRECTORADO DE INVESTIGACIÓN Y POSGRADO <br>DIRECCIÓN DE POSGRADO
                </span>
            </td>

            <td style="width: 15%;border: 0"></td>
        </tr>
    </table>

</div>
<br><br>
<table class="table table-overflow-hiden" width="100%" style="line-height:1px;" border="0">
    <thead>
        <tr style="width: 55%;overflow-x: hidden;max-width: 50%;border: 0;text-align: center">
             <span style="color: #0b2f44;font-size: 14px;padding: 0;font-weight: bold; align-items: center;text-align: center;">  DOCUMENTACIÓN HABILITANTE PARA EL PROCESO DE PAGO POR CONTRATO CIVIL DE SERVICIOS PROFESIONALES BAJO LA ESTRUCTURA DE LA DIRECCIÓN DE POSGRADO <br>
                     {{ eActaPagoPosgrado.get_codigo_secuencia_check_list_pago }}
                </span>

        </tr>

        <tr class="font_size">
            <td class="text-center border-table font_size_min negrita" rowspan="4" colspan="1" style="width: 5%;" > N° </td>
            <td class="text-center border-table font_size_min negrita" rowspan="4" colspan="1" > PROFESIONALES </td>
            <td class="text-center border-table font_size_min negrita" rowspan="4" colspan="1" > MES PAGO </td>
            <td colspan="{{ eActaPagoPosgrado.get_requisitos_solicitados_configurados_administrativos_tics.count}}" class="text-center border-table font_size negrita"> DOCUMENTACIÓN HABILITANTE VALIDADA</td>

        </tr>
        <tr class="font_size">
            {% for eRequisitoPagoDip in eActaPagoPosgrado.get_requisitos_solicitados_configurados_administrativos_tics %}
                {% if  not eRequisitoPagoDip.requisitopagodip.id == CHECK_LIST_DE_PAGO  %}
                    {% if forloop.last  %}<td class="text-center border-table">9</td>{% else %} <td class="text-center border-table">{{ forloop.counter}}</td>{% endif %}
                {% endif %}

            {% endfor %}
            <td rowspan="3" class="text-center border-table font_size_min negrita">LINK DE DOCUMENTACIÓN VALIDADA</td>
        </tr>
        <tr class="font_size">
            {% for eRequisitoPagoDip in eActaPagoPosgrado.get_requisitos_solicitados_configurados_administrativos_tics %}
                {% if  not eRequisitoPagoDip.requisitopagodip.id == CHECK_LIST_DE_PAGO  %}
                    <td class="text-center border-table font_size_min negrita">{{ eRequisitoPagoDip }}</td>
                {% endif %}
            {% endfor %}
        </tr>
        <tr class="font_size">
            {% for eRequisitoPagoDip in eActaPagoPosgrado.get_requisitos_solicitados_configurados_administrativos_tics %}
                {% if not eRequisitoPagoDip.requisitopagodip.id == CHECK_LIST_DE_PAGO %}
                    <td class="text-center border-table font_size_min ">
                    {% if eRequisitoPagoDip.id == id_factura %}
                        Coordinación con Epunemi
                    {% else %}
                        Obligatorio
                    {% endif %}

                 </td>
                {% endif %}

            {% endfor %}
        </tr>
    </thead>
    <tbody>
    {% for solicitud in eActaPagoPosgrado.get_detalle_solicitudes %}
        <tr>
            <td colspan="1" class="text-center border-table font_size_min "  style="width: 5%;" >{{ forloop.counter }}</td>
            <td colspan="1" class="text-center border-table font_size_min ">{{ solicitud.solicitudpago.contrato.persona }}</td>
            <td colspan="1" class="text-center border-table font_size_min ">{{ solicitud.solicitudpago.get_str_meses_entre_fechas_inicio_fin }}</td>
            {% for eRequisitoPagoDip in eActaPagoPosgrado.get_requisitos_solicitados_configurados_administrativos_tics %}
                {% if not eRequisitoPagoDip.requisitopagodip.id == CHECK_LIST_DE_PAGO %}
                    {% if eRequisitoPagoDip.requisitopagodip.id ==  id_factura %}
                       <td class="text-center border-table font_size_min negrita">CUMPLE</td>
                    {% else %}
                        <td class="text-center border-table font_size_min negrita">
                            {% with documento=solicitud.solicitudpago|args:eRequisitoPagoDip.requisitopagodip|call:"tiene_cargado_documento_check_list_acta_pago" %}
                                {% if documento %}CUMPLE{% else %} X {% endif %}
                            {% endwith  %}

                        </td>
                    {% endif %}
                {% endif %}
            {% endfor %}
            <td class="text-center border-table font_size_min negrita">
                <a
                        target="_blank"
                        href="https://sga.unemi.edu.ec/guest_solicitudpagoguest?action=view_requisitos_pagos_link&id={{ solicitud.solicitudpago.pk }}"
                        style="color: black;font-size: 9px">SGA</a>

            </td>
        </tr>

    {% endfor %}


    </tbody>

</table>
{% if eActaPagoPosgrado.get_detalle_solicitudes.count < 5 %}
    <div class="">
        <br>
        <p class="negrita">Revisado por: </p>
        <br><br><br><br>
        {% if eActaPagoPosgrado.get_integrantefirma_elabora %}
            <small style="text-align: left" > {{ eActaPagoPosgrado.get_integrantefirma_elabora.persona|lower|title }}</small>
            <br>
            <small style="text-align: left" class="negrita">{{ eActaPagoPosgrado.get_integrantefirma_elabora.get_cargo_responsable_firma |lower|title}}</small>
            <br>
            <small>Milagro, {{ fechaemision|date:"Y-m-d" }}</small>
        {% endif %}
    </div>
{% else %}
    <div class=" page-break-before">
        <br><br>
        <p class="negrita">Revisado por: </p>
        <br><br><br><br>
        {% if eActaPagoPosgrado.get_integrantefirma_elabora %}
            <small style="text-align: left"> {{ eActaPagoPosgrado.get_integrantefirma_elabora.persona|lower|title }}</small>
            <br>
            <small style="text-align: left" class="negrita">{{ eActaPagoPosgrado.get_integrantefirma_elabora.get_cargo_responsable_firma|lower|title }}</small>
            <br>
            <b>Milagro, {{ fechaemision|date:"Y-m-d"}}</b>
        {% endif %}
    </div>
{% endif %}

<div id="footerContent">
    <div>
        {% block page_foot %}
            <hr>
            <table style="color: grey">
                <tr>
                    <td style="font-size: 7px;text-align: left;" width="460px">&nbsp;</td>
                    <td width="200px">&nbsp;</td>
                    <td style="text-align: right" width="140px">
                        &nbsp;&nbsp;&nbsp; P&aacute;gina
                        <pdf:pagenumber></pdf:pagenumber>
                        /
                        <pdf:pagecount></pdf:pagecount>
                    </td>
                </tr>
            </table>
        {% endblock %}
    </div>
</div>
</body>
</html>
