{% extends "base.html" %}
{% load humanize %}
{% load sga_extras %}
{% block heading %}
    <script type="text/javascript" src='/static/js/select2.js?v=1.0.0'></script>
    <link type='text/css' rel='stylesheet' href="/static/css/select2.css?v=1.0.0"/>
    <script type="text/javascript" src='/static/js/fontawesomev3.js?v=1.0.0'></script>

    <link rel="stylesheet" href="/static/eventostyle.css">
    <link rel="stylesheet" href="/static/eventoframework.css">

    {#    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>#}

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.5.0/chart.min.js" integrity="sha512-asxKqQghC1oBShyhiBwA+YgotaSYKxGP1rcSYTDrB0U6DxwlJjU59B67U8+5/++uFjcuVM8Hh5cokLjZlhm3Vg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-datalabels/2.0.0/chartjs-plugin-datalabels.min.js" integrity="sha512-R/QOHLpV1Ggq22vfDAWYOaMd5RopHrJNMxi8/lJu8Oihwi4Ho4BRFeiMiCefn9rasajKjnx9/fTQ/xkWnkDACg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <style>
        .btn_seleccionado{
            background: #0a677e !important;
        {#color: #0c0c0c !important;#}
        }
        .bordecaja {
        {#border: .07em solid rgba(0, 0, 0, .2);#}
            color: white;
        !important;
        }

        .course-path-card {
            background-color: #0b2f44;
        }

        fondo-g{
            background-color: #FFFFFF;
        }

        .bordestabla {
            border: .07em solid rgba(0, 0, 0, .1);
            color: #000000;
            box-shadow: 1px 1px 3px #999;
        !important;
        }
        .course-path-card-footer {
            justify-content: normal;
        !important;
        }
        .bordeinput{
            border-radius: 20px;
        }
        #contenedor{
            height: 100%;
        }
        {#.contenedor-grafico{#}
        {#    height: 600px !important;#}
        {#    width: 1000px  !important;#}
        {#}#}
    </style>
    <script type="text/javascript">
        $(function () {

            document.getElementById('contenedor').style.height = 750+'px';
            $("select").select2({minimumResultsForSearch: 10});

            $(".fechaentrega").click(function () {
                var id = $(this).attr('ide');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/programasvinculacion",
                    data: {'action': 'addfechaentrega', 'id': id},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbody").html(data.data);
                            $("#paneltitle").html(data.titulo);
                            $("#itemspanel").modal({backdrop: 'static', width: '300px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $(".editConvocatoria").click(function () {
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/programasvinculacion",
                    data: {'action': 'actualizaConvocatoria', 'id': $(this).data('proyecto')},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbody").html(data.data);
                            $("#paneltitle").html(data.titulo);
                            $("#itemspanel").modal({backdrop: 'static', width: '300px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $(".fechaaprobacion").click(function () {
                var id = $(this).attr('ide');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/programasvinculacion",
                    data: {'action': 'addfechaaprobacion', 'id': id},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbody").html(data.data);
                            $("#paneltitle").html(data.titulo);
                            $("#itemspanel").modal({backdrop: 'static', width: '300px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $(".cargararchivo").click(function () {
                var id = 1;
                var record = 1;
                idevidencia = $(this).attr('ide');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/programasvinculacion",
                    data: {'action': 'addfecha', 'id': 1, 'idevidencia': idevidencia},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbody").html(data.data);
                            $("#itemspanel").modal({backdrop: 'static', width: '300px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });
            $(".cargarfin").click(function () {
                var id = 1;
                var record = 1;
                alert("que tal");
                idevidencia = $(this).attr('ide');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/programasvinculacion",
                    data: {'action': 'addfechafin', 'id': 1, 'idevidencia': idevidencia},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbody1").html(data.data);
                            $("#itemspanel1").modal({backdrop: 'static', width: '300px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });
            $(".cargarpresupuesto").click(function () {
                var id = 1;
                var record = 1;
                idevidencia = $(this).attr('ide');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/programasvinculacion",
                    data: {'action': 'addfecha', 'id': 1, 'idevidencia': idevidencia},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbody").html(data.data);
                            $("#itemspanel").modal({backdrop: 'static', width: '300px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });
            $(".habilitacionreghoras").click(function () {
                let id = $(this).attr('ide');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/programasvinculacion",
                    data: {'action': 'definirregistrohoras', 'id': id},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbody").html(data.data);
                            $("#paneltitle").html(data.titulo);
                            $("#itemspanel").modal({backdrop: 'static', width: '300px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                })
            });
            $('.btntablass').each(function () {
                if ($(this).attr('href') == panelvinculacion) {
                    $(this).trigger('click');
                }
            }).click(function () {
                let panelvinculacion = $(this).attr('href');
                localStorage.setItem("panelvinculacion", panelvinculacion);
                $('.tab-pane').removeClass('active');
                $(`${panelvinculacion}`).addClass('active');
            });

            $('.btntabla').click(function () {
                let panel =$(this).attr('panel');
                console.log(panel);
                switch (panel) {
                    case '2':
                        let sp2 ='';
                        console.log('ingreso en caso 2');
                        location.href = `{{ request.path }}?panel=${panel}`;
                        break
                    case '3':
                        console.log('ingreso en caso 3');
                        location.href = `{{ request.path }}?panel=${panel}`;
                        break
                    case '4':
                        console.log('ingreso en caso 4');
                        location.href = `{{ request.path }}?panel=${panel}`;
                        break
                    default:
                        let sp1= ''//$();
                        location.href = `{{ request.path }}?s=${sp1}`
                        break
                }
            });

            $("#search").click(function(){
                busquedaproyecto();
                //document.getElementById('contenedor').style.height = 600+'px';
            });

            $('#searchinput').keyup(function(e) {
                if(e.keyCode == 13) {
                    busqueda();
                    //document.getElementById('contenedor').style.height = 600+'px';
                }
            });
            busqueda = function(){
                var term = $("#searchinput").val().toUpperCase().trim();
                if (term.length>0){
                    location.href = "/programasvinculacion?s="+term;
                }

            };

            $("#searchproyecto").click(function(){
                busquedaproyecto();
            });

            $('input').keyup(function(e) {
                if(e.keyCode == 13) {
                    busquedaproyecto();
                }
            });
            busquedaproyecto = function(){
                var anio = $("#anio").val().toUpperCase().trim();
                var cod = $("#cod").val().toUpperCase().trim();
                var nom = $("#nombre").val().toUpperCase().trim();
                var doc = $("#docente").val().toUpperCase().trim();
                var est = $("#estudiante").val().toUpperCase().trim();
                var estado = $("#estproyecto").val();

                location.href = "/programasvinculacion?&panel=2&anio="+anio+"&cod="+cod+"&doc="+doc+"&est="+est+"&nom="+nom+"&estado="+estado;

            };
            var table = $('#tablaProyectos').DataTable({
                "sPaginationType": "full_numbers",
                "sDom": 'T<"clear">lfrtip',
                "paging": false,
                "ordering": false,
                "info": false,
                "searching": false,
                "order": [[2, 'asc']],
                "columnDefs": [{"visible": false, "targets": 1}],
                "drawCallback": function (settings) {
                    var api = this.api();
                    var rows = api.rows({page: 'current'}).nodes();
                    var last = null;
                    api.column(1, {page: 'current'}).data().each(function (group, i) {
                        if (last !== group) {
                            $(rows).eq(i).before(
                                '<tr class="group"><td colspan="14" height="30" bgcolor="#f1f1f1">' + group + '</td></tr>'
                            );
                            last = group
                        }
                    });
                    $('[data-toggle="tooltip"]').tooltip();
                }
            });
        });
        function vistapreviaguipractica_ind(id){
            openwindow('POST' ,'/programasvinculacion', {action:'programapdf',id:id}, '_blank');
        }

        function resultado_estudiantes_vinculacion(){
            _url = '/programasvinculacion?action=estudiantes_matriculados_vinculacion';
            Swal.fire({
                html: `<b>¿Esta segur{% if persona.es_mujer %}a{% else %}o{% endif %} de generar el reporte ESTUDIANTES MATRICULADOS VINCULACIÓN - EN LÍNEA?</b><br>`,
                title: '',
                text: '',
                type: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Si, ejecutar!',
                cancelButtonText: 'Cancelar'
            }).then((result) => {
                if (result.value) {
                    bloqueointerface();
                    $.get(_url, {}, function (data) {
                    $.unblockUI();
                    if (data.result) {
                        $('#btnNotificacionTareas').html(data.btn_notificaciones);
                        mensajeSuccess(data.mensaje)
                    } else {
                        mensajeWarning(data.mensaje)
                    }
                }, "json");
                }
            });
        }

        function estudiantes_proceso(){
            _url = '/programasvinculacion?action=estudiantes_proceso_vinculacion';
            Swal.fire({
                html: `<b>¿Esta segur{% if persona.es_mujer %}a{% else %}o{% endif %} de generar el reporte ESTUDIANTES EN PROCESO VINCULACIÓN?</b><br>`,
                title: '',
                text: '',
                type: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Si, ejecutar!',
                cancelButtonText: 'Cancelar'
            }).then((result) => {
                if (result.value) {
                    bloqueointerface();
                    $.get(_url, {}, function (data) {
                    $.unblockUI();
                    if (data.result) {
                        $('#btnNotificacionTareas').html(data.btn_notificaciones);
                        mensajeSuccess(data.mensaje)
                    } else {
                        mensajeWarning(data.mensaje)
                    }
                }, "json");
                }
            });
        }

    </script>
    <link rel="stylesheet" href="/static/widget.css">
{% endblock %}
{% block atras %}/{% endblock %}
{% block canvas %}
    <div class="row">
        <div class="col-lg-3">
            <!-- card -->
            <a href="{{ request.path }}"
               class="texto-blue">
                <div class="card mb-2 border-top border-muted border-4 card-hover-with-icon {% if not panel %}active{% endif %}"
                     style="border: 0px">
                    <!-- card body -->
                    <div class="card-body">
                        <span class="fs-6 text-uppercase fw-semi-bold">PROGRAMAS </span>
                        <div class="mt-0 d-flex justify-content-between align-items_{{ l.id }}-center">
                            <div class="lh-1">
                                <h2 class="h1 fw-bold mb-1 text-secondary"><i class="fa fa-puzzle-piece"></i></h2>
                            </div>
                            <div class="col-auto">
                                <b><i class="fa fa-sort-numeric-asc"></i> Cantidad: <span class="badge bg-info">{{ cantidad_programas }}</span></b><br>
                                <b><i class="fa fa-tags"></i> Activos / Inactivos: </b> <span class="badge bg-gradient-success">{{ programas_activos }} / {{ programas_inactivos }}</span><br>
                            </div>
                        </div>
                    </div>
                </div>
            </a>
        </div>
        <div class="col-lg-3">
            <!-- card -->
            <a href="{{ request.path }}?panel=2"
               class="texto-blue">
                <div class="card mb-2 border-top border-muted border-4 card-hover-with-icon {% if panel == '2' %}active{% endif %}"
                     style="border: 0px">
                    <!-- card body -->
                    <div class="card-body">
                        <span class="fs-6 text-uppercase fw-semi-bold">PROYECTOS</span>
                        <div class="mt-0 d-flex justify-content-between align-items-center">
                            <div class="lh-1">
                                <h2 class="h1 fw-bold mb-1 text-secondary"><i class="fa fa-puzzle-piece"></i></h2>
                            </div>
                            <div class="col-auto">
                                <b><i class="fa fa-sort-numeric-asc"></i> Cantidad: <span class="badge bg-info">{{ cantidad_proyectos }}</span></b><br>
                                <b><i class="fa fa-check"></i> Aprobados: <span class="badge bg-gradient-success">{{ proyectos_aprobados }}</span></b><br>
                            </div>
                        </div>
                    </div>
                </div>
            </a>
        </div>
        <div class="col-lg-3">
            <a href="{{ request.path }}?panel=3"
               class="texto-blue reporte_bitacora">
                <!-- card -->
                <div class="card mb-2 border-top border-muted border-4 card-hover-with-icon {% if panel == '3' %}active{% endif %}"
                     style="border: 0px">
                    <!-- card body -->
                    <div class="card-body">
                        <span class="fs-6 text-uppercase fw-semi-bold">FORMATOS</span>
                        <div class="mt-0 d-flex justify-content-between align-items-center">
                            <div class="lh-1">
                                <h2 class="h1 fw-bold mb-1 text-secondary">
                                    <i class="fa fa fa-files-o"></i>
                                </h2>
                            </div>
                            <div class="col-auto">
                                Formatos de informes y documentación
                            </div>
                        </div>
                    </div>
                </div>
            </a>
        </div>
        <div class="col-lg-3">
            <a href="{{ request.path }}?panel=4"
               class="texto-blue reporte_bitacora">
                <!-- card -->
                <div class="card mb-2 border-top border-muted border-4 card-hover-with-icon {% if panel == '4' %}active{% endif %}"
                     style="border: 0px">
                    <!-- card body -->
                    <div class="card-body">
                        <span class="fs-6 text-uppercase fw-semi-bold">RESUMEN</span>
                        <div class="mt-0 d-flex justify-content-between align-items-center">
                            <div class="lh-1">
                                <h2 class="h1 fw-bold mb-1 text-secondary">
                                    <i class="fa fa-pie-chart"></i>
                                </h2>
                            </div>
                        </div>
                    </div>
                </div>
            </a>
        </div>
    </div>

    <div class="row-fluid">
        <div class="tab-content {% if not panel %}active{% endif %}" style="height: 100%;" id="contenedor" style="width: 100%">
            {#            =====================================================================PROGRAMAS#}
            <div class="tab-pane {% if not panel %}active{% endif %}" id="1">
                <div id="no-more-tables">
                    <div class='row'>
                        <div class='col-lg-12'>
                            <div class="headtitle">
                                <h4>PROGRAMAS DE VINCULACIÓN</h4>
                            </div>
                        </div>
                    </div>
                    <div class="row" style="vertical-align: middle">
                        <div class="col-lg-4">
                            <a href="/programasvinculacion?action=add" class="btn btn-success"><span class="fa fa-plus "></span> Adicionar</a>
                            <a href="/programasvinculacion?action=excelprograma" class="btn btn-success"><i class="fa fa-file-excel-o "></i> Descargar Excel</a>
                        </div>
                        <div class="col-lg-4" style="vertical-align: middle">
                            <form class="form-search">
                                <input class='searchinput bordeinput' type='text' id='searchinput' value='{{ search }}' autocomplete="off" placeholder="Código de programa"/>
                                <a href="javascript:;" id='search' class='btn btn-info'><span class="fa fa-search "></span></a>
                                {% if search or ids %}
                                    <a href="/programasvinculacion" id='allresults' class='btn btn-info'><span class="fa fa-refresh "></span> Todos</a>
                                {% endif %}
                            </form>
                        </div>
                    </div>

                    <div class="card mb-4">
                        <div class="card-body border-top border-6 rounded-3 border-dark-info">
                            <div class="table-responsive">
                                <table class="table table-bordered bordestabla uk-width-1-1" id="tablaProgramas">
                                    <thead>
                                    <tr>
                                        <th style="width: 50px;"><span><i class="fa fa-key"></i> Código</span></th>
                                        <th style="width: 300px;text-align: center;"><span><i class="fa fa-american-sign-language-interpreting"></i> Programa</span></th>
                                        <th style="width: 300px;text-align: center;"><span><i class="fa fa-tags"></i> Línea</span></th>
                                        <th style="width: 50px;text-align: center;"><span><i class="fa fa-calendar-o"></i> Año</span></th>
                                        <th style="width: 50px;text-align: center;"><span><i class="fa fa-calendar"></i> F.Inicio</span></th>
                                        <th style="width: 50px;text-align: center;"><span> <i class="fa fa-calendar"></i> F.Fin</span></th>
                                        <th style="width: 50px;text-align: center;"><span><i class="fa fa-calendar"></i> F.Fin Real</span></th>
                                        <th style="width: 50px;text-align: center;"><span><i class="fa fa-tag"></i> Estado</span></th>
                                        <th style="width: 70px;text-align: center;">Acción</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for programa in programas %}
                                        <tr>
                                            <td>{{ programa.id }}-PROG</td>
                                            <td style="text-align: justify;">{{ programa.nombre|upper }}</td>
                                            {#                        <td style="text-align: justify;">{{ programa.lineainvestigacion|upper }}</td>#}
                                            <td style="text-align: justify;">
                                                {% for pro in programa.sublineas %}
                                                    <strong>{{ forloop.counter }})</strong>{{ pro.lineainvestigacion.nombre }} - {{ pro.sublineainvestigacion.nombre }}<br>
                                                {% endfor %}
                                            </td>
                                            <td style="text-align: center;">{{ programa.fechainicio|date:"Y" }}</td>
                                            <td style="text-align: center;">{{ programa.fechainicio|date:"Y-m-d" }}</td>
                                            <td style="text-align: center;">{{ programa.fechaplaneado|date:"Y-m-d" }}</td>
                                            <td style="text-align: center;">{{ programa.fechareal|date:"Y-m-d" }}</td>
                                            <td style="text-align: center;">
                                                {% if programa.estado %}
                                                    <label class="badge badge-success">ACTIVO</label>
                                                {% else %}
                                                    <label class="badge badge-light">INACTIVO</label>
                                                {% endif %}
                                            </td>
                                            <td style="text-align: center;">
                                                <div class="dropdown">
                                                    <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                        Acciones
                                                    </button>
                                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                                        <a class="dropdown-item" href='/programasvinculacion?action=editprograma&id={{ programa.id }}'><span class="fa fa-edit "></span> Editar</a>
                                                        <a class="dropdown-item" href='/programasvinculacion?action=evidenciasprogramas&id={{ programa.id }}'><span class="fa fa-table "></span> Evidencias <label class="label tu">{{ programa.detalleevidencias_set.count }}</label></a>
                                                        <a class="dropdown-item" href="/programasvinculacion?action=addlinea&id={{ programa.id }}"><span class="fa fa-tag"></span> Linea Investigación/Area Conocimiento</a>
                                                        {#                                    <li><a href="/programasvinculacion?action=addarea&id={{ programa.id }}"><span class="fa fa-clock-o" ></span> </a></li>#}
                                                        {% if not programa.usoprograma %}
                                                            <a class="dropdown-item eliminacionmodal " href="javascript:;" nhref='/programasvinculacion?action=deleteprograma&id={{ programa.id }}'><span class="fa fa-minus"></span> Eliminar</a>
                                                        {% endif %}
                                                        <a class="dropdown-item" onclick="vistapreviaguipractica_ind('{{ programa.id }}')"><span class="fa fa-file-pdf-o"></span> Imprimir</a>
                                                        {% if programa.estado %}
                                                            <a class="dropdown-item" href="/programasvinculacion?action=cambiarEstado&id={{ programa.id }}"><span class="fa fa-close"></span> Desactivar</a>
                                                        {% else %}
                                                            <a class="dropdown-item" href="/programasvinculacion?action=cambiarEstado&id={{ programa.id }}"><span class="fa fa-check-square-o"></span> Activar</a>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                    {% endfor %}
                                    {% if not programas %}
                                        <tr>
                                            <td colspan="11">
                                                NO EXISTEN PROGRAMAS
                                            </td>
                                        </tr>
                                    {% endif %}
                                    </tbody>
                                </table>
                            </div>
                            <div class="row my-3 px-3">
                                <div class="col-lg-12">
                                    <nav>
                                        {% if paging.num_pages > 20 %}
                                            <ul class="pagination justify-content-center m-0">
                                                {% if paging.primera_pagina %}
                                                    <li class="page-item">
                                                        <a class="page-link bloqueo_pantalla" href="/programasvinculacion?{% if search %}s={{ search }}&{% endif %}page=1">1</a>
                                                    </li>
                                                    <li class="page-item">
                                                        <a class="page-link bloqueo_pantalla" href="/programasvinculacion?{% if search %}s={{ search }}&{% endif %}page={{ paging.ellipsis_izquierda }}" class="active">...</a>
                                                    </li>
                                                {% endif %}
                                                {% for pagenumber in paging.paginas %}
                                                    <li {%  if pagenumber == page.number %}class='active page-item'{% else %} class='page-item'{% endif %}>
                                                        <a class="page-link bloqueo_pantalla" href="/programasvinculacion?{% if search %}s={{ search }}&{% endif %}page={{ pagenumber }}">{{ pagenumber }}</a>
                                                    </li>
                                                {% endfor %}
                                                {% if paging.ultima_pagina %}
                                                    <li class="page-item">
                                                        <a href="/programasvinculacion?{% if search %}s={{ search }}&{% endif %}page={{ paging.ellipsis_derecha }}" class="active page-link bloqueo_pantalla">...</a>
                                                    </li>
                                                    <li class="page-item">
                                                        <a class="active page-link bloqueo_pantalla" href="/programasvinculacion?{% if search %}s={{ search }}&{% endif %}page={{ paging.num_pages }}">{{ paging.num_pages }}</a>
                                                    </li>
                                                {% endif %}
                                            </ul>
                                        {% else %}
                                            <ul class="pagination justify-content-center m-0">
                                                {% for pagenumber in paging.page_range %}
                                                    <li {%  if pagenumber == page.number %}class='active page-item' {% else %}class="page-item"{% endif %}>
                                                        <a class="page-link bloqueo_pantalla" href="/programasvinculacion?{% if search %}s={{ search }}&{% endif %}page={{ pagenumber }}">{{ pagenumber }}</a>
                                                    </li>
                                                {% endfor %}
                                            </ul>
                                        {% endif %}
                                    </nav>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {#            =====================================================================PROYECTOS#}
            <div class="tab-pane {% if panel == '2' %}active{% endif %}" id="2">
                <div id="no-more-tables">
                    <div class='row'>
                        <div class='col-lg-12'>
                            <div class="headtitle">
                                <h4>PROYECTOS DE VINCULACIÓN</h4>
                            </div>
                        </div>
                    </div>

                    <div class='row-fluid'>
                        <div class="span12">
                            <form method="GET" action="{{ request.path }}">
                                <table id="tablaBusqueda" class="table table-hover tablaBusquedaSearch">
                                    <tbody>
                                    <tr>
                                        <td>
                                            <i class="fa fa-tag"></i> Estados: <br>
                                            <select name="estproyecto" id="estproyecto" class="form-control" style="width: 100%">
                                                <option value="0">TODOS</option>
                                                {% for sol in estadoproyectos %}
                                                    <option value="{{ sol.0 }}" {% if sol.0 == estado %}selected{% endif %}>{{ sol.1 }}</option>
                                                {% endfor %}
                                            </select>
                                        </td>

                                        <td colspan="3">
                                            <i class="fa fa-tag"></i> Cod. Proyecto: <br>
                                            <input class='searchinputproyecto' type='text' id='cod' value='{{ cod }}' autocomplete="off" name="search" style="width: 100%" placeholder="Código"/>
                                        </td>
                                        <td colspan="3">
                                            <i class="fa fa-tag"></i> Año ejecución: <br>
                                            <input class='searchinputproyecto' type='text' id='anio' value='{{ anio }}' autocomplete="off" name="search" style="width: 100%" placeholder="Año"/>
                                        </td>
                                        <td colspan="3">
                                            <i class="fa fa-tag"></i> Nombre proyecto: <br>
                                            <input class='searchinputproyecto' type='text' id='nombre' value='{{ nom }}'
                                                   autocomplete="off" name="search" style="width: 100%" placeholder="Proyecto"/>
                                        </td>

                                    </tr>
                                    <tr>
                                        <td>
                                            <i class="fa fa-users tu" title="Docente"></i> Docente:<br>
                                            <input class='search' type='text' id='docente' value='{{ doc }}'
                                                   autocomplete="off" name="search" style="width: 100%"
                                                   placeholder="Nombres, Apellidos, Cedula"/>
                                        </td>
                                        <td>
                                            <i class="fa fa-users tu" title="Estudiante"></i> Estudiante:<br>
                                            <input class='form-control' type='text' id='estudiante' value='{{ est }}'
                                                   autocomplete="off" name="empresa" style="width: 80%"
                                                   placeholder="Nombres, Apellidos, Cedula"/>
                                            <a href="javascript:;" class="btn btn-primary" id="searchproyecto"><i class="fa fa-search"></i></a>
                                            {% if anio or doc or est or docente or nom or cod %}
                                                <a href="/programasvinculacion?panel=2" id='allresults' class='btn btn-info'><span class="fa fa-refresh "></span> </a>
                                            {% endif %}
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </form>
                        </div>
                    </div>
                    <div class='row-fluid'>
                        <div class="col-lg-12">
                            {% if conv_activa %}
                                <a href="/programasvinculacion?action=addproyecto&conv={{ convocatoria.pk }}" class="btn btn-success"><span class="fa fa-plus"></span> Adicionar</a>
                            {% else %}
                                <a href="/programasvinculacion?action=addproyecto" class="btn btn-success"><span class="fa fa-plus "></span> Adicionar</a>
                            {% endif %}
                            <a href="/programasvinculacion?action=participantesproyectostodos" class="btn btn-success"><i class="fa fa-users "></i> Estudiantes inscritos en todos los proyectos</a>
                            {#                            <a href="/programasvinculacion?action=participantesproyectostodos_2" class="btn btn-success"><i class="fa fa-users "></i> Estudiantes inscritos en todos los proyectos 2</a>#}
                            <div class="btn-group">
                                <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Configuración
                                </button>
                                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                    <a class="dropdown-item" href="/programasvinculacion?action=listafechas" ><i class="fa fa-calendar-check-o "></i> Convocatorias</a>
                                    <a class="dropdown-item" href="/programasvinculacion?action=viewcargobeneficiario" ><i class="fa fa-plus"></i> Cargo beneficiarios</a>
                                    <a class="dropdown-item" href="/programasvinculacion?action=listaconfigurarcambio" ><i class="fa fa-retweet"></i> Configuración de cambios</a>
                                    <a class="dropdown-item" href="/programasvinculacion?action=listaInsumos" ><i class="fa fa-boxes"></i> Insumos proyectos</a>
                                </div>
                            </div>

                            <div class="btn-group">
                                <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Reportes
                                </button>
                                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                    <a class="dropdown-item" href="/programasvinculacion?action=excelparticipantevinculacion&tipo=1" target="_blank"><i class="fa fa-list "></i> Descargar Excel Participantes Vinculación</a>
                                    <a class="dropdown-item" href="/programasvinculacion?action=excelmatriculadosvinculacion&tipo=1" target="_blank"><i class="fa fa-list "></i> Descargar Excel Matriculados Vinculación</a>
                                    <a class="dropdown-item" href="/programasvinculacion?action=excelproyectosinvestigacionvinculacion&tipo=1" target="_blank"><i class="fa fa-list "></i> Descargar Excel Proyectos de Investigacion</a>
                                    <a class="dropdown-item" href="javascript:;" onclick="resultado_estudiantes_vinculacion()"> <i class="fa fa-file-excel "></i>&nbsp;Descargar Excel Estudiantes en línea </a>
                                    <a class="dropdown-item" href="javascript:;" onclick="estudiantes_proceso()"> <i class="fa fa-file-excel "></i>&nbsp;Descargar Excel Estudiantes en proceso </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card mb-4">
                        <div class="card-body border-top border-6 rounded-3 border-dark-info">
                            <div class="table-responsive">
                                <table class='table table-bordered bordestabla uk-width-1-1' cellpadding="0" cellspacing="0" id="tablaProyectos">
                                    <thead>
                                    <tr>
                                        <th style="width: 50px; text-align: center"><span><i class="fa fa-key"></i><br>Código</span></th>
                                        <th style="width: 300px; text-align: center"> Programa</th>
                                        <th style="text-align: center;"><i class="fa fa-american-sign-language-interpreting"></i><br>Datos del proyecto</th>
                                        <th style="width: 350px; text-align: center;"><i class="fa fa-user"></i><br>Docentes</th>
                                        <th style=" text-align: center;"><i class="fa fa-eye"></i><br>Observaciones</th>
                                        <th style="width: 50px;text-align: center;"><i class="fa fa-files-o"></i><br>Archivo</th>
                                        <th style="width: 30px;text-align: center;">Acciones</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for proyecto in proyectos %}
                                        <tr>
                                            <td>{{ proyecto.id }}-PROY</td>
                                            <td style="text-align: justify;"><b><i class="fa fa-american-sign-language-interpreting"></i> Programa:</b> {{ proyecto.programa|upper }}</td>
                                            <td style="text-align: justify;">
                                                <b><i class="fa fa-american-sign-language-interpreting"></i> Proyecto:</b>
                                                {{ proyecto.nombre|upper }}<br>
                                                <span class="badge badge-info"><i class="fa fa-tag"></i> TIPO: {{ proyecto.get_tipo_display }}</span>
                                                {% if proyecto.get_tipoproinstitucion_display %}
                                                    <span class="badge badge-info">
                                                    {{ proyecto.get_tipoproinstitucion_display }}
                                                </span>
                                                {% endif %}
                                                <span class="badge badge-success">
                                                <i class="fa fa-clock-o"></i>
                                                DURACIÓN: {{ proyecto.tiempo_duracion_horas }} HORAS
                                            </span>
                                                {% if proyecto.estado_aprobacion == "APROBADO" %}
                                                    <span class="badge badge-success">{{ proyecto.estado_aprobacion }}</span>
                                                {% endif %}
                                                {% if proyecto.estado_aprobacion == "RECHAZADO CON OBSERVACIONES" %}
                                                    <span class="badge badge-danger">{{ proyecto.estado_aprobacion }}</span>
                                                {% elif proyecto.estado_aprobacion == "REACTIVADO CON OBSERVACIONES" %}
                                                    <span class="badge badge-warning">{{ proyecto.estado_aprobacion }}</span>
                                                {% elif proyecto.estado_aprobacion == "SOLICITADO" %}
                                                    <span class="badge badge-info">{{ proyecto.estado_aprobacion }}</span>
                                                {% elif proyecto.estado_aprobacion == "PENDIENTE" %}
                                                    <span class="badge badge-default">{{ proyecto.estado_aprobacion }}</span>
                                                {% elif proyecto.estado_aprobacion == "BORRADOR" %}
                                                    <span class="badge badge-default">{{ proyecto.estado_aprobacion }}</span>
                                                {% elif proyecto.estado_aprobacion == "CANCELADO" %}
                                                    <span class="badge badge-default">{{ proyecto.estado_aprobacion }}</span>
                                                {% elif proyecto.estado_aprobacion == "CULMINADO" %}
                                                    <span class="badge badge-success">{{ proyecto.estado_aprobacion }}</span>
                                                {% endif %}<br>
                                                <b><i class="fa fa-calendar-o"></i> Año de Ejecución:
                                                </b>{{ proyecto.fechainicio| date:'Y' }} |
                                                <b><i class="fa fa-calendar-o"></i> Fecha de Inicio:
                                                </b>{{ proyecto.fechainicio| date:'Y-m-d' }} |
                                                <b><i class="fa fa-calendar-o"></i> Fecha fin: </b>
                                                [<b>Planificada:</b> {{ proyecto.fechaplaneacion| date:'Y-m-d' }}]
                                                -
                                                [<b>Real:</b> {{ proyecto.fechareal|date:'Y-m-d'|default_if_none:"S/I" }}]<br>
                                                {% if proyecto.tiene_definido_registro_horas %}
                                                    <b><span class="badge badge-info">REGISTRO DE HORAS {{ proyecto.fechas_definidas }}</span></b>
                                                {% else %}
                                                    <b><span class="badge badge-danger">FECHAS DE REGISTRO DE HORAS NO DEFINIDAS</span></b>
                                                {% endif %}
                                                <b><span class="badge badge-success">{{ proyecto.convocatoria.descripcion }}</span></b>
                                                <a href="/programasvinculacion?action=matrizparticipantes&id={{ proyecto.id }}&tipo=1" class="badge badge-warning" title="Matriz de participantes" style="cursor: pointer;"><i class="fa fa-users"></i> <i class="fa fa-download"></i></a>

                                                {#                                            {% if proyecto.tiempo_registro_horas_culminado %}#}
                                                {#                                                <b><span class="badge badge-danger">TIEMPO DE REGISTRO DE HORAS CULMINADO</span></b>#}
                                                {#                                            {% endif %}#}
                                                {% if proyecto.get_tecnicoasociado %}
                                                <b style="cursor:pointer;" title="{{ proyecto.get_tecnicoasociado.persona }}"><span class="badge bg-dark">T.A</span></b>
                                                {% endif %}
                                            </td>
                                            <td>
                                                {% for docentes in proyecto.docentes %}
                                                    {% if docentes.tipoparticipante.nombre == 'LIDERES' %}
                                                        <span class="badge badge-info" data-toggle="tooltip" data-placement="top" data-original-title="LIDER">L</span>
                                                    {% elif docentes.tipoparticipante.nombre == 'PROMOTORES' %}
                                                        <span class="badge badge-primary" data-toggle="tooltip" data-placement="top" data-original-title="PROMOTOR">P</span>
                                                    {% else %}
                                                        <span class="badge badge-warning" data-toggle="tooltip" data-placement="top" data-original-title="ASOCIADO EXTERNO">A</span>
                                                    {% endif %}
                                                    {% if docentes.profesor %}{{ docentes.profesor }}{% else %}{{ docentes.externo.persona }}{% endif %}<br>
                                                {% endfor %}

                                            </td>
                                            <td style="text-align: center;">
                                                {% if  proyecto.observaa %}
                                                    {{ proyecto.observaa }}
                                                {% endif %}<br>

                                            </td>
                                            <td style="text-align: center;">
                                                {% if proyecto.archivo %}
                                                    <a href="/media/{{ proyecto.archivo }}" target="_blank"><img src="/static/images/pdf.png" width="18" height="18" align="absmiddle"></a>
                                                {% endif %}
                                            </td>
                                            <td>
                                                <div class="dropdown">
                                                    <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                        Acciones
                                                    </button>
                                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                                        {% if experto_presu == False %}
                                                        <a class="dropdown-item" href='?action=tecnicoasociadoproyectovinculacion&id={{ proyecto.id }}'><span class="fa fa-cogs "></span>&nbsp; Gestion de técnico asociado</a>
                                                        {% endif %}
                                                        <div class="dropdown-divider"></div>
                                                        <a class="dropdown-item" href='/programasvinculacion?action=verproyecto&id={{ proyecto.id }}'><span class="fa fa-eye "></span> ver</a>
                                                        <a class="dropdown-item" href='javascript:;' class="editConvocatoria" data-proyecto="{{ proyecto.pk }}"><span class="fa fa-calendar-plus-o "></span> Definir convocatoria</a>
                                                        <a class="dropdown-item" href='/programasvinculacion?action=editar&id={{ proyecto.id }}'><span class="fa fa-edit "></span> Editar</a>
                                                        {% if experto_presu == False %}
                                                        {% if perms.sga.puede_aprobar_proyectos_vinculacion %}
                                                            <a class="dropdown-item" href='/programasvinculacion?action=aprobacionproyecto&id={{ proyecto.id }}'><span class="fa fa-edit "></span> Aprobación</a>
                                                        {% endif %}
                                                        {% endif %}
                                                        <a class="dropdown-item" href="javascript:;" id="itemsadicionarobj" class="fechaentrega" ide="{{ proyecto.id }}"><span class="fa fa-calendar"></span> Fecha de entrega</a>
                                                        <a class="dropdown-item" href="javascript:;" id="itemsadicionarobj" class="fechaaprobacion" ide="{{ proyecto.id }}"><span class="fa fa-calendar"></span> Fecha de aprobación</a>

                                                        <a class="dropdown-item" href='/programasvinculacion?action=evidenciasproyectos&id={{ proyecto.id }}'><span class="fa fa-table "></span> Evidencias <label class="label tu">{{ proyecto.detalleevidencias_set.count }}</label></a>
                                                        <a class="dropdown-item" href='/programasvinculacion?action=addfechafinp&id={{ proyecto.id }}'><span class="fa fa-calendar-check-o "></span> Finalizar</a>

                                                        <a class="dropdown-item" href='/programasvinculacion?action=ejecucion&id={{ proyecto.id }}'><span class="fa fa-calendar-check-o "></span> Ejecución </a>
                                                        {% if experto_presu == False %}
                                                        <a class="dropdown-item" href='/programasvinculacion?action=participantesproyectosdocentes&id={{ proyecto.id }}'><span class="fa fa-group "></span> Docentes Participantes </a>
                                                        {% endif %}
                                                        {% if experto_presu == False %}
                                                        <a class="dropdown-item" href='/programasvinculacion?action=inscripcion&id={{ proyecto.id }}'><span class="fa fa-calendar "></span> Inscripción estudiantes </a>
                                                        {% endif %}
                                                        {% if experto_presu == False %}
                                                        <a class="dropdown-item" href='/programasvinculacion?action=participantesproyectos&id={{ proyecto.id }}'>
                                                            <span class="fa fa-group "></span>
                                                            Estudiantes Participantes
                                                            {% with numeroparticipantes=proyecto|call:'numeroparticipanteproyectos' %}
                                                                {% if numeroparticipantes %}
                                                                    <label class="label tu">{{ numeroparticipantes }}</label>
                                                                {% endif %}
                                                            {% endwith %}
                                                        </a>
                                                        {% endif %}
                                                        <a class="dropdown-item" href='/programasvinculacion?action=archivoenviados&id={{ proyecto.id }}'><span class="fa fa-list"></span> Listado de Archivos enviados</a>
                                                        <a class="dropdown-item" href='/programasvinculacion?action=presupuestoproyectos&id={{ proyecto.id }}'><span class="fa fa-money"></span> Presupuesto</a>
                                                        {#                                                    {% if proyecto.aprobacion == 2 %}#}
                                                        <a class="dropdown-item eliminacionmodal" href="javascript:;" nhref='/programasvinculacion?action=deleteproyecto&id={{ proyecto.id }}'><span class="fa fa-minus "></span> Eliminar</a>
                                                        {#                                                    {% endif %}#}
                                                        {#                                    DEFINIR EN QUE ESTADO SE PUEDE VISUALIZAR ESTA OPCION:#}

                                                        {% if proyecto.aprobacion == 1 %}
                                                            <a class="dropdown-item" href="javascript:;" id="habilitacionreghoras" class="habilitacionreghoras" ide="{{ proyecto.id }}"><span class="fa fa-clock-o"></span> Habilitar registro de horas</a>
                                                            {#                                                        <li><a href='/programasvinculacion?action=habilitarregistrohoras&id={{ proyecto.id }}'><span class="fa fa-clock-o"></span></span> Habilitar registro de horas</a></li>#}
                                                            <a class="dropdown-item" href='/programasvinculacion?action=habilitarcargainforme&id={{ proyecto.id }}'><span class="fa fa-file"></span> Habilitar carga de informes</a>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                    {% endfor %}
                                    {% if not proyectos %}
                                        <tr>
                                            <td colspan="11">
                                                NO HAY PROYECTOS
                                            </td>
                                        </tr>
                                    {% endif %}
                                    </tbody>
                                </table>
                            </div>
                            <div class="card-footer border-top-0">
                                <div class="row my-3 px-3">
                                    <div class="col-lg-12">
                                        <nav>
                                            {% if paging.num_pages > 20 %}
                                                <ul class="pagination justify-content-center m-0">
                                                    {% if paging.primera_pagina %}
                                                        <li class="page-item">
                                                            <a class="page-link bloqueo_pantalla" href="/programasvinculacion?panel=2{{ url_vars }}page=1">1</a>
                                                        </li>
                                                        <li class="page-item">
                                                            <a class="page-link bloqueo_pantalla" href="/programasvinculacion?panel=2&page={{ paging.ellipsis_izquierda }}{{ url_vars }}" class="active">...</a>
                                                        </li>
                                                    {% endif %}
                                                    {% for pagenumber in paging.paginas %}
                                                        <li {%  if pagenumber == page.number %}class='active page-item' {% else %} class='page-item' {% endif %}>
                                                            <a href="/programasvinculacion?panel=2&page={{ pagenumber }}{{ url_vars }}" class="page-link bloqueo_pantalla">{{ pagenumber }}</a>
                                                        </li>
                                                    {% endfor %}
                                                    {% if paging.ultima_pagina %}
                                                        <li class="page-item">
                                                            <a href="/programasvinculacion?panel=2&page={{ paging.ellipsis_derecha }}{{ url_vars }}" class="active page-link bloqueo_pantalla">...</a>
                                                        </li>
                                                        <li class="page-item">
                                                            <a href="/programasvinculacion?panel=2&page={{ paging.num_pages }}{{ url_vars }}" class="page-link bloqueo_pantalla">{{ paging.num_pages }}</a>
                                                        </li>
                                                    {% endif %}
                                                </ul>
                                            {% else %}
                                                <div class='pagination'>
                                                    <ul class="pagination justify-content-center m-0">
                                                        {% for pagenumber in paging.page_range %}
                                                            <li {%  if pagenumber == page.number %}class='active page-item'
                                                                {% else %}class="page-item"{% endif %}>
                                                                <a class="page-link bloqueo_pantalla" href="/programasvinculacion?panel=2&page={{ pagenumber }}{{ url_vars }}">{{ pagenumber }}</a>
                                                            </li>
                                                        {% endfor %}
                                                    </ul>
                                                </div>
                                            {% endif %}
                                        </nav>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal fade static" id="itemspanel" style="display: none;">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                        <b><h4 id="paneltitle">Rango de para subir Proyecto</h4></b>
                    </div>
                    <div class="modal-body panelbody"></div>
                </div>
            </div>
            {#            =====================================================================FORMATOS#}
            <div class="tab-pane {% if panel == '3' %}active{% endif %}" id="3">
                <div id="no-more-tables">
                    <div class='row'>
                        <div class='col-lg-12'>
                            <div class="headtitle">
                                <h4>FORMATOS DE EVIDENCIAS</h4>
                            </div>
                        </div>
                    </div>
                    <div class='row-fluid'>
                        <div class="span12">
                            <a href="/programasvinculacion?action=addevidenciaformato" class='btn btn-success'><span class="fa fa-plus "></span> Adicionar</a>
                        </div>
                    </div>
                    <div class="row-fluid">
                        <div class="span12">
                            {#                        INICIA TABLA#}
                            <table class='table table-striped table-bordered bordestabla uk-width-1-1' id="tablaEvidencias">
                                <thead>
                                <tr>
                                    <th>Formato Evidencia</th>
                                    <th style="width: 80px"></th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for evidencia in evidencias %}
                                    <tr>
                                        <td>{{ evidencia.nombre }}</td>
                                        <td style="text-align: center">
                                            <a href="/programasvinculacion?action=editevidenciaformato&id={{ evidencia.id }}" class="btn btn-info btn-mini tu" title="Editar"><i class="fa fa-edit"></i></a>
                                            {#                            <a href="javascript:;" nhref="/inv_vinculacion?action=deltopealumnos&id={{ topealumnosprimero.id }}" class="btn btn-danger eliminacionmodal btn-mini tu" title="Eliminar"><i class="fa fa-remove"></i></a>#}
                                        </td>
                                    </tr>
                                    {% empty %}
                                    <tr>
                                        <td colspan="3">SIN REGISTROS</td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            {#            =====================================================================RESUMEN#}
            <div class="tab-pane {% if panel == '4' %}active{% endif %}" id="4">
                <div >
                    <div class='row'>
                        <div class='col-lg-12'>
                            <div class="headtitle">
                                <h4>RESUMEN</h4>
                            </div>
                        </div>
                    </div>

                    {% if panel == '4' %}
                        <div class='span12'>
                            <span class="label label-info" ><i class="fa fa-info-circle"></i> {{ totalMatricula }} Registros</span>
                            <span class="label label-info" ><i class="fa fa-info-circle"></i> {{ periodo.nombre }} Registros</span>
                            <table class='table table-bordered' cellpadding="0" cellspacing="0">
                                <thead class="thead-dark">
                                <tr>
                                    <th style="text-align: center" colspan="4"><i class="fa fa-chalkboard-teacher"></i> Datos Carrera</th>
                                    <th style="text-align: center" colspan="1"><i class="fa fa-clock"></i> Inscr.Proyectos</th>
                                    <th style="text-align: center" colspan="2"><i class="fa fa-user"></i> Inscr. Act. Extr.</th>
                                </tr>
                                <tr>
                                    <th class="column-title" style="text-align: center; width: 20%">Carrera</th>
                                    <th class="column-title" style="text-align: center; width: 10%">Matriculados</th>
                                    <th class="column-title" style="text-align: center; width: 10%">H. Vinculación</th>
                                    <th class="column-title" style="text-align: center; width: 10%">Pendientes</th>
                                    <th class="column-title" style="text-align: center; width: 10%">Cantidad</th>
                                    <th class="column-title" style="text-align: center; width: 10%">Cantidad</th>
                                    <th class="column-title" style="text-align: center"><i class="fa fa-cog"></i></th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for carrera in carreras %}
                                    <tr>
                                        <td>{{ carrera.nombre }}</td>
                                        <td>
                                            {% with cant=carrera|args:periodo|call:'matriculados' %}
                                                {{ cant }}
                                            {% endwith %}
                                        </td>
                                        <td>{{ carrera.malla.horas_vinculacion }}</td>
                                        <td>
                                            {% with cant=carrera|args:periodo|call:'cantpendientesvinculacion' %}
                                                {{ cant }}
                                            {% endwith %}
                                        </td>
                                        <td>{{ carrera.inscritosProyectos }}</td>
                                        <td>{{ carrera.inscritosActividadExtracurricular }}</td>
                                    </tr>
                                    {% empty %}
                                    <tr>
                                        <td colspan="15">
                                            NO EXISTEN REGISTROS
                                        </td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% endif %}

                </div>
            </div>
        </div>
    </div>
    {#    <div class='row-fluid'>#}
    {#        <div class='span12'>#}
    {#            <h4>{{ title }}</h4>#}
    {#        </div>#}
    {#    </div>#}
    {#    <div class='row-fluid'>#}
    {#        <div class="span6">#}
    {#            <div class="btn-group ">#}
    {#                <a class="btn dropdown-toggle btn-success" data-toggle="dropdown" href="#"> Programas <span class="caret"></span></a>#}
    {#                <ul class="dropdown-menu">#}
    {#                    <li><a href="/programasvinculacion?action=add"><span class="fa fa-plus "></span> Adicionar</a></li>#}
    {#                    <li><a href="/programasvinculacion?action=excelprograma"><i class="fa fa-list "></i> Descargar Excel</a></li>#}
    {#                </ul>#}
    {#            </div>#}
    {#    =================       EVIDENCIAS        ===========================================================================================================================#}
    {#            <div class="btn-group ">#}
    {#                <a class="btn dropdown-toggle" data-toggle="dropdown" href="#"> Proyectos <span class="caret"></span></a>#}
    {#                <ul class="dropdown-menu">#}
    {#                                        <li><a href="/programasinvestigacion?action=add"><span class="fa fa-plus "></span> Adicionar</a></li>#}
    {#                    <li><a href="/programasvinculacion?action=listadoproyectos"><i class="fa fa-list "></i> Listado</a></li>#}
    {#                    <li><a href="/programasvinculacion?action=evidencias"><i class="fa fa-clone "></i> Formato Evidencia</a></li>#}
    {#                </ul>#}
    {#            </div>#}
    {#        </div>#}
    {#    ============================================================================================================================================#}
    {#        <div class="span6">#}
    {#            <form class="form-search">#}
    {#                <input class='searchinput' type='text' id='searchinput' value='{{ search }}' autocomplete="off"/>#}
    {#                <a href="javascript:;" id='search' class='btn btn-info'><span class="fa fa-search " ></span> Buscar</a>#}
    {#                {% if search or ids %}#}
    {#                    <a href="/programasvinculacion" id='allresults' class='btn btn-info'><span class="fa fa-refresh " ></span> Todos</a>#}
    {#                {% endif %}#}
    {#            </form>#}
    {#        </div>#}
    {#    </div>#}
    {#    <div class='row-fluid'>#}
    {#        <div class='span12'>#}
    {#            <table class='table table-striped table-bordered' >#}
    {#                <thead>#}
    {#                <tr>#}
    {#                    <th style="width: 50px;"><span><i class="fa fa-key"></i> Código</span></th>#}
    {#                    <th style="width: 300px;text-align: center;"><span><i class="fa fa-american-sign-language-interpreting"></i> Programa</span></th>#}
    {#                    <th style="width: 300px;text-align: center;"><span><i class="fa fa-tags"></i> Línea</span></th>#}
    {#                    <th style="width: 50px;text-align: center;"><span><i class="fa fa-calendar-o"></i> Año</span></th>#}
    {#                    <th style="width: 50px;text-align: center;"><span><i class="fa fa-calendar"></i> F.Inicio</span></th>#}
    {#                    <th style="width: 50px;text-align: center;"><span> <i class="fa fa-calendar"></i> F.Fin</span></th>#}
    {#                    <th style="width: 50px;text-align: center;"><span><i class="fa fa-calendar"></i> F.Fin Real</span></th>#}
    {#                    <th style="width: 50px;text-align: center;"><span><i class="fa fa-tag"></i> Estado</span></th>#}
    {#                    <th style="width: 70px;text-align: center;">Acción</th>#}
    {#                </tr>#}
    {#                </thead>#}
    {#                <tbody>#}
    {#                {% for programa in programas %}#}
    {#                    <tr>#}
    {#                        <td>{{ programa.id }}-PROG</td>#}
    {#                        <td style="text-align: justify;">{{ programa.nombre|upper }}</td>#}
    {#                        <td style="text-align: justify;">{{ programa.lineainvestigacion|upper }}</td>#}
    {#                        <td style="text-align: justify;">#}
    {#                            {% for pro in programa.sublineas %}#}
    {#                                <strong>{{ forloop.counter }})</strong>{{ pro.lineainvestigacion.nombre }} - {{ pro.sublineainvestigacion.nombre }}<br>#}
    {#                            {% endfor %}#}
    {#                        </td>#}
    {#                        <td style="text-align: center;">{{ programa.fechainicio|date:"Y" }}</td>#}
    {#                        <td style="text-align: center;">{{ programa.fechainicio|date:"Y-m-d" }}</td>#}
    {#                        <td style="text-align: center;">{{ programa.fechaplaneado|date:"Y-m-d" }}</td>#}
    {#                        <td style="text-align: center;">{{ programa.fechareal|date:"Y-m-d" }}</td>#}
    {#                        <td style="text-align: center;">#}
    {#                            {% if programa.estado %}#}
    {#                                <label class="badge badge-success">ACTIVO</label>#}
    {#                            {% else %}#}
    {#                                <label class="badge badge-light">INACTIVO</label>#}
    {#                            {% endif %}#}
    {#                        </td>#}
    {#                        <td style="text-align: center;">#}
    {#                            <div class="btn-group">#}
    {#                                <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown" href="javascript:;">Acciones<span class="caret"></span>#}
    {#                                </a>#}
    {#                                <ul class="dropdown-menu pull-right" style="text-align: left">#}
    {#                                    <li><a href='/programasvinculacion?action=editprograma&id={{ programa.id }}'><span class="fa fa-edit "></span> Editar</a></li>#}
    {#                                    <li><a href='/programasvinculacion?action=evidenciasprogramas&id={{ programa.id }}'><span class="fa fa-table "></span> Evidencias <label class="label tu">{{ programa.detalleevidencias_set.count }}</label></a></li>#}
    {#                                    <li><a href="/programasvinculacion?action=addlinea&id={{ programa.id }}"><span class="fa fa-tag" ></span> Linea Investigación/Area Conocimiento</a></li>#}
    {#                                    <li><a href="/programasvinculacion?action=addarea&id={{ programa.id }}"><span class="fa fa-clock-o" ></span> </a></li>#}
    {#                                    {% if not programa.usoprograma %}#}
    {#                                        <li><a class="eliminacionmodal" href="javascript:;" nhref='/programasvinculacion?action=deleteprograma&id={{ programa.id }}'><span class="fa fa-minus"></span> Eliminar</a></li>#}
    {#                                    {% endif %}#}
    {#                                    <li><a onclick="vistapreviaguipractica_ind('{{ programa.id }}')"><span class="fa fa-file-pdf-o"></span> Imprimir</a></li>#}
    {#                                    <li>#}
    {#                                        {% if programa.estado %}#}
    {#                                            <a href="/programasvinculacion?action=cambiarEstado&id={{ programa.id }}"><span class="fa fa-close" ></span> Desactivar</a>#}
    {#                                        {% else %}#}
    {#                                            <a href="/programasvinculacion?action=cambiarEstado&id={{ programa.id }}"><span class="fa fa-check-square-o" ></span> Activar</a>#}
    {#                                        {% endif %}#}
    {#                                    </li>#}
    {#                                </ul>#}
    {#                            </div>#}
    {#                        </td>#}
    {#                    </tr>#}
    {#                {% endfor %}#}
    {#                {% if not programas %}#}
    {#                    <tr>#}
    {#                        <td colspan="11">#}
    {#                            NO HAY PROGRAMAS#}
    {#                        </td>#}
    {#                    </tr>#}
    {#                {% endif %}#}
    {#                </tbody>#}
    {#            </table>#}
    {#        </div>#}
    {#    </div>#}
    {#    <div class='row-fluid'>#}
    {#        <div class="span12">#}
    {#            {% if paging.num_pages > 20 %}#}
    {#                <div class='pagination'>#}
    {#                    <ul>#}
    {#                        {% if paging.primera_pagina %}#}
    {#                            <li><a href="/programasvinculacion?{% if search %}s={{ search }}&{% endif %}page=1">1</a></li>#}
    {#                            <li><a href="/programasvinculacion?{% if search %}s={{ search }}&{% endif %}page={{ paging.ellipsis_izquierda }}" class="active">...</a></li>#}
    {#                        {% endif %}#}
    {#                        {% for pagenumber in paging.paginas %}#}
    {#                            <li {%  if pagenumber == page.number %}class='active'{% endif %}><a href="/programasvinculacion?{% if search %}s={{ search }}&{% endif %}page={{ pagenumber }}">{{ pagenumber }}</a></li>#}
    {#                        {% endfor %}#}
    {#                        {% if paging.ultima_pagina %}#}
    {#                            <li><a href="/programasvinculacion?{% if search %}s={{ search }}&{% endif %}page={{ paging.ellipsis_derecha }}" class="active">...</a></li>#}
    {#                            <li><a href="/programasvinculacion?{% if search %}s={{ search }}&{% endif %}page={{ paging.num_pages }}">{{ paging.num_pages }}</a></li>#}
    {#                        {% endif %}#}
    {#                    </ul>#}
    {#                </div>#}
    {#            {% else %}#}
    {#                <div class='pagination'>#}
    {#                    <ul>#}
    {#                        {% for pagenumber in paging.page_range %}#}
    {#                            <li {%  if pagenumber == page.number %}class='active'{% endif %}><a href="/programasvinculacion?{% if search %}s={{ search }}&{% endif %}page={{ pagenumber }}">{{ pagenumber }}</a></li>#}
    {#                        {% endfor %}#}
    {#                    </ul>#}
    {#                </div>#}
    {#            {% endif %}#}
    {#        </div>#}
    {#    </div>#}
{% endblock %}
