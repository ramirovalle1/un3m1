{% extends "base.html" %}
{% load sga_extras %}
{% block heading %}
    <style>
        #app {padding-left: 1.5rem !important;padding-right: 1.5rem !important}
        .table_striped thead th:nth-child(2), .table_striped thead td:nth-child(2) {text-align: left !important;padding-left: 15px}
        .table_primary thead th:first-child, .table_primary thead td:first-child {width: 20px;background-color: #1c3247}
        .table_success thead th:first-child, .table_primary thead td:first-child {width: 20px;background-color: #468847}
        .table_warning thead th:first-child, .table_warning thead td:first-child {width: 20px;background-color: #fe9900}
        html {
            scroll-behavior: smooth;
        }

        .btn-success {background-color: #15ca9a !important}
    </style>
    <script type="text/javascript" src='/static/js/select2.js?v=1.0.0'></script>
    <link type='text/css' rel='stylesheet' href="/static/css/select2.css?v=1.0.0"/>
    <script type="text/javascript" src="/static/js/jquery.fancybox.pack.js?v=1.0.0"></script>
    <link rel="stylesheet" href="/static/css/jquery.fancybox.css?v=1.0.0" type="text/css" media="screen"/>
    <script type="text/javascript" >
        $(function() {
            $(".imprimir").click(function() {
                var href = $(this).attr('nhref');
                var tipos = $(this).attr('tipos');
                abrir_reporte2(href,tipos);

            });
            abrir_reporte2 = function(href,tipos){
                if (!tipos){
                    tipos = "xls";
                }
                if(tipos.contains("xls")){
                    $("#formatoxls").removeAttr("hidden");
                }else{
                    $("#formatoxls").attr({"hidden":"hidden"});
                }
                $("#formatoreporte_formato").val(2);
                ejecutar_reporte_directo(href);
            };

            {#$("#id_fini, #id_ffin, #id_fini_seguimiento_general, #id_ffin_seguimiento_general").datepicker({format:"dd-mm-yyyy"}).on('changeDate', function(ev){ $(this).datepicker('hide'); }).addClass("validate[required]");#}

            $(".imprimirinforme").click(function () {
                $(".generarinforme").attr('idd',$(this).attr('idd'));
                $(".incompletoaddpreguntas").hide();
                $("#itemspanel").modal({backdrop: 'static', width: '300px'}).modal('show');
            });

            $("#add_cancel").click(function(){
                $('#itemspanel').modal('hide');
                $(".incompletoaddpreguntas").hide();
            });

            $(".generarinforme").click(function () {
                var fini = $("#id_fini").val();
                var ffin = $("#id_ffin").val();
                var idd = $(this).attr('idd');
                $(".incompletoaddpreguntas").hide();
                if( fini.length!=0 && ffin.length!=0 ){
                    openwindow('POST' ,'/pro_personaevaluacion', {'action': 'informedocente', 'fini': fini, 'ffin': ffin, 'idd':idd },'_blank');
                }else{
                    $(".incompletoaddpreguntas").show();
                    return false;
                }
            });

            $(".generar_seguimiento").click(function () {
                var idp = $(this).attr('idp');
                var idreport = $(this).attr('idreport');
                $(".incompletoseguimiento_general").hide();
                $("#idreporte").val(idreport);
                $("#idprofesor").val("");
                $("#idprofesor").val(idp);
                $("#itemspanel_generar_seguimiento").modal({backdrop: 'static', width: '300px'}).modal('show');
            });


            $("#cancel_seguimiento_general").click(function(){
                $('#itemspanel_generar_seguimiento').modal('hide');
                $(".incompletoseguimiento_general").hide();
            });
            $(".generar_seguimiento_general").click(function () {
                $(".incompletoseguimiento_general").hide();
                var idreporte = $("#idreporte").val();
                var fini = $("#id_fini_seguimiento_general").val();
                var ffin = $("#id_ffin_seguimiento_general").val();
                var idprof = $("#idprofesor").val();
                if( fini.length!=0 && ffin.length!=0 ){
                    openwindow('POST' ,'/pro_personaevaluacion', {'action': 'informe_seguimiento_general', 'fini': fini, 'ffin': ffin,'idprof':idprof,'opcionreport':idreporte },'_blank');
                }else{
                    $(".incompletoseguimiento_general").show();
                    return false;
                }
            });
        });
        $(document).ready(function () {
            $(".fancybox").fancybox();
        });
    </script>
{% endblock %}
{% block atras %}/{% endblock %}
{% block canvas %}
    <div class='row'>
        <div class='col-lg-12'>
            <div class="headtitle ps-0">
                <h3 class="py-1">{{ title }}</h3>
            </div>
        </div>
    </div>
    <div class="container-fluid">
        {% if profesores_pares %}
            <h3 class="fw-bolder">Evaluaci&oacute;n de Pares</h3>
            <table class="table table_primary  table-striped">
                <thead class="table-light">
                <tr>
                    <th style="border:0!important;"></th>
                    <th style="text-align: center">#</th>
                    <th>Profesor</th>
                    <th style="width:400px;">Fecha par evaluador</th>
                    <th style="width:100px; text-align: center">Fecha</th>
                    <th style="width:100px; text-align: center">Hora</th>
                    <th style="width:100px;"></th>
                    <th style="width:50px;"></th>
                </tr>
                </thead>
                <tbody>
                {% for detalle in profesores_pares %}
                    {% with tienerubricas=detalle.evaluado|args:periodo|args:persona|call:"mis_rubricas_par" evaluacion=detalle.evaluado|args:periodo|args:persona|call:"dato_evaluado_par_periodo" tienetabla=detalle.evaluado|args:periodo|call:"tabla_ponderacion" tienefechaspares=detalle.evaluado|args:periodo|args:detalle.coordinacion|args:detalle.tipodirector|call:"profesorfechapares" distributivohora=detalle.evaluado|args:periodo|call:"distributivohoraseval" tienetitulacion=periodo|args:detalle.evaluado|call:"tienetutoriastitulacion" %}
                        <tr>
                            <td></td>
                            <td style="text-align: center">
                                {% if numeropagina == 1 %}
                                    {{ forloop.counter }}
                                {% else %}
                                    {% with contador=numerofilasguiente|sumar_pagineo:forloop.counter %}
                                        {{ contador }}
                                    {% endwith %}
                                {% endif %}
                            </td>
                            <td>
                                <div class="d-flex align-items-center">
                                    <div class='d-flex bd-highlight mb-0'>
                                    <span class="avatar avatar-lg">
                                        {% if detalle.evaluado.persona.foto.foto %}
                                            <a href="https://sga.unemi.edu.ec{{ detalle.evaluado.persona.foto.foto.url }}" class="fancybox">
                                            <img src="https://sga.unemi.edu.ec{{ detalle.evaluado.persona.foto.foto.url }}" class="rounded-circle"></a>
                                        {% else %}
                                            {% if detalle.evaluado.persona.sexo_id == 1 %}
                                                <img src="/static/images/iconos/mujer.png" class="rounded-circle">
                                            {% else %}
                                                <img src="/static/images/iconos/hombre.png" class="rounded-circle">
                                            {% endif %}
                                        {% endif %}
                                    </span>
                                    </div>
                                    <div class="ms-0">
                                        <h6 class="mb-0">
                                            <span class="fa fa-user" aria-hidden="true"></span> {{ detalle.evaluado }}
                                        </h6>
                                        <p class="mb-0 text-muted">
                                            <span class="fa fa-envelope"></span> <a
                                                href="mailto:{{ detalle.evaluado.persona.emailinst }}">{{ detalle.evaluado.persona.emailinst }}</a>
                                        </p>
                                        <h6 class="mb-0 text-muted">
                                            <strong>
                                                {% if distributivohora %}{{ distributivohora.coordinacion.alias }}{% endif %} |
                                                {% if distributivohora %}{{ distributivohora.carrera.alias}} {% endif %}
                                            </strong>
                                        </h6>
                                    </div>
                                </div>

                            </td>
                            <td>
                                {% if tienefechaspares %}
                                    {% if tienefechaspares %}
                                        <i class="fa fa-calendar" aria-hidden="true"></i>
                                        {{ tienefechaspares.fecha|date:"d-m-Y" }}<br>
                                        <i class="fa fa-clock-o" aria-hidden="true"></i>
                                        {{ tienefechaspares.horainicio|time:"h:i:a"  }}
                                        <i class="fa fa-clock" aria-hidden="true"></i>
                                        {{ tienefechaspares.horafin|time:"h:i:a"  }}
                                    {% endif %}
                                    {% if tienefechaspares.lugar %}
                                        <br><i class="fa fa-location-arrow" aria-hidden="true"></i>
                                        {{ tienefechaspares.lugar|upper }}
                                    {% endif %}
                                {% endif %}
                                {% for fechaprofe in distributivohora.fecha_evaluacion_directivos %}
                                    <br><span class="label label-info">Direc: </span>
                                    <b>Lugar:</b> {{ fechaprofe.lugar|upper }}
                                    <b>Fecha:</b> {{ fechaprofe.fecha|date:"d-m-Y" }} <b>Hora:</b> {{ fechaprofe.horainicio|time:"h:i:a" }} - {{ fechaprofe.horafin|time:"h:i:a" }}
                                {% endfor %}
                                {% if tienetitulacion %}
                                    <br><label class="label label-info">Tiene rúbricas de titulación, favor revisar "Evidencias de Titulación".</label>
                                {% endif %}
                            </td>
                            <td style="text-align: center;">{% if evaluacion %}{{ evaluacion.fecha|date:"d-m-Y" }} {% endif %}</td>
                            <td style="text-align: center;">{% if evaluacion %}{{ evaluacion.fecha|time:"h:i a" }}{% endif %}</td>
                            <td style="text-align: center;">
                                {%  if evaluacion %}
                                    <a class="btn btn-info btn-mini" href="/pro_personaevaluacion?action=consultar&id={{ detalle.evaluado.id }}&t=3"><i class="fa fa-eye"></i> Consultar</a>
                                {% else %}
                                    {% if proceso.activo_pares %}
                                        {% if tienerubricas %}
                                            <a class="btn btn-warning btn-mini" href="/pro_personaevaluacion?action=evaluar&id={{ detalle.evaluado.id }}&t=3"><i class="fa fa-plus"></i> Evaluar</a>
                                        {% else %}
                                            <b class="text-danger"> NO TIENE RUBRICAS</b><br>
                                            {% if not distributivohora %}
                                                    <a class="btn btn-mini btn-default tu" style="border-radius:10px;" title="" data-bs-original-title="Este docente no se encuentra en el distributivo,comunicarse con soporte." aria-label="Este docente  no se encuentra en el distributivo,comunicarse con soporte."><i class="fa fa-exclamation-triangle  blinkimg" aria-hidden="true"></i></a>
                                            {% endif %}
                                        {% endif %}
                                    {% endif %}
                                {% endif %}
                            </td>
                            <td>
                                <div class="dropdown sik-dropdown">
                                    <button class="btn-icon btn btn-ghost btn-sm rounded-circle dropdown-toggle"
                                            type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                        <i class="fa fa-ellipsis-v" aria-hidden="true"></i>
                                    </button>
                                    <ul class="dropdown-menu">
{#                                        {% if detalle.evaluado.profesorarticulos %}#}
{#                                            <li class="dropdown-item"><a href="/pro_personaevaluacion?action=verpublicaciones&id={{ detalle.evaluado.id|encrypt }}" ><i class="fa fa-tags"></i> Publicaciones</a></li>#}
{#                                        {% endif %}#}
                                        {% if periodo.versionevaluacionpardir == 1 %}
                                            <li class="dropdown-item"><a href="/pro_personaevaluacion?action=veratividadesdirectivos&id={{ detalle.evaluado.id|encrypt }}" ><i class="fa fa-cog"></i> Evidencias</a></li>
                                        {% endif %}
                                        {% if periodo.versionevaluacionpardir == 2 %}
                                            <li class="dropdown-item"><a class="bloqueo_pantalla" href="/pro_personaevaluacion?action=veratividadesdirectivosnew&id={{ detalle.evaluado.id|encrypt }}&tipoevi={{ 1|encrypt }}" ><i class="fa fa-cog"></i> Evidencias</a></li>
                                        {% endif %}
{#                                        {% if periodo.versionevaluacionpardir == 1 %}#}
{#                                            <li class="dropdown-item"><a class="bloqueo_pantalla" href="/pro_personaevaluacion?action=verasistencias_link&profesorid={{ detalle.evaluado.id|encrypt }}" ><i class="fa fa-check"></i> Asistencia a clases</a></li>#}
{#                                            <li class="dropdown-item"><a href="/pro_personaevaluacion?action=docgeneral&profesorid={{ detalle.evaluado.id|encrypt }}" ><i class="fa fa-file-text-o"></i> Sílabo y Recursos</a></li>#}
{#                                            <li class="dropdown-item"><a href="/pro_personaevaluacion?action=tutoriasexamencomplexivo&id={{ detalle.evaluado.id|encrypt }}" ><i class="fa fa-list"></i> Examen complexivo</a></li>#}
{#                                            <li class="dropdown-item">#}
{#                                                <a href="/pro_personaevaluacion?action=listacomplementarias&profesorid={{ detalle.evaluado.id|encrypt }}" >#}
{#                                                    <i class="fa fa-list"></i> Actividades Complementarias#}
{#                                                    {% with tieneactividades=detalle.evaluado|args:periodo|call:"totalcomplementarias" %}#}
{#                                                        <label class="label tu">{{ tieneactividades }}</label>#}
{#                                                    {% endwith %}#}
{#                                                </a>#}
{#                                            </li>#}
{#                                        {% endif %}#}
{#                                        <li class="dropdown-item"><a href="/pro_personaevaluacion?action=permisoinstitucional&profesorid={{ detalle.evaluado.id|encrypt }}"> <span class='fa fa-user'></span> Permisos institucionales</a></li>#}
{#                                        {% if reporte_1 %}#}
{#                                            <li class="dropdown-item"> <a href="javascript:;" tipos="{{ reporte_1.tiporeporte }}" nhref="/reportes?action=run&n={{ reporte_1.nombre }}&persona={{ detalle.evaluado.persona.id }}" title="Imprimir hoja de vida"  class="reportedirecto"><i class="fa fa-print"></i> Hoja de vida</a></li>#}
{#                                        {% endif %}#}
{#                                        {% if distributivohora %}#}
{#                                            <li class="dropdown-item dropdown-submenu pull-left"><a href="javascript:;"><i class="fa fa-list"></i> Informes</a>#}
{#                                                <ul class="dropdown-menu">#}
{#                                                    {%  if distributivohora.verificar_coordinaciones.0 %}#}
{#                                                        <li class="dropdown-item"><a class="tu generar_seguimiento" idreport="1" href="javascript:;" idp="{{ distributivohora.profesor.id|encrypt }}"><span class="fa fa-print"></span> {{ distributivohora.profesor.id }} Informe mensual de cumplimiento de actividades (pregrado en línea)</a></li>#}
{#                                                    {% endif %}#}
{#                                                    {% if  distributivohora.verificar_coordinaciones.1 %}#}
{#                                                        <li class="dropdown-item"><a class="tu imprimirinforme" idd="{{ distributivohora.id|encrypt }}" href="javascript:;"><span class="fa fa-print"></span> Imprimir informe mensual de actividades del docente</a></li>#}
{#                                                    {% endif %}#}
{#                                                    {%  if distributivohora.verificar_coordinaciones.2 %}#}
{#                                                        <li class="dropdown-item"><a class="tu generar_seguimiento" idreport="3" href="javascript:;" idp="{{ distributivohora.profesor.id|encrypt }}"><span class="fa fa-print"></span> Informe mensual de cumplimiento de actividades (admisión presencial)</a></li>#}
{#                                                    {% endif %}#}
{#                                                    {%  if distributivohora.verificar_coordinaciones.3 %}#}
{#                                                        <li class="dropdown-item"><a class="tu generar_seguimiento" idreport="2" href="javascript:;" idp="{{ distributivohora.profesor.id|encrypt }}"><span class="fa fa-print"></span> Informe mensual de cumplimiento de actividades (admisión en línea)</a></li>#}
{#                                                    {% endif %}#}
{#                                                </ul>#}
{#                                            </li>#}
{#                                        {% endif %}#}
                                    </ul>
                                </div>
                            </td>
                        </tr>
                    {% endwith %}
                {% endfor %}
                </tbody>
            </table>

            <div class="row my-3 px-3">
                <div class="col-lg-12">
                    <nav>
                        {% if paging.num_pages > 5 %}
                            <ul class="pagination justify-content-center m-0">
                                {% if paging.primera_pagina %}
                                    <li class="page-item">
                                        <a class="page-link bloqueo_pantalla" href="?page=1{{ url_vars }}">1</a>
                                    </li>
                                    <li class="page-item">
                                        <a href="?page={{ paging.ellipsis_izquierda }}{{ url_vars }}"
                                           class="active page-link bloqueo_pantalla">...</a></li>
                                {% endif %}
                                {% for pagenumber in paging.paginas %}
                                    <li {% if pagenumber == page.number %}class='active page-item '
                                        {% else %}class='page-item'{% endif %}>
                                        <a href="?page={{ pagenumber }}{{ url_vars }}"
                                           class="page-link bloqueo_pantalla">{{ pagenumber }}</a>
                                    </li>
                                {% endfor %}
                                {% if paging.ultima_pagina %}
                                    <li class="page-item">
                                        <a href="?page={{ paging.ellipsis_derecha }}{{ url_vars }}"
                                           class="active page-link bloqueo_pantalla">...</a></li>
                                    <li class="page-item">
                                        <a href="?page={{ paging.num_pages }}{{ url_vars }}"
                                           class="page-link bloqueo_pantalla">{{ paging.num_pages }}</a>
                                    </li>
                                {% endif %}
                            </ul>
                        {% else %}
                            <ul class="pagination justify-content-center m-0">
                                {% for pagenumber in paging.page_range %}
                                    <li {% if pagenumber == page.number %}class='active page-item'
                                        {% else %}class="page-item"{% endif %}>
                                        <a class="page-link bloqueo_pantalla"
                                           href="?page={{ pagenumber }}{{ url_vars }}">{{ pagenumber }}</a>
                                    </li>
                                {% endfor %}
                            </ul>
                        {% endif %}
                    </nav>
                </div>
            </div>
        {% endif %}
        {% if profesores_directivos %}
            <h3 class="fw-bolder">Evaluaci&oacute;n de Directivos</h3>
            <table class="table table_success table-striped">
                <thead class="table-light">
                <tr>
                    <th style="border:0!important;"></th>
                    <th style="text-align: center">#</th>
                    <th>Profesor</th>
                    <th style="width:400px;">Fecha par evaluador</th>
                    {#                    <th style="width:100px; text-align: center">Fecha</th>#}
                    {#                    <th style="width:100px; text-align: center">Hora</th>#}
                    {#                    <th style="width:100px; text-align: center">Codigo</th>#}
                    <th style="width:100px;"></th>
                    <th style="width:50px;"></th>
                </tr>
                </thead>
                <tbody>
                {% for detalledir in profesores_directivos %}
                    {#                    {% with evaluacion=detalledir.evaluado|args:periodo|args:persona|call:"dato_evaluado_directivo_periodo" distributivohora=detalledir.evaluado|args:periodo|call:"distributivohoraseval" %}#}
                    {% with distributivohora=detalledir.evaluado|args:periodo|call:"distributivohoraseval" %}
                        <tr>
                            <td></td>
                            <td style="text-align: center">
                                {% if numeropaginadir == 1 %}
                                    {{ forloop.counter }}
                                {% else %}
                                    {% with contador=numerofilasguientedir|sumar_pagineo:forloop.counter %}
                                        {{ contador }}
                                    {% endwith %}
                                {% endif %}
                            </td>
                            <td>
                                <div class="d-flex align-items-center">
                                    <div class='d-flex bd-highlight mb-0'>
                                    <span class="avatar avatar-lg">
                                        {% if detalledir.evaluado.persona.foto.foto %}
                                            <a href="https://sga.unemi.edu.ec{{ detalledir.evaluado.persona.foto.foto.url }}" class="fancybox">
                                            <img src="https://sga.unemi.edu.ec{{ detalledir.evaluado.persona.foto.foto.url }}" class="rounded-circle">
                                            </a>
                                        {% else %}
                                            {% if detalledir.evaluado.persona.sexo_id == 1 %}
                                                <img src="/static/images/iconos/mujer.png" class="rounded-circle">
                                            {% else %}
                                                <img src="/static/images/iconos/hombre.png" class="rounded-circle">
                                            {% endif %}
                                        {% endif %}
                                    </span>
                                    </div>
                                    <div class="ms-0">
                                        <h6 class="mb-0">
                                            <span class="fa fa-user" aria-hidden="true"></span> {{ detalledir.evaluado.persona }}
                                        </h6>
                                        <p class="mb-0 text-muted">
                                            <span class="fa fa-envelope"></span> <a
                                                href="mailto:{{ detalledir.evaluado.persona.emailinst }}">{{ detalledir.evaluado.persona.emailinst }}</a>
                                        </p>
                                        <h6 class="mb-0 text-muted">
                                            <strong>
                                                {% if periodo.tipo.id == 3 %}
                                                    POSGRADO
                                                {% else %}
                                                    {% if distributivohora %}{{ distributivohora.coordinacion.alias }} {% endif %} |
                                                    {% if distributivohora %}{{ distributivohora.carrera.alias }} {% endif %}
                                                {% endif %}
                                            </strong>
                                        </h6>
                                        {% if periodo.tipo.id == 3 and detalledir.materia %}
                                            <p class="h6"
                                               style="color: #7C7C7C;margin-bottom:0rem">{{ detalledir.materia.asignaturamalla.malla.carrera|default_if_none:"Sin carrera asignada" }}<br>
                                                <b>MÓDULO: </b>{{ detalledir.materia.asignaturamalla.asignatura.nombre }}<br>
                                                <b>PARALELO: </b>{{ detalledir.materia.paralelo }}<br>
                                                <b>INICIO: </b>{{ detalledir.materia.inicio|date:"d-m-Y" }} |
                                                <b>FIN: </b>{{ detalledir.materia.fin|date:"d-m-Y" }}<br>
                                                <b>ESTADO: </b>{% if detalledir.materia.cerrado %}<span class="badge badge-important">CERRADO</span>{% else %}<span class="badge badge-success">ABIERTA</span>{% endif %}
                                            </p>
                                        {% endif %}
                                    </div>
                                </div>
                            </td>
                            <td>
                                {% with tienefechaspares=detalledir.evaluado|args:periodo|args:detalledir.coordinacion|args:detalledir.tipodirector|call:"profesorfechapares" %}
                                    {% if tienefechaspares %}
                                        {% if tienefechaspares %}
                                            <i class="fa fa-calendar" aria-hidden="true"></i>
                                            {{ tienefechaspares.fecha|date:"d-m-Y" }} |
                                            <i class="fa fa-clock-o" aria-hidden="true"></i>
                                            {{ tienefechaspares.horainicio|time:"h:i:a"  }}
                                            <i class="fa fa-clock" aria-hidden="true"></i>
                                            {{ tienefechaspares.horafin|time:"h:i:a"  }}
                                        {% endif %}
                                        {% if tienefechaspares.lugar %}
                                            <br><i class="fa fa-location-arrow" aria-hidden="true"></i> {{ tienefechaspares.lugar|upper }}
                                        {% endif %}
                                    {% endif %}
                                {% endwith %}
                                {% for fechaprofe in distributivohora.fecha_evaluacion_directivos %}
                                    <br><span class="label label-info">Direc: </span>
                                    <b>Lugar:</b> {{ fechaprofe.lugar|upper }}
                                    <b>Fecha:</b> {{ fechaprofe.fecha|date:"d-m-Y" }} <b>Hora:</b> {{ fechaprofe.horainicio|time:"h:i:a" }} - {{ fechaprofe.horafin|time:"h:i:a" }}
                                {% endfor %}
                            </td>
                            {#                            <td style="text-align: center;">#}
                            {#                                {% if evaluacion %}#}
                            {#                                    {{ evaluacion.fecha|date:"d-m-Y" }}#}
                            {#                                {% endif %}#}
                            {#                            </td>#}
                            {#                            <td style="text-align: center;">#}
                            {#                                {% if evaluacion %}{{ evaluacion.fecha|time:"h:i a" }}{% endif %}#}
                            {#                            </td>#}
                            {#                            <td style="text-align: center;">#}
                            {#                                {% if evaluacion %}{{ evaluacion.id }}{% endif %}#}
                            {#                            </td>#}
                            <td style="text-align: center;">
                                {% if periodo.tipo.id == 3 %}
                                    {% if detalledir.materia.id in codigosevaluacion or detalledir.materia.id in codigosevaluacionnew %}
                                        <a class="btn btn-mini btn-info bloqueo_pantalla"
                                           href="/pro_personaevaluacion?action=consultar&id={{ detalledir.evaluado.id }}&t=4&idm={{ detalledir.materia.id }}"><i
                                                class="fa fa-eye"></i> Consultar P.</a>
                                    {% else %}
                                        {% fecha_dir_posgrado detalledir.materia as puedeevaluarposgrado %}
                                        {% if puedeevaluarposgrado %}
                                            <a class="btn btn-mini btn-warning bloqueo_pantalla"
                                               href="/pro_personaevaluacion?action=evaluar&id={{ detalledir.evaluado.id }}&t=4&idm={{ detalledir.materia.id }}"><i
                                                    class="fa fa-plus"></i> Evaluar P.</a>
                                        {% endif %}
                                    {% endif %}
                                {% else %}
                                    {% if detalledir.evaluado.id in codigosevaluacion %}
                                        <a class="btn btn-mini btn-info bloqueo_pantalla"
                                           href="/pro_personaevaluacion?action=consultar&id={{ detalledir.evaluado.id }}&t=4"><i
                                                class="fa fa-eye"></i> Consultar</a>
                                    {% else %}
                                        {% if proceso.activo_directivos %}
                                            <a class="btn btn-mini btn-warning bloqueo_pantalla"
                                               href="/pro_personaevaluacion?action=evaluar&id={{ detalledir.evaluado.id }}&t=4"><i
                                                    class="fa fa-plus"></i> Evaluar</a>
                                        {% endif %}
                                    {% endif %}
                                {% endif %}
                            </td>
                            <td>
                                <div class="dropdown sik-dropdown">
                                    <button class="btn-icon btn btn-ghost btn-sm rounded-circle dropdown-toggle"
                                            type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                        <i class="fa fa-ellipsis-v" aria-hidden="true"></i>
                                    </button>
                                    <ul class="dropdown-menu">
                                        {% if periodo.tipo.id == 3 %}
{#                                            <li class="dropdown-item"><a class="bloqueo_pantalla"#}
{#                                                                         href="/pro_personaevaluacion?action=veratividadesdirectivos_posgrado&id={{ detalledir.evaluado.id|encrypt }}&tipoevi={{ 2|encrypt }}&idm={{ detalledir.materia.id|encrypt }}"><i#}
{#                                                    class="fa fa-cog"></i> Evidencias</a></li>#}
                                            {% if periodo.versionevaluacionpardir == 1 %}
                                                <li class="dropdown-item"><a class="bloqueo_pantalla" href="/pro_personaevaluacion?action=verasistencias_link&profesorid={{ detalledir.evaluado.id|encrypt }}" ><i class="fa fa-check"></i> Asistencia a clases</a></li>
                                            {% endif %}
                                            {% if reporte_1 %}
                                                <li class="dropdown-item">  <a href="javascript:;" tipos="{{ reporte_1.tiporeporte }}" nhref="/reportes?action=run&n={{ reporte_1.nombre }}&persona={{ detalledir.evaluado.persona.id }}" title="Imprimir hoja de vida"  class="reportedirecto"><i class="fa fa-print"></i> Hoja de vida</a></li>
                                            {% endif %}
                                        {% else %}
{#                                            {% if detalledir.evaluado.profesorarticulos %}#}
{#                                                <li class="dropdown-item"><a href="/pro_personaevaluacion?action=verpublicaciones&id={{ detalledir.evaluado.id|encrypt }}" ><i class="fa fa-tags"></i> Publicaciones</a></li>#}
{#                                            {% endif %}#}
                                            {% if periodo.versionevaluacionpardir == 1 %}
                                                <li class="dropdown-item"><a class="bloqueo_pantalla" href="/pro_personaevaluacion?action=veratividadesdirectivos&id={{ detalledir.evaluado.id|encrypt }}" ><i class="fa fa-cog"></i> Evidencias</a></li>
                                            {% endif %}
                                            {% if periodo.versionevaluacionpardir == 2 %}
                                                <li class="dropdown-item"><a class="bloqueo_pantalla" href="/pro_personaevaluacion?action=veratividadesdirectivosnew&id={{ detalledir.evaluado.id|encrypt }}&tipoevi={{ 2|encrypt }}" ><i class="fa fa-cog"></i> Evidencias</a></li>
                                            {% endif %}
{#                                            {% if periodo.versionevaluacionpardir == 1 %}#}
{#                                                <li class="dropdown-item"><a class="bloqueo_pantalla" href="/pro_personaevaluacion?action=verasistencias_link&profesorid={{ detalledir.evaluado.id|encrypt }}" ><i class="fa fa-check"></i> Asistencia a clases</a></li>#}
{#                                                <li class="dropdown-item"><a href="/pro_personaevaluacion?action=vertutorias&profesorid={{  detalledir.evaluado.id|encrypt }}" ><i class="fa fa-users"></i> Tutorias y acompañamientos acádemico</a></li>#}
{#                                                <li class="dropdown-item"><a href="/pro_personaevaluacion?action=docgeneral&profesorid={{  detalledir.evaluado.id|encrypt }}" ><i class="fa fa-file-text-o"></i> Recursos aula virtual</a></li>#}
{#                                                <li class="dropdown-item"><a href="/pro_personaevaluacion?action=tutoriasexamencomplexivo&id={{ detalledir.evaluado.id|encrypt }}" ><i class="fa fa-list"></i> Examen complexivo</a></li>#}
{#                                                <li class="dropdown-item">#}
{#                                                    <a href="/pro_personaevaluacion?action=listacomplementarias&profesorid={{ detalledir.evaluado.id|encrypt }}" >#}
{#                                                        <i class="fa fa-list"></i> Actividades Complementarias#}
{#                                                        {% with tieneactividades=detalledir.evaluado|args:periodo|call:"totalcomplementarias" %}#}
{#                                                            <label class="label tu">{{ tieneactividades }}</label>#}
{#                                                        {% endwith %}#}
{#                                                    </a>#}
{#                                                </li>#}
{#                                            {% endif %}#}
{#                                            <li class="dropdown-item"><a href="/pro_personaevaluacion?action=permisoinstitucional&profesorid={{ detalledir.evaluado.id|encrypt }}"> <span class='fa fa-user'></span> Permisos institucionales</a></li>#}
{#                                            {% if reporte_1 %}#}
{#                                                <li class="dropdown-item">  <a href="javascript:;" tipos="{{ reporte_1.tiporeporte }}" nhref="/reportes?action=run&n={{ reporte_1.nombre }}&persona={{ detalledir.evaluado.persona.id }}" title="Imprimir hoja de vida"  class="reportedirecto"><i class="fa fa-print"></i> Hoja de vida</a></li>#}
{#                                            {% endif %}#}
{#                                            {% if distributivohora %}#}
{#                                                <li class="dropdown-item dropdown-submenu pull-left"><a href="javascript:;"><i class="fa fa-list"></i> Informes</a>#}
{#                                                    <ul class="dropdown-menu">#}
{#                                                        {%  if distributivohora.verificar_coordinaciones.0 %}#}
{#                                                            <li class="dropdown-item"><a class="tu generar_seguimiento" idreport="1" href="javascript:;" idp="{{ detalledir.evaluado.id|encrypt }}"><span class="fa fa-print"></span>  Informe mensual de cumplimiento de actividades (pregrado en línea)</a></li>#}
{#                                                        {% endif %}#}
{#                                                        {% if  distributivohora.verificar_coordinaciones.1 %}#}
{#                                                            <li class="dropdown-item"><a class="tu imprimirinforme" idd="{{ distributivohora.id|encrypt }}" href="javascript:;"><span class="fa fa-print"></span> Imprimir informe mensual de actividades del docente</a></li>#}
{#                                                        {% endif %}#}
{#                                                        {%  if distributivohora.verificar_coordinaciones.2 %}#}
{#                                                            <li class="dropdown-item"><a class="tu generar_seguimiento" idreport="3" href="javascript:;" idp="{{ detalledir.evaluado.id|encrypt }}"><span class="fa fa-print"></span> Informe mensual de cumplimiento de actividades (admisión presencial)</a></li>#}
{#                                                        {% endif %}#}
{#                                                        {%  if distributivohora.verificar_coordinaciones.3 %}#}
{#                                                            <li class="dropdown-item"><a class="tu generar_seguimiento" idreport="2" href="javascript:;" idp="{{ detalledir.evaluado.id|encrypt }}"><span class="fa fa-print"></span> Informe mensual de cumplimiento de actividades (admisión en línea)</a></li>#}
{#                                                        {% endif %}#}
{#                                                    </ul>#}
{#                                                </li>#}
{#                                            {% endif %}#}
                                        {% endif %}
                                    </ul>
                                </div>
                            </td>
                        </tr>
                    {% endwith %}
                {% endfor %}
                </tbody>
            </table>

            <div class="row my-3 px-3">
                <div class="col-lg-12">
                    <nav>
                        {% if pagingdir.num_pages > 5 %}
                            <ul class="pagination justify-content-center m-0">
                                {% if pagingdir.primera_pagina %}
                                    <li class="page-item">
                                        <a class="page-link bloqueo_pantalla" href="?pagedir=1{{ url_vars }}">1</a>
                                    </li>
                                    <li class="page-item">
                                        <a href="?pagedir={{ pagingdir.ellipsis_izquierda }}{{ url_vars }}" class="active page-link bloqueo_pantalla">...</a></li>
                                {% endif %}
                                {% for pagenumber in pagingdir.paginas %}
                                    <li {% if pagenumber == pagedir.number %}class='active page-item '
                                        {% else %}class='page-item'{% endif %}>
                                        <a href="?pagedir={{ pagenumber }}{{ url_vars }}" class="page-link bloqueo_pantalla">{{ pagenumber }}</a>
                                    </li>
                                {% endfor %}
                                {% if pagingdir.ultima_pagina %}
                                    <li class="page-item">
                                        <a href="?pagedir={{ pagingdir.ellipsis_derecha }}{{ url_vars }}" class="active page-link bloqueo_pantalla">...</a></li>
                                    <li class="page-item">
                                        <a href="?pagedir={{ pagingdir.num_pages }}{{ url_vars }}"  class="page-link bloqueo_pantalla">{{ pagingdir.num_pages }}</a>
                                    </li>
                                {% endif %}
                            </ul>
                        {% else %}
                            <ul class="pagination justify-content-center m-0">
                                {% for pagenumber in pagingdir.page_range %}
                                    <li {% if pagenumber == pagedir.number %}class='active page-item'{% else %}class="page-item"{% endif %}>
                                        <a class="page-link bloqueo_pantalla" href="?pagedir={{ pagenumber }}{{ url_vars }}">{{ pagenumber }}</a>
                                    </li>
                                {% endfor %}
                            </ul>
                        {% endif %}
                    </nav>
                </div>
            </div>






            {#        <div class="row my-3 px-3">#}
            {#            <div class="col-lg-12">#}
            {#                <nav>#}
            {#                    {% if pagingdir.num_pages > 20 %}#}
            {#                        <div class='pagination'>#}
            {#                            <ul>#}
            {#                                {% if pagingdir.primera_pagina %}#}
            {#                                    <li><a class="bloqueo_pantalla" href="/pro_personaevaluacion?{% if search %}s={{ search }}&{% endif %}pagedir=1">1</a></li>#}
            {#                                    <li><a href="/pro_personaevaluacion?{% if search %}s={{ search }}&{% endif %}pagedir={{ pagingdir.ellipsis_izquierda }}" class="active bloqueo_pantalla">...</a></li>#}
            {#                                {% endif %}#}
            {#                                {% for pagenumber in pagingdir.paginas %}#}
            {#                                    <li {% if pagenumber == pagedir.number %}class='active'{% endif %}><a class="bloqueo_pantalla" href="/pro_personaevaluacion?{% if search %}s={{ search }}&{% endif %}pagedir={{ pagenumber }}">{{ pagenumber }}</a></li>#}
            {#                                {% endfor %}#}
            {#                                {% if pagingdir.ultima_pagina %}#}
            {#                                    <li><a href="/pro_personaevaluacion?{% if search %}s={{ search }}&{% endif %}pagedir={{ paging.ellipsis_derecha }}" class="active bloqueo_pantalla">...</a></li>#}
            {#                                    <li><a class="bloqueo_pantalla" href="/pro_personaevaluacion?{% if search %}s={{ search }}&{% endif %}pagedir={{ pagingdir.num_pages }}">{{ pagingdir.num_pages }}</a></li>#}
            {#                                {% endif %}#}
            {#                            </ul>#}
            {#                        </div>#}
            {#                    {% else %}#}
            {#                        <div class='pagination'>#}
            {#                            <ul>#}
            {#                                {% for pagenumber in pagingdir.page_range %}#}
            {#                                    <li {% if pagenumber == pagedir.number %}class='active'{% endif %}><a class="bloqueo_pantalla" href="/pro_personaevaluacion?{% if search %}s={{ search }}&{% endif %}pagedir={{ pagenumber }}">{{ pagenumber }}</a></li>#}
            {#                                {% endfor %}#}
            {#                            </ul>#}
            {#                        </div>#}
            {#                    {% endif %}#}
            {#                </nav>#}
            {#            </div>#}
            {#        </div>#}
        {% endif %}
    </div>
    {% if listadoprofesores %}
        <div class='row-fluid'>
            <div class='span12'>
                <h4>Evaluaci&oacute;n de Revisión</h4>
                <a class="btn imprimir btn-warning tu" title="Listado de docentes evaluados"  href="javascript:;" tipos="{{ reporte_2.tiporeporte }}" nhref="/reportes?action=run&n={{ reporte_2.nombre }}&periodo={{ periodo.id }}&persona={{ persona.id }}"><span class="fa fa-file-excel-o"></span> Imprimir</a>
                <table class='table table-bordered table-striped' >
                    <thead>
                    <tr>
                        <th>Profesor</th>
                        <th style="width:300px;">Asignatura</th>
                        <th style="width:100px;">Facultad</th>
                        <th style="width:100px;">Carrera</th>
                        <th style="width:100px; text-align: center">Fecha</th>
                        <th style="width:100px; text-align: center">Hora</th>
                        <th style="width:100px;"></th>
                        <th style="width:50px;"></th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for listaprofe in listadoprofesores %}
                        {% with evaluacionrevision=listaprofe.profesor|args:periodo|args:persona|args:listaprofe.tipoprofesor.id|args:listaprofe.materia.id|call:"dato_evaluado_directivorevision_periodo" %}
                            <tr>
                                <td>
                                    {{ listaprofe.profesor }}<br>
                                    <label class="label label-info">{{ listaprofe.tipoprofesor.nombre }}</label>
                                </td>
                                <td>{{ listaprofe.materia.asignatura.nombre }}</td>
                                <td>{{ listaprofe.materia.asignaturamalla.malla.carrera.coordinacion }}</td>
                                <td>{{ listaprofe.materia.asignaturamalla.malla.carrera.alias }}</td>
                                <td style="text-align: center;">{% if evaluacionrevision %}{{ evaluacionrevision.fecha|date:"d-m-Y" }} {% endif %}</td>
                                <td style="text-align: center;">{% if evaluacionrevision %}{{ evaluacionrevision.fecha|time:"h:i a" }}{% endif %}</td>
                                <td style="text-align: center;">
                                    {%  if evaluacionrevision %}
                                        <a class="btn btn-mini btn-info bloqueo_pantalla" href="/pro_personaevaluacion?action=consultar&id={{ listaprofe.profesor.id }}&t=5&tipoprofe={{ listaprofe.tipoprofesor.id }}&idmate={{ listaprofe.materia.id }}"><i class="fa fa-eye"></i> Consultar</a>
                                    {% else %}
                                        {% if proceso.activo_directivosrevision %}
                                            <a class="btn btn-mini btn-warning bloqueo_pantalla" href="/pro_personaevaluacion?action=evaluar&id={{ listaprofe.profesor.id }}&t=5&tipoprofe={{ listaprofe.tipoprofesor.id }}&codimate={{ listaprofe.materia.id }}"><i class="fa fa-plus"></i> Evaluar</a>
                                        {% endif %}
                                    {% endif %}
                                </td>
                                <td>
                                    <a class="btn btn-success bloqueo_pantalla" href="/pro_personaevaluacion?action=verasistencias_linkmateria&profesorid={{ listaprofe.profesor.id|encrypt }}&materiaid={{ listaprofe.materia.id|encrypt }}" ><i class="fa fa-video-camera"></i> Videos clases</a>
                                </td>
                            </tr>
                        {% endwith %}
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    {% endif %}
    <div class="modal fade static" id="itemspanel" style="display: none;" >
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 id="paneltitle">Ingresar un rango de fechas:</h4>
                </div>
                <div class="modal-body panelbody">
                    <div class="alert alert-danger incompletoaddpreguntas" style="display: none">
                        <i class="fa fa-info-sign"></i> Seleccione un rango de fechas para continuar...!!!
                    </div>
                    <div style="text-align: center">
                        <input placeholder="fecha desde" type="date" value="{{ fechainicio }}" name="fini" id="id_fini" style="width: 100px">
                        <input placeholder="fecha hasta" type="date" value="{{ fechafin }}" name="ffin" id="id_ffin" style="width: 100px">
                    </div><br>
                </div>
                <div class="modal-footer">
                    <p style="text-align: center; margin-bottom: 0">
                        <a href="javascript:;" class="btn btn-danger generarinforme"><i class="fa fa-plus"></i> Procesar</a>
                        <a href="javascript:;" id="add_cancel" class="btn btn-info"> Cancelar</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="itemspanel_generar_seguimiento" style="display: none;" >
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 id="paneltitle">Ingresar un rango de fechas :</h4>
                </div>
                <div class="modal-body panelbody">
                    <div class="alert alert-danger incompletoseguimiento_general" style="display: none">
                        <i class="fa fa-info-sign"></i> Seleccione un rango de fechas para continuar...!!!
                    </div>
                    <div style="text-align: center">
                        <input placeholder="fecha desde" type="date" value="{{ fechainicio }}" name="fini" id="id_fini_seguimiento_general" style="width: 100px">
                        <input placeholder="fecha hasta" type="date" value="{{ fechafin }}" name="ffin" id="id_ffin_seguimiento_general" style="width: 100px">
                        <input type="hidden" id="idreporte" name="idreporte" value="0">
                        <input type="hidden" id="idprofesor" name="idprofesor" value="0">
                    </div><br>
                </div>
                <div class="modal-footer">
                    <p style="text-align: center; margin-bottom: 0">
                        <a href="javascript:;" class="btn btn-danger generar_seguimiento_general"><i class="fa fa-plus"></i> Procesar</a>
                        <a href="javascript:;" id="cancel_seguimiento_general" class="btn btn-info"> Cancelar</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
{% endblock %}