{% extends "ajaxformbs.html" %}
{% block atras %}/af_activofijo?action=mantenimientos{% endblock %}
{% block extraheading %}
    <script>
        var items=[];

        var j;
        $(function(){
            $("#id_responsable_select2, #id_descripcion, #id_tipobien, #id_estructuraactivo, #id_clasebien, #id_catalogo, #id_origeningreso, #id_costo, #id_serie, #id_modelo, #id_marca, #id_tipodocumentorespaldo, #id_clasedocumentorespaldo, #id_tipocomprobante, #id_numerocomprobante, #id_estado, #id_vidautil, #id_cuentacontable, #id_tipoproyecto").addClass("validate[required]");

            $("#id_codigointerno, #id_vidautil").blur(function(){
                numerico($(this), 0, 100, 0);
            });

            $("#id_numerocomprobante").mask('999-999-999999999').val('');

            $("#id_costo, #id_valoravaluo, #id_montocontrato, #id_areapredio, #id_areaconstruccion").blur(function(){
                numerico($(this), 0, 0, 2);
            });

            $("#id_aniofabricacion").blur(function(){
                numerico($(this), 1900, 9999, 0);
            });

            $("#id_duracioncontrato").blur(function(){
                numerico($(this), 0, 100, 0);
            });




            $("#id_valorcontable, #id_valorresidual, #id_valorlibros, #id_valordepreciacionacumulada").attr({'disabled': true});
            $("#id_fechacomprobante, #id_fechaingreso, #id_fechaedicion, #id_fechaescritura, #id_fechacontrato").datepicker({format:"yyyy-mm-dd"}).on('changeDate', function(ev){ $(this).datepicker('hide'); });

            $("#caracteristicas").click(function(){
                $("#id_caracteristica").val("").attr("myval","");
                $("#id_valor").attr('disabled', true).val("");

                $("#itemspanel").modal({backdrop:'static', width: '700px'}).modal('show');
                return false;
            });

            eliminarcaracteristica = function () {
                var id = $(this).attr('idc');
                $('#cr_'+id).remove();
            };

            conectar_control_lista = function(){
                $(".valorcar").unbind();
                $(".valorcar").blur(function() {
                    actualizar_lista();
                });
            };

            actualizar_lista = function(){
                var lista = "";
                items=[];
                $(".valorcar").each(function(){
                    var elemento = $(this);
                    var id = elemento.attr('idt');
                    var valor = elemento.val().replace(":", "").replace(";", "");
                    lista+=(id+":"+valor+";");
                });
                lista = lista.substring(0, lista.length - 1);
                $("#listcaracteristica").val(lista);
                items.push(lista);
            };

            conectar_eliminar=function() {
                $(".eliminarc").unbind();
                $(".eliminarc").click(function () {
                    var id = $(this).attr('idc');
                    $('#cr_' + id).remove();
                    actualizar_lista()
                });
            };

            caracteristicas_activo = function (tipo) {
                $("#fieldset_titulo, #fieldset_autor, #fieldset_editorial, #fieldset_fechaedicion, #fieldset_numeroedicion, #fieldset_clasificacionbibliografica").hide();
                $("#fieldset_color, #fieldset_material, #fieldset_dimensiones ").hide();
                $("#fieldset_clasevehiculo, #fieldset_tipovehiculo, #fieldset_numeromotor, #fieldset_numerochasis, #fieldset_placa, #fieldset_aniofabricacion, #fieldset_colorprimario, #fieldset_colorsecundario ").hide();
                $("#fieldset_propietario, #fieldset_codigocatastral, #fieldset_numeropredio, #fieldset_valoravaluo, #fieldset_anioavaluo, #fieldset_areapredio, #fieldset_areaconstruccion, #fieldset_pisos, #fieldset_provincia, #fieldset_canton, #fieldset_parroquia, #fieldset_zona, #fieldset_nomenclatura, #fieldset_sector, #fieldset_direccion, #fieldset_direccion2 , #fieldset_escritura, #fieldset_fechaescritura, #fieldset_notaria, #fieldset_beneficiariocontrato, #fieldset_fechacontrato, #fieldset_duracioncontrato, #fieldset_montocontrato  ").hide();
                if (tipo == 1){
                    $("#fieldset_color, #fieldset_material, #fieldset_dimensiones ").show();
                }
                if (tipo == 2){
                    $("#fieldset_clasevehiculo, #fieldset_tipovehiculo, #fieldset_numeromotor, #fieldset_numerochasis, #fieldset_placa, #fieldset_aniofabricacion, #fieldset_colorprimario, #fieldset_colorsecundario ").show();
                }
                if (tipo == 3){
                    $("#fieldset_color, #fieldset_material, #fieldset_dimensiones ").show();
                }
                if (tipo == 4){
                    $("#fieldset_propietario, #fieldset_codigocatastral, #fieldset_numeropredio, #fieldset_valoravaluo, #fieldset_anioavaluo, #fieldset_areapredio, #fieldset_areaconstruccion, #fieldset_pisos, #fieldset_provincia, #fieldset_canton, #fieldset_parroquia, #fieldset_zona, #fieldset_nomenclatura, #fieldset_sector, #fieldset_direccion, #fieldset_direccion2 , #fieldset_escritura, #fieldset_fechaescritura, #fieldset_notaria, #fieldset_beneficiariocontrato, #fieldset_fechacontrato, #fieldset_duracioncontrato, #fieldset_montocontrato  ").show();
                }
                if (tipo == 5){
                    $("#fieldset_color, #fieldset_material, #fieldset_dimensiones ").show();
                }
                if (tipo == 6){
                    $("#fieldset_titulo, #fieldset_autor, #fieldset_editorial, #fieldset_fechaedicion, #fieldset_numeroedicion, #fieldset_clasificacionbibliografica").show();
                }
            };

            $("#id_catalogo_select2").change(function(){
                var id = $(this).val();
                if (id){
                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: "/af_activofijo",
                        data: {"action": "activocaracteristica", "id": id},
                        success: function(data) {
                            $.unblockUI();
                            if (data.result=='ok'){
                                caracteristicas_activo(data.tipo);
                            } else {
                                $("#id_catalogo").val(0).trigger("change");
                                caracteristicas_activo(0);
                            }
                        },
                        error: function() {
                            $.unblockUI();
                            $("#id_catalogo").val(0).trigger("change");
                            caracteristicas_activo(0);
                            smoke.alert("Error de conexi√≥n.");
                        },
                        dataType: "json"
                    });
                }
            });

            $("#id_catalogo_select2").val(0).trigger("change");
            caracteristicas_activo(0);

            $("#id_cpu, #id_custodio, #id_catalogo").attr({"value": "0"});
            $("#id_cpu").attr({"value":({{ manpreventivos.activofijo.id }})});
            ItemsDisplay = function (item) {
                if (item.name) {
                    return $('<span>' + item.name + '</span>');
                } else {
                    if ($("#id_cpu").val() == 0) {
                        return '---------';
                    } else {
                        return '{{ manpreventivos.activofijo }}';
                    }
                }
            };
            $("#id_cpu_select2").select2({
                placeholder: "---------",
                allowClear: true,
                ajax: {
                    url: function (params) {
                        return "/reportes?action=data&model=ActivoFijo&p=1&s=10&q=" + params.term;
                    },
                    dataType: 'json',
                    delay: 250,
                    data: function (params) {
                        return {
                            q: params.term,
                            page: params.page
                        };
                    },
                    processResults: function (data, params) {
                        params.page = params.page || 1;
                        return {
                            results: data.results,
                            pagination: {
                                more: (params.page * 30) < data.total_count
                            }
                        };
                    },
                    cache: true
                },
                escapeMarkup: function (markup) { return markup; }, // let our custom formatter work
                minimumInputLength: 1,
                templateResult: ItemsDisplay, // omitted for brevity, see the source of this page
                templateSelection: ItemsDisplay // omitted for brevity, see the source of this page
            }).on("select2:select", function (evt) {
                $("#id_cpu").attr({"value":(evt.params.data.id)});
            });

            $("#id_custodio_select2").select2({
                placeholder: "---------",
                allowClear: true,
                ajax: {
                    url: function (params) {
                        return "/reportes?action=data&model=Persona&p=1&s=10&q=" + params.term;
                    },
                    dataType: 'json',
                    delay: 250,
                    data: function (params) {
                        return {
                            q: params.term,
                            page: params.page
                        };
                    },
                    processResults: function (data, params) {
                        // parse the results into the format expected by Select2
                        // since we are using custom formatting functions we do not need to
                        // alter the remote JSON data, except to indicate that infinite
                        // scrolling can be used
                        params.page = params.page || 1;

                        return {
                            results: data.results,
                            pagination: {
                                more: (params.page * 30) < data.total_count
                            }
                        };
                    },
                    cache: true
                },
                escapeMarkup: function (markup) { return markup; }, // let our custom formatter work
                minimumInputLength: 1,
                templateResult: ItemsDisplay, // omitted for brevity, see the source of this page
                templateSelection: ItemsDisplay // omitted for brevity, see the source of this page
            }).on("select2:select", function (evt) {
                $("#id_custodio").attr({"value":(evt.params.data.id)});
            });


            $("#id_catalogo_select2").select2({
                placeholder: "---------",
                allowClear: true,
                ajax: {
                    url: function (params) {
                        return "/reportes?action=data&model=CatalogoBien&p=1&s=10&q=" + params.term;
                    },
                    dataType: 'json',
                    delay: 400,
                    data: function (params) {
                        return {
                            q: params.term,
                            page: params.page
                        };
                    },
                    processResults: function (data, params) {
                        // parse the results into the format expected by Select2
                        // since we are using custom formatting functions we do not need to
                        // alter the remote JSON data, except to indicate that infinite
                        // scrolling can be used
                        params.page = params.page || 1;

                        return {
                            results: data.results,
                            pagination: {
                                more: (params.page * 30) < data.total_count
                            }
                        };
                    },
                    cache: true
                },
                escapeMarkup: function (markup) { return markup; }, // let our custom formatter work
                minimumInputLength: 1,
                templateResult: ItemsDisplay, // omitted for brevity, see the source of this page
                templateSelection: ItemsDisplay // omitted for brevity, see the source of this page
            }).on("select2:select", function (evt) {
                $("#id_catalogo").attr({"value":(evt.params.data.id)});
            });


            $('#id_tipo').change(function(){
                $('.listadotiposman').empty().append('').val(0).trigger("change");
                var id_tipo = $('#id_tipo').val();
                if (id_tipo > 0) {
                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: "/af_activofijo",
                        data: {'action': 'listatipomantenimiento', 'id_tipo': id_tipo},
                        success: function (data) {
                            $.unblockUI();
                            if (data.result == 'ok') {
                                for (elemento in data.lista) {
                                    $('.listadotiposman').append('<input class="tiposman" idcodtipo="' + data.lista[elemento][0] + '" type="checkbox"> ' + data.lista[elemento][1] + ' <br>');
                                }
                            } else {
                                control.val(0).trigger("change");
                                smoke.alert(data.mensaje);
                            }
                        },
                        error: function () {
                            $.unblockUI();
                            control.val(0).trigger("change");
                            smoke.alert("Error de conexion.");
                        },
                        dataType: "json"
                    });
                }
            });

            $("#guardaboton").click(function() {
                var id_activoman = {{ manpreventivos.id }}
                var id_monitor = $("#id_monitor").val()
                var id_mouse = $("#id_mouse").val()
                var id_teclado = $("#id_teclado").val()
                var id_fechaingreso = $("#id_fechaingreso").val()
                var id_mantenimiento = $("#id_mantenimiento").val()
                var id_tipo = $("#id_tipo").val()
                var id_procesador = $("#id_procesador").val()
                var id_memoria = $("#id_memoria").val()
                var id_discoduro = $("#id_discoduro").val()
                var id_particiones = $("#id_particiones").val()
                var id_sistemaoperativo = $("#id_sistemaoperativo").val()
                var id_arquitectura = $("#id_arquitectura").val()
                var id_service = $("#id_service").val()
                var id_observacion = $("#id_observacion").val()
                var id_entrega = $("#id_entrega").val()
                var id_recibe = $("#id_recibe").val()
                if (id_cpu==0){
                    smoke.alert('ingrese activo');
                    return false;
                }
                if (id_fechaingreso==''){
                    smoke.alert('ingrese fecha de mantenimiento');
                    return false;
                }
                if (id_mantenimiento==''){
                    smoke.alert('selecciones tipo de mantenimiento');
                    return false;
                }
                if (id_tipo==''){
                    smoke.alert('selecciones tipo');
                    return false;
                }
                if( $('#id_recibe').attr('checked') ) {
                    id_recibe = 1
                }else{ id_recibe = 0 }
                if( $('#id_entrega').attr('checked') ) {
                    id_entrega = 1
                }else{ id_entrega = 0 }
                lista = '';
                $(".tiposman").each(function(){
                    if( $(this).attr('checked') ) {
                        var idcodtipo = $(this).attr('idcodtipo');
                        lista+=(idcodtipo+",");
                    }

                });
                if (lista==''){
                    smoke.alert('selecciones tareas de mantenimiento');
                    return false;
                }
                lista = lista.substring(0, lista.length-1);
                if (id_observacion==''){
                    smoke.alert('ingrese observaci√≥n');
                    return false;
                }
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/af_activofijo",
                    data: {'action':'editmantenimiento', 'id_activoman': id_activoman, 'lista': lista,'id_entrega': id_entrega,'id_recibe': id_recibe,'id_monitor': id_monitor, 'id_mouse': id_mouse, 'id_teclado': id_teclado, 'id_fechaingreso': id_fechaingreso, 'id_mantenimiento': id_mantenimiento, 'id_tipo': id_tipo, 'id_procesador': id_procesador, 'id_memoria': id_memoria, 'id_discoduro': id_discoduro, 'id_particiones': id_particiones, 'id_sistemaoperativo': id_sistemaoperativo, 'id_arquitectura': id_arquitectura, 'id_service': id_service, 'id_observacion': id_observacion},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result=='ok'){
                            bloqueointerface();
                            location.href = "/af_activofijo?action=mantenimientos";
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexi√≥n.");
                    },
                    dataType: "json"
                });
            });

        });
    </script>
{% endblock %}
{% block canvas %}
    <div class="row-fluid">
        <div class="span12">
            <div class="form-l">
                <div class="row-fluid no-marging-bottom" style="margin-bottom: 3px;">
                    <div class="well" style="margin-bottom: 3px;padding: 10px;">
                        <h4>Editar activo para mantenimiento preventivo</h4>
                    </div>
                </div>
                <div class="row-fluid">
                    <div class="well" style="display: flex;">
                        <form id="formulario" formtype="form-horizontal" style="width: 100%; margin-bottom: 0" onsubmit="return false">
                            <div class="row-fluid">

                                <input type="hidden" name="action" value="addedificio">

                                <fieldset id="fieldset_responsable" class="control-group nomargins" style="min-height:45px; float: left; width: 100%">
                                    <div class="control-label label-text" style="display: table; height: 30px; float: left; text-align: right; width: 160px;">
                                        <div style="display: table-cell; vertical-align: middle; line-height: 11px">
                                            <label for="id_cpu" style="padding-right: 20px">Activo</label>
                                        </div>
                                    </div>
                                    <div class="control" style="float: left; width: 630px;">

                                        <select disabled id="id_cpu_select2" tabindex="-1" class="validate[required] select2-hidden-accessible" aria-hidden="true"><option>undefined</option></select>
                                        <input name="cpu" id="id_cpu" value="0" hidden="hidden" class="select2hidden">

                                        <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px"> </p>
                                    </div>
                                </fieldset>

                                <fieldset id="fieldset_monitor" class="control-group nomargins" style="min-height:45px; float: left; width: 50%">
                                    <div class="control-label label-text" style="display: table; height: 30px; float: left; text-align: right; width: 160px;">
                                        <div style="display: table-cell; vertical-align: middle; line-height: 11px">
                                            <label for="id_monitor" style="padding-right: 20px">C√≥digo Monitor</label>
                                        </div>
                                    </div>
                                    <div class="control" style="float: left; width: 225px;">

                                        <input formwidth="50%" id="id_monitor" maxlength="50" name="monitor" type="text" class="validate[required]" value="{{ manpreventivos.monitor }}">

                                        <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px"> </p>
                                    </div>
                                </fieldset>


                                <fieldset id="fieldset_teclado" class="control-group nomargins" style="min-height:45px; float: left; width: 50%">
                                    <div class="control-label label-text" style="display: table; height: 30px; float: left; text-align: right; width: 160px;">
                                        <div style="display: table-cell; vertical-align: middle; line-height: 11px">
                                            <label for="id_teclado" style="padding-right: 20px">C√≥digo Teclado</label>
                                        </div>
                                    </div>
                                    <div class="control" style="float: left; width: 225px;">

                                        <input formwidth="50%" id="id_teclado" maxlength="50" name="teclado" type="text" value="{{ manpreventivos.teclado }}">

                                        <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px"> </p>
                                    </div>
                                </fieldset>


                                <fieldset id="fieldset_mouse" class="control-group nomargins" style="min-height:45px; float: left; width: 50%">
                                    <div class="control-label label-text" style="display: table; height: 30px; float: left; text-align: right; width: 160px;">
                                        <div style="display: table-cell; vertical-align: middle; line-height: 11px">
                                            <label for="id_mouse" style="padding-right: 20px">C√≥digo Mouse</label>
                                        </div>
                                    </div>
                                    <div class="control" style="float: left; width: 225px;">

                                        <input formwidth="50%" id="id_mouse" maxlength="50" name="mouse" type="text" class="validate[required]" value="{{ manpreventivos.mouse }}">

                                        <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px"> </p>
                                    </div>
                                </fieldset>


                                <fieldset id="fieldset_fechaingreso" class="control-group nomargins" style="min-height:45px; float: left; width: 30%">
                                    <div class="control-label label-text" style="display: table; height: 30px; float: left; text-align: right; width: 160px;">
                                        <div style="display: table-cell; vertical-align: middle; line-height: 11px">
                                            <label for="id_fechaingreso" style="padding-right: 20px">Fecha mantenimiento</label>
                                        </div>
                                    </div>
                                    <div class="control" style="float: left; width: 63px;">

                                        <input class="selectorfecha validate[required]" formwidth="30%" id="id_fechaingreso" name="fechaingreso" type="text" value="{{ manpreventivos.fecha|date:"Y-m-d" }}">

                                        <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px"> </p>
                                    </div>
                                </fieldset>
                                <div style="width: 100%; height: 1px; float: left;"></div>

                                <fieldset id="fieldset_mantenimiento" class="control-group nomargins" style="min-height:45px; float: left; width: 100%">
                                    <div class="control-label label-text" style="display: table; height: 30px; float: left; text-align: right; width: 160px;">
                                        <div style="display: table-cell; vertical-align: middle; line-height: 11px">
                                            <label for="id_mantenimiento" style="padding-right: 20px">Mantenimiento</label>
                                        </div>
                                    </div>
                                    <div class="control" style="float: left; width: 630px;">

                                        <select formwidth="100%" id="id_mantenimiento" name="mantenimiento" separator="true" tabindex="-1" class="select2-hidden-accessible validate[required]" aria-hidden="true">
                                            <option value="" selected="selected">---------</option>
                                            {% for tip in tipo %}
                                                <option value="{{ tip.0 }}" {% if manpreventivos.tipomantenimiento == tip.0  %} selected {% endif %}>{{ tip.1 }}</option>
                                            {% endfor %}
                                        </select>
                                        <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px"> </p>
                                    </div>
                                </fieldset>

                                <fieldset id="fieldset_procesador" class="control-group nomargins" style="min-height:45px; float: left; width: 50%">
                                    <div class="control-label label-text" style="display: table; height: 30px; float: left; text-align: right; width: 160px;">
                                        <div style="display: table-cell; vertical-align: middle; line-height: 11px">
                                            <label for="id_procesador" style="padding-right: 20px">Procesador</label>
                                        </div>
                                    </div>
                                    <div class="control" style="float: left; width: 225px;">

                                        <input formwidth="50%" id="id_procesador" maxlength="50" name="procesador" type="text" class="validate[required]" value="{{ manpreventivos.procesador }}">

                                        <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px"> </p>
                                    </div>
                                </fieldset>


                                <fieldset id="fieldset_memoria" class="control-group nomargins" style="min-height:45px; float: left; width: 50%">
                                    <div class="control-label label-text" style="display: table; height: 30px; float: left; text-align: right; width: 160px;">
                                        <div style="display: table-cell; vertical-align: middle; line-height: 11px">
                                            <label for="id_memoria" style="padding-right: 20px">Memoria</label>
                                        </div>
                                    </div>
                                    <div class="control" style="float: left; width: 225px;">

                                        <input formwidth="50%" id="id_memoria" maxlength="50" name="memoria" type="text" value="{{ manpreventivos.memoria }}">

                                        <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px"> </p>
                                    </div>
                                </fieldset>
                                <fieldset id="fieldset_discoduro" class="control-group nomargins" style="min-height:45px; float: left; width: 50%">
                                    <div class="control-label label-text" style="display: table; height: 30px; float: left; text-align: right; width: 160px;">
                                        <div style="display: table-cell; vertical-align: middle; line-height: 11px">
                                            <label for="id_discoduro" style="padding-right: 20px">Disco duro</label>
                                        </div>
                                    </div>
                                    <div class="control" style="float: left; width: 225px;">

                                        <input formwidth="50%" id="id_discoduro" maxlength="50" name="discoduro" type="text" class="validate[required]" value="{{ manpreventivos.discoduro }}">

                                        <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px"> </p>
                                    </div>
                                </fieldset>


                                <fieldset id="fieldset_particiones" class="control-group nomargins" style="min-height:45px; float: left; width: 50%">
                                    <div class="control-label label-text" style="display: table; height: 30px; float: left; text-align: right; width: 160px;">
                                        <div style="display: table-cell; vertical-align: middle; line-height: 11px">
                                            <label for="id_particiones" style="padding-right: 20px">Particiones</label>
                                        </div>
                                    </div>
                                    <div class="control" style="float: left; width: 225px;">

                                        <input formwidth="50%" id="id_particiones" maxlength="50" name="particiones" type="text" value="{{ manpreventivos.particiones }}">

                                        <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px"> </p>
                                    </div>
                                </fieldset>

                                <fieldset id="fieldset_sistemaoperativo" class="control-group nomargins" style="min-height:45px; float: left; width: 50%">
                                    <div class="control-label label-text" style="display: table; height: 30px; float: left; text-align: right; width: 160px;">
                                        <div style="display: table-cell; vertical-align: middle; line-height: 11px">
                                            <label for="id_sistemaoperativo" style="padding-right: 20px">Sistema operativo</label>
                                        </div>
                                    </div>
                                    <div class="control" style="float: left; width: 225px;">

                                        <input formwidth="50%" id="id_sistemaoperativo" maxlength="50" name="codigobien" type="text" class="validate[required]" value="{{ manpreventivos.sistemaoperativo }}">

                                        <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px"> </p>
                                    </div>
                                </fieldset>


                                <fieldset id="fieldset_arquitectura" class="control-group nomargins" style="min-height:45px; float: left; width: 50%">
                                    <div class="control-label label-text" style="display: table; height: 30px; float: left; text-align: right; width: 160px;">
                                        <div style="display: table-cell; vertical-align: middle; line-height: 11px">
                                            <label for="id_arquitectura" style="padding-right: 20px">Arquitectura</label>
                                        </div>
                                    </div>
                                    <div class="control" style="float: left; width: 225px;">

                                        <input formwidth="50%" id="id_arquitectura" maxlength="50" name="arquitectura" type="text" value="{{ manpreventivos.arquitectura }}">

                                        <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px"> </p>
                                    </div>
                                </fieldset>

                                <fieldset id="fieldset_service" class="control-group nomargins" style="min-height:45px; float: left; width: 50%">
                                    <div class="control-label label-text" style="display: table; height: 30px; float: left; text-align: right; width: 160px;">
                                        <div style="display: table-cell; vertical-align: middle; line-height: 11px">
                                            <label for="id_service" style="padding-right: 20px">Service pack</label>
                                        </div>
                                    </div>
                                    <div class="control" style="float: left; width: 225px;">

                                        <input formwidth="50%" id="id_service" maxlength="50" name="service" type="text" value="{{ manpreventivos.service }}">

                                        <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px"> </p>
                                    </div>
                                </fieldset>
                                <fieldset id="fieldset_tipo" class="control-group nomargins" style="min-height:45px; float: left; width: 100%">
                                    <div class="control-label label-text" style="display: table; height: 30px; float: left; text-align: right; width: 160px;">
                                        <div style="display: table-cell; vertical-align: middle; line-height: 11px">
                                            <label for="id_tipo" style="padding-right: 20px">TIPO</label>
                                        </div>
                                    </div>
                                    <div class="control" style="float: left; width: 630px;">

                                        <select formwidth="100%" id="id_tipo" name="tipo" separator="true" tabindex="-1" class="select2-hidden-accessible validate[required]" aria-hidden="true">
                                            <option value="" selected="selected">---------</option>
                                            {% for tipocategoria in grupocategoria %}
                                                <option value="{{ tipocategoria.id }}" {% if manpreventivos.tipoactivo.id == tipocategoria.id  %} selected {% endif %}>{{ tipocategoria }}</option>
                                            {% endfor %}
                                        </select>
                                        <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px"> </p>
                                    </div>
                                </fieldset>


                                <fieldset id="fieldset_custodio" class="control-group nomargins" style="min-height:45px; float: left; width: 100%">
                                    <div class="control-label label-text" style="display: table; height: 30px; float: left; text-align: right; width: 160px;">
                                        <div style="display: table-cell; vertical-align: middle; line-height: 11px">
                                            <label for="id_tipoman" style="padding-right: 20px">TAREAS DE MANTENIMIENTO</label>
                                        </div>
                                    </div>
                                    <div class="listadotiposman" style="float: left; width: 630px;">
                                        {% for tareas in tareasmantenimiento %}
                                            <input class="tiposman" idcodtipo="{{ tareas.id }}" type="checkbox" {% if tareas.id in tareasactivo  %} checked {% endif %}> {{ tareas }} <br>
                                        {% endfor %}
                                        <br>
                                    </div>
                                </fieldset>
                                <fieldset id="fieldset_recibe" class="control-group nomargins" style="min-height:45px; float: left; width: 50%">
                                    <div class="control-label label-text" style="display: table; height: 30px; float: left; text-align: right; width: 160px;">
                                        <div style="display: table-cell; vertical-align: middle; line-height: 11px">
                                            <label for="id_recibe" style="padding-right: 20px">Funciona al recibir equipo</label>
                                        </div>
                                    </div>
                                    <div class="control" style="float: left; width: 225px;">
                                        <input formwidth="50%" id="id_recibe" maxlength="50" name="recibe" type="checkbox" {% if manpreventivos.funcionarecibe  %} checked{% endif %}>
                                        <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px"> </p>
                                    </div>
                                </fieldset>

                                <fieldset id="fieldset_entrega" class="control-group nomargins" style="min-height:45px; float: left; width: 50%">
                                    <div class="control-label label-text" style="display: table; height: 30px; float: left; text-align: right; width: 160px;">
                                        <div style="display: table-cell; vertical-align: middle; line-height: 11px">
                                            <label for="id_entrega" style="padding-right: 20px">Funciona al entregar equipo</label>
                                        </div>
                                    </div>
                                    <div class="control" style="float: left; width: 225px;">

                                        <input formwidth="50%" id="id_entrega" maxlength="50" name="entrega" type="checkbox" {% if manpreventivos.funcionaentrega  %} checked{% endif %}>

                                        <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px"> </p>
                                    </div>
                                </fieldset>

                                <fieldset id="fieldset_observacion" class="control-group nomargins" style="min-height:45px; float: left; width: 100%">
                                    <div class="control-label label-text" style="display: table; height: 30px; float: left; text-align: right; width: 160px;">
                                        <div style="display: table-cell; vertical-align: middle; line-height: 11px">
                                            <label for="id_observacion" style="padding-right: 20px">Observaci√≥n</label>
                                        </div>
                                    </div>
                                    <div class="control" style="float: left; width: 630px;">

                                        <textarea cols="40" id="id_observacion" name="observacion" rows="3">{{ manpreventivos.observaciones }}</textarea>

                                        <p class="help-text" style="font-size: xx-small; margin-bottom: 0; height: 13px; line-height: 13px"> </p>
                                    </div>
                                </fieldset>

                            </div>
                            <div class="row-fluid" style="margin-bottom: 10px">


                            </div>
                            <div class="row-fluid" style="margin-bottom: 0">
                                <div style="text-align: right;">
                                    <a href="javascript:;" class="btn btn-success" id="guardaboton">Guardar</a>
                                    <a href="/af_activofijo?action=mantenimientos" class="btn btn-danger bloqueo_pantalla">Cancelar</a>
                                </div>
                            </div>
                            <div class="row-fluid" style="margin-bottom: 10px">


                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row-fluid">


    </div>

    </div>
{% endblock %}