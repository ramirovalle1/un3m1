{% extends 'base.html' %}
{% load sga_extras %}
{% block atras %}/adm_configuracionpropuesta{% endblock %}
{% block heading %}
    <link href="/static/css/table-responsive.css?1.0.0" type="text/css" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <script type="text/javascript" src="/static/js/jquery.fancybox.pack.js?v=1.0.0"></script>
    <link rel="stylesheet" href="/static/css/jquery.fancybox.css?v=1.0.0" type="text/css" media="screen"/>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script type="text/javascript" src='/static/js/jquery.validationEngine.js?v=1.0.0'></script>
    <script type="text/javascript" src='/static/js/jquery.validationEngine-es.js?v=1.0.0'></script>
    <link type='text/css' rel='stylesheet' href="/static/css/validationEngine.jquery.css?v=1.0.0"/>
    <script type="text/javascript" src="/static/ckeditor/ckeditor-init.js?v=1.0.1"
            data-ckeditor-basepath="/static/ckeditor/ckeditor/" id="ckeditor-init-script"></script>
    <script type="text/javascript" src="/static/ckeditor/ckeditor/ckeditor.js?v=1.0.1"></script>
    <link href="/static/bootstrap5/libs/datepicker/css/bootstrap-datepicker.css" rel="stylesheet">
    <script src="/static/bootstrap5/libs/datepicker/js/bootstrap-datepicker.js"></script>
    <script src="/static/adicionalesjs/formquestion.js?0.24"></script>

    <style>
        table.table thead td {
            text-align: center;
            width: 500px;
            vertical-align: middle;
            color: #1F1F1F;
        }

        table.table tbody td {
            vertical-align: middle;
            color: #1F1F1F;
        }

        .swal2-confirm {
            background-color: var(--bs-warning);
        }

        .rounded-20 {
            border-radius: 20px;
        }

        details > summary:first-of-type {
            list-style: none;
        }

    </style>
    <script>
        $(document).ready(function () {
            // Desmarcar todos los checkboxes con la clase .seleccionindividual
            $('.seleccionindividual').prop('checked', false);
            $('#id_seleccionmasivo').prop('checked', false);
            $(".fancybox").fancybox();
            $(".gallerypdf").fancybox({
                openEffect: 'elastic',
                closeEffect: 'elastic',
                autoSize: true,
                type: 'iframe',
                iframe: {
                    preload: false // fixes issue with iframe and IE
                }
            });
        });

        function formModal(id, text, action, footer = false) {
            bloqueointerface();
            footer && $('#footermodal').show();
            $.ajax({
                type: "GET",
                url: `{{ request.path }}`,
                data: {
                    'action': action,
                    'id': id,
                },
                success: function (data) {
                    $.unblockUI();
                    if (data.result === true || data.result == 'ok') {
                        $('#itemspanel .panelbody').html(data.data);
                        $('#itemspanel .paneltitle').html(text.toUpperCase());
                        $("#itemspanel").modal({
                            backdrop: 'static',
                            width: '90%'
                        }).modal('show').on('hidden.bs.modal', function (e) {
                            $(".panelbody").empty();
                            for (instance in CKEDITOR.instances) {
                                CKEDITOR.instances[instance].destroy();
                            }
                        });
                    } else {
                        mensajeDanger(data.message);
                    }
                },
                error: function () {
                    $.unblockUI();
                    mensajeDanger("Error de conexiÃ³n.");
                },
                dataType: "json"
            });
        }

        const view_propuestas_de_titulacion =(profesor_id)=>{
            let title = ''
             const aData = {
                 action: 'viewpropuestasporprofesor',
                 id: profesor_id
             }

             $.ajax({
                type: "GET",
                url: "{{ request.path }}",
                data: aData,
                success: function (data) {
                    if (data.result === true) {
                        $.unblockUI();
                        $("#itemspanelfull").modal({backdrop: 'static'}).modal('show');
                        $(".modal-title", $("#itemspanelfull")).html(title);
                        $(".modal-body", $("#itemspanelfull")).html(data.data);

                    } else {
                        mensajeDanger(data.mensaje);
                        $.unblockUI();
                    }
                },
                error: function () {
                     $.unblockUI();
                    mensajeDanger(data.mensaje);
                },
                dataType: "json",
            });

        }
    </script>
    {% block extraJSHead %}
    {% endblock %}
{% endblock %}
{% block canvas %}
    <div class="modal fade static" id="itemspanel" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4><i class="fa fa-list"></i> <b class="paneltitle">FORMULARIO MODAL</b></h4>
                    <button type="button" class="close btn-close" data-bs-dismiss="modal" aria-label="Close">

                    </button>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal form-modal" autocomplete="off" method="post"
                          enctype="multipart/form-data" action="{{ request.path }}">
                        {% csrf_token %}
                        <div class="row-fluid panelbody"></div>
                    </form>
                </div>
                <div class="modal-footer" id="footermodal" style="display:none;">
                    <div style="float: right">
                        <button type="button" class="btn btn-default" data-dismiss="modal"><i
                                class="fa fa-window-close"></i> Cerrar
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="itemspanelfull" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-xl modal-fullscreen" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4><i class="fa fa-list"></i> <b class="paneltitlefull"></b></h4>
                    <button type="button" class="close btn-close" data-bs-dismiss="modal" aria-label="Close">

                    </button>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal form-modal" autocomplete="off" method="post"
                          enctype="multipart/form-data" action="{{ request.path }}">
                        {% csrf_token %}
                        <div class="row-fluid panelbodyfull"></div>
                    </form>
                </div>
                <div class="modal-footer" id="footermodal" style="display:none;">
                    <div style="float: right">
                        <button type="button" class="btn btn-default" data-dismiss="modal"><i
                                class="fa fa-window-close"></i> Cerrar
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                {% block contenido %}

                {% endblock %}
            </div>
        </div>

    </div>



{% endblock %}
