<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="UNEMI">
    <meta name="description" content="Sistema de Gestión Academica"/>
    <meta name="keywords" content="Universidad Estatal de Milagro, Unemi, Sga, Sistema Gestión Academica"/>
    <link rel="shortcut icon" type="image/x-icon" href="/static/logos/sgaplus_phone.svg">
    <!-- Carga de la fuente Montserrat Medium desde Google Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500&display=swap">

    {% load static %}
    {% load sga_extras %}
    <title class="capfirst">{% block title %}{{ title }}{% endblock %}</title>
    <!------------BOOTSTRAP5-------->
    <link rel="stylesheet" href="/static/bootstrap5/css/style.css?16.0.7">
    <link rel="stylesheet" href="/static/bootstrap5/css/theme_defult.min.css?v=1.2">
    <link rel="stylesheet" href="/static/bootstrap5/libs/dropzone/dist/dropzone.css">
    <link rel="stylesheet" href="/static/bootstrap5/libs/datatables.net-bs5/css/dataTables.bootstrap5.min.css">
    {#    <link rel="stylesheet" href="/static/bootstrap5/libs/bootstrap-icons/font/bootstrap-icons.css">#}
    {#    <link rel="stylesheet" href="/static/bootstrap5/fonts/feather/feather.css">#}
    {#    <link rel="stylesheet" href="/static/bootstrap5/libs/bootstrap-select/dist/css/bootstrap-select.min.css">#}
    {#    <link rel="stylesheet" href="/static/bootstrap5/libs/tippy.js/dist/tippy.css">#}
    {#    <link rel="stylesheet" href="/static/bootstrap5/libs/@mdi/font/css/materialdesignicons.min.css">#}
    {#    <link rel="stylesheet" href="/static/bootstrap5/libs/magnific-popup/dist/magnific-popup.css">#}
    {#    <link rel="stylesheet" href="/static/bootstrap5/libs/@yaireo/tagify/dist/tagify.css">#}
    <link rel="stylesheet" href="/static/bootstrap5/libs/tiny-slider/dist/tiny-slider.css">
    {#    <link rel="stylesheet" href="/static/bootstrap5/libs/simplebar/dist/simplebar.min.css">#}

    <!------------ SELECT2 --------->
    <link rel="stylesheet" href="/static/utils_servicios/components/select2/select2.css?v=2.46">

    <!------------ THEMA FOREST--------->
    <link rel="stylesheet" href="/static/utils_servicios/components/base/base.css?v=2.52">

    <!------------ CSS PROPIO --------->
    <link rel="stylesheet" href="/static/css/bloques.css?v=2.46">

    <!----- CARGAR VARIABLES A STORANGE ------>
    <script type="text/javascript">
        localStorage.setItem("request_path", '{{ request.path }}');
        localStorage.setItem("tiene_persona", '{{ persona }}');
        localStorage.setItem("tiene_check_session", '{{ check_session }}');
        localStorage.setItem("messages", '{{ messages }}');
    </script>
    <!----- BLOQUE PARA EXTRA CSS ------>
    {% block heading %}{% endblock %}
</head>
<body>
<div class="page">
    {% include 'core/iconos_svg.html' %}
    {% block section_navbar %}
        {% include 'core/navbar.html' %}
    {% endblock %}

    {% block section_top %}{% endblock %}
    {% block section_center %}
        <section class="section-sm bg-transparent py-6">
            <div class="container">
                {% block content %}{% endblock %}
            </div>
        </section>
    {% endblock %}
    {% block section_bootom %}{% endblock %}

    {% block section_footer %}
        <footer class="footer-contacts section footer context-dark bg-800 mt-10">
            {% include 'core/footer.html' %}
        </footer>
    {% endblock %}
</div>

<!-- Preloader-->
<div class="preloader">
    <div class="preloader-inner">
        <svg class="preloader-svg" width="200" height="200" viewbox="0 0 100 100">
            <polyline class="line-cornered stroke-still" points="0,0 100,0 100,100" stroke-width="10"
                      fill="none"></polyline>
            <polyline class="line-cornered stroke-still" points="0,0 0,100 100,100" stroke-width="10"
                      fill="none"></polyline>
            <polyline class="line-cornered stroke-animation" points="0,0 100,0 100,100" stroke-width="10"
                      fill="none"></polyline>
            <polyline class="line-cornered stroke-animation" points="0,0 0,100 100,100" stroke-width="10"
                      fill="none"></polyline>
        </svg>
    </div>
</div>
<!-- <div class="preloader">
{#    <div class="preloader-inner">#}
{#       <center>#}
{#        <img src="/static/images/TIGRILLO_LOAD_3.gif" style=" margin: -110px;width: 575px;height: 350px"/>#}
{#    </center>#}
{#    </div>#}
</div> -->
<!-- Preloader-->

<!-- Modales-->
<div class="modal fade" data-bs-focus="false"  id="generic-modal" tabindex="-1" role="dialog" aria-labelledby="generic-modal"
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable" id="wmodal">
        <div class="modal-content" id="m-content">
            <div class="modal-header py-2 pe-3 border-0 pb-0">
                <h4 class="modal-title">
                    <i class="fas fa-outdent me-1" id="title-icon"></i> <span id="panel-title">FORMULARIO MODAL</span>
                </h4>
                <button type="button" class="btn-close-blue" data-bs-dismiss="modal" aria-label="Close">
                </button>
            </div>
            <div class="modal-body py-2">
                <form class="form-horizontal form-modal" autocomplete="off" method="post" enctype="multipart/form-data"
                      action="{{ request.path }}">
                    {% csrf_token %}
                    <div id="panel-body">
                    </div>
                </form>
            </div>
            <div class="modal-footer" id="panel-footer">
                <button type="button" class="btn btn-cian-secondary fs-5" data-bs-dismiss="modal" id="cerrar"><i
                        class="fas fa-close"></i> Cerrar
                </button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" data-bs-focus="false"  id="modal-flat" tabindex="-1" role="dialog" aria-labelledby="modal-flat"
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable" id="wmodal">
        <div class="modal-content" id="m-content">
            <div class="modal-header p-2 border-0 pb-0">
                <h4 class="modal-title ps-3">
                    {#                    <i class="fas fa-outdent me-1" id="title-icon"></i> <span id="panel-title">FORMULARIO MODAL</span>#}
                </h4>
                <button type="button" class="btn-close-blue" data-bs-dismiss="modal" aria-label="Close">
                </button>
            </div>
            <div class="modal-body pt-0 pb-2">
                <form class="form-horizontal form-modal" autocomplete="off" method="post" enctype="multipart/form-data"
                      action="{{ request.path }}">
                    {% csrf_token %}
                    <div id="panel-body">
                    </div>
                </form>
            </div>
            <div class="modal-footer p-2 border-0" id="panel-footer">
                <button type="button" class="btn btn-default fs-5" data-bs-dismiss="modal" id="cerrar"><i
                        class="fas fa-close"></i> Cerrar
                </button>
            </div>
        </div>
    </div>
</div>
{% block more_content %}{% endblock %}
<!-- Modales-->

<!----------------- JQUERY-------------------->
<script type="text/javascript" src="/static/bootstrap5/libs/jquery/dist/jquery.min.js"></script>
<script type='text/javascript' src="/static/bootstrap5/js/jquery.blockUI.js?v=2.71.0"></script>
<script type="text/javascript" src="/static/bootstrap5/libs/bootstrap/libs/bootstrap.bundle.min.js?12.2"></script>

<!----------------- BOOTSTRAP5 JS -------------->
<script type="text/javascript" src="/static/bootstrap5/libs/dragula/dist/dragula.min.js"></script>
<script type="text/javascript" src="/static/bootstrap5/libs/dropzone/dist/min/dropzone.min.js"></script>
{#<script type="text/javascript" src="/static/bootstrap5/libs/fullcalendar/main.min.js"></script>#}
<script type="text/javascript" src="/static/bootstrap5/libs/flatpickr/dist/flatpickr.min.js"></script>
<script type="text/javascript" src="/static/bootstrap5/libs/inputmask/dist/jquery.inputmask.min.js"></script>
{#<script type="text/javascript" src="/static/bootstrap5/libs/quill/dist/quill.min.js"></script>#}
{#<script type="text/javascript" src="/static/bootstrap5/libs/magnific-popup/dist/jquery.magnific-popup.min.js"></script>#}
<script type="text/javascript" src="/static/bootstrap5/libs/file-upload-with-preview/dist/file-upload-with-preview.min.js"></script>
{#<script type="text/javascript" src="/static/bootstrap5/libs/@yaireo/tagify/dist/tagify.min.js"></script>#}
{#<script type="text/javascript" src="/static/bootstrap5/libs/bs-stepper/dist/js/bs-stepper.min.js"></script>#}
<script type="text/javascript" src="/static/bootstrap5/libs/tiny-slider/dist/min/tiny-slider.js"></script>
<script type="text/javascript" src="/static/bootstrap5/libs/@popperjs/core/dist/umd/popper.min.js"></script>
{#<script type="text/javascript" src="/static/bootstrap5/libs/tippy.js/dist/tippy-bundle.umd.min.js"></script>#}
{#<script type="text/javascript" src="/static/bootstrap5/libs/simplebar/dist/simplebar.min.js"></script>#}

<!----- DATATABLE JS ------>
{#<script src="/static/bootstrap5/libs/datatables.net/js/jquery.dataTables.min.js"></script>#}
{#<script src="/static/bootstrap5/libs/datatables.net-bs5/js/dataTables.bootstrap5.min.js"></script>#}
{#<script src="/static/bootstrap5/libs/datatables.net-responsive/js/dataTables.responsive.min.js"></script>#}
{#<script src="/static/bootstrap5/libs/datatables.net-responsive-bs5/js/responsive.bootstrap5.min.js"></script>#}
{#<script src="https://cdn.datatables.net/buttons/1.7.1/js/dataTables.buttons.min.js"></script>#}

<!-- DATATABLE ANTIGUO -->
<link rel="stylesheet" href="/static/datatables/datatables.css?v={{ version_static|default_if_none:'0.1' }}">
<script src="/static/datatables/datatables.js?v={{ version_static|default_if_none:'0.1' }}"></script>
<link rel="stylesheet" href="/static/datatables/responsive.bootstrap.min.css?v={{ version_static|default_if_none:'0.1' }}">
<script src="/static/datatables/dataTables.responsive.min.js?v={{ version_static|default_if_none:'0.1' }}"></script>
<script src="/static/datatables/responsive.bootstrap.min.js?v={{ version_static|default_if_none:'0.1' }}"></script>
<link rel="stylesheet" href="/static/datatables/dataTables.bootstrap.min.css?v={{ version_static|default_if_none:'0.1' }}">
<link rel="stylesheet" href="/static/datatables/buttons.bootstrap.min.css?v={{ version_static|default_if_none:'0.1' }}">
<link rel="stylesheet" href="/static/datatables/bootstrap-toggle.min.css?v={{ version_static|default_if_none:'0.1' }}">
<script src="/static/datatables/dataTables.buttons.min.js?v={{ version_static|default_if_none:'0.1' }}"></script>


<!----- SELECT2 JS ------>
<script type="text/javascript" src="/static/utils_servicios/components/select2/select2.min.js?v=2.46"></script>

<!----- THEME FOREST ------>
<script src="/static/utils_servicios/components/base/core.min.js?v=1.2"></script>
<script src="/static/utils_servicios/components/base/script.js?v=1.2"></script>

<!----- TEMA PRINCIPAL ------>
<script type="text/javascript" src="/static/bootstrap5/js/theme.min.js?v1.1"></script>

<!----- INICIALIZACIÓN dDE JQUERY Y CRFTOKEN ------>
<script type="text/javascript" src="/static/utils_servicios/js/jQueryInit.js?v1.0"></script>

<!----- FUNCIONES REUTILIZABLES JS ------>
<script type="text/javascript" src="/static/bootstrap5/js/utils.js?v1.3"></script>

<!----- ALERTAS GENERICAS ------>
<div class="modal fade" id="alert-modal" tabindex="-1" role="dialog" aria-labelledby="alertModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">

            <div class="modal-header" style="border-bottom: none;">
                <h5 class="modal-title" id="alertModalLabel"></h5>
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" id="alertModalBody">
                <!-- Imagen centrada en la parte superior -->
                <img src="/static/logos/gestionvinculacion/icono-mensaje.png"  class="img-fluid mx-auto d-block" style="max-width: 85px;">
                <!-- Aquí irá el mensaje de la alerta -->
                <h2 class="text-center">¡Gracias por confiar en nuestros servicios!</h2>
                <p class="text-center">Su solicitud de cita se ha completado con éxito. Uno de nuestros responsable se pondrá en contacto con usted lo más pronto posible.</p>
                <p class="text-center">Le recordamos que podrá cancelar su cita con 48 horas de anticipación.</p>
                {#                contactándose al teléfono: <strong>0517826547</strong>#}
            </div>
            <div class="modal-footer d-flex justify-content-center">
                <button type="button" id="accept-modal-btn" class="btn btn-orange-1 px-6 fs-5  mt-1" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<!----- CONTROL MODAL JS ------>
<script type="text/javascript">
    $(function () {
        {% if messages %}
            {% for message in messages %}
                console.log(`{{ message }}`)
                Swal.fire({
                    toast: true,
                    position: 'top-end',
                    type: '{% if message.tags %}{{ message.tags }}{% endif %}',
                    title: `{{ message }}`,
                    showConfirmButton: false,
                    timer: 8000
                })
                var swal2Content = document.querySelector('.swal2-content');
                swal2Content.remove();
            {% endfor %}
        {% endif %}
        {% if next == 'login' %}
            formModalFlat('{{ request.path }}, {{ url_entrada }}','Iniciar sesión', 'login', 'modal-md',true, 'control_acceso')
        {% endif %}
    })

    function formModal(id, titulo, action, dimension = "modal-lg", args, footer = true, icon = 'fa-outdent', url=`{{ request.path }}`) {
        bloqueointerface()
        let footer_obj = $('#generic-modal #panel-footer')
        $.ajax({
            type: "GET",
            url: url,
            data: {
                'action': action,
                'id': id,
                'args': args,
                'tiposistema': '{{ tiposistema }}',
                'nombresistema': '{{ nombresistema }}',
            },
            success: function (data) {
                $.unblockUI();
                footer ? footer_obj.hide() : footer_obj.show();
                $('#generic-modal #title-icon').removeClass('fa-outdent').addClass(icon)
                $('#generic-modal #wmodal').removeClass('modal-lg modal-md modal-xl modal-fullscreen modal-sm').addClass(dimension)
                if (data.result === true) {
                    $('#generic-modal #panel-body').html(data.data);
                    $('#generic-modal #panel-title').html(titulo.charAt(0).toUpperCase() + titulo.slice(1).toLowerCase());
                    $("#generic-modal").modal({backdrop: 'static'}).modal('show');
                } else if (data.url_redirect){
                    location.replace(data.url_redirect)
                } else {
                    mensajeDanger('Conflicto en la acción', data.mensaje);
                }
            },
            error: function () {
                $.unblockUI();
                mensajeDanger("Error de conexión.");
            },
            dataType: "json"
        });
    }


    function formModalFlat(args, titulo, action, dimension = "modal-lg", footer = true, url=`{{ request.path }}`) {
        bloqueointerface()
        let footer_obj = $('#modal-flat #panel-footer')
        $.ajax({
            type: "GET",
            url: url,
            data: {
                'action': action,
                'args': args,
                'tiposistema': '{{ tiposistema }}',
                'nombresistema': '{{ nombresistema }}',
            },
            success: function (data) {
                $.unblockUI();
                footer ? footer_obj.hide() : footer_obj.show();
                {#$('#modal-flat #title-icon').removeClass('fa-outdent').addClass(icon)#}
                $('#modal-flat #wmodal').removeClass('modal-lg modal-md modal-xl modal-fullscreen modal-sm').addClass(dimension)
                if (data.result === true) {
                    $('#modal-flat #panel-body').html(data.data);
                    $('#modal-flat #panel-title').html(titulo.charAt(0).toUpperCase() + titulo.slice(1).toLowerCase());
                    $("#modal-flat").modal({backdrop: 'static'}).modal('show');
                } else if (data.url_redirect){
                    location.replace(data.url_redirect)
                } else {
                    mensajeDanger('Conflicto en la acción', data.mensaje);
                }
            },
            error: function () {
                $.unblockUI();
                mensajeDanger("Error de conexión.");
            },
            dataType: "json"
        });
    }

    function showAlertModal() {
        var alertModal = new bootstrap.Modal(document.getElementById('alert-modal'), {
            backdrop: 'static', // Opcional: para que el modal no se cierre al hacer clic fuera de él
            keyboard: false     // Opcional: para que el modal no se cierre con la tecla ESC
        });
        alertModal.show();
    }

    function eliminarajax(pk, nombre, accion, url = '{{ request.path }}', titulo = 'Estás por eliminar este registro:') {
        Swal.fire({
            html: `<b>${titulo}</b><p>${nombre}</p>`,
            text: "Esta acción es irreversible",
            type: 'warning',
            showCancelButton: true,
            allowOutsideClick: false,
            confirmButtonText: 'Si, deseo hacerlo',
            cancelButtonText: 'Cancelar'
        }).then((result) => {
            if (result.value) {
                $.ajax({
                    type: 'POST',
                    url: '{{ reques.path }}',
                    async: false,
                    data: {
                        csrfmiddlewaretoken: '{{ csrf_token }}',
                        action: accion,
                        id: pk,
                    },
                    dataType: "json",
                    beforeSend: function () {
                        bloqueointerface();
                    }
                }).done(function (data) {
                    setTimeout($.unblockUI, 1);
                    if (data.result === true) {
                        location.reload();
                    } else {
                        alertaDanger(data.mensaje)
                    }
                }).fail(function (jqXHR, textStatus, errorThrown) {
                    setTimeout($.unblockUI, 1);
                    alertaDanger('Error en el servidor', 10000)
                }).always(function () {
                });
            } else {
            }
        })
    }
</script>

<!----- ENVIO DE FORMULARIOS VIA AJAX------>
<script src="/static/adicionalesjs/formquestionb4.js?1.24"></script>

<!----- CONTENEDOR PARA JS EXTRA ------>
{% block content_js %}{% endblock %}
</body>
</html>



