{% extends "basebs.html" %}
{% load humanize %}
{% load sga_extras %}
{% block heading %}
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
        google.load("visualization", "1", {packages:["corechart", 'bar']});
        google.setOnLoadCallback(drawChart);

        function drawChart() {
            {##}
            {#var data1 = google.visualization.arrayToDataTable([#}
            {#    ['SOLICITUDES', ' TIPO_BECA'],#}
            {#    {% for becatipo in becastipossolicitudes %}#}
            {#         {% with cantidad_ajudicadas_solicitudes=becatipo|args:periodo|args:'s'|call:'get_cantidad_adjudicados' %}#}
            {#            ['{{ becatipo.nombre }}', {{ cantidad_ajudicadas_solicitudes }}]{% if not forloop.last %},{% endif %}#}
            {#        {% endwith %}#}
            {#    {% endfor %}#}
            {#]);#}
            {##}
            {#var options1 = {#}
            {#    title: 'SOLICITUDES BECAS',#}
            {#    is3D: true,#}
            {#    legend: {position: 'bottom'}#}
            {#};#}
            {##}
            {#var chart1 = new google.visualization.PieChart(document.getElementById('chart_div1'));#}
            {#chart1.draw(data1, options1);#}
            {##}
            {#var data2 = google.visualization.arrayToDataTable([#}
            {#    ['ASIGNADOS', ' TIPO_BECA'],#}
            {#    {% for becatipo in becastiposasignaciones %}#}
            {#         {% with cantidad_ajudicadas_asignados=becatipo|args:periodo|args:'a'|call:'get_cantidad_adjudicados' %}#}
            {#            ['{{ becatipo.nombre }}', {{ cantidad_ajudicadas_asignados }}]{% if not forloop.last %},{% endif %}#}
            {#        {% endwith %}#}
            {#    {% endfor %}#}
            {#]);#}
            {##}
            {#var options2 = {#}
            {#    title: 'ASIGNADOS BECAS',#}
            {#    is3D: true,#}
            {#    legend: {position: 'bottom'}#}
            {#};#}
            {#var chart2 = new google.visualization.PieChart(document.getElementById('chart_div2'));#}
            {#chart2.draw(data2, options2);#}

            var data3 = google.visualization.arrayToDataTable([
                ['PENDIENTES', ' TIPO BECA'],
                {% for becatipo in becastiposasignaciones %}
                     {% with cantidad_ajudicadas_asignados=becatipo|args:periodo|args:1|call:'get_cantidad_estadoaceptado_solicitud_adjudicados' %}
                        ['{{ becatipo.nombre }}', {{ cantidad_ajudicadas_asignados }}]{% if not forloop.last %},{% endif %}
                    {% endwith %}
                {% endfor %}
            ]);


            var options3 = {
                title: 'ESTADO PENDIENTE',
                is3D: true,
                legend: {position: 'bottom'}
            };
            var chart3 = new google.visualization.PieChart(document.getElementById('chart_div3'));
            chart3.draw(data3, options3);

            var data4 = google.visualization.arrayToDataTable([
                ['ACEPTADA', ' TIPO BECA'],
                {% for becatipo in becastiposasignaciones %}
                     {% with cantidad_ajudicadas_asignados=becatipo|args:periodo|args:2|call:'get_cantidad_estadoaceptado_solicitud_adjudicados' %}
                        ['{{ becatipo.nombre }}', {{ cantidad_ajudicadas_asignados }}]{% if not forloop.last %},{% endif %}
                    {% endwith %}
                {% endfor %}
            ]);


            var options4 = {
                title: 'ESTADO ACEPTADA',
                is3D: true,
                legend: {position: 'bottom'}
            };
            var chart4 = new google.visualization.PieChart(document.getElementById('chart_div4'));
            chart4.draw(data4, options4);

            var data5 = google.visualization.arrayToDataTable([
                ['ACEPTADA', ' TIPO BECA'],
                {% for becatipo in becastiposasignaciones %}
                     {% with cantidad_ajudicadas_asignados=becatipo|args:periodo|args:3|call:'get_cantidad_estadoaceptado_solicitud_adjudicados' %}
                        ['{{ becatipo.nombre }}', {{ cantidad_ajudicadas_asignados }}]{% if not forloop.last %},{% endif %}
                    {% endwith %}
                {% endfor %}
            ]);


            var options5 = {
                title: 'ESTADO RECHAZADO',
                is3D: true,
                legend: {position: 'bottom'}
            };
            var chart5 = new google.visualization.PieChart(document.getElementById('chart_div5'));
            chart5.draw(data5, options5);

            var data6 = google.visualization.arrayToDataTable([
                ['PENDIENTES', ' TIPO BECA'],
                {% for becatipo in becastiposasignaciones %}
                     {% with cantidad_ajudicadas_asignados=becatipo|args:periodo|args:1|call:'get_cantidad_becaasignada_solicitud_adjudicados' %}
                        ['{{ becatipo.nombre }}', {{ cantidad_ajudicadas_asignados }}]{% if not forloop.last %},{% endif %}
                    {% endwith %}
                {% endfor %}
            ]);


            var options6 = {
                title: 'ESTADO PENDIENTE',
                is3D: true,
                legend: {position: 'bottom'}
            };
            var chart6 = new google.visualization.PieChart(document.getElementById('chart_div6'));
            chart6.draw(data6, options6);

            var data7 = google.visualization.arrayToDataTable([
                ['ACEPTADA', ' TIPO BECA'],
                {% for becatipo in becastiposasignaciones %}
                     {% with cantidad_ajudicadas_asignados=becatipo|args:periodo|args:2|call:'get_cantidad_becaasignada_solicitud_adjudicados' %}
                        ['{{ becatipo.nombre }}', {{ cantidad_ajudicadas_asignados }}]{% if not forloop.last %},{% endif %}
                    {% endwith %}
                {% endfor %}
            ]);


            var options7 = {
                title: 'ESTADO ACEPTADA',
                is3D: true,
                legend: {position: 'bottom'}
            };
            var chart7 = new google.visualization.PieChart(document.getElementById('chart_div7'));
            chart7.draw(data7, options7);

            var data8 = google.visualization.arrayToDataTable([
                ['ACEPTADA', ' TIPO BECA'],
                {% for becatipo in becastiposasignaciones %}
                     {% with cantidad_ajudicadas_asignados=becatipo|args:periodo|args:3|call:'get_cantidad_becaasignada_solicitud_adjudicados' %}
                        ['{{ becatipo.nombre }}', {{ cantidad_ajudicadas_asignados }}]{% if not forloop.last %},{% endif %}
                    {% endwith %}
                {% endfor %}
            ]);


            var options8 = {
                title: 'ESTADO RECHAZADO',
                is3D: true,
                legend: {position: 'bottom'}
            };
            var chart8 = new google.visualization.PieChart(document.getElementById('chart_div8'));
            chart8.draw(data8, options8);








            /*var data8 = google.visualization.arrayToDataTable([
                            {# ['TIPO BECA',{% for key, becaestado in becasestadosaceptados%} '{{ becaestado }}'{% if not forloop.last %},{% endif %} {% endfor %}],#}
                            {# {% for  becatipo in becastipossolicitudes %}#}
                            {#    ['{{ becatipo.id }}',{% for key, becaestado in becasestadosaceptados%}{% with cantidad_estados_ajudicadas=becatipo|args:periodo|args:key|call:'get_cantidad_estadoaceptado_solicitud_adjudicados'%}{{ cantidad_estados_ajudicadas }}{% if not forloop.last %},{% endif %}{% endwith %}{% endfor %}]{% if not forloop.last %},{% endif %}#}
                            {#{% endfor %}#}
                            {#]);#}

            var options8 = {
              chart: {
                title: 'ADJUDICADOS DE BECAS SEGÚN TIPO DE BECAS Y ESTADO DE ACEPTADOS',
                //subtitle: 'Sales, Expenses, and Profit: 2014-2017',
                is3D: true,
                legend: {position: 'bottom'}
              },
              colors: ['#f4b400', '#1b9e77','#d95f02']
            };

            var chart8 = new google.charts.Bar(document.getElementById('chart_div8'));

            chart8.draw(data8, google.charts.Bar.convertOptions(options8));

            var data9 = google.visualization.arrayToDataTable([
                 ['TIPO BECA',{% for key, becaestado in becasestadosasignadas%} '{{ becaestado }}'{% if not forloop.last %},{% endif %} {% endfor %}],
                 {% for  becatipo in becastipossolicitudes %}
                    ['{{ becatipo.id }}',{% for key, becaestado in becasestadosaceptados%}{% with cantidad_estados_ajudicadas=becatipo|args:periodo|args:key|call:'get_cantidad_becaasignada_solicitud_adjudicados'%}{{ cantidad_estados_ajudicadas }}{% if not forloop.last %},{% endif %}{% endwith %}{% endfor %}]{% if not forloop.last %},{% endif %}
                {% endfor %}
                ]);

            var options9 = {
              chart: {
                title: 'ADJUDICADOS DE BECAS SEGÚN TIPO DE BECAS Y ESTADO DE ASIGNACIÓN',
                //subtitle: 'Sales, Expenses, and Profit: 2014-2017',
                is3D: true,
                legend: {position: 'bottom'}
              },
              colors: ['#f4b400', '#1b9e77','#d95f02']
            };
            var chart9 = new google.charts.Bar(document.getElementById('chart_div9'));

            chart9.draw(data9, google.charts.Bar.convertOptions(options9));*/
        }

        $.extend(true, $.fn.dataTable.defaults, {
            oLanguage: {
                sSearch: "<span>Filtro:</span> _INPUT_",
                sLengthMenu: "<span>Mostrar Entradas:</span> _MENU_",
                sZeroRecords: "No se encontraron resultados",
                sProcessing: "Procesando...",
                sEmptyTable: "Ningún dato disponible para visualizar",
                sInfo: "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
                sInfoEmpty: "Mostrando registros del 0 al 0 de un total de 0 registros",
                sLoadingRecords: "Cargando...",
                oPaginate: {
                    sFirst: "<i title='Inicio' class='fa fa-step-backward'></i>",
                    sLast: "<i title='Último' class='fa fa-step-forward'></i>",
                    sNext: "<i title='Siguiente' class='fa fa-fast-forward'></i>",
                    sPrevious: "<i title='Anterior' class='fa fa-fast-backward'></i>"
                },
            }
        });
        var uiModalRecorrido = {
            init: function () {
                var self = this;
                self.$modalForm = $('#modalRecorrido');
                $('.action-close', self.$modalForm).click(function(){
                    self.close();
                });
            },
            close: function (){
                var self = this;
                self.$modalForm.modal('hide');
            },
            open: function(id=0, nombre=''){
                var self = this;
                bloqueointerface();
                $.ajax({
                        type: "POST",
                        url: "{{ request.path }}",
                        data: {'action': 'loadRecorrido',
                                'id': id,
                                },
                        success: function(data) {
                            if (data.result=='ok')
                            {
                                $(".modal-body", self.$modalForm).html(data.html);
                                $(".paneltitle", self.$modalForm).html(`RECORRIDO DE BECA`);
                                self.$modalForm.modal({backdrop:'static', width: '75%'}).modal('show');
                                $.unblockUI();
                            }
                            else
                            {
                                $.unblockUI();
                                NotificationJG.error(data.mensaje);
                            }

                        },
                        error: function() {
                            $.unblockUI();
                            NotificationJG.error("Error de conexión");

                        },
                        dataType: "json"
                    });
            },
        };
        var ControllerRequests = {
            init: function (modalForm ,eData){
                var self = this;
                self.$modalForm = modalForm;
                self.$eData = eData;
                self.$table = $('.datatable table', self.$modalForm);

                $(".action-add").click(function (){
                    uiModal.open('new', 0);
                });


                self.loadDataTable();
                 $("#action_min").click(function(){
                    $("#panel_filter .panel-body").hide();
                    $("#action_min").hide();
                    $("#action_max").show();
                });
                $("#action_max").click(function(){
                    $("#panel_filter .panel-body").show();
                    $("#action_min").show();
                    $("#action_max").hide();
                });

                $("#action_min").trigger("click");

            },
            loadDataTable: function(){
                var self = this;
                self.$table.dataTable({
                    responsive: true,
                    searchDelay: 1000,
                    bJQueryUI: false,
                    bAutoWidth: false,
                    //bProcessing: true,
                    bServerSide: true,
                    bSort: false,
                    sPaginationType: "full_numbers",
                    iDisplayLength: 25,
                    sDom: '<"datatable-header"fl><"datatable-scroll"tr><"datatable-footer"ip>',
                    sAjaxSource: "{{request.path}}",
                    sServerMethod: "POST",
                    fnServerParams: function (aoData)
                    {
                        bloqueointerface();
                        aoData.push(
                            {"name": "action", "value": 'loadDataTableAdjudicadosTipoBeca'},
                        );
                        for (const name  in self.$eData) {
                            aoData.push({"name": name, "value": self.$eData[name]})
                        }
                    },
                    aoColumnDefs:
                        [
                            {
                                aTargets: [5],
                                width: "20%",
                                mRender: function (data, type, row)
                                {
                                    return data ;
                                },
                                fnCreatedCell: function(nTd, sData, oData, iRow, iCol)
                                {
                                    if(sData != 'NULL') {
                                        $(nTd).css('text-align', 'center')
                                        $(nTd).css('vertical-align', 'middle')
                                        $(nTd).css('padding', '8px')
                                    }
                                }
                            },
                        ]
                    ,
                    fnDrawCallback: function (oSettingst, oData) {
                        var count = 0;
                        $.unblockUI();
                        $('.paneltitle',self.$modalForm).html(self.$eData.title);

                        console.log($('#el-templates [element="table-row-actions"] .table-controls',  self.$modalForm))
                        $('.dt-col-option', self.$modalForm).each(function(){
                            var id = $(this).val();
                            var nombre = $('.dt-col-data-name',  self.$modalForm).eq(count).val();
                            var $html = $('.table-controls',  self.$modalForm).eq(count);
                            $('.dt-action-view-route', $html).click(function(){
                                console.log('Funcion')
                                uiModalRecorrido.open(id, nombre);
                            })
                            count ++;
                            //$(this).after( $html );
                        });
                        self.$modalForm.modal({backdrop:'static', width: '90%', keyboard: false}).modal('show');
                    },

                });
                $("#dtViewGroups_filter input").unbind(); // 'x' es el nombre de tu tabla
                $('#dtViewGroups_filter input').bind('keyup', function (e) {
                    if (e.keyCode == 13) {
                        self.$table.dataTable().fnFilter(this.value);
                    }
                });
            },
            destroy:function (){
                var self = this;
                self.$table.fnDestroy();
            }
        };
        var uiModal = {
            init: function () {
                var self = this;
                self.$controlTable = ControllerRequests;
                self.$modalForm = $('#modalMatriculaTipo');
                $('.action-close', self.$modalForm).click(function(){
                    self.close();
                });
            },
            close: function (){
                var self = this;
                self.$controlTable.destroy();
                self.$modalForm.modal('hide');
            },
            open: function(eData={}){
                var self = this;
                self.$controlTable.init(self.$modalForm,eData);
            },
        };

        $(function () {
           uiModalRecorrido.init();
           uiModal.init();
           $('.btn-detalle-tipobeca').click(function () {
               let eData = $(this).data('json');
               uiModal.open(eData);
           });
        });
    </script>
{% endblock %}
{% block atras %}/estadisticas{% endblock %}
{% block canvas %}
{#    <div class='row-fluid'>#}
{#        <div class="span3">#}
{#            <div id="chart_div1" style="width: 100%; height: 300px"></div>#}
{#        </div>#}
{#        <div class="span3">#}
{#            <div id="chart_div2" style="width: 100%; height: 300px"></div>#}
{#        </div>#}
{#        <div class="span6">#}
{#            <table class='table table-bordered table-condensed'>#}
{#                <thead>#}
{#                <tr>#}
{#                    <th colspan="7" style="text-align: center;">ADJUDICADOS DE BECAS SEGÚN TIPO DE BECAS</th>#}
{#                </tr>#}
{#                <tr>#}
{#                    <th style='text-align: left; padding-left: 20px; vertical-align: middle'>TIPO BECA</th>#}
{#                    <th style='text-align: left; padding-left: 20px; vertical-align: middle'>SOLICITUDES</th>#}
{#                    <th style='text-align: left; padding-left: 20px; vertical-align: middle'>ASIGNADAS</th>#}
{#                </tr>#}
{#                </thead>#}
{#                <tbody>#}
{#                {% for becatipo in becastipossolicitudes %}#}
{#                    <tr>#}
{#                        {% with cantidad_ajudicadas_solicitudes=becatipo|args:periodo|args:'s'|call:'get_cantidad_adjudicados' cantidad_ajudicadas_asignadas=becatipo|args:periodo|args:'a'|call:'get_cantidad_adjudicados'%}#}
{#                            <td>{{ becatipo.nombre }}</td>#}
{#                            <td style='text-align: center;'>{{ cantidad_ajudicadas_solicitudes }}#}
{#                                <a href="javascript:;" class="btn btn-info btn-mini btn-detalle-tipobeca" data-json='{"title":"ESTUDIANTES IRREGULARES", "becatipo_id":{{ becatipo.id }}}' becatipo_id={{ becatipo.id }}>#}
{#                                    <i class="fa fa-adjust"></i>#}
{#                                </a>#}
{#                            </td>#}
{#                            <td style='text-align: center;'>{{ cantidad_ajudicadas_asignadas }}#}
{#                                {% if cantidad_ajudicadas_asignadas > 0 %}#}
{#                                    <a href="javascript:;" class="btn btn-info btn-mini btn-detalle-tipobeca" becatipo_id={{ becatipo.id }}>#}
{#                                        <i class="fa fa-adjust"></i>#}
{#                                    </a>#}
{#                                {% endif %}#}
{#                            </td>#}
{#                        {% endwith %}#}
{#                    </tr>#}
{#                {% endfor %}#}
{#                </tbody>#}
{#                <tfoot>#}
{#                    <tr style="font-weight: bold">#}
{#                        <td>TOTALES</td>#}
{#                        <td>{{ total_becassolicitudes }}</td>#}
{#                        <td style='text-align: center;'>{{ total_becasasignaciones }}</td>#}
{#                    </tr>#}
{#                </tfoot>#}
{#            </table>#}
{#        </div>#}
{#    </div>#}
    <div class="row-fluid">
        <ul class="nav nav-tabs">
            <li class="active">
                <a class="tabs " href="#aceptacion1" data-toggle="tab">
                    <img src="/static/images/16/chart_bar.png" width="15px"> Gráficas
                </a>
            </li>
            <li class="">
                <a class="tabs " href="#aceptacion2" data-toggle="tab">
                    <img src="/static/images/iconosmini/planpractica.png" width="15px"> Resumen
                </a>
            </li>

        </ul>
        <div class="tab-content">
            <div class="tab-pane active" id="aceptacion1">
                <div class="row-fluid">
                    <div class="span12">
                        <h5>ADJUDICADOS DE BECAS SEGÚN TIPO DE BECAS Y ESTADO DE ACEPTACIÓN</h5>
                    </div>
                </div>
                <div class="row-fluid">
                    <div class="span4">
                        <div id="chart_div3" style="width: 100%; height: 300px"></div>
                    </div>
                    <div class="span4">
                        <div id="chart_div4" style="width: 100%; height: 300px"></div>
                    </div>
                    <div class="span4">
                         <div id="chart_div5" style="width: 100%; height: 300px"></div>
                    </div>
                </div>
            </div>
            <div class="tab-pane" id="aceptacion2">
                <div class="row-fluid">
                    <div class="span12">
                        <table class='table table-bordered table-condensed'>
                            <thead>
                            <tr>
                                <th colspan="6" style="text-align: center;">ADJUDICADOS DE BECAS SEGÚN TIPO DE BECAS Y ESTADO DE ACEPTACIÓN</th>
                            </tr>
                            <tr>
                                <th style='text-align: left; padding-left: 20px; vertical-align: middle'>TIPO BECA/ESTADO ACEPTADO</th>
                                {% for key, becaestado in becasestadosaceptados  %}
                                <th style='text-align: left; padding-left: 20px; vertical-align: middle'>{{ becaestado }}</th>
                                {% endfor %}
                            </tr>
                            </thead>
                            <tbody>
                            {% for  becatipo in becastipossolicitudes %}
                                <tr>
                                    <td><span class="label label-info"> {{ becatipo.id }}</span>{{ becatipo.nombre }}</td>
                                    {% for key, becaestado in becasestadosaceptados%}
                                        {% with cantidad_estados_ajudicadas=becatipo|args:periodo|args:key|call:'get_cantidad_estadoaceptado_solicitud_adjudicados'%}
                                            <td>
                                                {{ cantidad_estados_ajudicadas }}
                                                {% if cantidad_estados_ajudicadas > 0 %}
                                                    <a href="javascript:;" class="btn btn-info btn-mini btn-detalle-tipobeca" data-json='{"title":"ESTUDIANTES CON BECAS ACEPTADAS CON TIPO {{ becatipo.nombre }}", "becatipo_id":{{ becatipo.id }}, "becaaceptada_id":{{ key }}}'>
                                                        <i class="fa fa-adjust"></i>
                                                    </a>
                                                {% endif %}
                                            </td>
                                        {% endwith %}
                                    {% endfor %}
                                </tr>
                            {% endfor %}
                            </tbody>
                            <tfoot>
                                <tr style="font-weight: bold">
                                    <td>TOTALES</td>
                                    {% for total in totalesbecasestadosaceptados  %}
                                        <th style='text-align: left; padding-left: 20px; vertical-align: middle'>{{ total }}</th>
                                    {% endfor %}
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row-fluid">
        <ul class="nav nav-tabs">
            <li class="active">
                <a class="tabs " href="#asignacion1" data-toggle="tab">
                    <img src="/static/images/16/chart_bar.png" width="15px"> Gráficas
                </a>
            </li>
            <li class="">
                <a class="tabs " href="#asignacion2" data-toggle="tab">
                    <img src="/static/images/iconosmini/planpractica.png" width="15px"> Resumen
                </a>
            </li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane active" id="asignacion1">
                <div class="row-fluid">
                    <div class="span12">
                        <h5>ADJUDICADOS DE BECAS SEGÚN TIPO DE BECAS Y ESTADO DE ASIGNACIÓN</h5>
                    </div>
                </div>
                <div class="row-fluid">
                    <div class="span4">
                        <div id="chart_div6" style="width: 100%; height: 300px"></div>
                    </div>
                    <div class="span4">
                        <div id="chart_div7" style="width: 100%; height: 300px"></div>
                    </div>
                    <div class="span4">
                         <div id="chart_div8" style="width: 100%; height: 300px"></div>
                    </div>
                </div>
            </div>
            <div class="tab-pane" id="asignacion2">
                <div class="row-fluid">
                    <div class="span12">
                        <table class='table table-bordered table-condensed'>
                            <thead>
                            <tr>
                                <th colspan="6" style="text-align: center;">ADJUDICADOS DE BECAS SEGÚN TIPO DE BECAS Y ESTADO DE ASIGNACIÓN</th>
                            </tr>
                            <tr>
                                <th style='text-align: left; padding-left: 20px; vertical-align: middle'>TIPO BECA/ESTADO ASIGNADO</th>
                                {% for key, becaestado in becasestadosasignadas %}
                                <th style='text-align: left; padding-left: 20px; vertical-align: middle'>{{ becaestado }}</th>
                                {% endfor %}
                            </tr>
                            </thead>
                            <tbody>
                            {% for becatipo in becastipossolicitudes %}
                                <tr>
                                    <td><span class="label label-info"> {{ becatipo.id }}</span> {{ becatipo.nombre }}</td>
                                    {% for key, becaestado  in becasestadosasignadas %}
                                        {% with cantidad_estados_ajudicadas=becatipo|args:periodo|args:key|call:'get_cantidad_becaasignada_solicitud_adjudicados'%}
                                            <td>
                                                {{ cantidad_estados_ajudicadas }}
                                                {% if cantidad_estados_ajudicadas > 0 %}
                                                    <a href="javascript:;" class="btn btn-info btn-mini btn-detalle-tipobeca" data-json='{"title":"ESTUDIANTES CON BECAS ASIGNADAS CON TIPO {{ becatipo.nombre }}", "becatipo_id":{{ becatipo.id }}, "becaasignada_id":{{ key }}}'>
                                                        <i class="fa fa-adjust"></i>
                                                    </a>
                                                {% endif %}
                                            </td>
                                        {% endwith %}
                                    {% endfor %}
                                </tr>
                            {% endfor %}
                            </tbody>
                            <tfoot>
                                <tr style="font-weight: bold">
                                    <td>TOTALES</td>
                                    {% for total in totalesbecasestadosasignadas  %}
                                        <th style='text-align: left; padding-left: 20px; vertical-align: middle'>{{ total }}</th>
                                    {% endfor %}
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row-fluid">
        <div class="span12">
            <table class='table table-bordered table-condensed'>
                <thead>
                <tr>
                    <th colspan="32" style="text-align: center;">ADJUDICADOS DE BECAS SEGÚN TIPO DE BECAS Y ESTADO DE ACEPTACIÓN</th>
                </tr>
                <tr>
                    <th style='text-align: left; padding-left: 20px; vertical-align: middle'>TIPO BECA/ESTADO </th>
                    {% for key, becaestado in becasestados %}
                    <th style='writing-mode: vertical-rl;text-orientation: upright; text-align: left;vertical-align: middle'>{{ becaestado }}</th>
                    {% endfor %}
                </tr>
                </thead>
                <tbody>
                {% for becatipo in becastipossolicitudes  %}
                    <tr>
                        <td>{{ becatipo }}</td>
                        {% for  key, becaestado in becasestados %}
                            {% with cantidad_estados_ajudicadas=becatipo|args:periodo|args:key|call:'get_cantidad_estados_solicitud_adjudicados'%}
                                <td>
                                    {{ cantidad_estados_ajudicadas }}
                                    {% if cantidad_estados_ajudicadas > 0 %}
                                        <a href="javascript:;" class="btn btn-info btn-mini btn-detalle-tipobeca" data-json='{"title":"ESTUDIANTES CON BECAS ESTADO  CON TIPO {{ becatipo.nombre }}", "becatipo_id":{{ becatipo.id }}, "estado_id":{{ key }}, "control_acciones":true}'>
                                            <i class="fa fa-adjust"></i>
                                        </a>
                                    {% endif %}
                                </td>
                            {% endwith %}
                        {% endfor %}
                    </tr>
                {% endfor %}
                </tbody>
                <tfoot>
                    <tr style="font-weight: bold">
                        <td>TOTALES</td>
                        {% for total in totalesbecasestados  %}
                            <th style='text-align: left; padding-left: 20px; vertical-align: middle'>{{ total }}</th>
                        {% endfor %}
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>

    <div class="row-fluid">
        <div class="span12">
            <div id="chart_div9" style="width: 100%; height: 300px"></div>
        </div>
    </div>
    <div class="row-fluid">
        <div class="span12">
            <div id="chart_div10" style="width: 100%; height: 300px"></div>
        </div>
    </div>

    <div class="modal fade static" id="modalRecorrido" style="display: none;">
        <div class="modal-header">
            <h4><i class="fa fa-list"></i> <b class="paneltitle">FORMULARIO MODAL</b></h4>
        </div>
        <div class="modal-body panelbody">
        </div>
        <div class="modal-footer">
            <a href="javascript:;" class="btn btn-default" data-dismiss="modal">
                <i class="fa fa-window-close"></i>
                    Cerrar
            </a>
        </div>
    </div>
    <div class="modal fade static" id="modalMatriculaTipo" style="display: none;">
        <div class="modal-header">
            <h4><i class="fa fa-list"></i> <b class="paneltitle">FORMULARIO MODAL</b></h4>
        </div>
        <div class="modal-body">
            <div id="no-more-tables">
                <div class='row-fluid'>
                    <div class='span12'>
                        <div class="datatable" id="divDetailData">
                            <table id="dtViewRequests" class='table table-bordered table-striped'>
                                <thead>
                                    <tr>
                                        <th style="text-align: center; vertical-align: middle; width: 30%">Estudiante</th>
                                        <th style="text-align: center; vertical-align: middle; width: 10%">Documento</th>
                                        <th style="text-align: center; vertical-align: middle; width: 10%">Genero</th>
                                        <th style="text-align: center; vertical-align: middle; width: 30%">Carrera</th>
                                        <th style="text-align: center; vertical-align: middle; width: 20%">Semestre</th>
                                        <th style="text-align: center; vertical-align: middle; width: 10%">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>

                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div id="el-templates" style="display:none;">
                <div element="table-row-actions">
                    <table>
                        <tbody>
                            <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="modal-footer">
{#            <a  href="javascript:;"  class="btn btn-danger action-save">SI</a>#}
            <a  href="javascript:;"  class="btn btn-info action-close">Cerrar</a>
        </div>
    </div>
{% endblock %}
