{% extends "ajaxform.html" %}
{% load sga_extras %}
{% block form-type %}form-vertical{% endblock %}
{% block atras %}{% if new %}/poa_periodos{% else %}/{% endif %}{% endblock %}
{% block extraheading %}
    {#    <link rel="stylesheet" href="../bootstrap-combined.min.css">#}
    {#    <link type='text/css' rel='stylesheet' href="/static/css/bootstrap-combined.min.css?v=1.0.0"/>#}
    {#	<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>#}
    {#	<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>#}
    <script type='text/javascript' src="/static/js/jquery.blockUI.js?1.0.0"></script>
    <script type="text/javascript" >
        $(function () {
            soloNumerosClass('.input_number')
            $('.tree li:has(ul)').addClass('parent_li').find(' > span').attr('title', 'Contraer');
            $('.tree li.parent_li > span').on('click', function (e) {
                var children = $(this).parent('li.parent_li').find(' > ul > li');
                if (children.is(":visible")) {
                    children.hide('fast');
                    $(this).find(' > i').removeClass('fa fa-folder-open');
                    $(this).attr('title', 'Ampliar').find(' > i').addClass('fa fa-folder');
                } else {
                    children.show('fast');
                    $(this).find(' > i').removeClass('fa fa-folder');
                    $(this).attr('title', 'Contraer').find(' > i').addClass('fa fa-folder-open');
                }
                {#e.stopPropagation();#}
            });
             $(".objetivosest").click(function (){
                 console.log('aqui estoy')
                $("#id_seleccionado").val($(this).attr('data_id'))
            })
            let departamento = $("#iddepartamentopoa")
            let gestion = $("#id_gestionpoa")
            let carrera = $("#id_carrerapoa")
            departamento.on('select2:select', function (){
                $("#id_gestionpoa").val('0')
                $("#id_carrerapoa").val('0')
                redirecciondepartamento()
            })
            gestion.on('select2:select', function (){
                $("#id_carrerapoa").val('0')
                redirecciondepartamento()
            })
            carrera.on('select2:select', function (){
                $("#id_gestionpoa").val('0')
                redirecciondepartamento()
            })
        });
        $(function () {
            {% if idseleccion %}
                $("#{{ idseleccion }}").trigger('click')
            {% endif %}
            $(".addtraspaso").click(function () {
                idelejido = $(this).attr('idaddtraspaso');
                $('#iddepartamentoelejido').val(idelejido)
                $("#itemstraspaso").modal({backdrop: 'static', width: '500px'}).modal('show');
                $("#itemstraspaso .incompletoaddtraspaso").hide();
            });
            $("#add_traspaso").click(function () {
                var periodopoa = $('#idperiodopoa').val()
                var departamento = $('#id_departamentos').val()
                var idcarrera = $('#id_carrera').val()
                var iddepartamentoelejido = $('#iddepartamentoelejido').val()
                if (departamento == '') {
                    $("#itemstraspaso .incompletoaddtraspaso").show();
                    return false;
                }
                $("#itemstraspaso").modal({backdrop: 'static', width: '900px'}).modal('hide');
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/poa_menutree",
                    data: {
                        'action': 'duplicar',
                        'idperiodopoa': periodopoa,
                        'iddepartamento': departamento,
                        'iddepartamentoelejido': iddepartamentoelejido,
                        'idcarrera': idcarrera
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error al obtener los datos.");
                    },
                    success: function (data) {
                        if (data.result == "ok") {
                            window.location.href = '/poa_objestrategicosgeneral';
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    }
                });
            });
            $("#cancel_traspaso").click(function () {
                $('#itemstraspaso').modal('hide');
            });
            /* ESTRATEGICOS */
            $("#paneladdestrategico .btn-aprobarestrategico").click(function () {
                var id_periodopoa = $("#id_periodopoa").val();
                var id_departamento = $("#id_departamentos").val();
                var id_programa = $("#id_programa").val();
                var id_descripcion = $("#id_descripcion").val();
                var id_gestion = $("#id_gestionpoa").val();
                var id_carrera = $("#id_carrerapoa").val();
                var id_orden = $("#id_orden").val();
                if (id_descripcion == "") {
                    {#smoke.alert("Ingrese una descripción.");#}
                    $('#helptextdescripcion').html('Ingrese descripción');
                    $("#id_descripcion").focus();
                    return false;
                }
                if (id_orden == "") {
                    {#smoke.alert("Ingrese un orden.");#}
                    $('#helptextorden').html('Ingrese orden');
                    $("#id_orden").focus();
                    return false;
                }
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/poa_menutree",
                    data: {
                        'action': 'adicionarestrategico',
                        'id_periodopoa': id_periodopoa,
                        'id_departamento': id_departamento,
                        'id_programa': id_programa,
                        'id_descripcion': id_descripcion,
                        'id_orden': id_orden,
                        'id_gestion': id_gestion ,
                        'id_carrera': id_carrera
                    },
                    success: function (data) {
                        if (data.result == 'ok') {
                            $("#paneladdestrategico").modal("hide");
                            location.href = `/poa_menutree?idperiodopa=${id_periodopoa}&iddepartamentopoa=${id_departamento}&idgestion=${id_gestion}&idcarrera=${id_carrera}`
                        } else {
                            $.unblockUI();
                            mensajeDanger(data.mensaje);
                        }
                    },
                    error: function () {
                        desbloqueoUi();
                        mensajeDanger("Error al enviar los datos al servidor.");
                    },
                    dataType: "json"
                });

            });
            $(".adicionarestrategicos").click(function () {
                $("#aprobarestrategico").css('display', 'block');
                var idperiodopoa = $("#idperiodopoa").val();
                var iddepa = $("#iddepartamentopoa").val();
                let idgestion = $('#id_gestionpoa').val()
                let idcarrera = $('#id_carrerapoa').val()
                idgestion = idgestion? idgestion : 0
                idcarrera = idcarrera? idcarrera : 0
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/poa_menutree",
                    data: {'action': 'addestrategico', 'idperiodopoa': idperiodopoa, 'iddepa': iddepa, 'idgestion':idgestion, 'idcarrera':idcarrera},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyestrategico").html(data.data);
                            $("#paneladdestrategico").modal({backdrop: 'static', width: '600px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $(".adicionaraddmetas").click(function () {
                var tipoindicador = $("#tipoindicador").val();
                var idindicadormeta = $("#idindicadormeta").val();
                var cadena = ''
                validacion = 0
                if (tipoindicador == 0) {
                    smoke.alert('Seleccionar tipo de indicador');
                    return false;
                }
                $('.listaevaluacion').each(function () {
                    codigo = $(this).attr("ideval")
                    valor = $(this).val()
                    if (codigo == '' || valor == '') {
                        validacion = 1
                    }
                    cadena += codigo + '_' + valor + ','
                });
                cadena = cadena.substring(0, cadena.length - 1);
                if (validacion == 1) {
                   $('#helptextlistaevaluacion').html('Existen campos en blanco');
                    $('.listaevaluacion').focus();
                    return false;
                }
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/poa_menutree",
                    data: {
                        'action': 'addmetas',
                        'tipoindicador': tipoindicador,
                        'cadena': cadena,
                        'idindicadormeta': idindicadormeta
                    },
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $("#paneladdmetas").modal("hide");
                            smoke.alert('Datos guardados correctamente');

                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            /* TACTICOS */
            $(".deltactico").click(function () {
                $('#modaltacticodel').modal({'width': 800}).modal('show');
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/poa_menutree",
                    data: {'action': 'listatacticos', 'id': $(this).attr('idtac')},
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error al obtener los datos.");
                    },
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == "ok") {
                            $('#leyendatacticodel').html(data.descripcion)
                            $('#codigotacticodel').val(data.codigotactico)
                            $('#modaltacticodel').modal({'width': 800}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    }
                });
            });
            /* OPERATIVOS */
            $(".deloperativo").click(function () {
                $('#modaloperativodel').modal({'width': 800}).modal('show');
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/poa_menutree",
                    data: {'action': 'listaoperativos', 'id': $(this).attr('idope')},
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error al obtener los datos.");
                    },
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == "ok") {
                            $('#leyendaoperativodel').html(data.descripcion)
                            $('#codigooperativodel').val(data.codigooperativo)
                            $('#modaloperativodel').modal({'width': 800}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    }
                });
            });
            /* INDICADORES */
            $(".delindicador").click(function () {
                $('#modalindicadoresdel').modal({'width': 800}).modal('show');
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/poa_menutree",
                    data: {'action': 'listaindicadores', 'id': $(this).attr('idind')},
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error al obtener los datos.");
                    },
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == "ok") {
                            $('#leyendaindicadordel').html(data.descripcion)
                            $('#codigoindicadordel').val(data.codigoindicador)
                            $('#modalindicadoresdel').modal({'width': 800}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    }
                });
            });
            /* ACCIONES */
            $(".delaccion").click(function () {
                $('#selectdeleteacciones').modal({'width': 800}).modal('show');
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/poa_menutree",
                    data: {'action': 'listaacciones', 'id': $(this).attr('idact')},
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error al obtener los datos.");
                    },
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == "ok") {
                            $('#leyendaaccion').html(data.descripcion)
                            $('#codigoaccion').val(data.codigoaccion)
                            $('#selectdeleteacciones').modal({'width': 800}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    }
                });
            });
            $("#eliminacionmodal_formbuttonaccion").click(function () {
                $('#selectdeleteacciones').modal('hide');
                var filaaccion = ''
                filaaccion = 'eliminaraccion' + $('#codigoaccion').val()
                $.ajax({
                    type: "POST",
                    url: "/poa_menutree",
                    data: {'action': 'eliminaracciones', 'codigoaccion': $('#codigoaccion').val()},
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error al obtener los datos.");
                    },
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == "ok") {
                            $('#' + filaaccion).remove();
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    }
                });
            });
            $("#eliminacionmodal_formbuttonindicadordel").click(function () {
                $('#modalindicadoresdel').modal('hide');
                var filaindicador = ''
                filaindicador = 'eliminarindicador' + $('#codigoindicadordel').val()
                $.ajax({
                    type: "POST",
                    url: "/poa_menutree",
                    data: {'action': 'eliminarindicadores', 'codigoindicadordel': $('#codigoindicadordel').val()},
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error al obtener los datos.");
                    },
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == "ok") {
                            $('#' + filaindicador).remove();
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    }
                });
            });
            $("#eliminacionmodal_formbuttonoperativodel").click(function () {
                $('#modaloperativodel').modal('hide');
                var filaoperativo = ''
                filaoperativo = 'eliminaroperativos' + $('#codigooperativodel').val()
                $.ajax({
                    type: "POST",
                    url: "/poa_menutree",
                    data: {'action': 'eliminaroperativos', 'codigooperativodel': $('#codigooperativodel').val()},
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error al obtener los datos.");
                    },
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == "ok") {
                            $('#' + filaoperativo).remove();
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    }
                });
            });
            $("#eliminacionmodal_formbuttontacticodel").click(function () {
                $('#modaltacticodel').modal('hide');
                var filatactico = ''
                filatactico = 'eliminartacticos' + $('#codigotacticodel').val()
                $.ajax({
                    type: "POST",
                    url: "/poa_menutree",
                    data: {'action': 'eliminartacticos', 'codigotacticodel': $('#codigotacticodel').val()},
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error al obtener los datos.");
                    },
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == "ok") {
                            $('#' + filatactico).remove();
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    }
                });
            });
            $("#eliminacionmodal_cancelaccion").click(function () {
                $('#selectdeleteacciones').modal('hide');
            });
            $("#eliminacionmodal_cancelindicadordel").click(function () {
                $('#modalindicadoresdel').modal('hide');
            });
            $("#eliminacionmodal_canceloperativodel").click(function () {
                $('#modaloperativodel').modal('hide');
            });
            $("#eliminacionmodal_canceltacticodel").click(function () {
                $('#modaltacticodel').modal('hide');
            });
            $("#cerraraccionedit").click(function () {
                $("#itemspanelaccionedit .incompletoaccionedit").hide();
                $("#itemspanelaccionedit .incompletovaloaccionedit").hide();
                $("#itemspanelaccionedit").modal("hide");
            });
            $("#cerrarindicadoredit").click(function () {
                $("#panelindicadoredit .incompletoindicadoredit").hide();
                $("#panelindicadoredit .incompletovaloindicadoredit").hide();
                $("#panelindicadoredit").modal("hide");
            });
            $("#cerraroperativoedit").click(function () {
                $("#paneloperativoedit .incompletooperativoedit").hide();
                $("#paneloperativoedit .incompletovalooperativoedit").hide();
                $("#paneloperativoedit").modal("hide");
            });
            $("#cerraraddmetas").click(function () {
                $("#paneladdmetas .incompletooperativoedit").hide();
                $("#paneladdmetas .incompletovalooperativoedit").hide();
                $("#paneladdmetas").modal("hide");
            });
            $("#cerrartacticoedit").click(function () {
                $("#paneltacticoedit .incompletotacticoedit").hide();
                $("#paneltacticoedit .incompletovalotacticoedit").hide();
                $("#paneltacticoedit").modal("hide");
            });
            $("#cerrarestrategicoedit").click(function () {
                $("#panelestrategicoedit .incompletoestrategicoedit").hide();
                $("#panelestrategicoedit .incompletovaloestrategicoedit").hide();
                $("#panelestrategicoedit").modal("hide");
            });
            $("#paneladdestrategico .btn-cerrarestrategico").click(function () {
                {#                alert('j')#}
                $("#paneladdestrategico .incompletoacicionarestrategico").hide();
                {#                $("#paneladdestrategico .incompletovaloestrategicoedit").hide();#}
                $("#paneladdestrategico").modal("hide");
            });
            $("#adicionarycerraraccionedit").click(function () {
                editar_acciones()
            });
            $("#adicionarycerrarindicadoredit").click(function () {
                editar_indicadores()
            });
            $("#adicionarycerraroperativoedit").click(function () {
                editar_operativos()
            });
            $("#adicionarycerrartacticoedit").click(function () {
                editar_tacticos()
            });
            $("#adicionarycerrarestrategicoedit").click(function () {
                editar_estrategicos()
            });
            $("#cerraraccionesadd").click(function () {
                $("#itemspaneladdaciones .incompletoaddaciones").hide();
                $("#itemspaneladdaciones .incompletovaloaddaciones").hide();
                $("#itemspaneladdaciones").modal("hide");
            });
            $("#cerrarindicadoresadd").click(function () {
                $("#modaladdindicadores .incompletoaddindicadores").hide();
                $("#modaladdindicadores .incompletovaloindicadores").hide();
                $("#modaladdindicadores").modal("hide");
            });
            $("#cerraritacticoesadd").click(function () {
                $("#modaladdtactico .incompletoaddtactico").hide();
                $("#modaladdtactico .incompletovalotactico").hide();
                $("#modaladdtactico").modal("hide");
            });
            $("#cerrarestrategicoadd").click(function () {
                $("#modaladdestrategico .incompletoaddestrategico").hide();
                $("#modaladdestrategico .incompletovaloestrategico").hide();
                $("#modaladdestrategico").modal("hide");
            });
            $("#adicionarycerraraccionesadd").click(function () {
                adicionar_acciones()
            });
            $("#adicionarycerrarindicadoresadd").click(function () {
                adicionar_indicadores()
            });
            $("#adicionarycerrartacticoadd").click(function () {
                adicionar_operativos()
            });
            $("#adicionarycerrarestrategicoadd").click(function () {
                adicionar_tacticos()
            });


        });

        /*   OPERATIVOS  */
        addtacticos = function (codigoestrategico) {
            $("#id_desestrategicoadd").val('');
            $("#id_ordenestrategicoadd").val(0);
            $("#idestrategicoadd").val('');
            $("#idestrategicoadd").val(codigoestrategico);
            $("#alertaingresoaddestrategico").hide();
            $("#modaladdestrategico .incompletoaddestrategico").hide();
            $("#modaladdestrategico .incompletovaloresaddestrategico").hide();
            $("#adicionarycerrarestrategico").show();
            $("#guardar").hide();
            $("#modaladdestrategico").modal({backdrop: 'static', width: '600px'}).modal('show');
            return false;
        }
        /*   TACTICOS  */
        addoperativos = function (codigotactico) {
            $("#id_destacticoadd").val('');
            $("#id_ordentacticoadd").val(0);
            $("#idtacticoadd").val('');
            $("#idtacticoadd").val(codigotactico);
            $("#alertaingresoaddtactico").hide();
            $("#modaladdtactico .incompletoaddtactico").hide();
            $("#modaladdtactico .incompletovaloresaddtactico").hide();
            $("#adicionarycerrartactico").show();
            $("#guardar").hide();
            $("#modaladdtactico").modal({backdrop: 'static', width: '600px'}).modal('show');
            return false;
        }
        /*   OPERATIVOS  */
        addindicadores = function (codigooperativo) {
            $("#id_desindicadoradd").val('');
            $("#id_ordenindicadoradd").val(0);
            $("#idoperativoadd").val('');
            $("#idoperativoadd").val(codigooperativo);
            $("#alertaingresoaddindicador").hide();
            $("#itemspaneladdaciones .incompletoaddindicador").hide();
            $("#itemspaneladdaciones .incompletovaloresaddindicador").hide();
            $("#adicionarycerrarindicador").show();
            $("#guardar").hide();
            $("#modaladdindicadores").modal({backdrop: 'static', width: '600px'}).modal('show');
            return false;
        }
        /*   INDICADORES  */
        addaciones = function (codigoindicador) {
            $("#id_desaccionadd").val('');
            $("#id_ordenaccionadd").val(0);
            $("#idindicadoradd").val('');
            $("#idindicadoradd").val(codigoindicador);
            $("#alertaingresoaddaciones").hide();
            $("#itemspaneladdaciones .incompletoaddaciones").hide();
            $("#itemspaneladdaciones .incompletovaloresaddaciones").hide();
            $("#adicionarycerrarsubtemas").show();
            $("#guardar").hide();
            $("#itemspaneladdaciones").modal({backdrop: 'static', width: '600px'}).modal('show');
            return false;
        }
        adicionar_acciones = function (ocultar) {
            var idindicadoradd = $("#idindicadoradd").val();
            var descripcion = $("#id_desaccionadd").val();
            var id_ordenaccionadd = $("#id_ordenaccionadd").val();
            {#var tipoaccionadd = $("#tipoaccionadd").val();#}
            {#var id_obsaccionadd = $("#id_obsaccionadd").val();#}
            if (descripcion == '' || id_ordenaccionadd == '') {
                $("#itemspaneladdaciones .incompletoaddaciones").show();
                return false;
            }
            $("#itemspaneladdaciones").modal("hide");
            bloqueointerface();
            $.ajax({
                type: "POST",
                url: "/poa_menutree",
                data: {
                    'action': 'addacciones',
                    'descripcion': descripcion,
                    {#'id_obsaccionadd': id_obsaccionadd,#}
                    {#'tipoaccionadd': tipoaccionadd,#}
                    'idindicadoradd': idindicadoradd,
                    'id_ordenaccionadd': id_ordenaccionadd,
                    'idindicadoradd': idindicadoradd
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error al obtener los datos.");
                },
                success: function (data) {
                    $.unblockUI();
                    if (data.result == "ok") {
                        $("#idacciones" + idindicadoradd).append('<li id="eliminaraccion' + data.idacciones + '"><a href="javascript:;" class="btn btn-tini btn-info editaccion tu" id="adicionarsubtemasedit' + data.idacciones + '" onclick="editacciones(' + data.idacciones + ')"  title="Editar Medio de Verificación"><i class="fa fa-edit"></i></a> ' +
                            '<a href="javascript:;" class="btn btn-tini btn-danger delaccion tu" idact="' + data.idacciones + '" title="Eliminar Medio de Verificación"><i class="fa fa-remove"></i></a> ' +
                            '<span><i class="fa fa-leaf"></i><i id="nomacciones' + data.idacciones + '">MEDIOS DE VERIFICACIÓN ' + id_ordenaccionadd + ': ' + descripcion + '</li></span> </li>');
                        tooltips();
                        conectar_controlesacciones();
                    } else {
                        smoke.alert(data.mensaje);
                    }
                }
            });
        };
        adicionar_indicadores = function (ocultar) {
            var idoperativoadd = $("#idoperativoadd").val();
            var descripcion = $("#id_desindicadoradd").val();
            var id_ordenindicadoradd = $("#id_ordenindicadoradd").val();
            if (descripcion == '' || id_ordenindicadoradd == '') {
                $("#modaladdindicadores .incompletoaddindicadores").show();
                return false;
            }
            $("#modaladdindicadores").modal("hide");
            bloqueointerface();
            $.ajax({
                type: "POST",
                url: "/poa_menutree",
                data: {
                    'action': 'addindicador',
                    'descripcion': descripcion,
                    'idoperativoadd': idoperativoadd,
                    'id_ordenindicadoradd': id_ordenindicadoradd
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error al obtener los datos.");
                },
                success: function (data) {
                    $.unblockUI();
                    //  alert($("#idindicadores"+idoperativoadd).length)
                    if (data.result == "ok") {
                        $("#idindicadores" + idoperativoadd).append('<li class="parent_li" id="eliminarindicador' + data.idindicador + '"><a href="javascript:;" id="adicionaracciones' + data.idindicador + '" onclick="addaciones(' + data.idindicador + ')" class="btn btn-success btn-tini tu" title="Adicionar medio de verificación"><i class="fa fa-plus"></i></a>' +
                            '<a href="javascript:;" class="btn btn-tini btn-info editindicador tu" id="adicionarindicadoredit' + data.idindicador + '" onclick="editindicador(' + data.idindicador + ')"  title="Editar Proyecto y/o Actividad"><i class="fa fa-edit"></i></a> ' +
                            '<a href="javascript:;" class="btn btn-tini btn-danger delindicador tu" idind="' + data.idindicador + '" title="Eliminar Proyecto y/o Actividad"><i class="fa fa-remove"></i></a> ' +
                            '<a href="poa_indicadores?action=documentos&id=' + data.idindicador + '" target="_blank" class="btn btn-tini btn-warning tu"  title="Registrar Fechas"><i class="fa fa-table"></i></a>' +
                            '<span title="Contraer"><i class="fa fa-minus-sign"></i><a id="nomindicador' + data.idindicador + '">PROYECTO Y/O ACTIVIDAD ' + id_ordenindicadoradd + ': ' + descripcion + '</a></span><ul id="idacciones' + data.idindicador + '"></ul> </li>');
                        tooltips();
                        conectar_controlesindicadores();
                    } else {
                        smoke.alert(data.mensaje);
                    }
                }
            });
        };
        adicionar_tacticos = function (ocultar) {
            var idestrategicoadd = $("#idestrategicoadd").val();
            var descripcion = $("#id_desestrategicoadd").val();
            var id_ordenestrategicoadd = $("#id_ordenestrategicoadd").val();
            if (descripcion == '' || id_ordenestrategicoadd == '') {
                $("#modaladdestrategico .incompletoaddestrategico").show();
                return false;
            }
            $("#modaladdestrategico").modal("hide");
            bloqueointerface();
            $.ajax({
                type: "POST",
                url: "/poa_menutree",
                data: {
                    'action': 'addtactico',
                    'descripcion': descripcion,
                    'idestrategicoadd': idestrategicoadd,
                    'id_ordenestrategicoadd': id_ordenestrategicoadd
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error al obtener los datos.");
                },
                success: function (data) {
                    $.unblockUI();
                    //  alert($("#idindicadores"+idoperativoadd).length)
                    if (data.result == "ok") {
                        $("#idtacticos" + idestrategicoadd).append('<li class="parent_li" id="eliminartacticos' + data.idtactico + '"><a href="javascript:;" onclick="addoperativos(' + data.idtactico + ')" class="btn btn-success btn-tini tu" title="Adicionar Indicador"><i class="fa fa-plus"></i></a>' +
                            '<a href="javascript:;" class="btn btn-tini btn-info edittactico tu" id="adicionarindicadoredit' + data.idtactico + '" onclick="edittactico(' + data.idtactico + ')"  title="Editar Objetivo Operativo"><i class="fa fa-edit"></i></a> ' +
                            '<a href="javascript:;" class="btn btn-tini btn-danger deltactico tu" idtac="' + data.idtactico + '" title="Eliminar Objetivo Operativo"><i class="fa fa-remove"></i></a> ' +
                            '<span title="Contraer"><i class="fa fa-minus-sign"></i><a id="nomtactico' + data.idtactico + '">OBJETIVO OPERATIVO ' + id_ordenestrategicoadd + ': ' + descripcion + '</a></span><ul id="idoperativos' + data.idtactico + '"></ul> </li>');
                        tooltips();
                        conectar_controlestacticos();
                    } else {
                        smoke.alert(data.mensaje);
                    }
                }
            });
        };

        conectar_controlestacticos = function () {
            $(".deltactico").unbind();
            $(".deltactico").click(function () {
                $('#modaltacticodel').modal({'width': 800}).modal('show');
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/poa_menutree",
                    data: {'action': 'listatacticos', 'id': $(this).attr('idtac')},
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error al obtener los datos.");
                    },
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == "ok") {
                            $('#leyendatacticodel').html(data.descripcion)
                            $('#codigotacticodel').val(data.codigotactico)
                            $('#modaltacticodel').modal({'width': 800}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    }
                });
            });
        };

        adicionar_operativos = function (ocultar) {
            var idtacticoadd = $("#idtacticoadd").val();
            var descripcion = $("#id_destacticoadd").val();
            var id_ordentacticoadd = $("#id_ordentacticoadd").val();
            if (descripcion == '' || id_ordentacticoadd == '') {
                $("#modaladdtactico .incompletoaddtactico").show();
                return false;
            }
            $("#modaladdtactico").modal("hide");
            bloqueointerface();
            $.ajax({
                type: "POST",
                url: "/poa_menutree",
                data: {
                    'action': 'addoperativo',
                    'descripcion': descripcion,
                    'idtacticoadd': idtacticoadd,
                    'id_ordentacticoadd': id_ordentacticoadd
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error al obtener los datos.");
                },
                success: function (data) {
                    $.unblockUI();
                    //  alert($("#idindicadores"+idoperativoadd).length)
                    if (data.result == "ok") {
                        $("#idoperativos" + idtacticoadd).append('<li class="parent_li" id="eliminaroperativos' + data.idoperativo + '"><a href="javascript:;" id="adicionaracciones' + data.idoperativo + '" onclick="addindicadores(' + data.idoperativo + ')" class="btn btn-success btn-tini tu" title="Adicionar Proyecto y/o Actividad"><i class="fa fa-plus"></i></a>' +
                            '<a href="javascript:;" class="btn btn-tini btn-info editoperativo tu" id="adicionarindicadoredit' + data.idoperativo + '" onclick="editoperativo(' + data.idoperativo + ')"  title="Editar Proyecto y/o Actividad"><i class="fa fa-edit"></i></a> ' +
                            '<a href="javascript:;" class="btn btn-tini btn-warning addmetas tu" id="addmetas' + data.idoperativo + '" onclick="addmetas(' + data.idoperativo + ')"  title="Metas"><i class="fa fa-list"></i></a> ' +
                            '<a href="javascript:;" class="btn btn-tini btn-danger deloperativo tu" idope="' + data.idoperativo + '" title="Eliminar Proyecto y/o Actividad"><i class="fa fa-remove"></i></a> ' +
                            '<span title="Contraer"><i class="fa fa-minus-sign"></i><a id="nomoperativo' + data.idoperativo + '">INDICADOR ' + id_ordentacticoadd + ': ' + descripcion + '</a></span><ul id="idindicadores' + data.idoperativo + '"></ul> </li>');
                        tooltips();
                        conectar_controlesoperativos();
                    } else {
                        smoke.alert(data.mensaje);
                    }
                }
            });
        };

        conectar_controlesoperativos = function () {
            $(".deloperativo").unbind();
            $(".deloperativo").click(function () {
                $('#modaloperativodel').modal({'width': 800}).modal('show');
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/poa_menutree",
                    data: {'action': 'listaoperativos', 'id': $(this).attr('idope')},
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error al obtener los datos.");
                    },
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == "ok") {
                            $('#leyendaoperativodel').html(data.descripcion)
                            $('#codigooperativodel').val(data.codigooperativo)
                            $('#modaloperativodel').modal({'width': 800}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    }
                });
            });
        };

        conectar_controlesindicadores = function () {
            $(".delindicador").unbind();
            $(".delindicador").click(function () {
                $('#modalindicadoresdel').modal({'width': 800}).modal('show');
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/poa_menutree",
                    data: {'action': 'listaindicadores', 'id': $(this).attr('idind')},
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error al obtener los datos.");
                    },
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == "ok") {
                            $('#leyendaindicadordel').html(data.descripcion)
                            $('#codigoindicadordel').val(data.codigoindicador)
                            $('#modalindicadoresdel').modal({'width': 800}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    }
                });
            });
        };

        conectar_controlesacciones = function () {
            $(".delaccion").unbind();
            $(".delaccion").click(function () {
                $('#selectdeleteacciones').modal({'width': 800}).modal('show');
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/poa_menutree",
                    data: {'action': 'listaacciones', 'id': $(this).attr('idact')},
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error al obtener los datos.");
                    },
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == "ok") {
                            $('#leyendaaccion').html(data.descripcion)
                            $('#codigoaccion').val(data.codigoaccion)
                            $('#selectdeleteacciones').modal({'width': 800}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    }
                });
            });
        };
        /*  ESTRATEGICO */

        editestrategico = function (codigoestrategico) {
            $.ajax({
                type: "POST",
                url: "/poa_menutree",
                data: {'action': 'consultarestrategico', 'id': codigoestrategico},
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error al obtener los datos.");
                },
                success: function (data) {
                    $.unblockUI();
                    if (data.result == "ok") {
                        $("#id_desestrategicoedit").val(data.nombre);
                        $("#id_ordenestrategicoedit").val(data.orden)
                        tooltips();
                    } else {
                        $("#id_desestrategicoedit").val('');
                        $("#id_ordenestrategicoedit").val(0)
                        smoke.alert(data.mensaje);
                    }
                }
            });
            $("#idestrategicoedit").val('');
            $("#idestrategicoedit").val(codigoestrategico);
            $("#panelestrategicoedit").hide();
            $("#panelestrategicoedit .incompletoestrategicoedit").hide();
            $("#panelestrategicoedit .incompletovaloresestrategicoedit").hide();
            $("#adicionarycerrarestrategicoedit").show();
            $("#guardar").hide();
            $("#panelestrategicoedit").modal({backdrop: 'static', width: '400px'}).modal('show');
            return false;
        }
        /*  TACTICO */

        edittactico = function (codigotactico) {
            {#            alert(codigotactico)#}
            $.ajax({
                type: "POST",
                url: "/poa_menutree",
                data: {'action': 'consultartactico', 'id': codigotactico},
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error al obtener los datos.");
                },
                success: function (data) {
                    $.unblockUI();
                    if (data.result == "ok") {
                        $("#id_destacticoedit").val(data.nombre);
                        $("#id_ordentacticoedit").val(data.orden)
                        tooltips();
                        {#                            conectar_controleslib();#}
                    } else {
                        $("#id_destacticoedit").val('');
                        $("#id_ordentacticoedit").val(0)
                        smoke.alert(data.mensaje);
                    }
                }
            });

            $("#idtacticoedit").val('');
            $("#idtacticoedit").val(codigotactico);
            $("#paneltacticoedit").hide();
            $("#paneltacticoedit .incompletotacticoedit").hide();
            $("#paneltacticoedit .incompletovalorestacticoedit").hide();
            $("#adicionarycerrartacticoedit").show();
            $("#guardar").hide();
            $("#paneltacticoedit").modal({backdrop: 'static', width: '400px'}).modal('show');
            return false;
        }
        /*  OPERATIVOS */
        editoperativo = function (codigooperativo) {
            $.ajax({
                type: "POST",
                url: "/poa_menutree",
                data: {'action': 'consultaroperativo', 'id': codigooperativo},
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error al obtener los datos.");
                },
                success: function (data) {
                    $.unblockUI();
                    if (data.result == "ok") {
                        $("#id_desoperativoedit").val(data.nombre);
                        $("#id_ordenoperativoedit").val(data.orden)
                        $("#id_ponderacionoperativoedit").val(data.ponderacion)
                        $("#id_formulaoperativoedit").val(data.formula)
                        tooltips();
                        {#                            conectar_controleslib();#}
                    } else {
                        $("#id_desoperativoedit").val('');
                        $("#id_ordenoperativoedit").val(0)
                        smoke.alert(data.mensaje);
                    }
                }
            });
            $("#idoperativoedit").val('');
            $("#id_ponderacionoperativoedit, #id_formulaoperativoedit").val('');
            $("#idoperativoedit").val(codigooperativo);
            $("#paneloperativoedit").hide();
            $("#paneloperativoedit .incompletooperativoedit").hide();
            $("#paneloperativoedit .incompletovaloresoperativoedit").hide();
            $("#adicionarycerraroperativoedit").show();
            $("#guardar").hide();
            $("#paneloperativoedit").modal({backdrop: 'static', width: '400px'}).modal('show');
            return false;
        }
        addmetas = function (codigooperativo) {
            $.ajax({
                type: "POST",
                url: "/poa_menutree",
                data: {
                    'action': 'consultaroperativometas',
                    'id': codigooperativo,
                    'idperiodopoa': {{ periodopoas.id }}
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error al obtener los datos.");
                },
                success: function (data) {
                    $.unblockUI();
                    if (data.result == "ok") {
                        $("#idtextoindicador").html(data.nombreindicador);
                        $("#tipoindicador").val(data.tipo).trigger('change');
                        {#$('#tipoindicador option:selected').val(2);#}
                        $("#listaevaluacionpoa").html(data.data);
                        {#$("#id_desoperativoedit").val(data.nombre);#}
                        {#$("#id_ordenoperativoedit").val(data.orden)#}
                        tooltips();
                        {#                            conectar_controleslib();#}
                    } else {
                        smoke.alert(data.mensaje);
                    }
                }
            });
            $("#idindicadormeta").val('');
            $("#idindicadormeta").val(codigooperativo);
            $("#paneladdmetas").hide();
            $("#paneladdmetas .incompletooperativoedit").hide();
            $("#paneladdmetas .incompletovaloresoperativoedit").hide();
            $("#adicionarycerraroperativoedit").show();
            $("#guardar").hide();
            $("#paneladdmetas").modal({backdrop: 'static', width: '800px', height: 350}).modal('show');
            return false;
        }
        /* INDICADORES */
        editindicador = function (codigoindicador) {
            $.ajax({
                type: "POST",
                url: "/poa_menutree",
                data: {'action': 'consultarindicador', 'id': codigoindicador},
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error al obtener los datos.");
                },
                success: function (data) {
                    $.unblockUI();
                    if (data.result == "ok") {
                        $("#id_desindicadoredit").val(data.nombre);
                        $("#id_ordenindicadoredit").val(data.orden)
                        tooltips();
                        {#                            conectar_controleslib();#}
                    } else {
                        $("#id_desindicadoredit").val('');
                        $("#id_ordenindicadoredit").val(0)
                        smoke.alert(data.mensaje);
                    }
                }
            });
            $("#idindicadoredit").val('');
            $("#idindicadoredit").val(codigoindicador);
            $("#panelindicadoredit").hide();
            $("#panelindicadoredit .incompletoindicadoredit").hide();
            $("#panelindicadoredit .incompletovaloresindicadoredit").hide();
            $("#adicionarycerrarindicadoredit").show();
            $("#guardar").hide();
            $("#panelindicadoredit").modal({backdrop: 'static', width: '400px'}).modal('show');
            return false;
        }
        /*   ACCIONES  */
        editacciones = function (codigoaccion) {
            $.ajax({
                type: "POST",
                url: "/poa_menutree",
                data: {'action': 'consultaraccion', 'id': codigoaccion},
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error al obtener los datos.");
                },
                success: function (data) {
                    $.unblockUI();
                    if (data.result == "ok") {
                        $("#id_desaccionedit").val(data.nombre);
                        $("#id_ordenaccionedit").val(data.orden)
                        {#$("#tipoaccionedit").val(data.tipo).trigger('change');#}
                        $("#medioaccionedit").val(data.medioverificacion).trigger('change');
                        {#$("#id_obsaccionedit").val(data.observacion);#}
                        $("#id_enlaceaccionedit").val(data.enlace);
                        $("#porcentajeaccionedit").val(data.porcentaje);
                        tooltips();
                        $("#idaccionedit").val('');
                        $("#idaccionedit").val(codigoaccion);
                        $("#itemspanelaccionedit").hide();
                        $("#itemspanelaccionedit .incompletoaccionedit").hide();
                        $("#itemspanelaccionedit .incompletovaloresaccionedit").hide();
                        $("#adicionarycerraraccionedit").show();
                        $("#guardar").hide();
                        $("#itemspanelaccionedit").modal({backdrop: 'static', width: '500px'}).modal('show');
                        return false;
                        {#                            conectar_controleslib();#}
                    } else {
                        $("#id_desaccionedit").val('');
                        $("#id_ordenaccionedit").val(0)
                        smoke.alert(data.mensaje);
                    }
                }
            });
        }
        editar_acciones = function (ocultar) {
            var idaccionedit = $("#idaccionedit").val();
            var descripcion = $("#id_desaccionedit").val();
            var ordenaccionedit = $("#id_ordenaccionedit").val();

            {#var tipoaccionedit = $("#tipoaccionedit").val();#}
            {#var medioaccionedit = $("#medioaccionedit").val();#}
            {#var id_obsaccionedit = $("#id_obsaccionedit").val();#}
            {#var id_enlaceaccionedit = $("#id_enlaceaccionedit").val();#}
            {#var porcentajeaccionedit = $("#porcentajeaccionedit").val();#}

            if (descripcion == '' || ordenaccionedit == '') {
                $("#itemspanelaccionedit .incompletoaccionedit").show();
                return false;
            }
            $("#itemspanelaccionedit").modal("hide");
            bloqueointerface();
            $.ajax({
                type: "POST",
                url: "/poa_menutree",
                data: {
                    'action': 'editacciones',
                    'descripcion': descripcion,
                    'ordenaccionedit': ordenaccionedit,
                    'idaccionedit': idaccionedit,
                    {#'tipoaccionedit': tipoaccionedit,#}
                    {#'id_obsaccionedit': id_obsaccionedit#}
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error al obtener los datos.");
                },
                success: function (data) {
                    $.unblockUI();
                    if (data.result == "ok") {
                        $("#nomacciones" + idaccionedit).html('MEDIOS DE VERIFICACIÓN ' + ordenaccionedit + ': ' + descripcion)
                        tooltips();
                        {#                            conectar_controlestemas();#}
                    } else {
                        smoke.alert(data.mensaje);
                    }
                }
            });
        };
        editar_indicadores = function (ocultar) {
            var idindicadoredit = $("#idindicadoredit").val();
            var descripcion = $("#id_desindicadoredit").val();
            var id_ordenindicadoredit = $("#id_ordenindicadoredit").val();
            if (descripcion == '' || id_ordenindicadoredit == '') {
                $("#panelindicadoredit .incompletoindicadoredit").show();
                return false;
            }
            $("#panelindicadoredit").modal("hide");
            bloqueointerface();
            $.ajax({
                type: "POST",
                url: "/poa_menutree",
                data: {
                    'action': 'editindicadores',
                    'descripcion': descripcion,
                    'id_ordenindicadoredit': id_ordenindicadoredit,
                    'idindicadoredit': idindicadoredit
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error al obtener los datos.");
                },
                success: function (data) {
                    $.unblockUI();
                    if (data.result == "ok") {
                        $("#nomindicador" + idindicadoredit).html('PROYECTO Y/O ACTIVIDAD ' + id_ordenindicadoredit + ': ' + descripcion)
                        tooltips();
                        {#                            conectar_controlestemas();#}
                    } else {
                        smoke.alert(data.mensaje);
                    }
                }
            });
        };
        editar_operativos = function (ocultar) {
            var idoperativoedit = $("#idoperativoedit").val();
            var descripcion = $("#id_desoperativoedit").val();
            var formulaoperativoedit = $("#id_formulaoperativoedit").val();
            var id_ordenoperativoedit = $("#id_ordenoperativoedit").val();
            if (descripcion == '' || id_ordenoperativoedit == '' || formulaoperativoedit == '') {
                $("#paneloperativoedit .incompletooperativoedit").show();
                return false;
            }
            $("#paneloperativoedit").modal("hide");
            bloqueointerface();
            $.ajax({
                type: "POST",
                url: "/poa_menutree",
                data: {
                    'action': 'editoperativos',
                    'descripcion': descripcion,
                    'id_ordenoperativoedit': id_ordenoperativoedit,
                    'idoperativoedit': idoperativoedit,
                    'idformulaoperativoedit': formulaoperativoedit
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error al obtener los datos.");
                },
                success: function (data) {
                    $.unblockUI();
                    if (data.result == "ok") {
                        $("#nomoperativo" + idoperativoedit).html('INDICADOR ' + id_ordenoperativoedit + ': ' + descripcion)
                        tooltips();
                        {#                            conectar_controlestemas();#}
                    } else {
                        smoke.alert(data.mensaje);
                    }
                }
            });
        };
        editar_estrategicos = function (ocultar) {
            var idestrategicoedit = $("#idestrategicoedit").val();
            var descripcion = $("#id_desestrategicoedit").val();
            var id_ordenestrategicoedit = $("#id_ordenestrategicoedit").val();
            if (descripcion == '' || id_ordenestrategicoedit == '') {
                $("#panelestrategicoedit .incompletoestrategicoedit").show();
                return false;
            }
            $("#panelestrategicoedit").modal("hide");
            bloqueointerface();
            $.ajax({
                type: "POST",
                url: "/poa_menutree",
                data: {
                    'action': 'editestrategicos',
                    'descripcion': descripcion,
                    'id_ordenestrategicoedit': id_ordenestrategicoedit,
                    'idestrategicoedit': idestrategicoedit
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error al obtener los datos.");
                },
                success: function (data) {
                    $.unblockUI();
                    if (data.result == "ok") {
                        $("#nomestrategico" + idestrategicoedit).html('OBJETIVO ESTRATÉTIGO - ' + data.programa + ' : ' + descripcion)
                        tooltips();
                    } else {
                        smoke.alert(data.mensaje);
                    }
                }
            });
        };

        editar_tacticos = function (ocultar) {
            var idtacticoedit = $("#idtacticoedit").val();
            var descripcion = $("#id_destacticoedit").val();
            var id_ordentacticoedit = $("#id_ordentacticoedit").val();
            if (descripcion == '' || id_ordentacticoedit == '') {
                $("#paneltacticoedit .incompletotacticoedit").show();
                return false;
            }
            $("#paneltacticoedit").modal("hide");
            bloqueointerface();
            $.ajax({
                type: "POST",
                url: "/poa_menutree",
                data: {
                    'action': 'edittacticos',
                    'descripcion': descripcion,
                    'id_ordentacticoedit': id_ordentacticoedit,
                    'idtacticoedit': idtacticoedit
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error al obtener los datos.");
                },
                success: function (data) {
                    $.unblockUI();
                    if (data.result == "ok") {
                        $("#nomtactico" + idtacticoedit).html('OBJETIVO OPERATIVO ' + id_ordentacticoedit + ': ' + descripcion)
                        tooltips();
                    } else {
                        smoke.alert(data.mensaje);
                    }
                }
            });
        };

        function redireccion() {
            bloqueointerface();
            var iddepar = 0
            {#alert($('#iddepartamentopoa').val())#}
            if ($('#iddepartamentopoa').val() == null) {
                iddepar = 0
            } else {
                iddepar = $('#iddepartamentopoa').val()
            }
            location.href = '/poa_menutree?idperiodopa=' + $('#idperiodopoa').val() + '&iddepartamentopoa=' + iddepar + '&new=' + '{{ new }}';
        }

        function redirecciondepartamento() {
            bloqueointerface();
            let idperiodo = $('#idperiodopoa').val()
            let iddepartamento = $('#iddepartamentopoa').val()
            let idgestion = $('#id_gestionpoa').val()
            let idcarrera = $('#id_carrerapoa').val()
            idgestion = idgestion? idgestion : 0
            idcarrera = idcarrera? idcarrera : 0
            location.href = `/poa_menutree?idperiodopa=${idperiodo}&iddepartamentopoa=${iddepartamento}&idgestion=${idgestion}&idcarrera=${idcarrera}&new={{ new }}`
        }

        bloqueointerface = function () {
            if (!$(".blockUI").length) {
                $.blockUI({
                    message: $('#throbber'),
                    css: {
                        'border': '1px solid',
                        'border-radius': '10px',
                        'left': '46%',
                        'width': '120px',
                        'padding': '15px',
                        '-webkit-border-radius': '10px',
                        '-moz-border-radius': '10px',
                        opacity: .6,
                        color: '#000'
                    }
                });
            }
        };
    </script>
    <style>
        .tree {
            min-height: 20px;
            padding: 19px;
            margin-bottom: 20px;
            background-color: #fbfbfb;
            border: 1px solid #999;
            -webkit-border-radius: 4px;
            -moz-border-radius: 4px;
            border-radius: 4px;
            -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05);
            -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05);
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05)
        }

        .tree li {
            list-style-type: none;
            margin: 0;
            padding: 10px 5px 0 5px;
            position: relative
        }

        .tree li::before, .tree li::after {
            content: '';
        {#overflow: visible;#} left: -20px;
            position: absolute;
            right: auto
        }

        .tree li::before {
            border-left: 1px solid #999;
            bottom: 50px;
            height: 100%;
            top: 0;
            width: 1px
        }

        .tree li::after {
            border-top: 1px solid #999;
            height: 20px;
            top: 25px;
            width: 25px
        }

        .tree li span {
            -moz-border-radius: 5px;
            -webkit-border-radius: 5px;
            border: 1px solid #999;
            border-radius: 5px;
            display: inline-block;
            padding: 3px 8px;
            text-decoration: none
        }

        .tree li.parent_li > span {
            cursor: pointer
        }

        .tree > ul > li::before, .tree > ul > li::after {
            border: 0
        }

        .tree li:last-child::before {
            height: 30px
        }

        .tree li.parent_li > span:hover, .tree li.parent_li > span:hover + ul li span {
            background: #eee;
            border: 1px solid #94a0b4;
            color: #000
        }

        .mostrarli {
            overflow: visible;
        }
    </style>
{% endblock %}
{% block canvas %}
    <input type="hidden" name="idseleccionado" id="id_seleccionado">
     <div class='row'>
        <div class='col-lg-12'>
            <div class="headtitle">
                <h3 class="texto-blue">{{ title }}</h3>
                <h6>Selecciona un filtro para los objetivos estratégicos</h6>
            </div>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row">
            <div class="col-12 text-center justify-content-center">
                <label for="" class="fw-semi-bold"><i class="fa fa-record-vinyl"></i> Periodos POA:</label>
                <select id="idperiodopoa" name="idperiodopoa" style="width: 750px" onchange="redireccion()">
                    {% for per in periodospoa %}
                        <option value="{{ per.id }}"
                                {% if periodopoas.id == per.id %}selected {% endif %}>{{ per }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-md-4 text-center justify-content-center">
                <label for="" class="fw-semi-bold"><i class="fa fa-university"></i> Direccion:</label>
                <select id="iddepartamentopoa" name="iddepartamentopoa" style="width: 750px">
                    {% for dep in departamento %}
                        <option value="{{ dep.id }}"
                                {% if iddepartamentopoa.id == dep.id %}selected {% endif %}>{{ dep }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-md-4 text-center justify-content-center">
                <label for="" class="fw-semi-bold"><i class="fa fa-university"></i> Gestión:</label>
                <select id="id_gestionpoa" name="gestionpoa" style="width: 750px">
                    <option value="0">----------SELECCIONE---------</option>
                    {% for gestion in gestiones %}
                        <option value="{{ gestion.id }}" {% if gestion.id == idgestion %}selected{% endif %}>{{ gestion }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-md-4 text-center justify-content-center">
                <label for="" class="fw-semi-bold"><i class="fa fa-graduation-cap"></i> Carrera:</label>
                <select id="id_carrerapoa" name="carrerapoa" style="width: 750px">
                    <option value="0">----------SELECCIONE---------</option>
                     {% for carrera in carreras %}
                        <option value="{{ carrera.id }}" {% if carrera.id == idcarrera %}selected{% endif %}>{{ carrera }} {% if carrera.activa %}(Activo){% else %}(Inactivo){% endif %}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        <div class="tree well mt-2 rounded-3">
            <h4 class="text-center">OBJETIVOS ESTRATÉGICOS</h4>
            <ul id="idcabecera">
                <h5><i class="fa fa-check-circle"></i> {{ titulo }}</h5>
                {% if periodopoas.edicion %}
                    <a href="javascript:;" class="btn btn-success adicionarestrategicos tu"
                       id="adicionarestrategicos" title='Adicionar Objetivo Estratégico'> <i class="fa fa-plus"></i>
                        Adicionar Objetivo
                    </a>
                     <a href="javascript:;" class="btn btn-cian-opacity"
                        onclick="formModalBase('{{ periodopoas.id }}, {{ iddepartamentopoa.id }},{{ idgestion }},{{ idcarrera }}','Mover objetivos','moverobjetivos','','modal-lg')"> <i class="fa fa-folder-open"></i>
                        Mover objetivos
                    </a>
                {% endif %}
                {% for estrategico in objetivos %}
                    <li id="eliminarestrategicos{{ estrategico.id }}">
                        {% if periodopoas.edicion %}
                            <a href="javascript:;" class="btn btn-success btn-tini tu"
                               onclick="addtacticos({{ estrategico.id }})" title='Adicionar Objetivo Operativo'><i
                                    class="fa fa-plus"></i></a>-
                            <a href='javascript:;' class='btn btn-tini btn-cian-opacity edittema tu'
                               id="edittemasedit{{ conte.id }}" onclick="editestrategico({{ estrategico.id }})"
                               title='Editar Objetivo Estratégico'><i class='fa fa-edit'></i></a>-
                            {#                    <a href='javascript:;' class='btn btn-tini btn-danger delresultado tu' iddelresultado="{{ conte.id }}"  title='Eliminar Objetivo Estratégico'><i class='fa fa-remove'></i></a>-#}
                            {#                    <a href='javascript:;' class='btn btn-tini btn-warning addtraspaso tu' idaddtraspaso="{{ estrategico.departamento.id }}_{% if estrategico.carrera.id %}{{ estrategico.carrera.id }}{% else %}0{% endif %}"  title='Traspaso POA'><i class='fa fa-copy'></i></a><br>#}
                        {% endif %}
                        <span  class="objetivosest" data_id="nomestrategico{{ estrategico.id }}"><i class="fa fa-folder"></i>
                        <a id="nomestrategico{{ estrategico.id }}" class="texto-blue">
                            OBJETIVO ESTRATÉGICO {{ estrategico.carrera|default_if_none:"" }} - {{ estrategico.programa }} : {{ estrategico.descripcion }}
                        </a>
                    </span><br>
                        <ul id="idtacticos{{ estrategico.id }}">
                            {% with listatacticos=estrategico|call:'objtacticos_seleccionadas' %}
                                {% if listatacticos %}
                                    {% for tacticos in listatacticos %}
                                        <li id="eliminartacticos{{ tacticos.id }}" class="mostrarli"
                                            style="overflow: visible; display: none;">
                                            {#                                        {% if not tacticos.en_usotactico %}#}
                                            {% if periodopoas.edicion %}
                                                <a href="javascript:;" id="adicionartemas{{ tacticos.id }}"
                                                   onclick="addoperativos({{ tacticos.id }})"
                                                   class="btn btn-success btn-tini tu" title='Adicionar Indicador'><i
                                                        class="fa fa-plus"></i></a>-
                                            {% endif %}
                                            {#                                        {% endif %}#}
                                            {#                                        {% if not tacticos.en_usotactico %}#}
                                            {% if periodopoas.edicion %}
                                                <a href='javascript:;' class='btn btn-tini btn-cian-opacity edittactico tu'
                                                   id="adicionartemasedit{{ tacticos.id }}"
                                                   onclick="edittactico({{ tacticos.id }})"
                                                   title='Editar Objetivo Operativo'><i class='fa fa-edit'></i></a>-
                                            {% endif %}
                                            {#                                        {% endif %}#}
                                            {#                                        {% if not tacticos.en_usotactico %}#}
                                            {% if periodopoas.edicion %}
                                                <a href='javascript:;' class='btn btn-tini btn-danger deltactico tu'
                                                   idtac="{{ tacticos.id }}" title='Eliminar Objetivo Operativo'><i
                                                        class='fa fa-remove'></i></a>-
                                            {% endif %}
                                            {#                                        {% endif %}#}
                                            <span><i></i><a
                                                    id="nomtactico{{ tacticos.id }}">OBJETIVO OPERATIVO {{ tacticos.orden }}: {{ tacticos.descripcion }}</a></span>
                                            <ul id="idoperativos{{ tacticos.id }}">
                                                {% with listaoperativos=tacticos|call:'objoperativo_seleccionadas' %}
                                                    {% if listaoperativos %}
                                                        {% for operativos in listaoperativos %}
                                                            <li id="eliminaroperativos{{ operativos.id }}">
                                                                {#                                                            {% if not operativos.en_usooperativo %}#}
                                                                {% if periodopoas.edicion %}
                                                                    <a href="javascript:;"
                                                                       id="adicionarindicadores{{ operativos.id }}"
                                                                       onclick="addindicadores({{ operativos.id }})"
                                                                       class="btn btn-success btn-tini tu"
                                                                       title='Adicionar Proyecto y/o Actividad'><i
                                                                            class="fa fa-plus"></i></a>
                                                                {% endif %}
                                                                {#                                                            {% endif %}#}
                                                                {#                                                            {% if not operativos.en_usooperativo %}#}
                                                                {% if periodopoas.edicion %}
                                                                    <a href='javascript:;'
                                                                       class='btn btn-tini btn-cian-opacity editoperativo tu'
                                                                       id="adicionartemasedit{{ operativos.id }}"
                                                                       onclick="editoperativo({{ operativos.id }})"
                                                                       title='Editar indicador'><i
                                                                            class='fa fa-edit'></i></a>
                                                                {% endif %}
                                                                {% if periodopoas.edicion %}
                                                                    <a href='javascript:;'
                                                                       class='btn btn-tini btn-warning addmetas tu'
                                                                       id="addmetas{{ operativos.id }}"
                                                                       onclick="addmetas({{ operativos.id }})"
                                                                       title='Metas'><i class='fa fa-list'></i></a>
                                                                {% endif %}
                                                                {#                                                            {% endif %}#}
                                                                {#                                                            {% if not operativos.en_usooperativo %}#}
                                                                {% if periodopoas.edicion %}
                                                                    <a href='javascript:;'
                                                                       class='btn btn-tini btn-danger deloperativo tu'
                                                                       idope="{{ operativos.id }}"
                                                                       title='Eliminar indicador'><i
                                                                            class='fa fa-remove'></i></a>
                                                                {% endif %}
                                                                {#                                                            {% endif %}#}
                                                                <span><i></i> <a id="nomoperativo{{ operativos.id }}">INDICADOR {{ operativos.orden }}: {{ operativos.descripcion }}</a></span>
                                                                <ul id="idindicadores{{ operativos.id }}">
                                                                    {% with listaindicadores=operativos|call:'indicadores_seleccionadas' %}
                                                                        {% if listaindicadores %}
                                                                            {% for indicador in listaindicadores %}
                                                                                <li id="eliminarindicador{{ indicador.id }}">
                                                                                    {#                                                                                {% if not indicador.en_usoindicador %}#}
                                                                                    {% if periodopoas.edicion %}
                                                                                        <a href="javascript:;"
                                                                                           id="adicionaracciones{{ indicador.id }}"
                                                                                           onclick="addaciones({{ indicador.id }})"
                                                                                           class="btn btn-success btn-tini tu"
                                                                                           title='Adicionar medio de verificación'><i
                                                                                                class="fa fa-plus"></i></a>
                                                                                    {% endif %}
                                                                                    {#                                                                                {% endif %}#}
                                                                                    {#                                                                                {% if not indicador.en_usoindicador %}#}
                                                                                    {% if periodopoas.edicion %}
                                                                                        <a href='javascript:;'
                                                                                           class='btn btn-tini btn-cian-opacity editindicador tu'
                                                                                           id="adicionarindicadoredit{{ indicador.id }}"
                                                                                           onclick="editindicador({{ indicador.id }})"
                                                                                           title='Editar Proyecto y/o Actividad'><i
                                                                                                class='fa fa-edit'></i></a>
                                                                                    {% endif %}
                                                                                    {#                                                                                {% endif %}#}
                                                                                    {#                                                                                {% if not indicador.en_usoindicador %}#}
                                                                                    {% if periodopoas.edicion %}
                                                                                        <a href='javascript:;'
                                                                                           class='btn btn-tini btn-danger delindicador tu'
                                                                                           idind="{{ indicador.id }}"
                                                                                           title='Eliminar Proyecto y/o Actividad'><i
                                                                                                class='fa fa-remove'></i></a>
                                                                                    {% endif %}
                                                                                    {#                                                                                {% endif %}#}
                                                                                    {#                                                                                <a href='poa_indicadores?action=documentos&id={{ indicador.id }}'#}
                                                                                    {#                                                                                   target="_blank"#}
                                                                                    {#                                                                                   class='btn btn-tini btn-warning tu'#}
                                                                                    {#                                                                                   title='Registrar Fechas'><i#}
                                                                                    {#                                                                                        class='fa fa-table'></i></a>#}
                                                                                    <span>
                                                                                    <i class="fa fa-minus-sign"></i>
                                                                                    <a id="nomindicador{{ indicador.id }}">PROYECTO Y/O ACTIVIDAD {{ indicador.orden }}: {{ indicador.descripcion }}</a>
                                                                                </span>
                                                                                    <ul id="idacciones{{ indicador.id }}">
                                                                                        {% for accion in indicador.mis_documentos %}
                                                                                            <li id="eliminaraccion{{ accion.id }}">
                                                                                                {#                                                                                                    {% if not accion.en_usoaccion %}#}
                                                                                                {% if periodopoas.edicion %}
                                                                                                    <a href='javascript:;'
                                                                                                       class='btn btn-tini btn-success'
                                                                                                       onclick="formModalBase('{{ accion.id }}',`Adicionar fecha a {{ accion.descripcion }}`,'addfechadocumento','','modal-md')"
                                                                                                       data-bs-toggle='tooltip'
                                                                                                       title='Adicionar fecha'>
                                                                                                        <i class='fa fa-calendar-check'></i>
                                                                                                    </a>
                                                                                                    <a href='javascript:;'
                                                                                                       class='btn btn-tini btn-cian-opacity editaccion tu'
                                                                                                       id="adicionaraccionedit{{ accion.id }}"
                                                                                                       onclick="editacciones({{ accion.id }})"
                                                                                                       title='Editar Medio de Verificación'><i
                                                                                                            class='fa fa-edit'></i></a>
                                                                                                {% endif %}
                                                                                                {#                                                                                                    {% endif %}#}
                                                                                                {#                                                                                                    {% if not accion.en_usoaccion %}#}
                                                                                                {% if periodopoas.edicion %}
                                                                                                    <a href='javascript:;'
                                                                                                       class='btn btn-tini btn-danger delaccion tu'
                                                                                                       idact="{{ accion.id }}"
                                                                                                       title='Eliminar Medio de Verificación'><i
                                                                                                            class='fa fa-remove'></i></a>
                                                                                                {% endif %}
                                                                                                {#                                                                                                    {% endif %}#}
                                                                                                <span>
                                                                                                <i class="fa fa-leaf"></i>
                                                                                                <a id="nomacciones{{ accion.id }}">
                                                                                                    MEDIOS DE VERIFICACIÓN {{ accion.orden }}: {{ accion.descripcion }}
                                                                                                </a>
                                                                                            </span>
                                                                                                <ul id="nomacciones{{ accion.id }}">
{#                                                                                                            {% for accion in acciones %}#}
                                                                                                        <li id="eliminaraccion{{ accion.id }}">
                                                                                                        <span class="p-0 border-0">
                                                                                                           <table class="table table-striped table_primary">
                                                                                                               <thead>
                                                                                                                   <tr>
                                                                                                                    {% for m in meses %}
                                                                                                                        <th style="width: 60px; text-align: center" id="mes{{ forloop.counter }}">{{ m }}</th>
                                                                                                                    {% endfor %}
                                                                                                                   </tr>
                                                                                                               </thead>
                                                                                                               <tbody>
                                                                                                                    <tr>
                                                                                                                        <!-- Detalles por meses -->
                                                                                                                        {% for lista in accion.lista_detalles %}
                                                                                                                            <td class="align-middle pt-0" style="text-align: center;"
                                                                                                                                did="{{ lista.0 }}" colspan="{{ lista.3 }}">
                                                                                                                                <span class="w-100 border-0" style="{% if lista.0 %}background-color: #1c3247 ; font-weight: bold{% endif %}"></span>
                                                                                                                                {{ lista.1|date:'d' }} - {{ lista.2|date:'d' }}
                                                                                                                                {% if lista.0 %} &nbsp;
                                                                                                                                    <br>
                                                                                                                                    <a onclick="formModalBase('{{ lista.0 }}', 'MODIFICAR RANGO DE FECHAS', 'editfechadocumento','','modal-md')"
                                                                                                                                       href="javascript:void(0);" class="btn btn-tini btn-cian-opacity">
                                                                                                                                        <i class="fa fa-edit" title="Editar fechas"></i>
                                                                                                                                    </a>
                                                                                                                                    {% if lista.4 == 0 %}
                                                                                                                                        <a href="javascript:;" title="Eliminar" class="btn btn-tini btn-danger "
                                                                                                                                           onclick="eliminarajax('{{ lista.0  }}',
                                                                                                                                                   'Rango de fechas de {{ lista.1|date:'d-m-y' }} al {{ lista.2|date:'d-m-y' }}',
                                                                                                                                                   'delfechadocumento')">
                                                                                                                                            <i class="fa fa-trash"></i>
                                                                                                                                        </a>
                                                                                                                                    {% endif %}
                                                                                                                                    <i class="fa fa-{% if lista.5 %}ok{% else %}ban-circle{% endif %}"></i>
                                                                                                                                {% endif %}
                                                                                                                            </td>
                                                                                                                        {% endfor %}
                                                                                                                    </tr>
                                                                                                               </tbody>
                                                                                                           </table>
                                                                                                        </span>
                                                                                                    </li>
                                                                                                </ul>
                                                                                            </li>
                                                                                        {% endfor %}
                                                                                    </ul>
                                                                                </li>
                                                                            {% endfor %}
                                                                        {% endif %}
                                                                    {% endwith %}
                                                                </ul>
                                                            </li>
                                                        {% endfor %}
                                                    {% endif %}
                                                {% endwith %}
                                            </ul>
                                        </li>
                                    {% endfor %}
                                {% endif %}
                            {% endwith %}
                        </ul>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div>

    <div class="modal fade static" id="itemstraspaso" style="display: none;">
        <div class="modal-header">
            <h4 id="paneltitle">Traspaso</h4>
        </div>
        <div class="modal-body panelbody">
            <input type="hidden" id="iddepartamentoelejido" name="iddepartamentoelejido">
            <div class="alert alert-info incompletoaddtraspaso" style="display: none;">
                <i class="fa fa-info-sign"></i> Complete todos los campos para continuar
            </div>
            <h5>Copiar a:</h5>
            <select style="width: 400px;" id="id_departamento" name="id_departamento">
                {% for depar in departamento %}
                    <option value="{{ depar.id }}">{{ depar }}</option>
                {% endfor %}
            </select><br>
            <h5>Carrera:</h5>
            <select style="width: 400px;" id="id_carrera" name="id_carrera">
                <option value="0">NINGUNA</option>
                {% for carr in carreras %}
                    <option value="{{ carr.id }}">{{ carr.nombre }} {{ carr.mencion }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="modal-footer">
            <p style="text-align: right; margin-bottom: 0">
                <a href="javascript:;" id="add_traspaso" class='btn btn-success'> Guardar</a>
                <a href="javascript:;" id="cancel_traspaso" class="btn btn-danger"> Cancelar</a>
            </p>
        </div>
    </div>

    {#    modal 16#}
    <div class="modal fade static" id="selectdeleteacciones" style="min-height: 60px">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 id="paneltitle">Eliminar Medio de Verificación</h4>
                </div>
                <div class="modal-body" id="selectdeletepar-body">
                    <input type='hidden' id="codigoaccion" name="codigoaccion" value=""/>
                    <p style="margin-top: 10px;">Esta seguro(a) que desea eliminar: <b id="leyendaaccion"></b></p>
                </div>
                <div class="modal-footer">
                    <p style="text-align: right; margin-bottom: 0">
                        <a href="javascript:;" id="eliminacionmodal_formbuttonaccion" class='btn btn-danger btn-form'>
                            <i class="fa fa-trash"></i> Eliminar </a>
                        <a href="javascript:;" id="eliminacionmodal_cancelaccion" class="btn btn-danger"> &times;
                            Cerrar</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    {#    modal 13#}
    <div class="modal fade static" id="modalindicadoresdel" style="min-height: 60px">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">

                <div class="modal-header">
                    <h4 id="paneltitle">Eliminar Proyecto y/o Actividad</h4>
                </div>
                <div class="modal-body" id="selectdeletepar-body">
                    <input type='hidden' id="codigoindicadordel" name="codigoindicadordel" value=""/>
                    <p style="margin-top: 10px;">Esta seguro(a) que desea eliminar: <b id="leyendaindicadordel"></b></p>
                </div>
                <div class="modal-footer">
                    <p style="text-align: right; margin-bottom: 0">
                        <a href="javascript:;" id="eliminacionmodal_formbuttonindicadordel"
                           class='btn btn-danger btn-form'> <i class="fa fa-trash"></i>
                            Eliminar</a>
                        <a href="javascript:;" id="eliminacionmodal_cancelindicadordel" class="btn btn-danger">&times;
                            Cerrar</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    {#    Modal 10#}
    <div class="modal fade static" id="modaloperativodel" style="min-height: 60px">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 id="paneltitle">Eliminar Proyecto y/o Actividad</h4>
                </div>
                <div class="modal-body" id="selectdeletepar-body">
                    <input type='hidden' id="codigooperativodel" name="codigooperativodel" value=""/>
                    <p style="margin-top: 10px;">Esta seguro(a) que desea eliminar: <b id="leyendaoperativodel"></b></p>
                </div>
                <div class="modal-footer">
                    <p style="text-align: right; margin-bottom: 0">
                        <a href="javascript:;" id="eliminacionmodal_formbuttonoperativodel"
                           class='btn btn-danger btn-form'><i class="fa fa-trash"></i>
                            Eliminar</a>
                        <a href="javascript:;" id="eliminacionmodal_canceloperativodel" class="btn btn-danger"> &times;
                            Cerrar</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    {#    MODAL 6#}
    <div class="modal fade static" id="modaltacticodel" style="min-height: 60px">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 id="paneltitle">Eliminar Objetivo Operativo</h4>
                </div>
                <div class="modal-body" id="selectdeletepar-body">
                    <input type='hidden' id="codigotacticodel" name="codigotacticodel" value=""/>
                    <p style="margin-top: 10px;">Esta seguro(a) que desea eliminar: <b id="leyendatacticodel"></b></p>
                </div>
                <div class="modal-footer">
                    <p style="text-align: right; margin-bottom: 0">
                        <a href="javascript:;" id="eliminacionmodal_formbuttontacticodel"
                           class='btn btn-danger btn-form'> <i class="fa fa-trash"></i>
                            Eliminar</a>
                        <a href="javascript:;" id="eliminacionmodal_canceltacticodel" class="btn btn-danger"> &times;
                            Cerrar</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    {#    modal 12#}
    <div class="modal fade static" id="panelindicadoredit" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header" >
                    <h3 class="paneltitle">Editar Proyecto y/o Actividad </h3>
                </div>
                <div class="modal-body panelbody"  style="padding:15px">
                    <div class="alert alert-info incompletoindicadoredit" style="display: none;">
                        <i class="fa fa-info-sign"></i> Complete todos los campos para continuar
                    </div>
                    <div class="alert alert-danger" id="incompletovaloresindicadoredit" style="display: none;">
                        <i class="fa fa-info-sign"></i> Revise los valores, la fecha/hora DESDE no debe ser mayor a la
                        fecha/hora HASTA
                    </div>
                    <div class="alert alert-danger" id="alertaingresoindicadoredit" style="display: none;"> FECHAS YA
                        FUERON
                        INGRESADAS
                    </div>
                    <div class="row-fluid">
                        <div class="span12" style="width:100%;padding:10px">
                            <form id="formulario2" class='form-vertical' action="" method="POST">
                                Descripción: <textarea rows="3" name="id_desindicadoredit"
                                                       id="id_desindicadoredit"></textarea>
                                Orden:<br><input type="text" name="id_ordenindicadoredit" id="id_ordenindicadoredit"
                                                 class="imp-numbermed-right">
                                <input type="hidden" name="idindicadoredit" id="idindicadoredit">
                            </form>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="javascript:;" class="btn btn-success" id="adicionarycerrarindicadoredit">
                        <i class="fa fa-check-circle"></i> Guardar</a>
                    <a href="javascript:;" class="btn btn-cerrar btn-danger" id="cerrarindicadoredit"> &times;
                        Cerrar</a>
                </div>
            </div>
        </div>
    </div>

    {#    Modal 8#}
    <div class="modal fade static" id="paneloperativoedit" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle">Editar Indicador</h3>
                </div>
                <div class="modal-body panelbody" style="padding:15px">
                    <div class="alert alert-info incompletooperativoedit" style="display: none;">
                        <i class="fa fa-info-sign"></i> Complete todos los campos para continuar
                    </div>
                    <div class="alert alert-danger" id="incompletovaloresoperativoedit" style="display: none;">
                        <i class="fa fa-info-sign"></i> Revise los valores, la fecha/hora DESDE no debe ser mayor a la
                        fecha/hora HASTA
                    </div>
                    <div class="alert alert-danger" id="alertaingresoindicadoredit" style="display: none;"> FECHAS YA
                        FUERON
                        INGRESADAS
                    </div>
                    <div class="row-fluid">
                        <div class="span12" style="width:100%;padding:10px">
                            <form id="formulario2" class='form-vertical' action="" method="POST">
                                Descripción: <textarea rows="3" name="id_desoperativoedit"
                                                       id="id_desoperativoedit"></textarea>
                                Orden:<br><input type="text" name="id_ordenoperativoedit" id="id_ordenoperativoedit"
                                                 class="input_number">
{#                                <br>Ponderación:<br><input type="text" name="id_ponderacionoperativoedit"#}
{#                                                           id="id_ponderacionoperativoedit" class="imp-numbermed-right">#}
                                <input type="hidden" name="idoperativoedit" id="idoperativoedit">
                                Fórmula: <textarea rows="2" name="id_formulaoperativoedit"
                                                       id="id_formulaoperativoedit"></textarea>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="javascript:;" class="btn btn-success" id="adicionarycerraroperativoedit"><i
                            class="fa fa-check-circle"></i>
                        Guardar</a>
                    <a href="javascript:;" class="btn btn-cerrar btn-danger" id="cerraroperativoedit"> &times;
                        Cerrar</a>
                </div>
            </div>
        </div>
    </div>

    {#    Modal 9#}
    <div class="modal fade static" id="paneladdmetas" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle">Metas</h3>
                </div>
                <div class="modal-body panelbody" style="padding:20px">
                    <div class="alert alert-info incompletooperativoedit" style="display: none;">
                        <i class="fa fa-info-sign"></i> Complete todos los campos para continuar
                    </div>
                    <div class="row">
                        <div class="col-2">
                            <h5 class="paneltitle">Indicador:</h5>
                        </div>
                        <div class="col-10 fst-italic" id="idtextoindicador" name="idtextoindicador"
                             style="text-align: left; ">
                        </div>
                    </div>
                    <div class="row-fluid">
                        <form id="formulario2" class='form-vertical' action="" method="POST">
                            <div class="row">
                                <div class="col-2">
                                    <h5 class="lh-lg">Tipo Indicador:</h5>
                                </div>
                                <div class="col-10">
                                    <select name="tipoindicador" id="tipoindicador" >
                                        <option value="0">---SELECCIONE--</option>
                                        <option value="1">NUMÉRICO</option>
                                        <option value="2">PORCENTAJE</option>
                                    </select>
                                </div>
                            </div>
                            <input type="hidden" name="idindicadormeta" id="idindicadormeta">
                            <div class="modal-body" id="listaevaluacionpoa">
                            </div>
                        </form>
                    </div>

                </div>
                <div class="modal-footer">
                    <a href="javascript:;" class="btn btn-success adicionaraddmetas"><i class="fa fa-check-circle"></i>
                        Guardar</a>
                    <a href="javascript:;" class="btn btn-cerrar btn-danger" id="cerraraddmetas"> &times; Cerrar</a>
                </div>
            </div>
        </div>
    </div>
    {#    Modal 3#}
    <div class="modal fade static" id="panelestrategicoedit" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle">Editar Objetivo Estratégico</h3>
                </div>
                <div class="modal-body panelbody" style="padding:15px">
                    <div class="alert alert-info incompletoestrategicoedit" style="display: none;">
                        <i class="fa fa-info-sign"></i> Complete todos los campos para continuar
                    </div>
                    <div class="alert alert-danger" id="incompletovalorestrategicoedit" style="display: none;">
                        <i class="fa fa-info-sign"></i> Revise los valores, la fecha/hora DESDE no debe ser mayor a la
                        fecha/hora HASTA
                    </div>
                    <div class="alert alert-danger" id="alertaingresoestrategicoedit" style="display: none;"> FECHAS YA
                        FUERON
                        INGRESADAS
                    </div>
                    <div class="row-fluid">
                        <div class="span12" style="width:100%;padding:10px">
                            <form id="formulario2" class='form-vertical' action="" method="POST">
                                Descripción: <textarea rows="3" name="id_desestrategicoedit"
                                                       id="id_desestrategicoedit"></textarea>
                                Orden:<br><input type="text" name="id_ordenestrategicoedit" id="id_ordenestrategicoedit"
                                                 class="input_number">
                                <input type="hidden" name="idestrategicoedit" id="idestrategicoedit">
                            </form>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="javascript:;" class="btn btn-success" id="adicionarycerrarestrategicoedit"><i
                            class="fa fa-check-circle"></i> Guardar</a>
                    <a href="javascript:;" class="btn btn-cerrar btn-danger" id="cerrarestrategicoedit"> &times;
                        Cerrar</a>
                </div>
            </div>
        </div>
    </div>

    {#    MODAL 5#}
    <div class="modal fade static" id="paneltacticoedit" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle">Editar Objetivo Operativo</h3>
                </div>
                <div class="modal-body panelbody" style="padding:15px">
                    <div class="alert alert-info incompletotacticoedit" style="display: none;">
                        <i class="fa fa-info-sign"></i> Complete todos los campos para continuar
                    </div>
                    <div class="alert alert-danger" id="incompletovalorestacticoedit" style="display: none;">
                        <i class="fa fa-info-sign"></i> Revise los valores, la fecha/hora DESDE no debe ser mayor a la
                        fecha/hora HASTA
                    </div>
                    <div class="alert alert-danger" id="alertaingresotacticoedit" style="display: none;"> FECHAS YA
                        FUERON
                        INGRESADAS
                    </div>
                    <div class="row-fluid">
                        <div class="span12" style="width:100%;padding:10px">
                            <form id="formulario2" class='form-vertical' action="" method="POST">
                                Descripción: <textarea rows="3" name="id_destacticoedit"
                                                       id="id_destacticoedit"></textarea>
                                Orden:<br><input type="text" name="id_ordentacticoedit" id="id_ordentacticoedit"
                                                 class="imp-numbermed-right">
                                <input type="hidden" name="idtacticoedit" id="idtacticoedit">
                            </form>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="javascript:;" class="btn btn-success" id="adicionarycerrartacticoedit"><i
                            class="fa fa-check-circle"></i>
                        Guardar</a>
                    <a href="javascript:;" class="btn btn-cerrar btn-danger" id="cerrartacticoedit"> &times; Cerrar</a>
                </div>
            </div>
        </div>
    </div>

    {#    modal 15#}
    <div class="modal fade static" id="itemspanelaccionedit" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle">Editar Medios de Verificación</h3>
                </div>
                {% comment %}        <div class="modal-body panelbody">
                            <div class="alert alert-info incompletoaccionedit" style="display: none;">
                                <i class="fa fa-info-sign"></i> Complete todos los campos para continuar
                            </div>
                            <div class="alert alert-danger" id="incompletovaloresaccionedit" style="display: none;">
                                <i class="fa fa-info-sign"></i> Revise los valores, la fecha/hora DESDE no debe ser mayor a la fecha/hora HASTA
                            </div>
                            <div class="alert alert-danger" id="alertaingresoaccionedit" style="display: none;"> FECHAS YA FUERON INGRESADAS</div>
                            <div class="row-fluid">
                                <form id="formulario2" class='form-vertical' action="" method="POST" >
                                    Descripción: <input type="text" name="id_desaccionedit" id="id_desaccionedit">
                                    Orden:<br><input type="text" name="id_ordenaccionedit" id="id_ordenaccionedit" class="imp-numbermed-right">
                                    <input type="hidden" name="idaccionedit" id="idaccionedit">
                                </form>
                            </div>
                        </div>{% endcomment %}
                <div class="modal-body panelbody" style="padding:15px">
                    <div class="alert alert-info incompletoaccionedit" style="display: none;">
                        <i class="fa fa-info-sign"></i> Complete todos los campos para continuar
                    </div>
                    <div class="alert alert-danger" id="incompletovaloresaccionedit" style="display: none;">
                        <i class="fa fa-info-sign"></i> Revise los valores, la fecha/hora DESDE no debe ser mayor a la
                        fecha/hora HASTA
                    </div>
                    <div class="alert alert-danger" id="alertaingresoaccionedit" style="display: none;"> FECHAS YA
                        FUERON
                        INGRESADAS
                    </div>
                    <div class="row-fluid" style="width:100%;padding:10px">
                        <form id="formulario2" class='form-vertical' action="" method="POST">
                            Descripción:
                            <textarea rows="3" name="id_desaccionedit" id="id_desaccionedit"></textarea>
                            Tipo:
{#                            <select style="width: 100%;" name="tipoaccionedit" id="tipoaccionedit">#}
{#                                {% for tipo in tipoaccion %}#}
{#                                    <option value="{{ tipo.0 }}">{{ tipo.1 }}</option>#}
{#                                {% endfor %}#}
{#                            </select>#}
                            {#                    Medio Verificación:#}
                            {#                    <select style="width: 100%;" name="medioaccionedit" id="medioaccionedit">#}
                            {#                        {% for medio in medioverificacion %}#}
                            {#                            <option value="{{ medio.id }}">{{ medio.nombre }}</option>#}
                            {#                        {% endfor %}#}
                            {#                    </select>#}
{#                            Observación:#}
{#                            <textarea rows="3" name="id_obsaccionedit" id="id_obsaccionedit"></textarea>#}
                            {#                    Enlace:<br>#}
                            {#                    <input id="id_enlaceaccionedit" type="text" class="imp-25" name="id_enlaceaccionedit" maxlength="500" style="width: 100%;">#}
                            <br>Orden:<br><input type="text" name="id_ordenaccionedit" id="id_ordenaccionedit"
                                                 class="imp-numbermed-right">
                            {#                    Porcentaje: <input id="porcentajeaccionedit" type="text" class="imp-number validate[required]" value="0.00" name="porcentajeaccionedit">#}
                            <input type="hidden" name="idaccionedit" id="idaccionedit">
                        </form>
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="javascript:;" class="btn btn-success" id="adicionarycerraraccionedit"><i
                            class="fa fa-check-circle"></i> Guardar</a>
                    <a href="javascript:;" class="btn btn-cerrar btn-danger" id="cerraraccionedit"> &times; Cerrar</a>
                </div>
            </div>
        </div>
    </div>

    {#    modal 11#}
    <div class="modal fade static" id="itemspaneladdaciones" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle">Adicionar Medios de Verificación</h3>
                </div>
                <div class="modal-body panelbody" style="padding:15px">
                    <div class="alert alert-info incompletoaddaciones" style="display: none;">
                        <i class="fa fa-info-sign"></i> Complete todos los campos para continuar
                    </div>
                    <div class="alert alert-danger" id="incompletovaloresaddaciones" style="display: none;">
                        <i class="fa fa-info-sign"></i> Revise los valores, la fecha/hora DESDE no debe ser mayor a la
                        fecha/hora HASTA
                    </div>
                    <div class="alert alert-danger" id="alertaingresoaddaciones" style="display: none;"> FECHAS YA
                        FUERON
                        INGRESADAS
                    </div>
                    <div class="row-fluid">
                        <div class="span12" style="width:100%;padding:10px">

                            <form id="formulario2" class='form-vertical' action="" method="POST">
                                Descripción:
                                <textarea rows="3" name="id_desaccionadd" id="id_desaccionadd"></textarea>
{#                                Tipo:#}
{#                                <select style="width: 100%;" name="tipoaccionadd" id="tipoaccionadd">#}
{#                                    {% for tipo in tipoaccion %}#}
{#                                        <option value="{{ tipo.0 }}">{{ tipo.1 }}</option>#}
{#                                    {% endfor %}#}
{#                                </select>#}
{#                                Observación:#}
{#                                <textarea rows="3" name="id_obsaccionadd" id="id_obsaccionadd"></textarea>#}
                                <br>Orden:<br><input type="text" name="id_ordenaccionadd" id="id_ordenaccionadd"
                                                     class="imp-numbermed-right">
                                <input type="hidden" name="idindicadoradd" id="idindicadoradd">
                            </form>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="javascript:;" class="btn btn-success" id="adicionarycerraraccionesadd"><i
                            class="fa fa-plus"></i> Adicionar </a>
                    <a href="javascript:;" class="btn btn-cerrar btn-danger" id="cerraraccionesadd"> &times; Cerrar</a>
                </div>
            </div>
        </div>
    </div>

    {#    modal 7#}
    <div class="modal fade static" id="modaladdindicadores" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle">Adicionar Proyecto y/o Actividad</h3>
                </div>
                <div class="modal-body panelbody" style="padding:15px">
                    <div class="alert alert-info incompletoaddindicadores" style="display: none;">
                        <i class="fa fa-info-sign"></i> Complete todos los campos para continuar
                    </div>
                    <div class="alert alert-danger" id="incompletovaloresaddindicadores" style="display: none;">
                        <i class="fa fa-info-sign"></i> Revise los valores, la fecha/hora DESDE no debe ser mayor a la
                        fecha/hora HASTA
                    </div>
                    <div class="alert alert-danger" id="alertaingresoaddindicadores" style="display: none;"> FECHAS YA
                        FUERON
                        INGRESADAS
                    </div>
                    <div class="row-fluid">
                        <div class="span12" style="width:100%;padding:10px">
                            <form id="formulario2" class='form-vertical' action="" method="POST">
                                Descripción:
                                <textarea rows="3" name="id_desindicadoradd" id="id_desindicadoradd"></textarea>
                                <br>Orden.:<br><input type="text" name="id_ordenindicadoradd" id="id_ordenindicadoradd"
                                                      class="imp-numbermed-right">
                                <input type="hidden" name="idoperativoadd" id="idoperativoadd">
                            </form>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="javascript:;" class="btn btn-success" id="adicionarycerrarindicadoresadd"><i
                            class="fa fa-plus"></i> Adicionar</a>
                    <a href="javascript:;" class="btn btn-cerrar btn-danger" id="cerrarindicadoresadd">&times;
                        Cerrar</a>
                </div>
            </div>
        </div>
    </div>

    {#    Modal 4#}
    <div class="modal fade static" id="modaladdtactico" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle">Adicionar Indicador</h3>
                </div>
                <div class="modal-body panelbody" style="padding:15px">
                    <div class="alert alert-info incompletoaddtactico" style="display: none;">
                        <i class="fa fa-info-sign"></i> Complete todos los campos para continuar
                    </div>
                    <div class="alert alert-danger" id="incompletovaloresaddtactico" style="display: none;">
                        <i class="fa fa-info-sign"></i> Revise los valores, la fecha/hora DESDE no debe ser mayor a la
                        fecha/hora HASTA
                    </div>
                    <div class="alert alert-danger" id="alertaingresoaddtactico" style="display: none;"> FECHAS YA
                        FUERON
                        INGRESADAS
                    </div>
                    <div class="row-fluid">
                        <div class="span12" style="width:100%;padding:10px">

                            <form id="formulario2" class='form-vertical' action="" method="POST">
                                Descripción:
                                <textarea rows="3" name="id_destacticoadd" id="id_destacticoadd"></textarea>
                                <br>Orden.:<br><input type="text" name="id_ordentacticoadd" id="id_ordentacticoadd"
                                                      class="imp-numbermed-right">
                                <input type="hidden" name="idtacticoadd" id="idtacticoadd">
                            </form>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="javascript:;" class="btn btn-success" id="adicionarycerrartacticoadd"><i
                            class="fa fa-plus"></i>
                        Adicionar</a>
                    <a href="javascript:;" class="btn btn-cerrar btn-danger" id="cerraritacticoesadd"> &times;
                        Cerrar</a>
                </div>
            </div>
        </div>
    </div>

    {#    Modal 2#}
    <div class="modal fade static" id="modaladdestrategico" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle">Adicionar Objetivos Operativos</h3>
                </div>
                <div class="modal-body panelbody" style="padding:15px">
                    <div class="alert alert-info incompletoaddestrategico" style="display: none;">
                        <i class="fa fa-info-sign"></i> Complete todos los campos para continuar
                    </div>
                    <div class="alert alert-danger" id="incompletovaloresaddestrategico" style="display: none;">
                        <i class="fa fa-info-sign"></i> Revise los valores, la fecha/hora DESDE no debe ser mayor a
                        la
                        fecha/hora HASTA
                    </div>
                    <div class="alert alert-danger" id="alertaingresoaddestrategico" style="display: none;"> FECHAS
                        YA
                        FUERON INGRESADAS
                    </div>
                    <div class="row-fluid">
                        <div class="span12" style="width:100%;padding:10px">
                            <form id="formulario2" class='form-vertical' action="" method="POST">
                                Descripción:
                                <textarea rows="3" name="id_desestrategicoadd" id="id_desestrategicoadd"></textarea>
                                <br>Orden.:<br><input type="text" name="id_ordenestrategicoadd"
                                                      id="id_ordenestrategicoadd"
                                                      class="imp-numbermed-right">
                                <input type="hidden" name="idestrategicoadd" id="idestrategicoadd">
                            </form>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="javascript:;" class="btn btn-success" id="adicionarycerrarestrategicoadd"><i
                            class="fa fa-plus"></i> Adicionar</a>
                    <a href="javascript:;" class="btn btn-cerrar btn-danger" id="cerrarestrategicoadd"> &times;
                        Cerrar</a>
                </div>
            </div>
        </div>
    </div>

    {#    Modal 1#}
    <div class="modal fade static" id="paneladdestrategico" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle">Adicionar Objetivo Estratégico</h3>
                </div>
                <div class="modal-body panelbodyestrategico">
                </div>
                <div class="modal-footer">
                    <table class="pull-right">
                        <tr>
                            <td id="aprobarcerrar"><a href="javascript:;"
                                                      class="btn btn-aprobarestrategico btn-success ">
                                <i class="fa fa-plus"></i> Adicionar</a></td>
                            <td><a href="javascript:;" class="btn btn-cerrarestrategico btn-danger"> &times; Cerrar</a>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

