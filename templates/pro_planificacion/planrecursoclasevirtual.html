{% extends "ajaxformbs.html" %}
{% load sga_extras %}
{% block heading %}
    <script type="text/javascript">
        var itemsblib =1;
        var lista_items1 = [];
        var obj=0;
        var enf=0;
        var rec=0;
        var eva=0;

        $(function() {
            {#            {% for unidadeslis in listadounidades %}#}
            {#alert(".listadotareas_"+ {{ unidadeslis.0 }})#}
            {#                if($(".listadotareas_"+ {{ unidadeslis.0 }}).length == 0) {#}
            {#                    alert('no tiene')#}
            {#                }else{#}
            {#                    alert('si tiene')#}
            {#                }#}
            {##}
            {#            {% endfor %}#}
            $(".notificarmasivo").click(function() {
                $("#divnotificarmasivo").modal({backdrop:'static', width: '500px'}).modal('show');
            });
            $(".cancelaaprobacion").click(function() {
                $("#divnotificarmasivo").modal("hide");
            });

            $(".savenotificar").click(function() {
                bloqueointerface();
                $.post("/pro_planificacion", {'action':'notificacionmasiva', 'materia': {{ silabocab.materia.id }} }, function(data) {
                    if (data.result == 'ok') {
                        location.reload();
                    }
                }, 'json');
            });
            $("#id_objetivo").css({'text-transform': 'none'});
            $("#id_enfoque").css({'text-transform': 'none'});
            $("#id_recurso").css({'text-transform': 'none'});
            $("#id_evaluacion").css({'text-transform': 'none'});
            $("#id_subtema").css({'text-transform': 'none'});
            $("#id_subtema").addClass("validate[required]");
            $("#id_tema").addClass("validate[required]");
            $("#desplegar_obj").each(function () {
                $(this).trigger('click');
            });

            $(".editar_objetivo").click(function() {
                var id = $(this).attr('ids');
                $.get("/pro_planificacion", {'action':'editarobjetivoaprendizaje', 'ids': id}, function(data) {
                    var dato;
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $("#itemspanelo").modal({backdrop:'static', width: '610px'}).modal('show');
                        $("#id_objetivo").val(data.objetivo);
                        $("#idso").val(data.ids);
                    }
                }, 'json');

            });
            $("#itemspanelo .btn-cerrar").click(function() {
                $("#itemspanelo").modal("hide");
            });
            $(".delactividad").click(function() {
                var idacti = $(this).attr('idacti');
                var nomacti = $(this).attr('nomacti');
                var opciondel = $(this).attr('opciondel');
                var numerosemana = $(this).attr('numerosemana');
                $("#nomtitulo").html('')
                if(opciondel==1){
                    $("#nomtitulo").html('Eliminar Tarea')
                }
                if(opciondel==2){
                    $("#nomtitulo").html('Eliminar Foro')
                }
                if(opciondel==3){
                    $("#nomtitulo").html('Eliminar Test')
                }
                if(opciondel==4){
                    $("#nomtitulo").html('Eliminar guia estudiante')
                }
                if(opciondel==5){
                    $("#nomtitulo").html('Eliminar gruia docente')
                }
                if(opciondel==6){
                    $("#nomtitulo").html('Eliminar Presentación')
                }
                if(opciondel==7){
                    $("#nomtitulo").html('Eliminar Compendio')
                }
                if(opciondel==8){
                    $("#nomtitulo").html('Eliminar Material Adicional')
                }
                if(opciondel==9){
                    $("#nomtitulo").html('Eliminar Video Magistral')
                }
                if(opciondel==10){
                    $("#nomtitulo").html('Eliminar Tarea Práctica')
                }
                nomacti = 'Semana #' + numerosemana + ' | ' + nomacti;
                $("#id_codigoactividad").val(idacti)
                $("#id_codigoopcion").val(opciondel)
                $("#id_nomactividad").html(nomacti)
                $("#itemsdelactividad").modal("show");
            });
            $(".delactividadadmision").click(function() {
                var idacti = $(this).attr('idacti');
                var nomacti = $(this).attr('nomacti');
                var opciondel = $(this).attr('opciondel');
                var numerosemana = $(this).attr('numerosemana');
                $("#nomtituloadmision").html('')
                $("#nomtituloadmision").html('Eliminar Test')
                nomacti = 'Semana #' + numerosemana + ' | ' + nomacti;
                $("#id_codigoactividadadmision").val(idacti)
                $("#id_codigoopcionadmision").val(opciondel)
                $("#id_nomactividadadmision").html(nomacti)
                $("#itemsdelactividadadmision").modal("show");
            });
            $(".eliminaractividad").click(function() {
                var iddelactividad= $("#id_codigoactividad").val()
                var idcodigoopcion= $("#id_codigoopcion").val()
                $.ajax({
                    type: "POST",
                    url: "/pro_planificacion",
                    data: {"action": "eliminarrecurso", "iddelactividad": iddelactividad, "idcodigoopcion": idcodigoopcion },
                    success: function(data) {
                        if (data.result=='ok'){
                            location.reload();
                            bloqueointerface();
                        }
                    },
                    error: function() {
                        intentos += 1;
                    },
                    dataType: "json"
                });
            });
            $(".eliminaractividadadmision").click(function() {
                var iddelactividad= $("#id_codigoactividadadmision").val()
                var idcodigoopcion= $("#id_codigoopcionadmision").val()
                $.ajax({
                    type: "POST",
                    url: "/pro_planificacion",
                    data: {"action": "eliminarrecursoadmision", "iddelactividad": iddelactividad, "idcodigoopcion": idcodigoopcion },
                    success: function(data) {
                        if (data.result=='ok'){
                            location.reload();
                            bloqueointerface();
                        }
                    },
                    error: function() {
                        intentos += 1;
                    },
                    dataType: "json"
                });
            });
            $(".delacticerrar").click(function() {
                $("#itemsdelactividad").modal("hide");
            });
            $(".delacticerraradmision").click(function() {
                $("#itemsdelactividadadmision").modal("hide");
            });
            $("#itemspanelo #adicionarobj").click(function(){
                var cont = $("#id_objetivo").val();
                if (cont.length >0) {
                    var ids = $("#idso").val();
                    var formdata = new FormData($("#formobj")[0]);
                    try {
                        formdata.append("objetivo", JSON.stringify(cont));
                    } catch (err){
                        console.log(err.message);
                    }
                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: "/pro_planificacion",
                        data: formdata,
                        success: function(data) {
                            if (data.result == 'ok') {
                                bloqueointerface();
                                $("#itemspanelo").modal("hide");
                                location.reload();
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        },
                        error: function() {
                            $.unblockUI();
                            smoke.alert("Error al enviar los datos.");
                        },
                        dataType: "json",
                        cache: false,
                        contentType: false,
                        processData: false
                    });
                }else{
                    smoke.alert("Es obligatirio llenar la información Objetivo Apendizaje");
                }
            });
            $(".editar_enfoque").click(function() {
                var id = $(this).attr('ids');
                $.get("/pro_planificacion", {'action':'editenfoquemetodologico', 'ids': id}, function(data) {
                    var dato;
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $("#itemspanelenf").modal({backdrop:'static', width: '610px'}).modal('show');
                        $("#id_enfoque").val(data.enfoque);
                        $("#idse").val(data.ids);
                    }
                }, 'json');

            });
            $("#itemspanelenf .btn-cerrar").click(function() {
                $("#itemspanelenf").modal("hide");
            });
            $("#itemspanelenf #adicionarenf").click(function(){
                var cont = $("#id_enfoque").val();
                if (cont.length >0) {
                    var ids = $("#idse").val();
                    var formdata = new FormData($("#formenf")[0]);
                    try {
                        formdata.append("enfoque", JSON.stringify(cont));
                    } catch (err) {
                        console.log(err.message);
                    }
                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: "/pro_planificacion",
                        data: formdata,
                        success: function (data) {
                            if (data.result == 'ok') {
                                bloqueointerface();
                                $("#itemspanelenf").modal("hide");
                                location.reload();
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        },
                        error: function () {
                            $.unblockUI();
                            smoke.alert("Error al enviar los datos.");
                        },
                        dataType: "json",
                        cache: false,
                        contentType: false,
                        processData: false
                    });
                }else{
                    smoke.alert("Es obligatirio llenar la información Enfoque Metodológico");
                }
            });
            $(".editar_recurso").click(function() {
                var id = $(this).attr('ids');
                $.get("/pro_planificacion", {'action':'editrecursodidactico', 'ids': id}, function(data) {
                    var dato;
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $("#itemspanelrec").modal({backdrop:'static', width: '610px'}).modal('show');
                        $("#id_recurso").val(data.recurso);
                        $("#idsr").val(data.ids);
                    }
                }, 'json');
            });
            $("#itemspanelrec .btn-cerrar").click(function() {
                $("#itemspanelrec").modal("hide");
            });
            $("#itemspanelrec #adicionarrec").click(function(){
                var cont = $("#id_recurso").val();
                if (cont.length >0) {
                    var ids = $("#idsr").val();
                    var formdata = new FormData($("#formrec")[0]);
                    try {
                        formdata.append("recurso", JSON.stringify(cont));
                    } catch (err){
                        console.log(err.message);
                    }
                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: "/pro_planificacion",
                        data: formdata,
                        success: function(data) {
                            if (data.result == 'ok') {
                                bloqueointerface();
                                $("#itemspanelrec").modal("hide");
                                location.href="/pro_planificacion?action=planclasevirtual&silaboid="+data.ids;
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        },
                        error: function() {
                            $.unblockUI();
                            smoke.alert("Error al enviar los datos.");
                        },
                        dataType: "json",
                        cache: false,
                        contentType: false,
                        processData: false
                    });
                }else{
                    smoke.alert("Es obligatirio llenar la información Recursos Didácticos");
                }
            });

            $(".editar_evaluacion").click(function() {
                var id = $(this).attr('ids');
                $.get("/pro_planificacion", {'action':'editevaluacion', 'ids': id}, function(data) {
                    var dato;
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $("#itemspaneleva").modal({backdrop:'static', width: '610px'}).modal('show');
                        $("#id_evaluacion").val(data.evaluacion);
                        $("#idsv").val(data.ids);
                    }
                }, 'json');

            });
            $("#itemspaneleva .btn-cerrar").click(function() {
                $("#itemspaneleva").modal("hide");
            });
            $("#itemspaneleva #adicionareva").click(function(){
                var cont = $("#id_evaluacion").val();
                if (cont.length >0) {
                    var ids = $("#idsv").val();
                    var formdata = new FormData($("#formeva")[0]);
                    try {
                        formdata.append("evaluacion", JSON.stringify(cont));
                    } catch (err){
                        console.log(err.message);
                    }
                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: "/pro_planificacion",
                        data: formdata,
                        success: function(data) {
                            if (data.result == 'ok') {
                                bloqueointerface();
                                $("#itemspaneleva").modal("hide");
                                location.href="/pro_planificacion?action=planclasevirtual&silaboid="+data.ids;
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        },
                        error: function() {
                            $.unblockUI();
                            smoke.alert("Error al enviar los datos.");
                        },
                        dataType: "json",
                        cache: false,
                        contentType: false,
                        processData: false
                    });
                }else{
                    smoke.alert("Es obligatirio llenar la información Evaluación");
                }
            });
            $("#itemspanelduplicar_silabo .btn-cerrar").click(function() {
                $("#itemspanelduplicar_silabo").modal("hide");
            });
            $(".duplicar_silabo").click(function() {
                var id = $(this).attr('ids');
                $.get("/pro_planificacion", {'action':'duplicar_silabo', 'ids': id}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $(".panelbody").html(data.data);
                        $("#itemspanelduplicar_silabo").modal({backdrop:'static', width: '610px'}).modal('show');
                    }
                }, 'json');

            });
            $(".duplicar_silabo_otro_docente").click(function() {
                var id = $(this).attr('ids');
                $.get("/pro_planificacion", {'action':'duplicar_silabo_otro_docente', 'ids': id}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $(".panelbody").html(data.data);
                        $("#itemspanelduplicar_silabo").modal({backdrop:'static', width: '700px'}).modal('show');
                    }
                }, 'json');

            });
            $("#itemspaneldetalle_temas_subtemas .btn-cerrar").click(function() {
                $("#itemspaneldetalle_temas_subtemas").modal("hide");
            });
            $(".detalle_tst_registrar").click(function() {
                var id = $(this).attr('ids');
                $.get("/pro_planificacion", {'action':'detalle_temasxplanificar', 'ids': id}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $(".panelbody").html(data.data);
                        $("#itemspaneldetalle_temas_subtemas").modal({backdrop:'static', width: '1000px'}).modal('show');
                    }
                }, 'json');
            });
            $("#itemspanelplanificacionsalida .btn-cerrar").click(function() {
                $("#itemspanelplanificacionsalida").modal("hide");
            });
            $(".addplanificacionsalida").click(function () {
                var id = $(this).attr('ids');
                $.unblockUI();
                $("#itemspanelplanificacionsalida").modal({backdrop:'static', width: '610px'}).modal('show');
                $("#ids").val(id);
            });
            $("#adicionarplanificacionsalida").click(function () {
                var cont = $("#contenido").val();
                if (cont.length >0) {
                    var ids = $("#ids").val();
                    $.ajax({
                        type: "POST",
                        url: "/pro_planificacion",
                        data: {'action': 'addplanificacion_salida', 'ids': ids, 'cont':cont},
                        success: function (data) {
                            if (data.result == 'ok') {
                                $.unblockUI();
                                bloqueointerface();
                                $("#itemspanelplanificacionsalida").modal("hide");
                                location.href="/pro_planificacion?action=planclasevirtual&silaboid="+data.ids;
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        },error: function () {
                            $.unblockUI();
                            control.val(0).trigger("change");
                            smoke.alert("Error de conexion.");
                        },
                        dataType: "json"
                    });
                }else{
                    smoke.alert("Es obligatirio llenar la información de descricripcion de la salida");
                }
            });
            $("#itemspaneleditplanificacionsalida .btn-cerrar").click(function() {
                $("#itemspaneleditplanificacionsalida").modal("hide");
            });
            $(".editplanificacionsemanalsalida").click(function () {
                var id = $(this).attr('ids');
                $.unblockUI();
                $.get("/pro_planificacion", {'action':'editplanificacion_salida', 'ids': id}, function(data) {
                    if (data.result == 'ok') {
                        $("#itemspaneleditplanificacionsalida").modal({backdrop:'static', width: '610px'}).modal('show');
                        $("#id_contenido").val(data.descripcion);
                        $("#ids").val(id);
                    }
                }, 'json');
            });
            $("#editplanificacionsalida").click(function () {
                var cont = $("#id_contenido").val();
                if (cont.length >0) {
                    var id = $("#ids").val();
                    $.ajax({
                        type: "POST",
                        url: "/pro_planificacion",
                        data: {'action': 'editplanificacion_salida', 'ids': id, 'cont':cont},
                        success: function (data) {
                            if (data.result == 'ok') {
                                $.unblockUI();
                                bloqueointerface();
                                $("#itemspanelplanificacionsalida").modal("hide");
                                location.href="/pro_planificacion?action=planclasevirtual&silaboid="+data.ids;
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        },error: function () {
                            $.unblockUI();
                            control.val(0).trigger("change");
                            smoke.alert("Error de conexion.");
                        },
                        dataType: "json"
                    });
                }else{
                    smoke.alert("Es obligatirio llenar la información de descricripcion de la salida");
                }
            });
            $("#id_tema").change(function () {
                var id = $(this).val();
                if (id.length > 0){
                    $("#id_subtema").prop( "disabled", false );
                }else{
                    $("#id_subtema").prop( "disabled", true );
                }
                {#                alert(id);#}
            });
            $("#itemspaneladicionarsubtemas .btn-cerrar").click(function() {
                $("#itemspaneladicionarsubtemas").modal("hide");
            });
            $(".adicionarsubtemas").click(function () {
                var id = $(this).attr('ids');
                $.unblockUI();
                $.get("/pro_planificacion", {'action':'adicionar_subtemas', 'ids': id}, function(data) {
                    if (data.results) {
                        $('#id_tema').empty().append('<option value="">---------</option>').val(0).trigger("change");
                        for (elemento in data.listatema) {
                            $('#id_tema').append('<option value="' + data.listatema[elemento][0] + '">' + data.listatema[elemento][1] + '</option>');
                        }
                        $("#itemspaneladicionarsubtemas").modal({backdrop:'static', width: '610px'}).modal('show');
                        $("#ids").val(id);
                        $(".elementosubtema").remove();
                        for (elemento in data.lista){
                            $("#contenidosubtemas").append('<tr class="elementosubtema"  id="fila_' + itemsblib + '">' +
                                '<td style="text-align: center ; display:none" class="idtema">' + data.lista[elemento][0] + '</td>' +
                                '<td width="45%" style="text-align: left;" class="tema">' + data.lista[elemento][1] + '</td>' +
                                '<td width="45%" style="text-align: left;" class="subtema">' + data.lista[elemento][2] + '</td>' +
                                '<td style="text-align:center;" width="5%"><a class="btn btn-mini btn-danger tu eliminarsubtema" title="Eliminar"><i class="fa fa-trash"></i> Eminiar</a></td>' +
                                '</tr>');
                            itemsblib += 1;
                            actualizar_lista_subtemas();
                            eliminar__subtemas();
                        }
                    }
                }, 'json');
            });
            $(".addsubtema").click(function () {
                var idt = $("#id_tema").val();
                var tema = $("#id_tema option:selected").text();
                var subtema = $("#id_subtema").val();
                if (subtema.length>0) {
                    if (leer_lista_subtemas(subtema) == 0) {
                        $("#contenidosubtemas").append('<tr class="elementosubtema"  id="fila_' + itemsblib + '">' +
                            '<td style="text-align: center ; display:none" class="idtema">' + idt + '</td>' +
                            '<td width="45%" style="text-align: left;" class="tema">' + tema + '</td>' +
                            '<td width="45%" style="text-align: left;" class="subtema">' + subtema + '</td>' +
                            '<td style="text-align:center;" width="5%"><a class="btn btn-mini btn-danger tu eliminarsubtema" title="Eliminar"><i class="fa fa-trash"></i> Eminiar</a></td>' +
                            '</tr>');
                        itemsblib += 1;
                        actualizar_lista_subtemas();
                        eliminar__subtemas();
                        $("#adicionarsubtema").prop( "disabled", false );
                    }
                    else {
                        smoke.alert("El subtema ya se encuentra registrado");
                    }
                    document.getElementById('id_subtema').value = '';
                }
            });
            actualizar_lista_subtemas = function () {
                lista_items1 = [];
                $(".elementosubtema").each(function () {
                    var item = {
                        idtema: $(this).find(".idtema").html(),
                        tema: $(this).find(".tema").html(),
                        subtema: $(this).find(".subtema").html()
                    };
                    lista_items1.push(item);
                });
            };
            eliminar__subtemas = function () {
                $(".eliminarsubtema").unbind();
                $(".eliminarsubtema").click(function () {
                    var padre = $(this).parent().parent();
                    padre.remove();
                    actualizar_lista_subtemas();
                });
            };
            $(".btn-adicionarsubtema").click(function () {
                var id = $("#ids").val();
                if (lista_items1.length>0) {
                    $.ajax({
                        type: "POST",
                        url: "/pro_planificacion",
                        data: {'action': 'addsubtemasadicional', 'ids': id, 'lista': JSON.stringify(lista_items1)},
                        success: function (data) {
                            if (data.result == 'ok') {
                                $.unblockUI();
                                bloqueointerface();
                                $("#itemspaneladicionarsubtemas").modal("hide");
                                location.href = "/pro_planificacion?action=planclasevirtual&silaboid=" + data.ids;
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        }, error: function () {
                            $.unblockUI();
                            control.val(0).trigger("change");
                            smoke.alert("Error de conexion.");
                        },
                        dataType: "json"
                    });
                }else{
                    $("#itemspaneladicionarsubtemas").modal("hide");
                }
            });
            $("#itemspanelimportar_recurso_periodo .btn-cerrar").click(function() {
                $("#itemspanelimportar_recurso_periodo").modal("hide");
            });
            $(".duplicar_recurso_periodo").click(function() {
                var idsemanal = $(this).attr('idsemanal');
                var ids = $(this).attr('ids');
                var semana = $(this).attr('semana');
                var numsemana = $(this).attr('numsemana');
                var fini = $(this).attr('fini');
                var ffin = $(this).attr('ffin');
                $.post("/pro_planificacion", {'action':'duplicar_recursossilabo_otro_periodo', 'ids': ids, 'semana':semana, 'numsemana':numsemana, 'fini':fini, 'ffin':ffin, 'idsemanal':idsemanal}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $(".panelbody").html(data.data);
                        $("#itemspanelimportar_recurso_periodo").modal({backdrop:'static', width: '750px'}).modal('show');
                    }
                }, 'json');
            });

            $(".duplicar_recurso_periodo_todo").click(function() {
                var ids = $(this).attr('ids');
                $.post("/pro_planificacion", {'action':'duplicar_recursossilabo_otro_periodo_todo', 'ids': ids}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $(".panelbody").html(data.data);
                        $("#itemspanelimportar_recurso_periodo").modal({backdrop:'static', width: '750px'}).modal('show');
                    }
                }, 'json');
            });

            if($(".recorrepresentacion").length == 0) {
                $("#muestramasivopresentacion").css("display", "none");
            }else{
                var existepresentacion = 0
                $(".recorrepresentacion").each(function(){
                    estadorubricapres = $(this).attr("codestado")
                    if(estadorubricapres == 2){
                        existepresentacion = 1
                    }
                });
                if (existepresentacion == 0){
                    $("#muestramasivopresentacion").css("display", "none");
                }
            }

            if($(".recorrecompendio").length == 0) {
                $("#muestramasivocompendio").css("display", "none");
            }else{
                var existecompendio = 0
                $(".recorrecompendio").each(function(){
                    estadorubrica = $(this).attr("codestado")
                    if(estadorubrica == 2){
                        existecompendio = 1
                    }
                });
                if (existecompendio == 0){
                    $("#muestramasivocompendio").css("display", "none");
                }
            }

            if($(".recorrematerial").length == 0) {
                $("#muestramasivomaterial").css("display", "none");
            }else{
                var existematerial = 0
                $(".recorrematerial").each(function(){
                    estadorubricamat = $(this).attr("codestado")
                    if(estadorubricamat == 2){
                        existematerial = 1
                    }
                });
                if (existematerial == 0){
                    $("#muestramasivomaterial").css("display", "none");
                }
            }

            if($(".recorreguias").length == 0) {
                $("#muestramasivoguias").css("display", "none");
            }else{
                var existeguias = 0
                $(".recorreguias").each(function(){
                    estadorubrica = $(this).attr("codestado")
                    if(estadorubrica == 2){
                        existeguias = 1
                    }
                });
                if (existeguias == 0){
                    $("#muestramasivoguias").css("display", "none");
                }
            }

            $(".migrar_todocompendio").click(function() {
                var estadorubrica = 0

                $(".panelbody_migrarcompendio").html('hh');
                $("#itemspanelmigrar_compendio").modal({backdrop:'static', width: '750px'}).modal('show');
            });

            $(".btn-cerrarcompendios").click(function() {
                $("#itemspanelmigrar_compendio").modal("hide");
            });


            $("#desplegar_obj").each(function () {
                obj = desplegar(1,obj, 'desplegar_obj');
            });
            $("#desplegar_enf").each(function () {
                enf = desplegar(2,enf, 'desplegar_enf');
            });
            $("#desplegar_rec").each(function () {
                rec = desplegar(3,rec, 'desplegar_rec');
            });
            $("#desplegar_eva").each(function () {
                eva = desplegar(4,eva, 'desplegar_eva');
            });

            $("#desplegar_obj").click(function () {
                obj = desplegar(1,obj, 'desplegar_obj');
            });
            $("#desplegar_enf").click(function () {
                enf = desplegar(2,enf, 'desplegar_enf');
            });
            $("#desplegar_rec").click(function () {
                rec = desplegar(3,rec, 'desplegar_rec');
            });
            $("#desplegar_eva").click(function () {
                eva = desplegar(4,eva, 'desplegar_eva');
            });
            $(".editobjetivo").change(function () {
                var obj = $(this).val();
                var id = $(this).attr('ids');
                bloqueointerface();
                $.post("/pro_planificacion", {'action':'editobjetivoact', 'id': id, 'obj':obj}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                    }
                    else{
                        smoke.alert(data.mensaje);
                    }
                }, 'json');
            });
            $(".editenfoque").change(function () {
                var enf = $(this).val();
                var id = $(this).attr('ids');
                bloqueointerface();
                $.post("/pro_planificacion", {'action':'editenfoqueact', 'id': id, 'enf':enf}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                    }
                    else{
                        smoke.alert(data.mensaje);
                    }
                }, 'json');
            });
            $(".editrecurso").change(function () {
                var rec = $(this).val();
                var id = $(this).attr('ids');
                bloqueointerface();
                $.post("/pro_planificacion", {'action':'editrecursoact', 'id': id, 'rec':rec}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                    }
                    else{
                        smoke.alert(data.mensaje);
                    }
                }, 'json');
            });
            $(".editevaluacion").change(function () {
                var eval = $(this).val();
                var id = $(this).attr('ids');
                bloqueointerface();
                $.post("/pro_planificacion", {'action':'editevaluacionact', 'id': id, 'eval':eval}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                    }
                    else{
                        smoke.alert(data.mensaje);
                    }
                }, 'json');
            });
            $("#itemspanellink .btn-cerrar").click(function() {
                $("#itemspanellink").modal("hide");
            });
            $(".editrecursolink").click(function() {
                var id = $(this).attr('ids');
                $.post("/pro_planificacion", {'action':'listarecursolink', 'id': id}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $(".panelbodylink").html(data.data);
                        $(".itemspanellink").modal({backdrop:'static', width: '700px'}).modal('show');
                    }
                }, 'json');
            });
            $(".actualizar_horas").click(function () {
                bloqueointerface();
                $.post("/pro_planificacion", {'action':'actualizar_horas', 'id': {{silabocab.id }}}, function(data) {
                    if (data.result == 'ok') {
                        bloqueointerface();
                        location.href='/pro_planificacion?action=planclasevirtual&silaboid={{ silabocab.id|encrypt }}';
                        $.unblockUI();
                    }else{
                        smoke.alert("Error al actualizar las horas")
                    }
                }, 'json');
            });


            $(".verobservaciones").click(function() {
                var obstec = $(this).attr('obstec');
                var obsacad = $(this).attr('obsacad');
                var estadocumplimiento = $(this).attr('estc');
                $("#observaciontecnica").val("");
                $("#observacionacademida").val("");
                $("#estadocumplimiento").val("");
                $("#observaciontecnica").val(obstec);
                $("#observacionacademida").val(obsacad);
                $("#estadocumplimiento").val(estadocumplimiento);
                $("#modalobservacion").modal({backdrop:'static', width: '610px'}).modal('show');
            });
            $("#modalobservacion .cerrar_modalobservacion").click(function() {
                $("#observaciontecnica").val("");
                $("#observacionacademida").val("");
                $("#estadocumplimiento").val("");
                $("#modalobservacion").modal("hide");
            });

            $(".verrecursostutor").click(function(){
                var ids=$(this).attr('ids');
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/pro_planificacion",
                    data: {'action': 'verdetalletutor', 'id': ids},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $("#selectauditoria-body").html(data.data);
                            $('#auditoriacriterio').modal({'width': 1000}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error al generar los datos.");
                    },
                    dataType: "json"
                });
            });

            $(".auditoriacriterio_cerrar").click(function () {
                $("#auditoriacriterio").modal('hide');
            });
            $(".detalletarea").click(function() {
                var nomtipo = $(this).attr('nomtipo');
                var codtipo = $(this).attr('codtipo');
                var idesta = $(this).attr('idesta');
                var idtar = $(this).attr('idtar');
                var action = '';
                var numerosemana = $(this).attr('idsem');
                $("#nomtitulodetalle").html('')
                nomacti = 'Semana #' + numerosemana;
                $("#nomtitulodetalle").html('Detalle de ' + nomtipo)
                $("#id_codigotarea").val(idtar)
                $("#id_codtipo").val(codtipo)
                bloqueointerface();
                $.post("/pro_planificacion", {'action':'detalletarea', 'idtar': idtar, 'codtipo': codtipo}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $(".panelbodytarea").html(data.data);
                        $("#divmostrartarea").modal({backdrop:'static', width: '1000px'}).modal('show');
                    }
                }, 'json');
            });
            $(".cerrartarea").click(function() {
                $("#divmostrartarea").modal("hide");
            });
            $(".detalletareaadmision").click(function() {
                var nomtipo = $(this).attr('nomtipo');
                var codtipo = $(this).attr('codtipo');
                var idesta = $(this).attr('idesta');
                var idtar = $(this).attr('idtar');
                var action = '';
                var numerosemana = $(this).attr('idsem');
                $("#nomtitulodetalle").html('')
                nomacti = 'Semana #' + numerosemana;
                $("#nomtitulodetalle").html('Detalle de ' + nomtipo)
                $("#id_codigotarea").val(idtar)
                $("#id_codtipo").val(codtipo)
                bloqueointerface();
                $.post("/pro_planificacion", {'action':'detalletareaadmision', 'idtar': idtar, 'codtipo': codtipo}, function(data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $(".panelbodytarea").html(data.data);
                        $("#divmostrartarea").modal({backdrop:'static', width: '1000px'}).modal('show');
                    }
                }, 'json');
            });
            $(".cerrartarea").click(function() {
                $("#divmostrartarea").modal("hide");
            });
            $('.header').click(function(){
                $(this).toggleClass('expand').nextUntil('tr.header').slideToggle(100);
            });

        });
        function desplegar(id, aux, nombre) {
            if (aux == 0){
                $(".collapse"+id).collapse('hide');
                $("#"+nombre).parent().find(".fa").removeClass("fa-chevron-up").addClass("fa-chevron-down");
                aux=1;
            }else{
                $(".collapse"+id).collapse('show');
                $("#"+nombre).parent().find(".fa").removeClass("fa-chevron-down").addClass("fa-chevron-up");
                aux=0;
            }
            return aux;
        }
        function leer_lista_subtemas(subtema) {
            var ban=0;
            for (i=0;i<lista_items1.length;i++){
                if (subtema == lista_items1[i]['subtema']){
                    ban = 1;
                    return;
                }else {
                    ban = 0;
                }
            }
            return ban;
        }
        function vistaprevia(idproprag){
            openwindow('POST' ,'/pro_planificacion', {action:'silabopdf',id:idproprag}, '_blank');
        }
        {#$(document).ready(function() {#}
        {#    var table = $('#example').DataTable({#}
        {#        "sPaginationType": "full_numbers",#}
        {#        "sDom": 'T<"clear">lfrtip',#}
        {#        "paging":   false,#}
        {#        "ordering": false,#}
        {#        "info":     false,#}
        {#        "order": [[ 0, 'asc' ]],#}
        {#        "columnDefs": [{ "visible": false,"targets": 0 }],#}
        {#        "drawCallback": function ( settings ) {#}
        {#            var api = this.api();#}
        {#            var rows = api.rows( {page:'current'} ).nodes();#}
        {#            var last=null;#}
        {#            api.column(0, {page:'current'} ).data().each( function ( group, i ) {#}
        {#                if ( last !== group ) {#}
        {#                    $(rows).eq( i ).before(#}
        {#                        '<tr class="group"><td bgcolor="#d9edf7" colspan="7" height="30" style="text-align: left; width: 65px; font-size: 16px;"><strong>'+group+'</strong></td></tr>'#}
        {#                    );#}
        {#                    last = group#}
        {#                }#}
        {#            });#}
        {#            $('[data-toggle="tooltip"]').tooltip();#}
        {#        }#}
        {##}
        {#    });#}
        {# } );#}


    </script>
    <style>
        {#table, tr, td, th#}
        {#{#}
        {#    border: 1px solid black;#}
        {#    border-collapse:collapse;#}
        {# }#}
        {#tr.header#}
        {#{#}
        {#    cursor:pointer;#}
        {# }#}
        .header .sign:after{
            content:"+";
            display:inline-block;
        }
        .header.expand .sign:after{
            content:"-";
        }
    </style>
{% endblock %}
{% block atras %}/pro_planificacion?action=silabo&materia={{ silabocab.materia.id|encrypt }}{% endblock %}
{% block canvas %}
    <div class='row-fluid'>
        <div class='span9'>
            <h5>{{ title }} </h5>
            <h5>Profesor: {{ profesor }}</h5>
            <h5>Asignatura: {{ silabocab.materia.asignaturamalla }} - {{ silabocab.materia.paralelo }} </h5>
        </div>
        <div class='span3'>
            <table width="100%" border="0" cellspacing="0" cellpadding="0" class="table table-bordered" >
                <tr>
                    <td style="text-align: center">
                        <a style="color: #3a87ad; font-size: 18px" href="#"><i class="fa fa-circle"></i></a>
                    </td>
                    <td style="text-align: justify">INGRESADO</td>
                    <td style="text-align: center">
                        <a style="color: #b94a48; font-size: 18px" href="#"><i class="fa fa-circle"></i></a>
                    </td>
                    <td style="text-align: justify">RECHAZADO</td>
                </tr>
                <tr>
                    <td style="text-align: center">
                        <a style="color: #faa732; font-size: 18px" href="#"><i class="fa fa-circle"></i></a>
                    </td>
                    <td style="text-align: justify">APROBADO</td>
                    <td style="text-align: center">
                        <a style="color: #5bb75b; font-size: 18px" href="#"><i class="fa fa-circle"></i></a>
                    </td>
                    <td style="text-align: justify">EN MOODLE</td>
                </tr>
            </table>
        </div>
        <div class='span3'>
                <div class="btn-group">
                <a class="btn dropdown-toggle" data-toggle="dropdown" href="javascript:;"><b>ACCIONES</b> <span class="caret"></span></a>
                <ul class="dropdown-menu pull-left">
                    <li class="dropdown-submenu"><a onclick="descargazip('{{ silabocab.id|encrypt }}')" href="javascript:;"><i class="fa fa-arrow-down"></i>  Descarga masiva actividades en zip</a>
                    </li>
                </ul>
            </div>
            </div>
    </div>
    {% if not materiacerrada %}
        <div class='row-fluid'>
            <div class='span6'>
                <a href="javascript:;" class="btn btn-info btn-mini tu notificarmasivo" title="Solo se aprobarán los ítems seleccionados"><span class="fa fa-check"></span> Notificar</a>
                <label class="label label-info">
                    Al dar clic en "Notificar", se enviará un email al revisor de recursos de aprendizaje.
                </label>
            </div>
            <div class='span6' style="text-align: right">
                <a ids="{{ silabocab.id|encrypt }}" href="javascript:;" class="btn btn-mini btn-form btn-info tu duplicar_recurso_periodo_todo" data-placement="left" data-original-title="Importar Todo"><i class="fa fa-clone"></i> Importar Todo</a>
            </div>

        </div>
    {% endif %}
    {% if silabocab.materia.idcursomoodle == 0 %}
        <div class='span12'>
            <div class="alert alert-info">
                NOTA: Puede crear los recursos pero no podrá migrar a mooodle mientras la asignatura no exista en el Aula Virtual.
            </div>
        </div>
    {% endif %}
    <div class='row-fluid'>
        <div class='span12'>
            <table cellpadding="0" border="1" cellspacing="0" id="example">
                <thead>
                <tr>
                    <th rowspan="2">TEMAS / SUBTEMAS </th>
                    <th {% if puede_videomagistral %}colspan="5"{% else %}colspan="4"{% endif %}>RECURSOS</th>
                    <th colspan="4">ACTIVIDADES</th>
                    <th colspan="2"><div style="font-size: 10px">EVALUACIÓN DE HORAS DEL APRENDIZAJE CONTACTO CON EL DOCENTE</div></th>
                    <th colspan="2"><div style="font-size: 10px">EVALUACIÓN DE HORAS DEL APRENDIZAJE AUTÓNOMO</div></th>
                    <th colspan="2"><div style="font-size: 10px">EVALUACIÓN DE HORAS DEL APRENDIZAJE PRÁCTICO EXPERIMENTAL</div></th>
                </tr>
                <tr>
                    <th style="text-align: center;width: 150px;">
                        Presentación
                        {% if silabocab.materia.idcursomoodle > 0 %}
                            {% if not materiacerrada %}
                                <div id="muestramasivopresentacion">
                                    <a href="javascript:;" nhref="/pro_planificacion?action=crearmoodlepresentacionmasivo&ids={{ silabocab.id|encrypt }}" data-placement="left" title="Crear Presentaciones en moodle" class="btn confirmacionmodal btn-tini btn-primary tu"><i class="fa fa-check"></i> Crear Moodle</a>
                                </div>
                            {% endif %}
                        {% endif %}
                    </th>
                    <th style="text-align: center;width: 150px;">
                        Compendio
                        {% if silabocab.materia.idcursomoodle > 0 %}
                            {% if not materiacerrada %}
                                <div id="muestramasivocompendio">
                                    <a href="javascript:;" nhref="/pro_planificacion?action=crearmoodlecompendiomasivo&ids={{ silabocab.id|encrypt }}" data-placement="right" title="Crear Compendios en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear Moodle</a>
                                </div>
                            {% endif %}
                        {% endif %}
                    </th>
                    {% if puede_videomagistral %}
                        <th style="text-align: center;width: 150px;">Video Magistral</th>
                    {% endif %}
                    <th style="text-align: center;width: 150px;">
                        Guía del estudiante y docente
                        {% if silabocab.materia.idcursomoodle > 0 %}
                            {% if not materiacerrada %}
                                <div id="muestramasivoguias">
                                    <a href="javascript:;" nhref="/pro_planificacion?action=crearmoodleguiasmasivo&ids={{ silabocab.id|encrypt }}" data-placement="right" title="Crear Guías en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear Moodle</a>
                                </div>
                            {% endif %}
                        {% endif %}
                    </th>
                    <th style="text-align: center;width: 150px;">
                        Materiales complementarios
                        {% if silabocab.materia.idcursomoodle > 0 %}
                            {% if not materiacerrada %}
                                <div id="muestramasivomaterial">
                                    <a href="javascript:;" nhref="/pro_planificacion?action=crearmoodlematerialmasivo&ids={{ silabocab.id|encrypt }}" data-placement="left" title="Crear Materiales Complementarios en moodle" class="btn confirmacionmodal btn-tini btn-primary tu"><i class="fa fa-check"></i> Crear Moodle</a>
                                </div>
                            {% endif %}
                        {% endif %}
                    </th>
                    <th style="text-align: center;width: 150px;">Tarea </th>
                    <th style="text-align: center;width: 150px;">Foro</th>
                    <th style="text-align: center;width: 150px;">Test</th>
                    <th style="text-align: center;width: 100px;">
                        Trabajo práctico experimental
                    </th>
                    <th style="text-align: center;width: 150px;">Horas</th>
                    <th style="text-align: center;width: 150px;">%</th>
                    <th style="text-align: center;width: 150px;">Horas</th>
                    <th style="text-align: center;width: 150px;">%</th>
                    <th style="text-align: center;width: 150px;">Horas</th>
                    <th style="text-align: center;width: 150px;">%</th>
                </tr>
                </thead>
                <tbody>
                {% for semana in silabosemanal %}
                    {#                    <tr class="header expand">#}
                    <tr>
                        {#                        <td bgcolor="#d9edf7" {% if silabocab.videomagistral %}colspan="10"{% else %}colspan="9"{% endif %} height="30" style="text-align: left; font-size: 16px;" valign="middle">#}
                        <td bgcolor="#d9edf7" {% if puede_videomagistral %}colspan="16"{% else %}colspan="15"{% endif %} height="30" style="text-align: left; font-size: 16px;" valign="middle">
                            <div class='span9'>
                                <strong>
                                    SEMANA {{ semana.numsemana }} |
                                    DESDE: {{ semana.fechainiciosemana|date:"Y-m-d" }}
                                    HASTA: {{ semana.fechafinciosemana|date:"Y-m-d" }}
                                </strong>
                            </div>
                            <div class='span3' style="text-align: right">
                                {#                                {% if not semana.tareas_semanales and not semana.foros_semanales and not semana.test_semanales and not semana.guiaestudiante_semanales and not semana.guiadocente_semanales and not semana.diapositiva_semanales  and not semana.compendio_semanales and not semana.material_semanales %}#}
                                {#                                    <a ids="{{ silabocab.id|encrypt }}" semana="{{ semana.semana }}" numsemana="{{ forloop.counter  }}" idsemanal="{{ semana.id }}" fini="{{ semana.fechainiciosemana|date:"Y-m-d"  }}" ffin="{{ semana.fechafinciosemana|date:"Y-m-d"  }}" href="javascript:;" class="btn btn-mini btn-form btn-info tu duplicar_recurso_periodo" data-placement="left" data-original-title="Importar"><i class="fa fa-clone"></i> Importar</a>#}
                                {#                                {% endif %}#}
                            </div>
                            {#                            <span class="sign"></span>#}
                        </td>
                    </tr>
                    <tr>
                        <td>
                            {% with temasselec=semana|call:'temas_seleccionados_planclase' %}
                                <div style="max-height: 150px; overflow-y: auto; overflow-x: hidden;">
                                    {% with unidades=semana|call:'unidades_silabosemanal' %}
                                        {% for uni in unidades %}
                                            <b>UNIDAD {{ uni.temaunidadresultadoprogramaanalitico.unidadresultadoprogramaanalitico.orden }}: {{ uni.temaunidadresultadoprogramaanalitico.unidadresultadoprogramaanalitico.descripcion }}</b><br>
                                            {% with temasselec=semana|args:uni.temaunidadresultadoprogramaanalitico.unidadresultadoprogramaanalitico.id|call:'temas_silabosemanal' %}
                                                {% for temassel in temasselec %}
                                                    <dt style="font-weight: normal;">
                                                        <ul>
                                                    <dt style="font-weight: normal;"><b>TEMA: {{ temassel.temaunidadresultadoprogramaanalitico.orden }}.-</b> {{ temassel.temaunidadresultadoprogramaanalitico.descripcion }}</dt>
                                                    <ul>
                                                        {% with subtemasselec=semana|args:temassel.temaunidadresultadoprogramaanalitico|call:'subtemas_silabosemanal' %}
                                                            {% if subtemasselec %}
                                                                {% for subtemassel in subtemasselec %}
                                                                    <dt style="font-weight: normal;"><b>SUBTEMA: {{ subtemassel.subtemaunidadresultadoprogramaanalitico.orden }}.-</b> {{ subtemassel.subtemaunidadresultadoprogramaanalitico.descripcion }}</dt>
                                                                {% endfor %}
                                                            {% endif %}
                                                        {% endwith %}
                                                    </ul>
                                                    </dt>
                                                {% endfor %}
                                            {% endwith %}
                                        {% endfor %}
                                    {% endwith %}
                                </div>
                            {% endwith %}
                        </td>
                        <td valign="top">
                            <div style="text-align: left">
                                {% if not silabocab.materia.cerrado %}
                                    {% if not semana.diapositiva_semanales.estado.id == 2 %}
                                        {% if not semana.diapositiva_semanales %}
                                            <a style="color: green" href="/pro_planificacion?action=adddiapositivavirtual&codigosemana={{ semana.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar presentación'><i class="fa fa-plus"></i></a>
                                        {% else %}
                                            {% if semana.diapositiva_semanales.estado.editan %}
                                                <a style="color: green" href="/pro_planificacion?action=editdiapositivavirtual&codigosemana={{ semana.id|encrypt }}&codigodiapositivavirtual={{ semana.diapositiva_semanales.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Editar presentación'><i class="fa fa-edit"></i></a>

                                            {% endif %}
                                            {% if semana.diapositiva_semanales.estado.id == 1 or semana.diapositiva_semanales.estado.id == 2 or semana.diapositiva_semanales.estado.id == 3 %}
                                                <a style="color: red" href="javascript:;" class='delactividad tu' idacti="{{ semana.diapositiva_semanales.id|encrypt }}" numerosemana="{{ semana.numsemana }}" nomacti="{{ semana.diapositiva_semanales.nombre }}" opciondel="6" title='Eliminar presentación'><i class="fa fa-trash"></i></a>
                                            {% endif %}
                                        {% endif %}
                                    {% endif %}
                                {% endif %}
                            </div>
                            {% if semana.diapositiva_semanales %}
                                <div class="accordion" id="accordiondiapositiva{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse" data-parent="#accordiondiapositiva{{ semana.id|encrypt }}" href="#collapseOnediapositiva{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Presentación</a>
                                        </div>
                                        <div id="collapseOnediapositiva{{ semana.id|encrypt }}" class="accordion-body collapse in">
                                            <a class="recorrepresentacion" codestado="{{ semana.diapositiva_semanales.estado.id }}" style="color: #{{ semana.diapositiva_semanales.estado.colorestado }}; font-size: 18px" href="#"><i class="fa fa-circle"></i></a><br>
                                            {{ semana.diapositiva_semanales.nombre }}<br>
                                            {% if semana.diapositiva_semanales.archivodiapositiva %}
                                                <a href='{{ semana.diapositiva_semanales.archivodiapositiva.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Archivo </a>
                                            {% endif %}
                                            <br>
                                            <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletarea" codtipo="6" nomtipo="Presentación" idesta="{{ semana.diapositiva_semanales.estado.id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.diapositiva_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>

                                            {% if semana.diapositiva_semanales.estado.id == 2  %}
                                                {% if silabocab.materia.idcursomoodle > 0 %}
                                                    {% if not materiacerrada %}
                                                        <a href="javascript:;" data-placement="right" nhref="/pro_planificacion?action=crearmoodlerecurso&idf={{ semana.diapositiva_semanales.id|encrypt }}&ids={{ silabocab.id|encrypt }}" title="Crear Diapositiva en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear Moodle</a>
                                                    {% endif %}
                                                {% endif %}
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        </td>
                        <td valign="top">
                            <div style="text-align: left">
                                {#                                {% if not semana.compendio_semanales.estado.id == 2 %}#}
                                {% if not silabocab.materia.cerrado %}
                                    {% if not semana.compendio_semanales %}
                                        <a style="color: green" href="/pro_planificacion?action=addcompendiovirtual&codigosemana={{ semana.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar compendio'><i class="fa fa-plus"></i></a>
                                    {% else %}
                                        {% if semana.compendio_semanales.estado.id == 1 %}
                                            <a style="color: green" href="/pro_planificacion?action=editcompendiovirtual&codigosemana={{ semana.id|encrypt }}&codigocompendiovirtual={{ semana.compendio_semanales.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Editar compendio'><i class="fa fa-edit"></i></a>
                                            <a style="color: red" href="javascript:;" class='delactividad tu' idacti="{{ semana.compendio_semanales.id|encrypt }}" numerosemana="{{ semana.numsemana }}" nomacti="{{ semana.compendio_semanales.nombre }}" opciondel="7" title='Eliminar compendio'><i class="fa fa-trash"></i></a>
                                        {% endif %}
                                    {% endif %}
                                {% endif %}
                                {#                                {% endif %}#}
                            </div>
                            {% if semana.compendio_semanales %}
                                <div class="accordion" id="accordioncompendio{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse" data-parent="#accordioncompendio{{ semana.id|encrypt }}" href="#collapseOnecompendio{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Compendio</a>
                                        </div>
                                        <div id="collapseOnecompendio{{ semana.id|encrypt }}" class="accordion-body collapse in">
                                            <a class="recorrecompendio" codestado="{{ semana.compendio_semanales.estado.id }}" style="color: #{{ semana.compendio_semanales.estado.colorestado }}; font-size: 18px" href="#"><i class="fa fa-circle"></i></a><br>
                                            {{ semana.compendio_semanales.descripcion }}<br>
                                            {% if semana.compendio_semanales.archivocompendio %}
                                                <a href='{{ semana.compendio_semanales.archivocompendio.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Archivo compendio</a>
                                            {% endif %}
                                            {% if semana.compendio_semanales.archivoplagio %}
                                                <a href='{{ semana.compendio_semanales.archivoplagio.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Archivo plagio</a>
                                            {% endif %}
                                            <br>
                                            <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletarea" codtipo="7" nomtipo="Compendio" idesta="{{ semana.compendio_semanales.estado.id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.compendio_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                            {% if semana.compendio_semanales.estado.id == 2  %}
                                                {% if silabocab.materia.idcursomoodle > 0 %}
                                                    {% if not materiacerrada %}
                                                        <a href="javascript:;" data-placement="right" nhref="/pro_planificacion?action=crearmoodlecompendio&idf={{ semana.compendio_semanales.id|encrypt }}&ids={{ silabocab.id|encrypt }}" title="Crear Compendio en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear Moodle</a>
                                                    {% endif %}
                                                {% endif %}
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        </td>
                        {% if puede_videomagistral %}
                            <td valign="top">
                                <div style="text-align: left">
                                    {#                                    {% if semana.diapositiva_semanales and semana.compendio_semanales %}#}
                                    {#                                        {% if semana.diapositiva_semanales.estado.id == 4 and semana.compendio_semanales.estado.id == 4 %}#}
                                    {% if not silabocab.materia.cerrado %}
                                        {% if not semana.vidmagistral_semanales.estado.id == 2 %}
                                            {% if not semana.vidmagistral_semanales %}
                                                <a style="color: green" href="/pro_planificacion?action=addvidmagistralvirtual&codigosemana={{ semana.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar video magistral'><i class="fa fa-plus"></i></a>
                                            {% else %}
                                                {% if semana.vidmagistral_semanales.estado.id == 1 %}
                                                    <a style="color: green" href="/pro_planificacion?action=editvidmagistralvirtual&codigosemana={{ semana.id|encrypt }}&codigovidmagistralvirtual={{ semana.vidmagistral_semanales.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Editar video magistral'><i class="fa fa-edit"></i></a>
                                                    <a style="color: #ff0000" href="javascript:;" class='delactividad tu' idacti="{{ semana.vidmagistral_semanales.id|encrypt }}" numerosemana="{{ semana.numsemana }}" nomacti="{{ semana.vidmagistral_semanales.nombre }}" opciondel="9" title='Eliminar video magistral'><i class="fa fa-trash"></i></a>
                                                {% endif %}
                                            {% endif %}
                                        {% endif %}
                                    {% endif %}
                                </div>
                                {% if semana.vidmagistral_semanales %}
                                    <div class="accordion" id="accordionvidmagistral{{ semana.id|encrypt }}">
                                        <div class="accordion-group">
                                            <div class="accordion-heading">
                                                <a data-toggle="collapse" data-parent="#accordionvidmagistral{{ semana.id|encrypt }}" href="#collapseOnevidmagistral{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Video magistral</a>
                                            </div>
                                            <div id="collapseOnevidmagistral{{ semana.id|encrypt }}" class="accordion-body collapse in">
                                                <a style="color: #{{ semana.vidmagistral_semanales.estado.colorestado }}; font-size: 18px" href="#"><i class="fa fa-circle"></i></a><br>
                                                {{ semana.vidmagistral_semanales.get_tipograbacion_display }}<br>
                                                {{ semana.vidmagistral_semanales.nombre }}<br>
                                                {% if semana.vidmagistral_semanales.archivovideomagistral %}
                                                    <a href='{{ semana.vidmagistral_semanales.archivovideomagistral.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Archivo </a>
                                                {% endif %}
                                                <br>
                                                <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletarea" codtipo="9" nomtipo="Video Magistral" idesta="{{ semana.vidmagistral_semanales.estado.id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.vidmagistral_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>

                                                {% if semana.vidmagistral_semanales.estado.id == 2  %}
                                                    {% if silabocab.materia.idcursomoodle > 0 %}
                                                        {% if not materiacerrada %}
                                                            <a href="javascript:;" data-placement="right" nhref="/pro_planificacion?action=crearmoodlevidmagistral&idvid={{ semana.vidmagistral_semanales.id|encrypt }}&ids={{ silabocab.id|encrypt }}" title="Crear Video Magistral en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear Moodle</a>
                                                        {% endif %}
                                                    {% endif %}
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}
                                {#                                        {% endif %}#}
                                {#                                    {% endif %}#}
                            </td>
                        {% endif %}
                        <td valign="top">
                            <div style="text-align: left">
                                {#                                {% if not semana.guiaestudiante_semanales.estado.id == 2 %}#}
                                {% if not silabocab.materia.cerrado %}
                                    {% if not semana.guiaestudiante_semanales %}
                                        <a style="color: green" href="/pro_planificacion?action=addguiaestudiantevirtual&codigosemana={{ semana.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar guía estudiante'><i class="fa fa-plus"></i></a>
                                    {% else %}
                                        {% if semana.guiaestudiante_semanales.estado.id == 1 %}
                                            <a style="color: green" href="/pro_planificacion?action=editguiaestudiantevirtual&codigosemana={{ semana.id|encrypt }}&codigoguiaestudiantevirtual={{ semana.guiaestudiante_semanales.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Editar guía estudiante'><i class="fa fa-edit"></i></a>
                                            <a style="color: red" href="javascript:;" class='delactividad tu' idacti="{{ semana.guiaestudiante_semanales.id|encrypt }}" numerosemana="{{ semana.numsemana }}" nomacti="{{ semana.guiaestudiante_semanales.observacion }}" opciondel="4" title='Eliminar guía estudiante'><i class="fa fa-trash"></i></a>
                                        {% endif %}
                                    {% endif %}
                                {% endif %}
                                {#                                {% endif %}#}
                            </div>
                            {% if semana.guiaestudiante_semanales %}
                                <div class="accordion" id="accordionguiaestudiante{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse" data-parent="#accordionguiaestudiante{{ semana.id|encrypt }}" href="#collapseOneguiaestudiante{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Guía estudiante</a>
                                        </div>
                                        <div id="collapseOneguiaestudiante{{ semana.id|encrypt }}" class="accordion-body collapse in">
                                            <a class="recorreguias" codestado="{{ semana.guiaestudiante_semanales.estado.id }}" style="color: #{{ semana.guiaestudiante_semanales.estado.colorestado }}; font-size: 18px" href="#"><i class="fa fa-circle"></i></a><br>
                                            {{ semana.guiaestudiante_semanales.observacion }}<br>
                                            {% if semana.guiaestudiante_semanales.archivoguiaestudiante %}
                                                <a href='{{ semana.guiaestudiante_semanales.archivoguiaestudiante.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Archivo guía estudiante</a>
                                            {% endif %}
                                            <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletarea" codtipo="4" nomtipo="Guia estudiante" idesta="{{ semana.guiaestudiante_semanales.estado.id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.guiaestudiante_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                            {% if semana.guiaestudiante_semanales.estado.id == 2  %}
                                                {% if silabocab.materia.idcursomoodle > 0 %}
                                                    {% if not materiacerrada %}
                                                        <a href="javascript:;" data-placement="right" nhref="/pro_planificacion?action=crearmoodleguiaestudiante&idf={{ semana.guiaestudiante_semanales.id|encrypt }}&ids={{ silabocab.id|encrypt }}" title="Crear Guia estudiante en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear Moodle</a>
                                                    {% endif %}
                                                {% endif %}
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                            <div style="text-align: left">
                                {#                                {% if not semana.guiadocente_semanales.estado.id == 2 %}#}
                                {% if not silabocab.materia.cerrado %}
                                    {% if not semana.guiadocente_semanales %}
                                        <a style="color: green" href="/pro_planificacion?action=addguiadocentevirtual&codigosemana={{ semana.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar guía docente'><i class="fa fa-plus"></i></a>
                                    {% else %}
                                        {% if semana.guiadocente_semanales.estado.id == 1 %}
                                            <a style="color: green" href="/pro_planificacion?action=editguiadocentevirtual&codigosemana={{ semana.id|encrypt }}&codigoguiadocentevirtual={{ semana.guiadocente_semanales.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Editar guía docente'><i class="fa fa-edit"></i></a>
                                            <a style="color: red" href="javascript:;" class='delactividad tu' idacti="{{ semana.guiadocente_semanales.id|encrypt }}" numerosemana="{{ semana.numsemana }}" nomacti="{{ semana.guiadocente_semanales.observacion }}" opciondel="5" title='Eliminar guía docente'><i class="fa fa-trash"></i></a>
                                        {% endif %}
                                    {% endif %}
                                {% endif %}
                                {#                                {% endif %}#}
                            </div>
                            {% if semana.guiadocente_semanales %}
                                <div class="accordion" id="accordionguia{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse" data-parent="#accordionguia{{ semana.id|encrypt }}" href="#collapseOneguia{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Guía docente</a>
                                        </div>
                                        <div id="collapseOneguia{{ semana.id|encrypt }}" class="accordion-body collapse in">
                                            <a class="recorreguias" codestado="{{ semana.guiadocente_semanales.estado.id }}" style="color: #{{ semana.guiadocente_semanales.estado.colorestado }}; font-size: 18px" href="#"><i class="fa fa-circle"></i></a><br>
                                            {{ semana.guiadocente_semanales.observacion }}<br>
                                            {% if semana.guiadocente_semanales.archivoguiadocente %}
                                                <a href='{{ semana.guiadocente_semanales.archivoguiadocente.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Archivo guía docente</a>
                                            {% endif %}
                                            <br>
                                            <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletarea" codtipo="5" nomtipo="Guia docente" idesta="{{ semana.guiadocente_semanales.estado.id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.guiadocente_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                            {% if semana.guiadocente_semanales.estado.id == 2  %}
                                                {% if silabocab.materia.idcursomoodle > 0 %}
                                                    {% if not materiacerrada %}
                                                        <a href="javascript:;" data-placement="right" nhref="/pro_planificacion?action=crearmoodleguiadocente&idf={{ semana.guiadocente_semanales.id|encrypt }}&ids={{ silabocab.id|encrypt }}" title="Crear Guia docente en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear Moodle</a>
                                                    {% endif %}
                                                {% endif %}
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        </td>
                        <td valign="top">
                            {% if not silabocab.materia.cerrado %}
                                <div style="text-align: left">
                                    {#                                {% if fechahoy <= semana.fechafinciosemana %}#}
                                    <a style="color: green" href="/pro_planificacion?action=addmaterialadicionalvirtual&codigosemana={{ semana.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar recurso'><i class="fa fa-plus"></i></a>
                                    {#                                {% endif %}#}
                                </div>
                            {% endif %}
                            {% if semana.material_semanales %}
                                <div class="accordion" id="accordionmaterial{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse" data-parent="#accordionmaterial{{ semana.id|encrypt }}" href="#collapsematerial{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Material complementario</a>
                                        </div>
                                        <div id="collapsematerial{{ semana.id|encrypt }}" class="accordion-body collapse in">
                                            {% for material in semana.material_semanales %}
                                                <a class="recorrematerial" codestado="{{ material.estado.id }}" style="color:#{{ material.estado.colorestado }}; font-size: 18px" href="#"><i class="fa fa-circle"></i></a><br>
                                                {% if not silabocab.materia.cerrado %}
                                                    {% if not material.estado.id == 2 %}
                                                        {% if material.estado.editan %}
                                                            <a style="color: green" href="/pro_planificacion?action=editmaterialadicionalvirtual&codigosemana={{ semana.id|encrypt }}&codigomaterialvirtual={{ material.id|encrypt }}" href="javascript:;" class='bloqueo_pantalla'><i class="fa fa-edit"></i></a>

                                                        {% endif %}
                                                        {% if material.estado.id == 1 or material.estado.id == 2 or material.estado.id == 3 %}
                                                            <a style="color: red" href="javascript:;" class='delactividad tu' idacti="{{ material.id|encrypt }}" numerosemana="{{ semana.numsemana }}" nomacti="{{ material.nombre }}" opciondel="8" title='Eliminar material complementario'><i class="fa fa-trash"></i></a>
                                                        {% endif %}
                                                    {% endif %}
                                                {% endif %}
                                                {{ material.nombre }}<br>
                                                {% if material.tipomaterial == 1 %}
                                                    {% if material.archivomaterial %}
                                                        <a href='{{ material.archivomaterial.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Archivo recurso</a>
                                                    {% endif %}
                                                {% endif %}
                                                {% if material.tipomaterial == 2 or material.tipomaterial == 3 %}
                                                    <a href="{{ material.testourl }}" target="_blank"><i class="fa fa-link"></i> ver link</a>
                                                {% endif %}
                                                <br>
                                                <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletarea" codtipo="8" nomtipo="Material complementario" idesta="{{ material.estado.id }}" idsem="{{ semana.numsemana }}" idtar="{{ material.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                                {% if material.estado.id == 2  %}
                                                    {% if silabocab.materia.idcursomoodle > 0 %}
                                                        {% if not materiacerrada %}
                                                            <a href="javascript:;" data-placement="right" nhref="/pro_planificacion?action=crearmoodlematerial&idf={{ material.id|encrypt }}&ids={{ silabocab.id|encrypt }}" title="Crear Materiales en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear Moodle</a>
                                                        {% endif %}
                                                    {% endif %}
                                                {% endif %}
                                                <br><br>
                                            {% endfor %}
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        </td>
                        <td valign="top">
                            <div style="text-align: left">
                                {% if not silabocab.materia.cerrado %}
                                    {% if not semana.tareas_semanales.estado.id == 2 %}
                                        {% if not semana.tareas_semanales %}
                                            <a style="color: green" href="/pro_planificacion?action=addtareavirtual&codigosemana={{ semana.id|encrypt }}&codigoactividad={{ 5|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar Tarea'><i class="fa fa-plus"></i></a>
                                        {% else %}
                                            {% if semana.tareas_semanales.estado.editan %}
                                                <a style="color: green" href="/pro_planificacion?action=edittareavirtual&codigosemana={{ semana.id|encrypt }}&codigotareavirtual={{ semana.tareas_semanales.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Editar Tarea'><i class="fa fa-edit"></i></a>

                                            {% endif %}
                                            {% if semana.tareas_semanales.estado.id == 1 or semana.tareas_semanales.estado.id == 2 or semana.tareas_semanales.estado.id == 3 %}
                                                <a style="color: red" href="javascript:;" class='delactividad tu' idacti="{{ semana.tareas_semanales.id|encrypt }}" numerosemana="{{ semana.numsemana }}" nomacti="{{ semana.tareas_semanales.nombre }}" opciondel="1" title='Eliminar Tarea'><i class="fa fa-trash"></i></a>
                                            {% endif %}
                                        {% endif %}
                                    {% endif %}
                                {% endif %}
                            </div>
                            {% if semana.tareas_semanales %}
                                <div class="listadotareas_{{ semana.unidad_planclase.0 }}"></div>
                                <div class="accordion" id="accordion{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse" data-parent="#accordion{{ semana.id|encrypt }}" href="#collapseOne{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Tarea</a>
                                        </div>
                                        <div id="collapseOne{{ semana.id|encrypt }}" class="accordion-body collapse in">
                                            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                                <tr>
                                                    <td colspan="8">
                                                        <a style="color: #{{ semana.tareas_semanales.estado.colorestado }}; font-size: 18px" href="#" class='tu' data-placement="right" href="javascript:;"  title='{{ semana.tareas_semanales.estado.nombre }}'><i class="fa fa-circle"></i></a>
                                                        <span class="label label-default">
                                                        {{ semana.tareas_semanales.detallemodelo.nombre }}
                                                        </span><br>
                                                        {{ semana.tareas_semanales.nombre }}
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="4">
                                                        {% if semana.tareas_semanales.archivorubrica %}
                                                            <a href='{{ semana.tareas_semanales.archivorubrica.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Rúbrica</a>
                                                        {% endif %}
                                                    </td>
                                                    <td colspan="4">
                                                        {% if semana.tareas_semanales.archivotareasilabo %}
                                                            <a href='{{ semana.tareas_semanales.archivotareasilabo.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Tarea</a>
                                                        {% endif %}
                                                    </td>
                                                </tr>
                                            </table>
                                            <br>
                                            <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletarea" codtipo="1" nomtipo="Tarea" idesta="{{ semana.tareas_semanales.estado.id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.tareas_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                            <a href="/pro_planificacion?action=reporte_tarea&id={{ semana.tareas_semanales.id|encrypt }}" class="btn btn-warning fa fa-download" target="_blank"> </a>
                                            {% if semana.tareas_semanales.estado.id == 2 %}
                                                {% if silabocab.materia.idcursomoodle > 0 %}
                                                    {% if not materiacerrada %}
                                                        <a href="javascript:;" data-placement="right" nhref="/pro_planificacion?action=crearmoodle&idt={{ semana.tareas_semanales.id|encrypt }}&ids={{ silabocab.id|encrypt }}" title="Crear tarea en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear Moodle</a>
                                                    {% endif %}
                                                {% endif %}
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        </td>
                        <td valign="top">
                            {% if not silabocab.materia.cerrado %}
                                <div style="text-align: left">
                                    {% if not semana.foros_semanales.estado.id == 2 %}
                                        {% if not semana.foros_semanales %}
                                            <a style="color: green" href="/pro_planificacion?action=addforovirtual&codigosemana={{ semana.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar Foro'><i class="fa fa-plus"></i></a>
                                        {% else %}
                                            {% if semana.foros_semanales.estado.editan %}
                                                <a style="color: green" href="/pro_planificacion?action=editforovirtual&codigosemana={{ semana.id|encrypt }}&codigoforovirtual={{ semana.foros_semanales.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Editar Foro'><i class="fa fa-edit"></i></a>

                                            {% endif %}
                                            {% if semana.foros_semanales.estado.id == 1 or semana.foros_semanales.estado.id == 2 or semana.foros_semanales.estado.id == 3 %}
                                                <a style="color: red" href="javascript:;" class='delactividad tu' idacti="{{ semana.foros_semanales.id|encrypt }}" numerosemana="{{ semana.numsemana }}" nomacti="{{ semana.foros_semanales.nombre }}" opciondel="2" title='Eliminar Foro'><i class="fa fa-trash"></i></a>
                                            {% endif %}
                                        {% endif %}
                                    {% endif %}
                                </div>
                            {% endif %}
                            {% if semana.foros_semanales %}
                                <div class="listadoforos_{{ semana.unidad_planclase.0 }}"></div>
                                <div class="accordion" id="accordionforo{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse" data-parent="#accordionforo{{ semana.id|encrypt }}" href="#collapseforo{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Foro</a>
                                        </div>
                                        <div id="collapseforo{{ semana.id|encrypt }}" class="accordion-body collapse in">
                                            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                                <tr>
                                                    <td colspan="8">
                                                        <a style="color: #{{ semana.foros_semanales.estado.colorestado }}; font-size: 18px" href="#"><i class="fa fa-circle"></i></a>
                                                        <span class="label label-default">
                                                        {{ semana.foros_semanales.detallemodelo.nombre }}
                                                        </span><br>
                                                        {{ semana.foros_semanales.nombre }}
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="4">
                                                        {% if semana.foros_semanales.archivorubrica %}
                                                            <a href='{{ semana.foros_semanales.archivorubrica.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Rúbrica</a>
                                                        {% endif %}
                                                    </td>
                                                    <td colspan="4">
                                                        {% if semana.foros_semanales.archivoforo %}
                                                            <a href='{{ semana.foros_semanales.archivoforo.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Foro</a>
                                                        {% endif %}
                                                    </td>
                                                </tr>
                                            </table>
                                            <br>
                                            <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletarea" codtipo="2" nomtipo="Foro" idesta="{{ semana.foros_semanales.estado.id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.foros_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                            <a href="/pro_planificacion?action=reporte_foro&id={{ semana.foros_semanales.id|encrypt }}" class="btn btn-warning fa fa-download" target="_blank"> </a>
                                            {% if semana.foros_semanales.estado.id == 2  %}
                                                {% if silabocab.materia.idcursomoodle > 0 %}
                                                    {% if not materiacerrada %}
                                                        <a href="javascript:;" data-placement="right" nhref="/pro_planificacion?action=crearmoodleforo&idf={{ semana.foros_semanales.id|encrypt }}&ids={{ silabocab.id|encrypt }}" title="Crear Foro en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear Moodle</a>
                                                    {% endif %}
                                                {% endif %}
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        </td>
                        <td valign="top">
                            {% if idcoordinacion != 9 %}
                                {% if not silabocab.materia.cerrado %}
                                    <div style="text-align: left">
                                        {% if not semana.test_semanales.estado.id == 2 %}
                                            {% if not semana.test_semanales %}
                                                <a style="color: green" href="/pro_planificacion?action=addtestvirtual&codigosemana={{ semana.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar Test'><i class="fa fa-plus"></i></a>
                                            {% else %}
                                                {% if semana.test_semanales.estado.editan %}
                                                    <a style="color: green" href="/pro_planificacion?action=edittestvirtual&codigosemana={{ semana.id|encrypt }}&codigotestvirtual={{ semana.test_semanales.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Editar Test'><i class="fa fa-edit"></i></a>
                                                {% endif %}
                                                {% if semana.test_semanales.estado.id == 1 or semana.test_semanales.estado.id == 2 or semana.test_semanales.estado.id == 3 %}
                                                    <a style="color: red" href="javascript:;" class='delactividad tu' idacti="{{ semana.test_semanales.id|encrypt }}" numerosemana="{{ semana.numsemana }}" nomacti="{{ semana.test_semanales.instruccion }}" opciondel="3" title='Eliminar Test'><i class="fa fa-trash"></i></a>
                                                {% endif %}
                                            {% endif %}
                                        {% endif %}
                                    </div>
                                {% endif %}
                                {% if semana.test_semanales %}
                                    <div class="listadotests_{{ semana.unidad_planclase.0 }}"></div>
                                    <div class="accordion" id="accordiontest{{ semana.id|encrypt }}">
                                        <div class="accordion-group">
                                            <div class="accordion-heading">
                                                <a data-toggle="collapse" data-parent="#accordiontest{{ semana.id|encrypt }}" href="#collapsetest{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Test</a>
                                            </div>
                                            <div id="collapsetest{{ semana.id|encrypt }}" class="accordion-body collapse in">
                                                {#                                            <span class="label label-{{ semana.test_semanales.estado.colorestado }}">#}
                                                {#                                                ESTADO: {{ semana.test_semanales.estado.nombre }}#}
                                                {#                                            </span><br>#}
                                                <a style="color: #{{ semana.test_semanales.estado.colorestado }}; font-size: 18px" href="#"><i class="fa fa-circle"></i></a>
                                                <span class="label label-default">
                                                {{ semana.test_semanales.detallemodelo.nombre }}
                                            </span><br>
                                                {{ semana.test_semanales.instruccion }}
                                                <br>
                                                <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletarea" codtipo="3" nomtipo="Test" idesta="{{ semana.test_semanales.estado.id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.test_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                                <a href="/pro_planificacion?action=reporte_test&id={{ semana.test_semanales.id|encrypt }}" class="btn btn-warning fa fa-download" target="_blank"> </a>
                                                {% if semana.test_semanales.estado.id == 2 %}
                                                   {% if silabocab.materia.idcursomoodle > 0 %}
                                                       {% if not materiacerrada %}
                                                            <a href="javascript:;" data-placement="right" nhref="/pro_planificacion?action=creartestmoodle&idt={{ semana.test_semanales.id|encrypt }}&ids={{ silabocab.id|encrypt }}" title="Crear test en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear Moodle</a>
                                                        {% endif %}
                                                   {% endif %}
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}
                            {% else %}
                                <a style="color: green" href="/pro_planificacion?action=addtestvirtualadmision&codigosemana={{ semana.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar Test'><i class="fa fa-plus"></i></a>
                                {% if semana.test_semanalesadmision %}
                                    <div class="accordion" id="accordionmaterial{{ semana.id|encrypt }}">
                                        <div class="accordion-group">
                                            <div class="accordion-heading">
                                                <a data-toggle="collapse" data-parent="#accordiontest{{ semana.id|encrypt }}" href="#collaptest{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Test</a>
                                            </div>
                                            <div id="collaptest{{ semana.id|encrypt }}" class="accordion-body collapse in">
                                                {% for test in semana.listatest_semanalesadmision %}
                                                    <a style="color:#{{ test.estado.colorestado }}; font-size: 18px" href="#"><i class="fa fa-circle"></i></a><br>
                                                    {% if not test.estado.id == 2 %}
                                                        {% if test.estado.editan %}
                                                            <a style="color: green" href="/pro_planificacion?action=edittestvirtualadmision&codigosemana={{ semana.id|encrypt }}&codigotestvirtual={{ test.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Editar Test'><i class="fa fa-edit"></i></a>
                                                        {% endif %}
                                                        {% if test.estado.id == 1 or test.estado.id == 3 %}
                                                            <a style="color: red" href="javascript:;" class='delactividadadmision tu' idacti="{{ semana.test_semanalesadmision.id|encrypt }}" numerosemana="{{ semana.numsemana }}" nomacti="{{ test.titulo }}" opciondel="3" title='Eliminar Test'><i class="fa fa-trash"></i></a>
                                                        {% endif %}
                                                    {% endif %}
                                                    {{ test.titulo }}<br>
                                                    <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletareaadmision" codtipo="3" nomtipo="Test" idesta="{{ test.estado.id }}" idsem="{{ semana.numsemana }}" idtar="{{ test.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                                    {% if test.url1 %}
                                                        <label class="label label-info">
                                                            Link1
                                                        </label>
                                                    {% endif %}
                                                    {% if test.url2 %}
                                                        <label class="label label-info">
                                                            Link2
                                                        </label>
                                                    {% endif %}
                                                    <br><br>
                                                {% endfor %}
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}
                            {% endif %}
                        </td>
                        <td valign="top" align="center">
                            {#                            {% if persona.id == 4379 %}#}
                            {% if not silabocab.materia.cerrado %}
                                <a style="margin-top: 10px" class="btn btn-mini btn-{% if semana.tieneguiapractica_semanales %}info{% else %}warning{% endif %} bloqueo_pantalla tu"  href="/pro_planificacion?action=practicasrecursos&ids={{ semana.id|encrypt }}" title="Prácticas"><span class="fa fa-list-alt"></span></a><br>
                                <div style="text-align: center">
                                    {% if not semana.tareaspracticas_semanales.estado.id == 2 %}
                                        {% if not semana.tareaspracticas_semanales %}
                                            {% if semana.tieneguiapractica_semanales %}
                                                <a style="color: green" href="/pro_planificacion?action=addtareapracticavirtual&codigosemana={{ semana.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Adicionar trabajo práctico'><i class="fa fa-plus"></i></a>
                                            {% endif %}
                                        {% else %}
                                            {% if semana.tareaspracticas_semanales.estado.editan %}
                                                <a style="color: green" href="/pro_planificacion?action=edittareapracticavirtual&codigosemana={{ semana.id|encrypt }}&codigotareavirtual={{ semana.tareaspracticas_semanales.id|encrypt }}" href="javascript:;" class='tu bloqueo_pantalla' title='Editar trabajo práctico'><i class="fa fa-edit"></i></a>
                                            {% endif %}
                                            {% if semana.tareaspracticas_semanales.estado.id == 1 or semana.tareaspracticas_semanales.estado.id == 2 or semana.tareaspracticas_semanales.estado.id == 3 %}
                                                <a style="color: red" href="javascript:;" class='delactividad tu' idacti="{{ semana.tareaspracticas_semanales.id|encrypt }}" numerosemana="{{ semana.numsemana }}" nomacti="{{ semana.tareaspracticas_semanales.nombre }}" opciondel="10" title='Eliminar trabajo práctico'><i class="fa fa-trash"></i></a>
                                            {% endif %}
                                        {% endif %}
                                    {% endif %}
                                </div>
                            {% endif %}
                            {% if semana.tareaspracticas_semanales %}
                                <div class="listadotareaspra_{{ semana.unidad_planclase.0 }}"></div>
                                <div class="accordion" id="accordion{{ semana.id|encrypt }}">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse" data-parent="#accordion{{ semana.id|encrypt }}" href="#collapseOnepra{{ semana.id|encrypt }}"><span class="fa fa-list"></span> Trabajo práctico</a>
                                        </div>
                                        <div id="collapseOnepra{{ semana.id|encrypt }}" class="accordion-body collapse in">
                                            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                                <tr>
                                                    <td colspan="8">
                                                        <a style="color: #{{ semana.tareaspracticas_semanales.estado.colorestado }}; font-size: 18px" href="#" class='tu' data-placement="right" href="javascript:;"  title='{{ semana.tareaspracticas_semanales.estado.nombre }}'><i class="fa fa-circle"></i></a>
                                                        <span class="label label-default">
                                                        {{ semana.tareaspracticas_semanales.detallemodelo.nombre }}
                                                        </span><br>
                                                        {{ semana.tareaspracticas_semanales.nombre }}
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="4">
                                                        {% if semana.tareaspracticas_semanales.archivotareapracticasilabo %}
                                                            <a href='{{ semana.tareaspracticas_semanales.archivotareapracticasilabo.url }}' target="_blank" class="btn btn-warning"><span class="fa fa-download"></span> <i class=" hidden-phone hidden-tablet visible-desktop "></i> Archivo</a>
                                                        {% endif %}
                                                    </td>
                                                </tr>
                                            </table>
                                            <br>
                                            <a href="javascript:;" data-placement="right" class="btn btn-warning btn-mini tu detalletarea" codtipo="10" nomtipo="guía práctica" idesta="{{ semana.tareaspracticas_semanales.estado.id }}" idsem="{{ semana.numsemana }}" idtar="{{ semana.tareaspracticas_semanales.id }}" title="Ver más"><span class="fa fa-eye"></span></a>
                                            <a href="/pro_planificacion?action=reporte_trabajo_practico&id={{ semana.tareaspracticas_semanales.id|encrypt }}" class="btn btn-warning fa fa-download" target="_blank"> </a>
                                            {% if semana.tareaspracticas_semanales.estado.id == 2 %}
                                                {% if silabocab.materia.idcursomoodle > 0 %}
                                                    {% if not materiacerrada %}
                                                        <a href="javascript:;" data-placement="right" nhref="/pro_planificacion?action=creartareapracticamoodle&idt={{ semana.tareaspracticas_semanales.id|encrypt }}&ids={{ silabocab.id|encrypt }}" title="Crear tarea en moodle" class="btn confirmacionmodal btn-tini btn-primary"><i class="fa fa-check"></i> Crear Moodle</a>
                                                    {% endif %}
                                                {% endif %}
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                            {#                            {% endif %}#}
                        </td>
                        <td style="text-align: center"><div class="horasdoc{{ semana.unidad_planclase.0 }}">0</div></td>
                        <td style="text-align: center"><div class="porcedoc{{ semana.unidad_planclase.0 }}">0%</div></td>
                        <td style="text-align: center"><div class="horasauto{{ semana.unidad_planclase.0 }}">0</div></td>
                        <td style="text-align: center"><div class="porceauto{{ semana.unidad_planclase.0 }}">0%</div></td>
                        <td style="text-align: center"><div class="horasexp{{ semana.unidad_planclase.0 }}">0</div></td>
                        <td style="text-align: center"><div class="porceexp{{ semana.unidad_planclase.0 }}">0%</div></td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <div class="modal fade static" id="itemspanelo" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Editar Objetivo de Apendizaje</h3>
        </div>
        <div class="modal-body" style="display: inline-block;">
            <div class="row-fluid">
                <form id="formobj" name="formobj" class="form-vertical form-modal" style="width: 580px;">
                    <input type='hidden'  name='action' value='editarobjetivoaprendizaje'/>
                    <input type='hidden'  name='idso'  id="idso"/>
                    <label>Objetivo Aprendizaje</label>
                    <textarea maxlength="1000" rows="5" id="id_objetivo" style="text-align: justify"></textarea>
                </form>
            </div>
        </div>
        <div class="modal-footer">
            <a href="javascript:;" id="adicionarobj" class="btn btn-adicionar btn-success"> Guardar</a>
            <a href="javascript:;" class="btn btn-cerrar btn-info"> Cerrar</a>
        </div>
    </div>
    <div class="modal fade static" id="itemspanelenf" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Editar Enfoque Metodológico</h3>
        </div>
        <div class="modal-body" style="display: inline-block;">
            <div class="row-fluid">
                <form id="formenf" name="formenf" class="form-vertical form-modal" style="width: 580px;">
                    <input type='hidden'  name='action' value='editenfoquemetodologico'/>
                    <input type='hidden'  name='idse'  id="idse"/>
                    <label>Objetivo Aprendizaje</label>
                    <textarea maxlength="1000" rows="5" id="id_enfoque" style="text-align: justify"></textarea>
                </form>
            </div>
        </div>
        <div class="modal-footer">
            <a href="javascript:;" id="adicionarenf" class="btn btn-adicionar btn-success"> Guardar</a>
            <a href="javascript:;" class="btn btn-cerrar btn-info"> Cerrar</a>
        </div>
    </div>
    <div class="modal fade static" id="itemspanelrec" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Editar Recursos Didácticos</h3>
        </div>
        <div class="modal-body" style="display: inline-block;">
            <div class="row-fluid">
                <form id="formrec" name="formrec" class="form-vertical form-modal" style="width: 580px;">
                    <input type='hidden'  name='action' value='editrecursodidactico'/>
                    <input type='hidden'  name='idsr'  id="idsr"/>
                    <label>Recursos Didácticos</label>
                    <textarea maxlength="1000" rows="5" id="id_recurso" style="text-align: justify"></textarea>
                </form>
            </div>
        </div>
        <div class="modal-footer">
            <a href="javascript:;" id="adicionarrec" class="btn btn-adicionar btn-success"> Guardar</a>
            <a href="javascript:;" class="btn btn-cerrar btn-info"> Cerrar</a>
        </div>
    </div>
    <div class="modal fade static" id="itemspaneleva" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Editar Evaluación</h3>
        </div>
        <div class="modal-body" style="display: inline-block;">
            <div class="row-fluid">
                <form id="formeva" name="formeva" class="form-vertical form-modal" style="width: 580px;">
                    <input type='hidden'  name='action' value='editevaluacion'/>
                    <input type='hidden'  name='idsv'  id="idsv"/>
                    <label>Evaluación</label>
                    <textarea maxlength="1000" rows="5" id="id_evaluacion" style="text-align: justify"></textarea>
                </form>
            </div>
        </div>
        <div class="modal-footer">
            <a href="javascript:;" id="adicionareva" class="btn btn-adicionar btn-success"> Guardar</a>
            <a href="javascript:;" class="btn btn-cerrar btn-info"> Cerrar</a>
        </div>
    </div>
    <div class="modal fade static itemspanelduplicar_silabo" id="itemspanelduplicar_silabo" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Sílabos que puede importar</h3>
        </div>
        <div class="modal-body panelbody">

        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>
    <div class="modal fade static" id="itemspaneldetalle_temas_subtemas" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Temas y subtemas por reguistrar</h3>
        </div>
        <div class="modal-body panelbody">

        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>
    <div class="modal fade static" id="itemspanelplanificacionsalida" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Adicionar gira de clase</h3>
        </div>
        <div class="modal-body" style="display: inline-block;">
            <div class="row-fluid">
                <form id="formsalida" name="formsalida" class="form-vertical form-modal" style="width: 580px;">
                    <input type='hidden'  name='action' value='addplanificacionsalida'/>
                    <input type='hidden'  name='ids'  id="ids"/>
                    <label>Descripción </label>
                    <textarea rows="4" id="contenido" style="text-align: justify"></textarea>
                </form>
            </div>
        </div>
        <div class="modal-footer">
            <a href="javascript:;" id="adicionarplanificacionsalida" class="btn btn-adicionar btn-success"> Guardar</a>
            <a href="javascript:;" class="btn btn-cerrar btn-info"> Cerrar</a>
        </div>
    </div>
    <div class="modal fade static" id="itemspaneleditplanificacionsalida" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Editar gira de clase</h3>
        </div>
        <div class="modal-body" style="display: inline-block;">
            <div class="row-fluid">
                <form id="formsalida" name="formsalida" class="form-vertical form-modal" style="width: 580px;">
                    <input type='hidden'  name='ids'  id="ids"/>
                    <label>Descripción </label>
                    <textarea rows="4" id="id_contenido"style="text-align: justify"></textarea>
                </form>
            </div>
        </div>
        <div class="modal-footer">
            <a href="javascript:;" id="editplanificacionsalida" class="btn btn-adicionar btn-success"> Guardar</a>
            <a href="javascript:;" class="btn btn-cerrar btn-info"> Cerrar</a>
        </div>
    </div>
    <div class="modal fade static" id="itemspaneladicionarsubtemas" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Adicionar Sub Temas</h3>
        </div>
        <div class="modal-body" style="display: inline-block;">
            <div class="row-fluid">
                <form id="formsalida" name="formsubtemas" class="form-vertical form-modal" style="width: 580px;">
                    <span>Tema: </span>
                    <select id="id_tema" class="selector" name="tema" style="width: 92%">
                    </select><br><br>
                    <input type='hidden' name='ids' id="ids"/>
                    <table class="table table-bordered" border="0" width="100%" style="background-color: transparent">
                        <tr>
                            <td border="0" style="background-color: transparent">
                                <label><b>Sub Tema</b></label>
                            </td>
                        </tr>
                        <tr>
                            <td border="0" style="background-color: transparent">
                                <textarea rows="2" id="id_subtema"style="text-align: justify; width: 100%;" maxlength="150"></textarea><br>
                                <span class="obligatorio" style="color: red"></span>
                            </td>
                            <td style="text-align: right; background-color: transparent" width="8%" border="0">
                                <a href="javascript:;" class="btn btn-success addsubtema"><i class="fa fa-plus"></i></a>
                            </td>
                        </tr>
                    </table>
                </form>
                <div style="margin: 0px;overflow-y:auto;height:150px;">
                    <table class="table table-bordered table-condensed">
                        <thead>
                        <tr>
                            <th style="text-align: left">Tema</th>
                            <th style="text-align: left">Subtema</th>
                            <th style="text-align: left">Acciones</th>
                        </tr>
                        </thead>
                        <tbody id="contenidosubtemas">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <a href="javascript:;" id="adicionarsubtema" class="btn btn-adicionarsubtema btn-success"> Guardar</a>
            <a href="javascript:;" class="btn btn-cerrar btn-info"> Cerrar</a>
        </div>
    </div>
    <div class="modal fade static itemspanelimportar_recurso_periodo" id="itemspanelimportar_recurso_periodo" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Recursos que puede importar de otros periodos</h3>
        </div>
        <div class="modal-body panelbody"></div>
        <div class="modal-footer" style="margin-top: -15px">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>

    <div class="modal fade static itemspanelmigrar_compendio" id="itemspanelmigrar_compendio" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Compendios a migrar a moodle</h3>
        </div>
        <div class="modal-body panelbody_migrarcompendio"></div>
        <div class="modal-footer" style="margin-top: -15px">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-cerrarcompendios btn-info">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>

    <div class="modal fade static itemspanellink" id="itemspanellink" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Editar recursos didácticos (link de youtube, etc)</h3>
        </div>
        <div class="modal-body panelbodylink">

        </div>
        <div class="modal-footer">
            <a href="javascript:;" id="adicionarlink" class="btn btn-success adicionarlink"> Guardar</a>
            <a href="javascript:;" class="btn btn-cerrar btn-info"> Cerrar</a>
        </div>
    </div>
    <div class="modal fade static" id="itemsdelactividad" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle" id="nomtitulo"></h3>
        </div>
        <div class="modal-body panelbody">
            <input id="id_codigoactividad" name="id_codigoactividad" type="hidden">
            <input id="id_codigoopcion" name="id_codigoopcion" type="hidden">
            <div id="id_nomactividad"></div>
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-danger eliminaractividad">Eliminar</a></td>
                    <td><a href="javascript:;" class="btn btn-default delacticerrar">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>
    <div class="modal fade static" id="itemsdelactividadadmision" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle" id="nomtituloadmision"></h3>
        </div>
        <div class="modal-body panelbody">
            <input id="id_codigoactividadadmision" name="id_codigoactividadadmision" type="hidden">
            <input id="id_codigoopcionadmision" name="id_codigoopcionadmision" type="hidden">
            <div id="id_nomactividadadmision"></div>
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-danger eliminaractividadadmision">Eliminar</a></td>
                    <td><a href="javascript:;" class="btn btn-default delacticerraradmision">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>

    <div class="modal fade static" id="modalobservacion" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle" >Observaciones</h3>
        </div>
        <div class="modal-body panelbody">
            <label> Técnica</label>
            <textarea id="observaciontecnica" rows="3" cols="40" name="observación técnica" maxlength="1000" style="width: 100%" disabled></textarea>
            <label> Académica</label>
            <textarea id="observacionacademida" rows="3" cols="40" name="observación cadémica" maxlength="1000" style="width: 100%" disabled></textarea>
            <label> Cumplimiento</label>
            <input type='text' name='action' id="estadocumplimiento" value='' disabled/>
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-default cerrar_modalobservacion">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>
    <div class="modal fade static" id="auditoriacriterio" style="display: none;">
        <div class="modal-header">
            <h4 id="paneltitle">Detalle de recrusos</h4>
        </div>
        <div class="modal-body" id="selectauditoria-body">
        </div>
        <div class="modal-footer">
            <div style="float: right">
                <a class="btn btn-info auditoriacriterio_cerrar">Cerrar</a>
            </div>
        </div>
    </div>
    <div class="modal fade static" id="divmostrartarea" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle" id="nomtitulodetalle"></h3>
        </div>
        <input id="id_codigotarea" name="id_codigotarea" type="hidden">
        <input id="id_codtipo" name="id_codtipo" type="hidden">
        {#            <input id="id_codigoopcion" name="id_codigoopcion" type="hidden">#}
        <div id="id_nomactividad"></div>
        <div class="modal-body panelbodytarea">

        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-default cerrartarea">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>
    <div class="modal fade static" id="divnotificarmasivo" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Notificación</h3>
        </div>
        <div class="modal-body panelbodyaprobar">
            Esta seguro  que desea notificar para que los recursos sean revisados?
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-success savenotificar">Notificar</a></td>
                    <td><a href="javascript:;" class="btn btn-default cancelaaprobacion">Cancelar</a></td>
                </tr>
            </table>
        </div>
    </div>
    <script type="text/javascript">

        $(function() {
            descargazip = function(id) {
                bloqueointerface();
                $.post("/pro_planificacion", {'action': 'generarmasivo', 'id': id}, function(data) {
                    $.unblockUI();
                    if (data.result=='ok') {
                        {#openwindow_reporte(location.origin + data.url, 800, 500);#}
                        window.open(data.url, '_blank');
                    }else{
                        smoke.alert(data.mensaje)
                    }
                });
            };
            {% for unidadeslis in listadounidades %}
                {#alert(".listadotareas_"+ {{ unidadeslis.0 }})#}
                if ($(".listadotareas_" + {{ unidadeslis.0 }}).length == 0) {
                    d=1
                } else {
                    $(".horasauto{{ unidadeslis.0 }}").each(function () {
                        $(this).html({{ silabocab.materia.asignaturamalla.horasautonomassemanales }});
                    });
                    $(".porceauto{{ unidadeslis.0 }}").each(function () {
                        $(this).html('100%');
                    });
                }
                if ($(".listadoforos_" + {{ unidadeslis.0 }}).length == 0) {
                    d=1
                } else {
                    $(".horasauto{{ unidadeslis.0 }}").each(function () {
                        $(this).html({{ silabocab.materia.asignaturamalla.horasautonomassemanales }});
                    });
                    $(".porceauto{{ unidadeslis.0 }}").each(function () {
                        $(this).html('100%');
                    });
                }


                if ($(".listadotests_" + {{ unidadeslis.0 }}).length == 0) {
                    d=1
                } else {
                    $(".horasdoc{{ unidadeslis.0 }}").each(function () {
                        $(this).html({{ silabocab.materia.asignaturamalla.horasacdsemanal }});
                    });
                    $(".porcedoc{{ unidadeslis.0 }}").each(function () {
                        $(this).html('100%');
                    });
                    {#alert('si tiene')#}
                }

                if ($(".listadotareaspra_" + {{ unidadeslis.0 }}).length == 0) {
                    d=1
                } else {
                    $(".horasexp{{ unidadeslis.0 }}").each(function () {
                        $(this).html({{ silabocab.materia.asignaturamalla.horasapesemanal }});
                    });
                    $(".porceexp{{ unidadeslis.0 }}").each(function () {
                        $(this).html('100%');
                    });
                    {#alert('si tiene')#}
                }
                {% if silabocab.materia.asignaturamalla.horasapesemanal == 0 %}
                    $(".horasexp{{ unidadeslis.0 }}").each(function () {
                        $(this).html('N/A');
                    });
                    $(".porceexp{{ unidadeslis.0 }}").each(function () {
                        $(this).html('N/A');
                    });
                {% endif %}
            {% endfor %}
        })
    </script>
{% endblock %}