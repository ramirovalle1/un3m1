{% extends "basebs.html" %}
{% load sga_extras %}
{% block heading %}
    <script type="text/javascript">

        function soloNumerosValor(e) {
            key = e.keyCode || e.which;
            teclado = String.fromCharCode(key);
            letras = "1234567890.";
            if (letras.indexOf(teclado) === -1) {
                return false;
            }
        }

        $(function () {
            {% if mensajeestudiante %}
                $('#mensajeretorno').modal({keyboard: false, backdrop: 'static'});
            {% endif %}

            var listapreinscripciones = [];
            var listapreguntasppp = [];
            $("#addpre").click(function () {
                bloqueointerface()
                $.post("/alu_preinscripcioppp", {'action': 'addpreinscripcion'}, function (data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $("#paneltitle").html(data.title);
                        $(".panelbody").html(data.data);
                        $(".itempanelpreinscripcion1").modal({backdrop: 'static', width: '800px'}).modal('show');
                    } else {
                        $.unblockUI();
                        mensajeDanger(data.mensaje);
                    }
                }, 'json');
            });

            {% if cumple %}
                bloqueointerface()
                $.post("/alu_preinscripcioppp", {'action': 'addpreinscripcion', 'cumple': '{{ cumple }}'}, function (data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $("#paneltitle").html(data.title);
                        $(".panelbody").html(data.data);
                        $(".itempanelpreinscripcion1").modal({backdrop: 'static', width: '800px'}).modal('show');
                    } else {
                        $.unblockUI();
                        mensajeDanger(data.mensaje);
                    }
                }, 'json');
            {% endif %}

            $(".select_respuesta").change(function () {
                var idpre = $(this).attr('idpre');
                var idp = $(this).attr('idp');
                var idr = $(this).val();
                if (parseInt(idr) > 0) {
                    if (parseInt(idp) > 0 && parseInt(idpre) > 0) {
                        bloqueointerface();
                        $.post("/alu_preinscripcioppp", {
                            'action': 'actualizarrespuesta',
                            'idpre': idpre,
                            'idp': idp,
                            'idr': idr
                        }, function (data) {
                            if (data.result == 'ok') {
                                $.unblockUI();
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        }, 'json');
                    } else {
                        $.unblockUI();
                        smoke.alert("Error al guardar datos");
                    }
                }
            });
            $(".rechazar_practica").click(function () {
                var idp = $(this).attr('id');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/alu_preinscripcioppp",
                    data: {'action': 'rechazar_practica', 'id': idp},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $.unblockUI();
                            $(".panelbodyr").html(data.data);
                            $(".paneltitle").html(data.title);
                            $("#itemspanel").modal({backdrop: 'static', width: '700px'}).modal('show');
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });


            $(".mostrardocumentos").click(function () {
                var id = $(this).attr('idc');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/alu_finanzas",
                    data: {'action': 'mostrardocumentos', 'id': id},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $.unblockUI();
                            $(".panelbodymostrardocumento").html(data.data);
                            $("#itemspanelmostrardocumento").modal({backdrop: 'static', width: '600px'}).modal('show');
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#itemspanelmostrardocumento .btn-cerrar").click(function () {
                $("#itemspanelmostrardocumento").modal("hide");
            });


            $(".cargardocumento").click(function () {
                var ids = $(this).attr('idm');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/alu_preinscripcioppp",
                    data: {'action': 'subirdocumento', 'id': ids},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodycargardocumento").html(data.data);
                            $(".paneltitlecargardocumento").html(data.title);
                            $("#itemspanelcargardocumento").modal({backdrop: 'static', width: '75%'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#cerrarpanelcargardocumento").click(function () {
                $('#itemspanelcargardocumento').modal('hide');
            });

            $(".fancybox").fancybox();
            $(".gallerypdf").fancybox({
                openEffect: 'elastic',
                closeEffect: 'elastic',
                autoSize: true,
                width:'90%',
                type: 'iframe',
                iframe: {
                    preload: false // fixes issue with iframe and IE
                }
            });

        });


        function formModal(id, text, action, footer = true) {
            bloqueointerface();
            $('.panelbodylistado').empty();
            $('.panelbodyproceso').empty();
            $('.panelbodyform').empty();
            $.ajax({
                type: "GET",
                url: `{{ request.path }}`,
                data: {
                    'action': action,
                    'id': id,
                },
                success: function (data) {
                    $.unblockUI();
                    if (data.result === true) {
                        if (footer === true) {
                            $('#footermodallistado').hide();
                        }
                        $('.panelbodylistado').html(data.data);
                        $('#itemspanellistado .paneltitlelistado').html(text);
                        $("#itemspanellistado").modal({backdrop: 'static', width: '85%'}).modal('show');
                    } else {
                        smoke.alert(data.mensaje);
                    }
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error de conexión.");
                },
                dataType: "json"
            });
        }

        function formularioModal(id, text, action, footer = true) {
            bloqueointerface();
            $('.panelbodylistado').empty();
            $('.panelbodyform').empty();
            $('.panelbodyproceso').empty();
            $.ajax({
                type: "GET",
                url: `{{ request.path }}`,
                data: {
                    'action': action,
                    'id': id,
                },
                success: function (data) {
                    $.unblockUI();
                    if (data.result === true) {
                        if (footer === true) {
                            $('#footermodalform').hide();
                        }
                        $('.panelbodyform').html(data.data);
                        $('#itemspanelform .paneltitleform').html(text);
                        $("#itemspanelform").modal({backdrop: 'static'}).modal('show');
                    } else {
                        smoke.alert(data.mensaje);
                    }
                },
                error: function () {
                    $.unblockUI();
                    smoke.alert("Error de conexión.");
                },
                dataType: "json"
            });
        }

        $(function () {
            $("select:not(.swal2-select)").select2({width: '100%'});
            $.fn.select2.defaults.set('language', 'es');
            $(".select2hidden").each(function () {
                var id = $(this).attr("id");
                $("#" + id + "_select2").html('<option>' + $(this).attr("descripcion") + '</option>').trigger('change');
            });
        });

    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/js/i18n/es.js"></script>
    <script src="/static/adicionalesjs/formquestion.js?0.24"></script>
    <link href="/static/widget_ppp.css" rel="stylesheet"/>
    <script type="text/javascript" src="/static/js/jquery.fancybox.pack.js?v=1.0.0"></script>
    <link rel="stylesheet" href="/static/css/jquery.fancybox.css?v=1.0.0" type="text/css" media="screen"/>
    <script>
        $(function () {
            $(".observacion").click(function () {
                var id = $(this).attr('id');
                bloqueointerface();
                $.post("{{ request.path }}", {
                    'action': 'detalleobservacion',
                    'id': id
                }, function (data) {
                    if (data.result == 'ok') {
                        $.unblockUI();
                        $(".panelbodyobs").html(data.data);
                        $("#itemspanelobservacion").modal({backdrop: 'static', width: '800px'}).modal('show');
                    } else {
                        smoke.alert(data.mensaje);
                    }
                }, 'json');
            });
            $("#itemspanelobservacion #cerrar").click(function () {
                $("#itemspanelobservacion").modal("hide");
            });

            {% if messages %}
                {% for message in messages %}
                    Swal.fire('{{ message }}', 'Advertencia', '{{ message.tags }}');
                {% endfor %}
            {% endif %}

        })
    </script>
{% endblock %}
{% block atras %}/alu_practicaspro{% endblock %}
{% block canvas %}

    <div class="modal fade static" id="itemspanelobservacion" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Observación</h3>
        </div>
        <div class="modal-body panelbodyobs">
        </div>
        <div class="modal-footer">
            <p style="text-align: right; margin-bottom: 0">
                <a href="javascript:;" id="cerrar" class="btn btn-info"><i class="fa fa-close"></i> Cerrar</a>
            </p>
        </div>
    </div>

    <div class="modal fade inmodalmedio static modal-xl" id="itemspanellistado" style="display: none;">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            <h4><i class="fa fa-list"></i> <b class="paneltitlelistado">FORMULARIO MODAL</b></h4>
        </div>
        <div class="modal-body">
            <form autocomplete="off" method="post"
                  enctype="multipart/form-data" action="{{ request.path }}">
                {% csrf_token %}
                <div class="panelbodylistado">
                </div>
            </form>
        </div>
        <div class="modal-footer" id="footermodallistado">
            <a href="javascript:;" class="btn btn-default" data-dismiss="modal"><i
                    class="fa fa-window-close"></i>
                Cerrar</a>
        </div>
    </div>

    <div class="modal fade static" id="itemspanelform" style="display: none;">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            <h4><i class="fa fa-list"></i> <b class="paneltitleform">FORMULARIO MODAL</b></h4>
        </div>
        <div class="modal-body">
            <form autocomplete="off" method="post"
                  enctype="multipart/form-data" action="{{ request.path }}">
                {% csrf_token %}
                <div class="row-fluid panelbodyform">
                </div>
            </form>
        </div>
        <div class="modal-footer" id="footermodalform">
            <a href="javascript:;" class="btn btn-default" data-dismiss="modal"><i
                    class="fa fa-window-close"></i>
                Cerrar</a>
        </div>
    </div>

    <div class="modal fade static" id="mensajeretorno" style="display: none;">
        <div class="modal-header">
            <h4>Estimado(a) estudiante</h4>
        </div>
        <div class="modal-body">
            Una vez validada su solicitud el Departamento le asignará un tutor, la notificación le llegará
            automáticamente a su correo institucional. <br>
            <hr>
            <div style="text-align: right">
                <a href="{{ request.path }}" class="btn btn-success">Listo <i class="fa fa-check-circle"></i></a>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="waitpanelmensaje" style="display: none;">
        <div class="modal-body">
            <div class="row-fluid">
                <div class="span3">
                    <img src="/static/images/undraw/mailsuccess.png">
                </div>
                <div class="span9" style="text-align: justify;"><br>
                    <p id="textpanelmensaje"></p>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <a id="returnpanelmensaje" class="btn btn-primary text-left bloqueo_pantalla">
                <i class="fa fa-check-circle"></i> Aceptar</a>
        </div>
    </div>

    <div class='row-fluid'>
        <div class='span12'>
            <h4>{{ title }}</h4>
        </div>
    </div>

    {% if esexonerado %}
        <center>
            <img src="/static/images/undraw/exonerado.png" style="width: 746px">
            <h3><b>Exonerado</b></h3>
            <h5>Según oficio <b>Nro. UNEMI VICE.ACAD. -2013-563-OF</b></h5>
        </center>

    {% else %}

        {% if conf.mensaje %}
            {#            <div class="alert alert-info">#}
            {#                <a href="javascript:;" class="close" data-dismiss="alert">×</a>#}
            {#                <h4 class="alert-heading">AVISO IMPORTANTE</h4>#}
            {#                {{ conf.mensaje|safe }}#}
            {#            </div>#}


            <div class="row-fluid well" style="padding: 7px; !important;">
                <div class="span1 hidden-phone">
                    <center><br>
                        <img src="/static/images/undraw/iconoppp4.png?0.2" style="margin-left: 12px;" width="80%">
                    </center>
                </div>
                <div class="span9" style="text-align: left;">
                    <h3>Comunicado del proceso de pre inscripción a prácticas pre profesionales</h3>
                    {{ conf.mensaje|safe }}
                </div>
            </div>

        {% endif %}

        <div class="row-fluid">
            {#            puede_preinscribirseppp#}
            {% if not inscripcion.carrera.modalidad == 3 %}
            {% if conf %}
                <a href="javascript:;" id="addpre" class="btn btn-success"><i class="fa fa-plus"></i> Adicionar</a>
            {% endif %}
            {% endif %}

        </div>

        <div class="row-fluid">
            <div class='span12'>
                {% for pre in confpre %}
                    <table class="table table-bordered tablaHoverOculto">
                        <thead>
                        <tr>
                            <th colspan="3" style="text-align: center">Motivo</th>
                            <th colspan="3" style="text-align: center">Preguntas</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td colspan="3" style="text-align: center">{{ pre.motivo }}</td>
                            <td style="text-align: center" colspan="3">
                                {% if pre.preguntas %}
                                    <div class="accordion-group">
                                        <div class="accordion-heading" style="background-color:#f0f0f0">
                                            <a style="color: black" class="accordion-toggle" data-toggle="collapse"
                                               data-parent="#accordion3" href="#collapse3{{ forloop.counter }}">
                                                <span class="fa fa-chevron-down far"></span> Preguntas <span
                                                    class="label label-warning">{{ p.cant_respuestas }}</span>
                                            </a>
                                        </div>
                                        <div id="collapse3{{ forloop.counter }}"
                                             class="accordion-body collapse tercerafilaacoordion in">
                                            <div class="accordion-inner">
                                                <table class="table tablaBusquedaSearch">
                                                    <tbody>
                                                    {% for p in pre.preguntas %}
                                                        <tr>
                                                            <td width="70%"><b>{{ forloop.counter }}. {{ p }}</b></td>
                                                            <td width="30%">
                                                                {% with mi_respuesta=p|args:idalu|args:pre.id|call:"mi_respuesta" %}
                                                                    <select class="selector select_respuesta"
                                                                            idp="{{ p.id }}" idpre="{{ pre.id }}"
                                                                            style="width: 100%">
                                                                        <option value="0">Seleccione la respuesta
                                                                        </option>
                                                                        {% for r in p.respuestas %}
                                                                            <option{% if mi_respuesta %}
                                                                                {% if mi_respuesta.id == r.id %}selected
                                                                                {% endif %}{% endif %}
                                                                                value="{{ r.id }}">{{ r }}</option>
                                                                        {% endfor %}
                                                                    </select>
                                                                {% endwith %}
                                                            </td>
                                                        </tr>
                                                    {% endfor %}
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}
                            </td>
                        </tr>
                        </tbody>
                        <thead>
                        <tr>
                            {#                    <th>Pre-Inscripción</th>#}
                            <th style="text-align: center; width: 15%">Itinerario</th>
                            <th style="text-align: center; width: 20%">Fecha de Inscripción</th>
                            <th style="text-align: center; width: 25%">{% if coordinacion == 1 %}Documento de Prioridad {% else %}Carta de Aceptación Empresa{% endif %}</th>
                            <th style="text-align: center; width: 25%">Datos asignación</th>
                            <th style="text-align: center; width: 6%">Estado</th>
                            <th style="text-align: center; width: 15%">Acciones</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% with inscripciones=pre|args:idalu|call:"mis_preinscripciones" %}
                            {% for p in inscripciones %}
                                <tr>
                                    <td style="text-align: center">
                                        {% if p.itinerariomalla %}
                                            {{ p.itinerariomalla.nombre|default_if_none:'' }}<br>
                                            {{ p.itinerariomalla.nivel }}
                                            <b>({{ p.itinerariomalla.horas_practicas }} HORAS )</b>
                                        {% else %}
                                            <i class="fa fa-times"></i> Sin Itinerario.
                                        {% endif %}
                                        {% with extra=p.extradetallepreinscripcionpracticaspp_set.last %}
                                            {% if extra.actacompromisopracticas %}
                                                <br><b>Acta de compromiso: </b>
                                                <a class="btn btn-default gallerypdf py-2" data-fancybox-type="iframe" href="{{ extra.actacompromisopracticas.url }}">
                                                    <img src="/static/images/pdf.png" width="18" height="18" align="absmiddle" alt="...">
                                                </a>
                                            {% endif %}
                                        {% endwith %}
                                    </td>
                                    <td style="text-align: center">
                                        <b>F. Creación</b>: {{ p.fecha|date:"d-m-Y h:i a" }}
                                    </td>
                                    <td style="text-align: center">
                                        {% if p.archivo %}
                                            <a target="_blank" class="btn btn-primary tr" href="{{ p.archivo.url }}"
                                               title="Descargar"><i
                                                    class="fa fa-download"></i> <b>{% if coordinacion == 1 %}Documento de Prioridad {% else %}Carta de Aceptación{% endif %}</b></a>
                                            {#                                            {% if p.puede_eliminar %}#}
                                            {#                                                <a class="btn btn-danger eliminacionmodal tr" title="Eliminar archivo"#}
                                            {#                                                   href="javascript:;"#}
                                            {#                                                   nhref="/alu_preinscripcioppp?action=delarchivo&id={{ p.id }}"><i#}
                                            {#                                                        class="fa fa-times"></i></a>#}
                                            {#                                            {% endif %}#}
                                            <br>
                                            {% if  p.fechaarchivo %}
                                                {% if p.archivo %}
                                                    <b>{% if coordinacion == 1 %}Fecha Documento {% else %}F. Carta Aceptación{% endif %}</b>: {{ p.fechaarchivo|date:"d-m-Y" }}
                                                    {{ p.horaarchivo|date:"h:i a" }}
                                                {% endif %}
                                            {% endif %}
                                        {% else %}
                                            <label class="label label-default"><i class="fa fa-times"></i>SIN
                                                ARCHIVO</label>
                                        {% endif %}
                                    </td>
                                    <td>
                                        {% if p.empresaempleadora or p.otraempresaempleadora %}<b>Empresa: </b>
                                            {% if p.empresaempleadora %}
                                                {{ p.empresaempleadora }}{% elif p.otraempresaempleadora %}
                                                {{ p.otraempresaempleadora }}{% endif %}<br>{% endif %}
                                        <b>{% if p.tutorunemi %}Tutor Unemi: </b>{{ p.tutorunemi }}
                                        {% else %}
                                            <center>
                                                <label class="label label-default">
                                                    <i class="fa fa-times-circle"></i> PENDIENTE DE ASIGNACIÓN
                                                </label>
                                            </center>
                                        {% endif %}<br>
                                    </td>
                                    <td style="text-align: center">
                                        {% if p.estado %}
                                            {% if p.recorrido %}
                                                <span class="label {% if p.recorrido.estado == 1 %}label-warning{% elif p.recorrido.estado == 2 %} label-success {% elif p.recorrido.estado == 4 %} label-info {% else %} label-important{% endif %}">{{ p.recorrido.get_estado_display }}</span>
                                            {% else %}
                                                <span class="label {% if p.estado == 1 %}label-warning{% elif p.estado == 2 %} label-success {% else %} label-important{% endif %}">{{ p.get_estado_display }}</span>
                                                {% if p.estado_estudiantes %}
                                                    {% if p.estado_estudiantes.estado == 5 %}
                                                        <span class="label label-success">ASIGNADO</span>
                                                    {% else %}
                                                        <span class="label {% if p.estado == 1 %}label-warning{% elif p.estado == 2 %} label-success {% else %} label-important{% endif %}">{{ p.get_estado_display }}</span>
                                                    {% endif %}
                                                {% endif %}
                                            {% endif %}
                                            {% if p.estado_estudiantes %}
                                                <br>
                                                <span class="label {% if p.estado_estudiantes.estado == 5 %}label-info{% elif p.estado_estudiantes.estado == 3 %} label-important{% endif %}">{{ p.estado_estudiantes.get_estado_display }}</span>
                                            {% endif %}
                                        {% endif %}
                                    </td>
                                    <td style="text-align: center">
                                        <div class="btn-group" style="text-align: left">
                                            <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown"
                                               href="javascript:;">Acciones<span
                                                    class="caret"></span></a>
                                            <ul class="dropdown-menu pull-right">
                                                {% if not coordinacion == 1 %}
                                                    <li>
                                                        <a href="javascript:void(0);"
                                                           onclick="formModal('{{ p.pk }}', 'SOLICITUD A EMPRESA', 'missolicitudesempresa', false)">
                                                            <i class="fa fa-building"></i> Solicitud a Empresa
                                                        </a>
                                                    </li>
                                                {% endif %}

                                                {% if p.estado == 1 or p.estado == 4 %}
                                                    {% if p.preinscripcion.puede_asignar %}
                                                        {% if p.solicitud_asignacion_tutor %}
                                                            {% if p.solicitud_asignacion_tutor.estado == 1 %}
                                                                <li>
                                                                    <a href="?action=addtutor&id={{ p.pk }}" class="bloqueo_pantalla">
                                                                        <i class="fa fa-edit"></i> Editar Solicitud Asignación de Tutor
                                                                    </a>
                                                                </li>
                                                            {% endif %}
                                                        {% else %}
                                                            <li>
                                                                <a href="?action=addtutor&id={{ p.pk }}" class="bloqueo_pantalla">
                                                                    <i class="fa fa-user-plus"></i> Solicitar Asignación de Tutor
                                                                </a>
                                                            </li>
                                                        {% endif %}
                                                    {% endif %}
                                                {% endif %}
                                                {% if p.estado == 1 %}
{#                                                    {% if coordinacion == 1 %}#}
{#                                                        <li>#}
{#                                                            <a class="eliminacionmodal tl" href="javascript:;"#}
{#                                                               nhref="/alu_preinscripcioppp?action=delpreinscripcion&id={{ p.id }}">#}
{#                                                                <i class="fa fa-trash"></i> Eliminar#}
{#                                                            </a>#}
{#                                                        </li>#}
{#                                                    {% endif %}#}
                                                {% endif %}
                                                {% if p.detallerecoridopreinscripcionpracticaspp_set.all %}
                                                    <li>
                                                        <a href="javascript:void(0)" class="observacion"
                                                           id="{{ p.pk }}">
                                                            <i class="fa fa-history"></i> Ver Seguimiento
                                                        </a>
                                                    </li>
                                                {% endif %}
                                                {% if not p.preinscripcion.puede_asignar %}
                                                    {% if p.archivo %}
                                                        {% if p.estado == 1 or p.estado == 4 or p.estado == 6 %}
                                                            {% if p.preinscripcion.subirarchivo %}
                                                                <li>
                                                                    <a href="javascript:;" idm="{{ p.id }}"
                                                                       class='cargardocumento'>
                                                                        <i class="fa fa-retweet"></i>{% if coordinacion == 1 %} Remplazar documento de prioridad
                                                                    {% elif not p.estado == 9 %}
                                                                        Remplazar Carta de Aceptación
                                                                    {% endif %}
                                                                    </a>
                                                                </li>
                                                            {% endif %}
                                                        {% endif %}
                                                    {% else %}
                                                        {% if p.estado == 1 or p.estado == 4 or p.estado == 6 %}
                                                            {% if p.preinscripcion.subirarchivo %}
                                                                <li>
                                                                    <a href="javascript:;" idm="{{ p.id }}"
                                                                       class='cargardocumento'>
                                                                        <i class="fa fa-upload"></i> {% if coordinacion == 1 %}
                                                                        Subir documento de prioridad
                                                                    {% elif not p.estado == 9 %}
                                                                        Subir Carta deAceptación
                                                                    {% endif %}
                                                                    </a>
                                                                </li>
                                                            {% endif %}
                                                        {% endif %}
                                                    {% endif %}
                                                {% endif %}
                                            </ul>
                                        </div>

                                        {#                                                                        {% if p.estado == 2 and not p.estado_estudiantes %}#}
                                        {#                                                                            <a class="btn btn-success btn-mini confirmacionmodal" href="javascript:;" nhref="/alu_preinscripcioppp?action=aceptar_practica&id={{ p.id }}"><i class="fa fa-check"></i> Aceptar</a>#}
                                        {#                                                                            <a class="btn btn-danger btn-mini rechazar_practica" id="{{ p.id }}"><i class="fa fa-close"></i> Rechazar</a>#}
                                        {#                                                                        {% endif %}#}
                                    </td>
                                </tr>
                                {% if p.solicitud_asignacion_tutor %}
                                    <tr>
                                        <td colspan="6">
                                            <i class="fa fa-building"></i> Asignación de tutor tipo <b>{{ p.solicitud_asignacion_tutor.get_tipovinculacion_display }}</b> para la empresa <b>{{ p.solicitud_asignacion_tutor.get_empresa }}</b> <b>{{ p.solicitud_asignacion_tutor.get_tipopracticas_display }}</b> se encuentra <label class="{{ p.solicitud_asignacion_tutor.estado_label|safe }}">{{ p.solicitud_asignacion_tutor.get_estado_display }}</label>
                                            <br>
                                            <b><i class="fa fa-calendar"></i> F. Solicitud:</b> {{ p.solicitud_asignacion_tutor.fecha_creacion|date:"d-m-Y h:i a" }}
                                            {% if p.solicitud_asignacion_tutor.fecha_modificacion %}
                                                | <b><i class="fa fa-calendar"></i> F. Modificación:</b> {{ p.solicitud_asignacion_tutor.fecha_modificacion|date:"d-m-Y h:i a" }}
                                            {% endif %}
                                        </td>
                                    </tr>
                                {% endif %}
                            {% endfor %}
                        {% endwith %}
                        </tbody>
                    </table>
                    <hr>
                    {% empty %}
                    <center>
                        <b style="font-size:25px;">
                            <div>
                                <figure class="text-center">
                                    <img class="img-fluid"
                                         src="data:image/svg+xml;base64,PHN2ZyBpZD0iY29sb3IiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iNTEyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9IiM5ZTllOWUiPjxwYXRoIGQ9Im0yMi4yNSAxOS4yNWgtM2MtLjQxNCAwLS43NS0uMzM2LS43NS0uNzVzLjMzNi0uNzUuNzUtLjc1aDNjLjQxNCAwIC43NS4zMzYuNzUuNzVzLS4zMzYuNzUtLjc1Ljc1eiIvPjxwYXRoIGQ9Im0xNi4yNSAxOS4yNWgtM2MtLjQxNCAwLS43NS0uMzM2LS43NS0uNzVzLjMzNi0uNzUuNzUtLjc1aDNjLjQxNCAwIC43NS4zMzYuNzUuNzVzLS4zMzYuNzUtLjc1Ljc1eiIvPjxwYXRoIGQ9Im0xMC4yNSAxOS4yNWgtM2MtLjQxNCAwLS43NS0uMzM2LS43NS0uNzVzLjMzNi0uNzUuNzUtLjc1aDNjLjQxNCAwIC43NS4zMzYuNzUuNzVzLS4zMzYuNzUtLjc1Ljc1eiIvPjxwYXRoIGQ9Im00LjI1IDE5LjI1aC0zYy0uNDE0IDAtLjc1LS4zMzYtLjc1LS43NXMuMzM2LS43NS43NS0uNzVoM2MuNDE0IDAgLjc1LjMzNi43NS43NXMtLjMzNi43NS0uNzUuNzV6Ii8+PC9nPjxwYXRoIGQ9Im05LjI1IDE0LjI1Yy0uMjU2IDAtLjUxMi0uMDk4LS43MDctLjI5My0uMzkxLS4zOTEtLjM5MS0xLjAyMyAwLTEuNDE0bDUuNS01LjVjLjM5MS0uMzkxIDEuMDIzLS4zOTEgMS40MTQgMHMuMzkxIDEuMDIzIDAgMS40MTRsLTUuNSA1LjVjLS4xOTUuMTk1LS40NTEuMjkzLS43MDcuMjkzeiIgZmlsbD0iI2Y0NDMzNiIvPjxwYXRoIGQ9Im0xNC43NSAxNC4yNWMtLjI1NiAwLS41MTItLjA5OC0uNzA3LS4yOTNsLTUuNS01LjVjLS4zOTEtLjM5MS0uMzkxLTEuMDIzIDAtMS40MTRzMS4wMjMtLjM5MSAxLjQxNCAwbDUuNSA1LjVjLjM5MS4zOTEuMzkxIDEuMDIzIDAgMS40MTQtLjE5NS4xOTUtLjQ1MS4yOTMtLjcwNy4yOTN6IiBmaWxsPSIjZjQ0MzM2Ii8+PC9zdmc+"
                                         width="200px"/>
                                </figure>
                            </div>
                            <p class="text-center">
                                NO EXISTEN REGISTROS DE PRE-INSCRIPCIONES
                            </p>
                        </b>
                    </center>
                {% endfor %}
            </div>
        </div>

    {% endif %}

    <div class="modal fade static itempanelpreinscripcion1" id="itempanelpreinscripcion1" style="display: none;">
        <div class="modal-header">
            <h3 id="paneltitle"></h3>
        </div>
        <div class="modal-body panelbody">
        </div>
    </div>

    <div class="modal fade static" id="itemspanel" style="display: none;">
        <div class="modal-header">
            <table border="0" width="100%" style="background-color: transparent">
                <tr>
                    <td style="width: 80%"><h3 class="paneltitle"></h3></td>
                    <td><a href="javascript:;" id="cerrarpanel" class="btn btn-danger btn-mini pull-right"><i
                            class="fa fa-remove"></i></a></td>
                </tr>
            </table>
        </div>
        <div class="modal-body panelbodyr">
        </div>
    </div>

    <div class="modal fade static" data-keyboard="false" id="itemspanelmostrardocumento" style="display: none;">
        <div class="modal-header">
            <h4 class="paneltitle">Mostrar documentos cargados</h4>
        </div>
        <div class="modal-body panelbodymostrardocumento">
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>

    <div class="modal fade static" id="itemspanelcargardocumento" style="display: none;">
        <div class="modal-header">
            <table border="0" width="100%" style="background-color: transparent">
                <tr>
                    <td style="width: 80%"><h4 class="paneltitlecargardocumento">Asignar Beca</h4></td>
                    <td><a href="javascript:;" id="cerrarpanelcargardocumento" title="Cerrar"
                           class="btn btn-danger btn-mini pull-right"><i class="fa fa-remove"></i></a></td>
                </tr>
            </table>
        </div>
        <div class="modal-body panelbodycargardocumento">
        </div>
    </div>

{% endblock %}