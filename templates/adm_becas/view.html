{% extends "basebs.html" %}
{% load sga_extras %}
{% load static %}
{% load humanize %}
{% block heading %}
    <script type="text/javascript" src='/static/js/select2.js?v=1.0.0' ></script>
    <link type='text/css' rel='stylesheet' href="/static/css/select2.css?v=1.0.0"/>
    <link rel="stylesheet" href="/static/css/jquery.fancybox.css?v=1.0.0" type="text/css" media="screen" />
    <script type="text/javascript" src="/static/js/jquery.fancybox.pack.js?v=1.0.0"></script>
    <script>
        $(document).ready(function() {
            $(".fancybox").fancybox();
        });


        var uiModalValidacionDocumentosMasivo = {
            init: function () {
                var self = this;
                self.items = [];
                self.$modalForm = $('#modalValidacionDocumentosMasivo');
                $('.action-close', self.$modalForm).click(function(){
                    self.close();
                });
                $('.action-edit', self.$modalForm).click(function(){
                    //self.setFormReadOnly(false);
                    self.setFormType('edit');
                });
                $('.action-save', self.$modalForm).click(function (){
                    self.actionSave();
                });
            },
            processModalInit: function (){
                var self = this;
                $("#datatablePerfiles .action-selected-all",self.$modalForm).change(function () {
                    let valor = $(this).is(':checked');
                    $('#datatablePerfiles tbody > tr > td>input.selectorproductos ', self.$modalForm).each(function (key, input_check) {
                            if(valor) {
                                $(input_check).prop('checked', true);
                            }else{
                                 $(input_check).prop('checked', false);
                            }
                    })

                    /*console.log($("#datatableDirecciones", self.$modalForm).data());
                    var table = $("#datatableDirecciones", self.$modalForm).DataTable();

                    var data = table
                        .rows()
                        .data();

                    console.log(data);*/
                });
            },
            close: function (){
                var self = this;
                self.$modalForm.modal('hide');
            },
            open: function(type){
                var self = this;
                bloqueointerface();

                /*isEdit = typeof isEdit == 'undefined' ? false : isEdit;
                var self = this;
                self.setFormType(type);
                if (isEdit) {
                    $('.action-edit', self.$modalForm).addClass('disabled').hide();
                    $('.action-save', self.$modalForm).addClass('disabled').hide();

                }*/
                var h = $(window).height()-450;
                $.ajax({
                    type: "GET",
                    url: "{{ request.path }}",
                    data: {'action': 'loadFormValidacionMasivoDocumentos', 'typeForm': type},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result) {
                            $(".modal-body", self.$modalForm).html(data.data);
                            $(".modal-title", self.$modalForm).html('VALIDACIÓN DE DOCUMENTOS DE FORMA MASIVA');
                            var h = $(window).height() - 150;
                            self.$modalForm.modal({backdrop:'static', width: '90%', height: h}).modal('show');
                            self.processModalInit();
                        } else {
                            NotificationJG.error(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        NotificationJG.error("Error al enviar los datos.");
                    },
                    dataType: "json",
                });
            },
            setFormType: function( type /* new, edit, view */ )
            {
                var self = this;

                if( type == 'new' )
                {
                    $('.modal-header span', self.$modalForm).html('Nuevo');

                    $('.action-save', self.$modalForm).show();
                    $('.action-edit', self.$modalForm).hide();
                    self.setFormReadOnly(false);
                }
                else if( type == 'edit' )
                {
                    $('.modal-header span', self.$modalForm).html('Editar');

                    $('.action-save', self.$modalForm).show();
                    $('.action-edit', self.$modalForm).hide();
                    self.setFormReadOnly(false);
                }
                /*else if( type == 'view' )
                {
                    $('.modal-header span', self.$modalForm).html('Ver');

                    $('.action-save', self.$modalForm).hide();
                    $('.action-edit', self.$modalForm).show();
                    self.setFormReadOnly(true);
                }*/
            },
            setFormReadOnly: function( isFormReadOnly )
            {
                var self = this;

                $('[name="name"]', self.$modalForm).prop('disabled', isFormReadOnly);
                $('[name="name"]', self.$modalForm).prop('readonly', isFormReadOnly);

                 if ((!isFormReadOnly))
                {
                    $(".action_new_carrera", self.$modalForm).css("display", "");
                    $(".action_remove_carrera", self.$modalForm).css("display", "");
                }

            },
            formGetData:function(){
                var self = this;
                var data = {}
                let becados = ControllerRequests.items;
                data['id'] = $('[name="id"]', self.$modalForm).val();
                data['action'] = $('[name="action"]', self.$modalForm).val();
                data['estadodocumentoasignar'] = $('[name="estadodocumentoasignar"]', self.$modalForm).val();
                data['observacion'] = $('[name="observaciones"]', self.$modalForm).val();
                data['becados'] = JSON.stringify(becados);
                data['esta_vacio'] = becados.length === 0;
                console.log(becados.length)
                return data;
            },
            actionSave: function (){
                var self = this;
                var aData = self.formGetData();
                console.log(aData)
                if(aData.esta_vacio){
                    NotificationJG.error("Debe seleccionar uno o varias becados");
                    return;
                }
                if(aData.estadodocumentoasignar == ""){
                    NotificationJG.error("Debe seleccionar uno estado de verificación");
                    return;
                }
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "{{request.path}}",
                    data: aData,
                    success: function(data) {
                        $.unblockUI();
                        if (data.result) {
                            NotificationJG.success(data.mensaje);
                            ControllerRequests.reload();
                        }
                        else{
                            NotificationJG.error(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        NotificationJG.error("Error al enviar los datos.");
                    },
                    dataType: "json",
                });
            },
        };
        $(function() {
            uiModalValidacionDocumentosMasivo.init();
            var request;

            $("select").select2({minimumResultsForSearch: 5 });


            $("#id_fecha_desde, #id_fecha_hasta").datepicker({format:"dd-mm-yyyy"}).on('changeDate', function(ev){ $(this).datepicker('hide'); });
            $("#id_fecha_desde_spago, #id_fecha_hasta_spago").datepicker({format:"dd-mm-yyyy"}).on('changeDate', function(ev){ $(this).datepicker('hide'); });

            $("#id_fecha_desde, #id_fecha_hasta, #id_fecha_desde_spago, #id_fecha_hasta_spago").blur(function () {
                fechavalida($(this));
            });

            $("#id_fecha_inicio, #id_fecha_fin, #id_fini, #id_ffin, #desdepago, #hastapago").datepicker({format:"dd-mm-yyyy"}).on('changeDate', function(ev){ $(this).datepicker('hide');});
            $("#id_fecha_inicio, #id_fecha_fin, #id_fini, #id_ffin, #desdepago, #hastapago").addClass("validate[required]");


            buscar_alumno = function(query, process) {
                tablahistorialinicial();

                if (request) {
                    request.abort();
                }
                request = $.get("/reportes", {'action':'data', 'model': 'BecaAsignacion', 'p': 1, 'q': query, 's': 10}, function(data) {
                    var dato;
                    if (data.results) {
                        $("#alumnocedulanombre").get(0).results = data.results;
                        listing = [];
                        for (var i in data.results) {
                            dato = data.results[i];
                            listing.push(dato.name);
                        }
                        process(listing);
                    }
                }, 'json');
            };

            $("#alumnocedulanombre").val();

            alumnocedulanombre = $("#alumnocedulanombre");
            alumnocedulanombre.typeahead({source: buscar_alumno, updater: function(item) {
                    //alert("Se eejcuta al seleccionar u nnombre");
                    elemento = alumnocedulanombre;
                    var datos;
                    var results = elemento.get(0).results;
                    for (var i in results) {
                        datos = results[i];
                        if (item==datos.name) {
                            actualizaalumnos(datos.id);
                        }
                    }
                    return item;
                }});

            actualizaalumnos = function(id) {
                if (id) {
                    showWaiting("Buscando becas del estudiante", "Espere unos segundos por favor...");
                    $.get("/adm_becas", {'action':'historialbeca', 'id': id}, function(data) {
                        $("#segmentohistorial").html(data);

                        alumnocedulanombre.val('');
                        hideWaiting();
                        tooltips();
                        //$('.reportedirecto').unbind();
                        //conectar_reporte();
                    }, 'html');
                }
            };

            tablahistorialinicial = function (){
                tabla = '<table class="table table-bordered">'+
                    '<thead>'+
                    '<tr>'+
                    '   <th>'+
                    '        Estudiante: NINGUNO<br>Carrera: NINGUNA'+
                    '    </th>'+
                    '</tr>'+
                    '</thead>'+
                    '<tbody>'+
                    '    <table class="table table-bordered table-striped" >'+
                    '        <thead>'+
                    '            <tr>'+
                    '                <th style="width: 5%; text-align: center">#</th>'+
                    '                <th style="width: 50%; text-align: center;">Tipo de Beca</th>'+
                    '                <th style="width: 45%; text-align: center;">Periodo Académico</th>'+
                    '            </tr>'+
                    '      </thead>'+
                    '     <tbody>'+
                    '            <tr>'+
                    '               <td style="text-align: center">&nbsp;</td>'+
                    '              <td style="text-align: justify">&nbsp;</td>'+
                    '             <td style="text-align: justify">&nbsp;</td>'+
                    '        </tr>'+
                    '     </tbody>'+
                    '   </table>'+
                    '</tbody>'+
                    '</table>';
                $("#segmentohistorial").html(tabla);
            }

            notificar = function (id) {
                var id = parseInt(id);
                smoke.confirm("¿Está seguro de notificar beca.?", function(e){
                    if (e){
                        $.blockUI({message: null});
                        $.post("/adm_becas", {"action":'notificar', "id": id}, function(data) {
                            if (data.result=='ok') {
                                location.href = '/adm_becas';
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        }, "json");
                    }
                }, {
                    ok: "SI,SEGURO",
                    cancel: "NO,CANCELAR",
                    classname: "custom-class",
                    reverseButtons: true
                });
            };
            $(".tl").tooltip({position:"center up"});

            $("#search").click(function() {
                busquedalista()
            });

            $('#searchinput').keyup(function(e) {
                if(e.keyCode == 13) {
                    busquedalista()
                }
            });

            $("#id_btipos").change(function() {
                busquedalista()
            });

            $("#id_tipos").change(function() {
                busquedalista()
            });

            $("#id_estadodocumento").change(function() {
                busquedalista()
            });

            $("#id_estadocontrato").change(function() {
                busquedalista()
            });

            $("#id_estadocumplimiento").change(function() {
                busquedalista()
            });

            $("#id_estadocomprobante").change(function() {
                busquedalista()
            });

            busquedalista = function () {
                location.href = "/adm_becas?s="+$("#searchinput").val().toUpperCase()+"&btipo="+$("#id_btipos").val()+"&tipo="+$("#id_tipos").val()+"&estadodocumento="+$("#id_estadodocumento").val()+"&estadocontrato="+$("#id_estadocontrato").val()+"&estadocumplimiento="+$("#id_estadocumplimiento").val()+"&estadocomprobante="+$("#id_estadocomprobante").val();
            };

            var tabhojavida = localStorage.getItem('tabhojavida');
            if (!tabhojavida){
                tabhojavida = "#1";
                localStorage.setItem("tabhojavida", tabhojavida);
            }

            $('.tabs').each(function(){
                if ($(this).attr('href') == tabhojavida){
                    $(this).trigger('click');
                }
            }).click(function(){
                localStorage.setItem("tabhojavida", $(this).attr('href'));
            });

            $("#divasignacion").click(function() {
                bloqueointerface();
                location.href = '/adm_becas';
            });
            $("#diveconomica").click(function() {
                bloqueointerface();
                location.href = '/adm_becas?action=listaquintil';
            });
            $("#divpromedio").click(function() {
                bloqueointerface();
                location.href = '/adm_becas?action=listapromedio';
            });
            $("#divdeporte").click(function() {
                bloqueointerface();
                location.href = '/adm_becas?action=listadeporte';
            });
            $("#divdiscapacitados").click(function() {
                bloqueointerface();
                location.href = '/adm_becas?action=listadiscapacitados';
            });
            $("#divsolicitud").click(function() {
                bloqueointerface();
                location.href = '/adm_becas?action=listasolicitudes';
            });

            $("#divprimernivel").click(function() {
                bloqueointerface();
                location.href = '/adm_becas?action=listaprimernivel';
            });
            $("#divetnia").click(function() {
                bloqueointerface();
                location.href = '/adm_becas?action=listaetnia';
            });
            $("#divextranjero").click(function() {
                bloqueointerface();
                location.href = '/adm_becas?action=listaextranjero';
            });
            $("#divmigrante").click(function() {
                bloqueointerface();
                location.href = '/adm_becas?action=listamigrante';
            });
            $('.grupopago').blur(function(){
                grupopago($(this));
            });
            $('.grupopago').keyup(function(e){
                if(e.keyCode == 13) {
                    grupopago($(this));
                }
            });
            grupopago = function (elemento) {
                var mid;
                var valoranterior = elemento.attr("va");
                var valoractual = elemento.val();
                if (valoractual!=valoranterior){
                    mid = elemento.attr("bid");
                    bloqueointerface();
                    $.post("/adm_becas", {'action': 'updategrupopago', 'bid': mid, 'vc': valoractual}, function(data) {
                        $.unblockUI();
                        if (data.result=='ok') {
                            elemento.attr({'va': data.valor});
                            elemento.val(data.valor);
                        } else {
                            elemento.val(valoranterior);
                            smoke.alert(data.mensaje);
                        }
                    }).error(function(){
                        $.unblockUI();
                        elemento.val(valoranterior);
                        smoke.alert("errorenvio al cambiar el grupo pago");
                    });
                }
            };
            $('.tipos_asig').change(function(){
                var tipo= $(this).attr('tipo');
                bloqueointerface();
                $.post("/adm_becas", {'action': 'updatetipo', 'bid': tipo, 'tipo': $(this).val()}, function(data) {
                    $.unblockUI();
                    if (data.result=='ok') {
                        return false
                    } else {
                        smoke.alert(data.mensaje);
                    }
                }).error(function(){
                    $.unblockUI();
                    smoke.alert("errorenvio al cambiar el grupo pago");
                });
            });
            $(".infomepago").click(function () {
                $("#itemspanel3").modal({backdrop:'static', width: '300'}).modal('show');
            });

            $("#itemspanel_cerrar_3").click(function () {
                $("#itemspanel3").modal('hide');
                $(".incompletoaddpreguntas").hide();
            });
            $("#itemspanel_adicionar_3").click(function () {
                var btipo=$(".btipo").val();
                var tipo=$(".tipo_infor").val();
                var grupo=$(".grupo_pago").val();
                var desde=$("#desdepago").val();
                var hasta=$("#hastapago").val();
                $("#itemspanel3").modal('hide');
                openwindow('POST' ,'/adm_becas', {action: 'informepago', 'btipo':btipo, 'tipo':tipo, 'grupo':grupo, 'desde':desde,'hasta':hasta},'_blank');
                {#    $(".incompletoaddpreguntas").hide();#}
                {#    var ini = $("#id_fecha_inicio").val();#}
                {#    var fin = $("#id_fecha_fin").val();#}
                {#   #}
                {#    if (ini && fin && ini<=fin){#}
                {#    #}
                {#    }#}
                {#        else{#}
                {#           $(".incompletoaddpreguntas").show();#}
                {#        }#}
            });


            $(".asignarbeca").click(function() {
                var idsolicitud = $(this).attr('ids');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becas",
                    data: {'action': 'editbeca', 'id': idsolicitud},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyasignarbeca").html(data.data);
                            $(".paneltitleasignarbeca").html(data.title);
                            $("#asignarbecamodal").modal({backdrop:'static', width: '600px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });
            $("#cerrarpanelasignarbeca").click(function() {
                $("#asignarbecamodal").modal("hide");
                return false;
            });

            $(".infomepagotodo").click(function () {
                openwindow('POST' ,'/adm_becas', {action: 'informepagotodo'},'_blank');
            });

            $(".informeasistencia").click(function () {
                $("#itemspanel_asistencia").modal({backdrop:'static', width: '300'}).modal('show');
            });

            $("#itemspanel_cerrar_generarinforme").click(function () {
                $("#itemspanel_asistencia").modal("hide");
            });

            $("#itemspanel_generarinforme").click(function () {
                $("#itemspanel_asistencia").modal('hide');
                var tipobeca=$(".btipoasis ").val();
                var tipo=$(".tipo_asis").val();
                var grupo=$(".grupo_asis").val();
                var desde=$("#desde").val();
                var hasta=$("#hasta").val();
                openwindow('POST' ,'/adm_becas', {action: 'informeasistencia', 'fi': $('#id_fini').val(), 'ff': $('#id_ffin').val(), 'tipobeca':tipobeca, 'tipo':tipo, 'grupo':grupo},'_blank');
            });

            $(".generarinformeasistencia").click(function () {
                $("#itemspanel_generarasistencia").modal({backdrop:'static', width: '300'}).modal('show');
            });

            $("#itemspanel_cerrar_generarinformeasistencia").click(function () {
                $("#itemspanel_generarasistencia").modal("hide");
            });

            $("#itemspanel_generarinformeasistencia").click(function () {
                $("#itemspanel_asistencia").modal('hide');
                openwindow('POST' ,'/adm_becas', {action: 'generarinformeasistencia'},'_blank');
            });


            $(".reportebecados").click(function () {
                $("#itemspanel9").modal({backdrop:'static', width: '800'}).modal('show');
            });

            $("#itemspanel_cerrar_9").click(function () {
                $("#itemspanel9").modal('hide');
                $(".incompletoaddpreguntas").hide();
            });
            $("#itemspanel_adicionar_9").click(function () {
                var periodo=$(".periodor").val();
                var carrera=$(".carrerar").val();
                var fechainicio=$("#id_fecha_inicio").val();
                var fechafin=$("#id_fecha_fin").val();
                var tipobeca9=$("#tipobeca9").val();
                var tipobeca91=$("#tipobeca91").val();
                $("#itemspanel9").modal('hide');
                openwindow('POST' ,'/adm_becas', {action: 'reportebecas', 'periodo':periodo, 'carrera':carrera, 'fechainicio':fechainicio, 'fechafin':fechafin, 'tipobeca9':tipobeca9, 'tipobeca91':tipobeca91},'_blank');
            });

            notificarsistema = function (id) {
                var id = parseInt(id);
                smoke.confirm("¿Está seguro de notificar beca por sistema.?", function(e){
                    if (e){
                        $.blockUI({message: null});
                        $.post("/adm_becas", {"action":'notificarporsistema', "id": id}, function(data) {
                            if (data.result=='ok') {
                                location.href = '/adm_becas';
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        }, "json");
                    }
                }, {
                    ok: "SI,SEGURO",
                    cancel: "NO,CANCELAR",
                    classname: "custom-class",
                    reverseButtons: true
                });
            };

            $(".infomepagoporpartes").click(function () {
                $("#itemspanelporpartes").modal({backdrop:'static', width: '300'}).modal('show');
            });

            $("#itemspanel_cerrar_porpartes").click(function () {
                $("#itemspanelporpartes").modal('hide');
                $(".incompletoaddpreguntas").hide();
            });
            $("#itemspanel_adicionar_porpartes").click(function () {
                var btipo=$(".btipo_porpartes").val();
                var tipo=$(".tipo_infor_porpartes").val();
                var grupo=$(".grupo_pago_porpartes").val();
                var min_mes=$(".min_mes").val();
                var max_mes=$(".max_mes").val();
                $("#itemspanelporpartes").modal('hide');
                openwindow('POST' ,'/adm_becas', {action: 'informepagoporpartes', 'btipo':btipo, 'tipo':tipo, 'grupo':grupo,'min_mes':min_mes, 'max_mes':max_mes },'_blank');
            });

            $(".matriz").click(function () {
                openwindow('POST' ,'/adm_becas', {action: 'matriz'},'_blank');
            });

            $(".notificartodo").click(function () {
                $("#itemspanel_notificartodo").modal({backdrop:'static', width: '300'}).modal('show');
            });
            $("#itemspanel_cerrar_notificartodo").click(function () {
                $("#itemspanel_notificartodo").modal("hide");
            });
            $("#itemspanel_notificartodos").click(function () {
                $("#itemspanel_notificartodo").modal('hide');
                var notificacion = $("#mensajenotificacion").val();
                if ((notificacion).length>1){
                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: "/adm_becas",
                        data: {'action': 'notificartodo', 'notificacion':notificacion},
                        success: function (data) {
                            $.unblockUI();
                            if (data.result == 'ok') {
                                location.reload();
                            } else {
                                smoke.alert(data.mensaje);
                            }
                        },
                        error: function () {
                            $.unblockUI();
                            smoke.alert("Error de conexión.");
                        },
                        dataType: "json"
                    });
                }
                else{
                    smoke.alert("Ingrese una mensaje de notificacion valido");
                }
            });

            $("#cerrarpanelvalidarcedula, #cerrarpanelvalidarcedula2").click(function () {
                $('#itemspanelvalidarcedula').modal('hide');
            });

            $(".validarcedula").click(function () {
                var idb=$(this).attr('idb');
                var estadodoc=$("#id_estadodocumento").val();
                var estadocont=$("#id_estadocontrato").val();
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becas",
                    data: {'action': 'validarcedula', 'idb': idb ,'estadodocumento': estadodoc, 'estadocontrato': estadocont},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            var h = $(window).height() - 150;
                            if (!data.permite_modificar)
                                h = 350
                            $(".panelbodyvalidarcedula").html(data.data);
                            $(".paneltitlevalidarcedula").html(data.title);
                            $("#itemspanelvalidarcedula").modal({backdrop:'static', width: '60%', height: h}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });


            $("#cerrarpanelvalidarcontrato, #cerrarpanelvalidarcontrato2").click(function () {
                $('#itemspanelvalidarcontrato').modal('hide');
            });

            $(".validarcontrato").click(function () {
                var idb=$(this).attr('idb');
                var estadodoc=$("#id_estadodocumento").val();
                var estadocont=$("#id_estadocontrato").val();
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becas",
                    data: {'action': 'validarcontrato', 'idb': idb ,'estadodocumento': estadodoc, 'estadocontrato': estadocont},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyvalidarcontrato").html(data.data);
                            $(".paneltitlevalidarcontrato").html(data.title);
                            $("#itemspanelvalidarcontrato").modal({backdrop:'static', width: '850px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#cerrarpanelvalidaradquisicion, #cerrarpanelvalidaraquisicion2").click(function () {
                //rp = $('#itemspanelvalidaradquisicion').attr('rp');
                $('#itemspanelvalidaradquisicion').modal('hide');
                //if(rp == 'S')
                location.href = "/adm_becas?estadodocumento={{ estadodocumento }}&estadocontrato={{ estadocontrato }}&estadocumplimiento={{ estadocumplimiento }}&estadocomprobante={{ estadocomprobante }}";
            });

            $(".validaradquisicion").click(function () {
                var idb=$(this).attr('idb');
                var tv=$(this).attr('tv');
                mostrarcomprobantesvalidaradquisicion(idb,tv);
            });

            mostrarcomprobantesvalidaradquisicion = function (idbeca, tv){
                var idb=idbeca;
                $(".actualizarcomprobante").attr('idb', idb).attr('tv', tv);
                $(".eliminarcomprobante").attr('idb', idb).attr('tv', tv);

                var estadodoc=$("#id_estadodocumento").val();
                var estadocont=$("#id_estadocontrato").val();
                var estadocump=$("#id_estadocumplimiento").val();
                var estadocomp=$("#id_estadocomprobante").val();
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becas",
                    data: {'action': (tv == 'ADQ')?'validaradquisicion':'validarcomprobante', 'idb': idb ,'estadodocumento': estadodoc, 'estadocontrato': estadocont, 'estadocumplimiento': estadocump, 'estadocomprobante': estadocomp},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyvalidaradquisicion").html(data.data);
                            $(".paneltitlevalidaradquisicion").html(data.title);
                            $(".paneltitlevalidaradquisicion").attr('rp', data.rp);
                            $("#itemspanelvalidaradquisicion").modal({backdrop:'static', width: '850px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            };

            $("#cerrarpanelvalidarcomprobante, #cerrarpanelvalidarcomprobante2").click(function () {
                $('#itemspanelvalidarcomprobante').modal('hide');
            });

            /*$(".validarcomprobante").click(function () {
                var idb=$(this).attr('idb');
                var estadodoc=$("#id_estadodocumento").val();
                var estadocont=$("#id_estadocontrato").val();
                var estadocump=$("#id_estadocumplimiento").val();
                var estadocomp=$("#id_estadocomprobante").val();
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becas",
                    data: {'action': 'validarcomprobante', 'idb': idb ,'estadodocumento': estadodoc, 'estadocontrato': estadocont, 'estadocumplimiento': estadocump, 'estadocomprobante': estadocomp},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyvalidarcomprobante").html(data.data);
                            $(".paneltitlevalidarcomprobante").html(data.title);
                            $("#itemspanelvalidarcomprobante").modal({backdrop:'static', width: '850px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });*/

            $(".validarcomprobante").click(function () {
                var idb=$(this).attr('idb');
                var tv=$(this).attr('tv');
                mostrarcomprobantesvalidaradquisicion(idb,tv);
            });

            $(".representantesolidario").click(function () {
                var idb=$(this).attr('idb');
                var estadodocumento=$("#id_estadodocumento").val();
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becas",
                    data: {'action': 'representantesolidario', 'id': idb, 'estadodocumento': estadodocumento },
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyrepresentante").html(data.data);
                            $(".paneltitlerepresentante").html(data.title);
                            $("#itemspanelrepresentante").modal({backdrop:'static', width: '400px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#cerrarpanelrepresentante").click(function () {
                $('#itemspanelrepresentante').modal('hide');
            });


            $(".reporte_becas").click(function () {
                $(".panelbodyreportebeca").html();
                $("#titulomodal").html('Becados - Documentación Validada');
                $("#itemspanelreportebeca").modal({backdrop:'static', width: '520px'}).modal('show');
            });

            $("#generar_reporte").click(function () {
                var fechadesde = $("#id_fecha_desde").val();
                var fechahasta = $("#id_fecha_hasta").val();
                var tipobeca = "0";

                bloqueointerface();

                $.ajax({
                    type: "POST",
                    url: "/adm_becas",
                    data: {'desde': fechadesde,
                        'hasta': fechahasta,
                        'tipobeca': tipobeca,
                        'action': 'verificar_becas_asignadas'},
                    success: function(data) {
                        if (data.result=='ok') {
                            $.unblockUI();
                            location.href = "/adm_becas?action=becadosdocumentacionvalidada&desde="+fechadesde+"&hasta="+fechahasta+"&tipobeca="+tipobeca.toString();
                            $('#itemspanelreportebeca').modal('hide');
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error al enviar los datos al servidor.");
                    },
                    dataType: "json"
                });
            });

            $("#cerrar_reporte").click(function () {
                $('#itemspanelreportebeca').modal('hide');
            });

            $(".fecha_solicitud_pago").click(function () {
                $(".panelbodyfechasolicitud").html();
                $("#titulomodalfechasolicitud").html('Generar Solicitud de Pago');
                $("#tipoasignacionbeca").val(0).trigger('change');
                $("#tipobecasolpago").val(0).trigger('change');
                $("#itemspanelfechasolicitud").modal({backdrop:'static', width: '520px'}).modal('show');
            });

            $("#cerrar_fecha_spago").click(function () {
                $('#itemspanelfechasolicitud').modal('hide');
            });

            $(".historialbeca").click(function () {
                $(".panelbodyhistorial").html();
                $("#titulohistorial").html('Historial de Becas');
                tablahistorialinicial();
                $("#itemspanelhistorial").modal({backdrop:'static', width: '720px', height: '300px'}).modal('show');
            });

            $("#itemspanelhistorial .btn-cerrar").click(function () {
                $('#itemspanelhistorial').modal('hide');
            });

            $(".imprimircontratobeca").click(function () {
                var idb=$(this).attr('idb');
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_becas",
                    data: {'action':'generanumerocontrato', 'id': idb},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result=='ok'){
                            openwindow('POST' ,'/adm_becas', {action:'contratobecapdf',id: idb}, '_blank');
                            location.reload();
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $(".imprimiractaentrega").click(function () {
                var idb=$(this).attr('idb');
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_becas",
                    data: {'action':'actualizafechaacta', 'id': idb},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result=='ok'){
                            openwindow('POST' ,'/adm_becas', {action:'actaentregarecepcionpdf',id: idb}, '_blank');
                            //location.reload();
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $(".reporte_becas_documentop").click(function () {
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_becas",
                    data: {'action': 'verificar_becas_documentacion_pendiente'},
                    success: function(data) {
                        if (data.result=='ok') {
                            $.unblockUI();
                            location.href = "/adm_becas?action=becadosdocumentacionpendiente";
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error al enviar los datos al servidor.");
                    },
                    dataType: "json"
                });
            });

            $(".reporte_becas_documentor").click(function () {
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_becas",
                    data: {'action': 'verificar_becas_documentacion_rechazada'},
                    success: function(data) {
                        if (data.result=='ok') {
                            $.unblockUI();
                            location.href = "/adm_becas?action=becadosdocumentacionrechazada";
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error al enviar los datos al servidor.");
                    },
                    dataType: "json"
                });
            });

            $(".reporte_becas_contratop").click(function () {
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_becas",
                    data: {'action': 'verificar_becas_contrato_pendiente'},
                    success: function(data) {
                        if (data.result=='ok') {
                            $.unblockUI();
                            location.href = "/adm_becas?action=becadoscontratopendiente";
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error al enviar los datos al servidor.");
                    },
                    dataType: "json"
                });
            });

            $(".reporte_becas_contratofpc").click(function () {
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_becas",
                    data: {'action': 'verificar_becas_contrato_pendiente_cargar'},
                    success: function(data) {
                        if (data.result=='ok') {
                            $.unblockUI();
                            location.href = "/adm_becas?action=becadoscontratopendientecargar";
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error al enviar los datos al servidor.");
                    },
                    dataType: "json"
                });
            });

            $(".reporte_becas_contrator").click(function () {
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_becas",
                    data: {'action': 'verificar_becas_contrato_rechazado'},
                    success: function(data) {
                        if (data.result=='ok') {
                            $.unblockUI();
                            location.href = "/adm_becas?action=becadoscontratorechazado";
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error al enviar los datos al servidor.");
                    },
                    dataType: "json"
                });
            });

            $(".matriz_siies_caces").click(function () {
                bloqueointerface();
                verificabecas_matrizsiiescaces();
            });

            function verificabecas_matrizsiiescaces (){
                $.ajax({
                    type: "POST",
                    url: "/adm_becas",
                    data: {'action': 'verificar_becas_matriz_siies_caces'},
                    success: function(data) {
                        $.unblockUI();
                        data.result ? becados_matrizsiiescaces() : mensajeWarning(data.mensaje);
                    },
                    error: function() {
                        mensajeErrorSwal("Error de conexión.");
                    },
                    dataType: "json"
                });
            }

            function becados_matrizsiiescaces(){
                $.ajax({
                    type: "GET",
                    url: "/adm_becas",
                    data: {'action': 'becadosmatrizsiiescaces'},
                    success: function(data) {
                        $.unblockUI();
                        data.result ? mensajeSuccess(data.mensaje) : mensajeWarning(data.mensaje);
                    },
                    error: function() {
                        mensajeErrorSwal("Error de conexión.");
                    },
                    dataType: "json"
                });
            }

            $(".reporte_becas_solicitud_pago").click(function () {
                tipoa = $(this).attr('fto');
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_becas",
                    data: {'action': 'verificar_becas_solicitud_pago'},
                    success: function(data) {
                        if (data.result=='ok') {
                            $.unblockUI();
                            if(tipoa == 'P')
                                location.href = "/adm_becas?action=reportesolicitudpagopdf";
                            else
                                location.href = "/adm_becas?action=reportesolicitudpagoexcel";
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error al enviar los datos al servidor.");
                    },
                    dataType: "json"
                });
            });

            $(".btn-aceptar-spago").click(function () {
                var fechadesde = $("#id_fecha_desde_spago").val();
                var fechahasta = $("#id_fecha_hasta_spago").val();
                var tipoasignacion = $("#tipoasignacionbeca").val();
                var tipobeca = $("#tipobecasolpago").val();

                if(tipoasignacion == 0){
                    smoke.alert("Seleccione el tipo de asignación");
                    return false;
                }

                if(tipobeca == 0){
                    smoke.alert("Seleccione el tipo de beca");
                    return false;
                }

                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_becas",
                    data: {'action': 'verificar_becas_solicitud_pago', 'desde': fechadesde, 'hasta': fechahasta, 'tipoasignacion': tipoasignacion, 'tipobeca': tipobeca},
                    success: function(data) {
                        if (data.result=='ok') {
                            $('#itemspanelfechasolicitud').modal('hide');
                            $.unblockUI();
                            $(".panelbodysolicitudpago").html(data.data);
                            var h = $(window).height() - 150
                            $("#itemspanelsolicitudpago").modal({backdrop:'static', width: "60%", height: h}).modal('show');
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error al enviar los datos al servidor.");
                    },
                    dataType: "json"
                });
            });

            $("#itemspanelsolicitudpago .btn-cerrar").click(function() {
                $("#itemspanelsolicitudpago").modal("hide");
            });

            $("#itemspanelsolicitudpago .btn-generar").click(function() {
                var fechadesde = $("#id_fecha_desde_spago").val();
                var fechahasta = $("#id_fecha_hasta_spago").val();
                var tipoasignacion = $("#tipoasignacionbeca").val();
                var tipobeca = $("#tipobecasolpago").val();
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_becas",
                    data: {'action': 'generar_solicitud_pago', 'desde': fechadesde, 'hasta': fechahasta, 'tipoasignacion': tipoasignacion, 'tipobeca': tipobeca},
                    success: function(data) {
                        if (data.result=='ok') {
                            $.unblockUI();
                            $("#itemspanelsolicitudpago").modal("hide");
                            openwindow('POST' ,'/adm_becas', {action:'reportesolicitudpagopdf',id: data.ids}, '_blank');
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error al enviar los datos al servidor.");
                    },
                    dataType: "json"
                });
            });

            $(".generar_solicitud_pago2borrar").click(function () {
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_becas",
                    data: {'action': 'generar_solicitud_pago'},
                    success: function(data) {
                        if (data.result=='ok') {
                            $.unblockUI();
                            openwindow('POST' ,'/adm_becas', {action:'reportesolicitudpagopdf',id: data.ids}, '_blank');
                            /*if(tipoa == 'P')
                                location.href = "/adm_becas?action=reportesolicitudpagopdf";
                            else
                                location.href = "/adm_becas?action=reportesolicitudpagoexcel";*/
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error al enviar los datos al servidor.");
                    },
                    dataType: "json"
                });
            });

            $(".mostrarevidencias").click(function() {
                var id = $(this).attr('idb');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becas",
                    data: {'action': 'mostrarevidencias', 'id': id},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodymostrarevidencias").html(data.data);
                            $("#itemspanelmostrarevidencias").modal({backdrop:'static', width: '600px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#itemspanelmostrarevidencias .btn-cerrar").click(function() {
                $("#itemspanelmostrarevidencias").modal("hide");
            });

            $(".subirevidenciasentrega").click(function () {
                var idb=$(this).attr('idb');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becas",
                    data: {'action': 'subirevidenciasentrega', 'id': idb },
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodysubirevidencias").html(data.data);
                            $(".paneltitlesubirevidencias").html(data.title);
                            $("#itemspanelsubirevidencias").modal({backdrop:'static', width: '400px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#cerrarpanelsubirevidencias").click(function () {
                $('#itemspanelsubirevidencias').modal('hide');
            });

            $(".imprimir_solicitud_pago").click(function() {
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becas",
                    data: {'action': 'listasolicitudpago'},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyimprimirsolicitudpago").html(data.data);
                            var h = $(window).height() - 150;
                            $("#itemspanelimprimirsolicitudpago").modal({backdrop:'static', width: "80%", height: h}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#itemspanelimprimirsolicitudpago .btn-cerrar").click(function() {
                $("#itemspanelimprimirsolicitudpago").modal("hide");
            });

            $(".mostrardocumentos").click(function() {
                var id = $(this).attr('idt');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becas",
                    data: {'action': 'mostrardocumentos', 'id': id},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodymostrardocumento").html(data.data);
                            $("#itemspanelmostrardocumento").modal({backdrop:'static', width: '50%'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#itemspanelmostrardocumento .btn-cerrar").click(function() {
                $("#itemspanelmostrardocumento").modal("hide");
            });

            $("#cerrarpanelanular").click(function () {
                $('#itemspanelanular').modal('hide');
            });

            $(".anularbeca").click(function () {
                var ids=$(this).attr('ids');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becas",
                    data: {'action': 'anularbeca', 'id': ids },
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyanular").html(data.data);
                            $(".paneltitleanular").html(data.title);
                            $("#itemspanelanular").modal({backdrop:'static', width: '600px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#cerrarpanelpagado").click(function () {
                $('#itemspanelpagado').modal('hide');
            });

            $(".actualizar_estado_pagado").click(function () {
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becas",
                    data: {'action': 'actualizarpagado' },
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodypagado").html(data.data);
                            $(".paneltitlepagado").html(data.title);
                            $("#itemspanelpagado").modal({backdrop:'static', width: '400px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $(".actualizar_estado_acreditado").click(function () {
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becas",
                    data: {'action': 'actualizaracreditado' },
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodypagado").html(data.data);
                            $(".paneltitlepagado").html(data.title);
                            $("#itemspanelpagado").modal({backdrop:'static', width: '400px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $(".notificar_pagado_email").click(function () {
                empezar_notificacion_pagado();
            });

            empezar_notificacion_pagado = function () {
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_becas",
                    data: {'action' : 'listapagadoscorreo'},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result=='ok'){
                            becados = data.becadospagados;
                            cantidad = becados.length;
                            indice = 0;
                            $("#cerrarpanelpaneltitle").html("Notificando Pago por e-mail")
                            $("#cerrarpanel").modal({keyboard: false, backdrop: 'static'}).modal("show");
                            enviaremailpagado(becados, indice, (cantidad-1));
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            };

            enviaremailpagado = function (lista, elemento, cantidad){
                var becado = lista[elemento];
                var cp = (100 / (cantidad+1)) * elemento + '%';
                var porc = (100 / (cantidad+1)) * elemento;
                let intentos = 0;
                if (elemento>cantidad){
                    $("#cerrarpanelprogresshint").html("Enviado " + (elemento).toString() +" de " + (cantidad + 1).toString() + " (Progreso " +  Math.ceil(porc).toString()+ '% completado)');
                    $("#progressbar").css({'width': cp});

                    setTimeout(function() {
                        $('#cerrarpanel').modal('hide');
                        smoke.alert("Envío de e-mails finalizado");
                    }, 5000);
                } else {
                    $("#cerrarpanelprogresshint").html("Enviado " + (elemento).toString() +" de " + (cantidad + 1).toString() + " (Progreso " +  Math.ceil(porc).toString()+ '% completado)');
                    $("#progressbar").css({'width': cp});
                    $.ajax({
                        type: "POST",
                        url: "/adm_becas",
                        data: {"action": "enviaremailpagado", "idpago": becado.id },
                        success: function(data) {
                            if (data.result=='ok'){
                                intentos = 0;
                                enviaremailpagado(lista, elemento+1, cantidad);
                            } else {
                                intentos += 1;
                                if (intentos>=100){
                                    errorenvio(elemento, cantidad+1);
                                } else {
                                    enviaremailpagado(lista, elemento, cantidad);
                                }
                            }
                        },
                        error: function() {
                            errorenvio(elemento, cantidad+1);
                        },
                        dataType: "json"
                    });
                }
            };

            errorenvio = function (elemento, cantidad){
                $.unblockUI();
                $("#cerrarpanel").modal("hide");
                smoke.alert("No se pudo completar el envío de e-mail masivo. Se enviaron "+elemento.toString()+" de "+cantidad.toString() + ". Reintente nuevamente");
            };

            $(".notificar_acreditado_email").click(function () {
                empezar_notificacion_acreditado();
            });

            empezar_notificacion_acreditado = function () {
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_becas",
                    data: {'action' : 'listaacreditadoscorreo'},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result=='ok'){
                            becados = data.becadosacreditados;
                            cantidad = becados.length;
                            indice = 0;
                            $("#cerrarpanelpaneltitle").html("Notificando Acreditado por e-mail")
                            $("#cerrarpanel").modal({keyboard: false, backdrop: 'static'}).modal("show");
                            enviaremailacreditado(becados, indice, (cantidad-1));
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            };

            enviaremailacreditado = function (lista, elemento, cantidad){
                var becado = lista[elemento];
                var cp = (100 / (cantidad+1)) * elemento + '%';
                var porc = (100 / (cantidad+1)) * elemento;
                if (elemento>cantidad){
                    $("#cerrarpanelprogresshint").html("Enviado " + (elemento).toString() +" de " + (cantidad + 1).toString() + " (Progreso " +  Math.ceil(porc).toString()+ '% completado)');
                    $("#progressbar").css({'width': cp});

                    setTimeout(function() {
                        $('#cerrarpanel').modal('hide');
                        smoke.alert("Envío de e-mails finalizado");
                    }, 5000);
                } else {
                    $("#cerrarpanelprogresshint").html("Enviado " + (elemento).toString() +" de " + (cantidad + 1).toString() + " (Progreso " +  Math.ceil(porc).toString()+ '% completado)');
                    $("#progressbar").css({'width': cp});
                    $.ajax({
                        type: "POST",
                        url: "/adm_becas",
                        data: {"action": "enviaremailacreditado", "idpago": becado.id },
                        success: function(data) {
                            if (data.result=='ok'){
                                intentos = 0;
                                enviaremailacreditado(lista, elemento+1, cantidad);
                            } else{
                                errorenvio(elemento, cantidad+1);
                                /*intentos += 1;
                                if (intentos>=100){
                                    errorenvio(elemento, cantidad+1);
                                } else {
                                    enviaremailacreditado(lista, elemento, cantidad);
                                }*/
                            }
                        },
                        error: function() {
                            errorenvio(elemento, cantidad+1);
                        },
                        dataType: "json"
                    });
                }
            };

            $(".resumencupos").click(function() {
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becas",
                    data: {'action': 'resumencupos'},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyresumencupos").html(data.data);
                            $("#itemspanelresumencupos").modal({backdrop:'static', width: '800px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#itemspanelresumencupos .btn-cerrar").click(function() {
                $("#itemspanelresumencupos").modal("hide");
            });

            $(".resumenbecasasignadas").click(function() {
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becas",
                    data: {'action': 'resumenbecasasignadas'},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyresumenbecas").html(data.data);
                            $("#itemspanelresumenbecas").modal({backdrop:'static', width: '800px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#itemspanelresumenbecas .btn-cerrar").click(function() {
                $("#itemspanelresumenbecas").modal("hide");
            });


            $(".reporte_beca_tipo").click(function () {
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_becas",
                    data: {'action': 'verificar_becas_por_tipo'},
                    success: function(data) {
                        if (data.result=='ok') {
                            $.unblockUI();
                            openwindow('POST' ,'/adm_becas', {action:'reportebecaportipopdf'}, '_blank');
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error al enviar los datos al servidor.");
                    },
                    dataType: "json"
                });
            });


            $(".reporte_beca_carrera").click(function () {
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/adm_becas",
                    data: {'action': 'verificar_becas_por_tipo'},
                    success: function(data) {
                        if (data.result=='ok') {
                            $.unblockUI();
                            openwindow('POST' ,'/adm_becas', {action:'reportebecaporfacultadcarrerapdf'}, '_blank');
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error al enviar los datos al servidor.");
                    },
                    dataType: "json"
                });
            });

            $(".reporte_seguimiento").click(function() {
                openwindow('POST' ,'/adm_becas', {action:'reporteseguimientopdf'}, '_blank');
            });

            $(".reporte_seguimiento_mayosep2020").click(function() {
                openwindow('POST' ,'/adm_becas', {action:'reporteseguimientocontrolmayosep2020'}, '_blank');
            });

            $(".reporte_seguimiento_mayosep2020_excel").click(function() {
                openwindow('POST' ,'/adm_becas', {action:'listadoseguimientocontrolmayosep2020'}, '_blank');
            });

            $(".reporte_seguimiento_nov2019mar2020").click(function() {
                openwindow('POST' ,'/adm_becas', {action:'reporteseguimientocontrolnov2019mar2020'}, '_blank');
            });

            $(".reporte_seguimiento_nov2019mar2020_excel").click(function() {
                openwindow('POST' ,'/adm_becas', {action:'listadoseguimientocontrolnov2019mar2020'}, '_blank');
            });

            $(".mostrarcomprobantes").click(function() {
                var idbeca = $(this).attr('ids');
                $(".actualizarcomprobante").attr('idb', idbeca);
                mostrarcomprobantes(idbeca, 'E');
            });

            mostrarcomprobantes = function (idbeca, modo){
                var id = idbeca;
                var modo = modo;
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becas",
                    data: {'action': 'mostrarcomprobantes', 'id': id, 'modo': modo},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodymostrarcomprobante").html(data.data);
                            $("#itemspanelmostrarcomprobante").modal({backdrop:'static', width: '600px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            }

            $("#itemspanelmostrarcomprobante .btn-cerrar").click(function() {
                $("#itemspanelmostrarcomprobante").modal("hide");

            });

            $("#itemspaneleditarcomprobante .cerrareditcomprobante").click(function() {
                $("#itemspaneleditarcomprobante").modal("hide");
            });

            $("#itemspaneleliminarcomprobante .cerrareliminarcomprobante").click(function() {
                $("#itemspaneleliminarcomprobante").modal("hide");
            });

            $(".actualizarcomprobante").click(function() {
                envioformularioreg("/adm_becas","validarcumplimiento", false);
                return false;
            });

            $(".eliminarcomprobante").click(function() {
                envioformularioreg("/adm_becas","delcomprobante", false);
                return false;
            });

            envioformularioreg = function(url, action, destino){
                if(action == 'validarcumplimiento'){
                    $("#formulario1").validationEngine('attach',{ scroll: false });
                    var valid = $("#formulario1").validationEngine('validate', { scroll: false });
                }
                else if(action == 'delcomprobante'){
                    $("#formulario2").validationEngine('attach',{ scroll: false });
                    var valid = $("#formulario2").validationEngine('validate', { scroll: false });
                }

                if (valid){
                    $('.bootstrap-timepicker-widget').css({"display": "none"});
                    bloqueointerface();
                    $('.controls input').each(function(){
                        if ($(this).attr('type')=='text'){
                            $(this).val($(this).val().trim());
                        }
                        if ($(this).attr('type')!='file'){
                            if ($(this).css('text-transform')=='uppercase'){
                                if ($(this).attr('type')!='password'){
                                    $(this).val($(this).val().toUpperCase());
                                }
                            }
                        }
                    });

                    if(action == 'validarcumplimiento')
                        var formdata = new FormData($("#formulario1")[0]);
                    else if(action == 'delcomprobante')
                        var formdata = new FormData($("#formulario2")[0]);

                    $.ajax({
                        type: "POST",
                        action : action,
                        url: url,
                        data:  formdata,
                        success: function(data) {
                            if (data.result == 'ok') {
                                if(action == 'validarcumplimiento'){
                                    $("#itemspaneleditarcomprobante").modal("hide");
                                    var idbeca = $(".actualizarcomprobante").attr('idb');
                                    var tvalida = $(".actualizarcomprobante").attr('tv');

                                    mostrarcomprobantesvalidaradquisicion(idbeca, tvalida);
                                    $.unblockUI();
                                }
                                else if(action == 'delcomprobante'){
                                    $("#itemspaneleliminarcomprobante").modal("hide");
                                    var idbeca = $(".eliminarcomprobante").attr('idb');
                                    var tvalida = $(".eliminarcomprobante").attr('tv');

                                    mostrarcomprobantesvalidaradquisicion(idbeca, tvalida);
                                    $.unblockUI();
                                }
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        },
                        error: function() {
                            $.unblockUI();
                            smoke.alert("Error al enviar los datos.");
                        },
                        dataType: "json",
                        cache: false,
                        contentType: false,
                        processData: false
                    });
                } else {
                    setTimeout(function() {
                        $('.help-text').html("");
                    }, 8000);
                    $.unblockUI();
                }
            };

            $(".generarprecandidatos").click(function () {

                Swal.fire({
                    //title: `NOTIFICACIÓN`,
                    text: "¿Está segur{% if persona.sexo.id == 1 %}A{% else %}O{% endif %} de generar listado de precandiatos de beca para el periodo académico {{ periodo.nombre }}?",
                    type: 'info',
                    icon: 'info',
                    showCancelButton: true,
                    allowOutsideClick: false,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'SI,SEGUR{% if persona.sexo.id == 1 %}A{% else %}O{% endif %}',
                    cancelButtonText: 'NO, CANCELAR'
                }).then((result) => {
                    if (result.value) {
                        bloqueointerface();
                        $.ajax({
                            type: "POST",
                            url: "/adm_becas",
                            data: {'action': 'generarprecandidatos'},
                            success: function (data) {
                                $.unblockUI();
                                if (data.result == 'ok') {
                                    //$(".panelbodymostrarcomprobante").html(data.data);
                                    //$("#itemspanelmostrarcomprobante").modal({backdrop:'static', width: '600px'}).modal('show');
                                    NotificationJG.success(data.mensaje);
                                } else {
                                    NotificationJG.error(data.mensaje);
                                }
                            },
                            error: function () {
                                $.unblockUI();
                                NotificationJG.error('Ocurrio un error inesperado');
                                /*Swal.fire({
                                    toast: true,
                                    position: 'top-end',
                                    type: 'error',
                                    title: 'Ocurrio un error inesperado',
                                    showConfirmButton: false,
                                    timer: 6000
                                });*/
                                //NotificationJG.error("Error de conexión.");
                            },
                            dataType: "json"
                        });
                    }else{
                        NotificationJG.info('Ha cancelado');
                        /*Swal.fire({
                            toast: true,
                            position: 'top-end',
                            type: 'info',
                            title: 'Se ha cancelado',
                            showConfirmButton: false,
                            timer: 6000
                        });*/
                    }
                }).catch(error => {
                    $.unblockUI();
                    NotificationJG.error('Ocurrio un error inesperado');
                    /*Swal.fire({
                        toast: true,
                        position: 'top-end',
                        type: 'error',
                        title: 'Ocurrio un error inesperado',
                        showConfirmButton: false,
                        timer: 6000
                    });*/

                });
            });

            $(".generarreportepagobecafinanciero").click(function () {
                Swal.fire({
                    //title: `NOTIFICACIÓN`,
                    text: "¿Está segur{% if persona.sexo.id == 1 %}a{% else %}o{% endif %} de generar reporte de pagos a financiero del periodo académico {{ periodo.nombre }}?",
                    type: 'info',
                    icon: 'info',
                    showCancelButton: true,
                    allowOutsideClick: false,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'SI,SEGUR{% if persona.sexo.id == 1 %}A{% else %}O{% endif %}',
                    cancelButtonText: 'NO, CANCELAR'
                }).then((result) => {
                    if (result.value) {
                        bloqueointerface();
                        $.ajax({
                            type: "POST",
                            url: "/adm_becas",
                            data: {'action': 'generate_reporte_pendientes_pago_becas_financiero'},
                            success: function (data) {
                                $.unblockUI();
                                if (data.result == 'ok') {
                                    //$(".panelbodymostrarcomprobante").html(data.data);
                                    //$("#itemspanelmostrarcomprobante").modal({backdrop:'static', width: '600px'}).modal('show');
                                    $('#btnNotificacionTareas').html(data.btn_notificaciones);
                                    NotificationJG.success(data.mensaje);
                                } else {
                                    NotificationJG.error(data.mensaje);
                                }
                            },
                            error: function () {
                                $.unblockUI();
                                NotificationJG.error('Ocurrio un error inesperado');
                                /*Swal.fire({
                                    toast: true,
                                    position: 'top-end',
                                    type: 'error',
                                    title: 'Ocurrio un error inesperado',
                                    showConfirmButton: false,
                                    timer: 6000
                                });*/
                                //NotificationJG.error("Error de conexión.");
                            },
                            dataType: "json"
                        });
                    }else{
                        NotificationJG.info('Ha cancelado');
                        /*Swal.fire({
                            toast: true,
                            position: 'top-end',
                            type: 'info',
                            title: 'Se ha cancelado',
                            showConfirmButton: false,
                            timer: 6000
                        });*/
                    }
                }).catch(error => {
                    $.unblockUI();
                    NotificationJG.error('Ocurrio un error inesperado');
                    /*Swal.fire({
                        toast: true,
                        position: 'top-end',
                        type: 'error',
                        title: 'Ocurrio un error inesperado',
                        showConfirmButton: false,
                        timer: 6000
                    });*/

                });
            });
            $(".generarsolicitudesbecas").click(function () {

                Swal.fire({
                    //title: `NOTIFICACIÓN`,
                    text: "¿Está segur{% if persona.sexo.id == 1 %}A{% else %}O{% endif %} de generar listado de solicitudes de beca para el periodo académico {{ periodo.nombre }}?",
                    type: 'info',
                    icon: 'info',
                    showCancelButton: true,
                    allowOutsideClick: false,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'SI,SEGUR{% if persona.sexo.id == 1 %}A{% else %}O{% endif %}',
                    cancelButtonText: 'NO, CANCELAR'
                }).then((result) => {
                    if (result.value) {
                        bloqueointerface();
                        $.ajax({
                            type: "POST",
                            url: "/adm_becas",
                            data: {'action': 'generarsolicitudesbecas'},
                            success: function (data) {
                                $.unblockUI();
                                if (data.result == 'ok') {
                                    //$(".panelbodymostrarcomprobante").html(data.data);
                                    //$("#itemspanelmostrarcomprobante").modal({backdrop:'static', width: '600px'}).modal('show');
                                    NotificationJG.success(data.mensaje);
                                } else {
                                    NotificationJG.error(data.mensaje);
                                }
                            },
                            error: function () {
                                $.unblockUI();
                                NotificationJG.error('Ocurrio un error inesperado');
                                /*Swal.fire({
                                    toast: true,
                                    position: 'top-end',
                                    type: 'error',
                                    title: 'Ocurrio un error inesperado',
                                    showConfirmButton: false,
                                    timer: 6000
                                });*/
                                //NotificationJG.error("Error de conexión.");
                            },
                            dataType: "json"
                        });
                    }else{
                        NotificationJG.info('Ha cancelado');
                        /*Swal.fire({
                            toast: true,
                            position: 'top-end',
                            type: 'info',
                            title: 'Se ha cancelado',
                            showConfirmButton: false,
                            timer: 6000
                        });*/
                    }
                }).catch(error => {
                    $.unblockUI();
                    NotificationJG.error('Ocurrio un error inesperado');
                    /*Swal.fire({
                        toast: true,
                        position: 'top-end',
                        type: 'error',
                        title: 'Ocurrio un error inesperado',
                        showConfirmButton: false,
                        timer: 6000
                    });*/

                });
            });

            $(".generarprecandidatosdesviacionestandar").click(function () {

                Swal.fire({
                    //title: `NOTIFICACIÓN`,
                    text: "¿Está segur{% if persona.sexo.id == 1 %}a{% else %}o{% endif %} de generar listado de precandiatos de beca para el periodo académico {{ periodo.nombre }}?",
                    type: 'info',
                    icon: 'info',
                    showCancelButton: true,
                    allowOutsideClick: false,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'SI,SEGUR{% if persona.sexo.id == 1 %}A{% else %}O{% endif %}',
                    cancelButtonText: 'NO, CANCELAR'
                }).then((result) => {
                    if (result.value) {
                        bloqueointerface();
                        $.ajax({
                            type: "POST",
                            url: "/adm_becas",
                            data: {'action': 'generarprecandidatosdesviacionestandarnew'},
                            success: function (data) {
                                $.unblockUI();
                                if (data.result == 'ok') {
                                    //$(".panelbodymostrarcomprobante").html(data.data);
                                    //$("#itemspanelmostrarcomprobante").modal({backdrop:'static', width: '600px'}).modal('show');
                                    NotificationJG.success(data.mensaje);
                                } else {
                                    NotificationJG.error(data.mensaje);
                                }
                            },
                            error: function () {
                                $.unblockUI();
                                NotificationJG.error('Ocurrio un error inesperado');
                                /*Swal.fire({
                                    toast: true,
                                    position: 'top-end',
                                    type: 'error',
                                    title: 'Ocurrio un error inesperado',
                                    showConfirmButton: false,
                                    timer: 6000
                                });*/
                                //NotificationJG.error("Error de conexión.");
                            },
                            dataType: "json"
                        });
                    }else{
                        NotificationJG.info('Ha cancelado');
                        /*Swal.fire({
                            toast: true,
                            position: 'top-end',
                            type: 'info',
                            title: 'Se ha cancelado',
                            showConfirmButton: false,
                            timer: 6000
                        });*/
                    }
                }).catch(error => {
                    $.unblockUI();
                    NotificationJG.error('Ocurrio un error inesperado');
                    /*Swal.fire({
                        toast: true,
                        position: 'top-end',
                        type: 'error',
                        title: 'Ocurrio un error inesperado',
                        showConfirmButton: false,
                        timer: 6000
                    });*/

                });
            });

            $(".mostrarrecorrido").click(function() {
                var id = $(this).attr('ids');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/adm_becas",
                    data: {'action': 'mostrarrecorrido', 'id': id},
                    success: function(data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyrecorrido").html(data.data);
                            var h = $(window).height() - 150;
                            $("#itemspanelrecorrido").modal({backdrop:'static', width: '80%', height: h}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function() {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $("#itemspanelrecorrido .btn-cerrar").click(function() {
                $("#itemspanelrecorrido").modal("hide");
                return false;
            });


            $(".reporte_pago_becas").click(function () {
                $("#itemspanelreportepagosbecas .paneltitlereportepagosbecas").html($(this).attr('titulo'));

                //$("#tiporeporteposgrado").val($(this).attr('tiporeporte'));

                $("#tiporeportepago").val(0).trigger('change');
                //$("#mesrepposgrado").val(0).trigger('change');

                $("#itemspanelreportepagosbecas").modal({backdrop:'static', width: '650'}).modal('show');
            });

            $('#tiporeportepago').change(function() {
                var valor = parseInt($(this).val());

                $('#estadoreportepago').empty().append('<option value="0">---------</option>').val(0).trigger("change");
                $('#estadoreportepago').prop('disabled', 'disabled');

                if(valor == 2){
                    $('#estadoreportepago').append('<option value="1">PAGADO</option>');
                    $('#estadoreportepago').append('<option value="2">NO PAGADO</option>');
                    $('#estadoreportepago').append('<option value="3">TODOS</option>');
                    $('#estadoreportepago').prop('disabled', false);
                }else if(valor == 3){
                    $('#estadoreportepago').append('<option value="1">ACREDITADO</option>');
                    $('#estadoreportepago').append('<option value="2">NO ACREDITADO</option>');
                    $('#estadoreportepago').append('<option value="3">TODOS</option>');
                    $('#estadoreportepago').prop('disabled', false);
                }
            });

            $("#itemspanelreportepagosbecas .btn-cerrar").click(function () {
                $("#itemspanelreportepagosbecas").modal('hide');
            });

            $("#itemspanelreportepagosbecas .btn-procesar").click(function () {
                if(datosCompletosReporte()){
                    var tiporeporte = parseInt($("#tiporeportepago").val());
                    var estado = parseInt($("#estadoreportepago").val());

                    if(tiporeporte == 1)
                        accion = "reporte_solicitudes_pago";
                    else if(tiporeporte == 2)
                        accion = "reporte_becas_pagadas";
                    else
                        accion = "reporte_becas_acreditadas";

                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: "/adm_becas",
                        data: {"action": accion, "estado": estado},
                        success: function(data) {
                            $.unblockUI();
                            if (data.result=='ok'){
                                location.href = data.archivo;
                                $("#itemspanelreportepagosbecas").modal('hide');
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        },
                        error: function() {
                            $.unblockUI();
                            smoke.alert("Error de conexión");
                        },
                        dataType: "json"
                    });
                }
            });

            datosCompletosReporte = function (){
                var validacion = true;
                var tiporeporte = parseInt($("#tiporeportepago").val());
                var estado = parseInt($("#estadoreportepago").val());

                if(tiporeporte == 0){
                    smoke.alert("Seleccione el tipo de reporte");
                    return false;
                }

                if(tiporeporte > 1 && estado == 0){
                    smoke.alert("Seleccione el estado");
                    return false;
                }

                return validacion;
            }

            {% if user.username == 'atorrese' or user.is_superuser %}
                $(".correccion_actas_compromiso").click(function () {

                Swal.fire({
                    //title: `NOTIFICACIÓN`,
                    text: "¿Está segur{% if persona.sexo.id == 1 %}a{% else %}o{% endif %} de corregir  actas de compromiso de listado de becados  para periodo {{ periodo.nombre }}?",
                    type: 'info',
                    icon: 'info',
                    showCancelButton: true,
                    allowOutsideClick: false,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'SI,SEGUR{% if persona.sexo.id == 1 %}A{% else %}O{% endif %}',
                    cancelButtonText: 'NO, CANCELAR'
                }).then((result) => {
                    if (result.value) {
                        bloqueointerface();
                        $.ajax({
                            type: "POST",
                            url: "/adm_becas",
                            data: {'action': 'corregir_actascompromisos_becas'},
                            success: function (data) {
                                $.unblockUI();
                                if (data.result) {
                                    //$(".panelbodymostrarcomprobante").html(data.data);
                                    //$("#itemspanelmostrarcomprobante").modal({backdrop:'static', width: '600px'}).modal('show');
                                    NotificationJG.success(data.mensaje);
                                } else {
                                    NotificationJG.error(data.mensaje);
                                }
                            },
                            error: function () {
                                $.unblockUI();
                                NotificationJG.error('Ocurrio un error inesperado');
                                /*Swal.fire({
                                    toast: true,
                                    position: 'top-end',
                                    type: 'error',
                                    title: 'Ocurrio un error inesperado',
                                    showConfirmButton: false,
                                    timer: 6000
                                });*/
                                //NotificationJG.error("Error de conexión.");
                            },
                            dataType: "json"
                        });
                    }else{
                        NotificationJG.info('Ha cancelado');
                        /*Swal.fire({
                            toast: true,
                            position: 'top-end',
                            type: 'info',
                            title: 'Se ha cancelado',
                            showConfirmButton: false,
                            timer: 6000
                        });*/
                    }
                }).catch(error => {
                    $.unblockUI();
                    NotificationJG.error('Ocurrio un error inesperado');
                    /*Swal.fire({
                        toast: true,
                        position: 'top-end',
                        type: 'error',
                        title: 'Ocurrio un error inesperado',
                        showConfirmButton: false,
                        timer: 6000
                    });*/

                });
            });
            {% endif %}

        $('.validacion_masiva_documentos').click(function (){
            uiModalValidacionDocumentosMasivo.open('view');
        });

        });
    </script>
{% endblock %}
{% block canvas %}
<div class='row-fluid'>
    <div class='span6'>
        <h4>{{ title }} </h4>
        <h4>PERIODO ACTUAL: {{ periodo }} </h4>
        {% if periodovalida %} <h4>PERIODO CALIFICA: {{ periodovalida }}</h4>{% endif %}
        {#                {% if becaperiodo %}#}
        {#                    <br>#}
        {#                    Desde: {{ becaperiodo.fechainiciosolicitud|date:'Y-m-d h:i a' }} Hasta: {{ becaperiodo.fechafinsolicitud|date:'Y-m-d h:i a' }}#}
        {#                {% endif %}#}
        </h4>
    </div>
    <div class="span6">
        <table class="table table-bordered" style="padding: 0px; margin: 0px">
            <tr>
                <td style="margin: 2px; padding: 4px;">Estados:</td>
                <td style="margin: 2px; padding: 4px;" colspan="2">
                    <span class="label label-info">CARGADO</span>&nbsp;<span class="label label-success">VALIDADO</span>&nbsp;<span class="label label-important">RECHAZADO</span>
                </td>
                <td colspan="3">
                    {% if pagosolicitado > 0 %}
                        Pagados: <span class="badge badge-success tu" title="Total Becas pagadas"><strong>{{ totalpagados }}</strong></span>
                        Por Pagar: <span class="badge badge-warning tu" title="Total Becas por pagar"><strong>{{ totalporpagar }}</strong></span>
                        Acreditados: <span class="badge badge-success tu" title="Total Becas acreditadas"><strong>{{ totalacreditados }}</strong></span>
                        Por acreditar: <span class="badge badge-warning tu" title="Total Becas por acreditar"><strong>{{ totalporacreditar }}</strong></span>
                    {% endif %}
                </td>
            </tr>
            <tr>
                <td style="margin: 2px; padding: 4px;">Tipo Estado:</td>
                <td style="margin: 2px; padding: 4px;"><strong>1</strong>: Documentos</td>
                <td style="margin: 2px; padding: 4px;"><strong>2</strong>: Certificado Bancario</td>
                <td style="margin: 2px; padding: 4px;"><strong>3</strong>: Contrato de Beca</td>
                <td style="margin: 2px; padding: 4px;"><strong>4</strong>: Cumplimiento Adq.</td>
                <td style="margin: 2px; padding: 4px;"><strong>5</strong>: Validez Comprobante</td>
            </tr>
        </table>
    </div>
</div>
<div class='row-fluid'>
    <div class="span6">
        {#            COMENTADO POR IVAN SALTOS: SON LAS OPCIONES ORIGINALES DEL MODULO#}
        {#            <div class="btn-group ">#}
        {#                <a class="btn dropdown-toggle " data-toggle="dropdown" href="#"> Configuración <span class="caret"></span></a>#}
        {#                <ul class="dropdown-menu">#}
        {#                    <li><a  href="/adm_becas?action=listaperiodos"> <i class="fa fa-cogs"></i> Configuración de Periodo</a></li>#}
        {#                    <li><a  href="/adm_becas?action=listatipobeca"> <i class="fa fa-cogs"></i> Gestión de Tipos de Becas</a></li>#}
        {#                    <li><a  href="/adm_becas?action=listautilizacion"> <i class="fa fa-cogs"></i> Justificativos Desembolso</a></li>#}
        {#                    <li><a  href="/adm_becas?action=listarequisito"> <i class="fa fa-cogs"></i> Gestión de Requisitos</a></li>#}
        {#                    <li><a  href="/adm_becas?action=importarbecados"> <i class="fa fa-cogs"></i> Importar Becados</a></li>#}
        {#                    <li><a class="notificartodo" > <i class="fa fa-cogs"></i> Notificar a becados por correo</a></li>#}
        {##}
        {#                </ul>#}
        {#            </div>#}

        {% if user.username == 'atorrese' or user.is_superuser %}
            <a class="btn btn-success correccion_actas_compromiso"> Corregir Actas compromisos Becados</a>
        {% endif %}
        <a class="btn btn-info validacion_masiva_documentos" href="javascript:;"> Validacion documentos</a>
        <div class="btn-group ">
            <a class="btn dropdown-toggle " data-toggle="dropdown" href="#"> Generar(Anterior) <span class="caret"></span></a>
            <ul class="dropdown-menu">
                <li><a class="generarinformeasistencia"> <i class="fa fa-file-pdf-o"></i> Generar Reporte Asistencia </a></li>
            </ul>
        </div>
        <div class="btn-group ">
            <a class="btn dropdown-toggle " data-toggle="dropdown" href="#"> Reportes(Anterior) <span class="caret"></span></a>
            <ul class="dropdown-menu">
                <li><a class="infomepago"> <i class="fa fa-file-pdf-o"></i> Informe de Pago de Beca</a></li>
                <li><a class="infomepagotodo"> <i class="fa fa-file-pdf-o"></i> Informe de Pago de Beca (Todos)</a></li>
                <li><a class="informeasistencia"> <i class="fa fa-file-pdf-o"></i> Informe de Asistencias</a></li>
                <li><a class="reportebecados"> <i class="fa fa-file-pdf-o"></i> Reporte Becados</a></li>
                <li><a class="infomepagoporpartes"> <i class="fa fa-file-pdf-o"></i> Informe Pago ( por pagos)</a></li>
                <li><a class="matriz"> <i class="fa fa-file-pdf-o"></i> Matriz de becados (caces)</a></li>
                <li><a href="/adm_becas?action=reporteria"> <i class="fa fa-file-pdf-o"></i> Reporterías</a></li>
            </ul>
        </div>
        {#            COMENTADO POR IVAN SALTOS: SON LAS OPCIONES ORIGINALES DEL MODULO#}

        {% if not persona.grupo_revisor_factura_beca and not persona.grupo_consulta_beca %}
            <div class="btn-group ">
                <a class="btn btn-info dropdown-toggle " data-toggle="dropdown" href="#"> Configuración <span class="caret"></span></a>
                <ul class="dropdown-menu">
                    <li><a href="/adm_becas?action=listaperiodos"> <i class="fa fa-cogs"></i> Configuración de Periodo</a></li>
                    <li><a href="/adm_becas?action=listatipobeca"> <i class="fa fa-cogs"></i> Configuración de Tipo de Becas</a></li>
                    <li><a  href="/adm_becas?action=listarequisito"> <i class="fa fa-cogs"></i> Gestión de Requisitos</a></li>
                </ul>
            </div>
        {% endif %}

        {% if periodo.id > 85 %}
            {% if persona.grupo_revisor_factura_beca or persona.usuario.is_superuser%}
                <div class="btn-group">
                    <a class="btn btn-warning dropdown-toggle" data-toggle="dropdown" href="javascript:;">Procesos <span class="caret"></span></a>
                    <ul class="dropdown-menu pull-left">
                        <li class="dropdown-submenu">
                            <a href="#"><i class="fa fa-money"></i> Actualización Estado Pagado</a>
                            <ul class="dropdown-menu pull-left">
                                <li><a href="javascript:;" class="actualizar_estado_pagado"><i class="fa fa-check-square-o"></i> Actualizar Estado Pagado</a></li>
                                <li><a href="javascript:;" class="notificar_pagado_email"><i class="fa fa-envelope"></i> Notificar pagado por e-mail</a></li>
                            </ul>
                        </li>
                        <li class="dropdown-submenu">
                            <a href="#"><i class="fa fa-handshake-o"></i> Actualización Estado Acreditado</a>
                            <ul class="dropdown-menu pull-left">
                                <li><a href="javascript:;" class="actualizar_estado_acreditado"><i class="fa fa-check-square-o"></i> Actualizar Estado Acreditado</a></li>
                                <li><a href="javascript:;" class="notificar_acreditado_email"><i class="fa fa-envelope"></i> Notificar acreditado por e-mail</a></li>
                            </ul>
                        </li>

                        </ul>
                    </div>
                    <div class="btn-group">
                        <a class="btn btn-success dropdown-toggle" data-toggle="dropdown" href="javascript:;">Reportes <span class="caret"></span></a>
                        <ul class="dropdown-menu pull-left">
                            <li><a href="javascript:;" class="reporte_pago_becas"><i class="fa fa-money"></i> Pagos de Becas</a></li>
                    </ul>
                </div>
            {% endif %}
        {% endif %}

        {% if not persona.grupo_revisor_factura_beca or persona.usuario.is_superuser and not persona.grupo_consulta_beca %}
            {% if periodo.id > 85 %}
                <div class="btn-group">
                    <a class="btn btn-warning dropdown-toggle" data-toggle="dropdown" href="javascript:;">Procesos <span class="caret"></span></a>
                    <ul class="dropdown-menu pull-left">
                        {% if not persona.grupo_revisor_factura_beca %}
                            <li><a href="javascript:;" class="fecha_solicitud_pago" fto="P"><i class="fa fa-dollar"></i> Generar Solicitud Pago</a></li>
                        {% else %}
                            <li><a href="javascript:;" class="actualizar_estado_pagado"><i class="fa fa-check-square-o"></i> Actualizar Estado Pagado</a></li>
                        {% endif %}
                        {% if periodo.versionbeca == 2 %}
                            <li><a href="/adm_becas?action=calculobeca"><i class="fa fa-calculator"></i> Cálculo de Desviación Estándar</a></li>
{#                            <li><a href="javascript:;" class="generarprecandidatos" disabled=""><i class="fa fa-gears"></i> Generar Listado PreCandidatos</a></li>#}
                            <li><a href="javascript:;" class="generarprecandidatosdesviacionestandar"><i class="fa fa-gears"></i> Generar Listado Precandidatos</a></li>
                            <li hidden><a href="javascript:;" class="generarsolicitudesbecas"><i class="fa fa-gears"></i> Generar Listado Solicitudes</a></li>
                        {% endif %}
                    </ul>
                </div>
            {% endif %}

            <div class="btn-group">
                <a class="btn btn-success dropdown-toggle" data-toggle="dropdown" href="javascript:;">Reportes <span class="caret"></span></a>
                <ul class="dropdown-menu pull-left">
                    {% if periodo.id > 85 %}
                        <li class="dropdown-submenu">
                            <a href="#"><i class="fa fa-id-card-o"></i> Documentación</a>
                            <ul class="dropdown-menu pull-left">
                                <li><a href="javascript:;" class="reporte_becas"><i class="fa fa-table"></i> Validada</a></li>
                                <li><a href="javascript:;" class="reporte_becas_documentop"><i class="fa fa-table"></i> Pendiente de Cargar</a></li>
                                <li><a href="javascript:;" class="reporte_becas_documentor"><i class="fa fa-table"></i> Rechazada</a></li>
                            </ul>
                        </li>
                        <li class="dropdown-submenu">
                            <a href="#"><i class="fa fa-paste"></i> Contratos</a>
                            <ul class="dropdown-menu pull-left">
                                <li><a href="javascript:;" class="reporte_becas_contratop"><i class="fa fa-table"></i> Pendientes de Generar</a></li>

                                <li><a href="javascript:;" class="reporte_becas_contratofpc"><i class="fa fa-table"></i> Firmados Pendientes de Cargar</a></li>

                                <li><a href="javascript:;" class="reporte_becas_contrator"><i class="fa fa-table"></i> Rechazados</a></li>
                            </ul>
                        </li>
                        <li><a href="javascript:;" class="imprimir_solicitud_pago"><i class="fa fa-print"></i> Reimprimir Solicitud de Pago</a></li>
                        <li><a href="javascript:;" class="reporte_seguimiento"><i class="fa fa-print"></i> Seguimiento Proceso Asignación Beca</a></li>
                    {% endif %}
                    {% if periodo.id == 90 %}

                        {#                        <li><a href="javascript:;" class="reporte_seguimiento"><i class="fa fa-print"></i> Seguimiento y Control (% Asistencia)</a></li>#}

                        <li class="dropdown-submenu">
                            <a href="#"><i class="fa fa-print"></i> Seguimiento y Control ( % Asistencia )</a>
                            <ul class="dropdown-menu pull-left">
                                <li><a href="javascript:;" class="reporte_seguimiento_nov2019mar2020"><i class="fa fa-file-pdf-o"></i> Formato PDF</a></li>
                                <li><a href="javascript:;" class="reporte_seguimiento_nov2019mar2020_excel"><i class="fa fa-file-excel-o"></i> Formato Excel</a></li>
                            </ul>
                        </li>

                    {% endif %}
                    {% if periodo.id == 110 %}
                        {#                        <li><a href="javascript:;" class="reporte_seguimiento_mayosep2020"><i class="fa fa-print"></i> Seguimiento y Control (% Materias Aprobadas )</a></li>#}

                        <li class="dropdown-submenu">
                            <a href="#"><i class="fa fa-print"></i> Seguimiento y Control (% Materias Aprobadas )</a>
                            <ul class="dropdown-menu pull-left">
                                <li><a href="javascript:;" class="reporte_seguimiento_mayosep2020"><i class="fa fa-file-pdf-o"></i> Formato PDF</a></li>
                                <li><a href="javascript:;" class="reporte_seguimiento_mayosep2020_excel"><i class="fa fa-file-excel-o"></i> Formato Excel</a></li>
                            </ul>
                        </li>

                    {% endif %}
                    <li><a href="javascript:;" class="matriz_siies_caces"><i class="fa fa-table"></i> Matriz SIIES-CACES</a></li>

                    <li><a href="javascript:;" class="reporte_beca_tipo"><i class="fa fa-print"></i> Becas por Tipo</a></li>
                    <li><a href="javascript:;" class="reporte_beca_carrera"><i class="fa fa-print"></i> Becas por Carrera</a></li>

                    {% if periodo.id > 85 %}
                        <li><a href="javascript:;" class="reporte_pago_becas"><i class="fa fa-money"></i> Pagos de Becas</a></li>
                        <li><a href="{{ request.path }}?action=reportes_documentacion_becas" target="_blank" ><i class="fa fa-file-excel"></i> Documentación general de becados</a></li>
                        <li><a href="javascript:;" class="generarreportepagobecafinanciero"><i class="fa fa-file-csv"></i> Reporte de pagos a becados csv</a></li>
                    {% endif %}


                    {#                        <li class="dropdown-submenu">#}
                    {#                            <a href="#"><i class="fa fa-money"></i> Solicitud para Pago</a>#}
                    {#                            <ul class="dropdown-menu pull-left">#}
                    {#                                <li><a href="javascript:;" class="reporte_becas_solicitud_pago" fto="P"><i class="fa fa-file-pdf-o"></i> Formato PDF</a></li>#}
                    {#                                <li><a href="javascript:;" class="reporte_becas_solicitud_pago" fto="E"><i class="fa fa-file-excel-o"></i> Formato Excel</a></li>#}
                    {#                            </ul>#}
                    {#                        </li>#}
                </ul>
            </div>
        {% endif %}

    </div>
    <div class="span6">
        <table class="table table-bordered" style="padding: 0px; margin: 0px">
            <tr>
                <td style="margin: 2px; padding: 4px;">Cuentas Bancarias:</td>
                <td style="margin: 2px; padding: 4px;">Registradas: <span class="badge badge-info tu" title="Total Cuentas Bancarias"><strong>{{ totalcuentas }}</strong></span></td>
                <td style="margin: 2px; padding: 4px;">Validadas: <span class="badge badge-success tu" title="Total Cuentas Validadas"><strong>{{ totalaprobadas }}</strong></span></td>
                <td style="margin: 2px; padding: 4px;">Rechazadas: <span class="badge badge-important tu" title="Total Cuentas Rechazadas"><strong>{{ totalrechazadas }}</strong></span></td>
                <td style="margin: 2px; padding: 4px;">Por Revisar: <span class="badge badge-warning tu" title="Total Cuentas Pendientes de revisar"><strong>{{ totalpendiente }}</strong></span></td>
            </tr>
        </table>
    </div>
</div>
<div class="row-fluid">
    <div class='span12'>
        {% if not persona.grupo_revisor_factura_beca and not persona.grupo_consulta_beca %}
            <a class="btn btn-info historialbeca" href="javascript:;" id="divhistorial" data-toggle="tab"><i class="fa fa-list"></i> HISTORIAL </a>

            <a class="btn btn-success" href="#" id="divasignacion" data-toggle="tab"><i class="fa fa-user-circle-o"></i> BECADOS </a>
            <a class="btn" href="#" id="divsolicitud" data-toggle="tab"><i class="fa fa-id-card-o"></i> SOLICITUDES </a>
            <a class="btn " href="#" id="diveconomica" data-toggle="tab"><i class="fa fa-money"></i>SOCIO ECONÓMICA </a>
            <a class="btn " href="#" id="divpromedio"  data-toggle="tab"><i class="fa fa-star"></i> ACADÉMICA</a>
            <a class="btn" href="#" id="divdeporte"  data-toggle="tab"><i class="fa fa-futbol-o"></i> DEPORTE</a>
            <a class="btn" href="#" id="divdiscapacitados" data-toggle="tab"><i class="fa fa-wheelchair-alt"></i> DISCAPACIDAD</a>
            <a class="btn" href="#" id="divprimernivel" data-toggle="tab"><i class="fa fa-list-ol"></i> PRIMER NIVEL</a>
            <a class="btn" href="#" id="divetnia" data-toggle="tab"><i class="fa fa-list-ol"></i> Etnia/Nacionalidad</a>
            <a class="btn" href="#" id="divextranjero" data-toggle="tab"><i class="fa fa-list-ol"></i> Ecuatoriano en el Extranjero</a>
            <a class="btn" href="#" id="divmigrante" data-toggle="tab"><i class="fa fa-list-ol"></i> Migrante retornado o deportado</a>
            <hr>
        {% endif %}
    </div>
</div>
<div class="row-fluid">
    <div style="text-align: left;" class="span9">
        <table class="table table-bordered" style="padding: 0px; margin: 0px">
            <tr>
                <td><strong class="tu" title="Tipo de Beca">T.Beca:</strong></td>
                <td>
                    <select id="id_btipos" style="width: 150px">
                        <option value="0" selected="selected">TODOS</option>
                        {% for tipo in becatipo %}
                            <option value="{{ tipo.id }}" {% if btiposelect == tipo.id %}selected="selected"{% endif %}>{{ tipo.nombrecorto|upper }}</option>
                        {% endfor %}
                    </select>
                </td>
                <td><strong class="tu" title="Tipo de asignación">T.Asigna:</strong></td>
                <td>
                    <select id="id_tipos" style="width: 100px">
                        <option value="0" selected="selected">TODOS</option>
                        {% for tipo in tipos %}
                            <option value="{{ tipo.0 }}" {% if tiposelect == tipo.0 %}selected="selected"{% endif %}>{{ tipo.1 }}</option>
                        {% endfor %}
                    </select>
                </td>
                <td><strong class="tu" title="Estado de Documentos">E.Docs:</strong></td>
                <td>
                    <select id="id_estadodocumento" style="width: 100px">
                        <option value="0" selected="selected">TODOS</option>
                        <option value="1" {% if estadodocumento == 1 %}selected="selected"{% endif %}>CARGADO</option>
                        <option value="2" {% if estadodocumento == 2 %}selected="selected"{% endif %}>VALIDADO</option>
                        <option value="3" {% if estadodocumento == 3 %}selected="selected"{% endif %}>RECHAZADO</option>
                    </select>
                </td>
                <td><strong class="tu" title="Estado del Contrato de beca">E.Contr:</strong></td>
                <td>
                    <select id="id_estadocontrato" style="width: 100px">
                        <option value="0" selected="selected">TODOS</option>
                        <option value="1" {% if estadocontrato == 1 %}selected="selected"{% endif %}>CARGADO</option>
                        <option value="2" {% if estadocontrato == 2 %}selected="selected"{% endif %}>VALIDADO</option>
                        <option value="3" {% if estadocontrato == 3 %}selected="selected"{% endif %}>RECHAZADO</option>
                    </select>
                </td>

                <td><strong class="tu" title="Estado de Cumplimiento Adquisición">E.Cumplim:</strong></td>
                <td>
                    <select id="id_estadocumplimiento" style="width: 100px">
                        <option value="0" selected="selected">TODOS</option>
                        <option value="1" {% if estadocumplimiento == 1 %}selected="selected"{% endif %}>CARGADO</option>
                        <option value="2" {% if estadocumplimiento == 2 %}selected="selected"{% endif %}>VALIDADO</option>
                        <option value="3" {% if estadocumplimiento == 3 %}selected="selected"{% endif %}>RECHAZADO</option>
                        <option value="5" {% if estadocumplimiento == 5 %}selected="selected"{% endif %}>REVISIÓN</option>
                        <option value="6" {% if estadocumplimiento == 6 %}selected="selected"{% endif %}>RECHAZADO IO</option>
                    </select>
                </td>

                <td><strong class="tu" title="Estado de Validez del comprobante">E.Comprob:</strong></td>
                <td>
                    <select id="id_estadocomprobante" style="width: 100px">
                        <option value="0" selected="selected">TODOS</option>
                        <option value="1" {% if estadocomprobante == 1 %}selected="selected"{% endif %}>CARGADO</option>
                        <option value="2" {% if estadocomprobante == 2 %}selected="selected"{% endif %}>VALIDADO</option>
                        <option value="3" {% if estadocomprobante == 3 %}selected="selected"{% endif %}>RECHAZADO</option>
                        <option value="6" {% if estadocomprobante == 6 %}selected="selected"{% endif %}>RECHAZADO IO</option>
                    </select>
                </td>
            </tr>
        </table>
    </div>
    <div style="text-align: right;" class="span3">
        <form class="form-search">
            <input class='searchinput' type='text' style="width: 250px" id='searchinput' value='{{ search }}' autocomplete="off"/>
            <a href="javascript:;" id='search' class='btn btn-info'><span class="fa fa-search " ></span> Buscar</a>
            {% if search or ids %}
                <a href="/adm_becas" id='allresults' class='btn btn-info'><span class="fa fa-refresh " ></span> Todos</a>
            {% endif %}
        </form>
    </div>
</div>
<div class="row-fluid">
    <div class="span12">
        <table class="table table-bordered" style="padding: 0px; margin: 0px">
            <tr>
                <td style="margin: 2px; padding: 4px;">Becas: <span class="badge badge-inverse tu" title="Total Becas"><strong>{{ totalbecas }}</strong></span>
                    {% if periodo.id == 110 %}
                        {% if not persona.grupo_revisor_factura_beca and not persona.grupo_consulta_beca %}
                            <a href="javascript:;" class="btn btn-info resumencupos btn-mini tu" data-original-title="Información de Cupos"><i class="fa fa-table"></i></a>
                        {% endif %}
                    {% endif %}
                    {% if periodo.id == 90 %}
                        {% if not persona.grupo_revisor_factura_beca and not persona.grupo_consulta_beca %}
                            <a href="javascript:;" class="btn btn-info resumenbecasasignadas btn-mini tu" data-original-title="Resumen Becas Asignadas"><i class="fa fa-table"></i></a>
                        {% endif %}
                    {% endif %}
                </td>
                <td style="margin: 2px; padding: 4px;">Doc.Car: <span class="badge badge-info tu" title="Total Documentación Cargada"><strong>{{ totaldoccargada }}</strong></span></td>
                <td style="margin: 2px; padding: 4px;">Doc.Pen: <span class="badge badge-warning tu" title="Total Documentacion Pendiente de cargar"><strong>{{ totaldocpendcarga }}</strong></span></td>
                <td style="margin: 2px; padding: 4px;">Doc.Val: <span class="badge badge-success tu" title="Total Documentación Validada"><strong>{{ totaldocvalida }}</strong></span></td>
                <td style="margin: 2px; padding: 4px;">Doc.Rec: <span class="badge badge-important tu" title="Total Documentación Rechazada"><strong>{{ totaldocrechazada }}</strong></span></td>
                <td style="margin: 2px; padding: 4px;">Doc.Pen.R: <span class="badge badge-warning tu" title="Total Documentación Pendiente de revisar"><strong>{{ totaldocpendrevision }}</strong></span></td>
                <td style="margin: 2px; padding: 4px;">Cont.Gen: <span class="badge badge-info tu" title="Total Contratos Generados"><strong>{{ totalcontratosgen }}</strong></span></td>
                <td style="margin: 2px; padding: 4px;">Cont.Pen.G: <span class="badge badge-warning tu" title="Total Contratos Pendientes de generar"><strong>{{ totalcontratospendgen }}</strong></span></td>
                <td style="margin: 2px; padding: 4px;">Cont.Car: <span class="badge badge-info tu" title="Total Contratos Cargados"><strong>{{ totalcontratoscarga }}</strong></span></td>
                <td style="margin: 2px; padding: 4px;">Cont.Pen.Car: <span class="badge badge-warning tu" title="Total Contratos Pendientes de cargar"><strong>{{ totalcontratospencarga }}</strong></span></td>
                <td style="margin: 2px; padding: 4px;">Cont.Val: <span class="badge badge-success tu" title="Total Contratos Validados"><strong>{{ totalcontratosvalida }}</strong></span></td>
                <td style="margin: 2px; padding: 4px;">Cont.Rec: <span class="badge badge-important tu" title="Total Contratos Rechazados"><strong>{{ totalcontratosrechazado }}</strong></span></td>
                <td style="margin: 2px; padding: 4px;">Cont.Pen.R: <span class="badge badge-warning tu" title="Total Contratos Pendientes de revisión"><strong>{{ totalcontratospenrevision }}</strong></span></td>
            </tr>
            <tr>
                <td style="margin: 2px; padding: 4px;">No Sub.Doc.: <span class="badge badge-info tu" title="Total No deben cargar documentos"><strong>{{ nocargadocumento }}</strong></span></td>
                <td style="margin: 2px; padding: 4px;">Pagos Sol.: <span class="badge badge-success tu" title="Total Pagos solicitados"><strong>{{ pagosolicitado }}</strong></span></td>
                <td style="margin: 2px; padding: 4px;">Pagos No Sol.: <span class="badge badge-warning tu" title="Total Pagos por solicitar"><strong>{{ pagonosolicitado }}</strong></span></td>
                <td style="margin: 2px; padding: 4px;">Comp.Car: <span class="badge badge-info tu" title="Total Comprobantes de Venta cargado"><strong>{{ compcar }}</strong></span></td>
                <td style="margin: 2px; padding: 4px;">Comp.Pen.Car: <span class="badge badge-warning tu" title="Total Comprobantes de Venta Pendiente de cargar"><strong>{{ comppencar }}</strong></span></td>
                <td style="margin: 2px; padding: 4px;">Comp.Val.Dbu: <span class="badge badge-success tu" title="Total Comprobantes de Venta Validado por Bienestar"><strong>{{ compvaldbu }}</strong></span></td>
                <td style="margin: 2px; padding: 4px;">Comp.Rec.Dbu: <span class="badge badge-important tu" title="Total Comprobantes de Venta Rechazado por Bienestar"><strong>{{ comprecdbu }}</strong></span></td>
                <td style="margin: 2px; padding: 4px;">Comp.Pen.R.Dbu: <span class="badge badge-warning tu" title="Total Comprobantes de Venta Pendiente de revisar por Bienestar"><strong>{{ comppendbu }}</strong></span></td>
                <td style="margin: 2px; padding: 4px;">Comp.Val.Tes: <span class="badge badge-success tu" title="Total Comprobantes de Venta Validado por Tesorería"><strong>{{ compvaltes }}</strong></span></td>
                <td style="margin: 2px; padding: 4px;">Comp.Rec.Tes: <span class="badge badge-important tu" title="Total Comprobantes de Venta Rechazado por Tesorería"><strong>{{ comprectes }}</strong></span></td>
                <td colspan="3" style="margin: 2px; padding: 4px;">Comp.Pen.R.Tes: <span class="badge badge-warning tu" title="Total Comprobantes de Venta Pendiente de revisar por Tesorería"><strong>{{ comppentes }}</strong></span></td>
            </tr>
        </table>
    </div>
</div>
<div class="row-fluid">
    <div class="span12">
        <table class='table table-bordered' id="asignacion" cellpadding="0" cellspacing="0">
            <thead>
            <tr>
                <th style="width: 4%; text-align: center; vertical-align: middle">No.Solicitud</th>
                <th style="width: 18%; text-align: center; vertical-align: middle">Estudiante</th>
                <th style="width: 14%; text-align: center; vertical-align: middle">Beca</th>
                <th style="width: 14%; text-align: center; vertical-align: middle">Nivel / Matrícula</th>
                <th style="width: 15%; text-align: center; vertical-align: middle">Email / Teléfonos</th>
                <th style="width: 4%; text-align: center; vertical-align: middle">Foto</th>
                <th style="width: 7%; text-align: center; vertical-align: middle">Grupo Pago</th>
                <th style="width: 7%; text-align: center; vertical-align: middle">Tipo Asignación</th>
                <th style="width: 8%; text-align: center; vertical-align: middle">Datos Actualizados</th>
                <th style="width: 2%; text-align: center; vertical-align: middle">...</th>
                <th style="width: 7%; text-align: center; vertical-align: middle">Acciones</th>
            </tr>
            </thead>
            <tbody>
            {% for asig in asignados %}
            <tr>
                <td style="text-align: center; vertical-align: middle"><span class="label label-success">{{ asig.solicitud.id }}</span> </td>
                <td style="text-align: justify; vertical-align: middle">
                    {{ asig.solicitud.inscripcion.persona.nombre_completo_inverso }}
                    <br><b>Carr:.</b> {{ asig.solicitud.inscripcion.carrera }}
                    <br><b>Ced:.</b>{{ asig.solicitud.inscripcion.persona.cedula }}
                    {#                                {%  if asig.notificar and periodo.id != 110 %}#}
                    {#                                    <br>#}
                    {#                                    <b> Notificado por sistema del {{ becaperiodo.fechainicionotificacion|date:"Y-m-d"  }} : {{ becaperiodo.fechainicionotificacion|time:'h:i a' }} al {{ becaperiodo.fechafinnotificacion|date:"Y-m-d" }} : {{ becaperiodo.fechafinnotificacion|time:'h:i a' }} </b>#}
                    {#                                {% endif %}#}
                </td>
                <td style="vertical-align: middle"><b>Tipo:.</b> <span class="label label-info tu" title="{{ asig.solicitud.becatipo.nombre|upper }}">{{ asig.solicitud.becatipo.nombrecorto|upper }}</span><br>
                    <b> Fecha Asignacion:.</b> {{ asig.fecha_creacion|date:"Y-m-d h:i a" }}<br>
                    {% if periodo.id != 110 %}
                        <b>Meses: </b> {{ asig.cantidadmeses }},
                        <b>M mensual: </b> {{ asig.montomensual }},
                        <b> MT: </b> {{ asig.montobeneficio }}
                    {% else %}
                        <b>Monto Total:</b>
                        {% if asig.montobeneficio %}
                            <span class="label label-success">$ {{ asig.montobeneficio|floatformat:2|intcomma }}</span>
                        {% else %}
                            <span class="label label-warning">NO DEFINIDO</span>
                        {% endif %}<br>
                        {#                                    <b>Beneficios:</b>#}
                        {#                                    <span class="label label-success">{{ asig.solicitud.beneficiossolicitud }}</span>#}
                    {% endif %}
                    {% if asig.numerocontrato %}
                        <strong>N° Contrato: </strong><span class="label label-inverse">{{ asig.numerocontrato|stringformat:"04d" }}</span>
                    {% endif %}
                </td>
                <td style="text-align: center; vertical-align: middle">
                    {%  if asig.solicitud.inscripcion.estado_gratuidad == 1 %}
                        <span class="label label-success tu" data-original-title="Estado de Gratuidad" >GRATUIDAD COMPLETA</span>
                    {% endif %}
                    {%  if asig.solicitud.inscripcion.estado_gratuidad == 2 %}
                        <span class="label label-success tu" data-original-title="Estado de Gratuidad" >GRATUIDAD PARCIAL</span>
                    {% endif %}
                    <span class="label label-info tu" title="Nivel academico">
                                    {{ asig.solicitud.inscripcion.sesion.nombre }} -
                        {% with matriculado=asig.solicitud.inscripcion|args:periodo|call:"matriculado_periodo" %}
                            {% if matriculado %}
                                {% with matriculaactual=asig.solicitud.inscripcion|args:periodo|call:"matricula_periodo_actual" %}
                                    {{ matriculaactual.0.nivelmalla }}-
                                    {{ matriculaactual.0.paralelo.nombre }}
                                {% endwith %}
                            {% endif %}
                        {% endwith %}

                        {#                                    {{ asig.solicitud.inscripcion.matricula.nivelmalla }} -#}
{#                                    {{ asig.solicitud.inscripcion.matricula.paralelo.nombre }}#}

                                </span>
                    {% with matricula=asig.solicitud.inscripcion|args:periodo|call:"matricula_periodo" %}
                    {% if matricula.tipomatriculalumno %}
                    <br><b>Per actual:</b>
                    <span class="label {% if matricula.tipomatriculalumno == "REGULAR" %}label-success{% else %}label-inverse{% endif %} tu" >
                                            {{ matricula.tipomatriculalumno }}
                                    </span>
                    {% endif %}
                    {% endwith %}
                    {% with matricula=asig.solicitud.inscripcion|args:periodoanterior|call:"matricula_periodo" %}
                    {% if matricula.tipomatriculalumno %}
                    <br><b>Per anterior:</b>
                    <span class="label {% if matricula.tipomatriculalumno == "REGULAR" %}label-success{% else %}label-inverse{% endif %} tu" >
                                            {{ matricula.tipomatriculalumno }}
                                        </span>
                    {% endif %}
                    {% endwith %}
                    <span class="label label-info tu" >
                                    {% with matricula=asig.solicitud.inscripcion|args:periodo|call:"matricula_periodo" %}
                                        {{ matricula.id }}
                                    {%  endwith %}
                        - {{ asig.solicitud.becatipo.id }}
                                </span>
                </td>
                <td class="hidden-phone hidden-tablet " style="vertical-align: middle">
                    {% if asig.solicitud.inscripcion.persona.email %}<a href="mailto:{{ asig.solicitud.inscripcion.persona.email}}">{{ asig.solicitud.inscripcion.persona.email }}</a><br>{% endif %}
                    {% if asig.solicitud.inscripcion.persona.emailinst %}<a href="mailto:{{ asig.solicitud.inscripcion.persona.emailinst}}">{{ asig.solicitud.inscripcion.persona.emailinst }}</a><br>{% endif %}
                    {%  for telefono in asig.solicitud.inscripcion.persona.lista_telefonos %}
                        {{ telefono }}{% if not forloop.last %}, {% endif %}
                    {% endfor %}
                    <br><b>Dirección:</b> {{ asig.solicitud.inscripcion.persona.direccion_completa }}
                    {% if asig.solicitud.inscripcion.identificador %}
                        <br/><span class="label label-info">{{ asig.solicitud.inscripcion.identificador }}</span>
                    {% endif %}
                </td>
                <td style="text-align: center; vertical-align: middle">
                    {% if asig.solicitud.inscripcion.persona.tiene_foto %}
                        <a title="{{ asig.solicitud.inscripcion.persona.nombre_completo }}" href='{{ asig.solicitud.inscripcion.persona.foto.foto.url }}' class="fancybox" rel="group"><img src="{{ asig.solicitud.inscripcion.persona.foto.foto.url }}" width="30px"></a>
                    {% endif %}
                </td>
                <td style="text-align: center; vertical-align: middle">
                    {#                                {% if becaperiodo.vigente %}#}
                    {#                                    <input class="form-imput input-mini grupopago" style="text-align: center;" bid="{{ asig.id }}" type="text" va="{{ asig.grupopago}}" value="{{ asig.grupopago|default_if_none:'' }}">#}
                    {#                                {% else %}#}
                    {#                                    {{ asig.grupopago|default_if_none:'' }}#}
                    {#                                {% endif %}#}
{#                    {% if asig.tipo == 1 %}#}
{#                        {% if asig.estadorevisioncontrato == 2 %}#}
{#                            <strong>Fase Pago:</strong><br>#}
{#                            {% with pago=asig|call:"solicitudpago" %}#}
{#                                {% if pago %}#}
{#                                    <span class="label label-success tu" title="Solicitado">SI</span>#}
{#                                    {% if pago.pagado %}#}
{#                                        <span class="label label-success tu" title="Pagado">SI</span>#}
{#                                        {% if pago.acreditado %}#}
{#                                            <span class="label label-success tu" title="Acreditado">SI</span>#}
{#                                        {% else %}#}
{#                                            <span class="label label-important tu" title="Acreditado">NO</span>#}
{#                                        {% endif %}#}
{#                                    {% else %}#}
{#                                        <span class="label label-important tu" title="Pagado">NO</span>#}
{#                                    {% endif %}#}
{#                                {% else %}#}
{#                                    <span class="label label-important tu" title="Solicitado">NO</span>#}
{#                                {% endif %}#}
{#                            {% endwith %}#}
{#                        {% endif %}#}
{#                    {% else %}#}
                        <strong>Fase Pago:</strong><br>
                        {% with pago=asig|call:"solicitudpago" %}
                            {% if pago %}
                                <span class="label label-success tu" title="Solicitado">SI</span>
                                {% if pago.pagado %}
                                    <span class="label label-success tu" title="Pagado">SI</span>
                                    {% if pago.acreditado %}
                                        <span class="label label-success tu" title="Acreditado">SI</span>
                                    {% else %}
                                        <span class="label label-important tu" title="Acreditado">NO</span>
                                    {% endif %}
                                {% else %}
                                    <span class="label label-important tu" title="Pagado">NO</span>
                                {% endif %}
                            {% else %}
                                <span class="label label-important tu" title="Solicitado">NO</span>
                            {% endif %}
                        {% endwith %}
{#                    {% endif %}#}
                </td>
                <td style="text-align: center; vertical-align: middle">

                    {#                                {% if becaperiodo.vigente %}#}
                    {#                                    <select style="width: 90px" class="tipos_asig" tipo="{{ asig.id }}">#}
                    {#                                        <option value="0" selected="selected">---------</option>#}
                    {#                                        {% for tipo in tipos %}#}
                    {#                                            <option value="{{ tipo.0 }}" {% if asig.tipo == tipo.0 %}selected="selected"{% endif %}>{{ tipo.1 }}</option>#}
                    {#                                        {% endfor %}#}
                    {#                                    </select>#}
                    {#                                {% else %}#}
                    {#                                    {{ asig.get_tipo_display }}#}
                    {#                                {% endif %}#}
                    {#                                {% if becaperiodo.vigente %}#}
                    {#                                    <select style="width: 90px" class="tipos_asig" tipo="{{ asig.id }}">#}
                    {#                                        <option value="0" selected="selected">---------</option>#}
                    {#                                        {% for estado in estados %}#}
                    {#                                            <option value="{{ estado.0 }}" {% if asig.estado == estado.0 %}selected="selected"{% endif %}>{{ estado.1 }}</option>#}
                    {#                                        {% endfor %}#}
                    {#                                    </select>#}
                    {#                                {% else %}#}
                    {#                                    {{ asig.get_tipo_display }}#}
                    {#                                {% endif %}#}
                    {#                            #}
                    {{ asig.get_tipo_display }}
                </td>
                <td style="text-align: center; vertical-align: middle">
                    <span class="label label-{% if asig.infoactualizada %}success{% else %}important{% endif %} tu" title="Datos actualizados">{% if asig.infoactualizada %}SI{% else %}NO{% endif %}</span><br>
                    {% if periodo.id > 85 %}
                        {% if asig.infoactualizada %}
                            <strong>Estados:</strong><br>
                            {% if asig.solicitud.becatipo.id == 16 %}
                                {% with estadodocumentos=asig.solicitud.inscripcion.persona|call:"estado_revision_documento_bpn" %}
                                    <span class="label label-{% if estadodocumentos == 1 %}info{% elif estadodocumentos == 2 %}success{% else %}important{% endif %} tu" title="Estado Documentos">1</span>
                                {% endwith %}
                            {% elif asig.solicitud.becatipo.id == 22 and asig.solicitud.inscripcion.persona.ecuatoriano_vive_exterior %}
                                {% with estadodocumentos=asig.solicitud.inscripcion.persona|call:"estado_revision_documento_new" %}
                                    <span class="label label-{% if estadodocumentos == 1 %}info{% elif estadodocumentos == 2 %}success{% else %}important{% endif %} tu" title="Estado Documentos">1</span>
                                {% endwith %}
                            {% elif asig.solicitud.becatipo.id == 21 %}
                                {% with estadodocumentos=asig.solicitud.inscripcion.persona|call:"estado_revision_documento_new_2" %}
                                    <span class="label label-{% if estadodocumentos == 1 %}info{% elif estadodocumentos == 2 %}success{% else %}important{% endif %} tu" title="Estado Documentos">1</span>
                                {% endwith %}
                            {% else %}
                                {% with estadodocumentos=asig.solicitud.inscripcion.persona|call:"estado_revision_documento" %}
                                    <span class="label label-{% if estadodocumentos == 1 %}info{% elif estadodocumentos == 2 %}success{% else %}important{% endif %} tu" title="Estado Documentos">1</span>
                                {% endwith %}
                            {% endif %}
                            {% with estadodocumentos=asig.solicitud.inscripcion.persona|call:"estado_revision_certificado_bancario" %}
                                <span class="label label-{% if estadodocumentos == 1 %}info{% elif estadodocumentos == 2 %}success{% else %}important{% endif %} tu" title="Estado Certificado Bancario">2</span>
                            {% endwith %}
                            {% if asig.archivocontrato %}
                                <span class="label label-{% if asig.estadorevisioncontrato == 1 %}info{% elif asig.estadorevisioncontrato == 2 %}success{% else %}important{% endif %} tu" title="Estado Contrato de Beca">3</span>
                            {% endif %}
                            {% if asig.tiene_comprobante_venta %}
                                {% with estado_revision_dbu=asig|call:"estado_comprobante_revision_dbu" persona_revision_dbu=asig|call:"persona_revision_dbu" estado_revision_fin=asig|call:"estado_comprobante_revision_fin" %}
                                    <span class="label label-{% if estado_revision_dbu == 1 %}info{% elif estado_revision_dbu == 2 %}success{% elif estado_revision_dbu == 3 or estado_revision_dbu == 6 %}important{% else %}warning{% endif %} tu" title="Estado Cumplimiento Adquisición">4</span>
                                    {#                                        {%  endwith %}#}
                                    {#                                        {% with estado_revision_fin=asig|call:"estado_comprobante_revision_fin" %}#}
                                    <span class="label label-{% if estado_revision_fin == 1 %}info{% elif estado_revision_fin == 2 %}success{% elif estado_revision_fin == 3 or estado_revision_fin == 6 %}important{% else %}warning{% endif %} tu" title="Estado Validez Comprobante">5</span>
                                    {% if estado_revision_dbu == 5 %}
                                        <br><br>
                                        <span class="label label-default">{{ persona_revision_dbu }}</span>
                                    {% endif %}
                                {%  endwith %}

                            {% endif %}
                        {% endif %}
                    {% endif %}
                </td>
                <td style="vertical-align: middle; text-align: center">
                    <a href="javascript:;" idt="{{ asig.solicitud.id }}" class="btn btn-warning mostrardocumentos btn-mini tu" data-original-title="Documentación Entregada"><i class="fa fa-table"></i></a>
                </td>
                <td style="text-align: center; vertical-align: middle">
                    {% if periodo.id > 85 %}
                        {% if not persona.grupo_revisor_factura_beca and not persona.grupo_consulta_beca %}
                            <div class="btn-group" style="text-align: left">
                                <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown" href="javascript:;">Acciones<span class="caret"></span></a>

                                <ul class="dropdown-menu pull-right">
                                    <li>
                                        <a class="mostrarrecorrido" ids="{{ asig.solicitud.id }}" href="javascript:;"><i class="fa fa-list-ol"></i> Mostrar Recorrido</a>
                                    </li>
                                    <li>
                                        <a class="anularbeca" ids="{{ asig.id }}" href="javascript:;"><i class="fa fa-minus-circle"></i> Anular Beca</a>
                                    </li>
                                    <li>
                                        <a class="validarcedula" idb="{{ asig.id }}" href="javascript:;"><i class="fa fa-check-square-o"></i> Revisar y Validar Documentos</a>
                                    </li>


{#                                    {% if asig.tipo == 1 %}#}
{#                                        {% if asig.infoactualizada %}#}
{#                                            {% if not asig.personarevisadocumento %}#}
{#                                                <li>#}
{#                                                    <a class="validarcedula" idb="{{ asig.id }}" href="javascript:;"><i class="fa fa-check-square-o"></i> Revisar y Validar Documentos</a>#}
{#                                                </li>#}
{#                                            {% else %}#}
{#                                                {% if asig.personarevisadocumento == persona %}#}
{#                                                    <li>#}
{#                                                        <a class="validarcedula" idb="{{ asig.id }}" href="javascript:;"><i class="fa fa-check-square-o"></i> Revisar y Validar Documentos</a>#}
{#                                                    </li>#}
{#                                                {% endif %}#}
{#                                            {% endif %}#}
{#                                            {% if asig.archivocontrato %}#}
{#                                                {% if not asig.personarevisacontrato %}#}
{#                                                    {% if asig.estadorevisioncontrato == 1 %}#}
{#                                                        <li>#}
{#                                                            <a class="validarcontrato" idb="{{ asig.id }}" href="javascript:;"><i class="fa fa-check-square-o"></i> Revisar y Validar Contrato de Beca</a>#}
{#                                                        </li>#}
{#                                                    {% endif %}#}
{#                                                {% else %}#}
{#                                                    {% if asig.personarevisacontrato == persona %}#}
{#                                                        <li>#}
{#                                                            <a class="validarcontrato" idb="{{ asig.id }}" href="javascript:;"><i class="fa fa-check-square-o"></i> Revisar y Validar Contrato de Beca</a>#}
{#                                                        </li>#}
{#                                                    {% endif %}#}
{#                                                {% endif %}#}
{#                                            {% endif %}#}
{#                                            {% if asig.tiene_comprobante_venta %}#}
{#                                                <li>#}
{#                                                    <a class="validaradquisicion" idb="{{ asig.id }}" tv="ADQ" href="javascript:;"><i class="fa fa-check-square-o"></i> Revisar y Validar Cumplimiento Adquisición</a>#}
{#                                                </li>#}
{#                                            {% endif %}#}
{#                                        {% endif %}#}
{#                                    {% endif %}#}


                                    {#                                        {% if asig.solicitud.inscripcion.persona.cedula_solicitante_representante_validadas %}#}
                                    {#                                            {% if not asig.archivocontrato and not asig.archivoacta and not asig.fotoentrega %}#}
                                    {#                                                <li>#}
                                    {#                                                    <a class="imprimircontratobeca" idb="{{ asig.id }}" href="javascript:;"><i class="fa fa-print"></i> Imprimir Contrato de Beca</a>#}
                                    {#                                                </li>#}
                                    {#                                                {% if asig.numerocontrato %}#}
                                    {#                                                    <li>#}
                                    {#                                                        <a class="imprimiractaentrega" idb="{{ asig.id }}" href="javascript:;"><i class="fa fa-print"></i> Imprimir Acta Entrega-Recepción</a>#}
                                    {#                                                    </li>#}
                                    {#                                                {% endif %}#}
                                    {#                                            {% endif %}#}
                                    {#                                            {% if asig.numerocontrato and asig.numeroacta %}#}
                                    {#                                                <li>#}
                                    {#                                                    <a class="subirevidenciasentrega" idb="{{ asig.id }}" href="javascript:;"><i class="fa fa-upload"></i> Subir Evidencias Entrega Beca</a>#}
                                    {#                                                </li>#}
                                    {#                                            {% endif %}#}
                                    {#                                            <li>#}
                                    {#                                                <a class="anularsolicitud" ids="{{ asig.id }}" href="javascript:;"><i class="fa fa-folder-open"></i> Adjuntar Certificados</a>#}
                                    {#                                            </li>#}
                                    {#                                        {% endif %}#}
                                    {#                                        <li><a  href="javascript:;" ids="{{  asig.id  }}" class="tu asignarbeca"><span class="fa fa-check"></span> Editar </a></li>#}
                                    {#                                        <li><a  href="javascript:;" onclick="notificar({{ asig.id }});"  class="tu"><span class="fa fa-send"></span> Notificar por correo</a></li>#}
                                    {#                                        <li><a  href="javascript:;" onclick="notificarsistema({{ asig.id }});"  class="tu"><span class="fa fa-send"></span> Notificar por sistema</a></li>#}
                                    {#                                        <li><a  href="/adm_becas?action=becautilizacion&id={{ asig.solicitud.inscripcion.id }}"  id="destino" class="tu"><span class="fa fa fa-apple"></span> Ver evidencia utilización </a></li>#}
                                    {#                                        <li><a class="eliminacionmodal" href="javascript:;" nhref="/adm_becas?action=deletebecaasignacion&id={{ asig.id }}"><i class="fa fa-remove"></i> Eliminar</a> </li>#}

                                </ul>
                            </div>
                        {% else %}
                            {% if persona.grupo_revisor_factura_beca and asig.estado_comprobante_revision_dbu == 2 %}
                                <div class="btn-group" style="text-align: left">
                                    <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown" href="javascript:;">Acciones<span class="caret"></span>
                                    </a>
                                    <ul class="dropdown-menu pull-right">
                                        <li>
                                            <a class="validarcomprobante" idb="{{ asig.id }}" tv="CVTA" href="javascript:;"><i class="fa fa-check-square-o"></i> Revisar y Validar Comprobante</a>
                                        </li>
                                    </ul>
                                </div>
                            {% endif %}
                        {% endif %}
                    {% endif %}
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="11" style="text-align: center">NO EXISTEN REGISTROS</td>
            </tr>
            {% endfor %}
            </tbody>
        </table>

    </div>
</div>
<div class='row-fluid'>
    <div class="span12">
        {% if paging.num_pages > 20 %}
            <div class='pagination'>
                <ul>
                    {% if paging.primera_pagina %}
                        <li><a href="/adm_becas?{% if search %}s={{ search }}&{% endif %}{% if btiposelect %}btipo={{ btiposelect }}&{% endif %}{% if tiposelect %}tipo={{ tiposelect }}&{% endif %}{% if estadodocumento %}&estadodocumento={{ estadodocumento }}&{% endif %}{% if estadocontrato %}&estadocontrato={{ estadocontrato }}&{% endif %}{% if estadocumplimiento %}&estadocumplimiento={{ estadocumplimiento }}&{% endif %}{% if estadocomprobante %}&estadocomprobante={{ estadocomprobante }}&{% endif %}page=1">1</a></li>
                        <li><a href="/adm_becas?{% if search %}s={{ search }}&{% endif %}{% if btiposelect %}btipo={{ btiposelect }}&{% endif %}{% if tiposelect %}tipo={{ tiposelect }}&{% endif %}{% if estadodocumento %}&estadodocumento={{ estadodocumento }}&{% endif %}{% if estadocontrato %}&estadocontrato={{ estadocontrato }}&{% endif %}{% if estadocumplimiento %}&estadocumplimiento={{ estadocumplimiento }}&{% endif %}{% if estadocomprobante %}&estadocomprobante={{ estadocomprobante }}&{% endif %}page={{ paging.ellipsis_izquierda }}" class="active">...</a></li>
                    {% endif %}
                    {% for pagenumber in paging.paginas %}
                        <li {%  if pagenumber == page.number %}class='active'{% endif %}><a href="/adm_becas?{% if btiposelect %}btipo={{ btiposelect }}&{% endif %}{% if tiposelect %}tipo={{ tiposelect }}&{% endif %}{% if estadodocumento %}&estadodocumento={{ estadodocumento }}&{% endif %}{% if estadocontrato %}&estadocontrato={{ estadocontrato }}&{% endif %}{% if estadocumplimiento %}&estadocumplimiento={{ estadocumplimiento }}&{% endif %}{% if estadocomprobante %}&estadocomprobante={{ estadocomprobante }}&{% endif %}page={{ pagenumber }}">{{ pagenumber }}</a></li>
                    {% endfor %}
                    {% if paging.ultima_pagina %}
                        <li><a href="/adm_becas?{% if search %}s={{ search }}&{% endif %}{% if btiposelect %}btipo={{ btiposelect }}&{% endif %}{% if tiposelect %}tipo={{ tiposelect }}&{% endif %}{% if estadodocumento %}&estadodocumento={{ estadodocumento }}&{% endif %}{% if estadocontrato %}&estadocontrato={{ estadocontrato }}&{% endif %}{% if estadocumplimiento %}&estadocumplimiento={{ estadocumplimiento }}&{% endif %}{% if estadocomprobante %}&estadocomprobante={{ estadocomprobante }}&{% endif %}page={{ paging.ellipsis_derecha }}" class="active">...</a></li>
                        <li><a href="/adm_becas?{% if search %}s={{ search }}&{% endif %}{% if btiposelect %}btipo={{ btiposelect }}&{% endif %}{% if tiposelect %}tipo={{ tiposelect }}&{% endif %}{% if estadodocumento %}&estadodocumento={{ estadodocumento }}&{% endif %}{% if estadocontrato %}&estadocontrato={{ estadocontrato }}&{% endif %}{% if estadocumplimiento %}&estadocumplimiento={{ estadocumplimiento }}&{% endif %}{% if estadocomprobante %}&estadocomprobante={{ estadocomprobante }}&{% endif %}page={{ paging.num_pages }}">{{ paging.num_pages }}</a></li>
                    {% endif %}
                </ul>
            </div>
        {% else %}
            <div class='pagination'>
                <ul>
                    {% for pagenumber in paging.page_range %}
                        <li {%  if pagenumber == page.number %}class='active'{% endif %}><a href="/adm_becas?{% if search %}s={{ search }}&{% endif %}{% if btiposelect %}btipo={{ btiposelect }}&{% endif %}{% if tiposelect %}tipo={{ tiposelect }}&{% endif %}{% if estadodocumento %}&estadodocumento={{ estadodocumento }}&{% endif %}{% if estadocontrato %}&estadocontrato={{ estadocontrato }}&{% endif %}{% if estadocumplimiento %}&estadocumplimiento={{ estadocumplimiento }}&{% endif %}{% if estadocomprobante %}&estadocomprobante={{ estadocomprobante }}&{% endif %}page={{ pagenumber }}">{{ pagenumber }}</a></li>
                    {% endfor %}
                </ul>
            </div>
        {% endif %}
    </div>
</div>

<div class="modal fade static" id="asignarbecamodal" style="display: none;">
    <div class="modal-header">
        <table border="0" width="100%" style="background-color: transparent">
            <tr>
                <td style="width: 80%"><h3 class="paneltitleasignarbeca">Asignar Beca</h3></td>
                <td><a href="javascript:;" id="cerrarpanelasignarbeca" class="btn btn-danger btn-mini pull-right"><i class="fa fa-remove"></i></a></td>
            </tr>
        </table>
    </div>
    <div class="modal-body panelbodyasignarbeca">
    </div>
</div>
<div class="modal fade static" id="itemspanel_generarasistencia" style="display: none;">
    <div class="modal-header">
        <h4 class="paneltitle">Generar Asistencias</h4>
    </div>
    <div class="modal-body panelbody">
        <div class="alert alert-danger invalidofechas1" style="display: none">
            <i class="fa fa-info-sign"></i> Seleccione un rango de fechas valida para continuar...!!!
        </div>
        <div style="text-align: center;">
            <label style="font-size: 12px">Procesar asistencias:

            </label>
            <br>

            <br>

        </div>
    </div>
    <div class="modal-footer" style="text-align: center">
        <a href="javascript:;" class="btn btn-danger" id="itemspanel_generarinformeasistencia"><i class="fa fa-plus"></i> Procesar</a>
        <a href="javascript:;" class="btn btn-info" id="itemspanel_cerrar_generarinformeasistencia"> Cerrar</a>
    </div>
</div>

<div class="modal fade static" id="itemspanel3" style="display: none;">
    <div class="modal-header">
        <h4 class="paneltitle">Informe de Pago Beca</h4>
    </div>
    <div class="modal-body panelbody">
        <div class="alert alert-danger invalidofechas" style="display: none">
            <i class="fa fa-info-sign"></i> Seleccione un rango de fechas valida para continuar...!!!
        </div>
        <div style="text-align: center;">
            <input placeholder="Desde" type="text" value="" name="desdepago" id="desdepago" style="width: 100px">
            <input placeholder="Hasta" type="text" value="" name="hastapago" id="hastapago" style="width: 100px"><br>
            <label style="font-size: 12px">Tipo beca:
                <select style="width: 200px" class="no-margin-bottom btipo">
                    <option value="0"> Todos </option>
                    {% for tipo in becatipo %}
                        <option  value="{{ tipo.id }}">{{ tipo.nombre }}</option>
                    {% endfor %}
                </select>
            </label>
            <br>
            <label style="font-size: 12px">Tipo:
                <select style="width: 200px" class="tipo_infor">
                    <option value="0"> Todos </option>
                    {% for tipo in tipos %}
                        <option value="{{ tipo.0 }}">{{ tipo.1 }}</option>
                    {% endfor %}
                </select>
            </label>
            <br>
            <label style="font-size: 12px">Grupo:
                <select style="width: 200px;text-align: center" class="grupo_pago">
                    <option value="0"> Todos </option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                </select>
            </label>

        </div>
    </div>
    <div class="modal-footer" style="text-align: center">
        <a href="javascript:;" class="btn btn-danger" id="itemspanel_adicionar_3"><i class="fa fa-plus"></i> Procesar</a>
        <a href="javascript:;" class="btn btn-info" id="itemspanel_cerrar_3"> Cancelar</a>
    </div>
</div>
<div class="modal fade static" id="itemspanel_asistencia" style="display: none;">
    <div class="modal-header">
        <h4 class="paneltitle">Informe de asistencia</h4>
    </div>
    <div class="modal-body panelbody">
        <div class="alert alert-danger invalidofechas1" style="display: none">
            <i class="fa fa-info-sign"></i> Seleccione un rango de fechas valida para continuar...!!!
        </div>
        <div style="text-align: center;">
            <input placeholder="Fecha desde" type="text" value="" name="id_fini" id="id_fini" style="width: 100px">
            <input placeholder="Fecha hasta" type="text" value="" name="id_ffin" id="id_ffin" style="width: 100px"><br>
            <label style="font-size: 12px">Tipo beca:
                <select style="width: 200px" class="no-margin-bottom btipoasis">
                    <option value="0"> Todos </option>
                    {% for tipo in becatipo %}
                        <option  value="{{ tipo.id }}">{{ tipo.nombre }}</option>
                    {% endfor %}
                </select>
            </label>
            <br>
            <label style="font-size: 12px">Tipo:
                <select style="width: 200px" class="tipo_asis">
                    <option value="0"> Todos </option>
                    {% for tipo in tipos %}
                        <option value="{{ tipo.0 }}">{{ tipo.1 }}</option>
                    {% endfor %}
                </select>
            </label>
            <br>
            <label style="font-size: 12px">Grupo:
                <select style="width: 200px;text-align: center" class="grupo_asis">
                    <option value="0"> Todos </option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                </select>
            </label>
        </div>
    </div>
    <div class="modal-footer" style="text-align: center">
        <a href="javascript:;" class="btn btn-danger" id="itemspanel_generarinforme"><i class="fa fa-plus"></i> Procesar</a>
        <a href="javascript:;" class="btn btn-info" id="itemspanel_cerrar_generarinforme"> Cerrar</a>
    </div>
</div>

<div class="modal fade static" id="itemspanel9" style="display: none;">
    <div class="modal-header">
        <h4 class="paneltitle">Reporte</h4>
    </div>
    <div class="modal-body panelbody">
        <div class="alert alert-danger invalidofechas" style="display: none">
            <i class="fa fa-info-sign"></i> Seleccione alguna opcion para generar...!!!
        </div>
        <div style="text-align: center;">
            <input placeholder="Fecha desde" type="text" value="{{ fechainicio }}" name="fini" id="id_fecha_inicio" style="width: 100px">
            <input placeholder="Fecha hasta" type="text" value="{{ fechafin }}" name="ffin" id="id_fecha_fin" style="width: 100px"><br><br>
            <label style="font-size: 12px">Carrera:
                <select style="width: 500px" class="no-margin-bottom carrerar">
                    <option value="0"> Todas </option>
                    {% for carrera in carreras %}
                        <option  value="{{ carrera.id }}">{{ carrera }}</option>
                    {% endfor %}
                </select>
            </label>
            <br>
            <label style="font-size: 12px">Periodo:
                <select style="width: 500px" class="periodor">
                    <option value="0"> Todos </option>
                    {% for periodo in periodosbecados %}
                        <option value="{{ periodo.id }}">{{ periodo }}</option>
                    {% endfor %}
                </select>
            </label>
            <br>
            <label style="font-size: 12px">Tipo beca:
                <select style="width: 500px" class="no-margin-bottom"  id="tipobeca9">
                    <option value="0"> Todos </option>
                    {% for tipo in becatipo %}
                        <option  value="{{ tipo.id }}">{{ tipo.nombre }}</option>
                    {% endfor %}
                </select>
            </label>
            <br>
            <label style="font-size: 12px">Tipo:
                <select style="width: 200px" id="tipobeca91">
                    <option value="0"> Todos </option>
                    {% for tipo in tipos %}
                        <option value="{{ tipo.0 }}">{{ tipo.1 }}</option>
                    {% endfor %}
                </select>
            </label>
        </div>
    </div>
    <div class="modal-footer" style="text-align: center">
        <a href="javascript:;" class="btn btn-danger" id="itemspanel_adicionar_9"><i class="fa fa-plus"></i> Procesar</a>
        <a href="javascript:;" class="btn btn-info" id="itemspanel_cerrar_9"> Cancelar</a>
    </div>
</div>


<div class="modal fade static" id="itemspanelporpartes" style="display: none;">
    <div class="modal-header">
        <h4 class="paneltitle">Informe de Pago Beca por partes</h4>
    </div>
    <div class="modal-body panelbody">
        <div class="alert alert-danger invalidofechas" style="display: none">
            <i class="fa fa-info-sign"></i> Seleccione un rango de fechas valida para continuar...!!!
        </div>
        <div style="text-align: center;">
            <label style="font-size: 12px">Tipo beca:
                <select style="width: 200px" class="no-margin-bottom btipo_porpartes">
                    <option value="0"> Todos </option>
                    {% for tipo in becatipo %}
                        <option  value="{{ tipo.id }}">{{ tipo.nombre }}</option>
                    {% endfor %}
                </select>
            </label>
            <br>
            <label style="font-size: 12px">Tipo:
                <select style="width: 200px" class="tipo_infor_porpartes">
                    <option value="0"> Todos </option>
                    {% for tipo in tipos %}
                        <option value="{{ tipo.0 }}">{{ tipo.1 }}</option>
                    {% endfor %}
                </select>
            </label>
            <br>
            <label style="font-size: 12px">Grupo:
                <select style="width: 200px;text-align: center" class="grupo_pago_porpartes">
                    <option value="0"> Todos </option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                </select>
            </label><br>
            <label style="font-size: 12px">Min Mes:
                <select style="width: 200px;text-align: center" class="min_mes">
                    <option value="0"> Todos </option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                </select>
            </label>
            <br>
            <label style="font-size: 12px">Max Mes:
                <select style="width: 200px;text-align: center" class="max_mes">
                    <option value="0"> Todos </option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                </select>
            </label>


        </div>
    </div>
    <div class="modal-footer" style="text-align: center">
        <a href="javascript:;" class="btn btn-danger" id="itemspanel_adicionar_porpartes"><i class="fa fa-plus"></i> Procesar</a>
        <a href="javascript:;" class="btn btn-info" id="itemspanel_cerrar_porpartes"> Cancelar</a>
    </div>
</div>

<div class="modal fade static" id="itemspanel_notificartodo" style="display: none;">
    <div class="modal-header">
        <h4 class="paneltitle">Notificar A Becados</h4>
    </div>
    <div class="modal-body panelbody">
        <div style="text-align: center;">
            <label style="font-size: 12px">Mensaje de notificacion:
            </label>
            <input style="width: 100%;" type='text' name="mensajenotificacion" id="mensajenotificacion" value=""/>
            <br>
            <br>
        </div>
    </div>
    <div class="modal-footer" style="text-align: center">
        <a href="javascript:;" class="btn btn-danger" id="itemspanel_notificartodos"><i class="fa fa-plus"></i> Procesar</a>
        <a href="javascript:;" class="btn btn-info" id="itemspanel_cerrar_notificartodo"> Cerrar</a>
    </div>
</div>

<div class="modal fade static" id="itemspanelvalidarcedula" style="display: none;">
    <div class="modal-header">
        <table border="0" width="100%" style="background-color: transparent">
            <tr>
                <td style="width: 80%"><h4 class="paneltitlevalidarcedula">Revisar y Validar Cédula</h4></td>
                <td><a href="javascript:;" id="cerrarpanelvalidarcedula" title="Cerrar" class="btn btn-danger btn-mini pull-right"><i class="fa fa-remove"></i></a></td>
            </tr>
        </table>
    </div>
    <div class="modal-body panelbodyvalidarcedula">
    </div>
    <div class="modal-footer" style="text-align: right">
        <a href="javascript:;" class="btn btn-success" id="itemspanelvalidarcedulaguardar"> Guardar</a>
        <a href="javascript:;" class="btn btn-danger" id="cerrarpanelvalidarcedula2"> Cerrar</a>
    </div>
</div>

<div class="modal fade static" id="itemspanelvalidarcontrato" style="display: none;">
    <div class="modal-header">
        <table border="0" width="100%" style="background-color: transparent">
            <tr>
                <td style="width: 80%"><h4 class="paneltitlevalidarcontrato">Revisar y Validar Contrato de Beca</h4></td>
                <td><a href="javascript:;" id="cerrarpanelvalidarcontrato" title="Cerrar" class="btn btn-danger btn-mini pull-right"><i class="fa fa-remove"></i></a></td>
            </tr>
        </table>
    </div>
    <div class="modal-body panelbodyvalidarcontrato">
    </div>
    <div class="modal-footer" style="text-align: right">
        <a href="javascript:;" class="btn btn-success" id="itemspanelvalidarcontratoguardar"> Guardar</a>
        <a href="javascript:;" class="btn btn-danger" id="cerrarpanelvalidarcontrato2"> Cerrar</a>
    </div>
</div>

<div class="modal fade static" id="itemspanelvalidaradquisicion" rp="" style="display: none;">
    <div class="modal-header">
        <table border="0" width="100%" style="background-color: transparent">
            <tr>
                <td style="width: 80%"><h4 class="paneltitlevalidaradquisicion">Revisar y Validar Adquisición</h4></td>
                <td><a href="javascript:;" id="cerrarpanelvalidaradquisicion" title="Cerrar" class="btn btn-danger btn-mini pull-right"><i class="fa fa-remove"></i></a></td>
            </tr>
        </table>
    </div>
    <div class="modal-body panelbodyvalidaradquisicion">
    </div>
    <div class="modal-footer" style="text-align: right">
        {#            <a href="javascript:;" class="btn btn-success" id="itemspanelvalidaradquisicionguardar"> Guardar</a>#}
        <a href="javascript:;" class="btn btn-danger" id="cerrarpanelvalidaraquisicion2"> Cerrar</a>
    </div>
</div>

<div class="modal fade static" id="itemspanelvalidarcomprobante" style="display: none;">
    <div class="modal-header">
        <table border="0" width="100%" style="background-color: transparent">
            <tr>
                <td style="width: 80%"><h4 class="paneltitlevalidarcomprobante">Revisar y Validar Comprobante</h4></td>
                <td><a href="javascript:;" id="cerrarpanelvalidarcomprobante" title="Cerrar" class="btn btn-danger btn-mini pull-right"><i class="fa fa-remove"></i></a></td>
            </tr>
        </table>
    </div>
    <div class="modal-body panelbodyvalidarcomprobante">
    </div>
    <div class="modal-footer" style="text-align: right">
        <a href="javascript:;" class="btn btn-success" id="itemspanelvalidarcomprobanteguardar"> Guardar</a>
        <a href="javascript:;" class="btn btn-danger" id="cerrarpanelvalidarcomprobante2"> Cerrar</a>
    </div>
</div>

<div class="modal fade static" id="itemspanelreportebeca" style="display: none;">
    <div class="modal-header">
        <h4 class="paneltitle"><span class="fa fa-table"></span> <span id="titulomodal"></span></h4>
    </div>
    <div class="modal-body panelbodyreportebeca">
        <div class="span1"><span style="text-align: right; display: block; width: 90px">Valida Desde:</span></div>
        <div class='span1'>
            <input type="text" class="selectorfecha" value="{{ fechaactual }}" id="id_fecha_desde" style="width: 100px;">
        </div>
        <div class="span1"><span style="text-align: right; display: block; width: 90px">Valida Hasta:</span></div>
        <div class='span1'>
            <input type="text" class="selectorfecha" value="{{ fechaactual }}" id="id_fecha_hasta" style="width: 100px; ">
        </div>
        {#            <br><br>#}
        {#            <div class="span1"><span style="text-align: right; display: block; width: 90px">Tipo de Beca:</span></div>#}
        {#            <div class='span1'>#}
        {#                <select id="tipobeca" name="tipobeca" style="width: 300px;">#}
        {#                    <option value="0">TODOS</option>#}
        {#                    {% for t in becatipo %}#}
        {#                        <option value="{{ t.id }}">{{ t.nombre|upper }}</option>#}
        {#                    {% endfor %}#}
        {#                </select>#}
        {#            </div>#}
        <br><br>
    </div>
    <div class="modal-footer">
        <table class="pull-right">
            <tr>
                <td><a href="javascript:;" class="btn btn-generar btn-success" id="generar_reporte"><i class="fa fa-print"></i> Generar</a></td>
                <td><a href="javascript:;" class="btn btn-cerrar btn-danger" id="cerrar_reporte"><i class="fa fa-close"></i> Cerrar</a></td>
            </tr>
        </table>
    </div>
</div>

<div class="modal fade static" id="itemspanelmostrarevidencias" style="display: none;">
    <div class="modal-header">
        <h4 class="paneltitle">Mostrar Evidencias de Entrega de beca</h4>
    </div>
    <div class="modal-body panelbodymostrarevidencias">
    </div>
    <div class="modal-footer">
        <table class="pull-right">
            <tr>
                <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a></td>
            </tr>
        </table>
    </div>
</div>

<div class="modal fade static" id="itemspanelsolicitudpago" style="display: none;">
    <div class="modal-header">
        <h4 class="paneltitle">Generar Solicitud de Pago de Beca</h4>
    </div>
    <div class="modal-body panelbodysolicitudpago">
    </div>
    <div class="modal-footer">
        <table class="pull-right">
            <tr>
                <td><a href="javascript:;" class="btn btn-generar btn-success">Generar</a></td>
                <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a></td>
            </tr>
        </table>
    </div>
</div>

<div class="modal fade static" id="itemspanelimprimirsolicitudpago" style="display: none;">
    <div class="modal-header">
        <h4 class="paneltitle">Reimpresión de Solicitudes de Pago de Beca</h4>
    </div>
    <div class="modal-body panelbodyimprimirsolicitudpago">
    </div>
    <div class="modal-footer">
        <table class="pull-right">
            <tr>
                <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a></td>
            </tr>
        </table>
    </div>
</div>

<div class="modal fade static" id="itemspanelsubirevidencias" style="display: none;">
    <div class="modal-header">
        <table border="0" width="100%" style="background-color: transparent">
            <tr>
                <td style="width: 80%"><h4 class="paneltitlesubirevidencias">Asignar Beca</h4></td>
                <td><a href="javascript:;" id="cerrarpanelsubirevidencias" title="Cerrar" class="btn btn-danger btn-mini pull-right"><i class="fa fa-remove"></i></a></td>
            </tr>
        </table>
    </div>
    <div class="modal-body panelbodysubirevidencias">
    </div>
</div>

<div class="modal fade static" id="itemspanelrepresentante" style="display: none;">
    <div class="modal-header">
        <table border="0" width="100%" style="background-color: transparent">
            <tr>
                <td style="width: 80%"><h4 class="paneltitlerepresentante">Actualizar Representante Solidario</h4></td>
                <td><a href="javascript:;" id="cerrarpanelrepresentante" title="Cerrar" class="btn btn-danger btn-mini pull-right"><i class="fa fa-remove"></i></a></td>
            </tr>
        </table>
    </div>
    <div class="modal-body panelbodyrepresentante">
    </div>
</div>

<div class="modal fade static" id="itemspanelfechasolicitud" style="display: none;">
    <div class="modal-header">
        <h4 class="paneltitle"><span class="fa fa-table"></span> <span id="titulomodalfechasolicitud"></span></h4>
    </div>
    <div class="modal-body panelbodyfechasolicitud">
        <div class="span1"><span style="text-align: right; display: block; width: 90px">Valida Desde:</span></div>
        <div class='span1'>
            <input type="text" class="selectorfecha" value="{{ fechaactual }}" id="id_fecha_desde_spago" style="width: 100px;">
        </div>
        <div class="span1"><span style="text-align: right; display: block; width: 90px">Valida Hasta:</span></div>
        <div class='span1'>
            <input type="text" class="selectorfecha" value="{{ fechaactual }}" id="id_fecha_hasta_spago" style="width: 100px; ">
        </div>
        <br><br>
        <div class="span1"><span style="text-align: right; display: block; width: 90px">Tipo Asignación:</span></div>
        <div class='span1'>
            <select id="tipoasignacionbeca" name="tipoasignacionbeca" style="width: 300px;">
                <option value="0">--Seleccione--</option>
                <option value="1">NUEVA</option>
                <option value="2">RENOVACIÓN</option>
            </select>
        </div>
        <br><br>
        <div class="span1"><span style="text-align: right; display: block; width: 90px">Tipo Beca:</span></div>
        <div class='span1'>
            <select id="tipobecasolpago" name="tipobecasolpago" style="width: 300px;">
                <option value="0">--Seleccione--</option>
                {% for tipo in becatipo %}
                    <option value="{{ tipo.id }}" {% if btiposelect == tipo.id %}selected="selected"{% endif %}>{{ tipo.nombrecorto|upper }}</option>
                {% endfor %}
            </select>
        </div>
        <br><br>
    </div>
    <div class="modal-footer">
        <table class="pull-right">
            <tr>
                <td><a href="javascript:;" class="btn btn-aceptar-spago btn-success" id="aceptar_fecha_spago"><i class="fa fa-search"></i> Aceptar</a></td>
                <td><a href="javascript:;" class="btn btn-cerrar btn-danger" id="cerrar_fecha_spago"><i class="fa fa-close"></i> Cerrar</a></td>
            </tr>
        </table>
    </div>
</div>

<div class="modal fade static" id="itemspanelmostrardocumento" style="display: none;">
    <div class="modal-header">
        <h4 class="paneltitle">Mostrar documentos cargados</h4>
    </div>
    <div class="modal-body panelbodymostrardocumento">
    </div>
    <div class="modal-footer">
        <table class="pull-right">
            <tr>
                <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a></td>
            </tr>
        </table>
    </div>
</div>

<div class="modal fade static" id="itemspanelanular" style="display: none;">
    <div class="modal-header">
        <table border="0" width="100%" style="background-color: transparent">
            <tr>
                <td style="width: 80%"><h4 class="paneltitleanular">Anular Beca</h4></td>
                <td><a href="javascript:;" id="cerrarpanelanular" title="Cerrar" class="btn btn-danger btn-mini pull-right"><i class="fa fa-remove"></i></a></td>
            </tr>
        </table>
    </div>
    <div class="modal-body panelbodyanular">
    </div>
</div>

<div class="modal fade static" id="itemspanelpagado" style="display: none;">
    <div class="modal-header">
        <table border="0" width="100%" style="background-color: transparent">
            <tr>
                <td style="width: 80%"><h4 class="paneltitlepagado">Anular Beca</h4></td>
                <td><a href="javascript:;" id="cerrarpanelpagado" title="Cerrar" class="btn btn-danger btn-mini pull-right"><i class="fa fa-remove"></i></a></td>
            </tr>
        </table>
    </div>
    <div class="modal-body panelbodypagado">
    </div>
</div>

<div class="modal fade static" id="itemspanelresumencupos" style="display: none;">
    <div class="modal-header">
        <h4 class="paneltitle">Resumen Cupos Asignados y Disponibles</h4>
    </div>
    <div class="modal-body panelbodyresumencupos">
    </div>
    <div class="modal-footer">
        <table class="pull-right">
            <tr>
                <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a></td>
            </tr>
        </table>
    </div>
</div>

<div class="modal fade static" id="itemspanelresumenbecas" style="display: none;">
    <div class="modal-header">
        <h4 class="paneltitle">Resumen Becas Asignadas</h4>
    </div>
    <div class="modal-body panelbodyresumenbecas">
    </div>
    <div class="modal-footer">
        <table class="pull-right">
            <tr>
                <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a></td>
            </tr>
        </table>
    </div>
</div>

<div class="modal fade static" id="itemspanelhistorial" style="display: none;">
    <div class="modal-header">
        <h4 class="paneltitle" id="titulohistorial">Historial de Becas Asignadas</h4>
    </div>
    <div class="modal-body panelbodyhistorial">
        <div class="row-fluid">
            <div class="span12">
                <form class="form-search">
                    <fieldset class="control-group nomargins">
                        <label class="control-label">Ingrese Cédula o Apellidos del Estudiante</label>
                        <div class="controls">
                            <input class="input-block-level" type='text' id="alumnocedulanombre" value="" autocomplete="off">
                        </div>
                    </fieldset>
                </form>
            </div>
        </div>
        <div class="row-fluid">
            <div class="span12" id="segmentohistorial">
                SEGMENTO HISTORIAL
            </div>
        </div>

    </div>
    <div class="modal-footer">
        <table class="pull-right">
            <tr>
                <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a></td>
            </tr>
        </table>
    </div>
</div>

<div class="modal static" id="cerrarpanel" style="display: none;">
    <div class="modal-header">
        <h4 id="cerrarpanelpaneltitle">Cerrando el Nivel</h4>
    </div>
    <div class="modal-body" id="cerrarpanelpanelbody">
        <div class="progress progress-success progress-striped active">
            <div class="bar" style="width: 0;" id="progressbar"></div>
        </div>
        <div id="cerrarpanelprogresshint">
        </div>
    </div>
</div>

<div class="modal fade static" id="itemspanelmostrarcomprobante" style="display: none;">
    <div class="modal-header">
        <h4 class="paneltitle">Mostrar Comprobantes cargados</h4>
    </div>
    <div class="modal-body panelbodymostrarcomprobante">
    </div>
    <div class="modal-footer">
        <table class="pull-right">
            <tr>
                <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a></td>
            </tr>
        </table>
    </div>
</div>

<div class="modal fade static" id="itemspaneleditarcomprobante" style="display: none;">
    <div class="modal-header">
        <table border="0" width="100%" style="background-color: transparent;">
            <tr>
                <td style="width: 80%"><h4 class="paneltitleeditcomprobante">Editar Revista</h4></td>
            </tr>
        </table>
    </div>
    <form id="formulario1" style="width: 100%; margin-bottom: 0px;padding-left: 15px;padding-top: 10px; padding-right: 15px; padding-bottom: 0px">
        <input type='hidden' name='action' value='validarcumplimiento'/>
        <input type='hidden' id="idcomprobante" name='idcomprobante' value=''/>
        <input type='hidden' id="tvalida" name='tvalida' value=''/>
        <div class="row-fluid panelbodyeditarcomprobante">
        </div>
    </form>
    <div class="modal-footer">
        <td id="aprobarcerrar2"><a href="javascript:;" idb="" tv="" class="btn btn-success actualizarcomprobante"> Guardar</a></td>
        <a href="javascript:;" class="btn btn-danger cerrareditcomprobante">Cerrar</a>
    </div>
</div>

<div class="modal fade static" id="itemspaneleliminarcomprobante" style="display: none;">
    <div class="modal-header">
        <table border="0" width="100%" style="background-color: transparent;">
            <tr>
                <td style="width: 80%"><h4 class="paneltitleeliminarcomprobante">Editar Revista</h4></td>
            </tr>
        </table>
    </div>
    <form id="formulario2" style="width: 100%; margin-bottom: 0px;padding-left: 15px;padding-top: 10px; padding-right: 15px; padding-bottom: 0px">
        <input type='hidden' name='action' value='delcomprobante'/>
        <input type='hidden' id="idcomprobanteeli" name='idcomprobanteeli' value=''/>
        <div class="row-fluid panelbodyeliminarcomprobante">
        </div>
    </form>
    <div class="modal-footer">
        <td id="aprobarcerrar2"><a href="javascript:;" idb="" tv="" class="btn btn-danger eliminarcomprobante"> Eliminar</a></td>
        <a href="javascript:;" class="btn btn-info cerrareliminarcomprobante">Cerrar</a>
    </div>
</div>

<div class="modal fade static" id="itemspanelrecorrido" style="display: none;">
    <div class="modal-header">
        <h4 class="paneltitlerecorrido">Mostrar Recorrido de la Beca</h4>
    </div>
    <div class="modal-body panelbodyrecorrido">
    </div>
    <div class="modal-footer">
        <table class="pull-right">
            <tr>
                <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a></td>
            </tr>
        </table>
    </div>
</div>

<div class="modal fade static" data-keyboard="false" id="itemspanelreportepagosbecas" style="display: none;">
    <div class="modal-header">
        <h4 class="paneltitlereportepagosbecas">Reporte Pagos de Becas</h4>
    </div>
    <div class="modal-body panelbody">
        <div class=ow-fluid">
            <form id="formReportePagosBecas" style="width: 100%; margin-bottom: 0px;padding-left: 0px;padding-top: 0px; padding-right: 0px; padding-bottom: 0px">
                <table class="table table-bordered" id="reporte_pagos_becas" >
                    <tbody>
                    <tr>
                        <td style="width: 20%;">Periodo:</td>
                        <td colspan="3">{{ periodo.nombre }}</td>
                    </tr>
                    <tr>
                        <td style="width: 20%;">Tipo de Reporte:<input type="hidden" id="tiporeppago" name="tiporeppago" value=""> </td>
                        <td style="width: 30%;">
                            <select id="tiporeportepago" name="tiporeportepago" style="width: 95%">
                                <option value="0" selected>---------</option>
                                <option value="1">SOLICITUDES DE PAGO</option>
                                <option value="2">BECAS PAGADAS</option>
                                <option value="3">BECAS ACREDITADAS</option>
                            </select>
                        </td>
                        <td style="width: 20%;">Estado:</td>
                        <td style="width: 30%;">
                            <select id="estadoreportepago" name="estadoreportepago" style="width: 95%">
                                <option value="0" selected>---------</option>
                            </select>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </form>
        </div>
    </div>
    <div class="modal-footer">
        <a href="javascript:;" class="btn btn-procesar btn-success"><i class="fa fa-check"></i> Procesar</a>
        <a href="javascript:;" class="btn btn-cerrar btn-info"><i class="fa fa-close"></i> Cerrar</a>
    </div>
</div>

<div class="modal fade" id="modalValidacionDocumentosMasivo">
    <div class="modal-dialog modal-dialog-scrollable modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title"><b id="nombre"></b></h4>
            </div>
            <div class="modal-body">
            </div>
            <div class="modal-footer">
                <a href="javascript:;" class="btn btn-success action-save">
                    <i class="fa fa-save"></i> Guardar
                </a>
                <a href="javascript:;" class="btn btn-danger action-close">
                    <i class="fa fa-window-close"></i> Cancelar
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
