{% extends 'base.html' %}
{% load sga_extras %}
{% block atras %}/{% endblock %}
{% block heading %}
    <link rel="stylesheet" href="/static/css/bloques.css">

    <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css"/>


    <style type="text/css">
        .stop-scrolling {
            height: 100%;
            overflow: hidden;
        }

        .tab-content {
            overflow: inherit;
        }

        .table tbody td {
            vertical-align: middle !important;
        }

        .table thead th {
            text-align: center !important;
            vertical-align: middle !important;
        }

        .sidenav.navbar .nav-item.active a {
            color: black!important;
            transition: transform 0.2s ease;
        }

        .sidenav.navbar .navbar-nav .nav-item.active {
            color: #ffffff !important;
        }

        .sidenav.navbar .navbar-nav .nav-item.active a:hover {
            color: #ffffff !important;
            transform: scale(1.1);
            background-color: #fc9b09!important
        }
        .text-info {
            color: #3a87ad!important;
        }
    </style>
    <script>

        let locales_me = {
            "format": "YYYY-MM-DD",
            "separator": " - ",
            "applyLabel": "Guardar",
            "cancelLabel": "Cancelar",
            "fromLabel": "Desde",
            "toLabel": "Hasta",
            "customRangeLabel": "Personalizado",
            "daysOfWeek": [
                "Do",
                "Lu",
                "Ma",
                "Mi",
                "Ju",
                "Vi",
                "Sa"
            ],
            "monthNames": [
                "Enero",
                "Febrero",
                "Marzo",
                "Abril",
                "Mayo",
                "Junio",
                "Julio",
                "Agosto",
                "Setiembre",
                "Octubre",
                "Noviembre",
                "Diciembre"
            ],
            "firstDay": 1
        }
        var id_mat = {{ firstmat.id }}
            $(function () {

                $("select").select2({minimumResultsForSearch: 20});

                $('input[name="daterange"]').daterangepicker({
                    opens: 'left',
                    locale: locales_me

                }, function (start, end, label) {
                    console.log("A new date selection was made: " + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD'));
                });

                var start = moment("{{ desde|date:"d-m-Y" }}", "DD-MM-YYYY");
                var end = moment("{{ hasta|date:"d-m-Y" }}", "DD-MM-YYYY");

                function cb(start, end) {
                    $('#reportrange span').html(start.format('MMMM D, YYYY') + ' - ' + end.format('MMMM D, YYYY'));
                }


                $('#reportrange').daterangepicker({
                    startDate: start,
                    endDate: end,
                    ranges: {
                        'Mes actual': [moment().startOf('month'), moment().endOf('month')],
                        'Mes Anterior': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month'),]
                    },
                    locale: locales_me,
                }, cb).on('apply.daterangepicker', function (ev, picker) {
                    extraerseguimientos(picker.startDate.format('YYYY-M-D'), picker.endDate.format('YYYY-M-D'))
                });

                cb(start, end);

                function extraerseguimientos(inicio, fin) {
                    bloqueointerface();
                    location.href = `/pro_tutoria?desde=${inicio}&hasta=${fin}`;
                    return false;
                }

                {#$("#id_fecha_desde,#id_fecha_hasta,#id_fini, #id_finiadm, #id_ffin, #id_ffinadm, #id_fini_seguimiento, #id_ffin_seguimiento,#id_fini_seguimiento_general, #id_ffin_seguimiento_general,#id_fini_seguimiento_general_new, #id_ffin_seguimiento_general_new,#id_fini_virtual, #id_ffin_virtual, #id_fini_autor, #id_ffin_autor").datepicker({format:"dd-mm-yyyy"}).on('changeDate', function(ev){ $(this).datepicker('hide'); });#}
                $("#id_estadosolicitudmimateria, #id_estadosolicitud, #tipos").select2();
                var tabcomplexivo = localStorage.getItem('tabcomplexivo');
                if (!tabcomplexivo) {
                    tabcomplexivo = "#segumiento";
                    localStorage.setItem("tabcomplexivo", tabcomplexivo);
                }
                $('.nav-link').each(function () {
                    if ($(this).attr('href') === tabcomplexivo) {
                        $(this).tab('show');
                    }
                }).click(function () {
                    localStorage.setItem("tabcomplexivo", $(this).attr('href'));
                });
                $("#id_estadosolicitud").change(function () {
                    busqueda();
                });

                $("#id_estadosolicitudmimateria").change(function () {
                    busqueda();
                });
                busqueda = function () {
                    {% if not periodo.tipo_id in tiponomostrar %}
                        var e = $("#id_estadosolicitud").val();
                    {% else %}
                        e = 1
                    {% endif %}
                    var e1 = $("#id_estadosolicitudmimateria").val();
                    bloqueointerface();
                    location.href = "/pro_tutoria?estado=" + e + "&estadosolicitudmimateria=" + e1;
                    return false;
                };


                $(".verestudiante").click(function () {
                    var id = $(this).attr('id');
                    $.post("/pro_tutoria", {'action': 'verestudiante', 'id': id}, function (data) {
                        if (data.result === 'ok') {
                            $.unblockUI();
                            $(".panelbody").html(data.data);
                            $("#divmostrartarea").modal({backdrop: 'static', width: '1000px'}).modal('show');
                        }
                    }, 'json');
                });
                $(".cerrartarea").click(function () {
                    $("#divmostrartarea").modal("hide");
                });

                $(".verobservaciones").click(function () {
                    var id = $(this).attr('id');
                    $.post("/pro_tutoria", {'action': 'verobservaciones', 'id': id}, function (data) {
                        if (data.result == 'ok') {
                            $.unblockUI();
                            $(".panelbody1").html(data.data);
                            $("#divmostrartarea1").modal({backdrop: 'static', width: '1000px'}).modal('show');
                        }
                    }, 'json');
                });
                $(".cerrartarea1").click(function () {
                    $("#divmostrartarea1").modal("hide");
                });

                $(".generar_seguimientovirtual").click(function () {
                    var codiprofe = $(this).attr('codiprofe');
                    var nommate = $(this).attr('nommate');
                    $(".incompletogenerar_seguimientovirtual").hide();
                    $("#idmateria_virtual").val("");
                    $("#idmateria_virtual").val(codiprofe);
                    $("#id_nommateria").html(nommate);
                    $("#itemspanel_generar_seguimientovirtual").modal({backdrop: 'static', width: '500px'}).modal('show');
                });
                $("#cancel_seguimiento_virtual").click(function () {
                    $('#itemspanel_generar_seguimientovirtual').modal('hide');
                    $(".incompletogenerar_seguimientovirtual").hide();
                });
                $(".generar_seguimiento_virtual").click(function () {
                    $(".incompletogenerar_seguimientovirtual").hide();
                    var fini = $("#id_fini_virtual").val();
                    var ffin = $("#id_ffin_virtual").val();
                    var idmateria = $("#idmateria_virtual").val();
                    if (fini.length != 0 && ffin.length != 0) {
                        openwindow('POST', '/pro_tutoria', {
                            'action': 'informe_seguimiento_virtual',
                            'fini': fini,
                            'ffin': ffin,
                            'idprofe': idmateria
                        }, '_blank');
                    } else {
                        $(".incompletogenerar_seguimientovirtual").show();
                        return false;
                    }
                });


                $(".verobservacionesmimateria").click(function () {
                    var id = $(this).attr('id');
                    $.post("/pro_tutoria", {'action': 'verobservacionesmimateria', 'id': id}, function (data) {
                        if (data.result == 'ok') {
                            $.unblockUI();
                            $(".panelbody1").html(data.data);
                            $("#divmostrartarea1").modal({backdrop: 'static', width: '1000px'}).modal('show');
                        }
                    }, 'json');
                });

                $('#guardar_respuesta').on('click', function (e) {
                    e.preventDefault();
                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: "/pro_tutoria",
                        data: new FormData($("#form_respuesta")[0]),
                        success: function (data) {
                            if (data.result === 'ok') {
                                NotificationJG.success(data.mensaje);
                                window.location.reload();
                            } else {
                                $.unblockUI();
                                NotificationJG.error(data.mensaje);
                            }
                        },
                        dataType: "json",
                        cache: false,
                        contentType: false,
                        processData: false
                    });

                });

                $('#tipos').on('change', function () {
                    bloqueointerface();
                    let tipo = $(this).val()
                    location.href = "/pro_tutoria?tipopro=" + tipo;
                });

                $('#btnGroupDrop1').click(function () {
                    $('#modalreporte').modal('show');
                })

                $('#btnresumentutor').click(function () {
                    var rfechas_ = $('#id_fechasinforme').val();
                    var profesores_ = $('#id_profes').val();
                    var string = profesores_.join(', ');
                    window.open('{{ request.path }}?action=informe_pdf_seguimiento&rfechas='+rfechas_+'&profesores='+string)
                });


                $(".generar_seguimiento_tutor").click(function () {
                    var idma = $(this).attr('idma');
                    $(".incompletoseguimiento_general_tutor").hide();
                    $("#codmateria").val(idma);
                    $("#itemspanel_generar_seguimiento_tutor").modal({backdrop: 'static', width: '300px'}).modal('show');
                });
                $("#cancel_seguimiento_general_tutor").click(function(){
                    $('#itemspanel_generar_seguimiento_tutor').modal('hide');
                    $(".incompletoseguimiento_general_tutor").hide();
                });

                $(".generar_seguimiento_general_tutor").click(function () {
                    $(".incompletoseguimiento_general_tutor").hide();
                    var fini = $("#id_fini_seguimiento_general_tutor").val();
                    var ffin = $("#id_ffin_seguimiento_general_tutor").val();
                    var idmateria = $("#codmateria").val();
                    if( fini.length!=0 && ffin.length!=0 ){
                        bloqueointerface();
                        $.ajax({
                            type: "POST",
                            url: "/pro_tutoria",
                            data: {'action': 'ingresarseguimientoposgrado', 'id': idmateria, 'fini': fini, 'ffin': ffin},
                            success: function(data) {
                                if (data.result=='ok') {
                                    location.reload();
                                } else {
                                    $.unblockUI();
                                    smoke.alert(data.mensaje);
                                }
                            },
                            error: function() {
                                $.unblockUI();
                                smoke.alert("Error al verificar la clave.");
                            },
                            dataType: "json"
                        });
                    }else{
                        $(".incompletoseguimiento_general_tutor").show();
                        return false;
                    }
                });

                $(".calculaseguimientoposgrado").click(function(){
                var codseguimiento = $(this).attr("codseguimiento");

                Swal.fire({
                    html: `<b>¿Está seguro de  recalcular seguimiento?</b>`,
                    text: "Esta acción es irreversible",
                    type: 'info',
                    showCancelButton: true,
                    allowOutsideClick: false,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'Si, deseo hacerlo',
                    cancelButtonText: 'Cancelar'
                }).then((result) => {
                    if (result.value) {
                        bloqueointerface();
                        $.ajax({
                            type: "POST",
                            url: "/pro_tutoria",
                            data: {'action': 'calcularseguimientoposgrado','codseguimiento':codseguimiento },
                            error: function () {
                                $.unblockUI();
                                smoke.alert("Error al obtener los datos.");
                            },
                            success: function (data) {
                                if (data.result == "ok") {
                                    location.reload();
                                } else {
                                    $.unblockUI();
                                    smoke.alert(data.mensaje);
                                }
                            }
                        });
                    }
                });


            });
            });

        function formMo(id, periodo, text, action, dimension, footer = true) {
            bloqueointerface()
            $('#footermodal').show();
            $.ajax({
                type: "GET",
                url: `{{ request.path }}`,
                data: {
                    'action': action,
                    'id': id,
                    'periodo':periodo,
                    'desde': '{{ desde|date:'Y-m-d' }}',
                    'hasta': '{{ hasta|date:'Y-m-d' }}'
                },
                success: function (data) {
                    $.unblockUI();
                    if (dimension){
                        $("#w-modal").removeClass('modal-lg modal-xl modal-md modal-sm').addClass(dimension)
                    }
                    if (data.result === true) {
                        if (footer === true) {
                            $('#footermodal').hide();
                        }
                        $('#itemspanel .panelbody').html(data.data);
                        $('#itemspanel .paneltitle').html(text);
                        $("#itemspanel").modal({backdrop: 'static', width: '900'}).modal('show');
                    } else {
                        mensajeDanger(data.mensaje);
                    }
                },
                error: function () {
                    $.unblockUI();
                    mensajeDanger("Error de conexión.");
                },
                dataType: "json"
            });
        }

    </script>
{% endblock %}
{% block canvas %}
    <div class='row'>
        <div class='col-lg-12'>
            <div class="headtitle">
                <h3 class="texto-blue">{{ title }}</h3>
                <h6>Seguimiento académico</h6>
            </div>
        </div>
    </div>
    {% if periodo.id < 119 %}
        <div class='row'>
            <div class='col-lg-12'>
                <a class="btn btn-success generar_seguimientovirtual" href="javascript:;"
                   nommate="{{ profesor.persona.nombre_completo_minus }}" codiprofe="{{ profesor.id|encrypt }}"><span
                        class="fa fa-print"></span> Reporte anexo cumplimiento actividades</a>
            </div>
        </div>
    {% endif %}
    <div>
        <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
            <li class="nav-item">
                <a class="nav-link segumiento" id="segumiento-tab" data-bs-toggle="pill" href="#segumiento" role="tab"
                   aria-controls="segumiento" aria-selected="true"><i class="fa fa-align-justify"></i> Seguimiento
                    académico</a>
            </li>
            {% if periodo.id < 119 %}
                {% if not periodo.tipo_id in tiponomostrar %}
                    <li class="nav-item">
                        <a class="nav-link" id="pills-profile-tab" data-bs-toggle="pill" href="#pills-profile"
                           role="tab"
                           aria-controls="pills-profile" aria-selected="false"><i class="fa fa-align-justify"></i>
                            ACOMPA&NtildeAMIENTO Y SOPORTE </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="pills-profile2-tab" data-bs-toggle="pill" href="#pills-profile2"
                           role="tab"
                           aria-controls="pills-profile2" aria-selected="false"><i class="fa fa-align-justify"></i>
                            SOLICITUDES ({{ numero_solicitudes }})</a>
                    </li>
                {% endif %}
            {% endif %}
            <li class="nav-item">
                <a class="nav-link" id="pills-contact-tab" data-bs-toggle="pill" href="#pills-contact" role="tab"
                   aria-controls="pills-contact" aria-selected="false"><i class="fa fa-comment"></i> Solicitudes de mis asignaturas </a>
            </li>


            {#            <li class="nav-item">#}
            {#                <a class="nav-link" id="pills-contact-tab" data-bs-toggle="pill" href="#pills-contact" role="tab"#}
            {#                   aria-controls="pills-contact" aria-selected="false"><i class="fa fa-comment"></i> Solicitudes de mis asignaturas ({{ num_sol_mimateria_1 }}) </a></a>#}
            {#            </li>#}

            {% with autor_puede_ver_seguimento=profesor|args:periodo|call:'autor_puede_ver_seguimentos' %}
                {% if autor_puede_ver_seguimento %}
                    <li class="nav-item">
                        <a class="nav-link" id="pills-seguimiento-tab" data-bs-toggle="pill" href="#pills-seguimiento"
                           role="tab"
                           aria-controls="pills-seguimiento-tab" aria-selected="false"><i class="fa fa-users"></i>
                            &nbsp;Lista de seguimientos tutores ({{ profesores|length }})</a>

                    </li>

                    <button id="btnGroupDrop1" type="button" class="btn btn-default dropdown-toggle"
                            data-bs-toggle="dropdown" aria-expanded="false"><span
                            class="fa fa-list-alt "></span> Reporte <i class="fa fa-angle-down"></i>
                    </button>
                {% endif %}
            {% endwith %}


        </ul>
        <div class="tab-content" id="pills-tabContent">
            <div class="tab-pane fade show active" id="segumiento" role="tabpanel" aria-labelledby="segumiento-tab">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-3">
                            <nav class="navbar navbar-expand-md navbar-light shadow-sm mb-4 mb-lg-0 sidenav mt-2">
                                <a class="d-xl-none d-lg-none d-md-none text-inherit fw-bold" href="#">Menu</a>
                                <button class="navbar-toggler d-md-none icon-shape icon-sm rounded bg-primary text-light"
                                        type="button" data-bs-toggle="collapse" data-bs-target="#sidenav"
                                        aria-controls="sidenav" aria-expanded="false">
                                    <span class="fa fa-list"></span>
                                </button>
                                <div class="navbar-collapse" id="sidenav" style="margin-top: 0;">
                                    <div class="navbar-nav flex-column">
                                        <ul class="nav list-unstyled ms-n2 mb-4" id="menuPanel" role="tablist" style="">
                                            <li class="navbar-header mt-0" style="font-size: 13px;">
                                                <span><i class="fa fa-info-circle"></i> Asignaturas del distributivo</span>
                                            </li>
                                            {% for materia in materiasprofesor %}
                                                <li class="nav-item {% if forloop.first %}active{% endif %}">
                                                    <a id="tabActividad{{ materia.id }}-tab" data-bs-toggle="pill"
                                                       aria-selected="false"
                                                       href="#tabActividad{{ materia.id }}" role="tab"
                                                       aria-controls="tabActividad{{ materia.id }}" idmat="{{ materia.id }}" class="nav-link nav_materia" style="font-size: 13px; line-height: 1.4;">
                                                        <i class="fa fa-tag"></i> {{ materia.nombre_mostrar_sin_profesor }}
                                                        {% with profesormateria=materia|args:profesor|call:"profesormateriastodos" %}
                                                            {% for promateria in  profesormateria %}
                                                                {% if promateria.tipoprofesor_id == 16 %}
                                                                    <br><strong class="text-info">Asignatura Transversal</strong>
                                                                {% endif %}
                                                                <br><strong>{{ promateria.tipoprofesor|lower|capfirst }}</strong>
                                                            {% endfor %}
                                                        {% endwith %}
                                                    </a>
                                                </li>
                                                {% empty %}
                                                <li class="nav-item">
                                                    <a id="tabActividad0-tab" data-bs-toggle="pill"
                                                       aria-selected="false"
                                                       href="#tabActividad0" role="tab"
                                                       aria-controls="tabActividad0" class="nav-link">
                                                        <i class="fa fa-tag"></i> No cuenta con asignaturas
                                                    </a>
                                                </li>
                                            {% endfor %}
                                        </ul>
                                    </div>
                                </div>
                            </nav>
                            <script>
                                $(function () {
                                    $('.nav-item').on('click', function () {
                                        window.scrollTo(0, 0);
                                        $('.nav-item').removeClass('active')
                                        $(this).addClass('active')
                                        if ($(this).children().hasClass('nav_materia')){
                                            id_mat = $(this).children().attr('idmat');
                                        }
                                        if ($(this).children().hasClass('segumiento')){
                                            if(id_mat == null) return false;
                                            $('#tabActividad' + id_mat + '-tab').parent().addClass('active')
                                        }
                                    });
                                })
                            </script>
                        </div>
                        <div class="col-lg-9">
                            <div class="tab-content" id="tabPanelMenu">
                                {% for materia in materiasprofesor %}
                                    <div class="tab-pane fade {% if forloop.first %}show active bg-light rounded-3{% endif %}"
                                         id="tabActividad{{ materia.id }}" role="tabpanel"
                                         aria-labelledby="tabActividad{{ materia.id }}-tab">
                                        <div class="card mb-2">
                                            <div class="card-header border-top border-6 rounded-3 border-dark-info">
                                                <div class="row">
                                                    <div class="col-sm-11">
                                                        <h4>Lista de seguimientos realizados</h4>
                                                        <h6 style="margin-left: 6px; margin-bottom: 1px; color: #7C7C7C;">{{ materia.nombre_mostrar_sin_profesor }}</h6>
                                                    </div>
                                                    <div class="col-sm-1">
                                                        <div class="btn-group mt-3" style="float: right!important;">
                                                            <button class="btn btn-sm dropdown-toggle"
                                                                    type="button" data-bs-toggle="dropdown"
                                                                    aria-expanded="false"><i class="fa fa-cogs"></i>
                                                                Acciones
                                                            </button>
                                                            <ul class="dropdown-menu">
                                                                {% if materia.inicio < fechaactual %}
                                                                    {% if not materia.asignaturamalla.malla.carrera.mi_coordinacion2 == 7 %}
                                                                        <li><a class="dropdown-item"
                                                                               href="/pro_tutoria?action=ingresarseguimiento&id={{ materia.id|encrypt }}"><i
                                                                                class="fa fa-plus"></i>&nbsp;Realizar
                                                                            seguimiento </a></li>
                                                                        <li>
                                                                            <a class="dropdown-item"
                                                                               href="/pro_tutoria?action=enviarcorreomasivo&id={{ materia.id|encrypt }}"><span
                                                                                    class="fa fa-mail-reply-all"></span>&nbsp;Enviar
                                                                                correos masivos
                                                                            </a>
                                                                        </li>
                                                                    {% else %}
                                                                        <li>
                                                                            <a href="javascript:;" class="dropdown-item generar_seguimiento_tutor" idma="{{ materia.id|encrypt }}"><span class="fa fa-plus"></span> Generar seguimiento (corte por fechas) </a>
                                                                        </li>
                                                                    {% endif %}
                                                                {% endif %}
                                                                <li>
                                                                    <a class="dropdown-item"
                                                                       href='/pro_tutoria?action=veralumnos&id={{ materia.id|encrypt }}'><span
                                                                            class="fa fa-eye"></span>&nbsp;Ver alumnos
                                                                        de la asignatura
                                                                    </a>
                                                                </li>
                                                                <li>
                                                                    <a class="dropdown-item"
                                                                       href="/pro_tutoria?action=descargaracompanamiento&id={{ materia.id|encrypt }}"><i
                                                                            class="fa fa-file-excel-o fa-lg"></i>&nbsp;Descargar
                                                                        alumnos excel
                                                                    </a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-lg-6">
                                                        <div class="card" style="width: 100%;">
                                                            <div class="card-body">
                                                                <h4 class="card-title"><i class="fa fa-book"></i> Datos de la materia</h4>
                                                                <p class="card-text"><b>Inicio:</b> {{ materia.inicio }} &nbsp;&nbsp;<b>Fin:</b> {{ materia.fin }}</p>
                                                                <p class="card-text"><b>Horas totales de la materia:</b> {{ materia.horas }}.</p>
                                                                <p class="card-text"><b>Créditos:</b> {{ materia.creditos }}</p>
                                                                <p class="card-text"><b>Aula:</b>
                                                                    {% for aula in materia.aulas %}
                                                                        {{ aula.nombre|lower|capfirst }}
                                                                    {% endfor %}
                                                                </p>
                                                                {#                                                        <a href="#" class="card-link">Card link</a>#}
                                                                {#                                                        <a href="#" class="card-link">Another link</a>#}
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-6">
                                                        <div class="card" style="width: 100%;">
                                                            <div class="card-body">
                                                                <h4 class="card-title"><i class="fa fa-calendar"></i> Horario</h4>
                                                                {% if periodo.visiblehorario %}
                                                                    {% for clase in materia.horarios_sin_practica %}
                                                                        <span class="smaller"><li>{{ clase.dia_semana|lower|capfirst }} - ({{ clase.turno.comienza }} a {{ clase.turno.termina }}) del {{ clase.inicio|date:'d-m-Y' }} al {{ clase.fin|date:'d-m-Y' }}</li></span>
                                                                        {% empty %}
                                                                        <span class="smaller"><li>Horario no disponible</li></span>
                                                                    {% endfor %}
                                                                {% else %}
                                                                    <span class="smaller"><li>Horario no disponible</li></span>
                                                                {% endif %}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">

                                                </div>
                                            </div>
                                            <div class="card-body ">
                                                <div class="card mb-4">
                                                    <div class="card-body border-top border-6 rounded-3 border-dark-info">
                                                        <div class="table-responsive-xxl">

                                                            <table class='table table-bordered table-striped'>
                                                                <thead class="table-light">
                                                                <tr>
                                                                    <th rowspan="2"
                                                                        style="width: 50px;text-align: center">N.
                                                                    </th>
                                                                    <th rowspan="2"
                                                                        style="width: 120px; text-align: center">Rango
                                                                        de consulta
                                                                    </th>
                                                                    <th colspan="3" style="text-align: center">Resumen
                                                                        de estudiantes por semáforo
                                                                    </th>
                                                                    <th rowspan="2"
                                                                        style="width: 120px; text-align: center">Total
                                                                        de acciones realizadas
                                                                    </th>
                                                                    <th rowspan="2"
                                                                        style="width: 70px; text-align: center"><i
                                                                            class="fa fa-cog"></i></th>
                                                                </tr>
                                                                <tr>
                                                                    <th style="width: 100px; text-align: center">Verde
                                                                    </th>
                                                                    <th style="width: 100px; text-align: center">
                                                                        Amarillo
                                                                    </th>
                                                                    <th style="width: 100px; text-align: center">Rojo
                                                                    </th>
                                                                </tr>
                                                                </thead>
                                                                <tbody>
                                                                {% with seguimientos=materia.get_seguimientos_acompanamiento %}
                                                                    {% for seguimiento in seguimientos %}
                                                                        <tr>
                                                                            <td style="text-align: center;">{{ forloop.counter }}</td>
                                                                            <td style="text-align: center">
                                                                                {{ seguimiento.fechainicio|date:'Y-m-d' }}
                                                                                - {{ seguimiento.fechafin|date:'Y-m-d' }}<br>
                                                                                {% if seguimiento.fecha_modificacion %}
                                                                                    <span class="label label-default">Ultima Actualización: {{ seguimiento.fecha_modificacion|date:'Y-m-d H:i:s' }}</span>
                                                                                {% endif %}
                                                                            </td>
                                                                            <td style="text-align: center">{{ seguimiento.verde }}</td>
                                                                            <td style="text-align: center">{{ seguimiento.amarillo }}</td>
                                                                            <td style="text-align: center">{{ seguimiento.rojo }}</td>
                                                                            <td style="text-align: center">{{ seguimiento.total_acciones }}</td>
                                                                            <td class="text-center" data-title='Acciones'>
                                                                                <div class="dropdown dropstart">
                                                                                    <a href="javascript:void(0);"
                                                                                       class="btn-icon btn btn-ghost btn-sm rounded-circle"
                                                                                       data-bs-toggle="dropdown"
                                                                                       data-offset="-140"
                                                                                       aria-haspopup="true"
                                                                                       aria-expanded="false">
                                                                                        <i class="fa fa-ellipsis-v fs-6"
                                                                                           aria-hidden="true"></i>
                                                                                    </a>
                                                                                    <ul class="dropdown-menu">
                                                                                        <li class="dropdown-item"><a
                                                                                                class="tu bloqueo_pantalla"
                                                                                                href="/pro_tutoria?action=visualizarseguimientodetalle&id={{ seguimiento.id|encrypt }}"><span
                                                                                                class="fa fa-eye"></span>&nbsp;
                                                                                            Ver seguimiento realizado </a>
                                                                                        </li>
                                                                                        {% if materia.asignaturamalla.malla.carrera.mi_coordinacion2 == 7 %}
                                                                                            <li class="dropdown-item"><a
                                                                                                    class="calculaseguimientoposgrado"
                                                                                                    href="javascript:;"
                                                                                                    codseguimiento="{{ seguimiento.id|encrypt }}"><span
                                                                                                    class="fa fa-calculator"></span>&nbsp;Recalcular
                                                                                                seguimiento
                                                                                                posgrado
                                                                                            </a></li>
                                                                                            <li class="dropdown-item"><a
                                                                                                    class="tu eliminacionmodal"
                                                                                                    href="javascript:;"
                                                                                                    nhref="/pro_tutoria?action=eliminarseguimiento&id={{ seguimiento.id|encrypt }}"><span
                                                                                                    class="fa fa-remove"></span>&nbsp;
                                                                                                Eliminar seguimiento </a>
                                                                                            </li>

                                                                                        {% else %}
                                                                                            <li class="dropdown-item"><a
                                                                                                    class="tu confirmacionmodal"
                                                                                                    href="javascript:;"
                                                                                                    nhref="/pro_tutoria?action=calcularseguimiento&id={{ seguimiento.id|encrypt }}"><i
                                                                                                    class="fa fa-calculator"></i>&nbsp;
                                                                                                Recalcular seguimiento
                                                                                            </a></li>
                                                                                                {% if seguimiento.total_acciones == 0 %}
                                                                                                    <li class="dropdown-item">
                                                                                                        <a class="tu eliminacionmodal"
                                                                                                           href="javascript:;"
                                                                                                           nhref="/pro_tutoria?action=eliminarseguimiento&id={{ seguimiento.id|encrypt }}"><span
                                                                                                                class="fa fa-remove"></span>&nbsp;
                                                                                                            Eliminar
                                                                                                            seguimiento </a>
                                                                                                    </li>
                                                                                                {% endif %}
                                                                                        {% endif %}
                                                                                    </ul>
                                                                                </div>
                                                                            </td>
                                                                        </tr>
                                                                        {% empty %}
                                                                        <tr><td colspan="7" style="text-align: center">No registra ningún seguimiento realizado</td></tr>
                                                                    {% endfor %}
                                                                {% endwith %}
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                    {% empty %}
                                    <h1>no materias</h1>
                                {% endfor %}
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            {% if not periodo.tipo_id in tiponomostrar %}
                <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">

                    <div class="container-fluid">
                        <span class="label label-info">Número Estudiantes Asignados: {{ numeros_estudiantes }}</span>
                        <br>
                        <br>
                        <div class="card mb-4">
                            <div class="card-body border-top border-6 rounded-3 border-dark-info">
                                <div class="table-responsive-xxl">
                                    <table class='table table-bordered table-striped'>
                                        <thead class="table-light">
                                        <tr>
                                            <th class="text-center" colspan="3">CARRERAS ASIGNADAS</th>
                                        </tr>
                                        <tr>
                                            <th class="text-center" style="text-align: center">Carrera</th>
                                            <th class="text-center" style="width: 150px; text-align: center">Número
                                                estudiantes
                                                asignados
                                            </th>
                                            <th class="text-center" style="width: 70px; text-align: center">
                                                Acciones
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        {% if carreramateriasprofesor %}
                                            {% for carrera in carreramateriasprofesor %}
                                                <tr>
                                                    <td data-title='Carrera'>{{ carrera }}</td>
                                                    {% with numero=carrera|args:profesor|args:periodo|call:'numero_estudiantes' %}
                                                        <td>{{ numero }}</td>
                                                    {% endwith %}
                                                    {#                                                    <td style="text-align: center;" data-title='Solicitus'>#}
                                                    {#                                                        {{ materia.solicitudes_pendiente }}#}
                                                    {#                                                    </td>#}
                                                    <td data-title='Acciones' style="text-align: center">
                                                        <div class="btn-group">
                                                            <a class="btn btn-mini dropdown-toggle"
                                                               data-toggle="dropdown"
                                                               href="javascript:;">Acciones<span
                                                                    class="caret"></span></a>
                                                            <ul class="dropdown-menu pull-right"
                                                                style="text-align: left">
                                                                {#                                                            <li><a class="tu bloqueo_pantalla" href="/pro_tutoria?action=ingresarseguimientosoporte&id={{ materia.id|encrypt }}"><span class="fa fa-plus"></span> Realizar seguimiento </a></li>#}
                                                                {#                                                            <li><a class="tu bloqueo_pantalla" href="/pro_tutoria?action=visualizarseguimientosoporte&id={{ materia.id|encrypt }}"><span class="fa fa-eye"></span> Visualizar registro seguimiento </a></li>#}
                                                                <li><a class="tu bloqueo_pantalla"
                                                                       href='/pro_tutoria?action=veralumnossoporte&id={{ carrera.id|encrypt }}'><span
                                                                        class="fa fa-eye"></span> Ver alumnos de la
                                                                    Carrera</a>
                                                                </li>
                                                                <li>
                                                                    <a href="/pro_tutoria?action=descargarsoportte&id={{ carrera.id|encrypt }}"><i
                                                                            class="fa fa-file-excel-o fa-lg"></i>
                                                                        Descargar
                                                                        alumnos excel</a></li>
                                                            </ul>
                                                        </div>
                                                    </td>
                                                </tr>
                                            {% endfor %}
                                        {% else %}
                                            <tr>
                                                <td colspan="6" style="text-align: center">NO TIENE ASIGNATURAS EN
                                                    EL
                                                    DISTRIBUTIVO
                                                </td>
                                            </tr>
                                        {% endif %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="pills-profile2" role="tabpanel" aria-labelledby="pills-profile2-tab">
                    <div class="container-fluid">
                        <div class='row'>
                            <div class="col-sm-10">
                                <label for="id_estadosolicitud"><b>Estado:</b> </label>
                                <select id="id_estadosolicitud" style="width: 40%" name="estadosolicitud">
                                    {% for e in estados %}
                                        <option value="{{ e.0 }}"
                                                {% if e.0 == estado_seleccionado %}selected{% endif %}>{{ e.1|lower|capfirst }}</option>
                                    {% endfor %}
                                </select>
                                <br><br><span
                                    class="label label-info"> Total de registros - {{ solicitudes.count }} </span>
                            </div>
                        </div>
                        <br>
                        <div class="card mb-4">
                            <div class="card-body border-top border-6 rounded-3 border-dark-info">
                                <div class="table-responsive-xxl">
                                    <table class='table table-bordered table-striped'>
                                        <thead class="table-light">
                                        <tr>
                                            <th class="text-center" style="width: 5%; text-align: center">
                                                N°Solicitud
                                            </th>
                                            <th class="text-center" style="width: 8%; text-align: center">Fecha
                                                Solicitud
                                            </th>
                                            <th class="text-center" style="width: 25%; text-align: center">
                                                Estudiante
                                            </th>
                                            <th class="text-center" style="text-align: center">Solicitud</th>
                                            <th class="text-center" style="width: 10%; text-align: center">Archivo
                                            </th>
                                            <th class="text-center" style="width: 5%; text-align: center">Acciones
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        {% if solicitudes %}
                                            {% for solicitud in solicitudes %}
                                                <tr>
                                                    <td style="text-align: center"><span
                                                            class="label label-success">{{ solicitud.id|stringformat:"05d" }}</span>
                                                    </td>
                                                    <td style="text-align: center">{{ solicitud.fecha_creacion|date:'Y-m-d' }}</td>
                                                    <td>
                                                        {{ solicitud.matricula.inscripcion.persona.nombre_completo_inverso }}<br>
                                                        <strong>Cédula: </strong> {{ solicitud.matricula.inscripcion.persona.cedula }}
                                                    </td>
                                                    <td style="text-align: justify">
                                                        <strong>Tipo: </strong> {{ solicitud.get_tipo_display }}<br>
                                                        {{ solicitud.descripcion }}
                                                    </td>
                                                    <td style="text-align: center">
                                                        {% if solicitud.archivo %}
                                                            <a href='{{ solicitud.archivo.url }}' target="_blank"
                                                               class='btn btn-info btn-mini tu' title="Descargar"><i
                                                                    class="fa fa-download  "></i></a>{% endif %}
                                                    </td>
                                                    <td style="text-align: center">
                                                        <div class="btn-group" style="text-align: left">
                                                            <a class="btn btn-mini dropdown-toggle"
                                                               data-toggle="dropdown"
                                                               href="javascript:;">Acciones<span
                                                                    class="caret"></span>
                                                            </a>
                                                            <ul class="dropdown-menu pull-right">
                                                                {% if solicitud.estado == 1 or solicitud.estado == 2 %}
                                                                    <li>
                                                                        <a href='/pro_tutoria?action=respondersolicitud&id={{ solicitud.id|encrypt }}&estado={{ estado_seleccionado }}'><i
                                                                                class='fa fa-eye '></i> Ver
                                                                            solicitud</a></li>
                                                                {% endif %}
                                                                <li><a class="verestudiante" href='javascript:;'
                                                                       id="{{ solicitud.matricula.inscripcion.id }}"><i
                                                                        class='fa fa-eye '></i> Ver datos del
                                                                    estudiante</a>
                                                                </li>
                                                                {% if solicitud.estado == 1 or solicitud.estado == 2 %}
                                                                    <li>
                                                                        <a href='/pro_tutoria?action=observacionsolicitud&id={{ solicitud.id|encrypt }}&estado={{ estado_seleccionado }}'><i
                                                                                class='fa fa-edit '></i> Ingresar
                                                                            observación
                                                                            adicional</a></li>
                                                                {% endif %}
                                                                <li><a class="verobservaciones" href='javascript:;'
                                                                       id="{{ solicitud.id }}"><i
                                                                        class='fa fa-eye '></i> Ver
                                                                    observaciones del solicitante</a></li>
                                                            </ul>
                                                        </div>
                                                    </td>
                                                </tr>
                                            {% endfor %}
                                        {% else %}
                                            <tr>
                                                <td colspan="6" style="text-align: center">NO TIENE SOLICITUDES</td>
                                            </tr>
                                        {% endif %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            {% endif %}
            <div class="tab-pane fade" id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab">
                <div class="container-fluid">
                    <div class="card mb-4">
                        <div class="card-body border-top border-6 rounded-3 border-dark-info">
                            <ul class="nav nav-pills mb-3" id="myTab" role="tablist">
                                {% for estado in estados %}
                                 <li class="nav-item" role="presentation">
                                    <button class="nav-link {% if forloop.first %}active{% endif %}" id="tab-{{ estado.0 }}-tab" data-bs-toggle="pill"
                                            data-bs-target="#tab-{{ estado.0 }}" type="button" role="tab" aria-controls="tab-{{ estado.0 }}"
                                            aria-selected="true">{{ estado.1|lower|capfirst }} ({{ estado.2 }})
                                    </button>
                                </li>
                                {% endfor %}
                            </ul>
                            <div class="tab-content" id="myTabContent">
                                {% for estado in estados %}
                                    <div class="tab-pane fade show {% if forloop.first %}active{% endif %}" id="tab-{{ estado.0 }}" role="tabpanel"
                                         aria-labelledby="tab-{{ estado.0 }}-tab">
                                        <div class="table-responsive-xxl">
                                            <table class='table table-bordered table-striped'>
                                                <thead class="table-light">
                                                <tr>
                                                    <th class="text-center" style="width: 220px">Estudiante</th>
                                                    <th class="text-center">Materia</th>
                                                    <th class="text-center" style="width: 60px">Tipo</th>
                                                    <th class="text-center" style="width: 400px">Observación</th>
                                                    <th class="text-center" style="width: 100px">Archivo</th>
                                                    <th class="text-center" style="width: 100px">Estado</th>
                                                    <th class="text-center" style="width: 100px">Fecha respuesta</th>
                                                    <th class="text-center" style="width: 80px"></th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                {% with solicitudesmimateria=profesor|args:periodo|args:estado.0|call:"solicitudesmimateria" %}
                                                    {% for solicitudmat in solicitudesmimateria %}
                                                        <tr>
                                                            <td>{{ solicitudmat.materiaasignada.matricula.inscripcion.persona.nombre_completo_minus }}</td>
                                                            <td>{{ solicitudmat.materiaasignada.materia.nombre_completo }}</td>
                                                            <td>{{ solicitudmat.get_tipo_display|lower|capfirst }}</td>
                                                            <td>{{ solicitudmat.descripcion }}</td>
                                                            <td>
                                                                {% if solicitudmat.archivo %}
                                                                    <a target="_blank"
                                                                       href="{{ solicitudmat.download_link }}"
                                                                       class="btn btn-success btn-mini"><i
                                                                            class="fa fa-download"></i>
                                                                        Descargar</a>
                                                                {% endif %}
                                                            </td>
                                                            <td>{{ solicitudmat.get_estado_display|lower|capfirst }}</td>
                                                            <td>{{ solicitudmat.fecharespuesta|date:"d-m-Y" }}</td>
                                                            <td class="text-center" data-title='Acciones'>
                                                                <div class="dropdown dropleft">
                                                                    <a href="javascript:void(0);"
                                                                       class="btn-icon btn btn-ghost btn-sm rounded-circle"
                                                                       data-bs-toggle="dropdown" data-offset="-140"
                                                                       aria-haspopup="true" aria-expanded="false">
                                                                        <i class="fa fa-ellipsis-v"
                                                                           aria-hidden="true"></i>
                                                                    </a>
                                                                    <ul class="dropdown-menu" x-placement="right-start">
                                                                        {#                                                        {% if solicitudmat.estado == 1 or solicitudmat.estado == 2 %}#}
                                                                        <li><a class="dropdown-item verestudiante"
                                                                               href="javascript:;"
                                                                               id="{{ solicitudmat.materiaasignada.matricula.inscripcion.id }}"><i
                                                                                class='fa fa-eye '></i>&nbsp;Información
                                                                            estudiante</a>
                                                                        </li>
                                                                        {#                                                        {% endif %}#}
                                                                        <li><a class="dropdown-item"
                                                                               href='/pro_tutoria?action=verobservacionesmimateria&id={{ solicitudmat.id }}'
                                                                               id="{{ solicitudmat.id }}"><i
                                                                                class='fa fa-comment '></i>&nbsp;
                                                                            Gestion de respuestas</a></li>
                                                                    </ul>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    {% empty %}
                                                        <tr>
                                                            <td colspan="10" class="text-center">
                                                                No existen solicitudes en estado "{{ estado.1|lower }}"
                                                            </td>
                                                        </tr>
                                                    {% endfor %}
                                                {% endwith %}

                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>

                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="pills-seguimiento" role="tabpanel"
                 aria-labelledby="pills-seguimiento-tab">
                <div class="container-fluid">
                    <div class='row'>
                        <div class="col-sm-12">
                            <form method="GET">
                                <div class="container-fluid">
                                    <div class="row">
                                        <div class="col-lg-3 col-md-3 col-sm-12">
                                            <div id="reportrange"
                                                 style="background: #fff; cursor: pointer; padding: 5px 10px; border: 1px solid #ccc; width: 100%">
                                                <i class="fa fa-calendar"></i>&nbsp;
                                                <span></span>
                                                <i class="fa fa-caret-down"></i>
                                            </div>
                                            <input type="hidden" id="id_fini" name="id_fini"
                                                   value="{{ desde|date:'d-m-Y' }}"/>
                                            <input type="hidden" id="id_ffin" name="id_ffin"
                                                   value="{{ hasta|date:'d-m-Y' }}"/>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>


                    {#   tabla de informacion de materias transversales#}
                    <div class="container-fluid">
                        <div class="card mb-4">
                            <div class="card-body border-top border-6 rounded-3 border-dark-info">
                                <div class="table-responsive-xxl">

                                    <table class='table table-bordered table-striped'>
                                        <thead class="table-light cabecera-fija">
                                        <tr>
                                            <th rowspan="2" style="width: 5%!important;text-align: center">N.</th>
                                            <th rowspan="2" style="width: 20%!important; text-align: left">Docente
                                            </th>
                                            <th rowspan="3" style="width: 54%!important; text-align: center">
                                                Paralelos
                                            </th>
                                            <th rowspan="2" style="width: 8%!important;text-align: center">#
                                                Paralelos
                                                Asignados
                                            </th>

                                            <th rowspan="2" style="width: 8%!important; text-align: center">#
                                                Seguimientos Realizados
                                            </th>

                                            <th rowspan="2" style="width: 5%!important; text-align: center"><i
                                                    class="fa fa-cog"></i></th>
                                        </tr>
                                        </thead>

                                        <tbody>
                                        {% for pm in profesores %}
                                            {% with profesorparalelos=pm|args:periodo|call:'profesorparalelos' %}
                                                <tr>
                                                    <td style="text-align: center;">{{ forloop.counter }}</td>
                                                    <td style="text-align: center">
                                                        {{ pm.persona.nombre_completo_minus }}
                                                    </td>

                                                    <td>
                                                        {% for paralelo in profesorparalelos %}
                                                            <p>
                                                                <b>{{ forloop.counter }}.</b> {{ paralelo.materia.nombre_completo }}
                                                            </p>
                                                        {% endfor %}
                                                    </td>

                                                    <td style="text-align: center;">{{ profesorparalelos|length }}</td>
                                                    {% with seguimientos=pm|args:periodo|args:desde|args:hasta|call:'seguimiento_profoserfecha' %}
                                                        <td style="text-align: center">{{ seguimientos|length }}</td>
                                                    {% endwith %}

                                                    <td class="text-center" data-title='Acciones'>
                                                        <div class="dropdown dropstart">
                                                            <a href="javascript:void(0);"
                                                               class="btn-icon btn btn-ghost btn-sm rounded-circle"
                                                               data-bs-toggle="dropdown" data-offset="-140"
                                                               aria-haspopup="true"
                                                               aria-expanded="false">
                                                                <i class="fa fa-ellipsis-v fs-6"
                                                                   aria-hidden="true"></i>
                                                            </a>

                                                            <ul class="dropdown-menu">

                                                                <a class="dropdown-item" href="javascript:void(0)"
                                                                   onclick="formMo('{{ pm.pk }}',{{ periodo.pk }}, 'Seguimientos - {{ pm.persona.nombre_completo_minus }}','visualizarseguimientotutor','modal-xl')"><i
                                                                        class="fa fa-edit dropdown-item-icon mb-1"></i>Ver detalle seguimiento realizado</a>
                                                            </ul>

                                                        </div>
                                                    </td>

                                                </tr>
                                            {% endwith %}
                                            {##}
                                        {% endfor %}
                                        </tbody>

                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


    </div>

    <div class="modal fade static" id="divmostrartarea" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document" id="wmodal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="paneltitle">Datos Estudiante</h3>
                </div>
                <div class="modal-body panelbody">

                </div>
                <div class="modal-footer">
                    <table class="pull-right">
                        <tr>
                            <td><a href="javascript:;" class="btn btn-default cerrartarea">Cerrar</a></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="divmostrartarea1" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Observaciones</h3>
        </div>
        <div class="modal-body panelbody1">

        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-default cerrartarea1">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>
    <div class="modal fade static" id="itemspanel_generar_seguimientovirtual" style="display: none;">
        <div class="modal-header">
            <h4 id="paneltitle">Ingresar un rango de fechas :</h4>
        </div>
        <div class="modal-body panelbody">
            <div class="alert alert-danger incompletogenerar_seguimientovirtual" style="display: none">
                <i class="fa fa-info-sign"></i> Seleccione un rango de fechas para continuar...!!!
            </div>
            <div style="text-align: center">
                PROFESOR: <span id="id_nommateria"></span><br>
                <input placeholder="fecha desde" type="text" value="{{ fechainicio }}" name="fini_virtual"
                       id="id_fini_virtual" style="width: 100px">
                <input placeholder="fecha hasta" type="text" value="{{ fechafin }}" name="ffin_virtual"
                       id="id_ffin_virtual" style="width: 100px">
                <input type="hidden" id="idreporte_virtual" name="idreporte_virtual" value="0">
                <input type="hidden" id="idmateria_virtual" name="idmateria_virtual" value="0">
            </div>
            <br>
        </div>
        <div class="modal-footer">
            <p style="text-align: center; margin-bottom: 0">
                <a href="javascript:;" class="btn btn-danger generar_seguimiento_virtual"><i class="fa fa-plus"></i>
                    Procesar</a>
                <a href="javascript:;" id="cancel_seguimiento_virtual" class="btn btn-info"> Cancelar</a>
            </p>
        </div>
    </div>
    <div class="modal fade static" id="itemspanel_respondermodal" style="display: none;">
        <div class="modal-header">
            <h4 id="paneltitle">Respoder al alumno: </h4>
        </div>
        <div class="modal-body panelbody" id="bodyrespuesta">
        </div>
        <div class="modal-footer">
            <p style="text-align: center; margin-bottom: 0">
                <a href="javascript:;" id="guardar_respuesta" class="btn btn-success"><i class="fa fa-save"></i> Guardar</a>
                <a href="javascript:;" class="btn btn-danger" data-dismiss="modal"> Cancelar</a>
            </p>
        </div>
    </div>
    {#-------------------------------------     #Modal materias transversales------------------------------------------------------- #}
    <div class="modal fade static" id="itemspanel" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-xl" role="document" id="w-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h4><b class="paneltitle">FORMULARIO MODAL</b></h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" id="close_top" aria-label="Close">
                    </button>
                </div>
                <div class="modal-body" style="padding: 1.5%;">
                    <form class="form-horizontal form-modal" autocomplete="off" method="post"
                          enctype="multipart/form-data" action="{{ request.path }}">
                        {% csrf_token %}
                        <div class="row panelbody">
                        </div>
                    </form>
                </div>
                <div class="modal-footer" id="footermodal">
                    <button type="button" class="btn btn-default" data-bs-dismiss="modal" id="cerrar"><i
                            class="fa fa-times"></i> Cerrar
                    </button>
                </div>
            </div>
        </div>
    </div>


    {##----------------------------------------------- modal del reporte----------------------------- --------#}

    <div class="modal fade static" id="modalreporte" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-md" role="document" id="w-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h4><b class="paneltitle">Resumen del seguimiento tutor</b></h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" id="close_top" aria-label="Close">
                    </button>
                </div>
                <div class="modal-body" style="padding: 1.5%;">
                    <form class="form-horizontal form-modal" autocomplete="off" method="post"
                          enctype="multipart/form-data" action="{{ request.path }}">
                        {% csrf_token %}
                        <div class="row panelbody">
                            <div class="container-fluid">
                                <input type="hidden" id="id_reporte_fecha" value="{{ reporte_3.id }}">

                                <div class="row">
                                    <div style=" padding-right: 5px; float: left">
                                        Rango de Fechas:
                                    </div>
                                    <div>
                                        <input id="id_fechasinforme" type="text" name="daterange" value=""/>
                                    </div>
                                </div>

                                <div class="row">
                                    <div style=" padding-right: 5px; float: left">
                                        Docentes:
                                    </div>
                                    <div>
                                        <select class="select" name="profes" id="id_profes" multiple
                                                style="width: 100%">
                                            {% for pm in profesores %}
                                                <option value="{{ pm.id }}">
                                                    {{ pm.persona.nombre_completo_minus }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>

                            </div>

                        </div>
                    </form>
                </div>
                <div class="modal-footer" id="footermodal">
                    <a id="btnresumentutor" href="javascript:;"
                       class="btn btn-success tu"> <i class='fa fa-print'></i>Importar</a>
                    <button type="button" class="btn btn-default" data-bs-dismiss="modal" id="cerrar"><i
                            class="fa fa-times"></i> Cerrar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade static" id="itemspanel_generar_seguimiento_tutor" style="display: none;" >
        <div class="modal-dialog modal-dialog-centered modal-md" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 id="paneltitle">INGRESAR UN RANGO DE FECHAS</h4>
                </div>
                <div class="modal-body panelbody">
                    <div class="row px-4">
                        <div class="col-12">
                            <div class="alert alert-danger incompletoseguimiento_general_tutor" style="display: none">
                                <i class="fa fa-info-sign"></i> Seleccione un rango de fechas para continuar...!!!
                            </div>
                            <div class="form-group mb-3">
                                <label for="id_fini_seguimiento_general_tutor" class="form-label p-0 m-0">Fecha desde: <span class="text-danger fw-bold">*</span></label>
                                <input type="date" class="form-control" name="fini_tutor" id="id_fini_seguimiento_general_tutor" aria-describedby="emailHelp">
                            </div>
                            <div class=" form-group mb-3">
                                <label for="id_ffin_seguimiento_general_tutor" class="form-label p-0 m-0">Fecha hasta: <span class="text-danger fw-bold">*</span></label>
                                <input type="date" class="form-control" name="ffin_tutor" id="id_ffin_seguimiento_general_tutor">
                                <input type="hidden" id="codmateria" name="codmateria" value="0">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <p style="text-align: center; margin-bottom: 0">
                        <a href="javascript:;" class="btn btn-success generar_seguimiento_general_tutor"><i class="fa fa-plus"></i> Procesar</a>
                        <a href="javascript:;" id="cancel_seguimiento_general_tutor" class="btn btn-danger"> &times; Cancelar</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
{% endblock %}